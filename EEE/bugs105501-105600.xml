<?xml version="1.0" encoding="UTF-8"?>
<infozilla-output>
  <Bug>
    <BugId amount="105501" />
    <CreationDate amount="2005-07-28 14:47:00 -0400" />
    <DupId amount="" />
    <classification amount="Tools" />
    <Product amount="TPTP Release Engineering" />
    <component amount="TPTP.Web" />
    <Version amount="4.1" />
    <rep_platform amount="All" />
    <op_sys amount="All" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>All images are broken in 'Getting started development guide' and it's out of date</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>All of the images in the 'Getting started development guide' available under the
main documentation are broken.

The document also seems to be out of date. e.g.: It still uses the term
'Hyades', has GEF listed as one of the requirements, and refers to Eclipse 2.1!

This document should also explain how the TPTP code is structured.
Removed the link to the outdated guide from the Documentation page until the 
guide can be updated. After the guide is updated, the link should be readded to 
the Development resource section of the Doc page.
The Hyades Development Guide has been removed and replaced by an updated TPTP 
Development Guide. The updates were made as per Hubert's recommendations (some 
content deemed unecessary was removed). The link from the TPTP Documentation 
page has been restored.
Verified
Closing</WithStack>
    <WithOutStack>All of the images in the 'Getting started development guide' available under the
main documentation are broken.

The document also seems to be out of date. e.g.: It still uses the term
'Hyades', has GEF listed as one of the requirements, and refers to Eclipse 2.1!

This document should also explain how the TPTP code is structured.
Removed the link to the outdated guide from the Documentation page until the 
guide can be updated. After the guide is updated, the link should be readded to 
the Development resource section of the Doc page.
The Hyades Development Guide has been removed and replaced by an updated TPTP 
Development Guide. The updates were made as per Hubert's recommendations (some 
content deemed unecessary was removed). The link from the TPTP Documentation 
page has been restored.
Verified
Closing</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="105502" />
    <CreationDate amount="2005-07-28 14:55:00 -0400" />
    <DupId amount="" />
    <classification amount="Tools" />
    <Product amount="TPTP Release Engineering" />
    <component amount="TPTP.Web" />
    <Version amount="4.2" />
    <rep_platform amount="All" />
    <op_sys amount="All" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>No information on how one can become a TPTP committer</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>There should be a documentation included under the 'process' category of
'Documentation for committers' that lists the process of how a contributor can
become a TPTP committer.
Removing invalid (pre-4.1) target milestone on bugzillas that are still open. 
Should have set target milestone of --- instead of 4.2 because enhancements have
to be booked by the PMC.
Moving this feature to a later Version because it isn't committed in the TPTP
4.1 feature plan.
Downgrading from "enhancement" to "normal" because I didn't have to write the doc - it existed already. I added a link in the section.
Closing</WithStack>
    <WithOutStack>There should be a documentation included under the 'process' category of
'Documentation for committers' that lists the process of how a contributor can
become a TPTP committer.
Removing invalid (pre-4.1) target milestone on bugzillas that are still open. 
Should have set target milestone of --- instead of 4.2 because enhancements have
to be booked by the PMC.
Moving this feature to a later Version because it isn't committed in the TPTP
4.1 feature plan.
Downgrading from "enhancement" to "normal" because I didn't have to write the doc - it existed already. I added a link in the section.
Closing</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="105503" />
    <CreationDate amount="2005-07-28 14:56:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="UI" />
    <Version amount="3.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows All" />
    <priority amount="P3" />
    <bug_severity amount="major" />
    <Summery>[ViewMgmt] Outline view loses toolbars on restart</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="5">
        <Lines>
          <Line>1) Open the Resource Perspective</Line>
          <Line>2) Open the Java Perspective</Line>
          <Line>3) Restart Eclipse</Line>
          <Line>4) Select the Resource perspective - toolbars are missing.</Line>
          <Line>Just for reference</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="VERIFIED" />
    <resolution amount="FIXED" />
    <WithStack>20050728

When you restart Eclipse with the Resource and Java perspective open and focus
on the Java perspective switching to the Resource perspective will result in
some of the views (the Outline in my case) not redrawing.

STEPS
1) Open the Resource Perspective
2) Open the Java Perspective
3) Restart Eclipse
4) Select the Resource perspective - toolbars are missing.
Just for reference

Perspective Switch test with the new code

-----
testPerspectiveSwitch:org.eclipse.jdt.ui.JavaPerspective,org.eclipse.debug.ui.DebugPerspective,editor
1.java
testPerspectiveSwitch:org.eclipse.jdt.ui.JavaPerspective,org.eclipse.debug.ui.DebugPerspective,editor
1.java: setUp...
GLOBAL UI - Perspective Switch
Scenario
'org.eclipse.ui.tests.performance.PerspectiveSwitchTest#testPerspectiveSwitch:org.eclipse.jdt.ui.JavaPerspective,org.eclipse.debug.ui.DebugPerspective,editor
1.java()' (average over 39 samples):
  Used Java Heap: -3210
  Working Set: -2310
  Committed: -3885
  Working Set Peak: 6.05K
  Elapsed Process: 100 ms
  Kernel time: 40 ms
  Page Faults: 2
  CPU Time: 101 ms
  GDI Objects: 0

testPerspectiveSwitch:org.eclipse.jdt.ui.JavaPerspective,org.eclipse.debug.ui.DebugPerspective,editor
1.java: tearDown...

-----
testPerspectiveSwitch:org.eclipse.ui.tests.performancePerspective1,org.eclipse.ui.tests.performancePerspective2,editor
1.perf_basic
testPerspectiveSwitch:org.eclipse.ui.tests.performancePerspective1,org.eclipse.ui.tests.performancePerspective2,editor
1.perf_basic: setUp...
Scenario
'org.eclipse.ui.tests.performance.PerspectiveSwitchTest#testPerspectiveSwitch:org.eclipse.ui.tests.performancePerspective1,org.eclipse.ui.tests.performancePerspective2,editor
1.perf_basic()' (average over 100 samples):
  Used Java Heap: 876
  Working Set: 7.36K
  Committed: 4.88K
  Working Set Peak: 5.04K
  Elapsed Process: 31 ms
  Kernel time: 15 ms
  Page Faults: 1
  CPU Time: 32 ms
  GDI Objects: 0

testPerspectiveSwitch:org.eclipse.ui.tests.performancePerspective1,org.eclipse.ui.tests.performancePerspective2,editor
1.perf_basic: tearDown...

-----
testPerspectiveSwitch:org.eclipse.ui.tests.dnd.dragdrop,org.eclipse.ui.tests.fastview_perspective,editor
1.perf_basic
testPerspectiveSwitch:org.eclipse.ui.tests.dnd.dragdrop,org.eclipse.ui.tests.fastview_perspective,editor
1.perf_basic: setUp...
Scenario
'org.eclipse.ui.tests.performance.PerspectiveSwitchTest#testPerspectiveSwitch:org.eclipse.ui.tests.dnd.dragdrop,org.eclipse.ui.tests.fastview_perspective,editor
1.perf_basic()' (average over 72 samples):
  Used Java Heap: -4365
  Working Set: 4.94K
  Committed: 682
  Working Set Peak: 5.72K
  Elapsed Process: 55 ms
  Kernel time: 23 ms
  Page Faults: 1
  CPU Time: 53 ms
  GDI Objects: 0

testPerspectiveSwitch:org.eclipse.ui.tests.dnd.dragdrop,org.eclipse.ui.tests.fastview_perspective,editor
1.perf_basic: tearDown...

-----
testPerspectiveSwitch:org.eclipse.jdt.ui.JavaPerspective,org.eclipse.ui.tests.util.EmptyPerspective,editor
1.perf_basic
testPerspectiveSwitch:org.eclipse.jdt.ui.JavaPerspective,org.eclipse.ui.tests.util.EmptyPerspective,editor
1.perf_basic: setUp...
Scenario
'org.eclipse.ui.tests.performance.PerspectiveSwitchTest#testPerspectiveSwitch:org.eclipse.jdt.ui.JavaPerspective,org.eclipse.ui.tests.util.EmptyPerspective,editor
1.perf_basic()' (average over 67 samples):
  Used Java Heap: 10.8K
  Working Set: -611
  Committed: -2628
  Working Set Peak: 5.43K
  Elapsed Process: 59 ms
  Kernel time: 21 ms
  Page Faults: 1
  CPU Time: 57 ms
  GDI Objects: 0

testPerspectiveSwitch:org.eclipse.jdt.ui.JavaPerspective,org.eclipse.ui.tests.util.EmptyPerspective,editor
1.perf_basic: tearDown...

-----
testPerspectiveSwitch:org.eclipse.ui.resourcePerspective,org.eclipse.jdt.ui.JavaPerspective,editor
1.java
testPerspectiveSwitch:org.eclipse.ui.resourcePerspective,org.eclipse.jdt.ui.JavaPerspective,editor
1.java: setUp...
Scenario
'org.eclipse.ui.tests.performance.PerspectiveSwitchTest#testPerspectiveSwitch:org.eclipse.ui.resourcePerspective,org.eclipse.jdt.ui.JavaPerspective,editor
1.java()' (average over 44 samples):
  Used Java Heap: -13072
  Working Set: 14.91K
  Committed: 6.36K
  Working Set Peak: 16.36K
  Elapsed Process: 90 ms
  Kernel time: 34 ms
  Page Faults: 6
  CPU Time: 88 ms
  GDI Objects: 0

testPerspectiveSwitch:org.eclipse.ui.resourcePerspective,org.eclipse.jdt.ui.JavaPerspective,editor
1.java: tearDown...

----- testOpenClosePerspectives:org.eclipse.ui.tests.util.EmptyPerspective2
testOpenClosePerspectives:org.eclipse.ui.tests.util.EmptyPerspective2: setUp...
Scenario
'org.eclipse.ui.tests.performance.OpenClosePerspectiveTest#testOpenClosePerspectives:org.eclipse.ui.tests.util.EmptyPerspective2()'
testOpenClosePerspectives:org.eclipse.ui.tests.util.EmptyPerspective2: tearDown...

(average over 8 samples):
  Used Java Heap: 5.57K
  Working Set: 16K
  Committed: -9728
  Working Set Peak: 16K
  Elapsed Process: 17 ms
  Kernel time: 7 ms
  Page Faults: 5
  CPU Time: 17 ms
  GDI Objects: 0

----- testOpenClosePerspectives:org.eclipse.ui.tests.performancePerspective1
testOpenClosePerspectives:org.eclipse.ui.tests.performancePerspective1: setUp...
LOCAL UI - Open/Close Performance Test Perspective1 Perspective
Scenario
'org.eclipse.ui.tests.performance.OpenClosePerspectiveTest#testOpenClosePerspectives:org.eclipse.ui.tests.performancePerspective1()'
testOpenClosePerspectives:org.eclipse.ui.tests.performancePerspective1: tearDown...

(average over 7 samples):
  Used Java Heap: -49876
  Working Set: 25.14K
  Committed: 0
  Working Set Peak: 24.57K
  Elapsed Process: 82 ms
  Kernel time: 33 ms
  Page Faults: 7
  CPU Time: 78 ms
  GDI Objects: 0

----- testOpenClosePerspectives:org.eclipse.ui.resourcePerspective
testOpenClosePerspectives:org.eclipse.ui.resourcePerspective: setUp...
Scenario
'org.eclipse.ui.tests.performance.OpenClosePerspectiveTest#testOpenClosePerspectives:org.eclipse.ui.resourcePerspective()'
testOpenClosePerspectives:org.eclipse.ui.resourcePerspective: tearDown...

(average over 7 samples):
  Used Java Heap: 15.17K
  Working Set: 29.71K
  Committed: 3.43K
  Working Set Peak: 29.71K
  Elapsed Process: 102 ms
  Kernel time: 55 ms
  Page Faults: 8
  CPU Time: 98 ms
  GDI Objects: 0

----- testOpenClosePerspectives:org.eclipse.jdt.ui.JavaPerspective
testOpenClosePerspectives:org.eclipse.jdt.ui.JavaPerspective: setUp...
Scenario
'org.eclipse.ui.tests.performance.OpenClosePerspectiveTest#testOpenClosePerspectives:org.eclipse.jdt.ui.JavaPerspective()'
testOpenClosePerspectives:org.eclipse.jdt.ui.JavaPerspective: tearDown...

(average over 7 samples):
  Used Java Heap: -46550
  Working Set: 97.71K
  Committed: 80.57K
  Working Set Peak: 97.71K
  Elapsed Process: 163 ms
  Kernel time: 64 ms
  Page Faults: 25
  CPU Time: 151 ms
  GDI Objects: 0

----- testOpenClosePerspectives:org.eclipse.debug.ui.DebugPerspective
testOpenClosePerspectives:org.eclipse.debug.ui.DebugPerspective: setUp...
Scenario
'org.eclipse.ui.tests.performance.OpenClosePerspectiveTest#testOpenClosePerspectives:org.eclipse.debug.ui.DebugPerspective()'
testOpenClosePerspectives:org.eclipse.debug.ui.DebugPerspective: tearDown...

(average over 6 samples):
  Used Java Heap: 110.43K
  Working Set: 3.33K
  Committed: -16384
  Working Set Peak: 19.33K
  Elapsed Process: 195 ms
  Kernel time: 91 ms
  Page Faults: 9
  CPU Time: 187 ms
  GDI Objects: 0


Here are the results in 3.1.1. Looks like this optimization is much faster but
we need to consider if it is going to break our layouts too much

-----
testPerspectiveSwitch:org.eclipse.jdt.ui.JavaPerspective,org.eclipse.debug.ui.DebugPerspective,editor
1.java
testPerspectiveSwitch:org.eclipse.jdt.ui.JavaPerspective,org.eclipse.debug.ui.DebugPerspective,editor
1.java: setUp...
GLOBAL UI - Perspective Switch
Scenario
'org.eclipse.ui.tests.performance.PerspectiveSwitchTest#testPerspectiveSwitch:org.eclipse.jdt.ui.JavaPerspective,org.eclipse.debug.ui.DebugPerspective,editor
1.java()' (average over 13 samples):
  Used Java Heap: -39961
  Working Set: 100.31K
  Committed: 115.08K
  Working Set Peak: 91.08K
  Elapsed Process: 313 ms
  Kernel time: 123 ms
  Page Faults: 55
  CPU Time: 309 ms
  GDI Objects: 0

testPerspectiveSwitch:org.eclipse.jdt.ui.JavaPerspective,org.eclipse.debug.ui.DebugPerspective,editor
1.java: tearDown...

-----
testPerspectiveSwitch:org.eclipse.ui.tests.performancePerspective1,org.eclipse.ui.tests.performancePerspective2,editor
1.perf_basic
testPerspectiveSwitch:org.eclipse.ui.tests.performancePerspective1,org.eclipse.ui.tests.performancePerspective2,editor
1.perf_basic: setUp...
Scenario
'org.eclipse.ui.tests.performance.PerspectiveSwitchTest#testPerspectiveSwitch:org.eclipse.ui.tests.performancePerspective1,org.eclipse.ui.tests.performancePerspective2,editor
1.perf_basic()' (average over 43 samples):
  Used Java Heap: -16953
  Working Set: 7.53K
  Committed: 7.07K
  Working Set Peak: 762
  Elapsed Process: 92 ms
  Kernel time: 49 ms
  Page Faults: 1
  CPU Time: 91 ms
  GDI Objects: 0

testPerspectiveSwitch:org.eclipse.ui.tests.performancePerspective1,org.eclipse.ui.tests.performancePerspective2,editor
1.perf_basic: tearDown...

-----
testPerspectiveSwitch:org.eclipse.ui.tests.dnd.dragdrop,org.eclipse.ui.tests.fastview_perspective,editor
1.perf_basic
testPerspectiveSwitch:org.eclipse.ui.tests.dnd.dragdrop,org.eclipse.ui.tests.fastview_perspective,editor
1.perf_basic: setUp...
Scenario
'org.eclipse.ui.tests.performance.PerspectiveSwitchTest#testPerspectiveSwitch:org.eclipse.ui.tests.dnd.dragdrop,org.eclipse.ui.tests.fastview_perspective,editor
1.perf_basic()' (average over 45 samples):
  Used Java Heap: -8206
  Working Set: 3.91K
  Committed: 3.55K
  Working Set Peak: 33.51K
  Elapsed Process: 89 ms
  Kernel time: 44 ms
  Page Faults: 10
  CPU Time: 83 ms
  GDI Objects: 0

testPerspectiveSwitch:org.eclipse.ui.tests.dnd.dragdrop,org.eclipse.ui.tests.fastview_perspective,editor
1.perf_basic: tearDown...

-----
testPerspectiveSwitch:org.eclipse.jdt.ui.JavaPerspective,org.eclipse.ui.tests.util.EmptyPerspective,editor
1.perf_basic
testPerspectiveSwitch:org.eclipse.jdt.ui.JavaPerspective,org.eclipse.ui.tests.util.EmptyPerspective,editor
1.perf_basic: setUp...
Scenario
'org.eclipse.ui.tests.performance.PerspectiveSwitchTest#testPerspectiveSwitch:org.eclipse.jdt.ui.JavaPerspective,org.eclipse.ui.tests.util.EmptyPerspective,editor
1.perf_basic()' (average over 28 samples):
  Used Java Heap: -2384
  Working Set: 5.29K
  Committed: -3510
  Working Set Peak: 0
  Elapsed Process: 145 ms
  Kernel time: 60 ms
  Page Faults: 25
  CPU Time: 138 ms
  GDI Objects: 0

testPerspectiveSwitch:org.eclipse.jdt.ui.JavaPerspective,org.eclipse.ui.tests.util.EmptyPerspective,editor
1.perf_basic: tearDown...

-----
testPerspectiveSwitch:org.eclipse.ui.resourcePerspective,org.eclipse.jdt.ui.JavaPerspective,editor
1.java
testPerspectiveSwitch:org.eclipse.ui.resourcePerspective,org.eclipse.jdt.ui.JavaPerspective,editor
1.java: setUp...
Scenario
'org.eclipse.ui.tests.performance.PerspectiveSwitchTest#testPerspectiveSwitch:org.eclipse.ui.resourcePerspective,org.eclipse.jdt.ui.JavaPerspective,editor
1.java()' (average over 17 samples):
  Used Java Heap: 35.45K
  Working Set: 20.71K
  Committed: -42164
  Working Set Peak: 22.59K
  Elapsed Process: 239 ms
  Kernel time: 97 ms
  Page Faults: 15
  CPU Time: 215 ms
testPerspectiveSwitch:org.eclipse.ui.resourcePerspective,org.eclipse.jdt.ui.JavaPerspective,editor
1.java: tearDown...

  GDI Objects: 0

----- testOpenClosePerspectives:org.eclipse.ui.tests.util.EmptyPerspective2
testOpenClosePerspectives:org.eclipse.ui.tests.util.EmptyPerspective2: setUp...
Scenario
'org.eclipse.ui.tests.performance.OpenClosePerspectiveTest#testOpenClosePerspectives:org.eclipse.ui.tests.util.EmptyPerspective2()'
(average over 8 samples):
  Used Java Heap: 196
  Working Set: 13K
  Committed: -146944
  Working Set Peak: 4.5K
  Elapsed Process: 21 ms
  Kernel time: 9 ms
  Page Faults: 4
  CPU Time: 21 ms
  GDI Objects: 0

testOpenClosePerspectives:org.eclipse.ui.tests.util.EmptyPerspective2: tearDown...

----- testOpenClosePerspectives:org.eclipse.ui.tests.performancePerspective1
testOpenClosePerspectives:org.eclipse.ui.tests.performancePerspective1: setUp...
LOCAL UI - Open/Close Performance Test Perspective1 Perspective
Scenario
'org.eclipse.ui.tests.performance.OpenClosePerspectiveTest#testOpenClosePerspectives:org.eclipse.ui.tests.performancePerspective1()'
testOpenClosePerspectives:org.eclipse.ui.tests.performancePerspective1: tearDown...

(average over 7 samples):
  Used Java Heap: -41938
  Working Set: 24.57K
  Committed: 4K
  Working Set Peak: 20.57K
  Elapsed Process: 78 ms
  Kernel time: 38 ms
  Page Faults: 7
  CPU Time: 75 ms
  GDI Objects: 0

----- testOpenClosePerspectives:org.eclipse.ui.resourcePerspective
testOpenClosePerspectives:org.eclipse.ui.resourcePerspective: setUp...
Scenario
'org.eclipse.ui.tests.performance.OpenClosePerspectiveTest#testOpenClosePerspectives:org.eclipse.ui.resourcePerspective()'
testOpenClosePerspectives:org.eclipse.ui.resourcePerspective: tearDown...

(average over 6 samples):
  Used Java Heap: 41.32K
  Working Set: 26.67K
  Committed: 0
  Working Set Peak: 27.33K
  Elapsed Process: 127 ms
  Kernel time: 67 ms
  Page Faults: 8
  CPU Time: 119 ms
  GDI Objects: 0

----- testOpenClosePerspectives:org.eclipse.jdt.ui.JavaPerspective
testOpenClosePerspectives:org.eclipse.jdt.ui.JavaPerspective: setUp...
Scenario
'org.eclipse.ui.tests.performance.OpenClosePerspectiveTest#testOpenClosePerspectives:org.eclipse.jdt.ui.JavaPerspective()'
testOpenClosePerspectives:org.eclipse.jdt.ui.JavaPerspective: tearDown...

(average over 6 samples):
  Used Java Heap: -27261
  Working Set: 69.33K
  Committed: 23.33K
  Working Set Peak: 64K
  Elapsed Process: 208 ms
  Kernel time: 85 ms
  Page Faults: 42
  CPU Time: 158 ms
  GDI Objects: 0

----- testOpenClosePerspectives:org.eclipse.debug.ui.DebugPerspective
testOpenClosePerspectives:org.eclipse.debug.ui.DebugPerspective: setUp...
Scenario
'org.eclipse.ui.tests.performance.OpenClosePerspectiveTest#testOpenClosePerspectives:org.eclipse.debug.ui.DebugPerspective()'
testOpenClosePerspectives:org.eclipse.debug.ui.DebugPerspective: tearDown...

(average over 7 samples):
  Used Java Heap: 111.62K
  Working Set: 38.29K
  Committed: 9.14K
  Working Set Peak: 38.86K
  Elapsed Process: 158 ms
  Kernel time: 78 ms
  Page Faults: 26
  CPU Time: 160 ms
  GDI Objects: 0


Created attachment 25433
Backout back for the workbench

Here is a patch for the workbench in case we need to back out for M1. I would
rather we didn't as the performance improvements are pretty impressive. If we
do we should try and put it back early in M2 and try to work through the issues
Created attachment 25434
Backout patch for the tests
This was caused by the patch to bug 104987. The patch moved a part's controls in
front of the presentations whenever it was selected. However, since it is (now)
possible to switch perspectives without changing the selection in every stack,
this sometimes left a control behind its presentation.

Rolled back the patch to bug 104987: the original approach was correct (setting
the control's z-order on creation, and leaving it alone afterwards).

This patch uses the same approach, but moves controls to the bottom by
explicitly naming the bottommost control rather than calling moveBelow(null).
This should work around bug 105213.

Fixed in HEAD.
Thanks very much Stefan - I was hoping we could keep such a good performance
improvment.
The steps given in the description work for me in I20050808-2000.</WithStack>
    <WithOutStack>20050728

When you restart Eclipse with the Resource and Java perspective open and focus
on the Java perspective switching to the Resource perspective will result in
some of the views (the Outline in my case) not redrawing.

STEPS
1) Open the Resource Perspective
2) Open the Java Perspective
3) Restart Eclipse
4) Select the Resource perspective - toolbars are missing.
Just for reference

Perspective Switch test with the new code

-----
testPerspectiveSwitch:org.eclipse.jdt.ui.JavaPerspective,org.eclipse.debug.ui.DebugPerspective,editor
1.java
testPerspectiveSwitch:org.eclipse.jdt.ui.JavaPerspective,org.eclipse.debug.ui.DebugPerspective,editor
1.java: setUp...
GLOBAL UI - Perspective Switch
Scenario
'org.eclipse.ui.tests.performance.PerspectiveSwitchTest#testPerspectiveSwitch:org.eclipse.jdt.ui.JavaPerspective,org.eclipse.debug.ui.DebugPerspective,editor
1.java()' (average over 39 samples):
  Used Java Heap: -3210
  Working Set: -2310
  Committed: -3885
  Working Set Peak: 6.05K
  Elapsed Process: 100 ms
  Kernel time: 40 ms
  Page Faults: 2
  CPU Time: 101 ms
  GDI Objects: 0

testPerspectiveSwitch:org.eclipse.jdt.ui.JavaPerspective,org.eclipse.debug.ui.DebugPerspective,editor
1.java: tearDown...

-----
testPerspectiveSwitch:org.eclipse.ui.tests.performancePerspective1,org.eclipse.ui.tests.performancePerspective2,editor
1.perf_basic
testPerspectiveSwitch:org.eclipse.ui.tests.performancePerspective1,org.eclipse.ui.tests.performancePerspective2,editor
1.perf_basic: setUp...
Scenario
'org.eclipse.ui.tests.performance.PerspectiveSwitchTest#testPerspectiveSwitch:org.eclipse.ui.tests.performancePerspective1,org.eclipse.ui.tests.performancePerspective2,editor
1.perf_basic()' (average over 100 samples):
  Used Java Heap: 876
  Working Set: 7.36K
  Committed: 4.88K
  Working Set Peak: 5.04K
  Elapsed Process: 31 ms
  Kernel time: 15 ms
  Page Faults: 1
  CPU Time: 32 ms
  GDI Objects: 0

testPerspectiveSwitch:org.eclipse.ui.tests.performancePerspective1,org.eclipse.ui.tests.performancePerspective2,editor
1.perf_basic: tearDown...

-----
testPerspectiveSwitch:org.eclipse.ui.tests.dnd.dragdrop,org.eclipse.ui.tests.fastview_perspective,editor
1.perf_basic
testPerspectiveSwitch:org.eclipse.ui.tests.dnd.dragdrop,org.eclipse.ui.tests.fastview_perspective,editor
1.perf_basic: setUp...
Scenario
'org.eclipse.ui.tests.performance.PerspectiveSwitchTest#testPerspectiveSwitch:org.eclipse.ui.tests.dnd.dragdrop,org.eclipse.ui.tests.fastview_perspective,editor
1.perf_basic()' (average over 72 samples):
  Used Java Heap: -4365
  Working Set: 4.94K
  Committed: 682
  Working Set Peak: 5.72K
  Elapsed Process: 55 ms
  Kernel time: 23 ms
  Page Faults: 1
  CPU Time: 53 ms
  GDI Objects: 0

testPerspectiveSwitch:org.eclipse.ui.tests.dnd.dragdrop,org.eclipse.ui.tests.fastview_perspective,editor
1.perf_basic: tearDown...

-----
testPerspectiveSwitch:org.eclipse.jdt.ui.JavaPerspective,org.eclipse.ui.tests.util.EmptyPerspective,editor
1.perf_basic
testPerspectiveSwitch:org.eclipse.jdt.ui.JavaPerspective,org.eclipse.ui.tests.util.EmptyPerspective,editor
1.perf_basic: setUp...
Scenario
'org.eclipse.ui.tests.performance.PerspectiveSwitchTest#testPerspectiveSwitch:org.eclipse.jdt.ui.JavaPerspective,org.eclipse.ui.tests.util.EmptyPerspective,editor
1.perf_basic()' (average over 67 samples):
  Used Java Heap: 10.8K
  Working Set: -611
  Committed: -2628
  Working Set Peak: 5.43K
  Elapsed Process: 59 ms
  Kernel time: 21 ms
  Page Faults: 1
  CPU Time: 57 ms
  GDI Objects: 0

testPerspectiveSwitch:org.eclipse.jdt.ui.JavaPerspective,org.eclipse.ui.tests.util.EmptyPerspective,editor
1.perf_basic: tearDown...

-----
testPerspectiveSwitch:org.eclipse.ui.resourcePerspective,org.eclipse.jdt.ui.JavaPerspective,editor
1.java
testPerspectiveSwitch:org.eclipse.ui.resourcePerspective,org.eclipse.jdt.ui.JavaPerspective,editor
1.java: setUp...
Scenario
'org.eclipse.ui.tests.performance.PerspectiveSwitchTest#testPerspectiveSwitch:org.eclipse.ui.resourcePerspective,org.eclipse.jdt.ui.JavaPerspective,editor
1.java()' (average over 44 samples):
  Used Java Heap: -13072
  Working Set: 14.91K
  Committed: 6.36K
  Working Set Peak: 16.36K
  Elapsed Process: 90 ms
  Kernel time: 34 ms
  Page Faults: 6
  CPU Time: 88 ms
  GDI Objects: 0

testPerspectiveSwitch:org.eclipse.ui.resourcePerspective,org.eclipse.jdt.ui.JavaPerspective,editor
1.java: tearDown...

----- testOpenClosePerspectives:org.eclipse.ui.tests.util.EmptyPerspective2
testOpenClosePerspectives:org.eclipse.ui.tests.util.EmptyPerspective2: setUp...
Scenario
'org.eclipse.ui.tests.performance.OpenClosePerspectiveTest#testOpenClosePerspectives:org.eclipse.ui.tests.util.EmptyPerspective2()'
testOpenClosePerspectives:org.eclipse.ui.tests.util.EmptyPerspective2: tearDown...

(average over 8 samples):
  Used Java Heap: 5.57K
  Working Set: 16K
  Committed: -9728
  Working Set Peak: 16K
  Elapsed Process: 17 ms
  Kernel time: 7 ms
  Page Faults: 5
  CPU Time: 17 ms
  GDI Objects: 0

----- testOpenClosePerspectives:org.eclipse.ui.tests.performancePerspective1
testOpenClosePerspectives:org.eclipse.ui.tests.performancePerspective1: setUp...
LOCAL UI - Open/Close Performance Test Perspective1 Perspective
Scenario
'org.eclipse.ui.tests.performance.OpenClosePerspectiveTest#testOpenClosePerspectives:org.eclipse.ui.tests.performancePerspective1()'
testOpenClosePerspectives:org.eclipse.ui.tests.performancePerspective1: tearDown...

(average over 7 samples):
  Used Java Heap: -49876
  Working Set: 25.14K
  Committed: 0
  Working Set Peak: 24.57K
  Elapsed Process: 82 ms
  Kernel time: 33 ms
  Page Faults: 7
  CPU Time: 78 ms
  GDI Objects: 0

----- testOpenClosePerspectives:org.eclipse.ui.resourcePerspective
testOpenClosePerspectives:org.eclipse.ui.resourcePerspective: setUp...
Scenario
'org.eclipse.ui.tests.performance.OpenClosePerspectiveTest#testOpenClosePerspectives:org.eclipse.ui.resourcePerspective()'
testOpenClosePerspectives:org.eclipse.ui.resourcePerspective: tearDown...

(average over 7 samples):
  Used Java Heap: 15.17K
  Working Set: 29.71K
  Committed: 3.43K
  Working Set Peak: 29.71K
  Elapsed Process: 102 ms
  Kernel time: 55 ms
  Page Faults: 8
  CPU Time: 98 ms
  GDI Objects: 0

----- testOpenClosePerspectives:org.eclipse.jdt.ui.JavaPerspective
testOpenClosePerspectives:org.eclipse.jdt.ui.JavaPerspective: setUp...
Scenario
'org.eclipse.ui.tests.performance.OpenClosePerspectiveTest#testOpenClosePerspectives:org.eclipse.jdt.ui.JavaPerspective()'
testOpenClosePerspectives:org.eclipse.jdt.ui.JavaPerspective: tearDown...

(average over 7 samples):
  Used Java Heap: -46550
  Working Set: 97.71K
  Committed: 80.57K
  Working Set Peak: 97.71K
  Elapsed Process: 163 ms
  Kernel time: 64 ms
  Page Faults: 25
  CPU Time: 151 ms
  GDI Objects: 0

----- testOpenClosePerspectives:org.eclipse.debug.ui.DebugPerspective
testOpenClosePerspectives:org.eclipse.debug.ui.DebugPerspective: setUp...
Scenario
'org.eclipse.ui.tests.performance.OpenClosePerspectiveTest#testOpenClosePerspectives:org.eclipse.debug.ui.DebugPerspective()'
testOpenClosePerspectives:org.eclipse.debug.ui.DebugPerspective: tearDown...

(average over 6 samples):
  Used Java Heap: 110.43K
  Working Set: 3.33K
  Committed: -16384
  Working Set Peak: 19.33K
  Elapsed Process: 195 ms
  Kernel time: 91 ms
  Page Faults: 9
  CPU Time: 187 ms
  GDI Objects: 0


Here are the results in 3.1.1. Looks like this optimization is much faster but
we need to consider if it is going to break our layouts too much

-----
testPerspectiveSwitch:org.eclipse.jdt.ui.JavaPerspective,org.eclipse.debug.ui.DebugPerspective,editor
1.java
testPerspectiveSwitch:org.eclipse.jdt.ui.JavaPerspective,org.eclipse.debug.ui.DebugPerspective,editor
1.java: setUp...
GLOBAL UI - Perspective Switch
Scenario
'org.eclipse.ui.tests.performance.PerspectiveSwitchTest#testPerspectiveSwitch:org.eclipse.jdt.ui.JavaPerspective,org.eclipse.debug.ui.DebugPerspective,editor
1.java()' (average over 13 samples):
  Used Java Heap: -39961
  Working Set: 100.31K
  Committed: 115.08K
  Working Set Peak: 91.08K
  Elapsed Process: 313 ms
  Kernel time: 123 ms
  Page Faults: 55
  CPU Time: 309 ms
  GDI Objects: 0

testPerspectiveSwitch:org.eclipse.jdt.ui.JavaPerspective,org.eclipse.debug.ui.DebugPerspective,editor
1.java: tearDown...

-----
testPerspectiveSwitch:org.eclipse.ui.tests.performancePerspective1,org.eclipse.ui.tests.performancePerspective2,editor
1.perf_basic
testPerspectiveSwitch:org.eclipse.ui.tests.performancePerspective1,org.eclipse.ui.tests.performancePerspective2,editor
1.perf_basic: setUp...
Scenario
'org.eclipse.ui.tests.performance.PerspectiveSwitchTest#testPerspectiveSwitch:org.eclipse.ui.tests.performancePerspective1,org.eclipse.ui.tests.performancePerspective2,editor
1.perf_basic()' (average over 43 samples):
  Used Java Heap: -16953
  Working Set: 7.53K
  Committed: 7.07K
  Working Set Peak: 762
  Elapsed Process: 92 ms
  Kernel time: 49 ms
  Page Faults: 1
  CPU Time: 91 ms
  GDI Objects: 0

testPerspectiveSwitch:org.eclipse.ui.tests.performancePerspective1,org.eclipse.ui.tests.performancePerspective2,editor
1.perf_basic: tearDown...

-----
testPerspectiveSwitch:org.eclipse.ui.tests.dnd.dragdrop,org.eclipse.ui.tests.fastview_perspective,editor
1.perf_basic
testPerspectiveSwitch:org.eclipse.ui.tests.dnd.dragdrop,org.eclipse.ui.tests.fastview_perspective,editor
1.perf_basic: setUp...
Scenario
'org.eclipse.ui.tests.performance.PerspectiveSwitchTest#testPerspectiveSwitch:org.eclipse.ui.tests.dnd.dragdrop,org.eclipse.ui.tests.fastview_perspective,editor
1.perf_basic()' (average over 45 samples):
  Used Java Heap: -8206
  Working Set: 3.91K
  Committed: 3.55K
  Working Set Peak: 33.51K
  Elapsed Process: 89 ms
  Kernel time: 44 ms
  Page Faults: 10
  CPU Time: 83 ms
  GDI Objects: 0

testPerspectiveSwitch:org.eclipse.ui.tests.dnd.dragdrop,org.eclipse.ui.tests.fastview_perspective,editor
1.perf_basic: tearDown...

-----
testPerspectiveSwitch:org.eclipse.jdt.ui.JavaPerspective,org.eclipse.ui.tests.util.EmptyPerspective,editor
1.perf_basic
testPerspectiveSwitch:org.eclipse.jdt.ui.JavaPerspective,org.eclipse.ui.tests.util.EmptyPerspective,editor
1.perf_basic: setUp...
Scenario
'org.eclipse.ui.tests.performance.PerspectiveSwitchTest#testPerspectiveSwitch:org.eclipse.jdt.ui.JavaPerspective,org.eclipse.ui.tests.util.EmptyPerspective,editor
1.perf_basic()' (average over 28 samples):
  Used Java Heap: -2384
  Working Set: 5.29K
  Committed: -3510
  Working Set Peak: 0
  Elapsed Process: 145 ms
  Kernel time: 60 ms
  Page Faults: 25
  CPU Time: 138 ms
  GDI Objects: 0

testPerspectiveSwitch:org.eclipse.jdt.ui.JavaPerspective,org.eclipse.ui.tests.util.EmptyPerspective,editor
1.perf_basic: tearDown...

-----
testPerspectiveSwitch:org.eclipse.ui.resourcePerspective,org.eclipse.jdt.ui.JavaPerspective,editor
1.java
testPerspectiveSwitch:org.eclipse.ui.resourcePerspective,org.eclipse.jdt.ui.JavaPerspective,editor
1.java: setUp...
Scenario
'org.eclipse.ui.tests.performance.PerspectiveSwitchTest#testPerspectiveSwitch:org.eclipse.ui.resourcePerspective,org.eclipse.jdt.ui.JavaPerspective,editor
1.java()' (average over 17 samples):
  Used Java Heap: 35.45K
  Working Set: 20.71K
  Committed: -42164
  Working Set Peak: 22.59K
  Elapsed Process: 239 ms
  Kernel time: 97 ms
  Page Faults: 15
  CPU Time: 215 ms
testPerspectiveSwitch:org.eclipse.ui.resourcePerspective,org.eclipse.jdt.ui.JavaPerspective,editor
1.java: tearDown...

  GDI Objects: 0

----- testOpenClosePerspectives:org.eclipse.ui.tests.util.EmptyPerspective2
testOpenClosePerspectives:org.eclipse.ui.tests.util.EmptyPerspective2: setUp...
Scenario
'org.eclipse.ui.tests.performance.OpenClosePerspectiveTest#testOpenClosePerspectives:org.eclipse.ui.tests.util.EmptyPerspective2()'
(average over 8 samples):
  Used Java Heap: 196
  Working Set: 13K
  Committed: -146944
  Working Set Peak: 4.5K
  Elapsed Process: 21 ms
  Kernel time: 9 ms
  Page Faults: 4
  CPU Time: 21 ms
  GDI Objects: 0

testOpenClosePerspectives:org.eclipse.ui.tests.util.EmptyPerspective2: tearDown...

----- testOpenClosePerspectives:org.eclipse.ui.tests.performancePerspective1
testOpenClosePerspectives:org.eclipse.ui.tests.performancePerspective1: setUp...
LOCAL UI - Open/Close Performance Test Perspective1 Perspective
Scenario
'org.eclipse.ui.tests.performance.OpenClosePerspectiveTest#testOpenClosePerspectives:org.eclipse.ui.tests.performancePerspective1()'
testOpenClosePerspectives:org.eclipse.ui.tests.performancePerspective1: tearDown...

(average over 7 samples):
  Used Java Heap: -41938
  Working Set: 24.57K
  Committed: 4K
  Working Set Peak: 20.57K
  Elapsed Process: 78 ms
  Kernel time: 38 ms
  Page Faults: 7
  CPU Time: 75 ms
  GDI Objects: 0

----- testOpenClosePerspectives:org.eclipse.ui.resourcePerspective
testOpenClosePerspectives:org.eclipse.ui.resourcePerspective: setUp...
Scenario
'org.eclipse.ui.tests.performance.OpenClosePerspectiveTest#testOpenClosePerspectives:org.eclipse.ui.resourcePerspective()'
testOpenClosePerspectives:org.eclipse.ui.resourcePerspective: tearDown...

(average over 6 samples):
  Used Java Heap: 41.32K
  Working Set: 26.67K
  Committed: 0
  Working Set Peak: 27.33K
  Elapsed Process: 127 ms
  Kernel time: 67 ms
  Page Faults: 8
  CPU Time: 119 ms
  GDI Objects: 0

----- testOpenClosePerspectives:org.eclipse.jdt.ui.JavaPerspective
testOpenClosePerspectives:org.eclipse.jdt.ui.JavaPerspective: setUp...
Scenario
'org.eclipse.ui.tests.performance.OpenClosePerspectiveTest#testOpenClosePerspectives:org.eclipse.jdt.ui.JavaPerspective()'
testOpenClosePerspectives:org.eclipse.jdt.ui.JavaPerspective: tearDown...

(average over 6 samples):
  Used Java Heap: -27261
  Working Set: 69.33K
  Committed: 23.33K
  Working Set Peak: 64K
  Elapsed Process: 208 ms
  Kernel time: 85 ms
  Page Faults: 42
  CPU Time: 158 ms
  GDI Objects: 0

----- testOpenClosePerspectives:org.eclipse.debug.ui.DebugPerspective
testOpenClosePerspectives:org.eclipse.debug.ui.DebugPerspective: setUp...
Scenario
'org.eclipse.ui.tests.performance.OpenClosePerspectiveTest#testOpenClosePerspectives:org.eclipse.debug.ui.DebugPerspective()'
testOpenClosePerspectives:org.eclipse.debug.ui.DebugPerspective: tearDown...

(average over 7 samples):
  Used Java Heap: 111.62K
  Working Set: 38.29K
  Committed: 9.14K
  Working Set Peak: 38.86K
  Elapsed Process: 158 ms
  Kernel time: 78 ms
  Page Faults: 26
  CPU Time: 160 ms
  GDI Objects: 0


Created attachment 25433
Backout back for the workbench

Here is a patch for the workbench in case we need to back out for M1. I would
rather we didn't as the performance improvements are pretty impressive. If we
do we should try and put it back early in M2 and try to work through the issues
Created attachment 25434
Backout patch for the tests
This was caused by the patch to bug 104987. The patch moved a part's controls in
front of the presentations whenever it was selected. However, since it is (now)
possible to switch perspectives without changing the selection in every stack,
this sometimes left a control behind its presentation.

Rolled back the patch to bug 104987: the original approach was correct (setting
the control's z-order on creation, and leaving it alone afterwards).

This patch uses the same approach, but moves controls to the bottom by
explicitly naming the bottommost control rather than calling moveBelow(null).
This should work around bug 105213.

Fixed in HEAD.
Thanks very much Stefan - I was hoping we could keep such a good performance
improvment.
The steps given in the description work for me in I20050808-2000.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="105504" />
    <CreationDate amount="2005-07-28 15:00:00 -0400" />
    <DupId amount="" />
    <classification amount="WebTools" />
    <Product amount="WTP Webservices" />
    <component amount="jst.ws" />
    <Version amount="0.7" />
    <rep_platform amount="PC" />
    <op_sys amount="Linux-GTK" />
    <priority amount="P4" />
    <bug_severity amount="major" />
    <Summery>TVT 3.1 - TCT 461 - Non-externalized string</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="INVALID" />
    <WithStack>OS : Linux
Not must fix
Build date:25/07
Blocking: NO
Language: DEU
Bitmap Location: V:\defects\de\26.002830.jpg
Tester Name: Ruth Nestvold

Problem Description: When using Web Services in maximized mode, the status
messages at the bottom of the panel are in English.
To recreate:
Expand the Web Service panel to display completely.
Publish a project.
Move the mouse over the icons.
The status message "Transfering data from" at the bottom of the panel will
appear in English.

These strings need to be localized.
Created attachment 25424
String to externalize
We'll deal with this in WTP 1.0 or a WTP 0.7 maintenance stream as needed.
Thanks Jeff for looking at this.
The "Transfering data from localhost..." message comes from the browser. This 
is a browser problem, nothing we can fix in WTP.
Closed as invalid (browser issue).</WithStack>
    <WithOutStack>OS : Linux
Not must fix
Build date:25/07
Blocking: NO
Language: DEU
Bitmap Location: V:\defects\de\26.002830.jpg
Tester Name: Ruth Nestvold

Problem Description: When using Web Services in maximized mode, the status
messages at the bottom of the panel are in English.
To recreate:
Expand the Web Service panel to display completely.
Publish a project.
Move the mouse over the icons.
The status message "Transfering data from" at the bottom of the panel will
appear in English.

These strings need to be localized.
Created attachment 25424
String to externalize
We'll deal with this in WTP 1.0 or a WTP 0.7 maintenance stream as needed.
Thanks Jeff for looking at this.
The "Transfering data from localhost..." message comes from the browser. This 
is a browser problem, nothing we can fix in WTP.
Closed as invalid (browser issue).</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="105505" />
    <CreationDate amount="2005-07-28 15:02:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="PDE" />
    <component amount="UI" />
    <Version amount="3.1" />
    <rep_platform amount="PC" />
    <op_sys amount="All" />
    <priority amount="P3" />
    <bug_severity amount="minor" />
    <Summery>Plugin singleton instance code generation incorrect</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="7">
      <source_code type="singlecomment">
        <location start="75" end="107" />
        <code>//The shared instance.</code>
      </source_code>
      <source_code type="multicomment">
        <location start="149" end="209" />
        <code>/**
         * The constructor.
         */</code>
      </source_code>
      <source_code type="functiondef">
        <location start="210" end="280" />
        <code>public TestPlugin() {
                plugin = this;
        }</code>
      </source_code>
      <source_code type="singlecomment">
        <location start="629" end="661" />
        <code>//The shared instance.</code>
      </source_code>
      <source_code type="assignment">
        <location start="661" end="721" />
        <code>private static TestPlugin plugin = new TestPlugin();</code>
      </source_code>
      <source_code type="multicomment">
        <location start="722" end="782" />
        <code>/**
         * The constructor.
         */</code>
      </source_code>
      <source_code type="functiondef">
        <location start="783" end="839" />
        <code>public TestPlugin() {
                
        }</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="WORKSFORME" />
    <WithStack>When a new plug-in is created by the PDE wizard, it creates a constructor:

        //The shared instance.
        private static TestPlugin plugin;
        
        /**
         * The constructor.
         */
        public TestPlugin() {
                plugin = this;
        }

Now I don't know off the top of my head when a plugin would or could attempt to
be instantiated in two separate threads at the same time, but the assignment of
the singleton instance in the constructor like this might be problematic.  See:

http://www-128.ibm.com/developerworks/java/library/j-dcl.html

Thus the generated code should instead be:

        //The shared instance.
        private static TestPlugin plugin = new TestPlugin();
        
        /**
         * The constructor.
         */
        public TestPlugin() {
                
        }

and plugins should only be referenced via "getDefault()" calls and not through
constructors.
True True.  I think what you cite is a bit safer.  Though i believe Eclipse
itself provides for the singletonness, and not the Plugin class.  However, I
don't think there is any restruction on other plugins creating instances of your
Plugin class which would certainly post a serious problem in this case.
spoke too soon.  There is the issue of how to get the same instance the
environment is instantiating and calling start and stop on.
Why can't the environment use getDefault() to retrieve the instance of the 
plugin on which it will call start(), stop(), etc.?
Actually both approaches are incorrect.  Static variables should not be used 
at all because they subvert the control over single instance or multiple 
instance that is part of the environments job.  There is a way in the manifest 
to indicate if your plugin will be a single instance or multiple instance.  
You could say the existing approach does not have the 'incomplete 
instantiation' issue associated with this kind of singleton technique since 
the environment is controlling and ensuring only 1 instance will be there.  
But if the environment is controlling that, why do we need to hold onto the 
reference?

The proper way for any other plugins that need your plugin should be going 
through the environment to get it and not through a static variable. 

But if you use either method but the environment creates multiple instances of 
your plugin due the the manifest saying its ok, then you will again have a big 
problem.  This looks like a pretty big issue.  

The issue you filed does belong against PDE, but the overall idea of having a 
static variable to get the plugin instance belongs against Platform.  Maybe 
this is something left over from days before osgi?  Ill start a thread in the 
newsgroup to see if there is something being overlooked here.  Its not really 
a minor issue.
Not to really open this issue but...

- the static for getting a plugin is a hold over. In fact, Plugin itself is a 
hold over from pre OSGi days.  

- Using the static is actually not a problem as any given plugin refering to 
another will see just one of the other plugins.  So, I could have 10 versions 
of plugin A, all with APlugin class but plugin B that requires A will see just 
one.  

We are actively reviewing the role and nature of the Plugin class and various 
other parts of the Runtime for 3.2.  At that time the PDE wizards will be 
updated accordingly.  For now the current behavior appears to be correct.

I;ll leave this for Wassim to close since he got upity with me the last time I 
messed with his bug reports... ;-)
and we just heard it from the horse's mouth.  Thanks Jeff.  closing.</WithStack>
    <WithOutStack>When a new plug-in is created by the PDE wizard, it creates a constructor:

        //The shared instance.
        private static TestPlugin plugin;
        
        /**
         * The constructor.
         */
        public TestPlugin() {
                plugin = this;
        }

Now I don't know off the top of my head when a plugin would or could attempt to
be instantiated in two separate threads at the same time, but the assignment of
the singleton instance in the constructor like this might be problematic.  See:

http://www-128.ibm.com/developerworks/java/library/j-dcl.html

Thus the generated code should instead be:

        //The shared instance.
        private static TestPlugin plugin = new TestPlugin();
        
        /**
         * The constructor.
         */
        public TestPlugin() {
                
        }

and plugins should only be referenced via "getDefault()" calls and not through
constructors.
True True.  I think what you cite is a bit safer.  Though i believe Eclipse
itself provides for the singletonness, and not the Plugin class.  However, I
don't think there is any restruction on other plugins creating instances of your
Plugin class which would certainly post a serious problem in this case.
spoke too soon.  There is the issue of how to get the same instance the
environment is instantiating and calling start and stop on.
Why can't the environment use getDefault() to retrieve the instance of the 
plugin on which it will call start(), stop(), etc.?
Actually both approaches are incorrect.  Static variables should not be used 
at all because they subvert the control over single instance or multiple 
instance that is part of the environments job.  There is a way in the manifest 
to indicate if your plugin will be a single instance or multiple instance.  
You could say the existing approach does not have the 'incomplete 
instantiation' issue associated with this kind of singleton technique since 
the environment is controlling and ensuring only 1 instance will be there.  
But if the environment is controlling that, why do we need to hold onto the 
reference?

The proper way for any other plugins that need your plugin should be going 
through the environment to get it and not through a static variable. 

But if you use either method but the environment creates multiple instances of 
your plugin due the the manifest saying its ok, then you will again have a big 
problem.  This looks like a pretty big issue.  

The issue you filed does belong against PDE, but the overall idea of having a 
static variable to get the plugin instance belongs against Platform.  Maybe 
this is something left over from days before osgi?  Ill start a thread in the 
newsgroup to see if there is something being overlooked here.  Its not really 
a minor issue.
Not to really open this issue but...

- the static for getting a plugin is a hold over. In fact, Plugin itself is a 
hold over from pre OSGi days.  

- Using the static is actually not a problem as any given plugin refering to 
another will see just one of the other plugins.  So, I could have 10 versions 
of plugin A, all with APlugin class but plugin B that requires A will see just 
one.  

We are actively reviewing the role and nature of the Plugin class and various 
other parts of the Runtime for 3.2.  At that time the PDE wizards will be 
updated accordingly.  For now the current behavior appears to be correct.

I;ll leave this for Wassim to close since he got upity with me the last time I 
messed with his bug reports... ;-)
and we just heard it from the horse's mouth.  Thanks Jeff.  closing.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="105506" />
    <CreationDate amount="2005-07-28 15:07:00 -0400" />
    <DupId amount="" />
    <classification amount="WebTools" />
    <Product amount="WTP Source Editing" />
    <component amount="wst.xsd" />
    <Version amount="0.7" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Validation error resulting from DocType statement in xml.xsd</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="WORKSFORME" />
    <WithStack>A validation error occurs on an xsd file when using the namespace XML Schema 
file(xml.xsd) from W3C (http://www.w3.org/2001/xml.xsd)

Create testcase.xsd as below in a project, Right Click on testcase and 
select "Validate".  Both testcase.xsd and xml.xsd are in the same folder in 
this test case.

You should see validation errors on the import statement and this line "   
&lt;attribute ref="xml:base"/&gt;" in the testcase.xsd file.  

If this statement "&lt;!DOCTYPE xs:schema PUBLIC "-//W3C//DTD XMLSCHEMA 
200102//EN" "XMLSchema.dtd" &gt;" in the xml.xsd file is removed, the validation 
of testcase.xsd will work when retried.

Testcase.xsd
&lt;?xml version="1.0"?&gt;
&lt;schema  xmlns="http://www.w3.org/2001/XMLSchema" 
   xmlns:xml="http://www.w3.org/XML/1998/namespace"&gt;
  &lt;import namespace="http://www.w3.org/XML/1998/namespace" 
schemaLocation="xml.xsd"/&gt;
   &lt;attributeGroup name="stdAttrs"&gt;
    &lt;annotation&gt;
      &lt;documentation&gt;All elements have an ID&lt;/documentation&gt;
    &lt;/annotation&gt;
    &lt;attribute name="id" type="ID" use="optional"/&gt;
    &lt;attribute ref="xml:base"/&gt;
  &lt;/attributeGroup&gt;
 &lt;/schema&gt;

Here is xml.xsd:
&lt;?xml version='1.0'?&gt;
&lt;!DOCTYPE xs:schema PUBLIC "-//W3C//DTD XMLSCHEMA 200102//EN" "XMLSchema.dtd" &gt;
&lt;xs:schema targetNamespace="http://www.w3.org/XML/1998/namespace" 
xmlns:xs="http://www.w3.org/2001/XMLSchema" xml:lang="en"&gt;

 &lt;xs:annotation&gt;
  &lt;xs:documentation&gt;
   See http://www.w3.org/XML/1998/namespace.html and
   http://www.w3.org/TR/REC-xml for information about this namespace.

    This schema document describes the XML namespace, in a form
    suitable for import by other schema documents.  

    Note that local names in this namespace are intended to be defined
    only by the World Wide Web Consortium or its subgroups.  The
    following names are currently defined in this namespace and should
    not be used with conflicting semantics by any Working Group,
    specification, or document instance:

    base (as an attribute name): denotes an attribute whose value
         provides a URI to be used as the base for interpreting any
         relative URIs in the scope of the element on which it
         appears; its value is inherited.  This name is reserved
         by virtue of its definition in the XML Base specification.

    lang (as an attribute name): denotes an attribute whose value
         is a language code for the natural language of the content of
         any element; its value is inherited.  This name is reserved
         by virtue of its definition in the XML specification.
  
    space (as an attribute name): denotes an attribute whose
         value is a keyword indicating what whitespace processing
         discipline is intended for the content of the element; its
         value is inherited.  This name is reserved by virtue of its
         definition in the XML specification.

    Father (in any context at all): denotes Jon Bosak, the chair of 
         the original XML Working Group.  This name is reserved by 
         the following decision of the W3C XML Plenary and 
         XML Coordination groups:

             In appreciation for his vision, leadership and dedication
             the W3C XML Plenary on this 10th day of February, 2000
             reserves for Jon Bosak in perpetuity the XML name
             xml:Father
  &lt;/xs:documentation&gt;
 &lt;/xs:annotation&gt;

 &lt;xs:annotation&gt;
  &lt;xs:documentation&gt;This schema defines attributes and an attribute group
        suitable for use by
        schemas wishing to allow xml:base, xml:lang or xml:space attributes
        on elements they define.

        To enable this, such a schema must import this schema
        for the XML namespace, e.g. as follows:
        &amp;lt;schema . . .&gt;
         . . .
         &amp;lt;import namespace="http://www.w3.org/XML/1998/namespace"
                    schemaLocation="http://www.w3.org/2001/03/xml.xsd"/&gt;

        Subsequently, qualified reference to any of the attributes
        or the group defined below will have the desired effect, e.g.

        &amp;lt;type . . .&gt;
         . . .
         &amp;lt;attributeGroup ref="xml:specialAttrs"/&gt;
 
         will define a type which will schema-validate an instance
         element with any of those attributes&lt;/xs:documentation&gt;
 &lt;/xs:annotation&gt;

 &lt;xs:annotation&gt;
  &lt;xs:documentation&gt;In keeping with the XML Schema WG's standard versioning
   policy, this schema document will persist at
   http://www.w3.org/2001/03/xml.xsd.
   At the date of issue it can also be found at
   http://www.w3.org/2001/xml.xsd.
   The schema document at that URI may however change in the future,
   in order to remain compatible with the latest version of XML Schema
   itself.  In other words, if the XML Schema namespace changes, the version
   of this document at
   http://www.w3.org/2001/xml.xsd will change
   accordingly; the version at
   http://www.w3.org/2001/03/xml.xsd will not change.
  &lt;/xs:documentation&gt;
 &lt;/xs:annotation&gt;

 &lt;xs:attribute name="lang" type="xs:language"&gt;
  &lt;xs:annotation&gt;
   &lt;xs:documentation&gt;In due course, we should install the relevant ISO 2- and 3-
letter
         codes as the enumerated possible values . . .&lt;/xs:documentation&gt;
  &lt;/xs:annotation&gt;
 &lt;/xs:attribute&gt;

 &lt;xs:attribute name="space" default="preserve"&gt;
  &lt;xs:simpleType&gt;
   &lt;xs:restriction base="xs:NCName"&gt;
    &lt;xs:enumeration value="default"/&gt;
    &lt;xs:enumeration value="preserve"/&gt;
   &lt;/xs:restriction&gt;
  &lt;/xs:simpleType&gt;
 &lt;/xs:attribute&gt;

 &lt;xs:attribute name="base" type="xs:anyURI"&gt;
  &lt;xs:annotation&gt;
   &lt;xs:documentation&gt;See http://www.w3.org/TR/xmlbase/ for
                     information about this attribute.&lt;/xs:documentation&gt;
  &lt;/xs:annotation&gt;
 &lt;/xs:attribute&gt;

 &lt;xs:attributeGroup name="specialAttrs"&gt;
  &lt;xs:attribute ref="xml:base"/&gt;
  &lt;xs:attribute ref="xml:lang"/&gt;
  &lt;xs:attribute ref="xml:space"/&gt;
 &lt;/xs:attributeGroup&gt;

&lt;/xs:schema&gt;
Lawrence, can you please take a look.  Thx.
The xml.xsd included in the problem description does not match the current xml.xsd located at http://www.w3.org/2001/xml.xsd. (Do to the long time this bug has been open it is possible the schema has been modified.) I can reproduce the problem with the xml.xsd in the description but using the current version available online does not result in any errors.

I'm resolving this as worksforme as using the current version of xml.xsd does not result in any errors using WTP 1.5RC1a.
This is part of a mass update to close out all stale WTP bugs which are in the resolved state without an appropriate targeted version.  If you feel this bug was closed inappropriately, please reopen.</WithStack>
    <WithOutStack>A validation error occurs on an xsd file when using the namespace XML Schema 
file(xml.xsd) from W3C (http://www.w3.org/2001/xml.xsd)

Create testcase.xsd as below in a project, Right Click on testcase and 
select "Validate".  Both testcase.xsd and xml.xsd are in the same folder in 
this test case.

You should see validation errors on the import statement and this line "   
&lt;attribute ref="xml:base"/&gt;" in the testcase.xsd file.  

If this statement "&lt;!DOCTYPE xs:schema PUBLIC "-//W3C//DTD XMLSCHEMA 
200102//EN" "XMLSchema.dtd" &gt;" in the xml.xsd file is removed, the validation 
of testcase.xsd will work when retried.

Testcase.xsd
&lt;?xml version="1.0"?&gt;
&lt;schema  xmlns="http://www.w3.org/2001/XMLSchema" 
   xmlns:xml="http://www.w3.org/XML/1998/namespace"&gt;
  &lt;import namespace="http://www.w3.org/XML/1998/namespace" 
schemaLocation="xml.xsd"/&gt;
   &lt;attributeGroup name="stdAttrs"&gt;
    &lt;annotation&gt;
      &lt;documentation&gt;All elements have an ID&lt;/documentation&gt;
    &lt;/annotation&gt;
    &lt;attribute name="id" type="ID" use="optional"/&gt;
    &lt;attribute ref="xml:base"/&gt;
  &lt;/attributeGroup&gt;
 &lt;/schema&gt;

Here is xml.xsd:
&lt;?xml version='1.0'?&gt;
&lt;!DOCTYPE xs:schema PUBLIC "-//W3C//DTD XMLSCHEMA 200102//EN" "XMLSchema.dtd" &gt;
&lt;xs:schema targetNamespace="http://www.w3.org/XML/1998/namespace" 
xmlns:xs="http://www.w3.org/2001/XMLSchema" xml:lang="en"&gt;

 &lt;xs:annotation&gt;
  &lt;xs:documentation&gt;
   See http://www.w3.org/XML/1998/namespace.html and
   http://www.w3.org/TR/REC-xml for information about this namespace.

    This schema document describes the XML namespace, in a form
    suitable for import by other schema documents.  

    Note that local names in this namespace are intended to be defined
    only by the World Wide Web Consortium or its subgroups.  The
    following names are currently defined in this namespace and should
    not be used with conflicting semantics by any Working Group,
    specification, or document instance:

    base (as an attribute name): denotes an attribute whose value
         provides a URI to be used as the base for interpreting any
         relative URIs in the scope of the element on which it
         appears; its value is inherited.  This name is reserved
         by virtue of its definition in the XML Base specification.

    lang (as an attribute name): denotes an attribute whose value
         is a language code for the natural language of the content of
         any element; its value is inherited.  This name is reserved
         by virtue of its definition in the XML specification.
  
    space (as an attribute name): denotes an attribute whose
         value is a keyword indicating what whitespace processing
         discipline is intended for the content of the element; its
         value is inherited.  This name is reserved by virtue of its
         definition in the XML specification.

    Father (in any context at all): denotes Jon Bosak, the chair of 
         the original XML Working Group.  This name is reserved by 
         the following decision of the W3C XML Plenary and 
         XML Coordination groups:

             In appreciation for his vision, leadership and dedication
             the W3C XML Plenary on this 10th day of February, 2000
             reserves for Jon Bosak in perpetuity the XML name
             xml:Father
  &lt;/xs:documentation&gt;
 &lt;/xs:annotation&gt;

 &lt;xs:annotation&gt;
  &lt;xs:documentation&gt;This schema defines attributes and an attribute group
        suitable for use by
        schemas wishing to allow xml:base, xml:lang or xml:space attributes
        on elements they define.

        To enable this, such a schema must import this schema
        for the XML namespace, e.g. as follows:
        &amp;lt;schema . . .&gt;
         . . .
         &amp;lt;import namespace="http://www.w3.org/XML/1998/namespace"
                    schemaLocation="http://www.w3.org/2001/03/xml.xsd"/&gt;

        Subsequently, qualified reference to any of the attributes
        or the group defined below will have the desired effect, e.g.

        &amp;lt;type . . .&gt;
         . . .
         &amp;lt;attributeGroup ref="xml:specialAttrs"/&gt;
 
         will define a type which will schema-validate an instance
         element with any of those attributes&lt;/xs:documentation&gt;
 &lt;/xs:annotation&gt;

 &lt;xs:annotation&gt;
  &lt;xs:documentation&gt;In keeping with the XML Schema WG's standard versioning
   policy, this schema document will persist at
   http://www.w3.org/2001/03/xml.xsd.
   At the date of issue it can also be found at
   http://www.w3.org/2001/xml.xsd.
   The schema document at that URI may however change in the future,
   in order to remain compatible with the latest version of XML Schema
   itself.  In other words, if the XML Schema namespace changes, the version
   of this document at
   http://www.w3.org/2001/xml.xsd will change
   accordingly; the version at
   http://www.w3.org/2001/03/xml.xsd will not change.
  &lt;/xs:documentation&gt;
 &lt;/xs:annotation&gt;

 &lt;xs:attribute name="lang" type="xs:language"&gt;
  &lt;xs:annotation&gt;
   &lt;xs:documentation&gt;In due course, we should install the relevant ISO 2- and 3-
letter
         codes as the enumerated possible values . . .&lt;/xs:documentation&gt;
  &lt;/xs:annotation&gt;
 &lt;/xs:attribute&gt;

 &lt;xs:attribute name="space" default="preserve"&gt;
  &lt;xs:simpleType&gt;
   &lt;xs:restriction base="xs:NCName"&gt;
    &lt;xs:enumeration value="default"/&gt;
    &lt;xs:enumeration value="preserve"/&gt;
   &lt;/xs:restriction&gt;
  &lt;/xs:simpleType&gt;
 &lt;/xs:attribute&gt;

 &lt;xs:attribute name="base" type="xs:anyURI"&gt;
  &lt;xs:annotation&gt;
   &lt;xs:documentation&gt;See http://www.w3.org/TR/xmlbase/ for
                     information about this attribute.&lt;/xs:documentation&gt;
  &lt;/xs:annotation&gt;
 &lt;/xs:attribute&gt;

 &lt;xs:attributeGroup name="specialAttrs"&gt;
  &lt;xs:attribute ref="xml:base"/&gt;
  &lt;xs:attribute ref="xml:lang"/&gt;
  &lt;xs:attribute ref="xml:space"/&gt;
 &lt;/xs:attributeGroup&gt;

&lt;/xs:schema&gt;
Lawrence, can you please take a look.  Thx.
The xml.xsd included in the problem description does not match the current xml.xsd located at http://www.w3.org/2001/xml.xsd. (Do to the long time this bug has been open it is possible the schema has been modified.) I can reproduce the problem with the xml.xsd in the description but using the current version available online does not result in any errors.

I'm resolving this as worksforme as using the current version of xml.xsd does not result in any errors using WTP 1.5RC1a.
This is part of a mass update to close out all stale WTP bugs which are in the resolved state without an appropriate targeted version.  If you feel this bug was closed inappropriately, please reopen.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="105507" />
    <CreationDate amount="2005-07-28 15:13:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="SWT" />
    <Version amount="3.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>SWT_AWT.new_Frame windows in multimonitor have performance problems</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="6">
      <source_code type="assignment">
        <location start="948" end="1016" />
        <code>private static final String CURRENT_MONITOR = "swt_awt.monitor";</code>
      </source_code>
      <source_code type="functioncall">
        <location start="1065" end="1126" />
        <code>parent.setData(CURRENT_MONITOR, parent.getMonitor());</code>
      </source_code>
      <source_code type="functiondef">
        <location start="1127" end="1436" />
        <code>parent.getShell().addControlListener(new ControlListener() {
            public void controlMoved(ControlEvent e) {
                monitorCheck(parent, frame);
            }

            public void controlResized(ControlEvent e) {
                monitorCheck(parent, frame);
            }
        }</code>
      </source_code>
      <source_code type="multicomment">
        <location start="1444" end="1626" />
        <code>/**
     * The GraphicsConfiguration for the embedded frame needs to be updated
     * when the monitor for the parent changes.
     * @param control
     * @param frame
     */</code>
      </source_code>
      <source_code type="functiondef">
        <location start="1627" end="2100" />
        <code>static void monitorCheck(Control control, final Frame frame) {
        Monitor oldMonitor = (Monitor)control.getData(CURRENT_MONITOR);
        Monitor newMonitor = control.getMonitor();
        if (!oldMonitor.equals(newMonitor)) {
            control.setData(CURRENT_MONITOR, newMonitor);
            EventQueue.invokeLater(new Runnable() {
                public void run() {
                    monitorChange(frame);
                }
            });
        }
    }</code>
      </source_code>
      <source_code type="functiondef">
        <location start="2106" end="2927" />
        <code>static void monitorChange(Frame frame) {
        ComponentPeer peer = frame.getPeer();
        if (displayChanged == null) {
            Class rt = peer.getClass();
            try {
                displayChanged = rt.getMethod("displayChanged", null);
            } catch (SecurityException ex) {
                ex.printStackTrace();
                return;
            } catch (NoSuchMethodException ex) {
                ex.printStackTrace();
                return;
            }
        }
        try {
            displayChanged.invoke(peer, null);
        } catch (IllegalArgumentException ex) {
            ex.printStackTrace();
        } catch (IllegalAccessException ex) {
            ex.printStackTrace();
        } catch (InvocationTargetException ex) {
            ex.printStackTrace();
        }
    }</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="1">
      <Enumeration lines="6">
        <Lines>
          <Line>1) SWT_AWT is really only 100% supported in JDK 1.5.  Does the problem happen</Line>
          <Line>in JDK 1.5?</Line>
          <Line>2) Can you please attach a very simple test case with some timing information</Line>
          <Line>so we can measure the improvement?</Line>
          <Line>3) Is the workaround only necessary on Windows or does the problem happen on</Line>
          <Line>the other AWT platforms (ie. Linux, Solaris)?</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="NEW" />
    <resolution amount="" />
    <WithStack>JDK 1.4.2, etc.

The problem:

Simply embed a JTable and JScrollPane in an SWT Shell.  Drag the window over to 
a different monitor and you will notice a severe performance degredation in 
scrolling.

What is happening is that the GraphicsConfiguration on the WEmbeddedFrame peer 
is in reference to the monitor in which the WEmbeddedFrame peer has been 
created.  JViewport in BLIT_SCROLL_MODE uses hardware acceleration for its 
offscreen (volatile) images, which are naturally much slower on any monitor 
other than the monitor for which it was originally created.

A cheap workaround is to set the JViewport to use BACKINGSTORE_SCROLL_MODE, but 
this causes flickering.

A much better workaround is to add a ControlListener to the shell and check if 
the Monitor for the shell changes, and if so call displayChanged() on the 
WEmbeddedFramePeer to reset the GraphicsConfiguration in response.  Ideally 
this code belongs in SWT_AWT.newFrame()

    private static final String CURRENT_MONITOR = "swt_awt.monitor";
    private static Method displayChanged;

...

        parent.setData(CURRENT_MONITOR, parent.getMonitor());
        parent.getShell().addControlListener(new ControlListener() {
            public void controlMoved(ControlEvent e) {
                monitorCheck(parent, frame);
            }

            public void controlResized(ControlEvent e) {
                monitorCheck(parent, frame);
            }
        });

...

    /**
     * The GraphicsConfiguration for the embedded frame needs to be updated
     * when the monitor for the parent changes.
     * @param control
     * @param frame
     */
    static void monitorCheck(Control control, final Frame frame) {
        Monitor oldMonitor = (Monitor)control.getData(CURRENT_MONITOR);
        Monitor newMonitor = control.getMonitor();
        if (!oldMonitor.equals(newMonitor)) {
            control.setData(CURRENT_MONITOR, newMonitor);
            EventQueue.invokeLater(new Runnable() {
                public void run() {
                    monitorChange(frame);
                }
            });
        }
    }
    
    static void monitorChange(Frame frame) {
        ComponentPeer peer = frame.getPeer();
        if (displayChanged == null) {
            Class rt = peer.getClass();
            try {
                displayChanged = rt.getMethod("displayChanged", null);
            } catch (SecurityException ex) {
                ex.printStackTrace();
                return;
            } catch (NoSuchMethodException ex) {
                ex.printStackTrace();
                return;
            }
        }
        try {
            displayChanged.invoke(peer, null);
        } catch (IllegalArgumentException ex) {
            ex.printStackTrace();
        } catch (IllegalAccessException ex) {
            ex.printStackTrace();
        } catch (InvocationTargetException ex) {
            ex.printStackTrace();
        }
    }
Shouldn't this kind of code be in AWT?
(In reply to comment #1)
&gt; Shouldn't this kind of code be in AWT?

No.  AWT is embedded in SWT, not the other way around.  It has no way of
determining information about what it was embedded into (a browser, a media
framework, or in this case, SWT).  It is the responsibility of the encapsulating
environment check for these sort of things and let AWT know.
Still seems like a bug/feature in AWT.  For code that runs in a Frame (ie. no 
SWT present), is displayChanged() called internally by AWT when the monitor 
changes or is the application code supposed to do this?  Seems unlikely 
because reflection is needed to see the method.
(In reply to comment #3)
&gt; Still seems like a bug/feature in AWT.  For code that runs in a Frame (ie. no 
&gt; SWT present), is displayChanged() called internally by AWT when the monitor 
&gt; changes or is the application code supposed to do this?  Seems unlikely 
&gt; because reflection is needed to see the method.

AWT only knows about its own windows and does not spy on any arbitrary HWNDs 
that decide to embed it.  It can and should only respond to a display change 
that occurs on one of its own.

EmbeddedFrame and JAWT are JDK optional APIs provided by Sun for the purpose of 
embedding AWT inside other graphics environments or vice versa.  They are not 
part of the publicly supported JDK API set, hence why reflection is needed in 
this particular case.  If you use these APIs, you have to be aware of their 
consequences.

This is one such consequence: there is a display change on an SWT top-level 
window and SWT does not decide to inform AWT of the display change.  You can 
call this an AWT bug all you want but it doesn't change the fact that AWT works 
fine on its own, and SWT works fine on its own (not to mention that other 
embedded environments such as JMF and Java3D do not have this problem).

A very simple workaround in SWT_AWT fixes the problem, whereas if you were to 
tell Sun to fix the problem you would likely have to wait indefinitely, and it 
may not in fact get fixed at all.  As the former AWT engineer who worked at Sun 
and wrote JAWT, I would have easily called this SWT's bug.  Quite possibly the 
very best you could hope for would be to make the displayChanged() method part 
of the public API so that embedded multimonitor environments could better cope 
with this issue without having to use reflection.
Michael, 

If the right thing to do is work around this problem, then we will work around 
it, the same way we work around bugs/features in the various operating systems 
where SWT runs.  Because this sort of code is dangerous and can break over 
time, we need to be 100% clear why it is needed and what we are fixing.  If we 
determine that the problem is in Sun code, then it is best that Sun know about 
it and get them to fix it.  In the meantime, we may or may not decide work 
around it in SWT.

1) SWT_AWT is really only 100% supported in JDK 1.5.  Does the problem happen 
in JDK 1.5?
2) Can you please attach a very simple test case with some timing information 
so we can measure the improvement?
3) Is the workaround only necessary on Windows or does the problem happen on 
the other AWT platforms (ie. Linux, Solaris)?

I'm not against fixing problems or improving the SWT_AWT bridge but code has a 
way of killing you over time.

&gt;As the former AWT engineer who worked at Sun and wrote JAWT,

Cool!
Created attachment 25560
Test case (part 1 of 4)
Created attachment 25562
Test case (part 2 of 4)
Created attachment 25563
Test case (part 3 of 4)
Created attachment 25564
Test case (part 4 of 4)

The following classes are left up to your imagination :)

AwtComponentTest (just create a Frame and call pack and show)
SwtComponentTest (just initialize the display, create shells, and start() to
start event loop)
SwtFrame (can use Shell)
SwingGlue (can use SWT_AWT and embed using a BorderLayout or whatnot)
&gt; 1) SWT_AWT is really only 100% supported in JDK 1.5.  Does the problem happen 
&gt; in JDK 1.5?

Yes.

&gt; 2) Can you please attach a very simple test case with some timing information 
&gt; so we can measure the improvement?

See attachments.  You have to resize the embedded window for it to layout 
correctly (sorry I'm lazy).  Scroll each table.  Drag each window over to a 
secondary monitor and try scrolling again.  Notice the lag in the embedded 
version.

&gt; 3) Is the workaround only necessary on Windows or does the problem happen on 
&gt; the other AWT platforms (ie. Linux, Solaris)?

I'm guessing only Windows.</WithStack>
    <WithOutStack>JDK 1.4.2, etc.

The problem:

Simply embed a JTable and JScrollPane in an SWT Shell.  Drag the window over to 
a different monitor and you will notice a severe performance degredation in 
scrolling.

What is happening is that the GraphicsConfiguration on the WEmbeddedFrame peer 
is in reference to the monitor in which the WEmbeddedFrame peer has been 
created.  JViewport in BLIT_SCROLL_MODE uses hardware acceleration for its 
offscreen (volatile) images, which are naturally much slower on any monitor 
other than the monitor for which it was originally created.

A cheap workaround is to set the JViewport to use BACKINGSTORE_SCROLL_MODE, but 
this causes flickering.

A much better workaround is to add a ControlListener to the shell and check if 
the Monitor for the shell changes, and if so call displayChanged() on the 
WEmbeddedFramePeer to reset the GraphicsConfiguration in response.  Ideally 
this code belongs in SWT_AWT.newFrame()

    private static final String CURRENT_MONITOR = "swt_awt.monitor";
    private static Method displayChanged;

...

        parent.setData(CURRENT_MONITOR, parent.getMonitor());
        parent.getShell().addControlListener(new ControlListener() {
            public void controlMoved(ControlEvent e) {
                monitorCheck(parent, frame);
            }

            public void controlResized(ControlEvent e) {
                monitorCheck(parent, frame);
            }
        });

...

    /**
     * The GraphicsConfiguration for the embedded frame needs to be updated
     * when the monitor for the parent changes.
     * @param control
     * @param frame
     */
    static void monitorCheck(Control control, final Frame frame) {
        Monitor oldMonitor = (Monitor)control.getData(CURRENT_MONITOR);
        Monitor newMonitor = control.getMonitor();
        if (!oldMonitor.equals(newMonitor)) {
            control.setData(CURRENT_MONITOR, newMonitor);
            EventQueue.invokeLater(new Runnable() {
                public void run() {
                    monitorChange(frame);
                }
            });
        }
    }
    
    static void monitorChange(Frame frame) {
        ComponentPeer peer = frame.getPeer();
        if (displayChanged == null) {
            Class rt = peer.getClass();
            try {
                displayChanged = rt.getMethod("displayChanged", null);
            } catch (SecurityException ex) {
                ex.printStackTrace();
                return;
            } catch (NoSuchMethodException ex) {
                ex.printStackTrace();
                return;
            }
        }
        try {
            displayChanged.invoke(peer, null);
        } catch (IllegalArgumentException ex) {
            ex.printStackTrace();
        } catch (IllegalAccessException ex) {
            ex.printStackTrace();
        } catch (InvocationTargetException ex) {
            ex.printStackTrace();
        }
    }
Shouldn't this kind of code be in AWT?
(In reply to comment #1)
&gt; Shouldn't this kind of code be in AWT?

No.  AWT is embedded in SWT, not the other way around.  It has no way of
determining information about what it was embedded into (a browser, a media
framework, or in this case, SWT).  It is the responsibility of the encapsulating
environment check for these sort of things and let AWT know.
Still seems like a bug/feature in AWT.  For code that runs in a Frame (ie. no 
SWT present), is displayChanged() called internally by AWT when the monitor 
changes or is the application code supposed to do this?  Seems unlikely 
because reflection is needed to see the method.
(In reply to comment #3)
&gt; Still seems like a bug/feature in AWT.  For code that runs in a Frame (ie. no 
&gt; SWT present), is displayChanged() called internally by AWT when the monitor 
&gt; changes or is the application code supposed to do this?  Seems unlikely 
&gt; because reflection is needed to see the method.

AWT only knows about its own windows and does not spy on any arbitrary HWNDs 
that decide to embed it.  It can and should only respond to a display change 
that occurs on one of its own.

EmbeddedFrame and JAWT are JDK optional APIs provided by Sun for the purpose of 
embedding AWT inside other graphics environments or vice versa.  They are not 
part of the publicly supported JDK API set, hence why reflection is needed in 
this particular case.  If you use these APIs, you have to be aware of their 
consequences.

This is one such consequence: there is a display change on an SWT top-level 
window and SWT does not decide to inform AWT of the display change.  You can 
call this an AWT bug all you want but it doesn't change the fact that AWT works 
fine on its own, and SWT works fine on its own (not to mention that other 
embedded environments such as JMF and Java3D do not have this problem).

A very simple workaround in SWT_AWT fixes the problem, whereas if you were to 
tell Sun to fix the problem you would likely have to wait indefinitely, and it 
may not in fact get fixed at all.  As the former AWT engineer who worked at Sun 
and wrote JAWT, I would have easily called this SWT's bug.  Quite possibly the 
very best you could hope for would be to make the displayChanged() method part 
of the public API so that embedded multimonitor environments could better cope 
with this issue without having to use reflection.
Michael, 

If the right thing to do is work around this problem, then we will work around 
it, the same way we work around bugs/features in the various operating systems 
where SWT runs.  Because this sort of code is dangerous and can break over 
time, we need to be 100% clear why it is needed and what we are fixing.  If we 
determine that the problem is in Sun code, then it is best that Sun know about 
it and get them to fix it.  In the meantime, we may or may not decide work 
around it in SWT.

1) SWT_AWT is really only 100% supported in JDK 1.5.  Does the problem happen 
in JDK 1.5?
2) Can you please attach a very simple test case with some timing information 
so we can measure the improvement?
3) Is the workaround only necessary on Windows or does the problem happen on 
the other AWT platforms (ie. Linux, Solaris)?

I'm not against fixing problems or improving the SWT_AWT bridge but code has a 
way of killing you over time.

&gt;As the former AWT engineer who worked at Sun and wrote JAWT,

Cool!
Created attachment 25560
Test case (part 1 of 4)
Created attachment 25562
Test case (part 2 of 4)
Created attachment 25563
Test case (part 3 of 4)
Created attachment 25564
Test case (part 4 of 4)

The following classes are left up to your imagination :)

AwtComponentTest (just create a Frame and call pack and show)
SwtComponentTest (just initialize the display, create shells, and start() to
start event loop)
SwtFrame (can use Shell)
SwingGlue (can use SWT_AWT and embed using a BorderLayout or whatnot)
&gt; 1) SWT_AWT is really only 100% supported in JDK 1.5.  Does the problem happen 
&gt; in JDK 1.5?

Yes.

&gt; 2) Can you please attach a very simple test case with some timing information 
&gt; so we can measure the improvement?

See attachments.  You have to resize the embedded window for it to layout 
correctly (sorry I'm lazy).  Scroll each table.  Drag each window over to a 
secondary monitor and try scrolling again.  Notice the lag in the embedded 
version.

&gt; 3) Is the workaround only necessary on Windows or does the problem happen on 
&gt; the other AWT platforms (ie. Linux, Solaris)?

I'm guessing only Windows.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="105508" />
    <CreationDate amount="2005-07-28 15:35:00 -0400" />
    <DupId amount="" />
    <classification amount="Modeling" />
    <Product amount="EMF" />
    <component amount="Website" />
    <Version amount="2.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Linux-GTK" />
    <priority amount="P3" />
    <bug_severity amount="minor" />
    <Summery>Builds and tests fail (stall) sporadically using 32-bit JDK on 64-bit OS</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="3">
      <source_code type="functioncall">
        <location start="701" end="765" />
        <code>assertEquals(new Date(), TypeConverter.getDate(new Date()));</code>
      </source_code>
      <source_code type="assignment">
        <location start="913" end="940" />
        <code>Date date = new Date();</code>
      </source_code>
      <source_code type="functioncall">
        <location start="941" end="993" />
        <code>assertEquals(date, TypeConverter.getDate(date));</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="0" />
    <bug_status amount="VERIFIED" />
    <resolution amount="FIXED" />
    <WithStack>New build box having out of memory or possibly file i/o issues running JDK 1.4.2
32-bit on 64-bit OS (Debian Sarge kernel 2.6). This bug is a placeholder for CVS
commits (memory tuning) and to dump gotchas or discovered solutions, in case
other teams plan to migrate to a 64-bit OS as their build infrastructure, but
also plan to support 32-bit JDKs.

As 64-bit builds are not supported (reference platform) yet, this is only a
minor bug, since we can always revert to our previous OS configuration if needs be.
Further discussion on this topic suggests that it might be the dual-processor
nature of the machine, not the 32bit-in-64bit issue. 
I noticed that this in SDOUtilProtectedGetTest can fail

    assertEquals(new Date(), TypeConverter.getDate(new Date()));

because it can construct two different dates if System.currentTimeMillis happens to change between the two calls.  This should avoid that issue:

    Date date = new Date();
    assertEquals(date, TypeConverter.getDate(date));

Fixed in 2.2.0 I200511291121
Move to verified as per bug 206558.</WithStack>
    <WithOutStack>New build box having out of memory or possibly file i/o issues running JDK 1.4.2
32-bit on 64-bit OS (Debian Sarge kernel 2.6). This bug is a placeholder for CVS
commits (memory tuning) and to dump gotchas or discovered solutions, in case
other teams plan to migrate to a 64-bit OS as their build infrastructure, but
also plan to support 32-bit JDKs.

As 64-bit builds are not supported (reference platform) yet, this is only a
minor bug, since we can always revert to our previous OS configuration if needs be.
Further discussion on this topic suggests that it might be the dual-processor
nature of the machine, not the 32bit-in-64bit issue. 
I noticed that this in SDOUtilProtectedGetTest can fail

    assertEquals(new Date(), TypeConverter.getDate(new Date()));

because it can construct two different dates if System.currentTimeMillis happens to change between the two calls.  This should avoid that issue:

    Date date = new Date();
    assertEquals(date, TypeConverter.getDate(date));

Fixed in 2.2.0 I200511291121
Move to verified as per bug 206558.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="105509" />
    <CreationDate amount="2005-07-28 15:41:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="SWT" />
    <Version amount="3.1" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="enhancement" />
    <Summery>How about a JFace/SWT TreeTable?</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="WORKSFORME" />
    <WithStack>How about a JFace/SWT TreeTable? Like the Swing one from Sun:
http://java.sun.com/products/jfc/tsc/articles/treetable1/

?
See Tree, TreeItem and TreeColumn in 3.1.</WithStack>
    <WithOutStack>How about a JFace/SWT TreeTable? Like the Swing one from Sun:
http://java.sun.com/products/jfc/tsc/articles/treetable1/

?
See Tree, TreeItem and TreeColumn in 3.1.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="105510" />
    <CreationDate amount="2005-07-28 15:51:00 -0400" />
    <DupId amount="" />
    <classification amount="WebTools" />
    <Product amount="WTP Source Editing" />
    <component amount="jst.jsp" />
    <Version amount="unspecified" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P2" />
    <bug_severity amount="normal" />
    <Summery>[hotbug] JSP taglib validation for bad taglib prefix</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>it would be nice if jsp source validation could check taglib directives and 
make sure the prefix declared is unique and that it is not "jsp"

So if you had the following, the last 2 prefix values should be marked as an 
error
&lt;jsp:directive.taglib uri="../WEB-INF/struts-logic.tld" prefix="preme"/&gt;
&lt;jsp:directive.taglib uri="../WEB-INF/struts-bean.tld" prefix="jsp"/&gt;
&lt;jsp:directive.taglib uri="../WEB-INF/struts-bean.tld" prefix="preme"/&gt;
I need to revisit the specs, but the following prefixes are also banned: jspx,
java, javax, servlet, sun and sunw.
I've placed this bug to request from Exadel to moving into Hot List, so please fix it in 1.0.1 if it possible.
Reassigning to Phil since it's similar to bug 104815.
Checked a JSP directive validator into head.
Update 1.5 hot bugs to use the new hot bug process.
Verified with WTP 1.5 RC5 that this bug is *almost* fixed.

The one outstanding issue is "java" is still allowed as a prefix value.
Like Nitin said in comment #1 it should not be allowed according to the JSP spec
(http://java.sun.com/products/jsp/syntax/1.2/syntaxref1211.html)
Created attachment 44831
org.eclipse.jst.jsp.core

Fix is to just add "java" to the list of reserved prefixes not allowed in taglib directives.

org.eclipse.jst.jsp.core
-JSPDirectiveValidator#JSPDirectiveValidator
add the following line:
  fReservedPrefixes.put("java", ""); //$NON-NLS-1$ //$NON-NLS-2$
Amy, are we planning to get this fix into 1.5? If so, can you update the status whiteboard to PMC and we'll review it 2day.
I'd like to fix this for 1.5 because it's a hot bug and the fix is quite safe.
+1 

Since this was a hotbug (from Excedel, I believe) I would like to get a clean and complete fix in for RC5a. I've reviewed, and the fix is trivial and safe. 




While this was originally listed as an enhancement, I think it is fair to say it was a "bug of ommission", so, changing it to bug status. 


Please explain why this is a stop-ship defect.

I understand that it is a hot bug, but it should have been addressed before now if it was a serious problem. The request starts, "It would be nice". That doesn't sound like a stop-ship problem.
+1 for WTP 1.5 RC5a since we need a rebuild for some serious ones.
committed and released for wtp1.5rc5a
Verified in WTP 1.5 RC6</WithStack>
    <WithOutStack>it would be nice if jsp source validation could check taglib directives and 
make sure the prefix declared is unique and that it is not "jsp"

So if you had the following, the last 2 prefix values should be marked as an 
error
&lt;jsp:directive.taglib uri="../WEB-INF/struts-logic.tld" prefix="preme"/&gt;
&lt;jsp:directive.taglib uri="../WEB-INF/struts-bean.tld" prefix="jsp"/&gt;
&lt;jsp:directive.taglib uri="../WEB-INF/struts-bean.tld" prefix="preme"/&gt;
I need to revisit the specs, but the following prefixes are also banned: jspx,
java, javax, servlet, sun and sunw.
I've placed this bug to request from Exadel to moving into Hot List, so please fix it in 1.0.1 if it possible.
Reassigning to Phil since it's similar to bug 104815.
Checked a JSP directive validator into head.
Update 1.5 hot bugs to use the new hot bug process.
Verified with WTP 1.5 RC5 that this bug is *almost* fixed.

The one outstanding issue is "java" is still allowed as a prefix value.
Like Nitin said in comment #1 it should not be allowed according to the JSP spec
(http://java.sun.com/products/jsp/syntax/1.2/syntaxref1211.html)
Created attachment 44831
org.eclipse.jst.jsp.core

Fix is to just add "java" to the list of reserved prefixes not allowed in taglib directives.

org.eclipse.jst.jsp.core
-JSPDirectiveValidator#JSPDirectiveValidator
add the following line:
  fReservedPrefixes.put("java", ""); //$NON-NLS-1$ //$NON-NLS-2$
Amy, are we planning to get this fix into 1.5? If so, can you update the status whiteboard to PMC and we'll review it 2day.
I'd like to fix this for 1.5 because it's a hot bug and the fix is quite safe.
+1 

Since this was a hotbug (from Excedel, I believe) I would like to get a clean and complete fix in for RC5a. I've reviewed, and the fix is trivial and safe. 




While this was originally listed as an enhancement, I think it is fair to say it was a "bug of ommission", so, changing it to bug status. 


Please explain why this is a stop-ship defect.

I understand that it is a hot bug, but it should have been addressed before now if it was a serious problem. The request starts, "It would be nice". That doesn't sound like a stop-ship problem.
+1 for WTP 1.5 RC5a since we need a rebuild for some serious ones.
committed and released for wtp1.5rc5a
Verified in WTP 1.5 RC6</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="105511" />
    <CreationDate amount="2005-07-28 15:51:00 -0400" />
    <DupId amount="" />
    <classification amount="WebTools" />
    <Product amount="WTP ServerTools" />
    <component amount="jst.server" />
    <Version amount="1.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="enhancement" />
    <Summery>Geronimo: generate EMF models for deployment plans</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="WONTFIX" />
    <WithStack>Geronimo contains several deployment plans and the content within them is
extensive.  There are schemas already for these.  The Geronimo server adapter
needs to provide further deployment plan editing capability as the current web
dp editor is extrememly limited in capability.  Updating the WebAppDeployment
plan class by hand will be very tedious and error prone.  It will be much easier
and more reliable if EMF models where generated out of the schemas.

I have already started working on this and will provide a patch as soon as it is
available.
Fix will be in Apache Geronimo project.
Closing old bugs that haven't had any activity in a long time.</WithStack>
    <WithOutStack>Geronimo contains several deployment plans and the content within them is
extensive.  There are schemas already for these.  The Geronimo server adapter
needs to provide further deployment plan editing capability as the current web
dp editor is extrememly limited in capability.  Updating the WebAppDeployment
plan class by hand will be very tedious and error prone.  It will be much easier
and more reliable if EMF models where generated out of the schemas.

I have already started working on this and will provide a patch as soon as it is
available.
Fix will be in Apache Geronimo project.
Closing old bugs that haven't had any activity in a long time.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="105512" />
    <CreationDate amount="2005-07-28 16:02:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="JDT" />
    <component amount="Doc" />
    <Version amount="3.1" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows 2000" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Workbench User Guide talks about features not even present in the core Platform (Ant, PDE)</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="7">
        <Lines>
          <Line>1) Use more granular doc plugins. Works today, as is.</Line>
          <Line>Or,</Line>
          <Line>2) Deliver one plugin, but use conditional filtering of content based on</Line>
          <Line>runtime critea. Eg: only display Ant UI docs if Ant UI component is actually</Line>
          <Line>there.</Line>
          <Line>This is new functionaly in the Help system that is being investigated as we</Line>
          <Line>speak. Bug 106201</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="ASSIGNED" />
    <resolution amount="" />
    <WithStack>There are many places in the Workbench User Guide that talk about running Ant
builds, exporting plugins with the PDE, etc. but these tools are not even
present in the platform runtime from which these docs are contributed.

A lot of companies (like us) are providing a product based on the eclipse
runtime (NOT the SDK), and having a good introduction to the platform is
crucial.  However, the chapter "Ant &amp; external tools tutorial" is just confusing
to a new user because most of what it is talking about is not even present in
the platform (runtime-only).

These docs should be contributed by the AntUI and PDE plugins, and should not be
part of the core platform documentation.  There is not even a warning or
statement saying that the docs only apply if you have installed the SDK.
Ant and external tools *are* part of the platform runtime build.  Agreed that
PDE is not part of the platform, and if you can point out references to PDE in
the platform doc those can be fixed.
Well, I realize Ant is part of the base platform, but AntUI is not.  A few
examples of the material I'm talking about:

- Pretty much all of Workbench User Guide &gt; Getting Started &gt; Ant &amp; external
tools tutorial has screenshots and talks about stuff not available in the base
platform.  All of the Ant-related screenshots is about stuff only found in Ant
UI which is included with the JDT only.

- Workbench User Guide &gt; Getting Started &gt; Ant &amp; external tools tutorial &gt; Use
cases for Ant in Eclipse &gt; Deploying Eclispe Plug-ins &gt; Generating the build.xml
file mentions PDE-specific menus.

- Workbench User Guide &gt; Reference &gt; Preferences has a pile of Ant UI stuff in
there that is not in the base platform runtime.

- Workbench User Guide &gt; Concepts &gt; External Tools &gt; Ant Support talks about UI
stuff.

- Workbench User Guide &gt; Tasks &gt; Building Resources &gt; Running Ant Buildfiles is
full of Ant UI stuff.

And this isn't so bad, but:

- Workbench User Guide &gt; What's New talks about launching a SWT standalone app
with PDE.

- Workbench User Guide &gt; What's New also talks about AntUI.

- Workbench User Guide &gt; Tips and Tricks talks about AntUI.

- Workbench User Guide &gt; Tips and Tricks has PDE-specific stuff (amongst others)
in the screenshots.

There are many other miscellaneous screenshots, etc. that show PDE/JDT/AntUI
stuff that isn't present in a base runtime.  I've only done a quick browse
through here.  We're very careful with our screenshots to not include views that
may not be in all versions of our product.  I think it is confusing to include
this stuff.  Eclipse users like us developers don't notice but users of a
runtime-only based product will wonder why they do not have these features
mentioned in the Help.

In summary, I don't think the screenshots are all that critical, but the massive
amounts of Ant UI specific help content I think should be moved to be
contributed by the Ant UI plugin.  We use Ant in our runtime-only based product
so the users know *of* Ant, but they are left wondering if they are missing
something when they read about all of this cool Ant UI stuff mentioned in the
Help that isn't in our product.  (Including the full JDT to get the Ant UI stuff
simply isn't an option for us...)
Sorry, you're right.  After a bit of research I found that the Ant UI was moved
out of the platform and into JDT in the Eclipse 3.0 timeframe (bug 36870).  In
Eclipse 3.1, the Ant core and external tools UI are part of the platform, but
Ant UI is not... strange!  You are entirely correct, all of the Ant UI help
should be moved to the Java Development User Guide.  Since this requires action
by committers on the JDT doc, I am going to move this over to them.  Once they
have added it to the JDT doc we can remove it from the platform doc.
Dang!  I thought maybe you were going to suggest moving Ant UI out of the JDT
into the core platform.  ;o)
I didn't realize it used to be in the platform!  We'd love to take advantage of
all of the Ant UI stuff but don't want to include the JDT in our product.

Thanks for looking into this.
Dejan, there is an interesting content delivery problem here.  All of the
material in the "Ant and external tools" tutorial logically fits together and
flows well, but contains bits provided by Platform, JDT, and PDE.  It would be
nice if there was some way this material could all be together in the case where
all those features are present.
Yes, our documentation partitions are left behind the RCP/IDE split. We need 
to do a better job on separating the documentation to follow the deliverables.
Docs today are somewhat delivered at the feature level. They are not separated 
as installable components that come and go with there respective plugins.

With that in mind, there are two routes:
1) Use more granular doc plugins. Works today, as is. 
Or,
2) Deliver one plugin, but use conditional filtering of content based on 
runtime critea. Eg: only display Ant UI docs if Ant UI component is actually 
there.
This is new functionaly in the Help system that is being investigated as we 
speak. Bug 106201 

This defect is a DOC defect because, regardless of which route is taken, work 
needs to be done on the DOcs themselves to resolve the Ant doc issue.
I realize the doc is just plain wrong in this case, I just wanted to point it
out as an interesting use case for ongoing content delivery work in 3.2.  In
many cases 2) is better - dividing doc books along plugin boundaries makes our
life as doc writers easier, but from the point of view of an end-user the plugin
boundaries are artificial and they really want find related concepts grouped
together in the doc.
Darin, I assign the bug to you since most work has to be done here for the
Ant/UI documentation.</WithStack>
    <WithOutStack>There are many places in the Workbench User Guide that talk about running Ant
builds, exporting plugins with the PDE, etc. but these tools are not even
present in the platform runtime from which these docs are contributed.

A lot of companies (like us) are providing a product based on the eclipse
runtime (NOT the SDK), and having a good introduction to the platform is
crucial.  However, the chapter "Ant &amp; external tools tutorial" is just confusing
to a new user because most of what it is talking about is not even present in
the platform (runtime-only).

These docs should be contributed by the AntUI and PDE plugins, and should not be
part of the core platform documentation.  There is not even a warning or
statement saying that the docs only apply if you have installed the SDK.
Ant and external tools *are* part of the platform runtime build.  Agreed that
PDE is not part of the platform, and if you can point out references to PDE in
the platform doc those can be fixed.
Well, I realize Ant is part of the base platform, but AntUI is not.  A few
examples of the material I'm talking about:

- Pretty much all of Workbench User Guide &gt; Getting Started &gt; Ant &amp; external
tools tutorial has screenshots and talks about stuff not available in the base
platform.  All of the Ant-related screenshots is about stuff only found in Ant
UI which is included with the JDT only.

- Workbench User Guide &gt; Getting Started &gt; Ant &amp; external tools tutorial &gt; Use
cases for Ant in Eclipse &gt; Deploying Eclispe Plug-ins &gt; Generating the build.xml
file mentions PDE-specific menus.

- Workbench User Guide &gt; Reference &gt; Preferences has a pile of Ant UI stuff in
there that is not in the base platform runtime.

- Workbench User Guide &gt; Concepts &gt; External Tools &gt; Ant Support talks about UI
stuff.

- Workbench User Guide &gt; Tasks &gt; Building Resources &gt; Running Ant Buildfiles is
full of Ant UI stuff.

And this isn't so bad, but:

- Workbench User Guide &gt; What's New talks about launching a SWT standalone app
with PDE.

- Workbench User Guide &gt; What's New also talks about AntUI.

- Workbench User Guide &gt; Tips and Tricks talks about AntUI.

- Workbench User Guide &gt; Tips and Tricks has PDE-specific stuff (amongst others)
in the screenshots.

There are many other miscellaneous screenshots, etc. that show PDE/JDT/AntUI
stuff that isn't present in a base runtime.  I've only done a quick browse
through here.  We're very careful with our screenshots to not include views that
may not be in all versions of our product.  I think it is confusing to include
this stuff.  Eclipse users like us developers don't notice but users of a
runtime-only based product will wonder why they do not have these features
mentioned in the Help.

In summary, I don't think the screenshots are all that critical, but the massive
amounts of Ant UI specific help content I think should be moved to be
contributed by the Ant UI plugin.  We use Ant in our runtime-only based product
so the users know *of* Ant, but they are left wondering if they are missing
something when they read about all of this cool Ant UI stuff mentioned in the
Help that isn't in our product.  (Including the full JDT to get the Ant UI stuff
simply isn't an option for us...)
Sorry, you're right.  After a bit of research I found that the Ant UI was moved
out of the platform and into JDT in the Eclipse 3.0 timeframe (bug 36870).  In
Eclipse 3.1, the Ant core and external tools UI are part of the platform, but
Ant UI is not... strange!  You are entirely correct, all of the Ant UI help
should be moved to the Java Development User Guide.  Since this requires action
by committers on the JDT doc, I am going to move this over to them.  Once they
have added it to the JDT doc we can remove it from the platform doc.
Dang!  I thought maybe you were going to suggest moving Ant UI out of the JDT
into the core platform.  ;o)
I didn't realize it used to be in the platform!  We'd love to take advantage of
all of the Ant UI stuff but don't want to include the JDT in our product.

Thanks for looking into this.
Dejan, there is an interesting content delivery problem here.  All of the
material in the "Ant and external tools" tutorial logically fits together and
flows well, but contains bits provided by Platform, JDT, and PDE.  It would be
nice if there was some way this material could all be together in the case where
all those features are present.
Yes, our documentation partitions are left behind the RCP/IDE split. We need 
to do a better job on separating the documentation to follow the deliverables.
Docs today are somewhat delivered at the feature level. They are not separated 
as installable components that come and go with there respective plugins.

With that in mind, there are two routes:
1) Use more granular doc plugins. Works today, as is. 
Or,
2) Deliver one plugin, but use conditional filtering of content based on 
runtime critea. Eg: only display Ant UI docs if Ant UI component is actually 
there.
This is new functionaly in the Help system that is being investigated as we 
speak. Bug 106201 

This defect is a DOC defect because, regardless of which route is taken, work 
needs to be done on the DOcs themselves to resolve the Ant doc issue.
I realize the doc is just plain wrong in this case, I just wanted to point it
out as an interesting use case for ongoing content delivery work in 3.2.  In
many cases 2) is better - dividing doc books along plugin boundaries makes our
life as doc writers easier, but from the point of view of an end-user the plugin
boundaries are artificial and they really want find related concepts grouped
together in the doc.
Darin, I assign the bug to you since most work has to be done here for the
Ant/UI documentation.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="105513" />
    <CreationDate amount="2005-07-28 16:02:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse Foundation" />
    <Product amount="Community" />
    <component amount="Articles" />
    <Version amount="unspecified" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="enhancement" />
    <Summery>PDF's for Articles</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="WONTFIX" />
    <WithStack>It would be very useful to have the Eclipse Corner articles available as PDF’s
as well as the current html pages. I print all articles to read them and having
the minor formatting improvements (like better image sizing and page numbers)
really help.

I am willing to help convert a few of the articles to pdf's.
I think this would be useful as well and can be fairly easily accomplished by
adopting docbook or dita for article sources and generating both the HTML and
PDF versions of the articles. Alternatively, I believe you can generate PDFs
directly from HTML with FOP (I think Apache Forrest does this), albeit probably
with less flexibility in the formatting. 
Moving to website component. Maybe this can be addressed in the new content
management system.
The CMS doesn't have this functionality. Articles would need to be published to
PDF manually.
This is not currently planned, due to lack of resources and lack of any tooling
support for it on the web site. Sorry.</WithStack>
    <WithOutStack>It would be very useful to have the Eclipse Corner articles available as PDF’s
as well as the current html pages. I print all articles to read them and having
the minor formatting improvements (like better image sizing and page numbers)
really help.

I am willing to help convert a few of the articles to pdf's.
I think this would be useful as well and can be fairly easily accomplished by
adopting docbook or dita for article sources and generating both the HTML and
PDF versions of the articles. Alternatively, I believe you can generate PDFs
directly from HTML with FOP (I think Apache Forrest does this), albeit probably
with less flexibility in the formatting. 
Moving to website component. Maybe this can be addressed in the new content
management system.
The CMS doesn't have this functionality. Articles would need to be published to
PDF manually.
This is not currently planned, due to lack of resources and lack of any tooling
support for it on the web site. Sorry.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="105514" />
    <CreationDate amount="2005-07-28 16:07:00 -0400" />
    <DupId amount="" />
    <classification amount="WebTools" />
    <Product amount="WTP Webservices" />
    <component amount="wst.wsdl" />
    <Version amount="unspecified" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows 2000" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>WSDLEditor: Automatic Binding Generation needs tweaking</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="INVALID" />
    <WithStack>WSDL Automatic Binding Generation needs to be refined further:
-when do we initiate the generation?
-how do we tell the user a generation is done?  Do we even need to inform the 
user?
Automatic Binding Generation is not in the latest WSDL Editor
Closing.</WithStack>
    <WithOutStack>WSDL Automatic Binding Generation needs to be refined further:
-when do we initiate the generation?
-how do we tell the user a generation is done?  Do we even need to inform the 
user?
Automatic Binding Generation is not in the latest WSDL Editor
Closing.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="105515" />
    <CreationDate amount="2005-07-28 16:19:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="User Assistance" />
    <Version amount="3.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>[Help] help_home fails if target is in doc.zip</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="WORKSFORME" />
    <WithStack>In org.eclipse.help.base_3.0.2/preferences.ini, I've got:

help_home=/&lt;com.myplugin.help&gt;/doc/welcome.html

In the Eclipse help browser, that comes out as:

http://127.0.0.1:55808/help/topic/&lt;com.myplugin.help&gt;/doc/welcome.html

If the help files are in a /doc subdirectory of the plugin, help opens to
welcome.html.

If the help files are in doc.zip (our preference), I get the error, "The topic
that you have requested is not available. The link may be wrong, or you may not
have the corresponding product feature installed. This online help only includes
documentation for features that are installed."
I just tried this using I20090414-0800, it worked fine.</WithStack>
    <WithOutStack>In org.eclipse.help.base_3.0.2/preferences.ini, I've got:

help_home=/&lt;com.myplugin.help&gt;/doc/welcome.html

In the Eclipse help browser, that comes out as:

http://127.0.0.1:55808/help/topic/&lt;com.myplugin.help&gt;/doc/welcome.html

If the help files are in a /doc subdirectory of the plugin, help opens to
welcome.html.

If the help files are in doc.zip (our preference), I get the error, "The topic
that you have requested is not available. The link may be wrong, or you may not
have the corresponding product feature installed. This online help only includes
documentation for features that are installed."
I just tried this using I20090414-0800, it worked fine.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="105516" />
    <CreationDate amount="2005-07-28 16:30:00 -0400" />
    <DupId amount="" />
    <classification amount="Mylyn" />
    <Product amount="Mylyn" />
    <component amount="Tasks" />
    <Version amount="0.3" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P2" />
    <bug_severity amount="normal" />
    <Summery>package explorer shows nothing upon eclipse startup unless mylar task list is active</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="2">
      <Enumeration lines="19">
        <Lines>
          <Line>1. I have the mylar task list always opened.  This doesn't necessarily mean that</Line>
          <Line>it's always active (in other words, visible).  In fact, most of the time, I have</Line>
          <Line>the console tab activated.</Line>
          <Line />
          <Line>This is what I mean by "mylar task list active"</Line>
          <Line>http://grouse.rutgers.edu:8097/tmp2/active.png</Line>
          <Line />
          <Line>And "mylar task list inactive"</Line>
          <Line>http://grouse.rutgers.edu:8097/tmp2/inactive.png</Line>
          <Line />
          <Line>2. If I close eclipse with the mylar task list activated (instead of say the</Line>
          <Line>console), then when I re-open eclipse, the package explorer shows the files, as</Line>
          <Line>you would expect.</Line>
          <Line>http://grouse.rutgers.edu:8097/tmp2/good.png</Line>
          <Line />
          <Line>3. If I close eclipse with the console activated instead, then when I re-open</Line>
          <Line>eclipse, the package explorer shows no files.  The only way I can get at the</Line>
          <Line>files is by activating the mylar task list.</Line>
          <Line>http://grouse.rutgers.edu:8097/tmp2/bad.png</Line>
        </Lines>
      </Enumeration>
      <Enumeration lines="4">
        <Lines>
          <Line>- When you close the task list, a dialog pops up informing you that all tasks</Line>
          <Line>will be deactivated.</Line>
          <Line>- We could also autmatically turn off the Mylar glasses once the task list is</Line>
          <Line>closed.</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>Version 0.3.3.1.  I have one category with one task in it in the mylar task list.  

Whenever I startup eclipse, the package explorer shows nothing if the mylar task
list view is not active/viewable.  Only after I show the mylar task list, does
the package explorer show the files.
The only way that I can make this happen is if the single task is active when 
eclipse is closed, and the filtering in the package explorer is enabled.  
Would this be the scenario that you are describing?

If so, the problem is that the tasklist is not read until the tasklist plugin 
is activated, meaning that the view has been created.  Mik, what should we do 
about this? Make the tasklist startup using an early startup so that the 
tasklist is read?
(In reply to comment #1)
&gt; The only way that I can make this happen is if the single task is active when 
&gt; eclipse is closed, and the filtering in the package explorer is enabled.  
&gt; Would this be the scenario that you are describing?

Yes, that's exactly what I do.

It sounds like the first thing to do is to automatically deactivate all tasks if
the task list is closed by the user.  Your early start-up solution might be
useful too...
Shinjiro, here is our proposed solution to this:
- When you close the task list, a dialog pops up informing you that all tasks
will be deactivated.
- We could also autmatically turn off the Mylar glasses once the task list is
closed.

This seems to address both the confusion on startup, and matches our model of
making sure that the task list is used for activation/deactivation.  For people
not switching contexts often we can suggest making the task list a fast view.

Would that work for you?
Just to make sure we're on the same page, here is exactly what I do to reproduce
the problem:

1. I have the mylar task list always opened.  This doesn't necessarily mean that
it's always active (in other words, visible).  In fact, most of the time, I have
the console tab activated.

This is what I mean by "mylar task list active"
http://grouse.rutgers.edu:8097/tmp2/active.png

And "mylar task list inactive"
http://grouse.rutgers.edu:8097/tmp2/inactive.png

2. If I close eclipse with the mylar task list activated (instead of say the
console), then when I re-open eclipse, the package explorer shows the files, as
you would expect.
http://grouse.rutgers.edu:8097/tmp2/good.png

3. If I close eclipse with the console activated instead, then when I re-open
eclipse, the package explorer shows no files.  The only way I can get at the
files is by activating the mylar task list.
http://grouse.rutgers.edu:8097/tmp2/bad.png

I hope this helps.
-S

Thanks for the great feedback Shinjiro, the images and explanation were very
helpful.  This now works, and will be in Friday's release.  The fix was ensuring
that the task is read whether or not the view is active/visible.  If you encounter
any problems with it let us konw.

I just upgraded to eclipse 3.2 M1 and mylar 0.3.4.  I'm noticing that when I
restart eclipse with the mylar task list inactive, all is good, but when I
restart with it active, it shows nothing after the restart.  Could this be
related to the earlier bug?

(In reply to comment #6)
&gt; Thanks for the great feedback Shinjiro, the images and explanation were very
&gt; helpful.  This now works, and will be in Friday's release.  The fix was ensuring
&gt; that the task is read whether or not the view is active/visible.  If you encounter
&gt; any problems with it let us konw.
&gt; 


Hi Shinjiro, I just tried running against M2 and it worked for me.

Could you verify that you get this problem again?  There is a known issue with
the task list not saving when Eclipse when Eclipse is shut down during an update.
Also, could you double-check whether it might have to do with a filter being active?

Thanks!
Reopening until Shinjiro's problem is resolved.
Maybe I did the upgrade wrong.  I unzipped the new eclipse (3.2M1) to a
different location, and ran it, using the same workspace from before.  I then
went to "Find and Install" for plugins and got Mylar 0.3.4.  So could it be that
my .mylar is confused somehow?

I noticed that if I delete "&lt;filter&gt;" in the filter box of the mylar task list,
the tasks show up again.  This is funny, because I've never used filters before.
 I can also get the tasks to show up by clicking on the "filter completed tasks"
button TWICE (None of my tasks are marked as completed.) or by modifying the
"filter priority lower than" menu.  (I'm guessing it's by design that the active
task isn't filtered even if its priority is lower than the threshold.)

It seems like mylar IS being loaded, because the package explorer shows the
correct files for the currently activated task.

Again, the tasks show up properly if I close eclipse with the task list
inactive.  It only happens when I close eclipse with the task list active/visible.
Thanks Shinjiro, this had to do with the unpredictability of Eclipse startup, I
just made it act more deterministically, and the fix seems to work for all
cases.  Sorry to ask this again, but it would be great if you could verify the
fix on your machine when 0.3.5 is out this Saturday (I'll send you a reminder to
download).  


I think there is something wrong still with the mylar task list.  It doesn't
show my tasks when I restart eclipse with the mylar task list view active.  The
package explorer seems to be filtering using the correct task, however.  I can
get the view to show the tasks by clicking on the empty "filter" text box and
typing ENTER.  I'm using mylar 0.3.5 with Eclipse 3.2M1.
Thanks for keeping up with this Shinjiro.  We can't reproduce this bug with
0.3.5, so I'm suspicous that an old version of Mylar is getting in your way.

Could you go to Help -&gt; Software Updates -&gt; Manage Configuration, click the 3rd
toolbar button to show all the disabled configurations, and make sure that you
only have Mylar 0.3.5 installed?

If for some reason that doesn't work could you either describe what you have in
your task list (folders, queries, root tasks, etc), or better yet send it as an
attachment to mylar@cs.ubc.ca?  We will only use it to test and discard it
afterwards.
Since this problem is still occurring in your workspace I'm reopening.  So does
that filter box work-around always work for you?
Yes, it does work all the time.  I click on the empty filter text field and hit
enter to make the tasks show up.  There are other ways to get the tasks to show up.

1. Right-click, and then select "Open"
2. Click on "Filter completed tasks"

(In reply to comment #15)
&gt; Since this problem is still occurring in your workspace I'm reopening.  So does
&gt; that filter box work-around always work for you?


I finally managed to reproduce and fixed this problem--thanks for sending your
task list.  It turns out that on a very short task list the viewer was not getting
refreshed after read.  

The fix will be in Mylar 0.3.7, which will be available
either next of the following Monday.</WithStack>
    <WithOutStack>Version 0.3.3.1.  I have one category with one task in it in the mylar task list.  

Whenever I startup eclipse, the package explorer shows nothing if the mylar task
list view is not active/viewable.  Only after I show the mylar task list, does
the package explorer show the files.
The only way that I can make this happen is if the single task is active when 
eclipse is closed, and the filtering in the package explorer is enabled.  
Would this be the scenario that you are describing?

If so, the problem is that the tasklist is not read until the tasklist plugin 
is activated, meaning that the view has been created.  Mik, what should we do 
about this? Make the tasklist startup using an early startup so that the 
tasklist is read?
(In reply to comment #1)
&gt; The only way that I can make this happen is if the single task is active when 
&gt; eclipse is closed, and the filtering in the package explorer is enabled.  
&gt; Would this be the scenario that you are describing?

Yes, that's exactly what I do.

It sounds like the first thing to do is to automatically deactivate all tasks if
the task list is closed by the user.  Your early start-up solution might be
useful too...
Shinjiro, here is our proposed solution to this:
- When you close the task list, a dialog pops up informing you that all tasks
will be deactivated.
- We could also autmatically turn off the Mylar glasses once the task list is
closed.

This seems to address both the confusion on startup, and matches our model of
making sure that the task list is used for activation/deactivation.  For people
not switching contexts often we can suggest making the task list a fast view.

Would that work for you?
Just to make sure we're on the same page, here is exactly what I do to reproduce
the problem:

1. I have the mylar task list always opened.  This doesn't necessarily mean that
it's always active (in other words, visible).  In fact, most of the time, I have
the console tab activated.

This is what I mean by "mylar task list active"
http://grouse.rutgers.edu:8097/tmp2/active.png

And "mylar task list inactive"
http://grouse.rutgers.edu:8097/tmp2/inactive.png

2. If I close eclipse with the mylar task list activated (instead of say the
console), then when I re-open eclipse, the package explorer shows the files, as
you would expect.
http://grouse.rutgers.edu:8097/tmp2/good.png

3. If I close eclipse with the console activated instead, then when I re-open
eclipse, the package explorer shows no files.  The only way I can get at the
files is by activating the mylar task list.
http://grouse.rutgers.edu:8097/tmp2/bad.png

I hope this helps.
-S

Thanks for the great feedback Shinjiro, the images and explanation were very
helpful.  This now works, and will be in Friday's release.  The fix was ensuring
that the task is read whether or not the view is active/visible.  If you encounter
any problems with it let us konw.

I just upgraded to eclipse 3.2 M1 and mylar 0.3.4.  I'm noticing that when I
restart eclipse with the mylar task list inactive, all is good, but when I
restart with it active, it shows nothing after the restart.  Could this be
related to the earlier bug?

(In reply to comment #6)
&gt; Thanks for the great feedback Shinjiro, the images and explanation were very
&gt; helpful.  This now works, and will be in Friday's release.  The fix was ensuring
&gt; that the task is read whether or not the view is active/visible.  If you encounter
&gt; any problems with it let us konw.
&gt; 


Hi Shinjiro, I just tried running against M2 and it worked for me.

Could you verify that you get this problem again?  There is a known issue with
the task list not saving when Eclipse when Eclipse is shut down during an update.
Also, could you double-check whether it might have to do with a filter being active?

Thanks!
Reopening until Shinjiro's problem is resolved.
Maybe I did the upgrade wrong.  I unzipped the new eclipse (3.2M1) to a
different location, and ran it, using the same workspace from before.  I then
went to "Find and Install" for plugins and got Mylar 0.3.4.  So could it be that
my .mylar is confused somehow?

I noticed that if I delete "&lt;filter&gt;" in the filter box of the mylar task list,
the tasks show up again.  This is funny, because I've never used filters before.
 I can also get the tasks to show up by clicking on the "filter completed tasks"
button TWICE (None of my tasks are marked as completed.) or by modifying the
"filter priority lower than" menu.  (I'm guessing it's by design that the active
task isn't filtered even if its priority is lower than the threshold.)

It seems like mylar IS being loaded, because the package explorer shows the
correct files for the currently activated task.

Again, the tasks show up properly if I close eclipse with the task list
inactive.  It only happens when I close eclipse with the task list active/visible.
Thanks Shinjiro, this had to do with the unpredictability of Eclipse startup, I
just made it act more deterministically, and the fix seems to work for all
cases.  Sorry to ask this again, but it would be great if you could verify the
fix on your machine when 0.3.5 is out this Saturday (I'll send you a reminder to
download).  


I think there is something wrong still with the mylar task list.  It doesn't
show my tasks when I restart eclipse with the mylar task list view active.  The
package explorer seems to be filtering using the correct task, however.  I can
get the view to show the tasks by clicking on the empty "filter" text box and
typing ENTER.  I'm using mylar 0.3.5 with Eclipse 3.2M1.
Thanks for keeping up with this Shinjiro.  We can't reproduce this bug with
0.3.5, so I'm suspicous that an old version of Mylar is getting in your way.

Could you go to Help -&gt; Software Updates -&gt; Manage Configuration, click the 3rd
toolbar button to show all the disabled configurations, and make sure that you
only have Mylar 0.3.5 installed?

If for some reason that doesn't work could you either describe what you have in
your task list (folders, queries, root tasks, etc), or better yet send it as an
attachment to mylar@cs.ubc.ca?  We will only use it to test and discard it
afterwards.
Since this problem is still occurring in your workspace I'm reopening.  So does
that filter box work-around always work for you?
Yes, it does work all the time.  I click on the empty filter text field and hit
enter to make the tasks show up.  There are other ways to get the tasks to show up.

1. Right-click, and then select "Open"
2. Click on "Filter completed tasks"

(In reply to comment #15)
&gt; Since this problem is still occurring in your workspace I'm reopening.  So does
&gt; that filter box work-around always work for you?


I finally managed to reproduce and fixed this problem--thanks for sending your
task list.  It turns out that on a very short task list the viewer was not getting
refreshed after read.  

The fix will be in Mylar 0.3.7, which will be available
either next of the following Monday.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="105517" />
    <CreationDate amount="2005-07-28 16:30:00 -0400" />
    <DupId amount="" />
    <classification amount="Tools" />
    <Product amount="TPTP Testing" />
    <component amount="Test.Agents.Recorder" />
    <Version amount="4.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>(Test) Recording fails when using Agent Controller with Security enabled</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>The recording fails when performing a recording using Agent Controller with 
Security enabled.  Error you get is:  IWAT3031E Start Recording aborted due to 
exception: 
org.eclipse.hyades.internal.execution.security.SecuredConnectionRequiredExcepti
on
IWAT3034E The Remote Agent Controller on localhost/1002 is unavailable.
[sizing = 1 week ]
This bug is directly dependent on 95846.  
retarget to 4.2. 
Set the target to 4.2 I2 since the bugzilla that actually covers the work is scheduled for that time.
Depended upon bugzilla (95646) still has target of 4.2i2.  However, I am not certain that it will be ready for iteration 2. 
Retarget to 4.2 iteration 3. 
I just tested this on Windows and Linux and it works using build 200605220100.
ACTION: Please verify/close this defect.
Closing by default since not closed by the originator in the 7+ months since being resolved.  

Please reopen if the issue is still present in the latest TPTP release or the resolution is not correct.</WithStack>
    <WithOutStack>The recording fails when performing a recording using Agent Controller with 
Security enabled.  Error you get is:  IWAT3031E Start Recording aborted due to 
exception: 
org.eclipse.hyades.internal.execution.security.SecuredConnectionRequiredExcepti
on
IWAT3034E The Remote Agent Controller on localhost/1002 is unavailable.
[sizing = 1 week ]
This bug is directly dependent on 95846.  
retarget to 4.2. 
Set the target to 4.2 I2 since the bugzilla that actually covers the work is scheduled for that time.
Depended upon bugzilla (95646) still has target of 4.2i2.  However, I am not certain that it will be ready for iteration 2. 
Retarget to 4.2 iteration 3. 
I just tested this on Windows and Linux and it works using build 200605220100.
ACTION: Please verify/close this defect.
Closing by default since not closed by the originator in the 7+ months since being resolved.  

Please reopen if the issue is still present in the latest TPTP release or the resolution is not correct.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="105518" />
    <CreationDate amount="2005-07-28 16:32:00 -0400" />
    <DupId amount="76936" />
    <classification amount="Eclipse" />
    <Product amount="JDT" />
    <component amount="Debug" />
    <Version amount="3.1" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows 2000" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>\r generates CRLF on Console</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="1">
      <source_code type="functioncall">
        <location start="115" end="194" />
        <code>System.out.println("If you see this, it's a bug\r***************************");</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="DUPLICATE" />
    <WithStack>The escape sequence \r should not generate a LF only a CR.

Try this and compare with what it does in DOS window: 
System.out.println("If you see this, it's a bug\r***************************");

Asterisks should appear over the sentence, not underline it.
The same happens with other print methods and on Windows XP.


*** This bug has been marked as a duplicate of 52150 ***


*** This bug has been marked as a duplicate of bug 76936 ***</WithStack>
    <WithOutStack>The escape sequence \r should not generate a LF only a CR.

Try this and compare with what it does in DOS window: 
System.out.println("If you see this, it's a bug\r***************************");

Asterisks should appear over the sentence, not underline it.
The same happens with other print methods and on Windows XP.


*** This bug has been marked as a duplicate of 52150 ***


*** This bug has been marked as a duplicate of bug 76936 ***</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="105519" />
    <CreationDate amount="2005-07-28 16:41:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="UI" />
    <Version amount="3.1" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>[Viewers] - Adapt to SWT 3.1 Tree Support</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="INVALID" />
    <WithStack>For 3.2, we need to look at the SWT 3.1 changes to Tree and adapt JFace 
viewers accordingly.
I thought that Veronika already did this.
Boris - this is probably stale, but at any rate is yours.
Very stale.</WithStack>
    <WithOutStack>For 3.2, we need to look at the SWT 3.1 changes to Tree and adapt JFace 
viewers accordingly.
I thought that Veronika already did this.
Boris - this is probably stale, but at any rate is yours.
Very stale.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="105520" />
    <CreationDate amount="2005-07-28 16:42:00 -0400" />
    <DupId amount="72679" />
    <classification amount="Eclipse" />
    <Product amount="JDT" />
    <component amount="Debug" />
    <Version amount="3.1" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows 2000" />
    <priority amount="P3" />
    <bug_severity amount="enhancement" />
    <Summery>Focus should be on Console</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="DUPLICATE" />
    <WithStack>Window focus should go to Console when you run an application in case it does 
data capture.

It is annoying to enter caracters that appears in the editor and are considered 
a change to your source code.
Generally, there is no way to know when a program is waiting for input and we 
do not want to change the user's focus. 

*** This bug has been marked as a duplicate of 72679 ***</WithStack>
    <WithOutStack>Window focus should go to Console when you run an application in case it does 
data capture.

It is annoying to enter caracters that appears in the editor and are considered 
a change to your source code.
Generally, there is no way to know when a program is waiting for input and we 
do not want to change the user's focus. 

*** This bug has been marked as a duplicate of 72679 ***</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="105521" />
    <CreationDate amount="2005-07-28 16:45:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="JDT" />
    <component amount="UI" />
    <Version amount="3.2" />
    <rep_platform amount="PC" />
    <op_sys amount="All" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>use new Import/Export menu item, instead of seperate Import and Export items</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="16">
        <Lines>
          <Line>1. reduce clutter in the UI</Line>
          <Line>2. Categorization of import, export and other data transfer/transform type</Line>
          <Line>wizards; there are use cases to add new categories (tabs) to this wizard for</Line>
          <Line>project transformations and the like (i.e. something that doesn't quite fall</Line>
          <Line>into the import or export categories).</Line>
          <Line>Q: why the tabs instead of putting this on the first page of the wizard?</Line>
          <Line>Do you mean something like having radio buttons on the first page?  That would</Line>
          <Line>always force the user to make an extra click (or 2): the Next button and</Line>
          <Line>whatever radio you chose.</Line>
          <Line>Exactly like the new wizard(s). Anyway I liked the older solution better.</Line>
          <Line>-1 from me, too. Import and export aren't variants of the same action, they're</Line>
          <Line>distinct operations. It's akin to "reducing clutter" with a Cut/Copy/Paste menu</Line>
          <Line>item.</Line>
          <Line>I'm not clear on the categorization, I think we need to think through what the</Line>
          <Line>location would be for where a user would most likely go to find an operation</Line>
          <Line>that did data transformation for example.</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="RESOLVED" />
    <resolution amount="INVALID" />
    <WithStack>In response to bug 103501, there is now a merged Import/Export menu item, to 
replace the seperate Import and Export menu items.  The Package Explorer view 
in the Java perspective uses ImportResourcesAction and ExportResourcesAction as 
the Import and Export menu item actions.  With the merge of the 2 items into 
one action (ImportExportAction) you can now remove the 2 seperate actions and 
replace with the new action.

Also, I noticed there are 4 views in the Java Browsing perspective that use the 
Import and Export menu items: Projects, Packages, Types, and Members.  These 
should migrate to use the new merged action.
*** Bug 106445 has been marked as a duplicate of this bug. ***
-1

This forces an additional click on me. I see value in this.
I meant *no* value.
You don't always have to do an extra click, just when you decide you want to do 
import instead of export when export was your last choice (or vice-versa).  

There is value-add here:
1. reduce clutter in the UI 
2. Categorization of import, export and other data transfer/transform type 
wizards; there are use cases to add new categories (tabs) to this wizard for  
project transformations and the like (i.e. something that doesn't quite fall 
into the import or export categories).  
Q: why the tabs instead of putting this on the first page of the wizard?
Do you mean something like having radio buttons on the first page?  That would 
always force the user to make an extra click (or 2): the Next button and 
whatever radio you chose.
Exactly like the new wizard(s). Anyway I liked the older solution better.
-1 from me, too. Import and export aren't variants of the same action, they're
distinct operations. It's akin to "reducing clutter" with a Cut/Copy/Paste menu
item.
I'm not clear on the categorization, I think we need to think through what the
location would be for where a user would most likely go to find an operation
that did data transformation for example.

Other apps also use the notions of Save As\Open As\Open to do this.
&gt;Other apps also use the notions of Save As\Open As\Open to do this.
Yes, but afaik only when "exporting" a file or a set of files that are currently
open in the application i.e. if an open file is saved under a different format
then this is often built into the Save/Save As dialog.  I wouldn't use "Save As"
to export a set of projects to an archive or generate its Javadoc.

I think it is common to have 'Import' and 'Export' in the 'File' menu. Examples
that come to mind are PaintShopPro and LotusNotes. I don't think that the
current soltion improves usability. For me the best solution would be to allow
users to configure their menus.
*** Bug 106516 has been marked as a duplicate of this bug. ***
-1, too. The new Import/Export dialog broke my RCP application. The new 
Import/Export dialog is more confusing than reducing clutter as it moves a 
decision the user has to make (whether to import or to export) to a tab 
control. This isn't very good UI design. Give us the old separate Import and 
Export dialog back, at least for RCP applications.

So far, I have only two import options and one export option. So I don't need 
categories. Thus there should also be an option to disable category nodes (the 
old dialogs didn't show the "Others" category for my RCP app).

"The new Import/Export dialog broke my RCP application."

Please explain.  You should still be able to have your current support as the
old Import action will still open the wizard giving focus to the Import page
(and same for Export).  

"So far, I have only two import options and one export option. So I don't need 
categories. Thus there should also be an option to disable category nodes (the 
old dialogs didn't show the "Others" category for my RCP app)."

If we broke something we should fix it.  I think you are saying that if there
are NO categories specified and only wizards in the "Others" category then we
should just hide this category and show a flat list of wizards.  Also I have a
question for you... if you only have three items, maybe you should consider
having three specific menu entries for your three options and by passing the
first page of the wizards altogether, this would simplify your scenario greatly.
(Sorry, I'am late.)

Yes, focus will be given to the Import or the Export page. But this is not 
exactly the old behavior. I have still two separate menu items (as opposed to 
the combined Import/Export action), and I want to keep them. Moving the export 
and import options to the main menu is not a good idea, as (1) the list of 
options will grow over time, and (2) the descriptions are somewhat too long for 
a menu. The dialog's list control fits better.

"... I think you are saying that if there
are NO categories specified and only wizards in the "Others" category then we
should just hide this category and show a flat list of wizards."

That's what I meant. There was a flat list originally. But now there's a tree 
with one node called "Others". Please fix this. Thanks.

As you can see from bug 103501, we have decided to go back to separate import 
and export menu items.  Marking this bug as invalid.</WithStack>
    <WithOutStack>In response to bug 103501, there is now a merged Import/Export menu item, to 
replace the seperate Import and Export menu items.  The Package Explorer view 
in the Java perspective uses ImportResourcesAction and ExportResourcesAction as 
the Import and Export menu item actions.  With the merge of the 2 items into 
one action (ImportExportAction) you can now remove the 2 seperate actions and 
replace with the new action.

Also, I noticed there are 4 views in the Java Browsing perspective that use the 
Import and Export menu items: Projects, Packages, Types, and Members.  These 
should migrate to use the new merged action.
*** Bug 106445 has been marked as a duplicate of this bug. ***
-1

This forces an additional click on me. I see value in this.
I meant *no* value.
You don't always have to do an extra click, just when you decide you want to do 
import instead of export when export was your last choice (or vice-versa).  

There is value-add here:
1. reduce clutter in the UI 
2. Categorization of import, export and other data transfer/transform type 
wizards; there are use cases to add new categories (tabs) to this wizard for  
project transformations and the like (i.e. something that doesn't quite fall 
into the import or export categories).  
Q: why the tabs instead of putting this on the first page of the wizard?
Do you mean something like having radio buttons on the first page?  That would 
always force the user to make an extra click (or 2): the Next button and 
whatever radio you chose.
Exactly like the new wizard(s). Anyway I liked the older solution better.
-1 from me, too. Import and export aren't variants of the same action, they're
distinct operations. It's akin to "reducing clutter" with a Cut/Copy/Paste menu
item.
I'm not clear on the categorization, I think we need to think through what the
location would be for where a user would most likely go to find an operation
that did data transformation for example.

Other apps also use the notions of Save As\Open As\Open to do this.
&gt;Other apps also use the notions of Save As\Open As\Open to do this.
Yes, but afaik only when "exporting" a file or a set of files that are currently
open in the application i.e. if an open file is saved under a different format
then this is often built into the Save/Save As dialog.  I wouldn't use "Save As"
to export a set of projects to an archive or generate its Javadoc.

I think it is common to have 'Import' and 'Export' in the 'File' menu. Examples
that come to mind are PaintShopPro and LotusNotes. I don't think that the
current soltion improves usability. For me the best solution would be to allow
users to configure their menus.
*** Bug 106516 has been marked as a duplicate of this bug. ***
-1, too. The new Import/Export dialog broke my RCP application. The new 
Import/Export dialog is more confusing than reducing clutter as it moves a 
decision the user has to make (whether to import or to export) to a tab 
control. This isn't very good UI design. Give us the old separate Import and 
Export dialog back, at least for RCP applications.

So far, I have only two import options and one export option. So I don't need 
categories. Thus there should also be an option to disable category nodes (the 
old dialogs didn't show the "Others" category for my RCP app).

"The new Import/Export dialog broke my RCP application."

Please explain.  You should still be able to have your current support as the
old Import action will still open the wizard giving focus to the Import page
(and same for Export).  

"So far, I have only two import options and one export option. So I don't need 
categories. Thus there should also be an option to disable category nodes (the 
old dialogs didn't show the "Others" category for my RCP app)."

If we broke something we should fix it.  I think you are saying that if there
are NO categories specified and only wizards in the "Others" category then we
should just hide this category and show a flat list of wizards.  Also I have a
question for you... if you only have three items, maybe you should consider
having three specific menu entries for your three options and by passing the
first page of the wizards altogether, this would simplify your scenario greatly.
(Sorry, I'am late.)

Yes, focus will be given to the Import or the Export page. But this is not 
exactly the old behavior. I have still two separate menu items (as opposed to 
the combined Import/Export action), and I want to keep them. Moving the export 
and import options to the main menu is not a good idea, as (1) the list of 
options will grow over time, and (2) the descriptions are somewhat too long for 
a menu. The dialog's list control fits better.

"... I think you are saying that if there
are NO categories specified and only wizards in the "Others" category then we
should just hide this category and show a flat list of wizards."

That's what I meant. There was a flat list originally. But now there's a tree 
with one node called "Others". Please fix this. Thanks.

As you can see from bug 103501, we have decided to go back to separate import 
and export menu items.  Marking this bug as invalid.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="105522" />
    <CreationDate amount="2005-07-28 17:00:00 -0400" />
    <DupId amount="" />
    <classification amount="WebTools" />
    <Product amount="WTP Webservices" />
    <component amount="jst.ws" />
    <Version amount="1.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows 2000" />
    <priority amount="P3" />
    <bug_severity amount="major" />
    <Summery>Changing module names on page 3 of wizard causes bad projects to be created</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="INVALID" />
    <WithStack>When the preference for 'multiple modules per project' is NOT enabled, the 
module field on the 3rd page is enabled and the user able to change the module 
name.  

Doing so messes things up.  Two projects are created instead; one with the 
project name, and another with the module's name.

I am seeing this in WTP RC5 for both the client wizard and the service wizard.
Seng, this bug should be obsolete with the removal of support for multiple 
modules. Please confirm, and close or reopen as appropriate.
OK</WithStack>
    <WithOutStack>When the preference for 'multiple modules per project' is NOT enabled, the 
module field on the 3rd page is enabled and the user able to change the module 
name.  

Doing so messes things up.  Two projects are created instead; one with the 
project name, and another with the module's name.

I am seeing this in WTP RC5 for both the client wizard and the service wizard.
Seng, this bug should be obsolete with the removal of support for multiple 
modules. Please confirm, and close or reopen as appropriate.
OK</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="105523" />
    <CreationDate amount="2005-07-28 17:08:00 -0400" />
    <DupId amount="" />
    <classification amount="WebTools" />
    <Product amount="WTP ServerTools" />
    <component amount="wst.server" />
    <Version amount="unspecified" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Servers view not updated when deleted Servers project</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>In 0.7rc5, if I've set up a Tomcat runtime and created a server instance for it,
it shows up in the "Servers" view and I now have a "Servers" project.  Deleting
the project has no visible effect on the view, though, and I still open the
Tomcat server configuration that I defined and see the settings I changed from
the default.
Hi Nitin,

The server is stored in metadata, so it should still be visible in the Servers
view. What you deleted was the Tomcat configuration, which is created within the
workspace so that people can edit it directly, etc. The server and your changes
are still available - all you've deleted is the configuration which would stop
the server from running.

I'll use this defect to make it more obvious when a server is missing it's
configuration, e.g. an error or warning marker.
Added code to show an error within the server editor when the configuration is
missing. Still need to show an error in the Servers view and confirm that all
actions (start/stop/publish/...) fail appropriately.
The basic support for this was done many releases ago, and I have not seen any new bugs on the topic. Since we haven't been able to get to the remaining bit in several years and releases, I am closing this bug. Please open a new bug if you still feel there is missing functionality.</WithStack>
    <WithOutStack>In 0.7rc5, if I've set up a Tomcat runtime and created a server instance for it,
it shows up in the "Servers" view and I now have a "Servers" project.  Deleting
the project has no visible effect on the view, though, and I still open the
Tomcat server configuration that I defined and see the settings I changed from
the default.
Hi Nitin,

The server is stored in metadata, so it should still be visible in the Servers
view. What you deleted was the Tomcat configuration, which is created within the
workspace so that people can edit it directly, etc. The server and your changes
are still available - all you've deleted is the configuration which would stop
the server from running.

I'll use this defect to make it more obvious when a server is missing it's
configuration, e.g. an error or warning marker.
Added code to show an error within the server editor when the configuration is
missing. Still need to show an error in the Servers view and confirm that all
actions (start/stop/publish/...) fail appropriately.
The basic support for this was done many releases ago, and I have not seen any new bugs on the topic. Since we haven't been able to get to the remaining bit in several years and releases, I am closing this bug. Please open a new bug if you still feel there is missing functionality.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="105524" />
    <CreationDate amount="2005-07-28 17:20:00 -0400" />
    <DupId amount="101779" />
    <classification amount="Eclipse" />
    <Product amount="JDT" />
    <component amount="Core" />
    <Version amount="3.1" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows 2000" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>VerifyError when using generics with autoboxing</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="2">
      <source_code type="class">
        <location start="108" end="150" />
        <code>class Wrapper&lt; T &gt;
{
    public T value;
}</code>
      </source_code>
      <source_code type="class">
        <location start="152" end="465" />
        <code>public class Test
{
    public static void main( final String[ ] args )
    {
        final Wrapper&lt; Integer &gt; wrap = new Wrapper&lt; Integer &gt;( );
        wrap.value = 0;
        wrap.value = wrap.value + 1; // works
        wrap.value++; // throws VerifyError
        wrap.value += 1; // throws VerifyError
    }
}</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="DUPLICATE" />
    <WithStack>The following code compiles fine but throws a VerifyError when run.  Javac dies
just trying to compile it.

class Wrapper&lt; T &gt;
{
    public T value;
}

public class Test
{
    public static void main( final String[ ] args )
    {
        final Wrapper&lt; Integer &gt; wrap = new Wrapper&lt; Integer &gt;( );
        wrap.value = 0;
        wrap.value = wrap.value + 1; // works
        wrap.value++; // throws VerifyError
        wrap.value += 1; // throws VerifyError
    }
}
Cannot reproduce any longer with latest. Dup of bug 101779.
Added AutoboxingTest#test111

*** This bug has been marked as a duplicate of 101779 ***</WithStack>
    <WithOutStack>The following code compiles fine but throws a VerifyError when run.  Javac dies
just trying to compile it.

class Wrapper&lt; T &gt;
{
    public T value;
}

public class Test
{
    public static void main( final String[ ] args )
    {
        final Wrapper&lt; Integer &gt; wrap = new Wrapper&lt; Integer &gt;( );
        wrap.value = 0;
        wrap.value = wrap.value + 1; // works
        wrap.value++; // throws VerifyError
        wrap.value += 1; // throws VerifyError
    }
}
Cannot reproduce any longer with latest. Dup of bug 101779.
Added AutoboxingTest#test111

*** This bug has been marked as a duplicate of 101779 ***</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="105525" />
    <CreationDate amount="2005-07-28 17:22:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="JDT" />
    <component amount="Core" />
    <Version amount="3.1" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="enhancement" />
    <Summery>changes to the build path results in recompiling the whole project</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="WONTFIX" />
    <WithStack>when I add a new jar to the build path, eclipse cleans all the outputs and 
recompiles the whole project again which is very time consuming. It would be 
great if it just compiled the changed classes or classes which didn't compile 
because of the missing library.
How do you know you did not alter the rules for resolving names ? I agree that
in general, you would contribute a new JAR without any name collisions, but in
theory this could invalidate quite a few assumptions.




Sorry but I don't think we will change this.

Adding/removing jar files is not a common every-day task so its not worth it 
to check inside incremental builds for things, which do not happen often.</WithStack>
    <WithOutStack>when I add a new jar to the build path, eclipse cleans all the outputs and 
recompiles the whole project again which is very time consuming. It would be 
great if it just compiled the changed classes or classes which didn't compile 
because of the missing library.
How do you know you did not alter the rules for resolving names ? I agree that
in general, you would contribute a new JAR without any name collisions, but in
theory this could invalidate quite a few assumptions.




Sorry but I don't think we will change this.

Adding/removing jar files is not a common every-day task so its not worth it 
to check inside incremental builds for things, which do not happen often.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="105526" />
    <CreationDate amount="2005-07-28 17:30:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse Foundation" />
    <Product amount="z_Archived" />
    <component amount="VE" />
    <Version amount="unspecified" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P2" />
    <bug_severity amount="normal" />
    <Summery>Rename project with open VE causes refactor to fail deleting old project</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>You get an abort/undo dialog and trace with error in project.move(). It seems
like we aren't getting a pre-close/pre-delete so we don't know to close the
remote vm's. Need to trace through what notifications are sent.
The problem was that the VE itself wasn't listening on pre_delete so its own
remote vm was not being released until too late. It released it later when it
got notified of the file being moved to a new project, but that was too late and
after the project delete was tried.

The fix has been released to HEAD.
verified in VE 20050822
Also verified with build 20050824.
closing</WithStack>
    <WithOutStack>You get an abort/undo dialog and trace with error in project.move(). It seems
like we aren't getting a pre-close/pre-delete so we don't know to close the
remote vm's. Need to trace through what notifications are sent.
The problem was that the VE itself wasn't listening on pre_delete so its own
remote vm was not being released until too late. It released it later when it
got notified of the file being moved to a new project, but that was too late and
after the project delete was tried.

The fix has been released to HEAD.
verified in VE 20050822
Also verified with build 20050824.
closing</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="105527" />
    <CreationDate amount="2005-07-28 17:35:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse Foundation" />
    <Product amount="z_Archived" />
    <component amount="VE" />
    <Version amount="unspecified" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="enhancement" />
    <Summery>createMethod() Pattern</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="3">
      <source_code type="functiondef">
        <location start="59" end="261" />
        <code>void createC1() {
            C1 = new Composite (....)
            Button B1 = new Button(C1....)
            ....
            createC2()

            Button B11 = new Button (C1....)            
   }</code>
      </source_code>
      <source_code type="functiondef">
        <location start="262" end="384" />
        <code>void createC2() {

          C2 = new Composite (C1, ....)
          ...
          Button B2 = new Button (C2, ....)
  }</code>
      </source_code>
      <source_code type="functiondef">
        <location start="712" end="852" />
        <code>void createC2() {

     C2 = new Composite (C1, ....)
     Button B2 = new Button (C1, ....)  &lt;-------- C1 is both a parent for C2, B2
  }</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="0" />
    <bug_status amount="NEW" />
    <resolution amount="" />
    <WithStack>Currently VE treats the createXXXX() method as following:

 void createC1() {
            C1 = new Composite (....)
            Button B1 = new Button(C1....)
            ....
            createC2()

            Button B11 = new Button (C1....)            
   }
  void createC2() {

          C2 = new Composite (C1, ....)
          ...
          Button B2 = new Button (C2, ....)
  }

The call to createC2() in the createC1() method is mached up with the
          C2 = new Composite (C1, ....) constructor to determine its Z order.
ie., moving createC1() after the B11 constructor will change C2's Z order.

VE fail now if the createC2() method will have multiple controls that consider
C1 as a parent... e.g:
  void createC2() {

     C2 = new Composite (C1, ....)
     Button B2 = new Button (C1, ....)  &lt;-------- C1 is both a parent for C2, B2
  }


VE should choose the first constructor to be paired with the call to createC2()
in createC1()</WithStack>
    <WithOutStack>Currently VE treats the createXXXX() method as following:

 void createC1() {
            C1 = new Composite (....)
            Button B1 = new Button(C1....)
            ....
            createC2()

            Button B11 = new Button (C1....)            
   }
  void createC2() {

          C2 = new Composite (C1, ....)
          ...
          Button B2 = new Button (C2, ....)
  }

The call to createC2() in the createC1() method is mached up with the
          C2 = new Composite (C1, ....) constructor to determine its Z order.
ie., moving createC1() after the B11 constructor will change C2's Z order.

VE fail now if the createC2() method will have multiple controls that consider
C1 as a parent... e.g:
  void createC2() {

     C2 = new Composite (C1, ....)
     Button B2 = new Button (C1, ....)  &lt;-------- C1 is both a parent for C2, B2
  }


VE should choose the first constructor to be paired with the call to createC2()
in createC1()</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="105528" />
    <CreationDate amount="2005-07-28 17:36:00 -0400" />
    <DupId amount="104587" />
    <classification amount="WebTools" />
    <Product amount="WTP Source Editing" />
    <component amount="wst.xml" />
    <Version amount="0.7" />
    <rep_platform amount="PC" />
    <op_sys amount="All" />
    <priority amount="P3" />
    <bug_severity amount="enhancement" />
    <Summery>Ant Tasks for Eclipse Web Tools</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="DUPLICATE" />
    <WithStack>It would be nice to have Ant Tasks that leverage some of the features of the Web
Tools Project.  Particularly, creating sample XML from a Schemas.  These could
be implemented as eclipse.* or wst.* tasks within the eclipse ant integration
feature.


*** This bug has been marked as a duplicate of 104587 ***
This is part of a mass update to close out all stale WTP defects already verified by the reporter but awaiting closure by the assignee.  If you feel this defect was closed inappropriately, please reopen.

Thanks, John Lanuti</WithStack>
    <WithOutStack>It would be nice to have Ant Tasks that leverage some of the features of the Web
Tools Project.  Particularly, creating sample XML from a Schemas.  These could
be implemented as eclipse.* or wst.* tasks within the eclipse ant integration
feature.


*** This bug has been marked as a duplicate of 104587 ***
This is part of a mass update to close out all stale WTP defects already verified by the reporter but awaiting closure by the assignee.  If you feel this defect was closed inappropriately, please reopen.

Thanks, John Lanuti</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="105529" />
    <CreationDate amount="2005-07-28 17:44:00 -0400" />
    <DupId amount="" />
    <classification amount="WebTools" />
    <Product amount="WTP Java EE Tools" />
    <component amount="jst.j2ee" />
    <Version amount="0.7" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows 2000" />
    <priority amount="P3" />
    <bug_severity amount="major" />
    <Summery>Web project breaks when running on server after CVS update or commit</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="WONTFIX" />
    <WithStack>If Dynamic Web Project is currently running on a server (in my case - Tomcat
5.5), and the user then updates or commits to CVS, during the automatic rebuild
- all class files in the .deployables/%web-archive%/WEB-INF/classes folder are
deleted but *not* rebuilt. Therefore the running web project breaks (no classes
found) when it attemps to reload itself. I suspect that problem may be connected
to the "Build Automatically" function. The workaround is to stop the server,
clean the project then restart the server.
.deployables are going away in 1.0
This bug was moved to 'closed' state, since it is so old and since it is a dup, worksforme, invalid bug that its unlikely to still be useful or need further attention. Feel free to re-open, or open a new bug, if this semi-automatic processing was done in error.</WithStack>
    <WithOutStack>If Dynamic Web Project is currently running on a server (in my case - Tomcat
5.5), and the user then updates or commits to CVS, during the automatic rebuild
- all class files in the .deployables/%web-archive%/WEB-INF/classes folder are
deleted but *not* rebuilt. Therefore the running web project breaks (no classes
found) when it attemps to reload itself. I suspect that problem may be connected
to the "Build Automatically" function. The workaround is to stop the server,
clean the project then restart the server.
.deployables are going away in 1.0
This bug was moved to 'closed' state, since it is so old and since it is a dup, worksforme, invalid bug that its unlikely to still be useful or need further attention. Feel free to re-open, or open a new bug, if this semi-automatic processing was done in error.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="105530" />
    <CreationDate amount="2005-07-28 17:45:00 -0400" />
    <DupId amount="" />
    <classification amount="WebTools" />
    <Product amount="WTP Webservices" />
    <component amount="wst.ws" />
    <Version amount="0.7" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="major" />
    <Summery>Incorrect version of org.apache.axis listed in about.html</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>WTP is now shipping Axis 1.2.1. The about.html file in the plugin says it is
shipping 1.1. This is a discrepancy that should be fixed.

The fix for this is an update to an HTML file. No code change required.
Fixed. I updated the Axis version to 1.2.1 and updated the jar listing to
correspond to the Axis 1.2.1 jars.
Closing bug.</WithStack>
    <WithOutStack>WTP is now shipping Axis 1.2.1. The about.html file in the plugin says it is
shipping 1.1. This is a discrepancy that should be fixed.

The fix for this is an update to an HTML file. No code change required.
Fixed. I updated the Axis version to 1.2.1 and updated the jar listing to
correspond to the Axis 1.2.1 jars.
Closing bug.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="105531" />
    <CreationDate amount="2005-07-28 18:01:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="JDT" />
    <component amount="Core" />
    <Version amount="3.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Linux" />
    <priority amount="P3" />
    <bug_severity amount="blocker" />
    <Summery>[1.5][compiler] ecj from CVS generates spurious incomprehensible error</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="5">
      <source_code type="assignment">
        <location start="314" end="368" />
        <code>ref.nextOnQueue = first == null ? ref : first;</code>
      </source_code>
      <source_code type="class">
        <location start="2023" end="2132" />
        <code>public class X&lt;T&gt; {
	Y first;

	void foo(Y&lt;? extends T&gt; ref) {
		ref.next = first == null ? ref : first;
	}
}</code>
      </source_code>
      <source_code type="class">
        <location start="2134" end="2160" />
        <code>class Y&lt;E&gt; {
	Y&lt;E&gt; next;
}</code>
      </source_code>
      <source_code type="assignment">
        <location start="2473" end="2539" />
        <code>ref.nextOnQueue = first == null ? (Reference) ref : first;</code>
      </source_code>
      <source_code type="functiondef">
        <location start="2786" end="3271" />
        <code>AccessController.doPrivileged(new PrivilegedAction() {
                    public Object run() {
                        ClassLoader classLoader = null;
                        try {
                            classLoader =
                                Thread.currentThread().getContextClassLoader();
                        } catch (SecurityException ex) {
                        }
                        return classLoader;
                    }
                }</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="1">
      <Enumeration lines="2">
        <Lines>
          <Line>1445. ERROR in ../java/lang/ref/ReferenceQueue.java</Line>
          <Line>(at line 91)</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="VERIFIED" />
    <resolution amount="FIXED" />
    <WithStack>I have been compiled the generics branch of GNU Classpath with ecj for a while,
successfully.  However, after updating to the latest CVS version this week (most
recently, yesterday's (27/7/2005)), I get a strange error which makes the build
fail:

1445. ERROR in ../java/lang/ref/ReferenceQueue.java
 (at line 91)
        ref.nextOnQueue = first == null ? ref : first;
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^
Type mismatch: cannot convert from Reference&lt;capture-of ? extends T&gt; to
Reference&lt;capture-of ? extends T&gt;

(This is the only error; there are plenty of warnings at present due to the use
of raw collections).

To me, the error doesn't even make sense, as the two are identical.  Finding a
machine with a copy of Sun's proprietary javac for 1.5 results in a successful
compile, as did previous versions of ecj.

FWIW, ref is of type Reference&lt;? extends T&gt; and its nextOnQueue field is of type
Reference&lt;T&gt;.  first is of type Reference (although I still get the error with
Reference&lt;T&gt;).  I've tried casts and a variety of other things to make this
work, but to no avail.  As I say, this code hasn't changed and it does compile
with earlier versions and Sun's javac.  If there is a problem, the error message
could at least be more understandable.

Thanks.
Could you provide exact steps to reproduce ?
Yes, run a build of ecj from CVS over the generics branch of GNU Classpath:

export CVS_RSH="ssh"

cvs -z3 -d:ext:anoncvs@savannah.gnu.org:/cvsroot/classpath co -r generics-branch
classpath

./autogen.sh &amp;&amp; ./configure &amp;&amp; make.
Cannot connect:

Could not connect to :ext:anoncvs@savannah.gnu.org:/cvsroot/classpath: I/O
exception occurred: CreateProcess: ssh savannah.gnu.org -l anoncvs cvs server
error=2

Hmmm... I don't see that here, it still checks out fine.  The relevant files are
here:

http://savannah.gnu.org/cgi-bin/viewcvs/classpath/classpath/java/lang/ref/?only_with_tag=generics-branch

Note the 'generics-branch' tag.
compiler v_568 had the same problem.
Reproduced. Simpler testcase:

public class X&lt;T&gt; {
	Y first;

	void foo(Y&lt;? extends T&gt; ref) {
		ref.next = first == null ? ref : first;
	}
}

class Y&lt;E&gt; {
	Y&lt;E&gt; next;
}
Problem comes from the fact the conditional expression is checking types in old
1.4 fashion (operand compatibility) before attempting 1.5 (LUB), which is wrong. 
Added GenericTypeTest#test799.

Fixed in both 3.1.1 and 3.2 streams.
Until you get the fix, you may workaround the issue by inserting an extra cast:

        ref.nextOnQueue = first == null ? (Reference) ref : first;
The patch (using latest ecj CVS) solves that error, but spawns lots of:

22. ERROR in
../external/w3c_dom/org/w3c/dom/bootstrap/DOMImplementationRegistry.java
 (at line 318)
        return isJRE11()
            ? null
            : (ClassLoader)
              AccessController.doPrivileged(new PrivilegedAction() {
                    public Object run() {
                        ClassLoader classLoader = null;
                        try {
                            classLoader =
                                Thread.currentThread().getContextClassLoader();
                        } catch (SecurityException ex) {
                        }
                        return classLoader;
                    }
                });
              
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
Incompatible conditional operand types null and ClassLoader

There are lots of those now, presumably because of the ordering change.

Yes, I figured this regression as well. Got addressed in latest.
*** Bug 101831 has been marked as a duplicate of this bug. ***
Verified in I20050920-0010 for 3.2M2
Verified using M20050923-1430 for 3.1.1</WithStack>
    <WithOutStack>I have been compiled the generics branch of GNU Classpath with ecj for a while,
successfully.  However, after updating to the latest CVS version this week (most
recently, yesterday's (27/7/2005)), I get a strange error which makes the build
fail:

1445. ERROR in ../java/lang/ref/ReferenceQueue.java
 (at line 91)
        ref.nextOnQueue = first == null ? ref : first;
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^
Type mismatch: cannot convert from Reference&lt;capture-of ? extends T&gt; to
Reference&lt;capture-of ? extends T&gt;

(This is the only error; there are plenty of warnings at present due to the use
of raw collections).

To me, the error doesn't even make sense, as the two are identical.  Finding a
machine with a copy of Sun's proprietary javac for 1.5 results in a successful
compile, as did previous versions of ecj.

FWIW, ref is of type Reference&lt;? extends T&gt; and its nextOnQueue field is of type
Reference&lt;T&gt;.  first is of type Reference (although I still get the error with
Reference&lt;T&gt;).  I've tried casts and a variety of other things to make this
work, but to no avail.  As I say, this code hasn't changed and it does compile
with earlier versions and Sun's javac.  If there is a problem, the error message
could at least be more understandable.

Thanks.
Could you provide exact steps to reproduce ?
Yes, run a build of ecj from CVS over the generics branch of GNU Classpath:

export CVS_RSH="ssh"

cvs -z3 -d:ext:anoncvs@savannah.gnu.org:/cvsroot/classpath co -r generics-branch
classpath

./autogen.sh &amp;&amp; ./configure &amp;&amp; make.
Cannot connect:

Could not connect to :ext:anoncvs@savannah.gnu.org:/cvsroot/classpath: I/O
exception occurred: CreateProcess: ssh savannah.gnu.org -l anoncvs cvs server
error=2

Hmmm... I don't see that here, it still checks out fine.  The relevant files are
here:

http://savannah.gnu.org/cgi-bin/viewcvs/classpath/classpath/java/lang/ref/?only_with_tag=generics-branch

Note the 'generics-branch' tag.
compiler v_568 had the same problem.
Reproduced. Simpler testcase:

public class X&lt;T&gt; {
	Y first;

	void foo(Y&lt;? extends T&gt; ref) {
		ref.next = first == null ? ref : first;
	}
}

class Y&lt;E&gt; {
	Y&lt;E&gt; next;
}
Problem comes from the fact the conditional expression is checking types in old
1.4 fashion (operand compatibility) before attempting 1.5 (LUB), which is wrong. 
Added GenericTypeTest#test799.

Fixed in both 3.1.1 and 3.2 streams.
Until you get the fix, you may workaround the issue by inserting an extra cast:

        ref.nextOnQueue = first == null ? (Reference) ref : first;
The patch (using latest ecj CVS) solves that error, but spawns lots of:

22. ERROR in
../external/w3c_dom/org/w3c/dom/bootstrap/DOMImplementationRegistry.java
 (at line 318)
        return isJRE11()
            ? null
            : (ClassLoader)
              AccessController.doPrivileged(new PrivilegedAction() {
                    public Object run() {
                        ClassLoader classLoader = null;
                        try {
                            classLoader =
                                Thread.currentThread().getContextClassLoader();
                        } catch (SecurityException ex) {
                        }
                        return classLoader;
                    }
                });
              
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
Incompatible conditional operand types null and ClassLoader

There are lots of those now, presumably because of the ordering change.

Yes, I figured this regression as well. Got addressed in latest.
*** Bug 101831 has been marked as a duplicate of this bug. ***
Verified in I20050920-0010 for 3.2M2
Verified using M20050923-1430 for 3.1.1</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="105532" />
    <CreationDate amount="2005-07-28 18:04:00 -0400" />
    <DupId amount="" />
    <classification amount="Tools" />
    <Product amount="GEF" />
    <component amount="GEF (MVC) [GEF 3.x / Zest 1.x]" />
    <Version amount="3.1" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>[Text] NPE if TextFlow's layout manager is changed after it has been added to parent</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="8">
      <source_code type="assignment">
        <location start="0" end="31" />
        <code>FlowPage page = new FlowPage();</code>
      </source_code>
      <source_code type="assignment">
        <location start="32" end="63" />
        <code>TextFlow text = new TextFlow();</code>
      </source_code>
      <source_code type="functioncall">
        <location start="64" end="79" />
        <code>page.add(text);</code>
      </source_code>
      <source_code type="functioncall">
        <location start="80" end="133" />
        <code>text.setLayoutManager(new ParagraphTextLayout(text));</code>
      </source_code>
      <source_code type="functioncall">
        <location start="134" end="160" />
        <code>text.setText("some text");</code>
      </source_code>
      <source_code type="functioncall">
        <location start="161" end="206" />
        <code>page.setFont(new Font(null, "Tahoma", 8, 0));</code>
      </source_code>
      <source_code type="functioncall">
        <location start="207" end="229" />
        <code>page.setSize(100, 30);</code>
      </source_code>
      <source_code type="functioncall">
        <location start="230" end="246" />
        <code>page.validate();</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="0" />
    <bug_status amount="NEW" />
    <resolution amount="" />
    <WithStack>FlowPage page = new FlowPage();
TextFlow text = new TextFlow();
page.add(text);
text.setLayoutManager(new ParagraphTextLayout(text));
text.setText("some text");
page.setFont(new Font(null, "Tahoma", 8, 0));
page.setSize(100, 30);
page.validate();

The NPE will be encountered during page.validate() because the text flow's new 
layout's context is null.

I think this is an unnecessary restriction on the user of Draw2d and we can 
fix this by caching the context in the FlowFigure instead of the 
FlowFigureLayout.  The layout can then just get it from the figure.</WithStack>
    <WithOutStack>FlowPage page = new FlowPage();
TextFlow text = new TextFlow();
page.add(text);
text.setLayoutManager(new ParagraphTextLayout(text));
text.setText("some text");
page.setFont(new Font(null, "Tahoma", 8, 0));
page.setSize(100, 30);
page.validate();

The NPE will be encountered during page.validate() because the text flow's new 
layout's context is null.

I think this is an unnecessary restriction on the user of Draw2d and we can 
fix this by caching the context in the FlowFigure instead of the 
FlowFigureLayout.  The layout can then just get it from the figure.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="105533" />
    <CreationDate amount="2005-07-28 18:14:00 -0400" />
    <DupId amount="" />
    <classification amount="Modeling" />
    <Product amount="EMF" />
    <component amount="SDO" />
    <Version amount="2.0.3" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows 2000" />
    <priority amount="P1" />
    <bug_severity amount="normal" />
    <Summery>[Dupe] ESuperAdapter holds onto references forever == memory leak</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="VERIFIED" />
    <resolution amount="FIXED" />
    <WithStack>Copy of bug 95809, for 2.0.3 maintenance stream
Fixed in CVS for 2.0.x branch
FYI, changed files are these:

1.
http://dev.eclipse.org/viewcvs/indextools.cgi/org.eclipse.emf/plugins/org.eclipse.emf.ecore/src/org/eclipse/emf/ecore/impl/ESuperAdapter.java.diff?r1=1.2.2.1&amp;r2=1.2.2.2&amp;only_with_tag=R2_0_maintenance
2.
http://dev.eclipse.org/viewcvs/indextools.cgi/org.eclipse.emf/plugins/org.eclipse.emf.ecore/src/org/eclipse/emf/ecore/impl/EClassImpl.java.diff?r1=1.7.2.1&amp;r2=1.7.2.2&amp;only_with_tag=R2_0_maintenance
Fixed in EMF 2.0.4 M200509081011.
Move to verified as per bug 206558.</WithStack>
    <WithOutStack>Copy of bug 95809, for 2.0.3 maintenance stream
Fixed in CVS for 2.0.x branch
FYI, changed files are these:

1.
http://dev.eclipse.org/viewcvs/indextools.cgi/org.eclipse.emf/plugins/org.eclipse.emf.ecore/src/org/eclipse/emf/ecore/impl/ESuperAdapter.java.diff?r1=1.2.2.1&amp;r2=1.2.2.2&amp;only_with_tag=R2_0_maintenance
2.
http://dev.eclipse.org/viewcvs/indextools.cgi/org.eclipse.emf/plugins/org.eclipse.emf.ecore/src/org/eclipse/emf/ecore/impl/EClassImpl.java.diff?r1=1.7.2.1&amp;r2=1.7.2.2&amp;only_with_tag=R2_0_maintenance
Fixed in EMF 2.0.4 M200509081011.
Move to verified as per bug 206558.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="105534" />
    <CreationDate amount="2005-07-28 18:15:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse Foundation" />
    <Product amount="z_Archived" />
    <component amount="VE" />
    <Version amount="unspecified" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Instantiation exceptions aren't not caught on reinstantiation.</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="WONTFIX" />
    <WithStack>Currently BeanProxyAdapter checks for instantiation errors on a setting at
various times. However this doesn't get all of them, for example on a
Lifecycle.reinstantiation doesn't send out the BeanInstantiationException at the
right time for it to be caught.
I no longer remember what I was trying to say here. I haven't a clue. It would be too dangerous for me to just go in and change something. I'll wait until the next time something happens and figure it out then.
closing</WithStack>
    <WithOutStack>Currently BeanProxyAdapter checks for instantiation errors on a setting at
various times. However this doesn't get all of them, for example on a
Lifecycle.reinstantiation doesn't send out the BeanInstantiationException at the
right time for it to be caught.
I no longer remember what I was trying to say here. I haven't a clue. It would be too dangerous for me to just go in and change something. I'll wait until the next time something happens and figure it out then.
closing</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="105535" />
    <CreationDate amount="2005-07-28 18:51:00 -0400" />
    <DupId amount="" />
    <classification amount="WebTools" />
    <Product amount="WTP Source Editing" />
    <component amount="wst.html" />
    <Version amount="unspecified" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P2" />
    <bug_severity amount="normal" />
    <Summery>consider including WAP DTDs</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>Due to lack of right doc's, the following catalog entries and their dtd's were 
removed from final build ... we should consider adding them back in future to
make it easier for end users.
removed in tagged version 
v20050728_1900
of
org.eclipse.wst.html.standard.dtds
FYI .. meant to be explicit, this was 

&lt;public publicId="-//WAPFORUM//DTD WML 1.1//EN"
        uri="dtds/wml11.dtd"&gt;
&lt;/public&gt;

&lt;public publicId="-//WAPFORUM//DTD XHTML Mobile 1.0//EN"
        uri="dtds/xhtml-mobile10-flat.dtd"
        webURL="http://www.wapforum.org/DTD/xhtml-mobile10.dtd"&gt;
&lt;/public&gt;

&lt;public publicId="-//WAPFORUM//DTD WML 1.3//EN"
        uri="dtds/wml13.dtd"
        webURL="http://www.wapforum.org/DTD/wml13.dtd"&gt;
&lt;/public&gt;

forgot, initially to remove info from about.html, and 
to remove unit tests which verified their existence. 

See 
removedtestWAP13()
removedtestWAPFORUM()
removedtestXHTML10M() 
to re-add the unit tests if/when needed. 

*** Bug 115784 has been marked as a duplicate of this bug. ***
EMO approved, IP Log updated, and re-introduced in 11/11 I-build. 

Confirming fixed. 
This is part of a mass update to close out all stale WTP defects already verified by the reporter but awaiting closure by the assignee.  If you feel this defect was closed inappropriately, please reopen.

Thanks, John Lanuti</WithStack>
    <WithOutStack>Due to lack of right doc's, the following catalog entries and their dtd's were 
removed from final build ... we should consider adding them back in future to
make it easier for end users.
removed in tagged version 
v20050728_1900
of
org.eclipse.wst.html.standard.dtds
FYI .. meant to be explicit, this was 

&lt;public publicId="-//WAPFORUM//DTD WML 1.1//EN"
        uri="dtds/wml11.dtd"&gt;
&lt;/public&gt;

&lt;public publicId="-//WAPFORUM//DTD XHTML Mobile 1.0//EN"
        uri="dtds/xhtml-mobile10-flat.dtd"
        webURL="http://www.wapforum.org/DTD/xhtml-mobile10.dtd"&gt;
&lt;/public&gt;

&lt;public publicId="-//WAPFORUM//DTD WML 1.3//EN"
        uri="dtds/wml13.dtd"
        webURL="http://www.wapforum.org/DTD/wml13.dtd"&gt;
&lt;/public&gt;

forgot, initially to remove info from about.html, and 
to remove unit tests which verified their existence. 

See 
removedtestWAP13()
removedtestWAPFORUM()
removedtestXHTML10M() 
to re-add the unit tests if/when needed. 

*** Bug 115784 has been marked as a duplicate of this bug. ***
EMO approved, IP Log updated, and re-introduced in 11/11 I-build. 

Confirming fixed. 
This is part of a mass update to close out all stale WTP defects already verified by the reporter but awaiting closure by the assignee.  If you feel this defect was closed inappropriately, please reopen.

Thanks, John Lanuti</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="105536" />
    <CreationDate amount="2005-07-28 18:53:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="JDT" />
    <component amount="Debug" />
    <Version amount="3.1" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>[scrapbook] Scrapbook editor ignores some Text Editors preferences</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="WONTFIX" />
    <WithStack>In 3.1 a scrapbook editor won't:
-Show the print margin
-Highlight the current line
-Support hyperlink navigation style

Others like Disabling the overwrite typing mode do work, however.
AFAIK, the scrapbook editor is provided by debug - correct me if not.
Yes, debug owns the scrapbook. Unfortunately it has fallen behind the Java 
editor feature set. Currently no plans to upgrade due to priority/available 
resources.
As of now 'LATER' and 'REMIND' resolutions are no longer supported.
Please reopen this bug if it is still valid for you.</WithStack>
    <WithOutStack>In 3.1 a scrapbook editor won't:
-Show the print margin
-Highlight the current line
-Support hyperlink navigation style

Others like Disabling the overwrite typing mode do work, however.
AFAIK, the scrapbook editor is provided by debug - correct me if not.
Yes, debug owns the scrapbook. Unfortunately it has fallen behind the Java 
editor feature set. Currently no plans to upgrade due to priority/available 
resources.
As of now 'LATER' and 'REMIND' resolutions are no longer supported.
Please reopen this bug if it is still valid for you.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="105537" />
    <CreationDate amount="2005-07-28 18:58:00 -0400" />
    <DupId amount="" />
    <classification amount="BIRT" />
    <Product amount="BIRT" />
    <component amount="Chart" />
    <Version amount="1.0.1" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows 2000" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Should be able to externalize series label text</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="8">
        <Lines>
          <Line>1. An expression that retrieves dynamic data from the database. You use this</Line>
          <Line>type of expression to group data; for example, use row["city'] to create one y</Line>
          <Line>series for each city value.</Line>
          <Line>2. A string expression, in quotation marks, that always presents the same</Line>
          <Line>static text. You use this type of expression as a label; for example, if you</Line>
          <Line>use row["x"] as the y series data expression to retrieve data for a y series,</Line>
          <Line>you can use "Fortune 500 companies" in the series grouping key field. The</Line>
          <Line>legend will display Fortune 500 companies to identify the y series.</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="RESOLVED" />
    <resolution amount="WONTFIX" />
    <WithStack>When you use more than one y series definition, you can use the series grouping 
key field to create a static label for each series. For example, if you use row
["City1"] as the data definition for Y Series-1 and row["City2"] as the data 
definition for Y Series-2, you can use the series grouping key field on Data--Y 
Axis to label the first series "San Francisco" and the second series "Los 
Angeles". These labels appear in the legend. 

Unlike other static text in a chart (such as the chart title and the axis 
titles), there is no Externalize text button for these labels. Since the text 
is static, this option should be available.
Depend on #110667. Resolved with new UI
The grouping expression, like "Los Angeles", is not static, but from database.
Although it may be static to a group of data, we can't expect the value. Only
static expression can be externalized.
You can use two types of expressions in the series grouping key field: 
1. An expression that retrieves dynamic data from the database. You use this 
type of expression to group data; for example, use row["city'] to create one y 
series for each city value.  
2. A string expression, in quotation marks, that always presents the same 
static text. You use this type of expression as a label; for example, if you 
use row["x"] as the y series data expression to retrieve data for a y series, 
you can use "Fortune 500 companies" in the series grouping key field. The 
legend will display Fortune 500 companies to identify the y series. 

In the latter case, you should be able to externalize text. The string 
expression is static input. 

For more information about how to use this field, see "Working with chart data" 
in the documentation. For example, see the section "Defining series in a bar or 
line chart." This describes how you would use a string expression to label a y 
series. 
The value can be in fact any BIRT expression. If this is to be externalizalbe, 
we rely on the BIRT expression builder to provide means to externalize strings 
in an expression. In fact you could file the same bug for virtually any BIRT 
expression field in any Report Item, since you can always enter a String in the 
expression.

Please reassign to Designer Team , or mark as resolved if this feature already 
exists.
Thanks for the clarification. We'll investigate and file a new, more inclusive 
bug if appropriate. 
won't fixed</WithStack>
    <WithOutStack>When you use more than one y series definition, you can use the series grouping 
key field to create a static label for each series. For example, if you use row
["City1"] as the data definition for Y Series-1 and row["City2"] as the data 
definition for Y Series-2, you can use the series grouping key field on Data--Y 
Axis to label the first series "San Francisco" and the second series "Los 
Angeles". These labels appear in the legend. 

Unlike other static text in a chart (such as the chart title and the axis 
titles), there is no Externalize text button for these labels. Since the text 
is static, this option should be available.
Depend on #110667. Resolved with new UI
The grouping expression, like "Los Angeles", is not static, but from database.
Although it may be static to a group of data, we can't expect the value. Only
static expression can be externalized.
You can use two types of expressions in the series grouping key field: 
1. An expression that retrieves dynamic data from the database. You use this 
type of expression to group data; for example, use row["city'] to create one y 
series for each city value.  
2. A string expression, in quotation marks, that always presents the same 
static text. You use this type of expression as a label; for example, if you 
use row["x"] as the y series data expression to retrieve data for a y series, 
you can use "Fortune 500 companies" in the series grouping key field. The 
legend will display Fortune 500 companies to identify the y series. 

In the latter case, you should be able to externalize text. The string 
expression is static input. 

For more information about how to use this field, see "Working with chart data" 
in the documentation. For example, see the section "Defining series in a bar or 
line chart." This describes how you would use a string expression to label a y 
series. 
The value can be in fact any BIRT expression. If this is to be externalizalbe, 
we rely on the BIRT expression builder to provide means to externalize strings 
in an expression. In fact you could file the same bug for virtually any BIRT 
expression field in any Report Item, since you can always enter a String in the 
expression.

Please reassign to Designer Team , or mark as resolved if this feature already 
exists.
Thanks for the clarification. We'll investigate and file a new, more inclusive 
bug if appropriate. 
won't fixed</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="105538" />
    <CreationDate amount="2005-07-28 19:24:00 -0400" />
    <DupId amount="" />
    <classification amount="Modeling" />
    <Product amount="MDT" />
    <component amount="Releng" />
    <Version amount="unspecified" />
    <rep_platform amount="PC" />
    <op_sys amount="Linux-GTK" />
    <priority amount="P2" />
    <bug_severity amount="normal" />
    <Summery>[Dupe] Fix JDK5.0 compiler errors</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="3">
      <source_code type="functioncall">
        <location start="350" end="412" />
        <code>[javac]     return ((BigDecimal)value1).compareTo(value2);</code>
      </source_code>
      <source_code type="functioncall">
        <location start="640" end="698" />
        <code>[javac]     return ((Double)value1).compareTo(value2);</code>
      </source_code>
      <source_code type="functioncall">
        <location start="923" end="980" />
        <code>[javac]     return ((Float)value1).compareTo(value2);</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="0" />
    <bug_status amount="VERIFIED" />
    <resolution amount="FIXED" />
    <WithStack>To allow us to build EMF using Sun JDK5.0, without the -source 1.4 flag, these
errors need to be addressed:

(partial JDK5.0 testing log)

    [javac]
/home/www-data/jdk50tests/2.1.0/N200506220700/200506221337/src/org.eclipse.xsd/XSDDecimalType.java:42:
compareTo(java.math.BigDecimal) in java.math.BigDecimal cannot be applied to
(java.lang.Object)
    [javac]     return ((BigDecimal)value1).compareTo(value2);
    [javac]            ^
    [javac]
/home/www-data/jdk50tests/2.1.0/N200506220700/200506221337/src/org.eclipse.xsd/XSDDoubleType.java:36:
compareTo(java.lang.Double) in java.lang.Double cannot be applied to
(java.lang.Object)
    [javac]     return ((Double)value1).compareTo(value2);
    [javac]            ^
    [javac]
/home/www-data/jdk50tests/2.1.0/N200506220700/200506221337/src/org.eclipse.xsd/XSDFloatType.java:36:
compareTo(java.lang.Float) in java.lang.Float cannot be applied to
(java.lang.Object)
    [javac]     return ((Float)value1).compareTo(value2);
    [javac]            ^
    [javac] 3 errors
This is a duplicate to bug 101304, from EMF 2.1 branch.
Committed to CVS for 2.0.x branch
Fixed in EMF 2.0.4 M200509081011.
Move to verified as per bug 206558.</WithStack>
    <WithOutStack>To allow us to build EMF using Sun JDK5.0, without the -source 1.4 flag, these
errors need to be addressed:

(partial JDK5.0 testing log)

    [javac]
/home/www-data/jdk50tests/2.1.0/N200506220700/200506221337/src/org.eclipse.xsd/XSDDecimalType.java:42:
compareTo(java.math.BigDecimal) in java.math.BigDecimal cannot be applied to
(java.lang.Object)
    [javac]     return ((BigDecimal)value1).compareTo(value2);
    [javac]            ^
    [javac]
/home/www-data/jdk50tests/2.1.0/N200506220700/200506221337/src/org.eclipse.xsd/XSDDoubleType.java:36:
compareTo(java.lang.Double) in java.lang.Double cannot be applied to
(java.lang.Object)
    [javac]     return ((Double)value1).compareTo(value2);
    [javac]            ^
    [javac]
/home/www-data/jdk50tests/2.1.0/N200506220700/200506221337/src/org.eclipse.xsd/XSDFloatType.java:36:
compareTo(java.lang.Float) in java.lang.Float cannot be applied to
(java.lang.Object)
    [javac]     return ((Float)value1).compareTo(value2);
    [javac]            ^
    [javac] 3 errors
This is a duplicate to bug 101304, from EMF 2.1 branch.
Committed to CVS for 2.0.x branch
Fixed in EMF 2.0.4 M200509081011.
Move to verified as per bug 206558.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="105539" />
    <CreationDate amount="2005-07-28 19:37:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="JDT" />
    <component amount="Debug" />
    <Version amount="3.1" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Remote debug with J2ME Wireless Toolkit fails</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="8">
        <Lines>
          <Line>1. Install the wireless toolkit and open a sample project (e.g.</Line>
          <Line>WTK22/apps/BluetoothDemo) in both the toolkit and Eclipse. In Eclipse, set a</Line>
          <Line>breakpoint in the MIDlet constructor (e.g. the DemoMIDlet constructor).</Line>
          <Line>2. In the wireless toolkit click Project -&gt; Debug, accept default of port 5000</Line>
          <Line>and click debug.</Line>
          <Line>3. Start remote debugger in Eclipse specifying port 5000.</Line>
          <Line>4. The emulator will stop and a dump (sample below) will be printed to the</Line>
          <Line>wireless toolkit console.</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="RESOLVED" />
    <resolution amount="WORKSFORME" />
    <WithStack>Eclipse 3.1.0 Build Id I20050627-1435
Java Version: 1.5.0_04-b05
J2ME Wireless Toolkit 2.2

Steps to reproduce:
1. Install the wireless toolkit and open a sample project (e.g.
WTK22/apps/BluetoothDemo) in both the toolkit and Eclipse. In Eclipse, set a
breakpoint in the MIDlet constructor (e.g. the DemoMIDlet constructor).
2. In the wireless toolkit click Project -&gt; Debug, accept default of port 5000
and click debug.
3. Start remote debugger in Eclipse specifying port 5000.
4. The emulator will stop and a dump (sample below) will be printed to the
wireless toolkit console.

I believe behaviour is incorrect; the emulator should run as normal. When using
jdb from the command line (e.g. jdb -connect
com.sun.jdi.SocketAttach:hostname=localhost,port=5000) the correct behaviour is
exhibited.

Paul


Connecting to 127.0.0.1 on port 2800
Waiting for debugger on port 5000
Waiting for KVM...
Running with storage root DefaultColorPhone
Connected to KVM
Connection received.
Method............: 101677a4
'com/sun/midp/midletsuite/ManifestProperties.readLine (virtual)' 
Stack Chunk.......: f24ad8
Frame Pointer.....: f24b44
Current IP........: 101e67a7 = 101e66e6 + offset 193
Previous Frame....: f24b10
Previous IP.......: 101fbb43 (offset 63)
Frame size........: 7 (2 arguments, 5 local variables)
Argument[0].......: f1c8c4
Argument[1].......: f1c7b4
Local[2]..........: 72
Local[3]..........: 135
Local[4]..........: cb
Local[5]..........: 72
Local[6]..........: 0
Operand[1]........: 2e

Method............: 10174e7c 'com/sun/midp/midletsuite/JadProperties.partialLoad
(virtual)' 
Stack Chunk.......: f24ad8
Frame Pointer.....: f24b10
Current IP........: 101fbb43 = 101fbb04 + offset 63
Previous Frame....: eb0728
Previous IP.......: 101e66e5 (offset 13)
Frame size........: 12 (4 arguments, 8 local variables)
Argument[0].......: f1c8c4
Argument[1].......: f1d3f4
Argument[2].......: 0
Argument[3].......: 7fffffff
Local[4]..........: f1c7b4
Local[5]..........: 0
Local[6]..........: 0
Local[7]..........: 0
Local[8]..........: 0
Local[9]..........: 0
Local[10]..........: 0
Local[11]..........: 0

Method............: 10167784
'com/sun/midp/midletsuite/ManifestProperties.partialLoad (virtual)' 
Stack Chunk.......: eb056c
Frame Pointer.....: eb0728
Current IP........: 101e66e5 = 101e66d8 + offset 13
Previous Frame....: eb0700
Previous IP.......: 101fbb03 (offset 8)
Frame size........: 4 (4 arguments, 0 local variables)
Argument[0].......: f1c8c4
Argument[1].......: f1d3f4
Argument[2].......: 0
Argument[3].......: 7fffffff

Method............: 10174e5c 'com/sun/midp/midletsuite/JadProperties.load
(virtual)' 
Stack Chunk.......: eb056c
Frame Pointer.....: eb0700
Current IP........: 101fbb03 = 101fbafb + offset 8
Previous Frame....: eb06dc
Previous IP.......: 101fbc22 (offset 6)
Frame size........: 3 (3 arguments, 0 local variables)
Argument[0].......: f1c8c4
Argument[1].......: f1d3f4
Argument[2].......: 0

Method............: 10174e9c 'com/sun/midp/midletsuite/JadProperties.load
(virtual)' 
Stack Chunk.......: eb056c
Frame Pointer.....: eb06dc
Current IP........: 101fbc22 = 101fbc1c + offset 6
Previous Frame....: eb06bc
Previous IP.......: 10215a7e (offset 62)
Frame size........: 2 (2 arguments, 0 local variables)
Argument[0].......: f1c8c4
Argument[1].......: f1d3f4

Method............: 10185034
'com/sun/midp/security/Permissions.readPermissionsTable (static)' 
Stack Chunk.......: eb056c
Frame Pointer.....: eb06bc
Current IP........: 10215a7e = 10215a40 + offset 62
Previous Frame....: eb0660
Previous IP.......: 10215c1d (offset 21)
Frame size........: 17 (1 arguments, 16 local variables)
Argument[0].......: f22c0c
Local[1]..........: f1db4c
Local[2]..........: f1d3f4
Local[3]..........: f1c8c4
Local[4]..........: f1c7cc
Local[5]..........: 0
Local[6]..........: 0
Local[7]..........: 0
Local[8]..........: 0
Local[9]..........: 0
Local[10]..........: 0
Local[11]..........: 0
Local[12]..........: 0
Local[13]..........: 0
Local[14]..........: 0
Local[15]..........: 0
Local[16]..........: 0

Method............: 10185054
'com/sun/midp/security/Permissions.isValidDomainName (static)' 
Stack Chunk.......: eb056c
Frame Pointer.....: eb0660
Current IP........: 10215c1d = 10215c08 + offset 21
Previous Frame....: eb063c
Previous IP.......: 101f14e7 (offset 15)
Frame size........: 3 (2 arguments, 1 local variables)
Argument[0].......: f22c0c
Argument[1].......: 1010aa68
Local[2]..........: 0

Method............: 1016d8b0 'com/sun/midp/dev/DevMIDletSuiteImpl.create (static)' 
Stack Chunk.......: eb056c
Frame Pointer.....: eb063c
Current IP........: 101f14e7 = 101f14d8 + offset 15
Previous Frame....: eb05d0
Previous IP.......: 101f14d7 (offset 62)
Frame size........: 21 (10 arguments, 11 local variables)
Argument[0].......: f22c0c
Argument[1].......: f1db70
Argument[2].......: 0
Argument[3].......: 10115c10
Argument[4].......: 0
Argument[5].......: 0
Argument[6].......: 1010aa68
Argument[7].......: 0
Argument[8].......: 0
Argument[9].......: 0
Local[10]..........: 0
Local[11]..........: 0
Local[12]..........: 0
Local[13]..........: 0
Local[14]..........: 0
Local[15]..........: 0
Local[16]..........: 0
Local[17]..........: 0
Local[18]..........: 0
Local[19]..........: 0
Local[20]..........: 0

Method............: 1016d890 'com/sun/midp/dev/DevMIDletSuiteImpl.create (static)' 
Stack Chunk.......: eb056c
Frame Pointer.....: eb05d0
Current IP........: 101f14d7 = 101f1499 + offset 62
Previous Frame....: eb05a4
Previous IP.......: 101dec7d (offset 20)
Frame size........: 5 (5 arguments, 0 local variables)
Argument[0].......: f22c0c
Argument[1].......: f1db70
Argument[2].......: 0
Argument[3].......: 10115c10
Argument[4].......: 0

Method............: 1016224c 'com/sun/midp/main/Main.runLocalClass (static)' 
Stack Chunk.......: eb056c
Frame Pointer.....: eb05a4
Current IP........: 101dec7d = 101dec69 + offset 20
Previous Frame....: eb0580
Previous IP.......: 101de6fc (offset 116)
Frame size........: 3 (1 arguments, 2 local variables)
Argument[0].......: f234b4
Local[1]..........: 0
Local[2]..........: 0

Method............: 101621ac 'com/sun/midp/main/Main.main (static)' 
Stack Chunk.......: eb056c
Frame Pointer.....: eb0580
Current IP........: 101de6fc = 101de688 + offset 116
Previous Frame....: 0
Previous IP.......: 1
Frame size........: 3 (1 arguments, 2 local variables)
Argument[0].......: eb0858
Local[1]..........: f234b4
Local[2]..........: f1dbec

VM status:
Instruction pointer.: 101e67a7 (offset within invoking method: 193)
Next instruction....: 0x36
Frame pointer.......: f24b44
Local pointer.......: f24b28
Stack size..........: 256; sp: f24b5c; ranges: eb0574-eb0774;f24ae0-f24ce0;
Contents of the current stack frame:
    f24b28: f1c8c4 (lp)
    f24b2c: f1c7b4
    f24b30: 72
    f24b34: 135
    f24b38: cb
    f24b3c: 72
    f24b40: 0
    f24b44: f24b10 (fp)
    f24b48: 101fbb43
    f24b4c: f24b24
    f24b50: 101677a4
    f24b54: f24ad8
    f24b58: 0 (end of frame)
    f24b5c: 2e (sp)
Execution stack contains 640 items: 
eb0858  
f234b4  
f1dbec  
0  
1  
eb0570  
101621ac  
eb056c  
0  
f234b4  
0  
0  
eb0580  
101de6fc  
eb0594  
1016224c  
eb056c  
0  
f22c0c  
f1db70  
0  
10115c10  
0  
eb05a4  
101dec7d  
eb05b8  
1016d890  
eb056c  
0  
f22c0c  
f1db70  
0  
10115c10  
0  
0  
1010aa68  
0  
0  
0  
0  
0  
0  
0  
0  
0  
0  
0  
0  
0  
0  
eb05d0  
101f14d7  
eb05e4  
1016d8b0  
eb056c  
0  
f22c0c  
1010aa68  
0  
eb063c  
101f14e7  
eb0650  
10185054  
eb056c  
0  
f22c0c  
f1db4c  
f1d3f4  
f1c8c4  
f1c7cc  
0  
0  
0  
0  
0  
0  
0  
0  
0  
0  
0  
0  
eb0660  
10215c1d  
eb0674  
10185034  
eb056c  
0  
f1c8c4  
f1d3f4  
eb06bc  
10215a7e  
eb06d0  
10174e9c  
eb056c  
f1c8c4  
f1c8c4  
f1d3f4  
0  
eb06dc  
101fbc22  
eb06f0  
10174e5c  
eb056c  
f1c8c4  
f1c8c4  
f1d3f4  
0  
7fffffff  
eb0700  
101fbb03  
eb0714  
10167784  
eb056c  
0  
f1c8c4  
f1d3f4  
0  
7fffffff  
f1c85c  
a  
1017ec1c  
ALERT: Attempting to resume current thread

eb056c  
0  
0  
0  
0  
0  
f1c8c4  
f1d3f4  
0  
7fffffff  
f1c7b4  
0  
0  
0  
0  
0  
0  
0  
eb0728  
101e66e5  
eb073c  
10174e7c  
f24ad8  
0  
f1c8c4  
f1c7b4  
72  
135  
cb  
72  
0  
f24b10  
101fbb43  
f24b24  
101677a4  
f24ad8  
0  
2e  

Execution completed.
53346 bytecodes executed
3 thread switches
738 classes in the system (including system classes)
10053 dynamic objects allocated (602756 bytes)
3 garbage collections (540032 bytes collected)
Execution completed.
53346 bytecodes executed
3 thread switches
738 classes in the system (including system classes)
10053 dynamic objects allocated (602756 bytes)
3 garbage collections (540032 bytes collected)
Does this help?

http://eclipseme.org/docs/configuring.html#step4

I.e. see step 2 - Change Eclipse's Debug Settings
The key value to avoid this problem is the "Suspend Execution on uncaught
exceptions".  The J2ME JPDA support in the toolkits does not like this value for
some reason.  You may want to consider using EclipseME (http://eclipseme.org)
for doing this kind of development.  We have a good set of users on our mailing
list to help out.

*** Bug 116903 has been marked as a duplicate of this bug. ***
Is this problem resolved? I.e. is the workaround simply to turn off the "suspend on uncaught exceptions and compilation error" preferences?
Marking as REMIND for more input.
Issue also observed in Linux using Sun wireless toolkit 2.2. Behaviour is different, though. The emulator is simply suspended, instead of going to the first  breakpoint.

I also confirm that the workaround works. But please, do not use this as excuse. Fix the bug. Otherwise lots of users will fight against this problem.
Ramon, thanks for getting back. The issue here is that according to the JPDA spec (JDI/JDWP), the Eclispe debugger is not doing anything wrong. We think the bug is in the wireless toolkit.
Note that the Java Wireless toolkit uses Java 1.3. That is, when developing code one cannot use Java 1.4 assertions and so on. So it is posible that the emulator also implements an old version of the debugging interface.

jdb from Sun SDK works fine with the emulator.
The Eclipse JDI client speaks different versions of the JDI/JDWP to correspond to the version of the runtime on the debugging end. This allows us to debug targets running any version of JDWP.
reopening to close
The debugger is working as expected, and the issue observed can be resolved with a configuraiotn change. marking as WORKSFORME</WithStack>
    <WithOutStack>Eclipse 3.1.0 Build Id I20050627-1435
Java Version: 1.5.0_04-b05
J2ME Wireless Toolkit 2.2

Steps to reproduce:
1. Install the wireless toolkit and open a sample project (e.g.
WTK22/apps/BluetoothDemo) in both the toolkit and Eclipse. In Eclipse, set a
breakpoint in the MIDlet constructor (e.g. the DemoMIDlet constructor).
2. In the wireless toolkit click Project -&gt; Debug, accept default of port 5000
and click debug.
3. Start remote debugger in Eclipse specifying port 5000.
4. The emulator will stop and a dump (sample below) will be printed to the
wireless toolkit console.

I believe behaviour is incorrect; the emulator should run as normal. When using
jdb from the command line (e.g. jdb -connect
com.sun.jdi.SocketAttach:hostname=localhost,port=5000) the correct behaviour is
exhibited.

Paul


Connecting to 127.0.0.1 on port 2800
Waiting for debugger on port 5000
Waiting for KVM...
Running with storage root DefaultColorPhone
Connected to KVM
Connection received.
Method............: 101677a4
'com/sun/midp/midletsuite/ManifestProperties.readLine (virtual)' 
Stack Chunk.......: f24ad8
Frame Pointer.....: f24b44
Current IP........: 101e67a7 = 101e66e6 + offset 193
Previous Frame....: f24b10
Previous IP.......: 101fbb43 (offset 63)
Frame size........: 7 (2 arguments, 5 local variables)
Argument[0].......: f1c8c4
Argument[1].......: f1c7b4
Local[2]..........: 72
Local[3]..........: 135
Local[4]..........: cb
Local[5]..........: 72
Local[6]..........: 0
Operand[1]........: 2e

Method............: 10174e7c 'com/sun/midp/midletsuite/JadProperties.partialLoad
(virtual)' 
Stack Chunk.......: f24ad8
Frame Pointer.....: f24b10
Current IP........: 101fbb43 = 101fbb04 + offset 63
Previous Frame....: eb0728
Previous IP.......: 101e66e5 (offset 13)
Frame size........: 12 (4 arguments, 8 local variables)
Argument[0].......: f1c8c4
Argument[1].......: f1d3f4
Argument[2].......: 0
Argument[3].......: 7fffffff
Local[4]..........: f1c7b4
Local[5]..........: 0
Local[6]..........: 0
Local[7]..........: 0
Local[8]..........: 0
Local[9]..........: 0
Local[10]..........: 0
Local[11]..........: 0

Method............: 10167784
'com/sun/midp/midletsuite/ManifestProperties.partialLoad (virtual)' 
Stack Chunk.......: eb056c
Frame Pointer.....: eb0728
Current IP........: 101e66e5 = 101e66d8 + offset 13
Previous Frame....: eb0700
Previous IP.......: 101fbb03 (offset 8)
Frame size........: 4 (4 arguments, 0 local variables)
Argument[0].......: f1c8c4
Argument[1].......: f1d3f4
Argument[2].......: 0
Argument[3].......: 7fffffff

Method............: 10174e5c 'com/sun/midp/midletsuite/JadProperties.load
(virtual)' 
Stack Chunk.......: eb056c
Frame Pointer.....: eb0700
Current IP........: 101fbb03 = 101fbafb + offset 8
Previous Frame....: eb06dc
Previous IP.......: 101fbc22 (offset 6)
Frame size........: 3 (3 arguments, 0 local variables)
Argument[0].......: f1c8c4
Argument[1].......: f1d3f4
Argument[2].......: 0

Method............: 10174e9c 'com/sun/midp/midletsuite/JadProperties.load
(virtual)' 
Stack Chunk.......: eb056c
Frame Pointer.....: eb06dc
Current IP........: 101fbc22 = 101fbc1c + offset 6
Previous Frame....: eb06bc
Previous IP.......: 10215a7e (offset 62)
Frame size........: 2 (2 arguments, 0 local variables)
Argument[0].......: f1c8c4
Argument[1].......: f1d3f4

Method............: 10185034
'com/sun/midp/security/Permissions.readPermissionsTable (static)' 
Stack Chunk.......: eb056c
Frame Pointer.....: eb06bc
Current IP........: 10215a7e = 10215a40 + offset 62
Previous Frame....: eb0660
Previous IP.......: 10215c1d (offset 21)
Frame size........: 17 (1 arguments, 16 local variables)
Argument[0].......: f22c0c
Local[1]..........: f1db4c
Local[2]..........: f1d3f4
Local[3]..........: f1c8c4
Local[4]..........: f1c7cc
Local[5]..........: 0
Local[6]..........: 0
Local[7]..........: 0
Local[8]..........: 0
Local[9]..........: 0
Local[10]..........: 0
Local[11]..........: 0
Local[12]..........: 0
Local[13]..........: 0
Local[14]..........: 0
Local[15]..........: 0
Local[16]..........: 0

Method............: 10185054
'com/sun/midp/security/Permissions.isValidDomainName (static)' 
Stack Chunk.......: eb056c
Frame Pointer.....: eb0660
Current IP........: 10215c1d = 10215c08 + offset 21
Previous Frame....: eb063c
Previous IP.......: 101f14e7 (offset 15)
Frame size........: 3 (2 arguments, 1 local variables)
Argument[0].......: f22c0c
Argument[1].......: 1010aa68
Local[2]..........: 0

Method............: 1016d8b0 'com/sun/midp/dev/DevMIDletSuiteImpl.create (static)' 
Stack Chunk.......: eb056c
Frame Pointer.....: eb063c
Current IP........: 101f14e7 = 101f14d8 + offset 15
Previous Frame....: eb05d0
Previous IP.......: 101f14d7 (offset 62)
Frame size........: 21 (10 arguments, 11 local variables)
Argument[0].......: f22c0c
Argument[1].......: f1db70
Argument[2].......: 0
Argument[3].......: 10115c10
Argument[4].......: 0
Argument[5].......: 0
Argument[6].......: 1010aa68
Argument[7].......: 0
Argument[8].......: 0
Argument[9].......: 0
Local[10]..........: 0
Local[11]..........: 0
Local[12]..........: 0
Local[13]..........: 0
Local[14]..........: 0
Local[15]..........: 0
Local[16]..........: 0
Local[17]..........: 0
Local[18]..........: 0
Local[19]..........: 0
Local[20]..........: 0

Method............: 1016d890 'com/sun/midp/dev/DevMIDletSuiteImpl.create (static)' 
Stack Chunk.......: eb056c
Frame Pointer.....: eb05d0
Current IP........: 101f14d7 = 101f1499 + offset 62
Previous Frame....: eb05a4
Previous IP.......: 101dec7d (offset 20)
Frame size........: 5 (5 arguments, 0 local variables)
Argument[0].......: f22c0c
Argument[1].......: f1db70
Argument[2].......: 0
Argument[3].......: 10115c10
Argument[4].......: 0

Method............: 1016224c 'com/sun/midp/main/Main.runLocalClass (static)' 
Stack Chunk.......: eb056c
Frame Pointer.....: eb05a4
Current IP........: 101dec7d = 101dec69 + offset 20
Previous Frame....: eb0580
Previous IP.......: 101de6fc (offset 116)
Frame size........: 3 (1 arguments, 2 local variables)
Argument[0].......: f234b4
Local[1]..........: 0
Local[2]..........: 0

Method............: 101621ac 'com/sun/midp/main/Main.main (static)' 
Stack Chunk.......: eb056c
Frame Pointer.....: eb0580
Current IP........: 101de6fc = 101de688 + offset 116
Previous Frame....: 0
Previous IP.......: 1
Frame size........: 3 (1 arguments, 2 local variables)
Argument[0].......: eb0858
Local[1]..........: f234b4
Local[2]..........: f1dbec

VM status:
Instruction pointer.: 101e67a7 (offset within invoking method: 193)
Next instruction....: 0x36
Frame pointer.......: f24b44
Local pointer.......: f24b28
Stack size..........: 256; sp: f24b5c; ranges: eb0574-eb0774;f24ae0-f24ce0;
Contents of the current stack frame:
    f24b28: f1c8c4 (lp)
    f24b2c: f1c7b4
    f24b30: 72
    f24b34: 135
    f24b38: cb
    f24b3c: 72
    f24b40: 0
    f24b44: f24b10 (fp)
    f24b48: 101fbb43
    f24b4c: f24b24
    f24b50: 101677a4
    f24b54: f24ad8
    f24b58: 0 (end of frame)
    f24b5c: 2e (sp)
Execution stack contains 640 items: 
eb0858  
f234b4  
f1dbec  
0  
1  
eb0570  
101621ac  
eb056c  
0  
f234b4  
0  
0  
eb0580  
101de6fc  
eb0594  
1016224c  
eb056c  
0  
f22c0c  
f1db70  
0  
10115c10  
0  
eb05a4  
101dec7d  
eb05b8  
1016d890  
eb056c  
0  
f22c0c  
f1db70  
0  
10115c10  
0  
0  
1010aa68  
0  
0  
0  
0  
0  
0  
0  
0  
0  
0  
0  
0  
0  
0  
eb05d0  
101f14d7  
eb05e4  
1016d8b0  
eb056c  
0  
f22c0c  
1010aa68  
0  
eb063c  
101f14e7  
eb0650  
10185054  
eb056c  
0  
f22c0c  
f1db4c  
f1d3f4  
f1c8c4  
f1c7cc  
0  
0  
0  
0  
0  
0  
0  
0  
0  
0  
0  
0  
eb0660  
10215c1d  
eb0674  
10185034  
eb056c  
0  
f1c8c4  
f1d3f4  
eb06bc  
10215a7e  
eb06d0  
10174e9c  
eb056c  
f1c8c4  
f1c8c4  
f1d3f4  
0  
eb06dc  
101fbc22  
eb06f0  
10174e5c  
eb056c  
f1c8c4  
f1c8c4  
f1d3f4  
0  
7fffffff  
eb0700  
101fbb03  
eb0714  
10167784  
eb056c  
0  
f1c8c4  
f1d3f4  
0  
7fffffff  
f1c85c  
a  
1017ec1c  
ALERT: Attempting to resume current thread

eb056c  
0  
0  
0  
0  
0  
f1c8c4  
f1d3f4  
0  
7fffffff  
f1c7b4  
0  
0  
0  
0  
0  
0  
0  
eb0728  
101e66e5  
eb073c  
10174e7c  
f24ad8  
0  
f1c8c4  
f1c7b4  
72  
135  
cb  
72  
0  
f24b10  
101fbb43  
f24b24  
101677a4  
f24ad8  
0  
2e  

Execution completed.
53346 bytecodes executed
3 thread switches
738 classes in the system (including system classes)
10053 dynamic objects allocated (602756 bytes)
3 garbage collections (540032 bytes collected)
Execution completed.
53346 bytecodes executed
3 thread switches
738 classes in the system (including system classes)
10053 dynamic objects allocated (602756 bytes)
3 garbage collections (540032 bytes collected)
Does this help?

http://eclipseme.org/docs/configuring.html#step4

I.e. see step 2 - Change Eclipse's Debug Settings
The key value to avoid this problem is the "Suspend Execution on uncaught
exceptions".  The J2ME JPDA support in the toolkits does not like this value for
some reason.  You may want to consider using EclipseME (http://eclipseme.org)
for doing this kind of development.  We have a good set of users on our mailing
list to help out.

*** Bug 116903 has been marked as a duplicate of this bug. ***
Is this problem resolved? I.e. is the workaround simply to turn off the "suspend on uncaught exceptions and compilation error" preferences?
Marking as REMIND for more input.
Issue also observed in Linux using Sun wireless toolkit 2.2. Behaviour is different, though. The emulator is simply suspended, instead of going to the first  breakpoint.

I also confirm that the workaround works. But please, do not use this as excuse. Fix the bug. Otherwise lots of users will fight against this problem.
Ramon, thanks for getting back. The issue here is that according to the JPDA spec (JDI/JDWP), the Eclispe debugger is not doing anything wrong. We think the bug is in the wireless toolkit.
Note that the Java Wireless toolkit uses Java 1.3. That is, when developing code one cannot use Java 1.4 assertions and so on. So it is posible that the emulator also implements an old version of the debugging interface.

jdb from Sun SDK works fine with the emulator.
The Eclipse JDI client speaks different versions of the JDI/JDWP to correspond to the version of the runtime on the debugging end. This allows us to debug targets running any version of JDWP.
reopening to close
The debugger is working as expected, and the issue observed can be resolved with a configuraiotn change. marking as WORKSFORME</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="105540" />
    <CreationDate amount="2005-07-28 20:27:00 -0400" />
    <DupId amount="" />
    <classification amount="WebTools" />
    <Product amount="WTP Java EE Tools" />
    <component amount="jst.servlet" />
    <Version amount="0.7" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P4" />
    <bug_severity amount="normal" />
    <Summery>Mixing annotated and non-annotated servlets corrupts project</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="WONTFIX" />
    <WithStack>I started a dynamic web project and created some non-annotated servlets. The I
created another servlet and this time choose "annotated". XDocklet overwrote my
web.xml removing all previously created servlets as well as security settings etc.

Either annotation should be clever enough to migrate previously generated stuff
or it should be disabled as soon as incompatible events occured (and please
don't just disable the check-box. Add a tooltip telling the user why the
check-box is disabled!)

Althoug not really causing "major loss of function" and thus not qualifying as a
major bug, this is a bit of a bummer and probably should be addressed soon.
This is the expected begavior and covered in other similar bugs.  XDoclet suggest that web.xml is auto generated.   One can use xdoclet merge files if needed
This is part of a mass update to close out all stale WTP bugs which are in the resolved state without an appropriate targeted version.  If you feel this bug was closed inappropriately, please reopen.</WithStack>
    <WithOutStack>I started a dynamic web project and created some non-annotated servlets. The I
created another servlet and this time choose "annotated". XDocklet overwrote my
web.xml removing all previously created servlets as well as security settings etc.

Either annotation should be clever enough to migrate previously generated stuff
or it should be disabled as soon as incompatible events occured (and please
don't just disable the check-box. Add a tooltip telling the user why the
check-box is disabled!)

Althoug not really causing "major loss of function" and thus not qualifying as a
major bug, this is a bit of a bummer and probably should be addressed soon.
This is the expected begavior and covered in other similar bugs.  XDoclet suggest that web.xml is auto generated.   One can use xdoclet merge files if needed
This is part of a mass update to close out all stale WTP bugs which are in the resolved state without an appropriate targeted version.  If you feel this bug was closed inappropriately, please reopen.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="105541" />
    <CreationDate amount="2005-07-28 21:31:00 -0400" />
    <DupId amount="105208" />
    <classification amount="WebTools" />
    <Product amount="WTP Source Editing" />
    <component amount="jst.jsp" />
    <Version amount="0.7" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>NPE when doing quick fix in JSP editor</Summery>
    <Patches amount="0" />
    <Stacktraces amount="1">
      <Stacktrace timestamp="1437330562953">
        <Exception>java.lang.NullPointerException</Exception>
        <Reason />
        <Frames>
          <Frame depth="0">org.eclipse.wst.sse.ui.internal.StructuredTextViewer.doOperation(StructuredTextViewer.java:511)</Frame>
          <Frame depth="1">org.eclipse.ui.texteditor.TextOperationAction$1.run(TextOperationAction.java:122)</Frame>
          <Frame depth="2">org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:69)</Frame>
          <Frame depth="3">org.eclipse.ui.texteditor.TextOperationAction.run(TextOperationAction.java:120)</Frame>
          <Frame depth="4">org.eclipse.jface.action.Action.runWithEvent(Action.java:996)</Frame>
          <Frame depth="5">org.eclipse.ui.commands.ActionHandler.execute(ActionHandler.java:182)</Frame>
          <Frame depth="6">org.eclipse.ui.internal.handlers.LegacyHandlerWrapper.execute(LegacyHandlerWrapper.java:108)</Frame>
          <Frame depth="7">org.eclipse.core.commands.Command.execute(Command.java:311)</Frame>
          <Frame depth="8">org.eclipse.core.commands.ParameterizedCommand.execute(ParameterizedCommand.java:396)</Frame>
          <Frame depth="9">org.eclipse.ui.internal.keys.WorkbenchKeyboard.executeCommand(WorkbenchKeyboard.java:459)</Frame>
          <Frame depth="10">org.eclipse.ui.internal.keys.WorkbenchKeyboard.press(WorkbenchKeyboard.java:781)</Frame>
          <Frame depth="11">org.eclipse.ui.internal.keys.WorkbenchKeyboard.processKeyEvent(WorkbenchKeyboard.java:828)</Frame>
          <Frame depth="12">org.eclipse.ui.internal.keys.WorkbenchKeyboard.filterKeySequenceBindings(WorkbenchKeyboard.java:550)</Frame>
          <Frame depth="13">org.eclipse.ui.internal.keys.WorkbenchKeyboard.access$3(WorkbenchKeyboard.java:493)</Frame>
          <Frame depth="14">org.eclipse.ui.internal.keys.WorkbenchKeyboard$KeyDownFilter.handleEvent(WorkbenchKeyboard.java:117)</Frame>
          <Frame depth="15">org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)</Frame>
          <Frame depth="16">org.eclipse.swt.widgets.Display.filterEvent(Display.java:917)</Frame>
          <Frame depth="17">org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:842)</Frame>
          <Frame depth="18">org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:867)</Frame>
          <Frame depth="19">org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:852)</Frame>
          <Frame depth="20">org.eclipse.swt.widgets.Widget.sendKeyEvent(Widget.java:880)</Frame>
          <Frame depth="21">org.eclipse.swt.widgets.Widget.sendKeyEvent(Widget.java:876)</Frame>
          <Frame depth="22">org.eclipse.swt.widgets.Widget.wmKeyDown(Widget.java:1475)</Frame>
          <Frame depth="23">org.eclipse.swt.widgets.Control.WM_KEYDOWN(Control.java:3348)</Frame>
          <Frame depth="24">org.eclipse.swt.widgets.Control.windowProc(Control.java:3067)</Frame>
          <Frame depth="25">org.eclipse.swt.widgets.Display.windowProc(Display.java:3706)</Frame>
          <Frame depth="26">org.eclipse.swt.internal.win32.OS.DispatchMessageW(Native Method)</Frame>
          <Frame depth="27">org.eclipse.swt.internal.win32.OS.DispatchMessage(OS.java:1656)</Frame>
          <Frame depth="28">org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2711)</Frame>
          <Frame depth="29">org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1699)</Frame>
          <Frame depth="30">org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1663)</Frame>
          <Frame depth="31">org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:367)</Frame>
          <Frame depth="32">org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:143)</Frame>
          <Frame depth="33">org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:103)</Frame>
          <Frame depth="34">org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:226)</Frame>
          <Frame depth="35">org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:376)</Frame>
          <Frame depth="36">org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:163)</Frame>
          <Frame depth="37">sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)</Frame>
          <Frame depth="38">sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)</Frame>
          <Frame depth="39">sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)</Frame>
          <Frame depth="40">java.lang.reflect.Method.invoke(Unknown Source)</Frame>
          <Frame depth="41">org.eclipse.core.launcher.Main.invokeFramework(Main.java:334)</Frame>
          <Frame depth="42">org.eclipse.core.launcher.Main.basicRun(Main.java:278)</Frame>
          <Frame depth="43">org.eclipse.core.launcher.Main.run(Main.java:973)</Frame>
          <Frame depth="44">org.eclipse.core.launcher.Main.main(Main.java:948)</Frame>
        </Frames>
      </Stacktrace>
    </Stacktraces>
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="DUPLICATE" />
    <WithStack>I was trying quick fix while editing a JSP file. An error box poped up:

Error Executing Command

"Quick Fix" did not complete normally. Please see log for more information.

Reason: 
NPE

Log File content:

!SESSION 2005-07-29 11:04:51.319 -----------------------------------------------
eclipse.buildId=I20050627-1435
java.version=1.5.0_04
java.vendor=Sun Microsystems Inc.
BootLoader constants: OS=win32, ARCH=x86, WS=win32, NL=en_AU
Command-line arguments:  -os win32 -ws win32 -arch x86

!ENTRY org.eclipse.ui 4 4 2005-07-29 11:23:35.285
!MESSAGE "Quick Fix" did not complete normally.  Please see the log for more
information.

!ENTRY org.eclipse.ui 4 0 2005-07-29 11:23:35.316
!MESSAGE java.lang.NullPointerException
!STACK 0
java.lang.NullPointerException
	at
org.eclipse.wst.sse.ui.internal.StructuredTextViewer.doOperation(StructuredTextViewer.java:511)
	at
org.eclipse.ui.texteditor.TextOperationAction$1.run(TextOperationAction.java:122)
	at org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:69)
	at org.eclipse.ui.texteditor.TextOperationAction.run(TextOperationAction.java:120)
	at org.eclipse.jface.action.Action.runWithEvent(Action.java:996)
	at org.eclipse.ui.commands.ActionHandler.execute(ActionHandler.java:182)
	at
org.eclipse.ui.internal.handlers.LegacyHandlerWrapper.execute(LegacyHandlerWrapper.java:108)
	at org.eclipse.core.commands.Command.execute(Command.java:311)
	at
org.eclipse.core.commands.ParameterizedCommand.execute(ParameterizedCommand.java:396)
	at
org.eclipse.ui.internal.keys.WorkbenchKeyboard.executeCommand(WorkbenchKeyboard.java:459)
	at org.eclipse.ui.internal.keys.WorkbenchKeyboard.press(WorkbenchKeyboard.java:781)
	at
org.eclipse.ui.internal.keys.WorkbenchKeyboard.processKeyEvent(WorkbenchKeyboard.java:828)
	at
org.eclipse.ui.internal.keys.WorkbenchKeyboard.filterKeySequenceBindings(WorkbenchKeyboard.java:550)
	at
org.eclipse.ui.internal.keys.WorkbenchKeyboard.access$3(WorkbenchKeyboard.java:493)
	at
org.eclipse.ui.internal.keys.WorkbenchKeyboard$KeyDownFilter.handleEvent(WorkbenchKeyboard.java:117)
	at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)
	at org.eclipse.swt.widgets.Display.filterEvent(Display.java:917)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:842)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:867)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:852)
	at org.eclipse.swt.widgets.Widget.sendKeyEvent(Widget.java:880)
	at org.eclipse.swt.widgets.Widget.sendKeyEvent(Widget.java:876)
	at org.eclipse.swt.widgets.Widget.wmKeyDown(Widget.java:1475)
	at org.eclipse.swt.widgets.Control.WM_KEYDOWN(Control.java:3348)
	at org.eclipse.swt.widgets.Control.windowProc(Control.java:3067)
	at org.eclipse.swt.widgets.Display.windowProc(Display.java:3706)
	at org.eclipse.swt.internal.win32.OS.DispatchMessageW(Native Method)
	at org.eclipse.swt.internal.win32.OS.DispatchMessage(OS.java:1656)
	at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2711)
	at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1699)
	at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1663)
	at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:367)
	at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:143)
	at org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:103)
	at
org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:226)
	at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:376)
	at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:163)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
	at java.lang.reflect.Method.invoke(Unknown Source)
	at org.eclipse.core.launcher.Main.invokeFramework(Main.java:334)
	at org.eclipse.core.launcher.Main.basicRun(Main.java:278)
	at org.eclipse.core.launcher.Main.run(Main.java:973)
	at org.eclipse.core.launcher.Main.main(Main.java:948)
dup of bug 105208


*** This bug has been marked as a duplicate of 105208 ***
closing</WithStack>
    <WithOutStack>I was trying quick fix while editing a JSP file. An error box poped up:

Error Executing Command

"Quick Fix" did not complete normally. Please see log for more information.

Reason: 
NPE

Log File content:

!SESSION 2005-07-29 11:04:51.319 -----------------------------------------------
eclipse.buildId=I20050627-1435
java.version=1.5.0_04
java.vendor=Sun Microsystems Inc.
BootLoader constants: OS=win32, ARCH=x86, WS=win32, NL=en_AU
Command-line arguments:  -os win32 -ws win32 -arch x86

!ENTRY org.eclipse.ui 4 4 2005-07-29 11:23:35.285
!MESSAGE "Quick Fix" did not complete normally.  Please see the log for more
information.

!ENTRY org.eclipse.ui 4 0 2005-07-29 11:23:35.316
!MESSAGE java.lang.NullPointerException
!STACK 0

dup of bug 105208


*** This bug has been marked as a duplicate of 105208 ***
closing</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="105542" />
    <CreationDate amount="2005-07-28 21:50:00 -0400" />
    <DupId amount="" />
    <classification amount="WebTools" />
    <Product amount="WTP Source Editing" />
    <component amount="jst.jsp" />
    <Version amount="0.7" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>&lt;COMMENT&gt; tag not recognized</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="WONTFIX" />
    <WithStack>Although discouraged the &lt;COMMENT&gt; tag seems to be often used to check whether
the browser is Netscape. The JSP editor does not recognize this tag and produces
an unknown-tag warning.
I tried looking this tag up in the html specs on w3.org (i even went back as 
far as html 2.0 spec) and i could not find anything.  So then I did a search 
on the internet looking for info on this tag, and I finally found a site that 
said "&lt;COMMENT&gt; is an old Mosaic and Microsoft Internet Explorer tag."
Amy, will you please triage these to determine proper owner (if you can't fix,
that is). 

reassigning to inbox
Marking as wontfix due to age and it being non-standard.</WithStack>
    <WithOutStack>Although discouraged the &lt;COMMENT&gt; tag seems to be often used to check whether
the browser is Netscape. The JSP editor does not recognize this tag and produces
an unknown-tag warning.
I tried looking this tag up in the html specs on w3.org (i even went back as 
far as html 2.0 spec) and i could not find anything.  So then I did a search 
on the internet looking for info on this tag, and I finally found a site that 
said "&lt;COMMENT&gt; is an old Mosaic and Microsoft Internet Explorer tag."
Amy, will you please triage these to determine proper owner (if you can't fix,
that is). 

reassigning to inbox
Marking as wontfix due to age and it being non-standard.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="105543" />
    <CreationDate amount="2005-07-28 22:24:00 -0400" />
    <DupId amount="" />
    <classification amount="WebTools" />
    <Product amount="WTP Source Editing" />
    <component amount="jst.jsp" />
    <Version amount="0.7" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>JSP Editor becomes totally confused after "Replace with local hisotry"</Summery>
    <Patches amount="0" />
    <Stacktraces amount="1">
      <Stacktrace timestamp="1437330562953">
        <Exception>java.lang.RuntimeException</Exception>
        <Reason>WARNING: Blocked recursive attempt to close part
org.eclipse.jst.jsp.core.jspsource.source while still in the middle of activating it</Reason>
        <Frames>
          <Frame depth="0">org.eclipse.ui.internal.WorkbenchPage.closeEditors(WorkbenchPage.java:1144)</Frame>
          <Frame depth="1">org.eclipse.ui.internal.WorkbenchPage.closeEditor(WorkbenchPage.java:1272)</Frame>
          <Frame depth="2">org.eclipse.ui.internal.EditorPane.doHide(EditorPane.java:54)</Frame>
          <Frame depth="3">org.eclipse.ui.internal.PartStack.close(PartStack.java:495)</Frame>
          <Frame depth="4">org.eclipse.ui.internal.EditorStack.close(EditorStack.java:197)</Frame>
          <Frame depth="5">org.eclipse.ui.internal.PartStack$1.close(PartStack.java:102)</Frame>
          <Frame depth="6">org.eclipse.ui.internal.presentations.util.TabbedStackPresentation$1.handleEvent(TabbedStackPresentation.java:81)</Frame>
          <Frame depth="7">org.eclipse.ui.internal.presentations.util.AbstractTabFolder.fireEvent(AbstractTabFolder.java:267)</Frame>
          <Frame depth="8">org.eclipse.ui.internal.presentations.util.AbstractTabFolder.fireEvent(AbstractTabFolder.java:276)</Frame>
          <Frame depth="9">org.eclipse.ui.internal.presentations.defaultpresentation.DefaultTabFolder.access$1(DefaultTabFolder.java:1)</Frame>
          <Frame depth="10">org.eclipse.ui.internal.presentations.defaultpresentation.DefaultTabFolder$1.closeButtonPressed(DefaultTabFolder.java:67)</Frame>
          <Frame depth="11">org.eclipse.ui.internal.presentations.PaneFolder.notifyCloseListeners(PaneFolder.java:563)</Frame>
          <Frame depth="12">org.eclipse.ui.internal.presentations.PaneFolder$3.close(PaneFolder.java:190)</Frame>
          <Frame depth="13">org.eclipse.swt.custom.CTabFolder.onMouse(CTabFolder.java:2075)</Frame>
          <Frame depth="14">org.eclipse.swt.custom.CTabFolder$1.handleEvent(CTabFolder.java:292)</Frame>
          <Frame depth="15">org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)</Frame>
          <Frame depth="16">org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:843)</Frame>
          <Frame depth="17">org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3080)</Frame>
          <Frame depth="18">org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2713)</Frame>
          <Frame depth="19">org.eclipse.jface.window.Window.runEventLoop(Window.java:809)</Frame>
          <Frame depth="20">org.eclipse.jface.window.Window.open(Window.java:787)</Frame>
          <Frame depth="21">org.eclipse.jface.dialogs.MessageDialog.openQuestion(MessageDialog.java:368)</Frame>
          <Frame depth="22">org.eclipse.ui.texteditor.AbstractTextEditor.handleEditorInputChanged(AbstractTextEditor.java:3445)</Frame>
          <Frame depth="23">org.eclipse.ui.texteditor.StatusTextEditor.handleEditorInputChanged(StatusTextEditor.java:203)</Frame>
          <Frame depth="24">org.eclipse.ui.texteditor.AbstractTextEditor.sanityCheckState(AbstractTextEditor.java:3575)</Frame>
          <Frame depth="25">org.eclipse.ui.texteditor.StatusTextEditor.sanityCheckState(StatusTextEditor.java:193)</Frame>
          <Frame depth="26">org.eclipse.ui.texteditor.AbstractTextEditor.safelySanityCheckState(AbstractTextEditor.java:3553)</Frame>
          <Frame depth="27">org.eclipse.wst.sse.ui.internal.StructuredTextEditor.safelySanityCheckState(StructuredTextEditor.java:1916)</Frame>
          <Frame depth="28">org.eclipse.ui.texteditor.AbstractTextEditor$ActivationListener.handleActivation(AbstractTextEditor.java:834)</Frame>
          <Frame depth="29">org.eclipse.ui.texteditor.AbstractTextEditor$ActivationListener.partActivated(AbstractTextEditor.java:796)</Frame>
          <Frame depth="30">org.eclipse.ui.internal.PartListenerList$1.run(PartListenerList.java:72)</Frame>
          <Frame depth="31">org.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java:1044)</Frame>
          <Frame depth="32">org.eclipse.core.runtime.Platform.run(Platform.java:783)</Frame>
          <Frame depth="33">org.eclipse.ui.internal.PartListenerList.fireEvent(PartListenerList.java:58)</Frame>
          <Frame depth="34">org.eclipse.ui.internal.PartListenerList.firePartActivated(PartListenerList.java:70)</Frame>
          <Frame depth="35">org.eclipse.ui.internal.PartService.firePartActivated(PartService.java:73)</Frame>
          <Frame depth="36">org.eclipse.ui.internal.PartService.setActivePart(PartService.java:171)</Frame>
          <Frame depth="37">org.eclipse.ui.internal.WWinPartService.updateActivePart(WWinPartService.java:124)</Frame>
          <Frame depth="38">org.eclipse.ui.internal.WWinPartService.access$0(WWinPartService.java:115)</Frame>
          <Frame depth="39">org.eclipse.ui.internal.WWinPartService$1.partDeactivated(WWinPartService.java:48)</Frame>
          <Frame depth="40">org.eclipse.ui.internal.PartListenerList2$4.run(PartListenerList2.java:113)</Frame>
          <Frame depth="41">org.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java:1044)</Frame>
          <Frame depth="42">org.eclipse.core.runtime.Platform.run(Platform.java:783)</Frame>
          <Frame depth="43">org.eclipse.ui.internal.PartListenerList2.fireEvent(PartListenerList2.java:54)</Frame>
          <Frame depth="44">org.eclipse.ui.internal.PartListenerList2.firePartDeactivated(PartListenerList2.java:111)</Frame>
          <Frame depth="45">org.eclipse.ui.internal.PartService.firePartDeactivated(PartService.java:116)</Frame>
          <Frame depth="46">org.eclipse.ui.internal.PartService.setActivePart(PartService.java:165)</Frame>
          <Frame depth="47">org.eclipse.ui.internal.WorkbenchPagePartList.fireActivePartChanged(WorkbenchPagePartList.java:56)</Frame>
          <Frame depth="48">org.eclipse.ui.internal.PartList.setActivePart(PartList.java:108)</Frame>
          <Frame depth="49">org.eclipse.ui.internal.WorkbenchPage.setActivePart(WorkbenchPage.java:2859)</Frame>
          <Frame depth="50">org.eclipse.ui.internal.WorkbenchPage.requestActivation(WorkbenchPage.java:2471)</Frame>
          <Frame depth="51">org.eclipse.ui.internal.PartPane.requestActivation(PartPane.java:249)</Frame>
          <Frame depth="52">org.eclipse.ui.internal.EditorPane.requestActivation(EditorPane.java:88)</Frame>
          <Frame depth="53">org.eclipse.ui.internal.presentations.PresentablePart.setFocus(PresentablePart.java:137)</Frame>
          <Frame depth="54">org.eclipse.ui.internal.presentations.util.TabbedStackPresentation$1.handleEvent(TabbedStackPresentation.java:92)</Frame>
          <Frame depth="55">org.eclipse.ui.internal.presentations.util.AbstractTabFolder.fireEvent(AbstractTabFolder.java:267)</Frame>
          <Frame depth="56">org.eclipse.ui.internal.presentations.util.AbstractTabFolder.fireEvent(AbstractTabFolder.java:272)</Frame>
          <Frame depth="57">org.eclipse.ui.internal.presentations.util.AbstractTabFolder.handleMouseDown(AbstractTabFolder.java:342)</Frame>
          <Frame depth="58">org.eclipse.ui.internal.presentations.util.AbstractTabFolder$3.mouseDown(AbstractTabFolder.java:79)</Frame>
          <Frame depth="59">org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:133)</Frame>
          <Frame depth="60">org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)</Frame>
          <Frame depth="61">org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:843)</Frame>
          <Frame depth="62">org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3080)</Frame>
          <Frame depth="63">org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2713)</Frame>
          <Frame depth="64">org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1699)</Frame>
          <Frame depth="65">org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1663)</Frame>
          <Frame depth="66">org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:367)</Frame>
          <Frame depth="67">org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:143)</Frame>
          <Frame depth="68">org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:103)</Frame>
          <Frame depth="69">org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:226)</Frame>
          <Frame depth="70">org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:376)</Frame>
          <Frame depth="71">org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:163)</Frame>
          <Frame depth="72">sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)</Frame>
          <Frame depth="73">sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)</Frame>
          <Frame depth="74">sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)</Frame>
          <Frame depth="75">java.lang.reflect.Method.invoke(Unknown Source)</Frame>
          <Frame depth="76">org.eclipse.core.launcher.Main.invokeFramework(Main.java:334)</Frame>
          <Frame depth="77">org.eclipse.core.launcher.Main.basicRun(Main.java:278)</Frame>
          <Frame depth="78">org.eclipse.core.launcher.Main.run(Main.java:973)</Frame>
          <Frame depth="79">org.eclipse.core.launcher.Main.main(Main.java:948)</Frame>
        </Frames>
      </Stacktrace>
    </Stacktraces>
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>After doing a "Replace with-&gt;Local history..." for a currently open .jsp file
the editor gets totally confused and erros and navigation-jumps result in
arbitrary positions. Closing and re-opening the file does not solve the problem.

Just noticed the following exception in the Eclipse log happening around the
same time. I don't know if it is related to this behaviour:

!ENTRY org.eclipse.ui.workbench 4 0 2005-07-29 12:19:21.818
!MESSAGE WARNING: Blocked recursive attempt to close part
org.eclipse.jst.jsp.core.jspsource.source while still in the middle of activating it
!STACK 0
java.lang.RuntimeException: WARNING: Blocked recursive attempt to close part
org.eclipse.jst.jsp.core.jspsource.source while still in the middle of activating it
	at org.eclipse.ui.internal.WorkbenchPage.closeEditors(WorkbenchPage.java:1144)
	at org.eclipse.ui.internal.WorkbenchPage.closeEditor(WorkbenchPage.java:1272)
	at org.eclipse.ui.internal.EditorPane.doHide(EditorPane.java:54)
	at org.eclipse.ui.internal.PartStack.close(PartStack.java:495)
	at org.eclipse.ui.internal.EditorStack.close(EditorStack.java:197)
	at org.eclipse.ui.internal.PartStack$1.close(PartStack.java:102)
	at
org.eclipse.ui.internal.presentations.util.TabbedStackPresentation$1.handleEvent(TabbedStackPresentation.java:81)
	at
org.eclipse.ui.internal.presentations.util.AbstractTabFolder.fireEvent(AbstractTabFolder.java:267)
	at
org.eclipse.ui.internal.presentations.util.AbstractTabFolder.fireEvent(AbstractTabFolder.java:276)
	at
org.eclipse.ui.internal.presentations.defaultpresentation.DefaultTabFolder.access$1(DefaultTabFolder.java:1)
	at
org.eclipse.ui.internal.presentations.defaultpresentation.DefaultTabFolder$1.closeButtonPressed(DefaultTabFolder.java:67)
	at
org.eclipse.ui.internal.presentations.PaneFolder.notifyCloseListeners(PaneFolder.java:563)
	at org.eclipse.ui.internal.presentations.PaneFolder$3.close(PaneFolder.java:190)
	at org.eclipse.swt.custom.CTabFolder.onMouse(CTabFolder.java:2075)
	at org.eclipse.swt.custom.CTabFolder$1.handleEvent(CTabFolder.java:292)
	at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:843)
	at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3080)
	at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2713)
	at org.eclipse.jface.window.Window.runEventLoop(Window.java:809)
	at org.eclipse.jface.window.Window.open(Window.java:787)
	at org.eclipse.jface.dialogs.MessageDialog.openQuestion(MessageDialog.java:368)
	at
org.eclipse.ui.texteditor.AbstractTextEditor.handleEditorInputChanged(AbstractTextEditor.java:3445)
	at
org.eclipse.ui.texteditor.StatusTextEditor.handleEditorInputChanged(StatusTextEditor.java:203)
	at
org.eclipse.ui.texteditor.AbstractTextEditor.sanityCheckState(AbstractTextEditor.java:3575)
	at
org.eclipse.ui.texteditor.StatusTextEditor.sanityCheckState(StatusTextEditor.java:193)
	at
org.eclipse.ui.texteditor.AbstractTextEditor.safelySanityCheckState(AbstractTextEditor.java:3553)
	at
org.eclipse.wst.sse.ui.internal.StructuredTextEditor.safelySanityCheckState(StructuredTextEditor.java:1916)
	at
org.eclipse.ui.texteditor.AbstractTextEditor$ActivationListener.handleActivation(AbstractTextEditor.java:834)
	at
org.eclipse.ui.texteditor.AbstractTextEditor$ActivationListener.partActivated(AbstractTextEditor.java:796)
	at org.eclipse.ui.internal.PartListenerList$1.run(PartListenerList.java:72)
	at
org.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java:1044)
	at org.eclipse.core.runtime.Platform.run(Platform.java:783)
	at org.eclipse.ui.internal.PartListenerList.fireEvent(PartListenerList.java:58)
	at
org.eclipse.ui.internal.PartListenerList.firePartActivated(PartListenerList.java:70)
	at org.eclipse.ui.internal.PartService.firePartActivated(PartService.java:73)
	at org.eclipse.ui.internal.PartService.setActivePart(PartService.java:171)
	at
org.eclipse.ui.internal.WWinPartService.updateActivePart(WWinPartService.java:124)
	at org.eclipse.ui.internal.WWinPartService.access$0(WWinPartService.java:115)
	at
org.eclipse.ui.internal.WWinPartService$1.partDeactivated(WWinPartService.java:48)
	at org.eclipse.ui.internal.PartListenerList2$4.run(PartListenerList2.java:113)
	at
org.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java:1044)
	at org.eclipse.core.runtime.Platform.run(Platform.java:783)
	at org.eclipse.ui.internal.PartListenerList2.fireEvent(PartListenerList2.java:54)
	at
org.eclipse.ui.internal.PartListenerList2.firePartDeactivated(PartListenerList2.java:111)
	at org.eclipse.ui.internal.PartService.firePartDeactivated(PartService.java:116)
	at org.eclipse.ui.internal.PartService.setActivePart(PartService.java:165)
	at
org.eclipse.ui.internal.WorkbenchPagePartList.fireActivePartChanged(WorkbenchPagePartList.java:56)
	at org.eclipse.ui.internal.PartList.setActivePart(PartList.java:108)
	at org.eclipse.ui.internal.WorkbenchPage.setActivePart(WorkbenchPage.java:2859)
	at org.eclipse.ui.internal.WorkbenchPage.requestActivation(WorkbenchPage.java:2471)
	at org.eclipse.ui.internal.PartPane.requestActivation(PartPane.java:249)
	at org.eclipse.ui.internal.EditorPane.requestActivation(EditorPane.java:88)
	at
org.eclipse.ui.internal.presentations.PresentablePart.setFocus(PresentablePart.java:137)
	at
org.eclipse.ui.internal.presentations.util.TabbedStackPresentation$1.handleEvent(TabbedStackPresentation.java:92)
	at
org.eclipse.ui.internal.presentations.util.AbstractTabFolder.fireEvent(AbstractTabFolder.java:267)
	at
org.eclipse.ui.internal.presentations.util.AbstractTabFolder.fireEvent(AbstractTabFolder.java:272)
	at
org.eclipse.ui.internal.presentations.util.AbstractTabFolder.handleMouseDown(AbstractTabFolder.java:342)
	at
org.eclipse.ui.internal.presentations.util.AbstractTabFolder$3.mouseDown(AbstractTabFolder.java:79)
	at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:133)
	at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:843)
	at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3080)
	at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2713)
	at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1699)
	at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1663)
	at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:367)
	at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:143)
	at org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:103)
	at
org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:226)
	at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:376)
	at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:163)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
	at java.lang.reflect.Method.invoke(Unknown Source)
	at org.eclipse.core.launcher.Main.invokeFramework(Main.java:334)
	at org.eclipse.core.launcher.Main.basicRun(Main.java:278)
	at org.eclipse.core.launcher.Main.run(Main.java:973)
	at org.eclipse.core.launcher.Main.main(Main.java:948)

I believe these problems are fixed.  Carsten, please reopen if you're still seeing problems in 1.5.
This is part of a mass update to close out all stale WTP resolved bugs from the 1.0.x and 1.5.0 timeframe.  If you feel this bug was closed inappropriately, please reopen.

Thanks, John Lanuti</WithStack>
    <WithOutStack>After doing a "Replace with-&gt;Local history..." for a currently open .jsp file
the editor gets totally confused and erros and navigation-jumps result in
arbitrary positions. Closing and re-opening the file does not solve the problem.

Just noticed the following exception in the Eclipse log happening around the
same time. I don't know if it is related to this behaviour:

!ENTRY org.eclipse.ui.workbench 4 0 2005-07-29 12:19:21.818
!MESSAGE WARNING: Blocked recursive attempt to close part
org.eclipse.jst.jsp.core.jspsource.source while still in the middle of activating it
!STACK 0


I believe these problems are fixed.  Carsten, please reopen if you're still seeing problems in 1.5.
This is part of a mass update to close out all stale WTP resolved bugs from the 1.0.x and 1.5.0 timeframe.  If you feel this bug was closed inappropriately, please reopen.

Thanks, John Lanuti</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="105544" />
    <CreationDate amount="2005-07-28 22:27:00 -0400" />
    <DupId amount="98493" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="SWT" />
    <Version amount="3.1" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="blocker" />
    <Summery>GridLayout Bug</Summery>
    <Patches amount="0" />
    <Stacktraces amount="1">
      <Stacktrace timestamp="1437330562953">
        <Exception>java.lang.ClassCastException</Exception>
        <Reason>org.eclipse.swt.layout.GridData</Reason>
        <Frames>
          <Frame depth="0">org.eclipse.swt.layout.FillLayout.computeChildSize(FillLayout.java:141)</Frame>
          <Frame depth="1">org.eclipse.swt.layout.FillLayout.computeSize(FillLayout.java:119)</Frame>
          <Frame depth="2">org.eclipse.swt.widgets.Composite.computeSize(Composite.java:213)</Frame>
          <Frame depth="3">org.eclipse.swt.custom.SashFormLayout.computeSize(SashFormLayout.java:46)</Frame>
          <Frame depth="4">org.eclipse.swt.widgets.Composite.computeSize(Composite.java:213)</Frame>
          <Frame depth="5">org.eclipse.swt.layout.FormData.computeSize(FormData.java:127)</Frame>
          <Frame depth="6">org.eclipse.swt.layout.FormLayout.layout(FormLayout.java:318)</Frame>
          <Frame depth="7">org.eclipse.swt.layout.FormLayout.computeSize(FormLayout.java:239)</Frame>
          <Frame depth="8">org.eclipse.swt.widgets.Composite.computeSize(Composite.java:213)</Frame>
          <Frame depth="9">org.eclipse.swt.widgets.Group.computeSize(Group.java:150)</Frame>
          <Frame depth="10">org.eclipse.swt.layout.FormData.computeSize(FormData.java:116)</Frame>
          <Frame depth="11">org.eclipse.swt.layout.FormData.getWidth(FormData.java:145)</Frame>
          <Frame depth="12">org.eclipse.swt.layout.FormData.getRightAttachment(FormData.java:247)</Frame>
          <Frame depth="13">org.eclipse.swt.layout.FormLayout.layout(FormLayout.java:305)</Frame>
          <Frame depth="14">org.eclipse.swt.layout.FormLayout.layout(FormLayout.java:284)</Frame>
          <Frame depth="15">org.eclipse.swt.widgets.Composite.updateLayout(Composite.java:869)</Frame>
          <Frame depth="16">org.eclipse.swt.widgets.Composite.WM_SIZE(Composite.java:1248)</Frame>
          <Frame depth="17">org.eclipse.swt.widgets.Control.windowProc(Control.java:3107)</Frame>
          <Frame depth="18">org.eclipse.swt.widgets.Display.windowProc(Display.java:3706)</Frame>
          <Frame depth="19">org.eclipse.swt.internal.win32.OS.DefWindowProcW(Native Method)</Frame>
          <Frame depth="20">org.eclipse.swt.internal.win32.OS.DefWindowProc(OS.java:1651)</Frame>
          <Frame depth="21">org.eclipse.swt.widgets.Scrollable.callWindowProc(Scrollable.java:77)</Frame>
          <Frame depth="22">org.eclipse.swt.widgets.Control.windowProc(Control.java:3123)</Frame>
          <Frame depth="23">org.eclipse.swt.widgets.Display.windowProc(Display.java:3706)</Frame>
          <Frame depth="24">org.eclipse.swt.internal.win32.OS.SetWindowPos(Native Method)</Frame>
          <Frame depth="25">org.eclipse.swt.widgets.Widget.SetWindowPos(Widget.java:1140)</Frame>
          <Frame depth="26">org.eclipse.swt.widgets.Control.setBounds(Control.java:1952)</Frame>
          <Frame depth="27">org.eclipse.swt.widgets.Control.setBounds(Control.java:1933)</Frame>
          <Frame depth="28">org.eclipse.swt.widgets.Control.setBounds(Control.java:1929)</Frame>
          <Frame depth="29">org.eclipse.swt.layout.FillLayout.layout(FillLayout.java:198)</Frame>
          <Frame depth="30">org.eclipse.swt.widgets.Composite.updateLayout(Composite.java:869)</Frame>
          <Frame depth="31">org.eclipse.swt.widgets.Composite.layout(Composite.java:493)</Frame>
          <Frame depth="32">org.eclipse.swt.widgets.Composite.layout(Composite.java:458)</Frame>
          <Frame depth="33">org.eclipse.swt.widgets.Composite.layout(Composite.java:428)</Frame>
          <Frame depth="34">org.ies.ui.UIPanel.init(UIPanel.java:207)</Frame>
          <Frame depth="35">org.ies.ui.UIWindow.createUIPanelInstance(UIWindow.java:142)</Frame>
          <Frame depth="36">org.ies.ui.UIFrame.createCTabItem(UIFrame.java:374)</Frame>
          <Frame depth="37">org.ies.ui.UIFrame.init(UIFrame.java:146)</Frame>
          <Frame depth="38">org.ies.ui.UIApplication.showUIFrame(UIApplication.java:263)</Frame>
          <Frame depth="39">MainClass.UIFrame_Test_1(MainClass.java:194)</Frame>
          <Frame depth="40">MainClass.main(MainClass.java:208)</Frame>
        </Frames>
      </Stacktrace>
    </Stacktraces>
    <SourceCodeRegions amount="1">
      <source_code type="assignment">
        <location start="598" end="650" />
        <code>GridData data = (GridData) control.getLayoutData ();</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="DUPLICATE" />
    <WithStack>Hi All:
I've some ui code work fine with eclipse3.0.2.
but when i run these code on eclipse3.1 release, there's some critical problem.
i use gridlayout to layout out my widgets and use jre1.5.04 in these two 
situation.
Thanks.
Created attachment 25453
work fine on eclipse 3.0.2 with jre1.5.04
Created attachment 25454
can layout correctly on eclipse 3.1 release with jre1.5.04
Can you please provide a code snippet that shows the problem?
This is probably bug (???)  maybe not in GridLayout (maybe in another layout , too)

We have (in more method getData,layout,flushCache) next construction :

GridData data = (GridData) control.getLayoutData ();

It throw exception (ClassCastException) when user set GridData to non GridLayout
User can do it and it has worked in eclipse &lt; 3.1

It can be user bug, but eclipse can check it and do nothing or return friendly
exception like 'you set XXXData to YYYLayout'

Peco
jre = 1.5.0_04

everything's fine with SWT &lt; 3.1

But... SWT &gt;= 3.1 I get :

java.lang.ClassCastException: org.eclipse.swt.layout.GridData
        at org.eclipse.swt.layout.FillLayout.computeChildSize
(FillLayout.java:141)
        at org.eclipse.swt.layout.FillLayout.computeSize(FillLayout.java:119)
        at org.eclipse.swt.widgets.Composite.computeSize(Composite.java:213)
        at org.eclipse.swt.custom.SashFormLayout.computeSize
(SashFormLayout.java:46)
        at org.eclipse.swt.widgets.Composite.computeSize(Composite.java:213)
        at org.eclipse.swt.layout.FormData.computeSize(FormData.java:127)
        at org.eclipse.swt.layout.FormLayout.layout(FormLayout.java:318)
        at org.eclipse.swt.layout.FormLayout.computeSize(FormLayout.java:239)
        at org.eclipse.swt.widgets.Composite.computeSize(Composite.java:213)
        at org.eclipse.swt.widgets.Group.computeSize(Group.java:150)
        at org.eclipse.swt.layout.FormData.computeSize(FormData.java:116)
        at org.eclipse.swt.layout.FormData.getWidth(FormData.java:145)
        at org.eclipse.swt.layout.FormData.getRightAttachment(FormData.java:247)
        at org.eclipse.swt.layout.FormLayout.layout(FormLayout.java:305)
        at org.eclipse.swt.layout.FormLayout.layout(FormLayout.java:284)
        at org.eclipse.swt.widgets.Composite.updateLayout(Composite.java:869)
        at org.eclipse.swt.widgets.Composite.WM_SIZE(Composite.java:1248)
        at org.eclipse.swt.widgets.Control.windowProc(Control.java:3107)
        at org.eclipse.swt.widgets.Display.windowProc(Display.java:3706)
        at org.eclipse.swt.internal.win32.OS.DefWindowProcW(Native Method)
        at org.eclipse.swt.internal.win32.OS.DefWindowProc(OS.java:1651)
        at org.eclipse.swt.widgets.Scrollable.callWindowProc(Scrollable.java:77)
        at org.eclipse.swt.widgets.Control.windowProc(Control.java:3123)
        at org.eclipse.swt.widgets.Display.windowProc(Display.java:3706)
        at org.eclipse.swt.internal.win32.OS.SetWindowPos(Native Method)
        at org.eclipse.swt.widgets.Widget.SetWindowPos(Widget.java:1140)
        at org.eclipse.swt.widgets.Control.setBounds(Control.java:1952)
        at org.eclipse.swt.widgets.Control.setBounds(Control.java:1933)
        at org.eclipse.swt.widgets.Control.setBounds(Control.java:1929)
        at org.eclipse.swt.layout.FillLayout.layout(FillLayout.java:198)
        at org.eclipse.swt.widgets.Composite.updateLayout(Composite.java:869)
        at org.eclipse.swt.widgets.Composite.layout(Composite.java:493)
        at org.eclipse.swt.widgets.Composite.layout(Composite.java:458)
        at org.eclipse.swt.widgets.Composite.layout(Composite.java:428)
        at org.ies.ui.UIPanel.init(UIPanel.java:207)
        at org.ies.ui.UIWindow.createUIPanelInstance(UIWindow.java:142)
        at org.ies.ui.UIFrame.createCTabItem(UIFrame.java:374)
        at org.ies.ui.UIFrame.init(UIFrame.java:146)
        at org.ies.ui.UIApplication.showUIFrame(UIApplication.java:263)
        at MainClass.UIFrame_Test_1(MainClass.java:194)
        at MainClass.main(MainClass.java:208)





(In reply to comment #5)

you add GridData to any FillLayout (probably SashForm)

you acn be your bug, but eclipse can return better error message
or exception


*** This bug has been marked as a duplicate of 98493 ***</WithStack>
    <WithOutStack>Hi All:
I've some ui code work fine with eclipse3.0.2.
but when i run these code on eclipse3.1 release, there's some critical problem.
i use gridlayout to layout out my widgets and use jre1.5.04 in these two 
situation.
Thanks.
Created attachment 25453
work fine on eclipse 3.0.2 with jre1.5.04
Created attachment 25454
can layout correctly on eclipse 3.1 release with jre1.5.04
Can you please provide a code snippet that shows the problem?
This is probably bug (???)  maybe not in GridLayout (maybe in another layout , too)

We have (in more method getData,layout,flushCache) next construction :

GridData data = (GridData) control.getLayoutData ();

It throw exception (ClassCastException) when user set GridData to non GridLayout
User can do it and it has worked in eclipse &lt; 3.1

It can be user bug, but eclipse can check it and do nothing or return friendly
exception like 'you set XXXData to YYYLayout'

Peco
jre = 1.5.0_04

everything's fine with SWT &lt; 3.1

But... SWT &gt;= 3.1 I get :







(In reply to comment #5)

you add GridData to any FillLayout (probably SashForm)

you acn be your bug, but eclipse can return better error message
or exception


*** This bug has been marked as a duplicate of 98493 ***</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="105545" />
    <CreationDate amount="2005-07-28 22:53:00 -0400" />
    <DupId amount="99411" />
    <classification amount="Eclipse" />
    <Product amount="JDT" />
    <component amount="Debug" />
    <Version amount="3.1" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>UI blocked during JDIStackFrame.getLineNumber</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="DUPLICATE" />
    <WithStack>Eclipse 3.1 on Win32

The target JVM became somewhat unresponsive, but the Debug UI started to have
temporary lockups as shown by the javacore attached.
Created attachment 25455
Javacore which shows the UI blockage


*** This bug has been marked as a duplicate of 99411 ***</WithStack>
    <WithOutStack>Eclipse 3.1 on Win32

The target JVM became somewhat unresponsive, but the Debug UI started to have
temporary lockups as shown by the javacore attached.
Created attachment 25455
Javacore which shows the UI blockage


*** This bug has been marked as a duplicate of 99411 ***</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="105546" />
    <CreationDate amount="2005-07-28 23:12:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="JDT" />
    <component amount="UI" />
    <Version amount="3.1" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="enhancement" />
    <Summery>[quick fix] Auto-fix create method without method comment</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="WORKSFORME" />
    <WithStack>Version: 3.1.0
Build id: I20050627-1435

The "Create Method" function of Auto Fix can generate empty method, but can not
generate method comment.
Move to JDT/UI
The setting that controls if the new method has a comment or not is on
Preferences -&gt; Java -&gt; Code Style

To just add a (Javadoc) comment to an existing method use Source -&gt; Add Comment.

Please reopen if I misunderstood the request.</WithStack>
    <WithOutStack>Version: 3.1.0
Build id: I20050627-1435

The "Create Method" function of Auto Fix can generate empty method, but can not
generate method comment.
Move to JDT/UI
The setting that controls if the new method has a comment or not is on
Preferences -&gt; Java -&gt; Code Style

To just add a (Javadoc) comment to an existing method use Source -&gt; Add Comment.

Please reopen if I misunderstood the request.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="105547" />
    <CreationDate amount="2005-07-28 23:27:00 -0400" />
    <DupId amount="" />
    <classification amount="WebTools" />
    <Product amount="WTP Webservices" />
    <component amount="jst.ws" />
    <Version amount="0.7" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="major" />
    <Summery>Web Service wizard hangs while publishing appclient EAR</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="INVALID" />
    <WithStack>Using a Web service client runtime type that supports Application Client client
types and EARs, the creation of an application client based Web service client
results in a hang when the wizard tries to publish the EAR.

The workaround is to pre-create the application client project and EAR and add
a server based module as well (Web, EJB or Connector).

If this is actually a server tooling problem, please re-route to server 
tooling.
Peter, would you please take a look into this in Rupam's absence? Seng may also 
be able to lend a hand. There's a workaround, so I'm not sure we need to fix 
this in the WTP 0.7 maintenance stream (currently reserved for I18N fixes 
anyways). You, Kathy and Yen can discuss that.
The problem was due to an incorrect server configuration.
Closing on Yen's behalf.</WithStack>
    <WithOutStack>Using a Web service client runtime type that supports Application Client client
types and EARs, the creation of an application client based Web service client
results in a hang when the wizard tries to publish the EAR.

The workaround is to pre-create the application client project and EAR and add
a server based module as well (Web, EJB or Connector).

If this is actually a server tooling problem, please re-route to server 
tooling.
Peter, would you please take a look into this in Rupam's absence? Seng may also 
be able to lend a hand. There's a workaround, so I'm not sure we need to fix 
this in the WTP 0.7 maintenance stream (currently reserved for I18N fixes 
anyways). You, Kathy and Yen can discuss that.
The problem was due to an incorrect server configuration.
Closing on Yen's behalf.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="105548" />
    <CreationDate amount="2005-07-28 23:39:00 -0400" />
    <DupId amount="" />
    <classification amount="WebTools" />
    <Product amount="WTP Webservices" />
    <component amount="jst.ws" />
    <Version amount="0.7" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>IllegalArgumentException in Client Environment Configuration Page</Summery>
    <Patches amount="0" />
    <Stacktraces amount="3">
      <Stacktrace timestamp="1437330562968">
        <Exception>java.lang.IllegalArgumentException</Exception>
        <Reason>Path for project must have only one 
segment.</Reason>
        <Frames>
          <Frame depth="0">java.lang.Throwable.&lt;init&gt;(Throwable.java:58)</Frame>
          <Frame depth="1">java.lang.Throwable.&lt;init&gt;(Throwable.java:72)</Frame>
          <Frame depth="2">org.eclipse.core.internal.utils.Assert.isLegal(Assert.java:60)</Frame>
          <Frame depth="3">org.eclipse.core.internal.resources.WorkspaceRoot.getProject(WorkspaceRoot.java:134)</Frame>
          <Frame depth="4">org.eclipse.jst.ws.internal.consumption.ui.widgets.runtime.ProjectSelectionWidget.populateEARCombos(ProjectSelectionWidget.java:445)</Frame>
          <Frame depth="5">org.eclipse.jst.ws.internal.consumption.ui.widgets.runtime.ProjectSelectionWidget.updateEAREnabledState(ProjectSelectionWidget.java:435)</Frame>
          <Frame depth="6">org.eclipse.jst.ws.internal.consumption.ui.widgets.runtime.ProjectSelectionWidget.handleModuleChanged(ProjectSelectionWidget.java:254)</Frame>
          <Frame depth="7">org.eclipse.jst.ws.internal.consumption.ui.widgets.runtime.ProjectSelectionWidget.access$2(ProjectSelectionWidget.java:235)</Frame>
          <Frame depth="8">org.eclipse.jst.ws.internal.consumption.ui.widgets.runtime.ProjectSelectionWidget$2.modifyText(ProjectSelectionWidget.java:147)</Frame>
          <Frame depth="9">org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:188)</Frame>
          <Frame depth="10">org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)</Frame>
          <Frame depth="11">org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:843)</Frame>
          <Frame depth="12">org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:867)</Frame>
          <Frame depth="13">org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:848)</Frame>
          <Frame depth="14">org.eclipse.swt.widgets.Combo.setItems(Combo.java:1353)</Frame>
          <Frame depth="15">org.eclipse.jst.ws.internal.consumption.ui.widgets.runtime.ProjectSelectionWidget.handleModuleProjectChanged(ProjectSelectionWidget.java:198)</Frame>
          <Frame depth="16">org.eclipse.jst.ws.internal.consumption.ui.widgets.runtime.ProjectSelectionWidget.access$0(ProjectSelectionWidget.java:191)</Frame>
          <Frame depth="17">org.eclipse.jst.ws.internal.consumption.ui.widgets.runtime.ProjectSelectionWidget$1.modifyText(ProjectSelectionWidget.java:138)</Frame>
          <Frame depth="18">org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:188)</Frame>
          <Frame depth="19">org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)</Frame>
          <Frame depth="20">org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:843)</Frame>
          <Frame depth="21">org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:867)</Frame>
          <Frame depth="22">org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:848)</Frame>
          <Frame depth="23">org.eclipse.swt.widgets.Combo.wmCommandChild(Combo.java:2000)</Frame>
          <Frame depth="24">org.eclipse.swt.widgets.Control.WM_COMMAND(Control.java:3164)</Frame>
          <Frame depth="25">org.eclipse.swt.widgets.Control.windowProc(Control.java:3041)</Frame>
          <Frame depth="26">org.eclipse.swt.widgets.Display.windowProc(Display.java:3706)</Frame>
          <Frame depth="27">org.eclipse.swt.internal.win32.OS.CallWindowProcW(Native Method)</Frame>
          <Frame depth="28">org.eclipse.swt.internal.win32.OS.CallWindowProc(OS.java:1580)</Frame>
          <Frame depth="29">org.eclipse.swt.widgets.Combo.callWindowProc(Combo.java:276)</Frame>
          <Frame depth="30">org.eclipse.swt.widgets.Control.windowProc(Control.java:3123)</Frame>
          <Frame depth="31">org.eclipse.swt.widgets.Combo.windowProc(Combo.java:1755)</Frame>
          <Frame depth="32">org.eclipse.swt.widgets.Display.windowProc(Display.java:3706)</Frame>
          <Frame depth="33">org.eclipse.swt.internal.win32.OS.CallWindowProcW(Native Method)</Frame>
          <Frame depth="34">org.eclipse.swt.internal.win32.OS.CallWindowProc(OS.java:1580)</Frame>
          <Frame depth="35">org.eclipse.swt.widgets.Combo.callWindowProc(Combo.java:280)</Frame>
          <Frame depth="36">org.eclipse.swt.widgets.Combo.windowProc(Combo.java:1726)</Frame>
          <Frame depth="37">org.eclipse.swt.widgets.Display.windowProc(Display.java:3706)</Frame>
          <Frame depth="38">org.eclipse.swt.internal.win32.OS.DispatchMessageW(Native Method)</Frame>
          <Frame depth="39">org.eclipse.swt.internal.win32.OS.DispatchMessage(OS.java:1656)</Frame>
          <Frame depth="40">org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2711)</Frame>
          <Frame depth="41">org.eclipse.jface.window.Window.runEventLoop(Window.java:809)</Frame>
          <Frame depth="42">org.eclipse.jface.window.Window.open(Window.java:787)</Frame>
          <Frame depth="43">org.eclipse.ui.actions.NewWizardAction.run(NewWizardAction.java:181)</Frame>
          <Frame depth="44">org.eclipse.ui.actions.NewWizardDropDownAction.run(NewWizardDropDownAction.java:174)</Frame>
          <Frame depth="45">org.eclipse.jface.action.Action.runWithEvent(Action.java:996)</Frame>
          <Frame depth="46">org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection(ActionContributionItem.java:538)</Frame>
          <Frame depth="47">org.eclipse.jface.action.ActionContributionItem.access$2(ActionContributionItem.java:488)</Frame>
          <Frame depth="48">org.eclipse.jface.action.ActionContributionItem$6.handleEvent(ActionContributionItem.java:441)</Frame>
          <Frame depth="49">org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)</Frame>
          <Frame depth="50">org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:843)</Frame>
          <Frame depth="51">org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3080)</Frame>
          <Frame depth="52">org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2713)</Frame>
          <Frame depth="53">org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1699)</Frame>
          <Frame depth="54">org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1663)</Frame>
          <Frame depth="55">org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:367)</Frame>
          <Frame depth="56">org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:143)</Frame>
          <Frame depth="57">org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:103)</Frame>
          <Frame depth="58">org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:226)</Frame>
          <Frame depth="59">org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:376)</Frame>
          <Frame depth="60">org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:163)</Frame>
          <Frame depth="61">sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)</Frame>
          <Frame depth="62">sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:85)</Frame>
          <Frame depth="63">sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:58)</Frame>
          <Frame depth="64">sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:60)</Frame>
          <Frame depth="65">java.lang.reflect.Method.invoke(Method.java:391)</Frame>
          <Frame depth="66">org.eclipse.core.launcher.Main.invokeFramework(Main.java:334)</Frame>
          <Frame depth="67">org.eclipse.core.launcher.Main.basicRun(Main.java:278)</Frame>
          <Frame depth="68">org.eclipse.core.launcher.Main.run(Main.java:973)</Frame>
        </Frames>
      </Stacktrace>
      <Stacktrace timestamp="1437330562968">
        <Exception>java.lang.IllegalArgumentException</Exception>
        <Reason>Path for project must have only one 
segment.</Reason>
        <Frames>
          <Frame depth="0">java.lang.Throwable.&lt;init&gt;(Throwable.java:58)</Frame>
          <Frame depth="1">java.lang.Throwable.&lt;init&gt;(Throwable.java:72)</Frame>
          <Frame depth="2">org.eclipse.core.internal.utils.Assert.isLegal(Assert.java:60)</Frame>
          <Frame depth="3">org.eclipse.core.internal.resources.WorkspaceRoot.getProject(WorkspaceRoot.java:134)</Frame>
          <Frame depth="4">org.eclipse.jst.ws.internal.consumption.ui.widgets.runtime.ProjectSelectionWidget.populateEARCombos(ProjectSelectionWidget.java:445)</Frame>
          <Frame depth="5">org.eclipse.jst.ws.internal.consumption.ui.widgets.runtime.ProjectSelectionWidget.updateEAREnabledState(ProjectSelectionWidget.java:435)</Frame>
          <Frame depth="6">org.eclipse.jst.ws.internal.consumption.ui.widgets.runtime.ProjectSelectionWidget.handleModuleChanged(ProjectSelectionWidget.java:254)</Frame>
          <Frame depth="7">org.eclipse.jst.ws.internal.consumption.ui.widgets.runtime.ProjectSelectionWidget.access$2(ProjectSelectionWidget.java:235)</Frame>
          <Frame depth="8">org.eclipse.jst.ws.internal.consumption.ui.widgets.runtime.ProjectSelectionWidget$2.modifyText(ProjectSelectionWidget.java:147)</Frame>
          <Frame depth="9">org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:188)</Frame>
          <Frame depth="10">org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)</Frame>
          <Frame depth="11">org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:843)</Frame>
          <Frame depth="12">org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:867)</Frame>
          <Frame depth="13">org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:848)</Frame>
          <Frame depth="14">org.eclipse.swt.widgets.Combo.setItems(Combo.java:1353)</Frame>
          <Frame depth="15">org.eclipse.jst.ws.internal.consumption.ui.widgets.runtime.ProjectSelectionWidget.handleModuleProjectChanged(ProjectSelectionWidget.java:198)</Frame>
          <Frame depth="16">org.eclipse.jst.ws.internal.consumption.ui.widgets.runtime.ProjectSelectionWidget.access$0(ProjectSelectionWidget.java:191)</Frame>
          <Frame depth="17">org.eclipse.jst.ws.internal.consumption.ui.widgets.runtime.ProjectSelectionWidget$1.modifyText(ProjectSelectionWidget.java:138)</Frame>
          <Frame depth="18">org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:188)</Frame>
          <Frame depth="19">org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)</Frame>
          <Frame depth="20">org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:843)</Frame>
          <Frame depth="21">org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:867)</Frame>
          <Frame depth="22">org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:848)</Frame>
          <Frame depth="23">org.eclipse.swt.widgets.Combo.wmCommandChild(Combo.java:2000)</Frame>
          <Frame depth="24">org.eclipse.swt.widgets.Control.WM_COMMAND(Control.java:3164)</Frame>
          <Frame depth="25">org.eclipse.swt.widgets.Control.windowProc(Control.java:3041)</Frame>
          <Frame depth="26">org.eclipse.swt.widgets.Display.windowProc(Display.java:3706)</Frame>
          <Frame depth="27">org.eclipse.swt.internal.win32.OS.CallWindowProcW(Native Method)</Frame>
          <Frame depth="28">org.eclipse.swt.internal.win32.OS.CallWindowProc(OS.java:1580)</Frame>
          <Frame depth="29">org.eclipse.swt.widgets.Combo.callWindowProc(Combo.java:276)</Frame>
          <Frame depth="30">org.eclipse.swt.widgets.Control.windowProc(Control.java:3123)</Frame>
          <Frame depth="31">org.eclipse.swt.widgets.Combo.windowProc(Combo.java:1755)</Frame>
          <Frame depth="32">org.eclipse.swt.widgets.Display.windowProc(Display.java:3706)</Frame>
          <Frame depth="33">org.eclipse.swt.internal.win32.OS.CallWindowProcW(Native Method)</Frame>
          <Frame depth="34">org.eclipse.swt.internal.win32.OS.CallWindowProc(OS.java:1580)</Frame>
          <Frame depth="35">org.eclipse.swt.widgets.Combo.callWindowProc(Combo.java:280)</Frame>
          <Frame depth="36">org.eclipse.swt.widgets.Combo.windowProc(Combo.java:1726)</Frame>
          <Frame depth="37">org.eclipse.swt.widgets.Display.windowProc(Display.java:3706)</Frame>
          <Frame depth="38">org.eclipse.swt.internal.win32.OS.DispatchMessageW(Native Method)</Frame>
          <Frame depth="39">org.eclipse.swt.internal.win32.OS.DispatchMessage(OS.java:1656)</Frame>
          <Frame depth="40">org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2711)</Frame>
          <Frame depth="41">org.eclipse.jface.window.Window.runEventLoop(Window.java:809)</Frame>
          <Frame depth="42">org.eclipse.jface.window.Window.open(Window.java:787)</Frame>
          <Frame depth="43">org.eclipse.ui.actions.NewWizardAction.run(NewWizardAction.java:181)</Frame>
          <Frame depth="44">org.eclipse.ui.actions.NewWizardDropDownAction.run(NewWizardDropDownAction.java:174)</Frame>
          <Frame depth="45">org.eclipse.jface.action.Action.runWithEvent(Action.java:996)</Frame>
          <Frame depth="46">org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection(ActionContributionItem.java:538)</Frame>
          <Frame depth="47">org.eclipse.jface.action.ActionContributionItem.access$2(ActionContributionItem.java:488)</Frame>
          <Frame depth="48">org.eclipse.jface.action.ActionContributionItem$6.handleEvent(ActionContributionItem.java:441)</Frame>
          <Frame depth="49">org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)</Frame>
          <Frame depth="50">org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:843)</Frame>
          <Frame depth="51">org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3080)</Frame>
          <Frame depth="52">org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2713)</Frame>
          <Frame depth="53">org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1699)</Frame>
          <Frame depth="54">org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1663)</Frame>
          <Frame depth="55">org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:367)</Frame>
          <Frame depth="56">org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:143)</Frame>
          <Frame depth="57">org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:103)</Frame>
          <Frame depth="58">org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:226)</Frame>
          <Frame depth="59">org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:376)</Frame>
          <Frame depth="60">org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:163)</Frame>
          <Frame depth="61">sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)</Frame>
          <Frame depth="62">sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:85)</Frame>
          <Frame depth="63">sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:58)</Frame>
          <Frame depth="64">sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:60)</Frame>
          <Frame depth="65">java.lang.reflect.Method.invoke(Method.java:391)</Frame>
          <Frame depth="66">org.eclipse.core.launcher.Main.invokeFramework(Main.java:334)</Frame>
          <Frame depth="67">org.eclipse.core.launcher.Main.basicRun(Main.java:278)</Frame>
          <Frame depth="68">org.eclipse.core.launcher.Main.run(Main.java:973)</Frame>
          <Frame depth="69">org.eclipse.core.launcher.Main.main(Main.java:948)</Frame>
        </Frames>
      </Stacktrace>
      <Stacktrace timestamp="1437330562968">
        <Exception>java.lang.NullPointerException</Exception>
        <Reason />
        <Frames>
          <Frame depth="0">org.eclipse.jst.ws.internal.consumption.ui.common.ValidationUtils.getClientTypeLabel(ValidationUtils.java:183)</Frame>
          <Frame depth="1">org.eclipse.jst.ws.internal.consumption.ui.common.ValidationUtils.validateProjectType(ValidationUtils.java:171)</Frame>
          <Frame depth="2">org.eclipse.jst.ws.internal.consumption.ui.widgets.runtime.ClientRuntimeSelectionWidget.getStatus(ClientRuntimeSelectionWidget.java:354)</Frame>
          <Frame depth="3">org.eclipse.wst.command.internal.env.ui.widgets.SimpleWizardPage.validatePageToStatus(SimpleWizardPage.java:64)</Frame>
          <Frame depth="4">org.eclipse.wst.command.internal.env.ui.widgets.SimpleWizardPage$StatusListener.handleEvent(SimpleWizardPage.java:134)</Frame>
          <Frame depth="5">org.eclipse.jst.ws.internal.consumption.ui.widgets.runtime.ClientRuntimeSelectionWidget$2.widgetSelected(ClientRuntimeSelectionWidget.java:87)</Frame>
          <Frame depth="6">org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:90)</Frame>
          <Frame depth="7">org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)</Frame>
          <Frame depth="8">org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:843)</Frame>
          <Frame depth="9">org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3080)</Frame>
          <Frame depth="10">org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2713)</Frame>
          <Frame depth="11">org.eclipse.jface.window.Window.runEventLoop(Window.java:809)</Frame>
          <Frame depth="12">org.eclipse.jface.window.Window.open(Window.java:787)</Frame>
          <Frame depth="13">org.eclipse.ui.actions.NewWizardAction.run(NewWizardAction.java:181)</Frame>
          <Frame depth="14">org.eclipse.ui.actions.NewWizardDropDownAction.run(NewWizardDropDownAction.java:174)</Frame>
          <Frame depth="15">org.eclipse.jface.action.Action.runWithEvent(Action.java:996)</Frame>
          <Frame depth="16">org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection(ActionContributionItem.java:538)</Frame>
          <Frame depth="17">org.eclipse.jface.action.ActionContributionItem.access$2(ActionContributionItem.java:488)</Frame>
          <Frame depth="18">org.eclipse.jface.action.ActionContributionItem$6.handleEvent(ActionContributionItem.java:441)</Frame>
          <Frame depth="19">org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)</Frame>
          <Frame depth="20">org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:843)</Frame>
          <Frame depth="21">org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3080)</Frame>
          <Frame depth="22">org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2713)</Frame>
          <Frame depth="23">org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1699)</Frame>
          <Frame depth="24">org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1663)</Frame>
          <Frame depth="25">org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:367)</Frame>
          <Frame depth="26">org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:143)</Frame>
          <Frame depth="27">org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:103)</Frame>
          <Frame depth="28">org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:226)</Frame>
          <Frame depth="29">org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:376)</Frame>
          <Frame depth="30">org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:163)</Frame>
          <Frame depth="31">sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)</Frame>
          <Frame depth="32">sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:85)</Frame>
          <Frame depth="33">sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:58)</Frame>
          <Frame depth="34">sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:60)</Frame>
          <Frame depth="35">java.lang.reflect.Method.invoke(Method.java:391)</Frame>
          <Frame depth="36">org.eclipse.core.launcher.Main.invokeFramework(Main.java:334)</Frame>
          <Frame depth="37">org.eclipse.core.launcher.Main.basicRun(Main.java:278)</Frame>
          <Frame depth="38">org.eclipse.core.launcher.Main.run(Main.java:973)</Frame>
          <Frame depth="39">org.eclipse.core.launcher.Main.main(Main.java:948)</Frame>
        </Frames>
      </Stacktrace>
    </Stacktraces>
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="4">
        <Lines>
          <Line>1) Create a project (e.g. Web)</Line>
          <Line>2) Select the project.</Line>
          <Line>3) Open the Web service client wizard (New =&gt; Other =&gt; Web Services Client)</Line>
          <Line>4) Clear the client project field and you'll get the following stack traceback:</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="CLOSED" />
    <resolution amount="WORKSFORME" />
    <WithStack>1) Create a project (e.g. Web)
2) Select the project.
3) Open the Web service client wizard (New =&gt; Other =&gt; Web Services Client)
4) Clear the client project field and you'll get the following stack traceback:

!ENTRY org.eclipse.ui 4 0 2005-07-28 18:00:23.796
!MESSAGE Path for project must have only one segment.
!STACK 0
java.lang.IllegalArgumentException: Path for project must have only one 
segment.
	at java.lang.Throwable.&lt;init&gt;(Throwable.java:58)
	at java.lang.Throwable.&lt;init&gt;(Throwable.java:72)
	at org.eclipse.core.internal.utils.Assert.isLegal(Assert.java:60)
	at org.eclipse.core.internal.resources.WorkspaceRoot.getProject
(WorkspaceRoot.java:134)
	at 
org.eclipse.jst.ws.internal.consumption.ui.widgets.runtime.ProjectSelectionWidg
et.populateEARCombos(ProjectSelectionWidget.java:445)
	at 
org.eclipse.jst.ws.internal.consumption.ui.widgets.runtime.ProjectSelectionWidg
et.updateEAREnabledState(ProjectSelectionWidget.java:435)
	at 
org.eclipse.jst.ws.internal.consumption.ui.widgets.runtime.ProjectSelectionWidg
et.handleModuleChanged(ProjectSelectionWidget.java:254)
	at 
org.eclipse.jst.ws.internal.consumption.ui.widgets.runtime.ProjectSelectionWidg
et.access$2(ProjectSelectionWidget.java:235)
	at 
org.eclipse.jst.ws.internal.consumption.ui.widgets.runtime.ProjectSelectionWidg
et$2.modifyText(ProjectSelectionWidget.java:147)
	at org.eclipse.swt.widgets.TypedListener.handleEvent
(TypedListener.java:188)
	at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:843)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:867)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:848)
	at org.eclipse.swt.widgets.Combo.setItems(Combo.java:1353)
	at 
org.eclipse.jst.ws.internal.consumption.ui.widgets.runtime.ProjectSelectionWidg
et.handleModuleProjectChanged(ProjectSelectionWidget.java:198)
	at 
org.eclipse.jst.ws.internal.consumption.ui.widgets.runtime.ProjectSelectionWidg
et.access$0(ProjectSelectionWidget.java:191)
	at 
org.eclipse.jst.ws.internal.consumption.ui.widgets.runtime.ProjectSelectionWidg
et$1.modifyText(ProjectSelectionWidget.java:138)
	at org.eclipse.swt.widgets.TypedListener.handleEvent
(TypedListener.java:188)
	at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:843)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:867)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:848)
	at org.eclipse.swt.widgets.Combo.wmCommandChild(Combo.java:2000)
	at org.eclipse.swt.widgets.Control.WM_COMMAND(Control.java:3164)
	at org.eclipse.swt.widgets.Control.windowProc(Control.java:3041)
	at org.eclipse.swt.widgets.Display.windowProc(Display.java:3706)
	at org.eclipse.swt.internal.win32.OS.CallWindowProcW(Native Method)
	at org.eclipse.swt.internal.win32.OS.CallWindowProc(OS.java:1580)
	at org.eclipse.swt.widgets.Combo.callWindowProc(Combo.java:276)
	at org.eclipse.swt.widgets.Control.windowProc(Control.java:3123)
	at org.eclipse.swt.widgets.Combo.windowProc(Combo.java:1755)
	at org.eclipse.swt.widgets.Display.windowProc(Display.java:3706)
	at org.eclipse.swt.internal.win32.OS.CallWindowProcW(Native Method)
	at org.eclipse.swt.internal.win32.OS.CallWindowProc(OS.java:1580)
	at org.eclipse.swt.widgets.Combo.callWindowProc(Combo.java:280)
	at org.eclipse.swt.widgets.Combo.windowProc(Combo.java:1726)
	at org.eclipse.swt.widgets.Display.windowProc(Display.java:3706)
	at org.eclipse.swt.internal.win32.OS.DispatchMessageW(Native Method)
	at org.eclipse.swt.internal.win32.OS.DispatchMessage(OS.java:1656)
	at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2711)
	at org.eclipse.jface.window.Window.runEventLoop(Window.java:809)
	at org.eclipse.jface.window.Window.open(Window.java:787)
	at org.eclipse.ui.actions.NewWizardAction.run(NewWizardAction.java:181)
	at org.eclipse.ui.actions.NewWizardDropDownAction.run
(NewWizardDropDownAction.java:174)
	at org.eclipse.jface.action.Action.runWithEvent(Action.java:996)
	at 
org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection
(ActionContributionItem.java:538)
	at org.eclipse.jface.action.ActionContributionItem.access$2
(ActionContributionItem.java:488)
	at org.eclipse.jface.action.ActionContributionItem$6.handleEvent
(ActionContributionItem.java:441)
	at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:843)
	at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3080)
	at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2713)
	at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1699)
	at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1663)
	at org.eclipse.ui.internal.Workbench.createAndRunWorkbench
(Workbench.java:367)
	at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:143)
	at org.eclipse.ui.internal.ide.IDEApplication.run
(IDEApplication.java:103)
	at org.eclipse.core.internal.runtime.PlatformActivator$1.run
(PlatformActivator.java:226)
	at org.eclipse.core.runtime.adaptor.EclipseStarter.run
(EclipseStarter.java:376)
	at org.eclipse.core.runtime.adaptor.EclipseStarter.run
(EclipseStarter.java:163)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke
(NativeMethodAccessorImpl.java:85)
	at sun.reflect.NativeMethodAccessorImpl.invoke
(NativeMethodAccessorImpl.java:58)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke
(DelegatingMethodAccessorImpl.java:60)
	at java.lang.reflect.Method.invoke(Method.java:391)
	at org.eclipse.core.launcher.Main.invokeFramework(Main.java:334)
	at org.eclipse.core.launcher.Main.basicRun(Main.java:278)
	at org.eclipse.core.launcher.Main.run(Main.java:973)

I also saw this (which might be just the event handling cascading):

!ENTRY org.eclipse.ui 4 0 2005-07-28 23:26:30.46
!MESSAGE Path for project must have only one segment.
!STACK 0
java.lang.IllegalArgumentException: Path for project must have only one 
segment.
	at java.lang.Throwable.&lt;init&gt;(Throwable.java:58)
	at java.lang.Throwable.&lt;init&gt;(Throwable.java:72)
	at org.eclipse.core.internal.utils.Assert.isLegal(Assert.java:60)
	at org.eclipse.core.internal.resources.WorkspaceRoot.getProject
(WorkspaceRoot.java:134)
	at 
org.eclipse.jst.ws.internal.consumption.ui.widgets.runtime.ProjectSelectionWidg
et.populateEARCombos(ProjectSelectionWidget.java:445)
	at 
org.eclipse.jst.ws.internal.consumption.ui.widgets.runtime.ProjectSelectionWidg
et.updateEAREnabledState(ProjectSelectionWidget.java:435)
	at 
org.eclipse.jst.ws.internal.consumption.ui.widgets.runtime.ProjectSelectionWidg
et.handleModuleChanged(ProjectSelectionWidget.java:254)
	at 
org.eclipse.jst.ws.internal.consumption.ui.widgets.runtime.ProjectSelectionWidg
et.access$2(ProjectSelectionWidget.java:235)
	at 
org.eclipse.jst.ws.internal.consumption.ui.widgets.runtime.ProjectSelectionWidg
et$2.modifyText(ProjectSelectionWidget.java:147)
	at org.eclipse.swt.widgets.TypedListener.handleEvent
(TypedListener.java:188)
	at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:843)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:867)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:848)
	at org.eclipse.swt.widgets.Combo.setItems(Combo.java:1353)
	at 
org.eclipse.jst.ws.internal.consumption.ui.widgets.runtime.ProjectSelectionWidg
et.handleModuleProjectChanged(ProjectSelectionWidget.java:198)
	at 
org.eclipse.jst.ws.internal.consumption.ui.widgets.runtime.ProjectSelectionWidg
et.access$0(ProjectSelectionWidget.java:191)
	at 
org.eclipse.jst.ws.internal.consumption.ui.widgets.runtime.ProjectSelectionWidg
et$1.modifyText(ProjectSelectionWidget.java:138)
	at org.eclipse.swt.widgets.TypedListener.handleEvent
(TypedListener.java:188)
	at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:843)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:867)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:848)
	at org.eclipse.swt.widgets.Combo.wmCommandChild(Combo.java:2000)
	at org.eclipse.swt.widgets.Control.WM_COMMAND(Control.java:3164)
	at org.eclipse.swt.widgets.Control.windowProc(Control.java:3041)
	at org.eclipse.swt.widgets.Display.windowProc(Display.java:3706)
	at org.eclipse.swt.internal.win32.OS.CallWindowProcW(Native Method)
	at org.eclipse.swt.internal.win32.OS.CallWindowProc(OS.java:1580)
	at org.eclipse.swt.widgets.Combo.callWindowProc(Combo.java:276)
	at org.eclipse.swt.widgets.Control.windowProc(Control.java:3123)
	at org.eclipse.swt.widgets.Combo.windowProc(Combo.java:1755)
	at org.eclipse.swt.widgets.Display.windowProc(Display.java:3706)
	at org.eclipse.swt.internal.win32.OS.CallWindowProcW(Native Method)
	at org.eclipse.swt.internal.win32.OS.CallWindowProc(OS.java:1580)
	at org.eclipse.swt.widgets.Combo.callWindowProc(Combo.java:280)
	at org.eclipse.swt.widgets.Combo.windowProc(Combo.java:1726)
	at org.eclipse.swt.widgets.Display.windowProc(Display.java:3706)
	at org.eclipse.swt.internal.win32.OS.DispatchMessageW(Native Method)
	at org.eclipse.swt.internal.win32.OS.DispatchMessage(OS.java:1656)
	at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2711)
	at org.eclipse.jface.window.Window.runEventLoop(Window.java:809)
	at org.eclipse.jface.window.Window.open(Window.java:787)
	at org.eclipse.ui.actions.NewWizardAction.run(NewWizardAction.java:181)
	at org.eclipse.ui.actions.NewWizardDropDownAction.run
(NewWizardDropDownAction.java:174)
	at org.eclipse.jface.action.Action.runWithEvent(Action.java:996)
	at 
org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection
(ActionContributionItem.java:538)
	at org.eclipse.jface.action.ActionContributionItem.access$2
(ActionContributionItem.java:488)
	at org.eclipse.jface.action.ActionContributionItem$6.handleEvent
(ActionContributionItem.java:441)
	at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:843)
	at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3080)
	at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2713)
	at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1699)
	at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1663)
	at org.eclipse.ui.internal.Workbench.createAndRunWorkbench
(Workbench.java:367)
	at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:143)
	at org.eclipse.ui.internal.ide.IDEApplication.run
(IDEApplication.java:103)
	at org.eclipse.core.internal.runtime.PlatformActivator$1.run
(PlatformActivator.java:226)
	at org.eclipse.core.runtime.adaptor.EclipseStarter.run
(EclipseStarter.java:376)
	at org.eclipse.core.runtime.adaptor.EclipseStarter.run
(EclipseStarter.java:163)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke
(NativeMethodAccessorImpl.java:85)
	at sun.reflect.NativeMethodAccessorImpl.invoke
(NativeMethodAccessorImpl.java:58)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke
(DelegatingMethodAccessorImpl.java:60)
	at java.lang.reflect.Method.invoke(Method.java:391)
	at org.eclipse.core.launcher.Main.invokeFramework(Main.java:334)
	at org.eclipse.core.launcher.Main.basicRun(Main.java:278)
	at org.eclipse.core.launcher.Main.run(Main.java:973)
	at org.eclipse.core.launcher.Main.main(Main.java:948)
After the error occurred, I continued to work with the wizard. When I typed in
a project name, I then got:

!ENTRY org.eclipse.ui 4 0 2005-07-28 23:33:38.250
!MESSAGE java.lang.NullPointerException
!STACK 0
java.lang.NullPointerException
	at 
org.eclipse.jst.ws.internal.consumption.ui.common.ValidationUtils.getClientType
Label(ValidationUtils.java:183)
	at 
org.eclipse.jst.ws.internal.consumption.ui.common.ValidationUtils.validateProje
ctType(ValidationUtils.java:171)
	at 
org.eclipse.jst.ws.internal.consumption.ui.widgets.runtime.ClientRuntimeSelecti
onWidget.getStatus(ClientRuntimeSelectionWidget.java:354)
	at 
org.eclipse.wst.command.internal.env.ui.widgets.SimpleWizardPage.validatePageTo
Status(SimpleWizardPage.java:64)
	at 
org.eclipse.wst.command.internal.env.ui.widgets.SimpleWizardPage$StatusListener
.handleEvent(SimpleWizardPage.java:134)
	at 
org.eclipse.jst.ws.internal.consumption.ui.widgets.runtime.ClientRuntimeSelecti
onWidget$2.widgetSelected(ClientRuntimeSelectionWidget.java:87)
	at org.eclipse.swt.widgets.TypedListener.handleEvent
(TypedListener.java:90)
	at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:843)
	at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3080)
	at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2713)
	at org.eclipse.jface.window.Window.runEventLoop(Window.java:809)
	at org.eclipse.jface.window.Window.open(Window.java:787)
	at org.eclipse.ui.actions.NewWizardAction.run(NewWizardAction.java:181)
	at org.eclipse.ui.actions.NewWizardDropDownAction.run
(NewWizardDropDownAction.java:174)
	at org.eclipse.jface.action.Action.runWithEvent(Action.java:996)
	at 
org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection
(ActionContributionItem.java:538)
	at org.eclipse.jface.action.ActionContributionItem.access$2
(ActionContributionItem.java:488)
	at org.eclipse.jface.action.ActionContributionItem$6.handleEvent
(ActionContributionItem.java:441)
	at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:843)
	at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3080)
	at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2713)
	at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1699)
	at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1663)
	at org.eclipse.ui.internal.Workbench.createAndRunWorkbench
(Workbench.java:367)
	at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:143)
	at org.eclipse.ui.internal.ide.IDEApplication.run
(IDEApplication.java:103)
	at org.eclipse.core.internal.runtime.PlatformActivator$1.run
(PlatformActivator.java:226)
	at org.eclipse.core.runtime.adaptor.EclipseStarter.run
(EclipseStarter.java:376)
	at org.eclipse.core.runtime.adaptor.EclipseStarter.run
(EclipseStarter.java:163)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke
(NativeMethodAccessorImpl.java:85)
	at sun.reflect.NativeMethodAccessorImpl.invoke
(NativeMethodAccessorImpl.java:58)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke
(DelegatingMethodAccessorImpl.java:60)
	at java.lang.reflect.Method.invoke(Method.java:391)
	at org.eclipse.core.launcher.Main.invokeFramework(Main.java:334)
	at org.eclipse.core.launcher.Main.basicRun(Main.java:278)
	at org.eclipse.core.launcher.Main.run(Main.java:973)
	at org.eclipse.core.launcher.Main.main(Main.java:948)
I can no longer reproduce this problem in our WTP 1.0.1 based product.
This bug was moved to 'closed' state, since it is so old is is assumed its dup, invalid, or worksforme resolution is no longer in qustion and the bugzilla needs no further attention. Feel free to re-open, or open a new bug, if this semi-automatic processing was done in error in this case.</WithStack>
    <WithOutStack>1) Create a project (e.g. Web)
2) Select the project.
3) Open the Web service client wizard (New =&gt; Other =&gt; Web Services Client)
4) Clear the client project field and you'll get the following stack traceback:

!ENTRY org.eclipse.ui 4 0 2005-07-28 18:00:23.796
!MESSAGE Path for project must have only one segment.
!STACK 0

I also saw this (which might be just the event handling cascading):

!ENTRY org.eclipse.ui 4 0 2005-07-28 23:26:30.46
!MESSAGE Path for project must have only one segment.
!STACK 0
After the error occurred, I continued to work with the wizard. When I typed in
a project name, I then got:

!ENTRY org.eclipse.ui 4 0 2005-07-28 23:33:38.250
!MESSAGE java.lang.NullPointerException
!STACK 0

I can no longer reproduce this problem in our WTP 1.0.1 based product.
This bug was moved to 'closed' state, since it is so old is is assumed its dup, invalid, or worksforme resolution is no longer in qustion and the bugzilla needs no further attention. Feel free to re-open, or open a new bug, if this semi-automatic processing was done in error in this case.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="105549" />
    <CreationDate amount="2005-07-28 23:55:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="JDT" />
    <component amount="Debug" />
    <Version amount="3.1" />
    <rep_platform amount="PC" />
    <op_sys amount="All" />
    <priority amount="P3" />
    <bug_severity amount="enhancement" />
    <Summery>[breakpoints] Breakpoint highlight when program counter is stopped at it</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="WONTFIX" />
    <WithStack>Feature Enhancement Request.

Would it be possible to have the breakpoint window indicate when the current
program counter is stopped at that breakpoint.

Maybe in a faint green to match source code window, or a little icon at the very
left hand side of the window, left of the enable tick box.

This should not intefere with the blue highlight used when a breakpoint is
selected (single click), the green should in effect be underneath the blue in a
selected breakpoint scenario.
Currently, there is a toolbar toggle 'link with debug view' in the breakpoints 
view that performs selection of breakpoints the debugger is suspended at. 
However, this request is slightly different (i.e. avoid selection). 

Currently deferred
Yes I'm looking for a default action of "always indicate inertly" rather than
"activate selection and zoom" that "Link with Debug View" provides.

With my suggestion the computer helps us see which breakpoint we are on from the
list by hilighting it when it can but it does not upset our current selection
(or even attempt to scroll that breakpoint line into view).

As of now 'LATER' and 'REMIND' resolutions are no longer supported.
Please reopen this bug if it is still valid for you.</WithStack>
    <WithOutStack>Feature Enhancement Request.

Would it be possible to have the breakpoint window indicate when the current
program counter is stopped at that breakpoint.

Maybe in a faint green to match source code window, or a little icon at the very
left hand side of the window, left of the enable tick box.

This should not intefere with the blue highlight used when a breakpoint is
selected (single click), the green should in effect be underneath the blue in a
selected breakpoint scenario.
Currently, there is a toolbar toggle 'link with debug view' in the breakpoints 
view that performs selection of breakpoints the debugger is suspended at. 
However, this request is slightly different (i.e. avoid selection). 

Currently deferred
Yes I'm looking for a default action of "always indicate inertly" rather than
"activate selection and zoom" that "Link with Debug View" provides.

With my suggestion the computer helps us see which breakpoint we are on from the
list by hilighting it when it can but it does not upset our current selection
(or even attempt to scroll that breakpoint line into view).

As of now 'LATER' and 'REMIND' resolutions are no longer supported.
Please reopen this bug if it is still valid for you.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="105550" />
    <CreationDate amount="2005-07-29 00:30:00 -0400" />
    <DupId amount="" />
    <classification amount="WebTools" />
    <Product amount="WTP Webservices" />
    <component amount="jst.ws" />
    <Version amount="1.5" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="major" />
    <Summery>Exception generating sample JSPs for AppClient, EJBClient</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>When we try to workaround the appclient publishing problem described in: 

https://bugs.eclipse.org/bugs/show_bug.cgi?id=105547

by letting the Web service wizard create the app client project and associate
it with an existing EAR that already contains a Web project, the following
exception occurs just after the Web Service Client Test page:

IWAB0014E Unexpected exception occured.
  null
      java.lang.NullPointerException
      at 
org.eclipse.jst.j2ee.internal.earcreation.UtilityJARInEARProjectCommand.execute
(UtilityJARInEARProjectCommand.java:82)
      at 
org.eclipse.jst.ws.internal.consumption.ui.widgets.test.AddModuleDependenciesCo
mmand.addJavaProjectAsUtilityJar(AddModuleDependenciesCommand.java:122)
      at 
org.eclipse.jst.ws.internal.consumption.ui.widgets.test.AddModuleDependenciesCo
mmand.execute(AddModuleDependenciesCommand.java:105)
      at 
org.eclipse.wst.command.internal.env.core.fragment.CommandFragmentEngine.runCom
mand(CommandFragmentEngine.java:335)
      at 
org.eclipse.wst.command.internal.env.core.fragment.CommandFragmentEngine.visitT
op(CommandFragmentEngine.java:301)
      at 
org.eclipse.wst.command.internal.env.core.fragment.CommandFragmentEngine.moveFo
rwardToNextStop(CommandFragmentEngine.java:217)
      at 
org.eclipse.wst.command.internal.env.ui.widgets.SimpleCommandEngineManager$4.ru
n(SimpleCommandEngineManager.java:208)
      at org.eclipse.jface.operation.ModalContext.runInCurrentThread
(ModalContext.java:346)
      at org.eclipse.jface.operation.ModalContext.run(ModalContext.java:291)
      at org.eclipse.jface.wizard.WizardDialog.run(WizardDialog.java:830)
      at 
org.eclipse.wst.command.internal.env.ui.widgets.SimpleCommandEngineManager.runF
orwardToNextStop(SimpleCommandEngineManager.java:177)
      at 
org.eclipse.wst.command.internal.env.ui.widgets.WizardPageManager.runForwardToN
extStop(WizardPageManager.java:80)
      at 
org.eclipse.wst.command.internal.env.ui.widgets.WizardPageManager.performFinish
(WizardPageManager.java:220)
      at 
org.eclipse.wst.command.internal.env.ui.widgets.DynamicWizard.performFinish
(DynamicWizard.java:336)
      at org.eclipse.jface.wizard.WizardDialog.finishPressed
(WizardDialog.java:676)
      at org.eclipse.jface.wizard.WizardDialog.buttonPressed
(WizardDialog.java:349)
      at org.eclipse.jface.dialogs.Dialog$2.widgetSelected(Dialog.java:556)
      at org.eclipse.swt.widgets.TypedListener.handleEvent
(TypedListener.java:90)
      at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)
      at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:843)
      at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3080)
      at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2713)
      at org.eclipse.jface.window.Window.runEventLoop(Window.java:809)
      at org.eclipse.jface.window.Window.open(Window.java:787)
      at org.eclipse.ui.actions.NewWizardAction.run(NewWizardAction.java:181)
      at org.eclipse.ui.actions.NewWizardDropDownAction.run
(NewWizardDropDownAction.java:174)
      at org.eclipse.jface.action.Action.runWithEvent(Action.java:996)
      at org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection
(ActionContributionItem.java:538)
      at org.eclipse.jface.action.ActionContributionItem.access$2
(ActionContributionItem.java:488)
      at org.eclipse.jface.action.ActionContributionItem$6.handleEvent
(ActionContributionItem.java:441)
      at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)
      at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:843)
      at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3080)
      at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2713)
      at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1699)
      at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1663)
      at org.eclipse.ui.internal.Workbench.createAndRunWorkbench
(Workbench.java:367)
      at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:143)
      at org.eclipse.ui.internal.ide.IDEApplication.run
(IDEApplication.java:103)
      at org.eclipse.core.internal.runtime.PlatformActivator$1.run
(PlatformActivator.java:226)
      at org.eclipse.core.runtime.adaptor.EclipseStarter.run
(EclipseStarter.java:376)
      at org.eclipse.core.runtime.adaptor.EclipseStarter.run
(EclipseStarter.java:163)
      at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
      at sun.reflect.NativeMethodAccessorImpl.invoke
(NativeMethodAccessorImpl.java:85)
      at sun.reflect.NativeMethodAccessorImpl.invoke
(NativeMethodAccessorImpl.java:58)
      at sun.reflect.DelegatingMethodAccessorImpl.invoke
(DelegatingMethodAccessorImpl.java:60)
      at java.lang.reflect.Method.invoke(Method.java:391)
      at org.eclipse.core.launcher.Main.invokeFramework(Main.java:334)
      at org.eclipse.core.launcher.Main.basicRun(Main.java:278)
      at org.eclipse.core.launcher.Main.run(Main.java:973)
      at org.eclipse.core.launcher.Main.main(Main.java:948)

I'm not sure if this is a J2EE or Web services problem.
Actually, I think this issue may be more general than I originally anticipated.
If I ensure that I start with an EAR containing app client and Web project, the
Web Service wizard still fails after clicking Next on the Web Service Client 
Test page but with a slightly different exception:

IWAB0014E Unexpected exception occured.
  null
      java.lang.NullPointerException
      at 
org.eclipse.jst.j2ee.internal.earcreation.UtilityJARInEARProjectCommand.execute
(UtilityJARInEARProjectCommand.java:82)
      at 
org.eclipse.jst.ws.internal.consumption.ui.widgets.test.AddModuleDependenciesCo
mmand.addJavaProjectAsUtilityJar(AddModuleDependenciesCommand.java:122)
      at 
org.eclipse.jst.ws.internal.consumption.ui.widgets.test.AddModuleDependenciesCo
mmand.execute(AddModuleDependenciesCommand.java:105)
      at 
org.eclipse.wst.command.internal.env.core.fragment.CommandFragmentEngine.runCom
mand(CommandFragmentEngine.java:335)
      at 
org.eclipse.wst.command.internal.env.core.fragment.CommandFragmentEngine.visitT
op(CommandFragmentEngine.java:301)
      at 
org.eclipse.wst.command.internal.env.core.fragment.CommandFragmentEngine.moveFo
rwardToNextStop(CommandFragmentEngine.java:217)
      at 
org.eclipse.wst.command.internal.env.ui.widgets.SimpleCommandEngineManager$4.ru
n(SimpleCommandEngineManager.java:208)
      at org.eclipse.jface.operation.ModalContext.runInCurrentThread
(ModalContext.java:346)
      at org.eclipse.jface.operation.ModalContext.run(ModalContext.java:291)
      at org.eclipse.jface.wizard.WizardDialog.run(WizardDialog.java:830)
      at 
org.eclipse.wst.command.internal.env.ui.widgets.SimpleCommandEngineManager.runF
orwardToNextStop(SimpleCommandEngineManager.java:177)
      at 
org.eclipse.wst.command.internal.env.ui.widgets.WizardPageManager.runForwardToN
extStop(WizardPageManager.java:80)
      at 
org.eclipse.wst.command.internal.env.ui.widgets.WizardPageManager.performFinish
(WizardPageManager.java:220)
      at 
org.eclipse.wst.command.internal.env.ui.widgets.DynamicWizard.performFinish
(DynamicWizard.java:336)
      at org.eclipse.jface.wizard.WizardDialog.finishPressed
(WizardDialog.java:676)
      at org.eclipse.jface.wizard.WizardDialog.buttonPressed
(WizardDialog.java:349)
      at org.eclipse.jface.dialogs.Dialog$2.widgetSelected(Dialog.java:556)
      at org.eclipse.swt.widgets.TypedListener.handleEvent
(TypedListener.java:90)
      at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)
      at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:843)
      at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3080)
      at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2713)
      at org.eclipse.jface.window.Window.runEventLoop(Window.java:809)
      at org.eclipse.jface.window.Window.open(Window.java:787)
      at org.eclipse.ui.actions.NewWizardAction.run(NewWizardAction.java:181)
      at org.eclipse.ui.actions.NewWizardDropDownAction.run
(NewWizardDropDownAction.java:174)
      at org.eclipse.jface.action.Action.runWithEvent(Action.java:996)
      at org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection
(ActionContributionItem.java:538)
      at org.eclipse.jface.action.ActionContributionItem.access$2
(ActionContributionItem.java:488)
      at org.eclipse.jface.action.ActionContributionItem$6.handleEvent
(ActionContributionItem.java:441)
      at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)
      at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:843)
      at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3080)
      at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2713)
      at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1699)
      at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1663)
      at org.eclipse.ui.internal.Workbench.createAndRunWorkbench
(Workbench.java:367)
      at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:143)
      at org.eclipse.ui.internal.ide.IDEApplication.run
(IDEApplication.java:103)
      at org.eclipse.core.internal.runtime.PlatformActivator$1.run
(PlatformActivator.java:226)
      at org.eclipse.core.runtime.adaptor.EclipseStarter.run
(EclipseStarter.java:376)
      at org.eclipse.core.runtime.adaptor.EclipseStarter.run
(EclipseStarter.java:163)
      at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
      at sun.reflect.NativeMethodAccessorImpl.invoke
(NativeMethodAccessorImpl.java:85)
      at sun.reflect.NativeMethodAccessorImpl.invoke
(NativeMethodAccessorImpl.java:58)
      at sun.reflect.DelegatingMethodAccessorImpl.invoke
(DelegatingMethodAccessorImpl.java:60)
      at java.lang.reflect.Method.invoke(Method.java:391)
      at org.eclipse.core.launcher.Main.invokeFramework(Main.java:334)
      at org.eclipse.core.launcher.Main.basicRun(Main.java:278)
      at org.eclipse.core.launcher.Main.run(Main.java:973)
      at org.eclipse.core.launcher.Main.main(Main.java:948)

Could it be the attempt to add the Sample JSP's Web component (JSP project)
that is causing the real error?
I got a similar problem when creating an EJB client when exiting at the Web 
service client test page:

IWAB0014E Unexpected exception occured.
  null
      java.lang.NullPointerException
      at 
org.eclipse.jst.j2ee.internal.earcreation.UtilityJARInEARProjectCommand.execute
(UtilityJARInEARProjectCommand.java:82)
      at 
org.eclipse.jst.ws.internal.consumption.ui.widgets.test.AddModuleDependenciesCom
mand.addJavaProjectAsUtilityJar(AddModuleDependenciesCommand.java:122)
      at 
org.eclipse.jst.ws.internal.consumption.ui.widgets.test.AddModuleDependenciesCom
mand.execute(AddModuleDependenciesCommand.java:105)
      at 
org.eclipse.wst.command.internal.env.core.fragment.CommandFragmentEngine.runComm
and(CommandFragmentEngine.java:335)
      at 
org.eclipse.wst.command.internal.env.core.fragment.CommandFragmentEngine.visitTo
p(CommandFragmentEngine.java:301)
      at 
org.eclipse.wst.command.internal.env.core.fragment.CommandFragmentEngine.moveFor
wardToNextStop(CommandFragmentEngine.java:217)
      at 
org.eclipse.wst.command.internal.env.ui.widgets.SimpleCommandEngineManager$4.run
(SimpleCommandEngineManager.java:208)
      at org.eclipse.jface.operation.ModalContext.runInCurrentThread
(ModalContext.java:346)
      at org.eclipse.jface.operation.ModalContext.run(ModalContext.java:291)
      at org.eclipse.jface.wizard.WizardDialog.run(WizardDialog.java:830)
      at 
org.eclipse.wst.command.internal.env.ui.widgets.SimpleCommandEngineManager.runFo
rwardToNextStop(SimpleCommandEngineManager.java:177)
      at 
org.eclipse.wst.command.internal.env.ui.widgets.WizardPageManager.runForwardToNe
xtStop(WizardPageManager.java:80)
      at 
org.eclipse.wst.command.internal.env.ui.widgets.WizardPageManager.performFinish
(WizardPageManager.java:220)
      at 
org.eclipse.wst.command.internal.env.ui.widgets.DynamicWizard.performFinish
(DynamicWizard.java:336)
      at org.eclipse.jface.wizard.WizardDialog.finishPressed
(WizardDialog.java:676)
      at org.eclipse.jface.wizard.WizardDialog.buttonPressed
(WizardDialog.java:349)
      at org.eclipse.jface.dialogs.Dialog$2.widgetSelected(Dialog.java:556)
      at org.eclipse.swt.widgets.TypedListener.handleEvent
(TypedListener.java:90)
      at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)
      at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:843)
      at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3080)
      at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2713)
      at org.eclipse.jface.window.Window.runEventLoop(Window.java:809)
      at org.eclipse.jface.window.Window.open(Window.java:787)
      at org.eclipse.ui.actions.NewWizardAction.run(NewWizardAction.java:181)
      at org.eclipse.jface.action.Action.runWithEvent(Action.java:996)
      at org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection
(ActionContributionItem.java:538)
      at org.eclipse.jface.action.ActionContributionItem.access$2
(ActionContributionItem.java:488)
      at org.eclipse.jface.action.ActionContributionItem$5.handleEvent
(ActionContributionItem.java:400)
      at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)
      at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:843)
      at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3080)
      at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2713)
      at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1699)
      at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1663)
      at org.eclipse.ui.internal.Workbench.createAndRunWorkbench
(Workbench.java:367)
      at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:143)
      at org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:103)
      at org.eclipse.core.internal.runtime.PlatformActivator$1.run
(PlatformActivator.java:226)
      at org.eclipse.core.runtime.adaptor.EclipseStarter.run
(EclipseStarter.java:376)
      at org.eclipse.core.runtime.adaptor.EclipseStarter.run
(EclipseStarter.java:163)
      at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
      at sun.reflect.NativeMethodAccessorImpl.invoke
(NativeMethodAccessorImpl.java:85)
      at sun.reflect.NativeMethodAccessorImpl.invoke
(NativeMethodAccessorImpl.java:58)
      at sun.reflect.DelegatingMethodAccessorImpl.invoke
(DelegatingMethodAccessorImpl.java:60)
      at java.lang.reflect.Method.invoke(Method.java:391)
      at org.eclipse.core.launcher.Main.invokeFramework(Main.java:334)
      at org.eclipse.core.launcher.Main.basicRun(Main.java:278)
      at org.eclipse.core.launcher.Main.run(Main.java:973)
      at org.eclipse.core.launcher.Main.main(Main.java:948)

Hi Gil,  since this is in the test code can you have a look at it.  Thanks.
Created attachment 26017
patch for consumption
Created attachment 26018
patch for creation
Created attachment 26019
patch for ws
I have tested this problem with the EJB example and it appeared that 
there was a problem in the result pane of the sample due to
the fact that there were no was client generated classes. 

The appclient scenario would not let me onto the test page for some reason.
so if you could try these patches and see if it fixes the problem. If not we 
may need to sit down and go through unworking scenarios together.

 
Created attachment 26047
cons ui patch
Created attachment 26048
create ui patch
Created attachment 26049
ws patch
Created attachment 26112
restarting server added
the sample project that is created is now added to the correct EAR and the 
dependencies are added respectively
Patch committed and released as v20050823_1620.  Please leave the defect on the 
Assign state if you need to have patches committed for a defect.  It won't show 
up on our query for defects to commit if you moving it to Resolved state too 
early.
Verified this has been fixed
This change is a bulk update of all _un_targeted, fixed, resolved bugs upon release of M5. This particular bug _might_ have been fixed earlier than M5. (Feel free to correct). 


Closed.</WithStack>
    <WithOutStack>When we try to workaround the appclient publishing problem described in: 

https://bugs.eclipse.org/bugs/show_bug.cgi?id=105547

by letting the Web service wizard create the app client project and associate
it with an existing EAR that already contains a Web project, the following
exception occurs just after the Web Service Client Test page:

IWAB0014E Unexpected exception occured.
  null
      java.lang.NullPointerException
      at 
org.eclipse.jst.j2ee.internal.earcreation.UtilityJARInEARProjectCommand.execute
(UtilityJARInEARProjectCommand.java:82)
      at 
org.eclipse.jst.ws.internal.consumption.ui.widgets.test.AddModuleDependenciesCo
mmand.addJavaProjectAsUtilityJar(AddModuleDependenciesCommand.java:122)
      at 
org.eclipse.jst.ws.internal.consumption.ui.widgets.test.AddModuleDependenciesCo
mmand.execute(AddModuleDependenciesCommand.java:105)
      at 
org.eclipse.wst.command.internal.env.core.fragment.CommandFragmentEngine.runCom
mand(CommandFragmentEngine.java:335)
      at 
org.eclipse.wst.command.internal.env.core.fragment.CommandFragmentEngine.visitT
op(CommandFragmentEngine.java:301)
      at 
org.eclipse.wst.command.internal.env.core.fragment.CommandFragmentEngine.moveFo
rwardToNextStop(CommandFragmentEngine.java:217)
      at 
org.eclipse.wst.command.internal.env.ui.widgets.SimpleCommandEngineManager$4.ru
n(SimpleCommandEngineManager.java:208)
      at org.eclipse.jface.operation.ModalContext.runInCurrentThread
(ModalContext.java:346)
      at org.eclipse.jface.operation.ModalContext.run(ModalContext.java:291)
      at org.eclipse.jface.wizard.WizardDialog.run(WizardDialog.java:830)
      at 
org.eclipse.wst.command.internal.env.ui.widgets.SimpleCommandEngineManager.runF
orwardToNextStop(SimpleCommandEngineManager.java:177)
      at 
org.eclipse.wst.command.internal.env.ui.widgets.WizardPageManager.runForwardToN
extStop(WizardPageManager.java:80)
      at 
org.eclipse.wst.command.internal.env.ui.widgets.WizardPageManager.performFinish
(WizardPageManager.java:220)
      at 
org.eclipse.wst.command.internal.env.ui.widgets.DynamicWizard.performFinish
(DynamicWizard.java:336)
      at org.eclipse.jface.wizard.WizardDialog.finishPressed
(WizardDialog.java:676)
      at org.eclipse.jface.wizard.WizardDialog.buttonPressed
(WizardDialog.java:349)
      at org.eclipse.jface.dialogs.Dialog$2.widgetSelected(Dialog.java:556)
      at org.eclipse.swt.widgets.TypedListener.handleEvent
(TypedListener.java:90)
      at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)
      at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:843)
      at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3080)
      at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2713)
      at org.eclipse.jface.window.Window.runEventLoop(Window.java:809)
      at org.eclipse.jface.window.Window.open(Window.java:787)
      at org.eclipse.ui.actions.NewWizardAction.run(NewWizardAction.java:181)
      at org.eclipse.ui.actions.NewWizardDropDownAction.run
(NewWizardDropDownAction.java:174)
      at org.eclipse.jface.action.Action.runWithEvent(Action.java:996)
      at org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection
(ActionContributionItem.java:538)
      at org.eclipse.jface.action.ActionContributionItem.access$2
(ActionContributionItem.java:488)
      at org.eclipse.jface.action.ActionContributionItem$6.handleEvent
(ActionContributionItem.java:441)
      at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)
      at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:843)
      at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3080)
      at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2713)
      at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1699)
      at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1663)
      at org.eclipse.ui.internal.Workbench.createAndRunWorkbench
(Workbench.java:367)
      at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:143)
      at org.eclipse.ui.internal.ide.IDEApplication.run
(IDEApplication.java:103)
      at org.eclipse.core.internal.runtime.PlatformActivator$1.run
(PlatformActivator.java:226)
      at org.eclipse.core.runtime.adaptor.EclipseStarter.run
(EclipseStarter.java:376)
      at org.eclipse.core.runtime.adaptor.EclipseStarter.run
(EclipseStarter.java:163)
      at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
      at sun.reflect.NativeMethodAccessorImpl.invoke
(NativeMethodAccessorImpl.java:85)
      at sun.reflect.NativeMethodAccessorImpl.invoke
(NativeMethodAccessorImpl.java:58)
      at sun.reflect.DelegatingMethodAccessorImpl.invoke
(DelegatingMethodAccessorImpl.java:60)
      at java.lang.reflect.Method.invoke(Method.java:391)
      at org.eclipse.core.launcher.Main.invokeFramework(Main.java:334)
      at org.eclipse.core.launcher.Main.basicRun(Main.java:278)
      at org.eclipse.core.launcher.Main.run(Main.java:973)
      at org.eclipse.core.launcher.Main.main(Main.java:948)

I'm not sure if this is a J2EE or Web services problem.
Actually, I think this issue may be more general than I originally anticipated.
If I ensure that I start with an EAR containing app client and Web project, the
Web Service wizard still fails after clicking Next on the Web Service Client 
Test page but with a slightly different exception:

IWAB0014E Unexpected exception occured.
  null
      java.lang.NullPointerException
      at 
org.eclipse.jst.j2ee.internal.earcreation.UtilityJARInEARProjectCommand.execute
(UtilityJARInEARProjectCommand.java:82)
      at 
org.eclipse.jst.ws.internal.consumption.ui.widgets.test.AddModuleDependenciesCo
mmand.addJavaProjectAsUtilityJar(AddModuleDependenciesCommand.java:122)
      at 
org.eclipse.jst.ws.internal.consumption.ui.widgets.test.AddModuleDependenciesCo
mmand.execute(AddModuleDependenciesCommand.java:105)
      at 
org.eclipse.wst.command.internal.env.core.fragment.CommandFragmentEngine.runCom
mand(CommandFragmentEngine.java:335)
      at 
org.eclipse.wst.command.internal.env.core.fragment.CommandFragmentEngine.visitT
op(CommandFragmentEngine.java:301)
      at 
org.eclipse.wst.command.internal.env.core.fragment.CommandFragmentEngine.moveFo
rwardToNextStop(CommandFragmentEngine.java:217)
      at 
org.eclipse.wst.command.internal.env.ui.widgets.SimpleCommandEngineManager$4.ru
n(SimpleCommandEngineManager.java:208)
      at org.eclipse.jface.operation.ModalContext.runInCurrentThread
(ModalContext.java:346)
      at org.eclipse.jface.operation.ModalContext.run(ModalContext.java:291)
      at org.eclipse.jface.wizard.WizardDialog.run(WizardDialog.java:830)
      at 
org.eclipse.wst.command.internal.env.ui.widgets.SimpleCommandEngineManager.runF
orwardToNextStop(SimpleCommandEngineManager.java:177)
      at 
org.eclipse.wst.command.internal.env.ui.widgets.WizardPageManager.runForwardToN
extStop(WizardPageManager.java:80)
      at 
org.eclipse.wst.command.internal.env.ui.widgets.WizardPageManager.performFinish
(WizardPageManager.java:220)
      at 
org.eclipse.wst.command.internal.env.ui.widgets.DynamicWizard.performFinish
(DynamicWizard.java:336)
      at org.eclipse.jface.wizard.WizardDialog.finishPressed
(WizardDialog.java:676)
      at org.eclipse.jface.wizard.WizardDialog.buttonPressed
(WizardDialog.java:349)
      at org.eclipse.jface.dialogs.Dialog$2.widgetSelected(Dialog.java:556)
      at org.eclipse.swt.widgets.TypedListener.handleEvent
(TypedListener.java:90)
      at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)
      at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:843)
      at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3080)
      at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2713)
      at org.eclipse.jface.window.Window.runEventLoop(Window.java:809)
      at org.eclipse.jface.window.Window.open(Window.java:787)
      at org.eclipse.ui.actions.NewWizardAction.run(NewWizardAction.java:181)
      at org.eclipse.ui.actions.NewWizardDropDownAction.run
(NewWizardDropDownAction.java:174)
      at org.eclipse.jface.action.Action.runWithEvent(Action.java:996)
      at org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection
(ActionContributionItem.java:538)
      at org.eclipse.jface.action.ActionContributionItem.access$2
(ActionContributionItem.java:488)
      at org.eclipse.jface.action.ActionContributionItem$6.handleEvent
(ActionContributionItem.java:441)
      at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)
      at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:843)
      at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3080)
      at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2713)
      at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1699)
      at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1663)
      at org.eclipse.ui.internal.Workbench.createAndRunWorkbench
(Workbench.java:367)
      at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:143)
      at org.eclipse.ui.internal.ide.IDEApplication.run
(IDEApplication.java:103)
      at org.eclipse.core.internal.runtime.PlatformActivator$1.run
(PlatformActivator.java:226)
      at org.eclipse.core.runtime.adaptor.EclipseStarter.run
(EclipseStarter.java:376)
      at org.eclipse.core.runtime.adaptor.EclipseStarter.run
(EclipseStarter.java:163)
      at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
      at sun.reflect.NativeMethodAccessorImpl.invoke
(NativeMethodAccessorImpl.java:85)
      at sun.reflect.NativeMethodAccessorImpl.invoke
(NativeMethodAccessorImpl.java:58)
      at sun.reflect.DelegatingMethodAccessorImpl.invoke
(DelegatingMethodAccessorImpl.java:60)
      at java.lang.reflect.Method.invoke(Method.java:391)
      at org.eclipse.core.launcher.Main.invokeFramework(Main.java:334)
      at org.eclipse.core.launcher.Main.basicRun(Main.java:278)
      at org.eclipse.core.launcher.Main.run(Main.java:973)
      at org.eclipse.core.launcher.Main.main(Main.java:948)

Could it be the attempt to add the Sample JSP's Web component (JSP project)
that is causing the real error?
I got a similar problem when creating an EJB client when exiting at the Web 
service client test page:

IWAB0014E Unexpected exception occured.
  null
      java.lang.NullPointerException
      at 
org.eclipse.jst.j2ee.internal.earcreation.UtilityJARInEARProjectCommand.execute
(UtilityJARInEARProjectCommand.java:82)
      at 
org.eclipse.jst.ws.internal.consumption.ui.widgets.test.AddModuleDependenciesCom
mand.addJavaProjectAsUtilityJar(AddModuleDependenciesCommand.java:122)
      at 
org.eclipse.jst.ws.internal.consumption.ui.widgets.test.AddModuleDependenciesCom
mand.execute(AddModuleDependenciesCommand.java:105)
      at 
org.eclipse.wst.command.internal.env.core.fragment.CommandFragmentEngine.runComm
and(CommandFragmentEngine.java:335)
      at 
org.eclipse.wst.command.internal.env.core.fragment.CommandFragmentEngine.visitTo
p(CommandFragmentEngine.java:301)
      at 
org.eclipse.wst.command.internal.env.core.fragment.CommandFragmentEngine.moveFor
wardToNextStop(CommandFragmentEngine.java:217)
      at 
org.eclipse.wst.command.internal.env.ui.widgets.SimpleCommandEngineManager$4.run
(SimpleCommandEngineManager.java:208)
      at org.eclipse.jface.operation.ModalContext.runInCurrentThread
(ModalContext.java:346)
      at org.eclipse.jface.operation.ModalContext.run(ModalContext.java:291)
      at org.eclipse.jface.wizard.WizardDialog.run(WizardDialog.java:830)
      at 
org.eclipse.wst.command.internal.env.ui.widgets.SimpleCommandEngineManager.runFo
rwardToNextStop(SimpleCommandEngineManager.java:177)
      at 
org.eclipse.wst.command.internal.env.ui.widgets.WizardPageManager.runForwardToNe
xtStop(WizardPageManager.java:80)
      at 
org.eclipse.wst.command.internal.env.ui.widgets.WizardPageManager.performFinish
(WizardPageManager.java:220)
      at 
org.eclipse.wst.command.internal.env.ui.widgets.DynamicWizard.performFinish
(DynamicWizard.java:336)
      at org.eclipse.jface.wizard.WizardDialog.finishPressed
(WizardDialog.java:676)
      at org.eclipse.jface.wizard.WizardDialog.buttonPressed
(WizardDialog.java:349)
      at org.eclipse.jface.dialogs.Dialog$2.widgetSelected(Dialog.java:556)
      at org.eclipse.swt.widgets.TypedListener.handleEvent
(TypedListener.java:90)
      at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)
      at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:843)
      at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3080)
      at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2713)
      at org.eclipse.jface.window.Window.runEventLoop(Window.java:809)
      at org.eclipse.jface.window.Window.open(Window.java:787)
      at org.eclipse.ui.actions.NewWizardAction.run(NewWizardAction.java:181)
      at org.eclipse.jface.action.Action.runWithEvent(Action.java:996)
      at org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection
(ActionContributionItem.java:538)
      at org.eclipse.jface.action.ActionContributionItem.access$2
(ActionContributionItem.java:488)
      at org.eclipse.jface.action.ActionContributionItem$5.handleEvent
(ActionContributionItem.java:400)
      at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)
      at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:843)
      at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3080)
      at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2713)
      at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1699)
      at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1663)
      at org.eclipse.ui.internal.Workbench.createAndRunWorkbench
(Workbench.java:367)
      at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:143)
      at org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:103)
      at org.eclipse.core.internal.runtime.PlatformActivator$1.run
(PlatformActivator.java:226)
      at org.eclipse.core.runtime.adaptor.EclipseStarter.run
(EclipseStarter.java:376)
      at org.eclipse.core.runtime.adaptor.EclipseStarter.run
(EclipseStarter.java:163)
      at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
      at sun.reflect.NativeMethodAccessorImpl.invoke
(NativeMethodAccessorImpl.java:85)
      at sun.reflect.NativeMethodAccessorImpl.invoke
(NativeMethodAccessorImpl.java:58)
      at sun.reflect.DelegatingMethodAccessorImpl.invoke
(DelegatingMethodAccessorImpl.java:60)
      at java.lang.reflect.Method.invoke(Method.java:391)
      at org.eclipse.core.launcher.Main.invokeFramework(Main.java:334)
      at org.eclipse.core.launcher.Main.basicRun(Main.java:278)
      at org.eclipse.core.launcher.Main.run(Main.java:973)
      at org.eclipse.core.launcher.Main.main(Main.java:948)

Hi Gil,  since this is in the test code can you have a look at it.  Thanks.
Created attachment 26017
patch for consumption
Created attachment 26018
patch for creation
Created attachment 26019
patch for ws
I have tested this problem with the EJB example and it appeared that 
there was a problem in the result pane of the sample due to
the fact that there were no was client generated classes. 

The appclient scenario would not let me onto the test page for some reason.
so if you could try these patches and see if it fixes the problem. If not we 
may need to sit down and go through unworking scenarios together.

 
Created attachment 26047
cons ui patch
Created attachment 26048
create ui patch
Created attachment 26049
ws patch
Created attachment 26112
restarting server added
the sample project that is created is now added to the correct EAR and the 
dependencies are added respectively
Patch committed and released as v20050823_1620.  Please leave the defect on the 
Assign state if you need to have patches committed for a defect.  It won't show 
up on our query for defects to commit if you moving it to Resolved state too 
early.
Verified this has been fixed
This change is a bulk update of all _un_targeted, fixed, resolved bugs upon release of M5. This particular bug _might_ have been fixed earlier than M5. (Feel free to correct). 


Closed.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="105551" />
    <CreationDate amount="2005-07-29 00:38:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse Foundation" />
    <Product amount="z_Archived" />
    <component amount="VE" />
    <Version amount="unspecified" />
    <rep_platform amount="PC" />
    <op_sys amount="Linux" />
    <priority amount="P1" />
    <bug_severity amount="critical" />
    <Summery>Editing RCP Mail causes codegen to write syntax errors</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="8">
        <Lines>
          <Line>1) Create an RCP app using the RCP Mail template</Line>
          <Line>2) Open the mail message view in the visual editor</Line>
          <Line>3) Shift-click to select both the "banner" and "text" objects at the same time</Line>
          <Line>4) Hit "&lt;del&gt; to delete these controls</Line>
          <Line />
          <Line>The code in the source editor will now have syntax errors and be severely mangled.</Line>
          <Line>5) Fix the syntax errors</Line>
          <Line>6) Drop a Composite inside the "top" Composite</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>1) Create an RCP app using the RCP Mail template
2) Open the mail message view in the visual editor
3) Shift-click to select both the "banner" and "text" objects at the same time
4) Hit "&lt;del&gt; to delete these controls

The code in the source editor will now have syntax errors and be severely mangled.
5) Fix the syntax errors
6) Drop a Composite inside the "top" Composite

More syntax errors....
This can be recreated by just deleting the banner container in the RCPMail View
class. The problem is happening because for some reason the allocation of some
of the labels have the composite instance reference removed from their
allocations. This is happening in the commands which run when delete key is
pressed. Would need the help of Peter to determine why this is being done so,
and what can be done about it.
Released CodegenUtil. Basically container and children were being removed and
the commands removed all references between them. When one label was removed
from source, others were asked to regenerate and since the references were
removed, it NPEd and source went bad.
verified in build M20050824
closing</WithStack>
    <WithOutStack>1) Create an RCP app using the RCP Mail template
2) Open the mail message view in the visual editor
3) Shift-click to select both the "banner" and "text" objects at the same time
4) Hit "&lt;del&gt; to delete these controls

The code in the source editor will now have syntax errors and be severely mangled.
5) Fix the syntax errors
6) Drop a Composite inside the "top" Composite

More syntax errors....
This can be recreated by just deleting the banner container in the RCPMail View
class. The problem is happening because for some reason the allocation of some
of the labels have the composite instance reference removed from their
allocations. This is happening in the commands which run when delete key is
pressed. Would need the help of Peter to determine why this is being done so,
and what can be done about it.
Released CodegenUtil. Basically container and children were being removed and
the commands removed all references between them. When one label was removed
from source, others were asked to regenerate and since the references were
removed, it NPEd and source went bad.
verified in build M20050824
closing</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="105552" />
    <CreationDate amount="2005-07-29 00:58:00 -0400" />
    <DupId amount="" />
    <classification amount="DataTools" />
    <Product amount="Data Tools" />
    <component amount="Connectivity" />
    <Version amount="1.5" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P4" />
    <bug_severity amount="enhancement" />
    <Summery>Derby location should be prepopulated if Derby plugin is installed</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="3">
        <Lines>
          <Line>1. Install DTP but not Derby. Start Eclipse. Open the Data Connectivity view, try to add a new Derby connection, and notice that you don't have the plug-in installed as the location is not prepopulated. Close Eclipse. Install Derby. Start Eclipse with the same workspace. Attempt to create a Derby connection. The location is still not populated.</Line>
          <Line />
          <Line>2. Install DTP and Derby. Start Eclipse. Open the Data Connectivity view. Close Eclipse. Remove Derby. Start Eclipse with the same workspace. In the Data Connectivity view the Derby plug-in location is still specified even though it is no longer available.</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>When configuring a new db connection you must enter the location of the db jar.
In the case of Derby there is a plugin. If the plugin is installed the tools
should detect this (they can query the platform for the plugin) and prepopulate
the location with that of derby.jar from the plugin.
Lawrence,

May be I don't understand the exact scenario for the enhancement. Since we did 
not licnese Derby db and JDBC driver in WTP, we also ask user to manually down 
load this from Apache, therefore user can install (unzip to anywhere they 
wish), there is no util API or registry base that I know of, which would 
support this. Do you?

Der Ping
The Derby project has made an Eclipse plugin available for Derby. (See
http://db.apache.org/derby/derby_downloads.html). What I'm suggesting is that if
this Derby plugin is installed the new db connection wizard should by able to
detect that it is installed (the plugin registry can be queried) and prepopulate
the derby location with the location in the plugin. 

I am suggesting that the field be prepopulated in this scenario, not for other
Derby installations. This may be a good way to push other DB vendors to make
Eclipse plugins available for the DB's as well (where it makes sense).
Part of a mass update. Based on 9/22/2005 development review meeting, it's 
determined this was an open bug/enhancement with tartget mistakenly set to M8. 
Since this will not be in M8, I am changing to "unspecified". 

If this is an error, please correct (for example the bug really has been fixed
in M8, change back to M8, and "fixed".)

Larry,

Please verify if this is fixed in WTP V15.

Thanks,
closing out as "won't fix" since the RDB project is quiescent. 

If you still need these functions, please work with and open enhancement requests with the DTP project. 


Reopening and targetting to DTP. I'll admit that I haven't checked if this has been fixed but Larry never commented after Der Ping's request. I think this is a nice usability feature that will help new users. Of course, if this no longer makes sense please feel free to comment that it doesn't make sense and resolve it as invalid.
Larry (Dunnell), what do you think about this one?
I don't see any reason not to make this change.  The only complication I see has more to do with distributing JDBC drivers in plug-ins.  If the user updates their Derby plug-in then the version number will be different so that the path to the driver will no longer be valid for existing connections.  We could address this by placing a "repair path" button in the connection properties UI for Derby so that it can rediscover the location of the driver.
This should be doable for Ganymede once we get BZ 201682 fixed
Created attachment 88349
Patch adds new DriverValuesProvider option for drivers...

Hey Larry...

This is a large patch, but it contains all the changes I've made up to this point for the DriverValuesProvider fix. Would you please review it?

Couple of things to note...

Priority has now been added to the driverTemplateOverride extension, and the override with the highest priority for a given driver template is the one that gets picked up. 

The DerbyDriverValuesProvider class checks for the org.apache.derby.core plug-in, which is available at the Apache Derby site (wraps 10.3 drivers I believe). If it's present, it will automatically create default drivers for the three Derby drivers (10.0, 10.1, 10.2) just as an example of this functionality. Obviously if there's serious problems with the 10.3 driver accessing 10.0 databases, we don't want to go that route. It also shows updating the Default driver definition name with the version value (10.0, etc). 

So let me know if this does what you think it ought to. 

Thanks
--Fitz
Created attachment 88437
Version 2 of patch with defaultDefinitionName

Update to patch that includes the defaultDefinitionName attribute for driver templates, driver template overrides, and driver values provider classes.
I tested all the new attributes.  They all work as expected.  Good job!
Delivered to 1.6 stream. Should appear in tomorrow's build. This includes tweaks to the Derby drivers (Embedded &amp; Client) to pick up the jar list from the plug-in available from the Derby project (See http://db.apache.org/derby/derby_downloads.html).

If you insert the jar into your installation before starting up a new workspace, it should create the driver definitions automatically. If you create them by hand after installing the plug-in and restarting the workbench, it should pick up the correct paths to the derby.jar and derbyclient.jar. 

Larry, can you take one more look at this just to make sure things are copacetic?
Everything is working including the Derby driver locating.
Thanks Larry. Larry M, do you want to give this a shot with today's DTP 1.6 build? If you drop the org.apache.derby plug-in into the installation, it should find it and react accordingly. 
Brian, this works well if I drop the Derby plug-in into my Eclipse installation and start a new workspace. However the following two scenarios both fail:

1. Install DTP but not Derby. Start Eclipse. Open the Data Connectivity view, try to add a new Derby connection, and notice that you don't have the plug-in installed as the location is not prepopulated. Close Eclipse. Install Derby. Start Eclipse with the same workspace. Attempt to create a Derby connection. The location is still not populated.

2. Install DTP and Derby. Start Eclipse. Open the Data Connectivity view. Close Eclipse. Remove Derby. Start Eclipse with the same workspace. In the Data Connectivity view the Derby plug-in location is still specified even though it is no longer available.

I think scenario 1 is a typical usage scenario as people often install additional functionality after they've already been working with a workspace. I think scenario 2 will be more relevant if Eclipse someday supports stopping bundles.

I'd like to emphasize that I'm very happy to see progress on this request and the function I've seen working is exactly what I intended when I opened this bug. I think scenario 1 needs to be supported before this can be closed.
Ok I'll take a look at these use cases. I thought that I had #1 working. #2 is a completely different case and I'll have to think about it. It may not be doable in the Ganymede timeframe, but I'll see what I can do.
Ok. I think I see what's going on, but it's working as designed.

The issue is this... We only create default driver definitions once -- when the workspace is being created. This ensures that if folks don't want default drivers to be recreated after the first time, they can delete them and they won't magically (and annoyingly, if you wanted them deleted) reappear.

That said, if you create your workspace, close it, add the Apache plug-in, then restart it, as you say in your steps... You should be able to go through the steps to create a new derby driver (client or embedded) and have the jar path populate correctly.

The workaround is to delete a file in the DTP metadata directory...
   &lt;workspacedir&gt;\.metadata\.plugins\org.eclipse.datatools.connectivity

The file is: DEFAULT_DRIVERS_CREATED.txt

This just serves as a marker to indicate that we have already create default drivers once, so don't do it again. If you delete that file after adding the Apache Derby file, it will create default drivers again.

So this is working as designed. 

If you'd like to create a new BZ entry for the defaut driver creation issue, we can look at it for M6. I can certainly see having a preference somewhere to allow folks to reset default drivers (basically delete the DEFAULT_DRIVERS_CREATED.txt file and re-run the default creation process).

Sorry if that's not what you're looking for as an answer.
--Fitz
Thanks for the detailed explanation Fitz. As I said in comment #16, I could not get the following to work. 

"That said, if you create your workspace, close it, add the Apache plug-in, then
restart it, as you say in your steps... You should be able to go through the
steps to create a new derby driver (client or embedded) and have the jar path
populate correctly."

I don't think the workaround you described is a good long term workaround for Eclipse users as I don't think we should force Eclipse users to delete files in the .metadata directory manually. DTP should handle the addition (and removal) of the Derby plug-in on its own. I also think that scenario 1 is a very common use case. I commonly install function into Eclipse as I need it. For example, I only install subclipse if and when I need to access a subversion repository.

I understand your concern with continually populating the defaults after a user has deleted them. As an alternate approach, how about saving metadata if the user changes or removes the defaults? (This is similar to how user preferences are saved on a project only if the user modifies the preferences.) In this case, if the user has not made a change the default value will be displayed. The default value will be empty if the Derby plug-in is not installed and the location of the jars in the Derby plug-in if it is installed.

Please let me know if you think this is a new request and I will open a new bug.


Hi Lawrence... Yeah, I see your point. I think we need to spin this off into a separate BZ entry and consider it. 

That said, you're still unable to see the jar be pre-populated after restarting and trying to create a new Derby driver? 

Can I ask if you're doing it from the preference page or the driver dialog available from the new connection profile wizard (the drop-down list with the "..." button beside it)? That may be the difference. If that's the case, we do have a bug here and will need to resolve it for 1.6 M6.


--Fitz
I'll open two new bugs for my two requirements.

As for the current functionality, I'm seeing different results if the Derby plug-in is there before the creation of the workspace or if it's added afterwards.

If the Derby plug-in is installed before the workspace is created the following drivers are predefined in both the preference page and through the Data Connectivity View's connection profile wizard:
Derby Embedded JDBC Driver 10.0 Default
Derby Client JDBC Driver 10.1 Default
Derby Embedded JDBC Driver 10.1 Default
Derby Client JDBC Driver 10.2 Default
Derby Embedded JDBC Driver 10.2 Default

If the Derby plug-in is installed after the workspace is created there are no drivers predefined. I can however define a new driver and have the location of the Derby jars automatically be picked up.

Why is this behaviour inconsistent?
(In reply to comment #21)
&gt; I'll open two new bugs for my two requirements.
&gt; As for the current functionality, I'm seeing different results if the Derby
&gt; plug-in is there before the creation of the workspace or if it's added
&gt; afterwards.
&gt; If the Derby plug-in is installed before the workspace is created the following
&gt; drivers are predefined in both the preference page and through the Data
&gt; Connectivity View's connection profile wizard:
&gt; Derby Embedded JDBC Driver 10.0 Default
&gt; Derby Client JDBC Driver 10.1 Default
&gt; Derby Embedded JDBC Driver 10.1 Default
&gt; Derby Client JDBC Driver 10.2 Default
&gt; Derby Embedded JDBC Driver 10.2 Default
&gt; If the Derby plug-in is installed after the workspace is created there are no
&gt; drivers predefined. I can however define a new driver and have the location of
&gt; the Derby jars automatically be picked up.
&gt; Why is this behaviour inconsistent?

Cool on the bugs. We'll see what we can take care of.

And what you're seeing is working as designed. Default drivers are created once across the board for the workspace. When you install the plug-in after workspace creation, it doesn't go back and do the default driver creation again. But DTP is aware that the plug-in is there and reacts by pre-populating the jar list accordingly when the user manually creates a new Derby driver.

This goes back to the conversation earlier about when to create default drivers. 

What we might be able to do... I like the idea of stashing if individual drivers have been created by default in the past, basically marking that they were created. Then if the plug-ins in the workbench change, it could check the ones that weren't created to see if they need to be created.

But we'd also need a preference somewhere to allow folks to shut off this behavior if they want to do it manually.


I've created bug 218011 and bug 218014 to track the two open issues.
Instead of a preference (I think we have more than enough of those) how about allowing the user to simply edit or remove and create their own definition. Once they create their own definition DTP should not overwrite it or attempt to create the default definition again.
Created attachment 89090
Snippet for locating jar in plug-in.
Closing bugs</WithStack>
    <WithOutStack>When configuring a new db connection you must enter the location of the db jar.
In the case of Derby there is a plugin. If the plugin is installed the tools
should detect this (they can query the platform for the plugin) and prepopulate
the location with that of derby.jar from the plugin.
Lawrence,

May be I don't understand the exact scenario for the enhancement. Since we did 
not licnese Derby db and JDBC driver in WTP, we also ask user to manually down 
load this from Apache, therefore user can install (unzip to anywhere they 
wish), there is no util API or registry base that I know of, which would 
support this. Do you?

Der Ping
The Derby project has made an Eclipse plugin available for Derby. (See
http://db.apache.org/derby/derby_downloads.html). What I'm suggesting is that if
this Derby plugin is installed the new db connection wizard should by able to
detect that it is installed (the plugin registry can be queried) and prepopulate
the derby location with the location in the plugin. 

I am suggesting that the field be prepopulated in this scenario, not for other
Derby installations. This may be a good way to push other DB vendors to make
Eclipse plugins available for the DB's as well (where it makes sense).
Part of a mass update. Based on 9/22/2005 development review meeting, it's 
determined this was an open bug/enhancement with tartget mistakenly set to M8. 
Since this will not be in M8, I am changing to "unspecified". 

If this is an error, please correct (for example the bug really has been fixed
in M8, change back to M8, and "fixed".)

Larry,

Please verify if this is fixed in WTP V15.

Thanks,
closing out as "won't fix" since the RDB project is quiescent. 

If you still need these functions, please work with and open enhancement requests with the DTP project. 


Reopening and targetting to DTP. I'll admit that I haven't checked if this has been fixed but Larry never commented after Der Ping's request. I think this is a nice usability feature that will help new users. Of course, if this no longer makes sense please feel free to comment that it doesn't make sense and resolve it as invalid.
Larry (Dunnell), what do you think about this one?
I don't see any reason not to make this change.  The only complication I see has more to do with distributing JDBC drivers in plug-ins.  If the user updates their Derby plug-in then the version number will be different so that the path to the driver will no longer be valid for existing connections.  We could address this by placing a "repair path" button in the connection properties UI for Derby so that it can rediscover the location of the driver.
This should be doable for Ganymede once we get BZ 201682 fixed
Created attachment 88349
Patch adds new DriverValuesProvider option for drivers...

Hey Larry...

This is a large patch, but it contains all the changes I've made up to this point for the DriverValuesProvider fix. Would you please review it?

Couple of things to note...

Priority has now been added to the driverTemplateOverride extension, and the override with the highest priority for a given driver template is the one that gets picked up. 

The DerbyDriverValuesProvider class checks for the org.apache.derby.core plug-in, which is available at the Apache Derby site (wraps 10.3 drivers I believe). If it's present, it will automatically create default drivers for the three Derby drivers (10.0, 10.1, 10.2) just as an example of this functionality. Obviously if there's serious problems with the 10.3 driver accessing 10.0 databases, we don't want to go that route. It also shows updating the Default driver definition name with the version value (10.0, etc). 

So let me know if this does what you think it ought to. 

Thanks
--Fitz
Created attachment 88437
Version 2 of patch with defaultDefinitionName

Update to patch that includes the defaultDefinitionName attribute for driver templates, driver template overrides, and driver values provider classes.
I tested all the new attributes.  They all work as expected.  Good job!
Delivered to 1.6 stream. Should appear in tomorrow's build. This includes tweaks to the Derby drivers (Embedded &amp; Client) to pick up the jar list from the plug-in available from the Derby project (See http://db.apache.org/derby/derby_downloads.html).

If you insert the jar into your installation before starting up a new workspace, it should create the driver definitions automatically. If you create them by hand after installing the plug-in and restarting the workbench, it should pick up the correct paths to the derby.jar and derbyclient.jar. 

Larry, can you take one more look at this just to make sure things are copacetic?
Everything is working including the Derby driver locating.
Thanks Larry. Larry M, do you want to give this a shot with today's DTP 1.6 build? If you drop the org.apache.derby plug-in into the installation, it should find it and react accordingly. 
Brian, this works well if I drop the Derby plug-in into my Eclipse installation and start a new workspace. However the following two scenarios both fail:

1. Install DTP but not Derby. Start Eclipse. Open the Data Connectivity view, try to add a new Derby connection, and notice that you don't have the plug-in installed as the location is not prepopulated. Close Eclipse. Install Derby. Start Eclipse with the same workspace. Attempt to create a Derby connection. The location is still not populated.

2. Install DTP and Derby. Start Eclipse. Open the Data Connectivity view. Close Eclipse. Remove Derby. Start Eclipse with the same workspace. In the Data Connectivity view the Derby plug-in location is still specified even though it is no longer available.

I think scenario 1 is a typical usage scenario as people often install additional functionality after they've already been working with a workspace. I think scenario 2 will be more relevant if Eclipse someday supports stopping bundles.

I'd like to emphasize that I'm very happy to see progress on this request and the function I've seen working is exactly what I intended when I opened this bug. I think scenario 1 needs to be supported before this can be closed.
Ok I'll take a look at these use cases. I thought that I had #1 working. #2 is a completely different case and I'll have to think about it. It may not be doable in the Ganymede timeframe, but I'll see what I can do.
Ok. I think I see what's going on, but it's working as designed.

The issue is this... We only create default driver definitions once -- when the workspace is being created. This ensures that if folks don't want default drivers to be recreated after the first time, they can delete them and they won't magically (and annoyingly, if you wanted them deleted) reappear.

That said, if you create your workspace, close it, add the Apache plug-in, then restart it, as you say in your steps... You should be able to go through the steps to create a new derby driver (client or embedded) and have the jar path populate correctly.

The workaround is to delete a file in the DTP metadata directory...
   &lt;workspacedir&gt;\.metadata\.plugins\org.eclipse.datatools.connectivity

The file is: DEFAULT_DRIVERS_CREATED.txt

This just serves as a marker to indicate that we have already create default drivers once, so don't do it again. If you delete that file after adding the Apache Derby file, it will create default drivers again.

So this is working as designed. 

If you'd like to create a new BZ entry for the defaut driver creation issue, we can look at it for M6. I can certainly see having a preference somewhere to allow folks to reset default drivers (basically delete the DEFAULT_DRIVERS_CREATED.txt file and re-run the default creation process).

Sorry if that's not what you're looking for as an answer.
--Fitz
Thanks for the detailed explanation Fitz. As I said in comment #16, I could not get the following to work. 

"That said, if you create your workspace, close it, add the Apache plug-in, then
restart it, as you say in your steps... You should be able to go through the
steps to create a new derby driver (client or embedded) and have the jar path
populate correctly."

I don't think the workaround you described is a good long term workaround for Eclipse users as I don't think we should force Eclipse users to delete files in the .metadata directory manually. DTP should handle the addition (and removal) of the Derby plug-in on its own. I also think that scenario 1 is a very common use case. I commonly install function into Eclipse as I need it. For example, I only install subclipse if and when I need to access a subversion repository.

I understand your concern with continually populating the defaults after a user has deleted them. As an alternate approach, how about saving metadata if the user changes or removes the defaults? (This is similar to how user preferences are saved on a project only if the user modifies the preferences.) In this case, if the user has not made a change the default value will be displayed. The default value will be empty if the Derby plug-in is not installed and the location of the jars in the Derby plug-in if it is installed.

Please let me know if you think this is a new request and I will open a new bug.


Hi Lawrence... Yeah, I see your point. I think we need to spin this off into a separate BZ entry and consider it. 

That said, you're still unable to see the jar be pre-populated after restarting and trying to create a new Derby driver? 

Can I ask if you're doing it from the preference page or the driver dialog available from the new connection profile wizard (the drop-down list with the "..." button beside it)? That may be the difference. If that's the case, we do have a bug here and will need to resolve it for 1.6 M6.


--Fitz
I'll open two new bugs for my two requirements.

As for the current functionality, I'm seeing different results if the Derby plug-in is there before the creation of the workspace or if it's added afterwards.

If the Derby plug-in is installed before the workspace is created the following drivers are predefined in both the preference page and through the Data Connectivity View's connection profile wizard:
Derby Embedded JDBC Driver 10.0 Default
Derby Client JDBC Driver 10.1 Default
Derby Embedded JDBC Driver 10.1 Default
Derby Client JDBC Driver 10.2 Default
Derby Embedded JDBC Driver 10.2 Default

If the Derby plug-in is installed after the workspace is created there are no drivers predefined. I can however define a new driver and have the location of the Derby jars automatically be picked up.

Why is this behaviour inconsistent?
(In reply to comment #21)
&gt; I'll open two new bugs for my two requirements.
&gt; As for the current functionality, I'm seeing different results if the Derby
&gt; plug-in is there before the creation of the workspace or if it's added
&gt; afterwards.
&gt; If the Derby plug-in is installed before the workspace is created the following
&gt; drivers are predefined in both the preference page and through the Data
&gt; Connectivity View's connection profile wizard:
&gt; Derby Embedded JDBC Driver 10.0 Default
&gt; Derby Client JDBC Driver 10.1 Default
&gt; Derby Embedded JDBC Driver 10.1 Default
&gt; Derby Client JDBC Driver 10.2 Default
&gt; Derby Embedded JDBC Driver 10.2 Default
&gt; If the Derby plug-in is installed after the workspace is created there are no
&gt; drivers predefined. I can however define a new driver and have the location of
&gt; the Derby jars automatically be picked up.
&gt; Why is this behaviour inconsistent?

Cool on the bugs. We'll see what we can take care of.

And what you're seeing is working as designed. Default drivers are created once across the board for the workspace. When you install the plug-in after workspace creation, it doesn't go back and do the default driver creation again. But DTP is aware that the plug-in is there and reacts by pre-populating the jar list accordingly when the user manually creates a new Derby driver.

This goes back to the conversation earlier about when to create default drivers. 

What we might be able to do... I like the idea of stashing if individual drivers have been created by default in the past, basically marking that they were created. Then if the plug-ins in the workbench change, it could check the ones that weren't created to see if they need to be created.

But we'd also need a preference somewhere to allow folks to shut off this behavior if they want to do it manually.


I've created bug 218011 and bug 218014 to track the two open issues.
Instead of a preference (I think we have more than enough of those) how about allowing the user to simply edit or remove and create their own definition. Once they create their own definition DTP should not overwrite it or attempt to create the default definition again.
Created attachment 89090
Snippet for locating jar in plug-in.
Closing bugs</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="105553" />
    <CreationDate amount="2005-07-29 01:40:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="JDT" />
    <component amount="Core" />
    <Version amount="3.1" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Exception while retrieving /PROJECT/.classpath, will mark classpath as invalid</Summery>
    <Patches amount="0" />
    <Stacktraces amount="1">
      <Stacktrace timestamp="1437330562984">
        <Exception>java.io.IOException</Exception>
        <Reason>Bad format</Reason>
        <Frames>
          <Frame depth="0">org.eclipse.jdt.internal.core.JavaProject.decodeClasspath(JavaProject.java:812)</Frame>
          <Frame depth="1">org.eclipse.jdt.internal.core.JavaProject.readClasspathFile(JavaProject.java:2551)</Frame>
          <Frame depth="2">org.eclipse.jdt.internal.core.JavaProject.getRawClasspath(JavaProject.java:1845)</Frame>
          <Frame depth="3">org.eclipse.jdt.internal.core.JavaProject.getResolvedClasspath(JavaProject.java:1948)</Frame>
          <Frame depth="4">org.eclipse.jdt.internal.core.search.JavaSearchScope.add(JavaSearchScope.java:108)</Frame>
          <Frame depth="5">org.eclipse.jdt.internal.core.search.JavaWorkspaceScope.initialize(JavaWorkspaceScope.java:84)</Frame>
          <Frame depth="6">org.eclipse.jdt.internal.core.search.JavaSearchScope.&lt;init&gt;(JavaSearchScope.java:62)</Frame>
          <Frame depth="7">org.eclipse.jdt.internal.core.search.JavaSearchScope.&lt;init&gt;(JavaSearchScope.java:58)</Frame>
          <Frame depth="8">org.eclipse.jdt.internal.core.search.JavaWorkspaceScope.&lt;init&gt;(JavaWorkspaceScope.java:29)</Frame>
          <Frame depth="9">org.eclipse.jdt.internal.core.JavaModelManager.getWorkspaceScope(JavaModelManager.java:1421)</Frame>
          <Frame depth="10">org.eclipse.jdt.internal.core.search.BasicSearchEngine.createWorkspaceScope(BasicSearchEngine.java:157)</Frame>
          <Frame depth="11">org.eclipse.jdt.core.search.SearchEngine.createWorkspaceScope(SearchEngine.java:392)</Frame>
          <Frame depth="12">org.eclipse.jdt.core.JavaCore$1.run(JavaCore.java:2623)</Frame>
          <Frame depth="13">org.eclipse.core.internal.jobs.Worker.run(Worker.java:76)</Frame>
        </Frames>
      </Stacktrace>
    </Stacktraces>
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="WORKSFORME" />
    <WithStack>The project cannot find exactly the classpath, replys with error Exception while
retrieving /PROJECT/.classpath, will mark classpath as invalid, this is the
output log:

!ENTRY org.eclipse.core.runtime 2 2 2005-07-29 07:26:16.878
!MESSAGE Job found still running after platform shutdown.  Jobs should be
canceled by the plugin that scheduled them during shutdown:
org.eclipse.update.internal.scheduler.AutomaticUpdateJob
!SESSION 2005-07-29 07:26:18.10 ------------------------------------------------
eclipse.buildId=I20050627-1435
java.version=1.5.0_04
java.vendor=Sun Microsystems Inc.
BootLoader constants: OS=win32, ARCH=x86, WS=win32, NL=es_ES
Command-line arguments:  -os win32 -ws win32 -arch x86

!ENTRY org.eclipse.jdt.core 4 4 2005-07-29 07:26:26.472
!MESSAGE Exception while retrieving /PROJECT/.classpath, will mark classpath as
invalid
!STACK 0Exception while retrieving /PROJECT/.classpath, will mark classpath as
invalid
java.io.IOException: Bad format
	at org.eclipse.jdt.internal.core.JavaProject.decodeClasspath(JavaProject.java:812)
	at
org.eclipse.jdt.internal.core.JavaProject.readClasspathFile(JavaProject.java:2551)
	at org.eclipse.jdt.internal.core.JavaProject.getRawClasspath(JavaProject.java:1845)
	at
org.eclipse.jdt.internal.core.JavaProject.getResolvedClasspath(JavaProject.java:1948)
	at
org.eclipse.jdt.internal.core.search.JavaSearchScope.add(JavaSearchScope.java:108)
	at
org.eclipse.jdt.internal.core.search.JavaWorkspaceScope.initialize(JavaWorkspaceScope.java:84)
	at
org.eclipse.jdt.internal.core.search.JavaSearchScope.&lt;init&gt;(JavaSearchScope.java:62)
	at
org.eclipse.jdt.internal.core.search.JavaSearchScope.&lt;init&gt;(JavaSearchScope.java:58)
	at
org.eclipse.jdt.internal.core.search.JavaWorkspaceScope.&lt;init&gt;(JavaWorkspaceScope.java:29)
	at
org.eclipse.jdt.internal.core.JavaModelManager.getWorkspaceScope(JavaModelManager.java:1421)
	at
org.eclipse.jdt.internal.core.search.BasicSearchEngine.createWorkspaceScope(BasicSearchEngine.java:157)
	at
org.eclipse.jdt.core.search.SearchEngine.createWorkspaceScope(SearchEngine.java:392)
	at org.eclipse.jdt.core.JavaCore$1.run(JavaCore.java:2623)
	at org.eclipse.core.internal.jobs.Worker.run(Worker.java:76)
Could you please provide a test case?
I import an existing CVS project(it's a big project), putting in my .cvsignore,
.classpath file.
Then, the contents of the .classpath:

&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;classpath&gt;
	&lt;classpathentry kind="src" path=""/&gt;
	&lt;classpathentry exported="true" kind="con"
path="org.eclipse.jdt.launching.JRE_CONTAINER"/&gt;
	
	&lt;classpathentry kind="output" path=""/&gt;
&lt;/classpath&gt;

Simple no? It's very rarely, also fails with the same bug in version 3.0
Build path issue.
Cannot reproduce using 3.3 RC4</WithStack>
    <WithOutStack>The project cannot find exactly the classpath, replys with error Exception while
retrieving /PROJECT/.classpath, will mark classpath as invalid, this is the
output log:

!ENTRY org.eclipse.core.runtime 2 2 2005-07-29 07:26:16.878
!MESSAGE Job found still running after platform shutdown.  Jobs should be
canceled by the plugin that scheduled them during shutdown:
org.eclipse.update.internal.scheduler.AutomaticUpdateJob
!SESSION 2005-07-29 07:26:18.10 ------------------------------------------------
eclipse.buildId=I20050627-1435
java.version=1.5.0_04
java.vendor=Sun Microsystems Inc.
BootLoader constants: OS=win32, ARCH=x86, WS=win32, NL=es_ES
Command-line arguments:  -os win32 -ws win32 -arch x86

!ENTRY org.eclipse.jdt.core 4 4 2005-07-29 07:26:26.472
!MESSAGE Exception while retrieving /PROJECT/.classpath, will mark classpath as
invalid
!STACK 0Exception while retrieving /PROJECT/.classpath, will mark classpath as
invalid

Could you please provide a test case?
I import an existing CVS project(it's a big project), putting in my .cvsignore,
.classpath file.
Then, the contents of the .classpath:

&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;classpath&gt;
	&lt;classpathentry kind="src" path=""/&gt;
	&lt;classpathentry exported="true" kind="con"
path="org.eclipse.jdt.launching.JRE_CONTAINER"/&gt;
	
	&lt;classpathentry kind="output" path=""/&gt;
&lt;/classpath&gt;

Simple no? It's very rarely, also fails with the same bug in version 3.0
Build path issue.
Cannot reproduce using 3.3 RC4</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="105554" />
    <CreationDate amount="2005-07-29 03:07:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="Resources" />
    <Version amount="3.3" />
    <rep_platform amount="All" />
    <op_sys amount="Unix All" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>cyclic symbolic link causes java.lang.OutOfMemoryError: Java heap space</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="9">
      <source_code type="class">
        <location start="10859" end="11407" />
        <code>static class UniqueResourceId {
  private String names;
  private long modTime;
  private int type;
  public UniqueResourceId (String name, long modTime, int type) {
     this.name=name; this.modTime=modTime; this.type=type;
  }
  public boolean equals(Object other) {
    if (other instanceof UniqueResourceId) {
      UniqueResourceId o = (UniqueResourceId)other;
      return modTime==o.modTime &amp;&amp; type == o.type &amp;&amp; name.equals(o.name);
    }
    return false;
  }
  public int hashCode() {
    return name.hashCode(); //just hash the name
  }
}</code>
      </source_code>
      <source_code type="class">
        <location start="11408" end="11723" />
        <code>static class FreezableArrayList extends ArrayList {
    private boolean frozen=false;
    private int hashCode;
    public void freeze() {
        this.hashCode=super.hashCode();
        frozen=true;
    }
    public int hashCode() {
        if(frozen) return this.hashCode;
        return super.hashCode();
    }
}</code>
      </source_code>
      <source_code type="functiondef">
        <location start="11724" end="12111" />
        <code>Object computeUniqueFolderId(IContainer folder) {
    IResource[] children = folder.members();
    FreezableArrayList uuid = new FreezableArrayList(children.length);
    for(int i=0; i&lt;children.length; i++) {
        IResource c=children[i];
        uuid.add(new UniqueResourceId(c.getName(), 
             c.getLocalTimeStamp(), c.getType());
    }
    uuid.freeze();
    return uuid;
}</code>
      </source_code>
      <source_code type="assignment">
        <location start="12251" end="12292" />
        <code>String s = p.toFile().getCanonicalPath();</code>
      </source_code>
      <source_code type="assignment">
        <location start="12293" end="12326" />
        <code>String s1 = p.toFile().getPath();</code>
      </source_code>
      <source_code type="ifstatement">
        <location start="12327" end="12395" />
        <code>if (s1.length() &gt; s.length() &amp;&amp; s1.startsWith(s))
{
	return false;
}</code>
      </source_code>
      <source_code type="ifstatement">
        <location start="12396" end="12455" />
        <code>else if(!fVisitedList.contains(s)){
	fVisitedList.add(s);
}</code>
      </source_code>
      <source_code type="elsestatement">
        <location start="12454" end="12479" />
        <code>} else {
	return false;
}</code>
      </source_code>
      <source_code type="class">
        <location start="13261" end="13679" />
        <code>static class UIDFromList {
    private int hashCode;
    private List list;
    public UIDFromList(List l) { 
        this.list=l; this.hashCode=l.hashCode();
    }
    public int hashCode() {
        return this.hashCode;
    }
    public boolean equals(Object other) {
        if (other instanceof UIDFromList) {
            return this.list.equals(((UIDFromList)other).list);
        }
        return false;
    }
}</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="8">
      <Enumeration lines="2">
        <Lines>
          <Line>1) Must have trivial or no performance impact when no symbolic links are present.</Line>
          <Line>2) Must be solved in UnifiedTree, rather than in RefreshLocalVisitor. As mentioned earlier, all the current patches put the fix in RefreshLocalVisitor. However, if some other visitor walks over the UnifiedTree in this case, they will hit the same infinite recursion (DeleteVisitor and CopyVisitor being prominent examples).</Line>
        </Lines>
      </Enumeration>
      <Enumeration lines="9">
        <Lines>
          <Line>1.) In case of mutually recursive a symbolic links, refreshing on level 0 has</Line>
          <Line>a different result than refreshing on lower levels - lower levels reveal</Line>
          <Line>one level more of the recursive link loop, while refreshing on level 0</Line>
          <Line>reveals only the first one. This can be shown by refreshing on various</Line>
          <Line>levels in project test1.</Line>
          <Line />
          <Line>2.) There is one specific case where even non-recursive symbolic links show</Line>
          <Line>fewer duplicate resources now, than it was before the fix. Look at test6</Line>
          <Line>from the attachment to comment #40 for details.</Line>
        </Lines>
      </Enumeration>
      <Enumeration lines="7">
        <Lines>
          <Line>1) Why are the parentPath and childPath both inserted into pathPrefixHistory on each iteration? Won't we eventually find all loops if we only insert the childPath? I must be missing something, but this seems like we have double the necessary number of calls to File.getCanonicalPath.</Line>
          <Line />
          <Line>2) suppressLinkedDuplicates field is always false. Can we just remove this field and leave in the TODO comment about potential future changes?</Line>
          <Line />
          <Line>3) My regex understanding is probably rusty, but the pattern "\\.[./]*" seems incorrect.  To me this reads "dot, followed by any sequence of either characters or front slashes".   Won't this match a folder name that starts with a dot, such as ".metadata"? Is this intended to be parent references (../), or current references (./) ?</Line>
          <Line />
          <Line>4) In initLinkHistoriesIfNeeded, it adds both the root resource's location, and the location of the root resource's project. I think this doesn't account for linked resources in the workspace. Example:</Line>
        </Lines>
      </Enumeration>
      <Enumeration lines="4">
        <Lines>
          <Line>- UnifiedTreeNode has a "visited" field, which is a Set of IFileStores visited already.  By default this field is "null", so it adds trivial extra cost for non-symlink case.</Line>
          <Line>- When we go to fetch children of a node in the tree (UnifiedTree.addChildren), check if it is a sym link. If it is, we initialize the visited field with a new Set.  If the visited field is non-null, add the current node's file store to the visited set before proceeding to add children.</Line>
          <Line>- As we create child nodes, check if it is already in the visited set. If so, don't create a node for that child.</Line>
          <Line>- For each child node that is created, pass along the visited set (or null) from the parent.</Line>
        </Lines>
      </Enumeration>
      <Enumeration lines="3">
        <Lines>
          <Line>- Project /P1 has location /home/johna/p1</Line>
          <Line>- Linked folder /P1/Folder has location /home/johna/folder</Line>
          <Line>- Child folder /P1/Folder/SymLink is a symbolic link /home/johna/folder/SymLink to /home/johna/p1.</Line>
        </Lines>
      </Enumeration>
      <Enumeration lines="3">
        <Lines>
          <Line>- follow any symbolic links until getting to a place seen before</Line>
          <Line>- only check the "seen before" at junctions where links fork off</Line>
          <Line>It turned out that this algorithm worked well for the synthetic cases, but failed for the real world test4_udev test case.</Line>
        </Lines>
      </Enumeration>
      <Enumeration lines="7">
        <Lines>
          <Line>- remember the previous parent path so the canonical path for the parent</Line>
          <Line>is not computed again unnecessarily;</Line>
          <Line>- compute the parent canonical path ourselves by looking at the non-symlinked</Line>
          <Line>path segment between the current node and a previously computed canonical</Line>
          <Line>path for a parent higher up in the tree</Line>
          <Line>- defer computation of symlink children until all non-symlinks are computed</Line>
          <Line>But none of these would change the structure of the algorithm, or change its efficiency by orders of magnitude.</Line>
        </Lines>
      </Enumeration>
      <Enumeration lines="5">
        <Lines>
          <Line>- a boolean bit with each linked resource indicating whether it has</Line>
          <Line>persistence in .project or is backed by the file system (as symlink)</Line>
          <Line>- Read&amp;write of .project file to ignore the links backed by the file system</Line>
          <Line>- Different handling of delete for links backed by the file system</Line>
          <Line>- UnifiedTree to create/update links backed by the file system</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="VERIFIED" />
    <resolution amount="FIXED" />
    <WithStack>An Eclipse project contains symbolic links as its child resources.
If such symbolic link points to its ancestor directory, when the workspace
refreshing is invoked (by pressing F5 key in the resource navigator, for 
example), Eclipse is killed by 'java.lang.OutOfMemoryError: Java heap space'.

This is caused by the infinite loop execution of
  FileSystemResourceManager.refreshResource() --&gt; UnifiedTree.accept()
See also bug 42438.
This is even worse when having "automatic refresh" in action. A real
showstopper, IMHO.
Having cycles in your file system is a show-stopper - if it hurts, don't do it.
Hmm, various other applications deal quite happily with it. A symlink that
points to the containing directory is fine with all *nix filesystems and that's
why one can do it.

If an application does not deal with all normal situations a file system can be
in, then the application is buggy.

From my endusers point of view eclipse lacks appropriate deadlock prevention
when dealing with the filesystem.
(In reply to comment #3)
&gt; Having cycles in your file system is a show-stopper - if it hurts, don't do it.

having cycles in your file system is a perfectly normal and acceptable practice.
 Applications should use realpath to canonicalize directories and ensure there
is no recursion before enumerating thier contents.

I found this report because I tried adding a project containing a cyclic link,
it was unsuccessful while other IDEs and editors have no issue with cyclicity.


(In reply to comment #5)
&gt; (In reply to comment #3)
&gt; &gt; Having cycles in your file system is a show-stopper - if it hurts, don't do it.
&gt; 
&gt; having cycles in your file system is a perfectly normal and acceptable practice.
&gt;  Applications should use realpath to canonicalize directories and ensure there
&gt; is no recursion before enumerating thier contents.

I can only agree! You will find such symlinks on nearly any linux system e.g. in
/usr/include. Without starting a discussion if this practice is good or not the
fact is that eclipse will have to handle such situations.

BTW: it is not an "infinite loop" it will stop after 40 iterations but this
also too much :-)

We will use a fix by changing the native stat impl for linux systems in 
libcore_3_1_0.so. There we check if the path is a link to "." and if yes
this path will be skipped.

If you are interessted we can provide the patch.

But of course the real fix would be to check the path for such situations 
in the java part with calls like getCannonicalPath.
Sorry, my comment #3 was a bit harsh - I think I was just reacting to the
comment that the bug was a show-stopper (comment #2), which seemed odd because
after four years of Eclipse being around this was the first bug on the subject.

I agree it is a bug, and it should be fixed.  The suggested fix in comment #6
seems insufficient, since a sym-link to the parent would presumably also create
such a loop.
(In reply to comment #7)
&gt; I agree it is a bug, and it should be fixed.  The suggested fix in comment #6
&gt; seems insufficient, since a sym-link to the parent would presumably also create
&gt; such a loop.

Sure it does only fix a special problem that eclipse currently has.
But "real" symlink loops are not the normal case
and are normally the result of an error of the user or the system setup.

As where links to "." are pretty "normal" and are IMHO not real "loops".

But the best fix would be of course in the resource layer :-)
This does not really belong to this bug but the reason is the same
The "import from file system" wizard has also some problems
when importing sources which contain symlinks to "."

It will create 40 iterations of the folder structure 
as real folders before stopping.

Should I create a separate bugzille entry for this?
(In reply to comment #9)
&gt; This does not really belong to this bug but the reason is the same
&gt; The "import from file system" wizard has also some problems
&gt; when importing sources which contain symlinks to "."
&gt; 
&gt; It will create 40 iterations of the folder structure 
&gt; as real folders before stopping.

A fix would be possible in FileSystemStructureProvider
getChildren() with getCannonicalFile a link to the current folder
could be detected and ignored.

But this is also just symptom fixing.

The best solution for any recursive file system structure traversal 
would be to collect the possible folders in front, check them for
loops etc. and iterate just over the "cleanuped" list.


I'd like to reiterate that this is a real showstopper if
you are trying to import filesystems that contain such
links
This problem isn't only restricted to UNIX.

For example I'm using Eclipse CDT on Windows against a project in a ClearCase dynamic view hosted on Solaris.

It's a serious obstacle to the take up of Eclipse on our team. Mainly because it occurs when people first try Eclipse, giving them a very bad first impression.

I'm aware that this is a more complex problem. I don't think getCanonicalFile will help us here as the information about link being a link is only available at the ClearCase level. I don't think it's even exposed at the SMB level.

A great compromise would be if I could get the resource manager to just exclude certain names when it does the refresh. It isn't enough to just exclude at the C/C++ Project Paths-&gt;Source Tab-&gt;Exclusion Filter level.
*** Bug 131461 has been marked as a duplicate of this bug. ***
I would very much like it if Eclipse's resources layer would handle all symlinks in an intelligent fashion.  I'm writing a plugin, and I wanted to make it remember a path in the workspace in the form of a symlink, but I realized this would confuse the resource system if the path went up.

When Eclipse's filesystem scanner finds a symlink, it could report the symlink as a linked resource; that would fix the bug if Eclipse already has logic that avoids cycles of linked resources.
Created attachment 40924
One way to solve the endless loop during refresh for recursive symlinks

This is a patch against 3.2RC3
It is a change in RefreshLocalVisitor which remembers folders
that have already been visited in the refresh operation.
File.getCanonicalPath is used to get the unique path.

The rest of the change is adding a checkbox in the
workspace preferences to enable this check.
The default value is false.

This does NOT fix the same problem in the file system
import wizard but a similair approach can be used there too
*** Bug 145200 has been marked as a duplicate of this bug. ***
This bug also manifests itself in apparent infinite loops running batch audits of codebases with symbolic links in them. Instantiation's CodePro AnalytiX uses the Eclipse compiler to parse the code. Symbolic links get expanded and reexpanded in the bin directory of the temporary audit workspace. For example, if your source folder has org/eclipse and that folder has a symlink resources -&gt; ../.. then you will see org/eclipse/orgeclipse/org/eclipse/org/eclipse ... created in the bin directory. I did not verify if this stops after N levels, however, but the operation did appear to be looping.
Will this patch be considered for 3.2.1?
Created attachment 48520
Updated patch

This is an update on the patch in comment #15.  I haven't tested it yet - just posting here as a work in progress.  This patch moves the recursive check out of RefreshLocalVisitor and into UnifiedTree.  If you fix only the refresh local case, you'll still get the infinite loop for other clients of the UnifiedTree (this is a tree that simutaneously does a breadth-first traversal of the local file system and the resource tree). I also believe the previous patch would have scaled poorly to workspaces with thousands of folders (not uncommon).
Great that there is progress on this problem.
I am really not an expert with this aerea of the code 
so I am glad to learn from you :-)

If you like I can test it as soon you say it makes sense
Created attachment 48580
Updated patch

The previous patch didn't catch all cases.  I have been testing this latest patch and it seems to work well.  If anyone else wants to give it a try it would be good to hear your feedback.
Tested it today:

Applied patch against 3.2

-Use "Import archive wizard" to import a tgz which contains recursive symlinks in an existing project 
 
-&gt; works (recursive symlinks are ignored)

-Extract same tgz on cmdline in an existing simple project and use refresh 

-&gt; hangs until out of memory as before


I just looked again at your patch.

It is not enough just to check the parent&lt;-&gt;child relation
because recursive symlinks can spawn more then one 
directory level.

And that will not be discovered from this patch

Can you give a concrete example where it doesn't work?  If you have a link at /a/b/c that links to /a, then the prefix check should still work. A simple failing example to test against would be helpful.
Created attachment 50494
recursive symlink example
Of course you must extract the archive on a unix/linux host :-)
*** Bug 161015 has been marked as a duplicate of this bug. ***
*** Bug 161014 has been marked as a duplicate of this bug. ***
Created attachment 52979
Updated my way to handle recursive symlinks

Bugfix to included already existing folders in the visited list
This is certainly a hard problem, especially when the recursive link is in a ClearCase view accessed on Windows (Comment #12). File.getCanonicalPath() fails in this case. The only possible solution I can see is when the getChildren() call computes a hash code of the child list (including child basenames, length, access time, attributes from EFS/IFileInfo), and in case exactly the same children are found again break the recursion (with a visited list as in Comment #29). Such an approach would be a bit similar to the way how cddb identifies audio CD's by computing a hash code from the TOC, length of the songs etc and it seems to work reasonably well.

For the more common case where symbolic links can be really identified as symbolic links by the underlying file system, EFS now has API to identify them when the native file library is loaded (bug 170317: EFS.ATTRIBUTE_SYMLINK, currently implemented on Linux only).

I think that if a solution is desired that avoids cyclic links in all possible cases, there is no way around a visited list since the recursion may involve any number of symbolic links. A-&gt;. is just the simplest case, A.b-&gt;B with B.a-&gt;A is the mutually recursive case, A.b-&gt;B, B.c-&gt;C, C.a-&gt;A involves three folders and so on -- one can dream up recursion involving any number of links / folders involved.

I think the solution from comment #29 is close to perfect, just given that it fails for the ClearCase case (and java.io.File.getCanonicalPath() may be expensive), a solution including a hashCode of child infos might be worth a thought. A simple solution could involve an ArrayList as follows:

static class UniqueResourceId {
  private String names;
  private long modTime;
  private int type;
  public UniqueResourceId (String name, long modTime, int type) {
     this.name=name; this.modTime=modTime; this.type=type;
  }
  public boolean equals(Object other) {
    if (other instanceof UniqueResourceId) {
      UniqueResourceId o = (UniqueResourceId)other;
      return modTime==o.modTime &amp;&amp; type == o.type &amp;&amp; name.equals(o.name);
    }
    return false;
  }
  public int hashCode() {
    return name.hashCode(); //just hash the name
  }
}
static class FreezableArrayList extends ArrayList {
    private boolean frozen=false;
    private int hashCode;
    public void freeze() {
        this.hashCode=super.hashCode();
        frozen=true;
    }
    public int hashCode() {
        if(frozen) return this.hashCode;
        return super.hashCode();
    }
}
Object computeUniqueFolderId(IContainer folder) {
    IResource[] children = folder.members();
    FreezableArrayList uuid = new FreezableArrayList(children.length);
    for(int i=0; i&lt;children.length; i++) {
        IResource c=children[i];
        uuid.add(new UniqueResourceId(c.getName(), 
             c.getLocalTimeStamp(), c.getType());
    }
    uuid.freeze();
    return uuid;
}

I update a little base the attachement of Comment #29 in 
order to resolve the relative link
RefreshLocalVisitor.java checkFolder method

String s = p.toFile().getCanonicalPath();
String s1 = p.toFile().getPath();
if (s1.length() &gt; s.length() &amp;&amp; s1.startsWith(s))
{
	return false;
}
else if(!fVisitedList.contains(s)){
	fVisitedList.add(s);
} else {
	return false;
}
(In reply to comment #31)
Ah, you are taking a shortcut in case the symbolic link just points up in the folder hierarchy e.g.  myself-&gt;.  or  parent-&gt;.. 

Was your intention just performance optimization or something else? I think your code doesn't correctly cover the prefix case where you sit in a folder
  /path/to/folder
and it contains a symbolic link
  parallel -&gt; ../fol
which points to the folder
  /path/to/fol

Your code wouldn't refresh /path/to/fol. I believe this could be fixed by appending File.separatorChar to the canonicalPath before doing your prefix check.

With respect to my previous proposal in comment #30, an even better return value for the method computing the unique identifier would be (since direct access to elements is no more needed for the UID):

static class UIDFromList {
    private int hashCode;
    private List list;
    public UIDFromList(List l) { 
        this.list=l; this.hashCode=l.hashCode();
    }
    public int hashCode() {
        return this.hashCode;
    }
    public boolean equals(Object other) {
        if (other instanceof UIDFromList) {
            return this.list.equals(((UIDFromList)other).list);
        }
        return false;
    }
}

I have two criteria for a solution to this bug:

1) Must have trivial or no performance impact when no symbolic links are present.
2) Must be solved in UnifiedTree, rather than in RefreshLocalVisitor. As mentioned earlier, all the current patches put the fix in RefreshLocalVisitor. However, if some other visitor walks over the UnifiedTree in this case, they will hit the same infinite recursion (DeleteVisitor and CopyVisitor being prominent examples).

I think now that we have native symlink support in EFS, there is an opportunity to satisfy 1). I.e., we can detect symlinks at trivial cost since the attribute will be fetched anyway as part of the IFileStore#fetchInfo call.  Off the top of my head here's a possible solution:

- UnifiedTreeNode has a "visited" field, which is a Set of IFileStores visited already.  By default this field is "null", so it adds trivial extra cost for non-symlink case.
- When we go to fetch children of a node in the tree (UnifiedTree.addChildren), check if it is a sym link. If it is, we initialize the visited field with a new Set.  If the visited field is non-null, add the current node's file store to the visited set before proceeding to add children.
- As we create child nodes, check if it is already in the visited set. If so, don't create a node for that child.
- For each child node that is created, pass along the visited set (or null) from the parent.

With such a solution I believe we could throw away the UI portion of this patch - no need to add a preference if the performance is good in the normal case.  

The only problem this doesn't solve is the case where the symbolic link is not detectable via the IFileStore native (ClearCase on Windows mounting a Linux drive, for example).  I don't think we should be hung up on this solving problem right now.. I would much rather solve the majority case of plain symlinks on *nix/Vista machines. It would then be possible to solve the CC problem via a specialized IFileStore implementation, for example, that knows how to detect symlinks for that case.

If someone wants to take a crack this, be my guest.  If not, I'll try to find time to code this up in the 3.3 M6 period.
Do you know of an existing unit test to check the performance impact (and probably also memory consumption) of this? 
Unchanged M5, and the existing patch could be the cornerstones of a performance check.
Created attachment 58388
Performance test

This patch adds a performance test for refreshing a large project.  Tweak the suite() method to enable only the single refresh test.  I'll release this after M5 so we have a baseline.
*** Bug 172160 has been marked as a duplicate of this bug. ***
(In reply to comment #33)
&gt; If someone wants to take a crack this, be my guest.  If not, I'll try to find
&gt; time to code this up in the 3.3 M6 period.

With M7 close, is it realistic that you find time for this? Or until what time would you accept a good patch? - Max Weninger has submitted two patches already which are actually part of our product based on Eclipse, but have not been accepted into the Platform...

&gt; I think now that we have native symlink support in EFS, there is an 
&gt; opportunity to satisfy 1). I.e., we can detect symlinks at trivial cost 

yes.

&gt; If the visited field is non-null, add the current node's file store to
&gt; the visited set before proceeding to add children.
&gt; - As we create child nodes, check if it is already in the visited set.

I think we need to put java.io.File#getCanonicalPath() into the "visited" Set, and also check for the canonical path of each folder when drilling further down, since the path we get from the IFileStore will be deeper and deeper even if the symbolic link points to itself.
Since getting the canonical path is typically expensive (and needs to be done for every folder drilling down, as soon as we stepped over a symbolic link), I still think it's a better idea to compute a hash code from each folder's children and attributes - as proposed in comment #32. Then, we need to get the canonical path only if the hashcodes are the same.

&gt; The only problem this doesn't solve is the case where the symbolic link is not
&gt; detectable via the IFileStore native

Yes - but in such a situation also getCanonicalPath() does not help. I agree that it is OK to live with this limitation for now.

Yes, it's unlikely I'll get to this in 3.3.
I'm working on this now and will try to come up with a good patch.
Created attachment 65204
Test projects for symbolic links. These break Eclipse 3.3M6!!

Attached archive contains test projects for all possible cases of symbolic links I could think of. It also includes the "udev" real-world example from attachment 50494 (and obsoletes it). These are the projects I've tested my implementation against.

There are 6 test projects, which can be imported into Eclipse (extract the archive on a UNIX platform, then choose File &gt; Import &gt; Existing Projects into Workspace). Two other folder hierarchies are also needed to test recursive symbolic links pointing outside the projects known to the workspace.

Attention: DO NOT IMPORT test1..test5 INTO ECLIPSE 3.3M6 or earlier. It will fail with an OutOfMemoryError during refresh, since these test cases all contain recursive symbolic links. Also, DO NOT import these projects on a platform that supports symbolic links but where Eclipse does not know about them (currently MacOS X, HP-UX, AIX, Linux x86-64, or an SMB mounted share on Windows).

test6 is a special project: it does not contain recursive symbolic links and should thus work on any Eclipse installation. This test is there to check for a specific small shortcoming of the implementation (to be attached next).

Legal Message: I, Martin Oberhuber, declare that I developed attached code from scratch, without referencing any 3rd party materials except material licensed under the EPL. I am authorized by my employer, Wind River Systems Inc., to make this contribution under the EPL.
Created attachment 65205
Patch fixing all recursive symbolic link issues in UnifiedTree

Attached patch fixes all problems shown by all known symbolic link test cases as of the attachment to comment #40.

It follows the rules established by John in comment #33:
* Entire fix is in UnifiedTree
* Special handling ONLY for symlinks pointing to folders (as detected by EFS)
  Thus there is guaranteed trivial extra cost, and no change of behavior in
  the non symlink case.

Because EFS symlink detection is used, this fix only works when a liblocalfile native library fragment is installed that supports detecting symbolic links. Currently, this is the case for Linux-x86, Linux-PPC, and Solaris-SPARC. Other platforms are not affected by this fix and will still break. Re-compiling the liblocalfile for other UNIX platforms is trivial, though; MaxOS X may be harder since it has a different code base.

The fix detects also mutually recursive symbolic links (a-&gt;b, b-&gt;c, c-&gt;a) by maintaining a history of symbolic link parents during traversal of the tree. Because this history is not stored after traversal is done, and because traversal is done in a breadth-first-search manner, the fix has two "strange" effects:

1.) In case of mutually recursive a symbolic links, refreshing on level 0 has
    a different result than refreshing on lower levels - lower levels reveal
    one level more of the recursive link loop, while refreshing on level 0
    reveals only the first one. This can be shown by refreshing on various 
    levels in project test1.

2.) There is one specific case where even non-recursive symbolic links show
    fewer duplicate resources now, than it was before the fix. Look at test6
    from the attachment to comment #40 for details.

Both these "strange" results appear in very rare scenarios, so I think these are acceptable taking the benefit of the fix into account. Fixing them would require a lot more effort, most probably including things like keeping track of previous locations while following links and keeping this history in sync with workspace changes; resource tree lookups during tree traversal; deferring symbolic link evaluation in the BFS queue until all non-symbolic-links are evaluated.

Summing up, the patch has the following properties:
  * it works with a symlink-enabled EFS provider only.
  * with EFS enabled on localstore, it fixes all known recursion issues.
  * recursive symbolic links are completely hidden from the resource tree.
  * it NEVER leads to missing unique resources that would otherwise be shown.
  * it MAY suppress duplicate resources under very unlikely conditions only.
  * in case of recursive links only, it MAY lead to different results
    during refresh, depending on where a query was started, with the
    difference being that dupliates are either shown or hidden.

When a recursive symbolic link is detected, it is completely hidden (as if it would not exist). I think that this is a potential enhancement for the future -- displaying symbolic links like linked resources in the resource tree, and handling them accordingly.

The patch includes a testcase for the new utility class (PrefixPool) but no automated test for the various symbolic link scenarios. I think that converting the tgz archive of the test projects into automated tests should not be too hard, the test cases could simply count the number of resources after a full refresh; I was just not sure how to best add this. Of course, the test could only run on EFS-symlink-enabled-platforms.

Because the code apparently does no work in the non-symlink-case, I also did not check the performance test.
(In reply to comment #41)
Legal Message: I, Martin Oberhuber, declare that I developed attached code from
scratch, without referencing any 3rd party materials except material licensed
under the EPL. I am authorized by my employer, Wind River Systems Inc., to make
this contribution under the EPL.


Thanks Martin. Targetting to review and release for M7 unless I find problems. Also marking this as a "greatbug" because of comment #40 and comment #41, which is an exemplary example of a contribution, including detailed documentation and test cases.
Some questions:

1) Why are the parentPath and childPath both inserted into pathPrefixHistory on each iteration? Won't we eventually find all loops if we only insert the childPath? I must be missing something, but this seems like we have double the necessary number of calls to File.getCanonicalPath.

2) suppressLinkedDuplicates field is always false. Can we just remove this field and leave in the TODO comment about potential future changes?

3) My regex understanding is probably rusty, but the pattern "\\.[./]*" seems incorrect.  To me this reads "dot, followed by any sequence of either characters or front slashes".   Won't this match a folder name that starts with a dot, such as ".metadata"? Is this intended to be parent references (../), or current references (./) ?

4) In initLinkHistoriesIfNeeded, it adds both the root resource's location, and the location of the root resource's project. I think this doesn't account for linked resources in the workspace. Example:

 - Project /P1 has location /home/johna/p1
 - Linked folder /P1/Folder has location /home/johna/folder
 - Child folder /P1/Folder/SymLink is a symbolic link /home/johna/folder/SymLink to /home/johna/p1.

-&gt; This isn't a cyclic symbolic link chain, since the symlink does not point to a parent of the symlink.

I think rather than adding the project location, this code should add the location of the nearest linked resource, or the project location if not nested within a linked resource.  If you agree, I can fix this up because I have code elsewhere the computes the "file system root" for a given resource that can be used here. Or even simpler, it might just work with adding the root resource's location, and eventually via traversal we will catch any loops that lead back to the root resource.
By the way, despite my comments I am optimistic we can solve this in M7. I agree this has no impact on non-symlink cases, and even if we don't catch all possibilities right away, we'll be better off than the existing behaviour.
(In reply to comment #44)
Let me answer the simple ones first:

&gt; 2) suppressLinkedDuplicates field is always false. Can we just remove this
&gt; field and leave in the TODO comment about potential future changes?

Sure, you are right. Initially, I thought the intention of this were clearer
with the extra field, and would allow for programmtic modification of the behavior. But now I think that suppressing duplicate resources
is typically problematic since not backward compatible so the field should
be removed keeping only a short comment.

&gt; 3) the pattern "\\.[./]*" seems incorrect.
No, this is correct. Inside the character class [] every character stands for
itself and you don't need to quote. [\\./] would also match a String like
"..\../.." which may be interesting when considering symbolic links on Vista,
though so if you feel better I'm absolutely fine with such a change (anticipating that some 3rd party would write an EFS provider that supports symlinks on vista).

Now for the harder ones:

&gt; 1) Why are the parentPath and childPath both inserted into pathPrefixHistory?
&gt; Won't we eventually find all loops if we only insert the childPath?
This is a tricky question, and I'd like to sleep over it :-) My initial concern with this is, that the childPath is currently NOT inserted into the pathPrefixHistory since a link is only recursive if it walks back to where it came from at some point. I think you'd 

 * get more false positives by adding the child path, since when two folders
   a-&gt;/link  and b-&gt;/link  point to the same resource (which is not recursive
   per se) the second occurrence would necessarily be treated as "recursive"
   and thus suppressed. Right now, this happens much more rarely (only if a
   b1/b2-&gt;/link points to a link that is a prefix of a path that has a link
   parent at a higher level).

I guess your thinking is that if it's really a loop, it doesn't matter whether
the loop is detected sooner or later and the loop must come across the same 
place at some time. That's certainly true, but the problem is that we are doing a breadth-first search and not a depth-first search... and I cannot see how we could remember the history of previous links on a resource "tree" (though this would be a good thing).

If we could switch from BFS to DFS when a symbolic link is encountered, and clear the link history when this happens, this would be the best solution (and also fix all the other "strange" issues!!). Can we do that? I think I'm not familiar enough with the queue and how inserting works, but this might be an option...

At any rate, remember that the getCanonicalPath() only happens for symbolic links so it does not impact the non-symlink-case, AND the solution is also better than all previously proposed patches which did getCanonicalPath() for every folder (and not just symlinks). Your suggestion would only be a linear (*2) improvement for the symlink case and I think that's not worth the risk mentioned above.

If we cannot switch from BFS to DFS, I suggest keeping it as-is for now and probably shooting for other improvements in the future. I see room for improvements by trying to do more interpretation on the link target (trying to resolve it internally and do without any getCanonicalPath() at all) in the future, with getCanonicalPath() as a very last resort only later. This would also work better on remote file systems. But it seems harder and less robust so I'd prefer thinking about this later.

&gt; 4) In initLinkHistoriesIfNeeded, it adds both the root resource's location,
&gt; and the location of the root resource's project. I think this doesn't account
&gt; for linked resources in the workspace. Example:
&gt; -&gt; This isn't a cyclic symbolic link chain, since the symlink does not point
&gt;    to a parent of the symlink.

right, and I think this is essentially the BFS versus DFS issue again.
Adding better or more "file system roots" as you suggest is certainly a good think and cannot hurt, I think. I'm afraid though, that because of the BFS
the positive effect is probably smaller than you expect.

Currently, the "spanning filesystem locations" are remembered in separate PrefixPool just in order to ensure that a link pointing to a prefix of a previously found link root is NOT suppressed if it is outside a file system "root". So, adding more file system "roots" would lead to suppressing MORE
symbolic links and thus producing more false positives, I think.

The whole "spanning filesystem location" chack would be unnecessary if we were doing DFS, so let me reiterate again that if we could switch this would be the best solution.

&gt; Or even simpler, it might just work with adding the root resource's
&gt; location, and eventually via traversal we will catch any loops that lead back
&gt; to the root resource.

I think you are right, following my arguments above it is better to not add the project root to the spanning filesystem check. It means probably creating more duplicate resources, but also certainly suppressing less false positives.

Thanks for your thorough review. It's good knowing that 4 eyes are watching this! I left out linked resources since I don't know enough how to deal with them. Your example above (and probably more) should definitely be added to the test cases. Also, I did not test what happens with the DeleteVisitor and CopyVisitor you mentioned in comment #33 since I did not know how to invoke them.
This bug doesn't apply to DeleteVisitor because DeleteVisitor deletes symlinks rather than following them; see bug 44106.  However, it might still be good to check that any fix for this bug doesn't break DeleteVisitor.
(In reply to comment #47)
&gt; This bug doesn't apply to DeleteVisitor because DeleteVisitor deletes symlinks
Interesting... how does it know it's a symlink and not just a folder?


(In reply to comment #48)
&gt; Interesting... how does it know it's a symlink and not just a folder?

DeleteVisitor calls on the filesystem implementation (in the case of the local filesystem, LocalFile) to do the delete.  LocalFile.internalDelete attempts a nonrecursive java.io.File.delete, which can delete anything except a real nonempty directory.  internalDelete only recurses if that first attempt fails, so it avoids deleting through symlinks.  There's a separate issue when local history is being kept; see bug 174492.

(In reply to comment #46)
&gt; Also, I did not test what happens with the DeleteVisitor and
&gt; CopyVisitor you mentioned in comment #33 since I did not know how to invoke
&gt; them.

You can invoke them simply by deleting and copying folders using the Navigator.
Ah, that's smart... thanks for the info! Does the DeleteVisitor then need to use the UnifiedTree after all? Or does it delete using the FileSystem implementation and then use the UnifiedTree to see whether any resources remain that could not be deleted?
(In reply to comment #46)
&gt; (In reply to comment #44)
&gt; &gt; 1) Why are the parentPath and childPath both inserted into 
&gt; &gt;    pathPrefixHistory? Won't we eventually find all loops if we only
&gt; &gt;    insert the childPath?

Based on your suggestion of reducing the number of canonical path queries, I made some experiments with a modified algorithm that was more optimistic: 
  - follow any symbolic links until getting to a place seen before
  - only check the "seen before" at junctions where links fork off
It turned out that this algorithm worked well for the synthetic cases, but failed for the real world test4_udev test case. 

In the udev case, the link cycle is very long (up to 10 nodes), and while following the cycle the tree grows very fast in breadth because many children fork off. Because of that, detecting the link cycle just one level later leads to exponential growth in the number of nodes -- leading to 30 levels, 84000 nodes and 14000 canonical path queries in 25 seconds execution time on my PC. The current patch refreshes the same tree in &lt; 2 seconds because it detects cycles more eagerly.

What I conclude from this experiment, is that it is essential to detect the link cycle as early as possible, i.e. at the time the symbolic link forks off. This is exactly what the current patch does. It seems, that "eventually get to... again later" is just not good enough.

I think a really good solution to the symbolic link refresh problem requires correctly modeling symbolic links as links in the resource tree. This does not only give better visual feedback to users, but also always suppress duplicate resources during traversal (since clients will be able to see those resources by following the link in the resource model). I'm not sure if explicit new API for symbolic links is required (as requested by bug 44107) or the existing "linked resource" notion could be used.

Anyways, it looks like adding symbolic links to the resource model is out of scope for Eclipse 3.3, so I think the algorithm of the current patch is the best we can do for now. There is room for minor improvements:
 - remember the previous parent path so the canonical path for the parent
   is not computed again unnecessarily;
 - compute the parent canonical path ourselves by looking at the non-symlinked
   path segment between the current node and a previously computed canonical
   path for a parent higher up in the tree
 - defer computation of symlink children until all non-symlinks are computed
But none of these would change the structure of the algorithm, or change its efficiency by orders of magnitude.

&gt; &gt; 4) In initLinkHistoriesIfNeeded, it adds both the root resource's location,
&gt; &gt; and the location of the root resource's project. I think this doesn't 
&gt; &gt; account for linked resources in the workspace.

Please disregard my previous comment about more roots adding more false positives. I think this is not true. The more "spanning file system tree roots" are known upfront, the better - so adding tree roots brought in through linked
resources would be a good thing provided that they are in the same EFS file
system.

But I still think that the positive effect of this would be very small, since the current patch computes the spanning tree root lazily when the first symbolic link points to it. So I'd recommend not adding linked resource roots for now, but keeping the project root (since this is the most common known spanning tree root).

ONE LAST IMPORTANT NOTE: On second thought, I'm afraid that we cannot contribute the test4_udev files under the EPL, since this file system comes from an embedded linux product (most probably GPL but not sure). Please keep this test on bugzilla only for now and do not commit it as automated test case. All other tests are written by myself and contributed under the EPL.
Created attachment 65390
Minor tweaks, code formatting, etc

This is an entirely cosmetic change from Martin's patch 65205. Just attaching it here so I can test it out on other machines.
In my testing on a slow Linux box, I found that test4 doesn't complete. It just seems to refresh forever.  This is because the job that performs background refresh (RefreshJob), will time-out after two seconds, and switch to only refreshing two levels of the tree at a time. See bug 74392 comment 22 for summary, and UnifiedTree.accept method with int argument.  Since it only refreshes two levels at once, it doesn't catch recursive link structures that span more than two levels.  It looks like solving this will require persisting the prefix history in RefreshJob until the refresh request queue is empty. I'm going to release the current patch anyway because this is no worse than the previous behaviour.
Patch released for 1pm EDT integration build. I'll leave this open for now to sort out remaining details.
(In reply to comment #53)
&gt; In my testing on a slow Linux box, I found that test4 doesn't complete.

I guess the simplest fix for this would be to set suppressLinkedDuplicates = true. Perhaps this should be a UI preference after all. Code for a UI Preference is still attached to comment #21, I think this could be re-used.

The other option would be if there were no Preference, but isRecursiveLink would always act as if suppressLinkedDuplicates were true; but the suppressed links would be put into a queue for later checking after all other resources from the queue are handled (at that time we can see more easily if they are recursive).

Or, always act as if suppressLinkedDuplicates were true, but inside isRecursiveLink register the link pointing to a duplicate resource as a linked resouces. This would be the best solution from a user's perspective - but I don't understand the nature and lifecycle of linked resources enough to implement it...

&gt; I guess the simplest fix for this would be to set suppressLinkedDuplicates = 
&gt; true.

Unless I'm missing something, I don't think suppressLinkedDuplicates is relevant here.  The problem is that certain calls to UnifiedTree.accept only perform refresh of a fixed number of levels in the tree.  If the cycle is not detected within that span, then it will go undetected because we throw away the path/prefix history across invocations of the accept method.
(In reply to comment #56)
&gt; I don't think suppressLinkedDuplicates is relevant here.

It is relevant. Becuase if it is set, any symbolic link that points to a resource inside the same project is suppressed. So you need much less contextual information - knowing the "spanning file system roots" is sufficient, and these are set before the rest of the algorithm runs. Even when looking at a SINGLE level, all symbolic links that remin in the same project (which is all of them in the test4_udev case) will be suppressed.

Only in the test cases that produce symbolic link loops by pointing to resource trees outside the project, it will take more than 1 level to detect the loop.

Excuse me if this is ignorant, but what if symbolic links were treated as just another form of persistence for linked Resources?

Linked resources have the important property that they mask the underlying file system resource, so this would shield us from potentially recursive symbolic links. Much code deals with linked resources already in exactly the manner needed for symbolic links.

Because they look the same for the user, it should be possible to keep the changes needed all inside the resources plugin:
  - a boolean bit with each linked resource indicating whether it has
    persistence in .project or is backed by the file system (as symlink)
  - Read&amp;write of .project file to ignore the links backed by the file system
  - Different handling of delete for links backed by the file system
  - UnifiedTree to create/update links backed by the file system

This would mean no API change, correct visual feedback for symbolic links, simple handling, no more problems with any recursive links ever, correct
representation of the file system even if links introduce duplicates.

Or am I missing any important obstacles?
Re comment #58: It's an interesting thought exercise, but linked resources are fairly different from sym-links. Linked resources are a pointer from the resource tree to the file system tree - it spans across two different "layers". Thus, there is no such thing as a cycle introduced by a linked resource - there is no link from the file system back up to the resource tree in order to incur a cycle. A given linked resource is only associated with one file system location. A resource corresponding to a symlink has two applicable resources - the location of the link, and the location of the target of the link. It's not clear how this would be treated in the API, for example, what the return value of IResource.getLocation() would be.

Also,  I don't see how the property of linked resources masking filesystem resources would help here.  A linked resource represented as a symbolic link could not mask the symbolic link. If the symbolic link was modified to point to a different file, we would have to update the linked resource as well.
Marking fixed for M7.  I have opened bug 185247 for adding JUnit tests to cover the scenarios described in comment #40.
Created attachment 65775
Patch adding performance counters (development-time only)

I'm still slightly concerned about the problems on a slow Linux box that you described in comment #53. Could these have been due to the unexpectedly missing symlink-enabled library for x86_64 (bug 184433 comment 19)?

I tested with some performance counters (attached) and got the following results for the test4_complex_udev testcase:

* #nodes in file system according to "find": 440 (13 levels)
* #nodes found by RefreshLocalVisitor: 664 (14 levels) in 391 msec

it's hard to imagine that your machine is 5 times slower than mine, going from 391 msec to 2 seconds thus hitting the timeout. FYI, regarding the previous discussion about suppressLinkedDuplicates - when suppressLinkedDuplicates is enabled, the numbers are

* #nodes found with suppressLinkedDuplicates: 440 (13 levels) in 132 msec

so in this case, not a single symbolic link is followed, giving exactly the number of nodes found by "find" and being 3 times faster; because getCanonicalPath() is called only 74 times instead of 184 times.
Created attachment 65778
Patch adding a UI Preference for suppressLinkedDuplicates

Attached patch adds a UI Preference for suppressing duplicate resources introduced by symbolic links in all cases, if anybody is interested. This is derived from John's patch in attachment 48580, so I have not updated the Copyright headers.
I'm quite sure I had the correct library, because all of the other test cases worked fine. I'll try with this instrumented version and see what the times look like.
Verified the fix with I20070503-1400 on Linux x86_64 and Solaris 10 gtk.

Created new bug 185509 for following up with additional improvements, for addressing the issue found in comment #53 on a slow Linux box.

I did not carry over the (long) CC list to the new bug, so anybody interested in the follow-up please put yourself on CC of the new bug yourself.
The folk watching this bug may be interested to hear that another issue with cyclic symbolic links has been found in the "Import Existing Project" wizard. See bug #187318, put yourself on CC and vote for it if you are interested.

A patch has been provided for that issue, let's see if it gets accepted.
*** Bug 215047 has been marked as a duplicate of this bug. ***</WithStack>
    <WithOutStack>An Eclipse project contains symbolic links as its child resources.
If such symbolic link points to its ancestor directory, when the workspace
refreshing is invoked (by pressing F5 key in the resource navigator, for 
example), Eclipse is killed by 'java.lang.OutOfMemoryError: Java heap space'.

This is caused by the infinite loop execution of
  FileSystemResourceManager.refreshResource() --&gt; UnifiedTree.accept()
See also bug 42438.
This is even worse when having "automatic refresh" in action. A real
showstopper, IMHO.
Having cycles in your file system is a show-stopper - if it hurts, don't do it.
Hmm, various other applications deal quite happily with it. A symlink that
points to the containing directory is fine with all *nix filesystems and that's
why one can do it.

If an application does not deal with all normal situations a file system can be
in, then the application is buggy.

From my endusers point of view eclipse lacks appropriate deadlock prevention
when dealing with the filesystem.
(In reply to comment #3)
&gt; Having cycles in your file system is a show-stopper - if it hurts, don't do it.

having cycles in your file system is a perfectly normal and acceptable practice.
 Applications should use realpath to canonicalize directories and ensure there
is no recursion before enumerating thier contents.

I found this report because I tried adding a project containing a cyclic link,
it was unsuccessful while other IDEs and editors have no issue with cyclicity.


(In reply to comment #5)
&gt; (In reply to comment #3)
&gt; &gt; Having cycles in your file system is a show-stopper - if it hurts, don't do it.
&gt; 
&gt; having cycles in your file system is a perfectly normal and acceptable practice.
&gt;  Applications should use realpath to canonicalize directories and ensure there
&gt; is no recursion before enumerating thier contents.

I can only agree! You will find such symlinks on nearly any linux system e.g. in
/usr/include. Without starting a discussion if this practice is good or not the
fact is that eclipse will have to handle such situations.

BTW: it is not an "infinite loop" it will stop after 40 iterations but this
also too much :-)

We will use a fix by changing the native stat impl for linux systems in 
libcore_3_1_0.so. There we check if the path is a link to "." and if yes
this path will be skipped.

If you are interessted we can provide the patch.

But of course the real fix would be to check the path for such situations 
in the java part with calls like getCannonicalPath.
Sorry, my comment #3 was a bit harsh - I think I was just reacting to the
comment that the bug was a show-stopper (comment #2), which seemed odd because
after four years of Eclipse being around this was the first bug on the subject.

I agree it is a bug, and it should be fixed.  The suggested fix in comment #6
seems insufficient, since a sym-link to the parent would presumably also create
such a loop.
(In reply to comment #7)
&gt; I agree it is a bug, and it should be fixed.  The suggested fix in comment #6
&gt; seems insufficient, since a sym-link to the parent would presumably also create
&gt; such a loop.

Sure it does only fix a special problem that eclipse currently has.
But "real" symlink loops are not the normal case
and are normally the result of an error of the user or the system setup.

As where links to "." are pretty "normal" and are IMHO not real "loops".

But the best fix would be of course in the resource layer :-)
This does not really belong to this bug but the reason is the same
The "import from file system" wizard has also some problems
when importing sources which contain symlinks to "."

It will create 40 iterations of the folder structure 
as real folders before stopping.

Should I create a separate bugzille entry for this?
(In reply to comment #9)
&gt; This does not really belong to this bug but the reason is the same
&gt; The "import from file system" wizard has also some problems
&gt; when importing sources which contain symlinks to "."
&gt; 
&gt; It will create 40 iterations of the folder structure 
&gt; as real folders before stopping.

A fix would be possible in FileSystemStructureProvider
getChildren() with getCannonicalFile a link to the current folder
could be detected and ignored.

But this is also just symptom fixing.

The best solution for any recursive file system structure traversal 
would be to collect the possible folders in front, check them for
loops etc. and iterate just over the "cleanuped" list.


I'd like to reiterate that this is a real showstopper if
you are trying to import filesystems that contain such
links
This problem isn't only restricted to UNIX.

For example I'm using Eclipse CDT on Windows against a project in a ClearCase dynamic view hosted on Solaris.

It's a serious obstacle to the take up of Eclipse on our team. Mainly because it occurs when people first try Eclipse, giving them a very bad first impression.

I'm aware that this is a more complex problem. I don't think getCanonicalFile will help us here as the information about link being a link is only available at the ClearCase level. I don't think it's even exposed at the SMB level.

A great compromise would be if I could get the resource manager to just exclude certain names when it does the refresh. It isn't enough to just exclude at the C/C++ Project Paths-&gt;Source Tab-&gt;Exclusion Filter level.
*** Bug 131461 has been marked as a duplicate of this bug. ***
I would very much like it if Eclipse's resources layer would handle all symlinks in an intelligent fashion.  I'm writing a plugin, and I wanted to make it remember a path in the workspace in the form of a symlink, but I realized this would confuse the resource system if the path went up.

When Eclipse's filesystem scanner finds a symlink, it could report the symlink as a linked resource; that would fix the bug if Eclipse already has logic that avoids cycles of linked resources.
Created attachment 40924
One way to solve the endless loop during refresh for recursive symlinks

This is a patch against 3.2RC3
It is a change in RefreshLocalVisitor which remembers folders
that have already been visited in the refresh operation.
File.getCanonicalPath is used to get the unique path.

The rest of the change is adding a checkbox in the
workspace preferences to enable this check.
The default value is false.

This does NOT fix the same problem in the file system
import wizard but a similair approach can be used there too
*** Bug 145200 has been marked as a duplicate of this bug. ***
This bug also manifests itself in apparent infinite loops running batch audits of codebases with symbolic links in them. Instantiation's CodePro AnalytiX uses the Eclipse compiler to parse the code. Symbolic links get expanded and reexpanded in the bin directory of the temporary audit workspace. For example, if your source folder has org/eclipse and that folder has a symlink resources -&gt; ../.. then you will see org/eclipse/orgeclipse/org/eclipse/org/eclipse ... created in the bin directory. I did not verify if this stops after N levels, however, but the operation did appear to be looping.
Will this patch be considered for 3.2.1?
Created attachment 48520
Updated patch

This is an update on the patch in comment #15.  I haven't tested it yet - just posting here as a work in progress.  This patch moves the recursive check out of RefreshLocalVisitor and into UnifiedTree.  If you fix only the refresh local case, you'll still get the infinite loop for other clients of the UnifiedTree (this is a tree that simutaneously does a breadth-first traversal of the local file system and the resource tree). I also believe the previous patch would have scaled poorly to workspaces with thousands of folders (not uncommon).
Great that there is progress on this problem.
I am really not an expert with this aerea of the code 
so I am glad to learn from you :-)

If you like I can test it as soon you say it makes sense
Created attachment 48580
Updated patch

The previous patch didn't catch all cases.  I have been testing this latest patch and it seems to work well.  If anyone else wants to give it a try it would be good to hear your feedback.
Tested it today:

Applied patch against 3.2

-Use "Import archive wizard" to import a tgz which contains recursive symlinks in an existing project 
 
-&gt; works (recursive symlinks are ignored)

-Extract same tgz on cmdline in an existing simple project and use refresh 

-&gt; hangs until out of memory as before


I just looked again at your patch.

It is not enough just to check the parent&lt;-&gt;child relation
because recursive symlinks can spawn more then one 
directory level.

And that will not be discovered from this patch

Can you give a concrete example where it doesn't work?  If you have a link at /a/b/c that links to /a, then the prefix check should still work. A simple failing example to test against would be helpful.
Created attachment 50494
recursive symlink example
Of course you must extract the archive on a unix/linux host :-)
*** Bug 161015 has been marked as a duplicate of this bug. ***
*** Bug 161014 has been marked as a duplicate of this bug. ***
Created attachment 52979
Updated my way to handle recursive symlinks

Bugfix to included already existing folders in the visited list
This is certainly a hard problem, especially when the recursive link is in a ClearCase view accessed on Windows (Comment #12). File.getCanonicalPath() fails in this case. The only possible solution I can see is when the getChildren() call computes a hash code of the child list (including child basenames, length, access time, attributes from EFS/IFileInfo), and in case exactly the same children are found again break the recursion (with a visited list as in Comment #29). Such an approach would be a bit similar to the way how cddb identifies audio CD's by computing a hash code from the TOC, length of the songs etc and it seems to work reasonably well.

For the more common case where symbolic links can be really identified as symbolic links by the underlying file system, EFS now has API to identify them when the native file library is loaded (bug 170317: EFS.ATTRIBUTE_SYMLINK, currently implemented on Linux only).

I think that if a solution is desired that avoids cyclic links in all possible cases, there is no way around a visited list since the recursion may involve any number of symbolic links. A-&gt;. is just the simplest case, A.b-&gt;B with B.a-&gt;A is the mutually recursive case, A.b-&gt;B, B.c-&gt;C, C.a-&gt;A involves three folders and so on -- one can dream up recursion involving any number of links / folders involved.

I think the solution from comment #29 is close to perfect, just given that it fails for the ClearCase case (and java.io.File.getCanonicalPath() may be expensive), a solution including a hashCode of child infos might be worth a thought. A simple solution could involve an ArrayList as follows:

static class UniqueResourceId {
  private String names;
  private long modTime;
  private int type;
  public UniqueResourceId (String name, long modTime, int type) {
     this.name=name; this.modTime=modTime; this.type=type;
  }
  public boolean equals(Object other) {
    if (other instanceof UniqueResourceId) {
      UniqueResourceId o = (UniqueResourceId)other;
      return modTime==o.modTime &amp;&amp; type == o.type &amp;&amp; name.equals(o.name);
    }
    return false;
  }
  public int hashCode() {
    return name.hashCode(); //just hash the name
  }
}
static class FreezableArrayList extends ArrayList {
    private boolean frozen=false;
    private int hashCode;
    public void freeze() {
        this.hashCode=super.hashCode();
        frozen=true;
    }
    public int hashCode() {
        if(frozen) return this.hashCode;
        return super.hashCode();
    }
}
Object computeUniqueFolderId(IContainer folder) {
    IResource[] children = folder.members();
    FreezableArrayList uuid = new FreezableArrayList(children.length);
    for(int i=0; i&lt;children.length; i++) {
        IResource c=children[i];
        uuid.add(new UniqueResourceId(c.getName(), 
             c.getLocalTimeStamp(), c.getType());
    }
    uuid.freeze();
    return uuid;
}

I update a little base the attachement of Comment #29 in 
order to resolve the relative link
RefreshLocalVisitor.java checkFolder method

String s = p.toFile().getCanonicalPath();
String s1 = p.toFile().getPath();
if (s1.length() &gt; s.length() &amp;&amp; s1.startsWith(s))
{
	return false;
}
else if(!fVisitedList.contains(s)){
	fVisitedList.add(s);
} else {
	return false;
}
(In reply to comment #31)
Ah, you are taking a shortcut in case the symbolic link just points up in the folder hierarchy e.g.  myself-&gt;.  or  parent-&gt;.. 

Was your intention just performance optimization or something else? I think your code doesn't correctly cover the prefix case where you sit in a folder
  /path/to/folder
and it contains a symbolic link
  parallel -&gt; ../fol
which points to the folder
  /path/to/fol

Your code wouldn't refresh /path/to/fol. I believe this could be fixed by appending File.separatorChar to the canonicalPath before doing your prefix check.

With respect to my previous proposal in comment #30, an even better return value for the method computing the unique identifier would be (since direct access to elements is no more needed for the UID):

static class UIDFromList {
    private int hashCode;
    private List list;
    public UIDFromList(List l) { 
        this.list=l; this.hashCode=l.hashCode();
    }
    public int hashCode() {
        return this.hashCode;
    }
    public boolean equals(Object other) {
        if (other instanceof UIDFromList) {
            return this.list.equals(((UIDFromList)other).list);
        }
        return false;
    }
}

I have two criteria for a solution to this bug:

1) Must have trivial or no performance impact when no symbolic links are present.
2) Must be solved in UnifiedTree, rather than in RefreshLocalVisitor. As mentioned earlier, all the current patches put the fix in RefreshLocalVisitor. However, if some other visitor walks over the UnifiedTree in this case, they will hit the same infinite recursion (DeleteVisitor and CopyVisitor being prominent examples).

I think now that we have native symlink support in EFS, there is an opportunity to satisfy 1). I.e., we can detect symlinks at trivial cost since the attribute will be fetched anyway as part of the IFileStore#fetchInfo call.  Off the top of my head here's a possible solution:

- UnifiedTreeNode has a "visited" field, which is a Set of IFileStores visited already.  By default this field is "null", so it adds trivial extra cost for non-symlink case.
- When we go to fetch children of a node in the tree (UnifiedTree.addChildren), check if it is a sym link. If it is, we initialize the visited field with a new Set.  If the visited field is non-null, add the current node's file store to the visited set before proceeding to add children.
- As we create child nodes, check if it is already in the visited set. If so, don't create a node for that child.
- For each child node that is created, pass along the visited set (or null) from the parent.

With such a solution I believe we could throw away the UI portion of this patch - no need to add a preference if the performance is good in the normal case.  

The only problem this doesn't solve is the case where the symbolic link is not detectable via the IFileStore native (ClearCase on Windows mounting a Linux drive, for example).  I don't think we should be hung up on this solving problem right now.. I would much rather solve the majority case of plain symlinks on *nix/Vista machines. It would then be possible to solve the CC problem via a specialized IFileStore implementation, for example, that knows how to detect symlinks for that case.

If someone wants to take a crack this, be my guest.  If not, I'll try to find time to code this up in the 3.3 M6 period.
Do you know of an existing unit test to check the performance impact (and probably also memory consumption) of this? 
Unchanged M5, and the existing patch could be the cornerstones of a performance check.
Created attachment 58388
Performance test

This patch adds a performance test for refreshing a large project.  Tweak the suite() method to enable only the single refresh test.  I'll release this after M5 so we have a baseline.
*** Bug 172160 has been marked as a duplicate of this bug. ***
(In reply to comment #33)
&gt; If someone wants to take a crack this, be my guest.  If not, I'll try to find
&gt; time to code this up in the 3.3 M6 period.

With M7 close, is it realistic that you find time for this? Or until what time would you accept a good patch? - Max Weninger has submitted two patches already which are actually part of our product based on Eclipse, but have not been accepted into the Platform...

&gt; I think now that we have native symlink support in EFS, there is an 
&gt; opportunity to satisfy 1). I.e., we can detect symlinks at trivial cost 

yes.

&gt; If the visited field is non-null, add the current node's file store to
&gt; the visited set before proceeding to add children.
&gt; - As we create child nodes, check if it is already in the visited set.

I think we need to put java.io.File#getCanonicalPath() into the "visited" Set, and also check for the canonical path of each folder when drilling further down, since the path we get from the IFileStore will be deeper and deeper even if the symbolic link points to itself.
Since getting the canonical path is typically expensive (and needs to be done for every folder drilling down, as soon as we stepped over a symbolic link), I still think it's a better idea to compute a hash code from each folder's children and attributes - as proposed in comment #32. Then, we need to get the canonical path only if the hashcodes are the same.

&gt; The only problem this doesn't solve is the case where the symbolic link is not
&gt; detectable via the IFileStore native

Yes - but in such a situation also getCanonicalPath() does not help. I agree that it is OK to live with this limitation for now.

Yes, it's unlikely I'll get to this in 3.3.
I'm working on this now and will try to come up with a good patch.
Created attachment 65204
Test projects for symbolic links. These break Eclipse 3.3M6!!

Attached archive contains test projects for all possible cases of symbolic links I could think of. It also includes the "udev" real-world example from attachment 50494 (and obsoletes it). These are the projects I've tested my implementation against.

There are 6 test projects, which can be imported into Eclipse (extract the archive on a UNIX platform, then choose File &gt; Import &gt; Existing Projects into Workspace). Two other folder hierarchies are also needed to test recursive symbolic links pointing outside the projects known to the workspace.

Attention: DO NOT IMPORT test1..test5 INTO ECLIPSE 3.3M6 or earlier. It will fail with an OutOfMemoryError during refresh, since these test cases all contain recursive symbolic links. Also, DO NOT import these projects on a platform that supports symbolic links but where Eclipse does not know about them (currently MacOS X, HP-UX, AIX, Linux x86-64, or an SMB mounted share on Windows).

test6 is a special project: it does not contain recursive symbolic links and should thus work on any Eclipse installation. This test is there to check for a specific small shortcoming of the implementation (to be attached next).

Legal Message: I, Martin Oberhuber, declare that I developed attached code from scratch, without referencing any 3rd party materials except material licensed under the EPL. I am authorized by my employer, Wind River Systems Inc., to make this contribution under the EPL.
Created attachment 65205
Patch fixing all recursive symbolic link issues in UnifiedTree

Attached patch fixes all problems shown by all known symbolic link test cases as of the attachment to comment #40.

It follows the rules established by John in comment #33:
* Entire fix is in UnifiedTree
* Special handling ONLY for symlinks pointing to folders (as detected by EFS)
  Thus there is guaranteed trivial extra cost, and no change of behavior in
  the non symlink case.

Because EFS symlink detection is used, this fix only works when a liblocalfile native library fragment is installed that supports detecting symbolic links. Currently, this is the case for Linux-x86, Linux-PPC, and Solaris-SPARC. Other platforms are not affected by this fix and will still break. Re-compiling the liblocalfile for other UNIX platforms is trivial, though; MaxOS X may be harder since it has a different code base.

The fix detects also mutually recursive symbolic links (a-&gt;b, b-&gt;c, c-&gt;a) by maintaining a history of symbolic link parents during traversal of the tree. Because this history is not stored after traversal is done, and because traversal is done in a breadth-first-search manner, the fix has two "strange" effects:

1.) In case of mutually recursive a symbolic links, refreshing on level 0 has
    a different result than refreshing on lower levels - lower levels reveal
    one level more of the recursive link loop, while refreshing on level 0
    reveals only the first one. This can be shown by refreshing on various 
    levels in project test1.

2.) There is one specific case where even non-recursive symbolic links show
    fewer duplicate resources now, than it was before the fix. Look at test6
    from the attachment to comment #40 for details.

Both these "strange" results appear in very rare scenarios, so I think these are acceptable taking the benefit of the fix into account. Fixing them would require a lot more effort, most probably including things like keeping track of previous locations while following links and keeping this history in sync with workspace changes; resource tree lookups during tree traversal; deferring symbolic link evaluation in the BFS queue until all non-symbolic-links are evaluated.

Summing up, the patch has the following properties:
  * it works with a symlink-enabled EFS provider only.
  * with EFS enabled on localstore, it fixes all known recursion issues.
  * recursive symbolic links are completely hidden from the resource tree.
  * it NEVER leads to missing unique resources that would otherwise be shown.
  * it MAY suppress duplicate resources under very unlikely conditions only.
  * in case of recursive links only, it MAY lead to different results
    during refresh, depending on where a query was started, with the
    difference being that dupliates are either shown or hidden.

When a recursive symbolic link is detected, it is completely hidden (as if it would not exist). I think that this is a potential enhancement for the future -- displaying symbolic links like linked resources in the resource tree, and handling them accordingly.

The patch includes a testcase for the new utility class (PrefixPool) but no automated test for the various symbolic link scenarios. I think that converting the tgz archive of the test projects into automated tests should not be too hard, the test cases could simply count the number of resources after a full refresh; I was just not sure how to best add this. Of course, the test could only run on EFS-symlink-enabled-platforms.

Because the code apparently does no work in the non-symlink-case, I also did not check the performance test.
(In reply to comment #41)
Legal Message: I, Martin Oberhuber, declare that I developed attached code from
scratch, without referencing any 3rd party materials except material licensed
under the EPL. I am authorized by my employer, Wind River Systems Inc., to make
this contribution under the EPL.


Thanks Martin. Targetting to review and release for M7 unless I find problems. Also marking this as a "greatbug" because of comment #40 and comment #41, which is an exemplary example of a contribution, including detailed documentation and test cases.
Some questions:

1) Why are the parentPath and childPath both inserted into pathPrefixHistory on each iteration? Won't we eventually find all loops if we only insert the childPath? I must be missing something, but this seems like we have double the necessary number of calls to File.getCanonicalPath.

2) suppressLinkedDuplicates field is always false. Can we just remove this field and leave in the TODO comment about potential future changes?

3) My regex understanding is probably rusty, but the pattern "\\.[./]*" seems incorrect.  To me this reads "dot, followed by any sequence of either characters or front slashes".   Won't this match a folder name that starts with a dot, such as ".metadata"? Is this intended to be parent references (../), or current references (./) ?

4) In initLinkHistoriesIfNeeded, it adds both the root resource's location, and the location of the root resource's project. I think this doesn't account for linked resources in the workspace. Example:

 - Project /P1 has location /home/johna/p1
 - Linked folder /P1/Folder has location /home/johna/folder
 - Child folder /P1/Folder/SymLink is a symbolic link /home/johna/folder/SymLink to /home/johna/p1.

-&gt; This isn't a cyclic symbolic link chain, since the symlink does not point to a parent of the symlink.

I think rather than adding the project location, this code should add the location of the nearest linked resource, or the project location if not nested within a linked resource.  If you agree, I can fix this up because I have code elsewhere the computes the "file system root" for a given resource that can be used here. Or even simpler, it might just work with adding the root resource's location, and eventually via traversal we will catch any loops that lead back to the root resource.
By the way, despite my comments I am optimistic we can solve this in M7. I agree this has no impact on non-symlink cases, and even if we don't catch all possibilities right away, we'll be better off than the existing behaviour.
(In reply to comment #44)
Let me answer the simple ones first:

&gt; 2) suppressLinkedDuplicates field is always false. Can we just remove this
&gt; field and leave in the TODO comment about potential future changes?

Sure, you are right. Initially, I thought the intention of this were clearer
with the extra field, and would allow for programmtic modification of the behavior. But now I think that suppressing duplicate resources
is typically problematic since not backward compatible so the field should
be removed keeping only a short comment.

&gt; 3) the pattern "\\.[./]*" seems incorrect.
No, this is correct. Inside the character class [] every character stands for
itself and you don't need to quote. [\\./] would also match a String like
"..\../.." which may be interesting when considering symbolic links on Vista,
though so if you feel better I'm absolutely fine with such a change (anticipating that some 3rd party would write an EFS provider that supports symlinks on vista).

Now for the harder ones:

&gt; 1) Why are the parentPath and childPath both inserted into pathPrefixHistory?
&gt; Won't we eventually find all loops if we only insert the childPath?
This is a tricky question, and I'd like to sleep over it :-) My initial concern with this is, that the childPath is currently NOT inserted into the pathPrefixHistory since a link is only recursive if it walks back to where it came from at some point. I think you'd 

 * get more false positives by adding the child path, since when two folders
   a-&gt;/link  and b-&gt;/link  point to the same resource (which is not recursive
   per se) the second occurrence would necessarily be treated as "recursive"
   and thus suppressed. Right now, this happens much more rarely (only if a
   b1/b2-&gt;/link points to a link that is a prefix of a path that has a link
   parent at a higher level).

I guess your thinking is that if it's really a loop, it doesn't matter whether
the loop is detected sooner or later and the loop must come across the same 
place at some time. That's certainly true, but the problem is that we are doing a breadth-first search and not a depth-first search... and I cannot see how we could remember the history of previous links on a resource "tree" (though this would be a good thing).

If we could switch from BFS to DFS when a symbolic link is encountered, and clear the link history when this happens, this would be the best solution (and also fix all the other "strange" issues!!). Can we do that? I think I'm not familiar enough with the queue and how inserting works, but this might be an option...

At any rate, remember that the getCanonicalPath() only happens for symbolic links so it does not impact the non-symlink-case, AND the solution is also better than all previously proposed patches which did getCanonicalPath() for every folder (and not just symlinks). Your suggestion would only be a linear (*2) improvement for the symlink case and I think that's not worth the risk mentioned above.

If we cannot switch from BFS to DFS, I suggest keeping it as-is for now and probably shooting for other improvements in the future. I see room for improvements by trying to do more interpretation on the link target (trying to resolve it internally and do without any getCanonicalPath() at all) in the future, with getCanonicalPath() as a very last resort only later. This would also work better on remote file systems. But it seems harder and less robust so I'd prefer thinking about this later.

&gt; 4) In initLinkHistoriesIfNeeded, it adds both the root resource's location,
&gt; and the location of the root resource's project. I think this doesn't account
&gt; for linked resources in the workspace. Example:
&gt; -&gt; This isn't a cyclic symbolic link chain, since the symlink does not point
&gt;    to a parent of the symlink.

right, and I think this is essentially the BFS versus DFS issue again.
Adding better or more "file system roots" as you suggest is certainly a good think and cannot hurt, I think. I'm afraid though, that because of the BFS
the positive effect is probably smaller than you expect.

Currently, the "spanning filesystem locations" are remembered in separate PrefixPool just in order to ensure that a link pointing to a prefix of a previously found link root is NOT suppressed if it is outside a file system "root". So, adding more file system "roots" would lead to suppressing MORE
symbolic links and thus producing more false positives, I think.

The whole "spanning filesystem location" chack would be unnecessary if we were doing DFS, so let me reiterate again that if we could switch this would be the best solution.

&gt; Or even simpler, it might just work with adding the root resource's
&gt; location, and eventually via traversal we will catch any loops that lead back
&gt; to the root resource.

I think you are right, following my arguments above it is better to not add the project root to the spanning filesystem check. It means probably creating more duplicate resources, but also certainly suppressing less false positives.

Thanks for your thorough review. It's good knowing that 4 eyes are watching this! I left out linked resources since I don't know enough how to deal with them. Your example above (and probably more) should definitely be added to the test cases. Also, I did not test what happens with the DeleteVisitor and CopyVisitor you mentioned in comment #33 since I did not know how to invoke them.
This bug doesn't apply to DeleteVisitor because DeleteVisitor deletes symlinks rather than following them; see bug 44106.  However, it might still be good to check that any fix for this bug doesn't break DeleteVisitor.
(In reply to comment #47)
&gt; This bug doesn't apply to DeleteVisitor because DeleteVisitor deletes symlinks
Interesting... how does it know it's a symlink and not just a folder?


(In reply to comment #48)
&gt; Interesting... how does it know it's a symlink and not just a folder?

DeleteVisitor calls on the filesystem implementation (in the case of the local filesystem, LocalFile) to do the delete.  LocalFile.internalDelete attempts a nonrecursive java.io.File.delete, which can delete anything except a real nonempty directory.  internalDelete only recurses if that first attempt fails, so it avoids deleting through symlinks.  There's a separate issue when local history is being kept; see bug 174492.

(In reply to comment #46)
&gt; Also, I did not test what happens with the DeleteVisitor and
&gt; CopyVisitor you mentioned in comment #33 since I did not know how to invoke
&gt; them.

You can invoke them simply by deleting and copying folders using the Navigator.
Ah, that's smart... thanks for the info! Does the DeleteVisitor then need to use the UnifiedTree after all? Or does it delete using the FileSystem implementation and then use the UnifiedTree to see whether any resources remain that could not be deleted?
(In reply to comment #46)
&gt; (In reply to comment #44)
&gt; &gt; 1) Why are the parentPath and childPath both inserted into 
&gt; &gt;    pathPrefixHistory? Won't we eventually find all loops if we only
&gt; &gt;    insert the childPath?

Based on your suggestion of reducing the number of canonical path queries, I made some experiments with a modified algorithm that was more optimistic: 
  - follow any symbolic links until getting to a place seen before
  - only check the "seen before" at junctions where links fork off
It turned out that this algorithm worked well for the synthetic cases, but failed for the real world test4_udev test case. 

In the udev case, the link cycle is very long (up to 10 nodes), and while following the cycle the tree grows very fast in breadth because many children fork off. Because of that, detecting the link cycle just one level later leads to exponential growth in the number of nodes -- leading to 30 levels, 84000 nodes and 14000 canonical path queries in 25 seconds execution time on my PC. The current patch refreshes the same tree in &lt; 2 seconds because it detects cycles more eagerly.

What I conclude from this experiment, is that it is essential to detect the link cycle as early as possible, i.e. at the time the symbolic link forks off. This is exactly what the current patch does. It seems, that "eventually get to... again later" is just not good enough.

I think a really good solution to the symbolic link refresh problem requires correctly modeling symbolic links as links in the resource tree. This does not only give better visual feedback to users, but also always suppress duplicate resources during traversal (since clients will be able to see those resources by following the link in the resource model). I'm not sure if explicit new API for symbolic links is required (as requested by bug 44107) or the existing "linked resource" notion could be used.

Anyways, it looks like adding symbolic links to the resource model is out of scope for Eclipse 3.3, so I think the algorithm of the current patch is the best we can do for now. There is room for minor improvements:
 - remember the previous parent path so the canonical path for the parent
   is not computed again unnecessarily;
 - compute the parent canonical path ourselves by looking at the non-symlinked
   path segment between the current node and a previously computed canonical
   path for a parent higher up in the tree
 - defer computation of symlink children until all non-symlinks are computed
But none of these would change the structure of the algorithm, or change its efficiency by orders of magnitude.

&gt; &gt; 4) In initLinkHistoriesIfNeeded, it adds both the root resource's location,
&gt; &gt; and the location of the root resource's project. I think this doesn't 
&gt; &gt; account for linked resources in the workspace.

Please disregard my previous comment about more roots adding more false positives. I think this is not true. The more "spanning file system tree roots" are known upfront, the better - so adding tree roots brought in through linked
resources would be a good thing provided that they are in the same EFS file
system.

But I still think that the positive effect of this would be very small, since the current patch computes the spanning tree root lazily when the first symbolic link points to it. So I'd recommend not adding linked resource roots for now, but keeping the project root (since this is the most common known spanning tree root).

ONE LAST IMPORTANT NOTE: On second thought, I'm afraid that we cannot contribute the test4_udev files under the EPL, since this file system comes from an embedded linux product (most probably GPL but not sure). Please keep this test on bugzilla only for now and do not commit it as automated test case. All other tests are written by myself and contributed under the EPL.
Created attachment 65390
Minor tweaks, code formatting, etc

This is an entirely cosmetic change from Martin's patch 65205. Just attaching it here so I can test it out on other machines.
In my testing on a slow Linux box, I found that test4 doesn't complete. It just seems to refresh forever.  This is because the job that performs background refresh (RefreshJob), will time-out after two seconds, and switch to only refreshing two levels of the tree at a time. See bug 74392 comment 22 for summary, and UnifiedTree.accept method with int argument.  Since it only refreshes two levels at once, it doesn't catch recursive link structures that span more than two levels.  It looks like solving this will require persisting the prefix history in RefreshJob until the refresh request queue is empty. I'm going to release the current patch anyway because this is no worse than the previous behaviour.
Patch released for 1pm EDT integration build. I'll leave this open for now to sort out remaining details.
(In reply to comment #53)
&gt; In my testing on a slow Linux box, I found that test4 doesn't complete.

I guess the simplest fix for this would be to set suppressLinkedDuplicates = true. Perhaps this should be a UI preference after all. Code for a UI Preference is still attached to comment #21, I think this could be re-used.

The other option would be if there were no Preference, but isRecursiveLink would always act as if suppressLinkedDuplicates were true; but the suppressed links would be put into a queue for later checking after all other resources from the queue are handled (at that time we can see more easily if they are recursive).

Or, always act as if suppressLinkedDuplicates were true, but inside isRecursiveLink register the link pointing to a duplicate resource as a linked resouces. This would be the best solution from a user's perspective - but I don't understand the nature and lifecycle of linked resources enough to implement it...

&gt; I guess the simplest fix for this would be to set suppressLinkedDuplicates = 
&gt; true.

Unless I'm missing something, I don't think suppressLinkedDuplicates is relevant here.  The problem is that certain calls to UnifiedTree.accept only perform refresh of a fixed number of levels in the tree.  If the cycle is not detected within that span, then it will go undetected because we throw away the path/prefix history across invocations of the accept method.
(In reply to comment #56)
&gt; I don't think suppressLinkedDuplicates is relevant here.

It is relevant. Becuase if it is set, any symbolic link that points to a resource inside the same project is suppressed. So you need much less contextual information - knowing the "spanning file system roots" is sufficient, and these are set before the rest of the algorithm runs. Even when looking at a SINGLE level, all symbolic links that remin in the same project (which is all of them in the test4_udev case) will be suppressed.

Only in the test cases that produce symbolic link loops by pointing to resource trees outside the project, it will take more than 1 level to detect the loop.

Excuse me if this is ignorant, but what if symbolic links were treated as just another form of persistence for linked Resources?

Linked resources have the important property that they mask the underlying file system resource, so this would shield us from potentially recursive symbolic links. Much code deals with linked resources already in exactly the manner needed for symbolic links.

Because they look the same for the user, it should be possible to keep the changes needed all inside the resources plugin:
  - a boolean bit with each linked resource indicating whether it has
    persistence in .project or is backed by the file system (as symlink)
  - Read&amp;write of .project file to ignore the links backed by the file system
  - Different handling of delete for links backed by the file system
  - UnifiedTree to create/update links backed by the file system

This would mean no API change, correct visual feedback for symbolic links, simple handling, no more problems with any recursive links ever, correct
representation of the file system even if links introduce duplicates.

Or am I missing any important obstacles?
Re comment #58: It's an interesting thought exercise, but linked resources are fairly different from sym-links. Linked resources are a pointer from the resource tree to the file system tree - it spans across two different "layers". Thus, there is no such thing as a cycle introduced by a linked resource - there is no link from the file system back up to the resource tree in order to incur a cycle. A given linked resource is only associated with one file system location. A resource corresponding to a symlink has two applicable resources - the location of the link, and the location of the target of the link. It's not clear how this would be treated in the API, for example, what the return value of IResource.getLocation() would be.

Also,  I don't see how the property of linked resources masking filesystem resources would help here.  A linked resource represented as a symbolic link could not mask the symbolic link. If the symbolic link was modified to point to a different file, we would have to update the linked resource as well.
Marking fixed for M7.  I have opened bug 185247 for adding JUnit tests to cover the scenarios described in comment #40.
Created attachment 65775
Patch adding performance counters (development-time only)

I'm still slightly concerned about the problems on a slow Linux box that you described in comment #53. Could these have been due to the unexpectedly missing symlink-enabled library for x86_64 (bug 184433 comment 19)?

I tested with some performance counters (attached) and got the following results for the test4_complex_udev testcase:

* #nodes in file system according to "find": 440 (13 levels)
* #nodes found by RefreshLocalVisitor: 664 (14 levels) in 391 msec

it's hard to imagine that your machine is 5 times slower than mine, going from 391 msec to 2 seconds thus hitting the timeout. FYI, regarding the previous discussion about suppressLinkedDuplicates - when suppressLinkedDuplicates is enabled, the numbers are

* #nodes found with suppressLinkedDuplicates: 440 (13 levels) in 132 msec

so in this case, not a single symbolic link is followed, giving exactly the number of nodes found by "find" and being 3 times faster; because getCanonicalPath() is called only 74 times instead of 184 times.
Created attachment 65778
Patch adding a UI Preference for suppressLinkedDuplicates

Attached patch adds a UI Preference for suppressing duplicate resources introduced by symbolic links in all cases, if anybody is interested. This is derived from John's patch in attachment 48580, so I have not updated the Copyright headers.
I'm quite sure I had the correct library, because all of the other test cases worked fine. I'll try with this instrumented version and see what the times look like.
Verified the fix with I20070503-1400 on Linux x86_64 and Solaris 10 gtk.

Created new bug 185509 for following up with additional improvements, for addressing the issue found in comment #53 on a slow Linux box.

I did not carry over the (long) CC list to the new bug, so anybody interested in the follow-up please put yourself on CC of the new bug yourself.
The folk watching this bug may be interested to hear that another issue with cyclic symbolic links has been found in the "Import Existing Project" wizard. See bug #187318, put yourself on CC and vote for it if you are interested.

A patch has been provided for that issue, let's see if it gets accepted.
*** Bug 215047 has been marked as a duplicate of this bug. ***</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="105555" />
    <CreationDate amount="2005-07-29 03:28:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="JDT" />
    <component amount="Text" />
    <Version amount="3.1" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows 2000" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Move line with alt + up/down deletes the line with numeric keypad</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="INVALID" />
    <WithStack>I am using the cursor control with the numeric keypad. Moving a line up/down 
with the numeric keypad deletes the line and leaves behind an ascii character 
corresponding the "value" I entered (222 for three times down). ALT + up/down 
with the arrow keys between the numeric and the alphanumeric keypad works 
fine. "undo" recreates the line.
I don't believe there is much we can do about this - entering numeric character
codes via ALT+NUM_KEY_PAD_N is a platform feature on the windows platform. Not
sure whether we could override this at all.

I assume you have NUM_LOCK turned off?

Doug, since you did the keybinding story, do you know whether ALT+KeyPad_Number
combinations can be used for keybindings on windows?
No, ALT+NUMPAD_&lt;N&gt; cannot be safely used as a key binding on Windows.  
However, the key binding should work if NUM_LOCK is turned off.  By default, I 
believe Windows turns on NUM_LOCK. 
 
Num Lock on Windows does not affect the Alt+keypad_n feature. Nothing we can do
here: this is a Windows feature.</WithStack>
    <WithOutStack>I am using the cursor control with the numeric keypad. Moving a line up/down 
with the numeric keypad deletes the line and leaves behind an ascii character 
corresponding the "value" I entered (222 for three times down). ALT + up/down 
with the arrow keys between the numeric and the alphanumeric keypad works 
fine. "undo" recreates the line.
I don't believe there is much we can do about this - entering numeric character
codes via ALT+NUM_KEY_PAD_N is a platform feature on the windows platform. Not
sure whether we could override this at all.

I assume you have NUM_LOCK turned off?

Doug, since you did the keybinding story, do you know whether ALT+KeyPad_Number
combinations can be used for keybindings on windows?
No, ALT+NUMPAD_&lt;N&gt; cannot be safely used as a key binding on Windows.  
However, the key binding should work if NUM_LOCK is turned off.  By default, I 
believe Windows turns on NUM_LOCK. 
 
Num Lock on Windows does not affect the Alt+keypad_n feature. Nothing we can do
here: this is a Windows feature.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="105556" />
    <CreationDate amount="2005-07-29 03:37:00 -0400" />
    <DupId amount="45186" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="UI" />
    <Version amount="3.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Linux-GTK" />
    <priority amount="P5" />
    <bug_severity amount="normal" />
    <Summery>[OpenModes] [Viewers] Editor should get focus when file opened using double-click (regardless of open mode)</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="2">
        <Lines>
          <Line>- single click open mode: focus is not transferred</Line>
          <Line>- double click open mode: focus is transferred</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="RESOLVED" />
    <resolution amount="DUPLICATE" />
    <WithStack>opening a file from package explorer does not transfer the focus to the newly opened editor. 
one has explicitely click into the editor.
The behaviour depends on the Open mode:

- single click open mode: focus is not transferred
- double click open mode: focus is transferred

This is by design and I tested it under Windows XP and it works as expected.

Tom, can you please double check under Linux and if it works that way close the PR.
tried, but even doubleclick does not transfer focus (maybe the second click is ignored already? 
is the desktopmanager involved or is it plain eclipse?).

&gt; This is by design
what's the meaning behind that?

pressing enter does not transfer the focus
pressing f3 does not
"rmc-&gt;open" does not
"rmc-&gt;open with-&gt;java editor" _does_
Works as described in comment 1 (except for the plugin.xml editor which always
takes the focus itself).
Closing as works for me - if you still see this (comment 3) please reopen with
more info about your window manager and exact steps to reproduce.
&gt; Works as described in comment 1
did you test in linux/gtk?
for me it still does not work.
kde 3.4.1, eclipse linux/gtk. both single click to open and double click to open for the desktop 
environment do solve the issue.

reproduction steps are easy: 
left click on an entry in the package-explorer. press arrow down, see the selection inside the 
package explorer go down.
left double click on an entry in the package-explorer. press arrow down, see the selection 
inside the package explorer go down.

the distinction between single click/double click behaviour seems at least for unices not usable 
-- traditionally unix-windowmanagers use single click where windows uses double click. seems 
to me to be a bug in the (at least) gtk-implementation.
The meaning behind is that if open mode is single click tranfering focus to the
editor would make it hard to select some elements and then open the context
menu. This behaviour should be consistent this way in Eclipse.

I retested it again under Linix/GTK and the behaviour is as described in comment
one. 

If you want to use Double Click for opening then you have to change the Open
mode under Preferences-&gt;General to Double click.

What can be considered a bug is the fact that when double clicking even when in
single click mode the editor should become focus. However the OpenListener
provided by JFace doesn't allow to detect this (e.g. the event doesn't have the
information whether the user did a double or single click).

Moving to Platform/UI to add this information to the OpenEvent so that viewers
could make use of it.
well, yes. now i changed to "doubleclick" in preferences it's more like it.

Changing description to describe the actual problem.

Reassigning bugs in component areas that are changing ownership.


*** This bug has been marked as a duplicate of bug 45186 ***</WithStack>
    <WithOutStack>opening a file from package explorer does not transfer the focus to the newly opened editor. 
one has explicitely click into the editor.
The behaviour depends on the Open mode:

- single click open mode: focus is not transferred
- double click open mode: focus is transferred

This is by design and I tested it under Windows XP and it works as expected.

Tom, can you please double check under Linux and if it works that way close the PR.
tried, but even doubleclick does not transfer focus (maybe the second click is ignored already? 
is the desktopmanager involved or is it plain eclipse?).

&gt; This is by design
what's the meaning behind that?

pressing enter does not transfer the focus
pressing f3 does not
"rmc-&gt;open" does not
"rmc-&gt;open with-&gt;java editor" _does_
Works as described in comment 1 (except for the plugin.xml editor which always
takes the focus itself).
Closing as works for me - if you still see this (comment 3) please reopen with
more info about your window manager and exact steps to reproduce.
&gt; Works as described in comment 1
did you test in linux/gtk?
for me it still does not work.
kde 3.4.1, eclipse linux/gtk. both single click to open and double click to open for the desktop 
environment do solve the issue.

reproduction steps are easy: 
left click on an entry in the package-explorer. press arrow down, see the selection inside the 
package explorer go down.
left double click on an entry in the package-explorer. press arrow down, see the selection 
inside the package explorer go down.

the distinction between single click/double click behaviour seems at least for unices not usable 
-- traditionally unix-windowmanagers use single click where windows uses double click. seems 
to me to be a bug in the (at least) gtk-implementation.
The meaning behind is that if open mode is single click tranfering focus to the
editor would make it hard to select some elements and then open the context
menu. This behaviour should be consistent this way in Eclipse.

I retested it again under Linix/GTK and the behaviour is as described in comment
one. 

If you want to use Double Click for opening then you have to change the Open
mode under Preferences-&gt;General to Double click.

What can be considered a bug is the fact that when double clicking even when in
single click mode the editor should become focus. However the OpenListener
provided by JFace doesn't allow to detect this (e.g. the event doesn't have the
information whether the user did a double or single click).

Moving to Platform/UI to add this information to the OpenEvent so that viewers
could make use of it.
well, yes. now i changed to "doubleclick" in preferences it's more like it.

Changing description to describe the actual problem.

Reassigning bugs in component areas that are changing ownership.


*** This bug has been marked as a duplicate of bug 45186 ***</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="105557" />
    <CreationDate amount="2005-07-29 03:59:00 -0400" />
    <DupId amount="" />
    <classification amount="Modeling" />
    <Product amount="MDT.UML2" />
    <component amount="Core" />
    <Version amount="1.1.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows 2000" />
    <priority amount="P3" />
    <bug_severity amount="critical" />
    <Summery>UML (and EMF etc.) will not initiate on my instance of Eclipse</Summery>
    <Patches amount="0" />
    <Stacktraces amount="2">
      <Stacktrace timestamp="1437330563015">
        <Exception>java.lang.NoClassDefFoundError</Exception>
        <Reason />
        <Frames>
          <Frame depth="0">com.omondo.uml.obf.cky.a(SourceFile:68)</Frame>
          <Frame depth="1">com.omondo.uml.UMLDiagramUI.a(SourceFile:112)</Frame>
          <Frame depth="2">com.omondo.uml.OpenPackageDependenceExplorerAction.run(SourceFile:67)</Frame>
          <Frame depth="3">org.eclipse.ui.internal.PluginAction.runWithEvent(PluginAction.java:246)</Frame>
          <Frame depth="4">org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection(ActionContributionItem.java:538)</Frame>
          <Frame depth="5">org.eclipse.jface.action.ActionContributionItem.access$2(ActionContributionItem.java:488)</Frame>
          <Frame depth="6">org.eclipse.jface.action.ActionContributionItem$5.handleEvent(ActionContributionItem.java:400)</Frame>
          <Frame depth="7">org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)</Frame>
          <Frame depth="8">org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:842)</Frame>
          <Frame depth="9">org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:2894)</Frame>
          <Frame depth="10">org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2527)</Frame>
          <Frame depth="11">org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1570)</Frame>
          <Frame depth="12">org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1534)</Frame>
          <Frame depth="13">org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:306)</Frame>
          <Frame depth="14">org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:143)</Frame>
          <Frame depth="15">org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:103)</Frame>
          <Frame depth="16">org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:228)</Frame>
          <Frame depth="17">org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:344)</Frame>
          <Frame depth="18">org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:156)</Frame>
          <Frame depth="19">sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)</Frame>
          <Frame depth="20">sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)</Frame>
          <Frame depth="21">sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)</Frame>
          <Frame depth="22">java.lang.reflect.Method.invoke(Unknown Source)</Frame>
          <Frame depth="23">org.eclipse.core.launcher.Main.invokeFramework(Main.java:315)</Frame>
          <Frame depth="24">org.eclipse.core.launcher.Main.basicRun(Main.java:268)</Frame>
          <Frame depth="25">org.eclipse.core.launcher.Main.run(Main.java:942)</Frame>
          <Frame depth="26">org.eclipse.core.launcher.Main.main(Main.java:926)</Frame>
        </Frames>
      </Stacktrace>
      <Stacktrace timestamp="1437330563015">
        <Exception>java.lang.NoSuchMethodError</Exception>
        <Reason>com.omondo.uml.obf.fqj.freeze()V</Reason>
        <Frames>
          <Frame depth="0">com.omondo.uml.obf.fqj.a(SourceFile:156)</Frame>
          <Frame depth="1">com.omondo.uml.ui.editors.editmodel.tools.ToolsPackage.&lt;clinit&gt;(SourceFile:59)</Frame>
          <Frame depth="2">com.omondo.uml.obf.en.a(SourceFile:157)</Frame>
          <Frame depth="3">com.omondo.uml.ui.editors.editmodel.board.BoardPackage.&lt;clinit&gt;(SourceFile:58)</Frame>
          <Frame depth="4">com.omondo.uml.obf.fgi.a(SourceFile:187)</Frame>
          <Frame depth="5">com.omondo.uml.ui.editors.editmodel.options.OptionsPackage.&lt;clinit&gt;(SourceFile:53)</Frame>
          <Frame depth="6">com.omondo.uml.obf.anj.a(SourceFile:147)</Frame>
          <Frame depth="7">com.omondo.uml.ui.editors.editmodel.profile.ProfilePackage.&lt;clinit&gt;(SourceFile:58)</Frame>
          <Frame depth="8">com.omondo.uml.obf.aim.a(SourceFile:134)</Frame>
          <Frame depth="9">com.omondo.uml.ui.editors.editmodel.robustness.RobustnessPackage.&lt;clinit&gt;(SourceFile:56)</Frame>
          <Frame depth="10">com.omondo.uml.obf.bpq.a(SourceFile:1130)</Frame>
          <Frame depth="11">com.omondo.uml.ui.editors.editmodel.EditmodelPackage.&lt;clinit&gt;(SourceFile:58)</Frame>
          <Frame depth="12">com.omondo.uml.obf.beu.&lt;init&gt;(SourceFile:47)</Frame>
          <Frame depth="13">com.omondo.uml.obf.frr.&lt;init&gt;(SourceFile:38)</Frame>
          <Frame depth="14">com.omondo.uml.obf.yy.&lt;init&gt;(SourceFile:28)</Frame>
          <Frame depth="15">com.omondo.uml.obf.agz.&lt;init&gt;(SourceFile:169)</Frame>
          <Frame depth="16">com.omondo.uml.obf.axf.&lt;init&gt;(SourceFile:44)</Frame>
          <Frame depth="17">com.omondo.uml.obf.equ.&lt;init&gt;(SourceFile:22)</Frame>
          <Frame depth="18">com.omondo.uml.obf.dpx.&lt;clinit&gt;(SourceFile:38)</Frame>
          <Frame depth="19">com.omondo.uml.obf.cky.b(SourceFile:123)</Frame>
          <Frame depth="20">com.omondo.uml.obf.bkl.b(SourceFile:292)</Frame>
          <Frame depth="21">com.omondo.uml.obf.bkl.a(SourceFile:167)</Frame>
          <Frame depth="22">com.omondo.uml.obf.bkl.createDialogArea(SourceFile:101)</Frame>
          <Frame depth="23">org.eclipse.jface.dialogs.TitleAreaDialog.createContents(TitleAreaDialog.java:156)</Frame>
          <Frame depth="24">org.eclipse.jface.window.Window.create(Window.java:418)</Frame>
          <Frame depth="25">org.eclipse.jface.dialogs.Dialog.create(Dialog.java:996)</Frame>
          <Frame depth="26">org.eclipse.jface.window.Window.open(Window.java:770)</Frame>
          <Frame depth="27">com.omondo.uml.UMLDiagramUI.a(SourceFile:215)</Frame>
          <Frame depth="28">com.omondo.uml.OpenClassDiagramAction.run(SourceFile:72)</Frame>
          <Frame depth="29">org.eclipse.ui.internal.PluginAction.runWithEvent(PluginAction.java:246)</Frame>
          <Frame depth="30">org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection(ActionContributionItem.java:538)</Frame>
          <Frame depth="31">org.eclipse.jface.action.ActionContributionItem.access$2(ActionContributionItem.java:488)</Frame>
          <Frame depth="32">org.eclipse.jface.action.ActionContributionItem$5.handleEvent(ActionContributionItem.java:400)</Frame>
          <Frame depth="33">org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)</Frame>
          <Frame depth="34">org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:842)</Frame>
          <Frame depth="35">org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:2894)</Frame>
          <Frame depth="36">org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2527)</Frame>
          <Frame depth="37">org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1570)</Frame>
          <Frame depth="38">org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1534)</Frame>
          <Frame depth="39">org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:306)</Frame>
          <Frame depth="40">org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:143)</Frame>
          <Frame depth="41">org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:103)</Frame>
          <Frame depth="42">org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:228)</Frame>
          <Frame depth="43">org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:344)</Frame>
          <Frame depth="44">org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:156)</Frame>
          <Frame depth="45">sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)</Frame>
          <Frame depth="46">sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)</Frame>
          <Frame depth="47">sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)</Frame>
          <Frame depth="48">java.lang.reflect.Method.invoke(Unknown Source)</Frame>
          <Frame depth="49">org.eclipse.core.launcher.Main.invokeFramework(Main.java:315)</Frame>
          <Frame depth="50">org.eclipse.core.launcher.Main.basicRun(Main.java:268)</Frame>
          <Frame depth="51">org.eclipse.core.launcher.Main.run(Main.java:942)</Frame>
          <Frame depth="52">org.eclipse.core.launcher.Main.main(Main.java:926)</Frame>
        </Frames>
      </Stacktrace>
    </Stacktraces>
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="INVALID" />
    <WithStack>I have unstalled the latest Eclipse 3.1 download, and also the latest UML2 
plugin, but still cannot initiate UML or EMF design. 

Error log gives the below trace details:

eclipse.buildId=I20050401-1645


java.lang.NoClassDefFoundError
	at com.omondo.uml.obf.cky.a(SourceFile:68)
	at com.omondo.uml.UMLDiagramUI.a(SourceFile:112)
	at com.omondo.uml.OpenPackageDependenceExplorerAction.run(SourceFile:67)
	at org.eclipse.ui.internal.PluginAction.runWithEvent
(PluginAction.java:246)
	at org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection
(ActionContributionItem.java:538)
	at org.eclipse.jface.action.ActionContributionItem.access$2
(ActionContributionItem.java:488)
	at org.eclipse.jface.action.ActionContributionItem$5.handleEvent
(ActionContributionItem.java:400)
	at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:842)
	at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:2894)
	at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2527)
	at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1570)
	at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1534)
	at org.eclipse.ui.internal.Workbench.createAndRunWorkbench
(Workbench.java:306)
	at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:143)
	at org.eclipse.ui.internal.ide.IDEApplication.run
(IDEApplication.java:103)
	at org.eclipse.core.internal.runtime.PlatformActivator$1.run
(PlatformActivator.java:228)
	at org.eclipse.core.runtime.adaptor.EclipseStarter.run
(EclipseStarter.java:344)
	at org.eclipse.core.runtime.adaptor.EclipseStarter.run
(EclipseStarter.java:156)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
	at java.lang.reflect.Method.invoke(Unknown Source)
	at org.eclipse.core.launcher.Main.invokeFramework(Main.java:315)
	at org.eclipse.core.launcher.Main.basicRun(Main.java:268)
	at org.eclipse.core.launcher.Main.run(Main.java:942)
	at org.eclipse.core.launcher.Main.main(Main.java:926)

Also this Stack trace:


java.lang.NoSuchMethodError: com.omondo.uml.obf.fqj.freeze()V
	at com.omondo.uml.obf.fqj.a(SourceFile:156)
	at com.omondo.uml.ui.editors.editmodel.tools.ToolsPackage.&lt;clinit&gt;
(SourceFile:59)
	at com.omondo.uml.obf.en.a(SourceFile:157)
	at com.omondo.uml.ui.editors.editmodel.board.BoardPackage.&lt;clinit&gt;
(SourceFile:58)
	at com.omondo.uml.obf.fgi.a(SourceFile:187)
	at com.omondo.uml.ui.editors.editmodel.options.OptionsPackage.&lt;clinit&gt;
(SourceFile:53)
	at com.omondo.uml.obf.anj.a(SourceFile:147)
	at com.omondo.uml.ui.editors.editmodel.profile.ProfilePackage.&lt;clinit&gt;
(SourceFile:58)
	at com.omondo.uml.obf.aim.a(SourceFile:134)
	at 
com.omondo.uml.ui.editors.editmodel.robustness.RobustnessPackage.&lt;clinit&gt;
(SourceFile:56)
	at com.omondo.uml.obf.bpq.a(SourceFile:1130)
	at com.omondo.uml.ui.editors.editmodel.EditmodelPackage.&lt;clinit&gt;
(SourceFile:58)
	at com.omondo.uml.obf.beu.&lt;init&gt;(SourceFile:47)
	at com.omondo.uml.obf.frr.&lt;init&gt;(SourceFile:38)
	at com.omondo.uml.obf.yy.&lt;init&gt;(SourceFile:28)
	at com.omondo.uml.obf.agz.&lt;init&gt;(SourceFile:169)
	at com.omondo.uml.obf.axf.&lt;init&gt;(SourceFile:44)
	at com.omondo.uml.obf.equ.&lt;init&gt;(SourceFile:22)
	at com.omondo.uml.obf.dpx.&lt;clinit&gt;(SourceFile:38)
	at com.omondo.uml.obf.cky.b(SourceFile:123)
	at com.omondo.uml.obf.bkl.b(SourceFile:292)
	at com.omondo.uml.obf.bkl.a(SourceFile:167)
	at com.omondo.uml.obf.bkl.createDialogArea(SourceFile:101)
	at org.eclipse.jface.dialogs.TitleAreaDialog.createContents
(TitleAreaDialog.java:156)
	at org.eclipse.jface.window.Window.create(Window.java:418)
	at org.eclipse.jface.dialogs.Dialog.create(Dialog.java:996)
	at org.eclipse.jface.window.Window.open(Window.java:770)
	at com.omondo.uml.UMLDiagramUI.a(SourceFile:215)
	at com.omondo.uml.OpenClassDiagramAction.run(SourceFile:72)
	at org.eclipse.ui.internal.PluginAction.runWithEvent
(PluginAction.java:246)
	at org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection
(ActionContributionItem.java:538)
	at org.eclipse.jface.action.ActionContributionItem.access$2
(ActionContributionItem.java:488)
	at org.eclipse.jface.action.ActionContributionItem$5.handleEvent
(ActionContributionItem.java:400)
	at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:842)
	at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:2894)
	at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2527)
	at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1570)
	at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1534)
	at org.eclipse.ui.internal.Workbench.createAndRunWorkbench
(Workbench.java:306)
	at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:143)
	at org.eclipse.ui.internal.ide.IDEApplication.run
(IDEApplication.java:103)
	at org.eclipse.core.internal.runtime.PlatformActivator$1.run
(PlatformActivator.java:228)
	at org.eclipse.core.runtime.adaptor.EclipseStarter.run
(EclipseStarter.java:344)
	at org.eclipse.core.runtime.adaptor.EclipseStarter.run
(EclipseStarter.java:156)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
	at java.lang.reflect.Method.invoke(Unknown Source)
	at org.eclipse.core.launcher.Main.invokeFramework(Main.java:315)
	at org.eclipse.core.launcher.Main.basicRun(Main.java:268)
	at org.eclipse.core.launcher.Main.run(Main.java:942)
	at org.eclipse.core.launcher.Main.main(Main.java:926)
*** Bug 105558 has been marked as a duplicate of this bug. ***
This looks like a product-specific problem (I don't see org.eclipse.uml2.* 
anywhere on the stack trace)...

Are you sure you have the Eclipse 3.1 release installed (the build ID should 
be I20050627-1435)? Are you sure that you have the latest EMF and UML2 
releases installed (2.1 and 1.1, respectively)? Are you sure that the version 
of EclipseUML you are using supports these releases?</WithStack>
    <WithOutStack>I have unstalled the latest Eclipse 3.1 download, and also the latest UML2 
plugin, but still cannot initiate UML or EMF design. 

Error log gives the below trace details:

eclipse.buildId=I20050401-1645



Also this Stack trace:



*** Bug 105558 has been marked as a duplicate of this bug. ***
This looks like a product-specific problem (I don't see org.eclipse.uml2.* 
anywhere on the stack trace)...

Are you sure you have the Eclipse 3.1 release installed (the build ID should 
be I20050627-1435)? Are you sure that you have the latest EMF and UML2 
releases installed (2.1 and 1.1, respectively)? Are you sure that the version 
of EclipseUML you are using supports these releases?</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="105558" />
    <CreationDate amount="2005-07-29 04:01:00 -0400" />
    <DupId amount="105557" />
    <classification amount="Modeling" />
    <Product amount="MDT.UML2" />
    <component amount="Core" />
    <Version amount="1.1.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows 2000" />
    <priority amount="P3" />
    <bug_severity amount="critical" />
    <Summery>UML (and EMF etc.) will not initiate on my instance of Eclipse</Summery>
    <Patches amount="0" />
    <Stacktraces amount="1">
      <Stacktrace timestamp="1437330563015">
        <Exception>java.lang.NoClassDefFoundError</Exception>
        <Reason />
        <Frames>
          <Frame depth="0">com.omondo.uml.obf.cky.a(SourceFile:68)</Frame>
          <Frame depth="1">com.omondo.uml.UMLDiagramUI.a(SourceFile:112)</Frame>
          <Frame depth="2">com.omondo.uml.OpenPackageDependenceExplorerAction.run(SourceFile:67)</Frame>
          <Frame depth="3">org.eclipse.ui.internal.PluginAction.runWithEvent(PluginAction.java:246)</Frame>
          <Frame depth="4">org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection(ActionContributionItem.java:538)</Frame>
          <Frame depth="5">org.eclipse.jface.action.ActionContributionItem.access$2(ActionContributionItem.java:488)</Frame>
          <Frame depth="6">org.eclipse.jface.action.ActionContributionItem$5.handleEvent(ActionContributionItem.java:400)</Frame>
          <Frame depth="7">org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)</Frame>
          <Frame depth="8">org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:842)</Frame>
          <Frame depth="9">org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:2894)</Frame>
          <Frame depth="10">org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2527)</Frame>
          <Frame depth="11">org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1570)</Frame>
          <Frame depth="12">org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1534)</Frame>
          <Frame depth="13">org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:306)</Frame>
          <Frame depth="14">org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:143)</Frame>
          <Frame depth="15">org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:103)</Frame>
          <Frame depth="16">org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:228)</Frame>
          <Frame depth="17">org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:344)</Frame>
          <Frame depth="18">org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:156)</Frame>
          <Frame depth="19">sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)</Frame>
          <Frame depth="20">sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)</Frame>
          <Frame depth="21">sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)</Frame>
          <Frame depth="22">java.lang.reflect.Method.invoke(Unknown Source)</Frame>
          <Frame depth="23">org.eclipse.core.launcher.Main.invokeFramework(Main.java:315)</Frame>
          <Frame depth="24">org.eclipse.core.launcher.Main.basicRun(Main.java:268)</Frame>
          <Frame depth="25">org.eclipse.core.launcher.Main.run(Main.java:942)</Frame>
          <Frame depth="26">org.eclipse.core.launcher.Main.main(Main.java:926)</Frame>
        </Frames>
      </Stacktrace>
    </Stacktraces>
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="DUPLICATE" />
    <WithStack>I have unstalled the latest Eclipse 3.1 download, and also the latest UML2 
plugin, but still cannot initiate UML or EMF design. 

Error log gives the below trace details:

eclipse.buildId=I20050401-1645


java.lang.NoClassDefFoundError
	at com.omondo.uml.obf.cky.a(SourceFile:68)
	at com.omondo.uml.UMLDiagramUI.a(SourceFile:112)
	at com.omondo.uml.OpenPackageDependenceExplorerAction.run(SourceFile:67)
	at org.eclipse.ui.internal.PluginAction.runWithEvent
(PluginAction.java:246)
	at org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection
(ActionContributionItem.java:538)
	at org.eclipse.jface.action.ActionContributionItem.access$2
(ActionContributionItem.java:488)
	at org.eclipse.jface.action.ActionContributionItem$5.handleEvent
(ActionContributionItem.java:400)
	at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:842)
	at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:2894)
	at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2527)
	at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1570)
	at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1534)
	at org.eclipse.ui.internal.Workbench.createAndRunWorkbench
(Workbench.java:306)
	at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:143)
	at org.eclipse.ui.internal.ide.IDEApplication.run
(IDEApplication.java:103)
	at org.eclipse.core.internal.runtime.PlatformActivator$1.run
(PlatformActivator.java:228)
	at org.eclipse.core.runtime.adaptor.EclipseStarter.run
(EclipseStarter.java:344)
	at org.eclipse.core.runtime.adaptor.EclipseStarter.run
(EclipseStarter.java:156)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
	at java.lang.reflect.Method.invoke(Unknown Source)
	at org.eclipse.core.launcher.Main.invokeFramework(Main.java:315)
	at org.eclipse.core.launcher.Main.basicRun(Main.java:268)
	at org.eclipse.core.launcher.Main.run(Main.java:942)
	at org.eclipse.core.launcher.Main.main(Main.java:926)


*** This bug has been marked as a duplicate of 105557 ***</WithStack>
    <WithOutStack>I have unstalled the latest Eclipse 3.1 download, and also the latest UML2 
plugin, but still cannot initiate UML or EMF design. 

Error log gives the below trace details:

eclipse.buildId=I20050401-1645





*** This bug has been marked as a duplicate of 105557 ***</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="105559" />
    <CreationDate amount="2005-07-29 04:10:00 -0400" />
    <DupId amount="80000" />
    <classification amount="Eclipse" />
    <Product amount="JDT" />
    <component amount="Text" />
    <Version amount="3.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Linux" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>folding extremely unstable</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="2">
      <source_code type="functiondef">
        <location start="907" end="1757" />
        <code>this.addInternalFrameListener(new InternalFrameListener() {
		
			public void internalFrameDeactivated(InternalFrameEvent arg0) {
				// TODO Auto-generated method stub
		
			}
		
			public void internalFrameActivated(InternalFrameEvent arg0) {
				// TODO Auto-generated method stub
		
			}
		
			public void internalFrameDeiconified(InternalFrameEvent arg0) {
				// TODO Auto-generated method stub
		
			}
		
			public void internalFrameIconified(InternalFrameEvent arg0) {
				// TODO Auto-generated method stub
		
			}
		
			public void internalFrameClosed(InternalFrameEvent arg0) {
				// TODO Auto-generated method stub
		
			}
		
			public void internalFrameClosing(InternalFrameEvent arg0) {
				StartFrame.bph=null;
			}
		
			public void internalFrameOpened(InternalFrameEvent arg0) {
				// TODO Auto-generated method stub
		
			}
		
		}</code>
      </source_code>
      <source_code type="functioncall">
        <location start="1964" end="2015" />
        <code>is syntactically corrected to System.out.println();</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="DUPLICATE" />
    <WithStack>say i have a couples of inner classes (ActionListeners or so) folded.
now i insert between two folded entries "syso" (should expand to System.out.println()) -- but 
before i'm able to hit ctrl+space (or even worse, _while_ it's expanding) literally _all_ foldings 
of the whole file unfold! the whole file jumps for a while and after that the line i'm atm typing 
in has moved somwhere.
even worse, often a linebreak occurs too, mostly if i forgot the last letter and only type "sys" -- 
pressing ctrl+space then, it's expanded to "System." and a completion popup appears, i move 
the selection in the popup towards "sysout" -- at the very same moment the text jumps, the 
popup disappears but my "Return " inserts a linebreak instead.
if i make now an undo not only the newline is removed but the _whole_ line i typed before (in 
my example "System.").

to picture it:
assume the following methods folded

this.addInternalFrameListener(new InternalFrameListener() {
		
			public void internalFrameDeactivated(InternalFrameEvent arg0) {
				// TODO Auto-generated method stub
		
			}
		
			public void internalFrameActivated(InternalFrameEvent arg0) {
				// TODO Auto-generated method stub
		
			}
		
			public void internalFrameDeiconified(InternalFrameEvent arg0) {
				// TODO Auto-generated method stub
		
			}
		
			public void internalFrameIconified(InternalFrameEvent arg0) {
				// TODO Auto-generated method stub
		
			}
		
			public void internalFrameClosed(InternalFrameEvent arg0) {
				// TODO Auto-generated method stub
		
			}
		
			public void internalFrameClosing(InternalFrameEvent arg0) {
				StartFrame.bph=null;
			}
		
			public void internalFrameOpened(InternalFrameEvent arg0) {
				// TODO Auto-generated method stub
		
			}
		
		});

now i type 
syso
and press ctrl+space
the code unfolds, the newly typed "syso" is out of sight
i forgot:
if the code is unfolded and i resigned type my syso -- the foldingmarks disappear until the line 
is syntactically corrected to System.out.println();


*** This bug has been marked as a duplicate of 80000 ***</WithStack>
    <WithOutStack>say i have a couples of inner classes (ActionListeners or so) folded.
now i insert between two folded entries "syso" (should expand to System.out.println()) -- but 
before i'm able to hit ctrl+space (or even worse, _while_ it's expanding) literally _all_ foldings 
of the whole file unfold! the whole file jumps for a while and after that the line i'm atm typing 
in has moved somwhere.
even worse, often a linebreak occurs too, mostly if i forgot the last letter and only type "sys" -- 
pressing ctrl+space then, it's expanded to "System." and a completion popup appears, i move 
the selection in the popup towards "sysout" -- at the very same moment the text jumps, the 
popup disappears but my "Return " inserts a linebreak instead.
if i make now an undo not only the newline is removed but the _whole_ line i typed before (in 
my example "System.").

to picture it:
assume the following methods folded

this.addInternalFrameListener(new InternalFrameListener() {
		
			public void internalFrameDeactivated(InternalFrameEvent arg0) {
				// TODO Auto-generated method stub
		
			}
		
			public void internalFrameActivated(InternalFrameEvent arg0) {
				// TODO Auto-generated method stub
		
			}
		
			public void internalFrameDeiconified(InternalFrameEvent arg0) {
				// TODO Auto-generated method stub
		
			}
		
			public void internalFrameIconified(InternalFrameEvent arg0) {
				// TODO Auto-generated method stub
		
			}
		
			public void internalFrameClosed(InternalFrameEvent arg0) {
				// TODO Auto-generated method stub
		
			}
		
			public void internalFrameClosing(InternalFrameEvent arg0) {
				StartFrame.bph=null;
			}
		
			public void internalFrameOpened(InternalFrameEvent arg0) {
				// TODO Auto-generated method stub
		
			}
		
		});

now i type 
syso
and press ctrl+space
the code unfolds, the newly typed "syso" is out of sight
i forgot:
if the code is unfolded and i resigned type my syso -- the foldingmarks disappear until the line 
is syntactically corrected to System.out.println();


*** This bug has been marked as a duplicate of 80000 ***</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="105560" />
    <CreationDate amount="2005-07-29 04:21:00 -0400" />
    <DupId amount="104086" />
    <classification amount="WebTools" />
    <Product amount="WTP Source Editing" />
    <component amount="wst.xsd" />
    <Version amount="0.7" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows 2000" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>J2EE descriptors XSD Validation crashes</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="8">
        <Lines>
          <Line>1. Download the schema from http://www.ibm.com/webservices/xsd/j2ee_web_services_client_1_1.xsd and save it to your local drive. If the site is unavailable the schema is also available from http://java.sun.com/xml/ns/j2ee/j2ee_web_services_client_1_1.xsd.</Line>
          <Line>2.  In Eclipse, select Window-&gt;Preferences-&gt;Web and XML-&gt;XML Catalog. The XML catalog preference page will display.</Line>
          <Line>3. Click to Add... a new entry to the catalog and specify the following:</Line>
          <Line>URI:      The location of the schema on your local drive</Line>
          <Line>Key Type: Schema Location</Line>
          <Line>Key:      http://www.ibm.com/webservices/xsd/j2ee_web_services_client_1_1.xsd</Line>
          <Line>Click OK.</Line>
          <Line>4. Exit the preference page by clicking OK. Eclipse now has access to a local copy of the schema and will not attempt to retrieve it from the remote source.</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="CLOSED" />
    <resolution amount="DUPLICATE" />
    <WithStack>The xsd validation off application.xml crash. This xml uses 
this schema location 

http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/application_1_4.xsd

Schema location that uses a include of j2ee_1_4.xsd that uses 
this import

  &lt;xsd:import namespace="http://www.w3.org/XML/1998/namespace"
	      schemaLocation="http://www.w3.org/2001/xml.xsd"/&gt;

and this include
  &lt;xsd:include schemaLocation=
	"http://www.ibm.com/webservices/xsd/j2ee_web_services_client_1_1.xsd"/&gt;


A try thousend of combinatios using or not the Validation catalog or simply try
to validate this files in local downloading and translating uris to local-same
directory references. Not running, anyway.

I validate this files with other XML software and validations returns OK. 

Thanks
Lawrence, please investigate.  Thx.
Miguel, are you working connected to the internet or disconnected? There is a
bug in 0.7 where the XML validator always attempts to connect to the remote
schema location even if the schema is available locally.
Hi,

Maybe the issue is that in fact IBM has changed the location of the XSD file, and in fact "http://www.ibm.com/webservices/xsd/j2ee_web_services_client_1_1.xsd" is a redirect to "http://www-128.ibm.com/developerworks/webservices/jsrproject/j2ee_web_services_client_1_1.xsd"?
I have noticed that the resource Dan specified in comment #3 is sometimes unavailable. Bug 104086 is open to track a request to bundle this schema with WTP to remove the requirement to retrieve it remotely. We're awaiting legal guidance on whether this is possible.

As a workaround, you can add this schema to the XML catalog. With the schema in the XML catalog Eclipse will not try to retreive it from the remote site. Here are the specific steps to add it to the catalog:
1. Download the schema from http://www.ibm.com/webservices/xsd/j2ee_web_services_client_1_1.xsd and save it to your local drive. If the site is unavailable the schema is also available from http://java.sun.com/xml/ns/j2ee/j2ee_web_services_client_1_1.xsd.
2.  In Eclipse, select Window-&gt;Preferences-&gt;Web and XML-&gt;XML Catalog. The XML catalog preference page will display.
3. Click to Add... a new entry to the catalog and specify the following:
URI:      The location of the schema on your local drive
Key Type: Schema Location
Key:      http://www.ibm.com/webservices/xsd/j2ee_web_services_client_1_1.xsd
Click OK.
4. Exit the preference page by clicking OK. Eclipse now has access to a local copy of the schema and will not attempt to retrieve it from the remote source.

*** This bug has been marked as a duplicate of 104086 ***
Thanks Lawrence,

I can confirm that your suggestion works, hopefully it will be included locally into one of the next WTP .jar files.
This is part of a mass update to close out all stale WTP bugs which are in the resolved state without an appropriate targeted version.  If you feel this bug was closed inappropriately, please reopen.</WithStack>
    <WithOutStack>The xsd validation off application.xml crash. This xml uses 
this schema location 

http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/application_1_4.xsd

Schema location that uses a include of j2ee_1_4.xsd that uses 
this import

  &lt;xsd:import namespace="http://www.w3.org/XML/1998/namespace"
	      schemaLocation="http://www.w3.org/2001/xml.xsd"/&gt;

and this include
  &lt;xsd:include schemaLocation=
	"http://www.ibm.com/webservices/xsd/j2ee_web_services_client_1_1.xsd"/&gt;


A try thousend of combinatios using or not the Validation catalog or simply try
to validate this files in local downloading and translating uris to local-same
directory references. Not running, anyway.

I validate this files with other XML software and validations returns OK. 

Thanks
Lawrence, please investigate.  Thx.
Miguel, are you working connected to the internet or disconnected? There is a
bug in 0.7 where the XML validator always attempts to connect to the remote
schema location even if the schema is available locally.
Hi,

Maybe the issue is that in fact IBM has changed the location of the XSD file, and in fact "http://www.ibm.com/webservices/xsd/j2ee_web_services_client_1_1.xsd" is a redirect to "http://www-128.ibm.com/developerworks/webservices/jsrproject/j2ee_web_services_client_1_1.xsd"?
I have noticed that the resource Dan specified in comment #3 is sometimes unavailable. Bug 104086 is open to track a request to bundle this schema with WTP to remove the requirement to retrieve it remotely. We're awaiting legal guidance on whether this is possible.

As a workaround, you can add this schema to the XML catalog. With the schema in the XML catalog Eclipse will not try to retreive it from the remote site. Here are the specific steps to add it to the catalog:
1. Download the schema from http://www.ibm.com/webservices/xsd/j2ee_web_services_client_1_1.xsd and save it to your local drive. If the site is unavailable the schema is also available from http://java.sun.com/xml/ns/j2ee/j2ee_web_services_client_1_1.xsd.
2.  In Eclipse, select Window-&gt;Preferences-&gt;Web and XML-&gt;XML Catalog. The XML catalog preference page will display.
3. Click to Add... a new entry to the catalog and specify the following:
URI:      The location of the schema on your local drive
Key Type: Schema Location
Key:      http://www.ibm.com/webservices/xsd/j2ee_web_services_client_1_1.xsd
Click OK.
4. Exit the preference page by clicking OK. Eclipse now has access to a local copy of the schema and will not attempt to retrieve it from the remote source.

*** This bug has been marked as a duplicate of 104086 ***
Thanks Lawrence,

I can confirm that your suggestion works, hopefully it will be included locally into one of the next WTP .jar files.
This is part of a mass update to close out all stale WTP bugs which are in the resolved state without an appropriate targeted version.  If you feel this bug was closed inappropriately, please reopen.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="105561" />
    <CreationDate amount="2005-07-29 04:33:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="UI" />
    <Version amount="3.1" />
    <rep_platform amount="PC" />
    <op_sys amount="All" />
    <priority amount="P3" />
    <bug_severity amount="enhancement" />
    <Summery>[Wizards] Add public API to run wizards by wizard ID</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="WONTFIX" />
    <WithStack>Currently NewWizardAction allows creation of wizard for category ID. Could you 
please add new action or extend this one so wizard ID may be specified and 
corresponding wizard may be launched directly.

There is already internal NewWizardShortcutAction action which does similar 
thing, it may be modified slightly and moved into public API package.
I believe you could easily implement such an action using public API.  From the IWizardRegistry objects 
returned from workbench you can get IWIzardDescriptors.  From these you can create your own 
IWorkbenchWizards which you could then place in wizard containers of your choosing.
Thanks, the method you have described works. I think other users also will 
write the same code, so probably it worth to modify NewWizardAction slightly, 
i.e. add setWizardID() method and launch that wizard instead of category if 
wizard id is set.
Prakash is now responsible for watching bugs in the [Wizards] component area.
Wizards can be now invoked by passing the wizard ids as parameters to the correct command handlers (WizardHandler.New etc) We don't have plans to add anything to the actions.</WithStack>
    <WithOutStack>Currently NewWizardAction allows creation of wizard for category ID. Could you 
please add new action or extend this one so wizard ID may be specified and 
corresponding wizard may be launched directly.

There is already internal NewWizardShortcutAction action which does similar 
thing, it may be modified slightly and moved into public API package.
I believe you could easily implement such an action using public API.  From the IWizardRegistry objects 
returned from workbench you can get IWIzardDescriptors.  From these you can create your own 
IWorkbenchWizards which you could then place in wizard containers of your choosing.
Thanks, the method you have described works. I think other users also will 
write the same code, so probably it worth to modify NewWizardAction slightly, 
i.e. add setWizardID() method and launch that wizard instead of category if 
wizard id is set.
Prakash is now responsible for watching bugs in the [Wizards] component area.
Wizards can be now invoked by passing the wizard ids as parameters to the correct command handlers (WizardHandler.New etc) We don't have plans to add anything to the actions.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="105562" />
    <CreationDate amount="2005-07-29 04:42:00 -0400" />
    <DupId amount="" />
    <classification amount="BIRT" />
    <Product amount="BIRT" />
    <component amount="Chart" />
    <Version amount="unspecified" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="major" />
    <Summery>Set Y-axis of stock chart to invalid text type will cause exception</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="4">
        <Lines>
          <Line>1.New a data source and a dataset</Line>
          <Line>2.Insert a stock chart and set X series and Y series data</Line>
          <Line>3.Click Y-Axis in Data and set type to Text</Line>
          <Line>4.Click OK</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>Description:
Set Y-axis of stock chart to invalid text type will cause exception

Steps to reproduce:
1.New a data source and a dataset
2.Insert a stock chart and set X series and Y series data
3.Click Y-Axis in Data and set type to Text
4.Click OK

Expected result:
Preview fail and no exception

Actual result:
1.Unhandled event loop exception
  An exception stack trace is not available
2.For input string:"H5.3"
  java.lang.NumberFormatException: For input string: "H5.3"
	at java.lang.NumberFormatException.forInputString
(NumberFormatException.java:48)
	at java.lang.FloatingDecimal.readJavaFormatString
(FloatingDecimal.java:1207)
	at java.lang.Double.parseDouble(Double.java:220)
	at org.eclipse.birt.chart.datafeed.StockDataSetProcessorImpl.fromString
(StockDataSetProcessorImpl.java:273)
	at org.eclipse.birt.chart.model.impl.ChartImpl.createSampleRuntimeSeries
(ChartImpl.java:1375)
	at 
org.eclipse.birt.chart.reportitem.DesignerRepresentation.paintClientArea
(DesignerRepresentation.java:315)
	at org.eclipse.draw2d.Figure.paint(Figure.java:1055)
	at 
org.eclipse.birt.report.designer.internal.ui.editors.schematic.editparts.ReportD
esignEditPart$1.paintChildren(ReportDesignEditPart.java:180)
	at org.eclipse.draw2d.Figure.paintClientArea(Figure.java:1127)
	at org.eclipse.draw2d.Figure.paint(Figure.java:1055)
	at org.eclipse.draw2d.Figure.paintChildren(Figure.java:1091)
	at org.eclipse.draw2d.Figure.paintClientArea(Figure.java:1123)
	at org.eclipse.draw2d.Figure.paint(Figure.java:1055)
	at org.eclipse.draw2d.Figure.paintChildren(Figure.java:1091)
	at org.eclipse.draw2d.Figure.paintClientArea(Figure.java:1123)
	at org.eclipse.draw2d.Figure.paint(Figure.java:1055)
	at org.eclipse.draw2d.Figure.paintChildren(Figure.java:1091)
	at org.eclipse.draw2d.Figure.paintClientArea(Figure.java:1123)
	at org.eclipse.draw2d.ScalableFreeformLayeredPane.paintClientArea
(ScalableFreeformLayeredPane.java:61)
	at org.eclipse.draw2d.Figure.paint(Figure.java:1055)
	at org.eclipse.draw2d.Figure.paintChildren(Figure.java:1091)
	at org.eclipse.draw2d.Figure.paintClientArea(Figure.java:1123)
	at org.eclipse.draw2d.Figure.paint(Figure.java:1055)
	at org.eclipse.draw2d.Figure.paintChildren(Figure.java:1091)
	at org.eclipse.draw2d.Figure.paintClientArea(Figure.java:1118)
	at org.eclipse.draw2d.Viewport.paintClientArea(Viewport.java:156)
	at org.eclipse.draw2d.Figure.paint(Figure.java:1055)
	at org.eclipse.draw2d.Figure.paintChildren(Figure.java:1091)
	at org.eclipse.draw2d.Figure.paintClientArea(Figure.java:1123)
	at org.eclipse.draw2d.Figure.paint(Figure.java:1055)
	at org.eclipse.draw2d.DeferredUpdateManager.repairDamage
(DeferredUpdateManager.java:225)
	at org.eclipse.draw2d.DeferredUpdateManager.performUpdate
(DeferredUpdateManager.java:145)
	at 
org.eclipse.birt.report.designer.internal.ui.editors.notification.ReportDeferred
UpdateManager.performUpdate(ReportDeferredUpdateManager.java:33)
	at org.eclipse.draw2d.DeferredUpdateManager.performUpdate
(DeferredUpdateManager.java:165)
	at org.eclipse.draw2d.LightweightSystem.paint
(LightweightSystem.java:225)
	at org.eclipse.draw2d.LightweightSystem$4.handleEvent
(LightweightSystem.java:128)
	at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:843)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:867)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:852)
	at org.eclipse.swt.widgets.Composite.WM_PAINT(Composite.java:1153)
	at org.eclipse.swt.widgets.Control.windowProc(Control.java:3090)
	at org.eclipse.swt.widgets.Display.windowProc(Display.java:3706)
	at org.eclipse.swt.internal.win32.OS.DispatchMessageW(Native Method)
	at org.eclipse.swt.internal.win32.OS.DispatchMessage(OS.java:1656)
	at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2711)
	at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1699)
	at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1663)
	at org.eclipse.ui.internal.Workbench.createAndRunWorkbench
(Workbench.java:367)
	at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:143)
	at org.eclipse.ui.internal.ide.IDEApplication.run
(IDEApplication.java:103)
	at org.eclipse.core.internal.runtime.PlatformActivator$1.run
(PlatformActivator.java:226)
	at org.eclipse.core.runtime.adaptor.EclipseStarter.run
(EclipseStarter.java:376)
	at org.eclipse.core.runtime.adaptor.EclipseStarter.run
(EclipseStarter.java:163)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke
(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke
(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:324)
	at org.eclipse.core.launcher.Main.invokeFramework(Main.java:334)
	at org.eclipse.core.launcher.Main.basicRun(Main.java:278)
	at org.eclipse.core.launcher.Main.run(Main.java:973)
	at org.eclipse.core.launcher.Main.main(Main.java:948)
Created attachment 25458
sample report

attach report
Fixed.
Verified in build 20050815</WithStack>
    <WithOutStack>Description:
Set Y-axis of stock chart to invalid text type will cause exception

Steps to reproduce:
1.New a data source and a dataset
2.Insert a stock chart and set X series and Y series data
3.Click Y-Axis in Data and set type to Text
4.Click OK

Expected result:
Preview fail and no exception

Actual result:
1.Unhandled event loop exception
  An exception stack trace is not available
2.For input string:"H5.3"
  java.lang.NumberFormatException: For input string: "H5.3"
	at java.lang.NumberFormatException.forInputString
(NumberFormatException.java:48)
	at java.lang.FloatingDecimal.readJavaFormatString
(FloatingDecimal.java:1207)
	at java.lang.Double.parseDouble(Double.java:220)
	at org.eclipse.birt.chart.datafeed.StockDataSetProcessorImpl.fromString
(StockDataSetProcessorImpl.java:273)
	at org.eclipse.birt.chart.model.impl.ChartImpl.createSampleRuntimeSeries
(ChartImpl.java:1375)
	at 
org.eclipse.birt.chart.reportitem.DesignerRepresentation.paintClientArea
(DesignerRepresentation.java:315)
	at org.eclipse.draw2d.Figure.paint(Figure.java:1055)
	at 
org.eclipse.birt.report.designer.internal.ui.editors.schematic.editparts.ReportD
esignEditPart$1.paintChildren(ReportDesignEditPart.java:180)
	at org.eclipse.draw2d.Figure.paintClientArea(Figure.java:1127)
	at org.eclipse.draw2d.Figure.paint(Figure.java:1055)
	at org.eclipse.draw2d.Figure.paintChildren(Figure.java:1091)
	at org.eclipse.draw2d.Figure.paintClientArea(Figure.java:1123)
	at org.eclipse.draw2d.Figure.paint(Figure.java:1055)
	at org.eclipse.draw2d.Figure.paintChildren(Figure.java:1091)
	at org.eclipse.draw2d.Figure.paintClientArea(Figure.java:1123)
	at org.eclipse.draw2d.Figure.paint(Figure.java:1055)
	at org.eclipse.draw2d.Figure.paintChildren(Figure.java:1091)
	at org.eclipse.draw2d.Figure.paintClientArea(Figure.java:1123)
	at org.eclipse.draw2d.ScalableFreeformLayeredPane.paintClientArea
(ScalableFreeformLayeredPane.java:61)
	at org.eclipse.draw2d.Figure.paint(Figure.java:1055)
	at org.eclipse.draw2d.Figure.paintChildren(Figure.java:1091)
	at org.eclipse.draw2d.Figure.paintClientArea(Figure.java:1123)
	at org.eclipse.draw2d.Figure.paint(Figure.java:1055)
	at org.eclipse.draw2d.Figure.paintChildren(Figure.java:1091)
	at org.eclipse.draw2d.Figure.paintClientArea(Figure.java:1118)
	at org.eclipse.draw2d.Viewport.paintClientArea(Viewport.java:156)
	at org.eclipse.draw2d.Figure.paint(Figure.java:1055)
	at org.eclipse.draw2d.Figure.paintChildren(Figure.java:1091)
	at org.eclipse.draw2d.Figure.paintClientArea(Figure.java:1123)
	at org.eclipse.draw2d.Figure.paint(Figure.java:1055)
	at org.eclipse.draw2d.DeferredUpdateManager.repairDamage
(DeferredUpdateManager.java:225)
	at org.eclipse.draw2d.DeferredUpdateManager.performUpdate
(DeferredUpdateManager.java:145)
	at 
org.eclipse.birt.report.designer.internal.ui.editors.notification.ReportDeferred
UpdateManager.performUpdate(ReportDeferredUpdateManager.java:33)
	at org.eclipse.draw2d.DeferredUpdateManager.performUpdate
(DeferredUpdateManager.java:165)
	at org.eclipse.draw2d.LightweightSystem.paint
(LightweightSystem.java:225)
	at org.eclipse.draw2d.LightweightSystem$4.handleEvent
(LightweightSystem.java:128)
	at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:843)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:867)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:852)
	at org.eclipse.swt.widgets.Composite.WM_PAINT(Composite.java:1153)
	at org.eclipse.swt.widgets.Control.windowProc(Control.java:3090)
	at org.eclipse.swt.widgets.Display.windowProc(Display.java:3706)
	at org.eclipse.swt.internal.win32.OS.DispatchMessageW(Native Method)
	at org.eclipse.swt.internal.win32.OS.DispatchMessage(OS.java:1656)
	at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2711)
	at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1699)
	at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1663)
	at org.eclipse.ui.internal.Workbench.createAndRunWorkbench
(Workbench.java:367)
	at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:143)
	at org.eclipse.ui.internal.ide.IDEApplication.run
(IDEApplication.java:103)
	at org.eclipse.core.internal.runtime.PlatformActivator$1.run
(PlatformActivator.java:226)
	at org.eclipse.core.runtime.adaptor.EclipseStarter.run
(EclipseStarter.java:376)
	at org.eclipse.core.runtime.adaptor.EclipseStarter.run
(EclipseStarter.java:163)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke
(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke
(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:324)
	at org.eclipse.core.launcher.Main.invokeFramework(Main.java:334)
	at org.eclipse.core.launcher.Main.basicRun(Main.java:278)
	at org.eclipse.core.launcher.Main.run(Main.java:973)
	at org.eclipse.core.launcher.Main.main(Main.java:948)
Created attachment 25458
sample report

attach report
Fixed.
Verified in build 20050815</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="105563" />
    <CreationDate amount="2005-07-29 05:21:00 -0400" />
    <DupId amount="" />
    <classification amount="BIRT" />
    <Product amount="BIRT" />
    <component amount="Chart" />
    <Version amount="unspecified" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Format doesn't work in chart Series Grouping Key inside Y Axis</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="6">
        <Lines>
          <Line>1.New a data source and a dataset</Line>
          <Line>2.Insert a chart</Line>
          <Line>3.Set X series and Y series</Line>
          <Line>4.Set Series Grouping Key in Y Axis to a dataset column and use format</Line>
          <Line>specifier editor to set format</Line>
          <Line>5.Click Ok and preview</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>Description:
Format doesn't work in chart Series Grouping Key inside Y Axis

Steps to reproduce:
1.New a data source and a dataset
2.Insert a chart
3.Set X series and Y series
4.Set Series Grouping Key in Y Axis to a dataset column and use format 
specifier editor to set format
5.Click Ok and preview

Expected result:
The format in step 4 works

Actual result:
It didn't work

Test Build:20050729
Let's fix it if it's an engine issue
Currently, the Y-axis grouping sereis shares the formatSpecifier with the 
associated Y-Series, If the legend type is "Series", it will work. If the 
legend type is "Category", it will use the formatSpecifier of the baseSeries 
instead.
Verified in build 20050815
verified in build 20050815</WithStack>
    <WithOutStack>Description:
Format doesn't work in chart Series Grouping Key inside Y Axis

Steps to reproduce:
1.New a data source and a dataset
2.Insert a chart
3.Set X series and Y series
4.Set Series Grouping Key in Y Axis to a dataset column and use format 
specifier editor to set format
5.Click Ok and preview

Expected result:
The format in step 4 works

Actual result:
It didn't work

Test Build:20050729
Let's fix it if it's an engine issue
Currently, the Y-axis grouping sereis shares the formatSpecifier with the 
associated Y-Series, If the legend type is "Series", it will work. If the 
legend type is "Category", it will use the formatSpecifier of the baseSeries 
instead.
Verified in build 20050815
verified in build 20050815</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="105564" />
    <CreationDate amount="2005-07-29 05:44:00 -0400" />
    <DupId amount="" />
    <classification amount="Tools" />
    <Product amount="CDT" />
    <component amount="cdt-debug-cdi-gdb" />
    <Version amount="3.0" />
    <rep_platform amount="All" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Debugger terminates suddenly. Unexpected behaviour</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="NEW" />
    <resolution amount="" />
    <WithStack>I created a managed make C++ project. My program has some ‘cin’ statement. I 
set a breakpoint on one of the ‘cin’ statement. I started debugging and 
resumed it to reach the break point. I step over it. While it waits for the 
input, I disable and enable the breakpoint in break point view. I saw the 
debugger is terminated suddenly. It is regularly happens for input statements.

Can you look at this problem?
Returning to the pool.</WithStack>
    <WithOutStack>I created a managed make C++ project. My program has some ‘cin’ statement. I 
set a breakpoint on one of the ‘cin’ statement. I started debugging and 
resumed it to reach the break point. I step over it. While it waits for the 
input, I disable and enable the breakpoint in break point view. I saw the 
debugger is terminated suddenly. It is regularly happens for input statements.

Can you look at this problem?
Returning to the pool.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="105565" />
    <CreationDate amount="2005-07-29 05:44:00 -0400" />
    <DupId amount="" />
    <classification amount="WebTools" />
    <Product amount="WTP Webservices" />
    <component amount="wst.ws" />
    <Version amount="0.7" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Web Services Wizard to generates Java bean skeleton using old Axis API</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="3">
        <Lines>
          <Line>1. org.apache.axis.description.ElementDesc does not have method setNillable(boolean)</Line>
          <Line />
          <Line>2. no signature for org.apache.axis.description.TypeDesc(class, boolean)</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="CLOSED" />
    <resolution amount="INVALID" />
    <WithStack>WST M7RC5
IBM Java 1.4.2/SR1

Error reported whilst creating+deploying freshly generated Java bean skeleton.
Error from wizard identical to that reported in bug:
https://bugs.eclipse.org/bugs/show_bug.cgi?id=102117 (and related bug 102502)

The wizard does generate the skeleton files (which are identical to that
generated by 7RC4), albeit now with compile errors. These errors seem to suggest
different levels of axis which appear consistent with upgrade from Axis 1.2RC3
to Axis 1.2.1. 

Below are 2 examples from the generated code: 

1. org.apache.axis.description.ElementDesc does not have method setNillable(boolean)
 
2. no signature for org.apache.axis.description.TypeDesc(class, boolean)

* * *

Curiously, setting project classpath to have Axis 1.2RC3 at front does not
correct the reported errors. Inspection of code displays that the signatures are
present in Axis 1.2RC3, so I would expect this classpath setting to have
functioned. The level of Axis shipped with M7RC5 is Axis 1.2.1.

* * *

Output to Eclipse console uploaded (following failed attempt to generate
skeleton). https://bugs.eclipse.org/bugs/attachment.cgi?id=25417

Scenario can be located 
https://bugs.eclipse.org/bugs/attachment.cgi?id=25287
By allowing the wizard to pull the jars (incl axis) into the workspace the
errors cleared. Cancelling the bug.

Note - there is a small difference in the file size between the Axis 1.2.1
axis.jar from apache.org and that delivered with Eclipse WPT7M, whilst both
claim to be from same level.
Bug was intended to be cancelled. Apologies for delay.</WithStack>
    <WithOutStack>WST M7RC5
IBM Java 1.4.2/SR1

Error reported whilst creating+deploying freshly generated Java bean skeleton.
Error from wizard identical to that reported in bug:
https://bugs.eclipse.org/bugs/show_bug.cgi?id=102117 (and related bug 102502)

The wizard does generate the skeleton files (which are identical to that
generated by 7RC4), albeit now with compile errors. These errors seem to suggest
different levels of axis which appear consistent with upgrade from Axis 1.2RC3
to Axis 1.2.1. 

Below are 2 examples from the generated code: 

1. org.apache.axis.description.ElementDesc does not have method setNillable(boolean)
 
2. no signature for org.apache.axis.description.TypeDesc(class, boolean)

* * *

Curiously, setting project classpath to have Axis 1.2RC3 at front does not
correct the reported errors. Inspection of code displays that the signatures are
present in Axis 1.2RC3, so I would expect this classpath setting to have
functioned. The level of Axis shipped with M7RC5 is Axis 1.2.1.

* * *

Output to Eclipse console uploaded (following failed attempt to generate
skeleton). https://bugs.eclipse.org/bugs/attachment.cgi?id=25417

Scenario can be located 
https://bugs.eclipse.org/bugs/attachment.cgi?id=25287
By allowing the wizard to pull the jars (incl axis) into the workspace the
errors cleared. Cancelling the bug.

Note - there is a small difference in the file size between the Axis 1.2.1
axis.jar from apache.org and that delivered with Eclipse WPT7M, whilst both
claim to be from same level.
Bug was intended to be cancelled. Apologies for delay.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="105566" />
    <CreationDate amount="2005-07-29 05:48:00 -0400" />
    <DupId amount="" />
    <classification amount="WebTools" />
    <Product amount="WTP Source Editing" />
    <component amount="jst.jsp" />
    <Version amount="0.7" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>When validating JSP pages, the tag &lt;bean:define id=""&gt; is not taken inot account</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="1">
      <source_code type="ifstatement">
        <location start="2827" end="2873" />
        <code>&lt;%if (!type.equalsIgnoreCase("")){%&gt; hello &lt;%}</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>Hello,

when the jsp pages are validated, the bean creation is noticed by the
validator/code completion if the bean is created with &lt;jsp:useBean&gt; but not if
it created with &lt;bean:define&gt; (struts-bean.tld).

As a result, errors are raised reporting that the bean is not defined in
scriptlet although it is.

I realize that this more about Struts support which is not really on the current
scope of the webtools. 
Anyway, I just wanted you to know.

Cheers,
Bertrand. 

Webtools 0.7rc5 + Eclipse 3.1
Using WTP 0.7rc5, I have struts-examples.war loaded in my workspace and 
everything seems fine in exercise/bean-define.jsp.  I have no validation 
errors about defined variables and I am able to get the variables as proposals 
when I perform content assist in the scriptlet regions.

I assume you are not getting content assist proposals for your defined beans 
in scriplet regions either?  Do you have struts.jar included in your project?  
I think if you only have the struts tlds this will not work.
I installed 0.7 full package. 

I use struts 1.1.jar + struts-el.jar as a separate package. This is constraint
of the project i'm working on. 

I'll install the example and do the test with them. 
Meanwhile, I attached my page and a screenshot. 

PS : congrats for the release and the .deployables files now marked as 'derived'.
Created attachment 25501
Error in bean define tag

I don't think the pb comes from the uri (the completion on the tags works ok)
Created attachment 25502
Errors while validating my page
Amy, will you please triage these to determine proper owner (if you can't fix,
that is). 

Triaging to Phil :)
It appears that the taglib resolves with:
   &lt;%@ taglib uri="/tags/struts-bean" prefix="bean" %&gt;

but not this:
   &lt;%@ taglib uri="/WEB-INF/tld/struts-bean.tld" prefix="bean"%&gt;


To debug I set a breakpoint in TaglibHelper#getTaglibVariables():

the tag "bean:define"'s CM declaration is found w/ the first version of the taglib uri (/tags/struts-bean), but not the second (/WEB-INF/tld/struts-bean.tld). 

Pasing along to the TaglibController expert for comment.
Hi, I've found that this same type of issue occurs not just in this situation, but also for &lt;tiles:useAttribute&gt; attributes:

Here is my JSP:
&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"&gt;
&lt;%@ taglib uri="struts-tiles.tld" prefix="tiles" %&gt;
&lt;%@ taglib uri="struts-html.tld" prefix="html" %&gt;
&lt;%@ taglib uri="struts-bean.tld" prefix="bean" %&gt;
&lt;%@ taglib uri="struts-logic.tld" prefix="logic" %&gt;
&lt;%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %&gt;
&lt;%@ taglib prefix="fn" uri="http://java.sun.com/jsp/jstl/functions" %&gt;
&lt;%@page language="java" contentType="text/html; charset=ISO-8859-1" pageEncoding="ISO-8859-1"%&gt;
&lt;tiles:useAttribute classname="java.lang.String" id="type" name="type" scope="page" /&gt;
&lt;body&gt;
&lt;%if (!type.equalsIgnoreCase("")){%&gt; hello &lt;%} %&gt;
&lt;/body&gt;

In Eclipse 3.1.1 with wtp-all-in-one-sdk-1.0 I get: "type cannot be resolved."

Thanks,
Tish

Bertrand, was the struts.jar file in the project and physically located under the workspace directory, or somewhere else?
Believed to be fixed in 1.5.4.
Verified with R-1.5.4-200705021353; closing.  Bertrand, please reopen if you find it to still be a problem.</WithStack>
    <WithOutStack>Hello,

when the jsp pages are validated, the bean creation is noticed by the
validator/code completion if the bean is created with &lt;jsp:useBean&gt; but not if
it created with &lt;bean:define&gt; (struts-bean.tld).

As a result, errors are raised reporting that the bean is not defined in
scriptlet although it is.

I realize that this more about Struts support which is not really on the current
scope of the webtools. 
Anyway, I just wanted you to know.

Cheers,
Bertrand. 

Webtools 0.7rc5 + Eclipse 3.1
Using WTP 0.7rc5, I have struts-examples.war loaded in my workspace and 
everything seems fine in exercise/bean-define.jsp.  I have no validation 
errors about defined variables and I am able to get the variables as proposals 
when I perform content assist in the scriptlet regions.

I assume you are not getting content assist proposals for your defined beans 
in scriplet regions either?  Do you have struts.jar included in your project?  
I think if you only have the struts tlds this will not work.
I installed 0.7 full package. 

I use struts 1.1.jar + struts-el.jar as a separate package. This is constraint
of the project i'm working on. 

I'll install the example and do the test with them. 
Meanwhile, I attached my page and a screenshot. 

PS : congrats for the release and the .deployables files now marked as 'derived'.
Created attachment 25501
Error in bean define tag

I don't think the pb comes from the uri (the completion on the tags works ok)
Created attachment 25502
Errors while validating my page
Amy, will you please triage these to determine proper owner (if you can't fix,
that is). 

Triaging to Phil :)
It appears that the taglib resolves with:
   &lt;%@ taglib uri="/tags/struts-bean" prefix="bean" %&gt;

but not this:
   &lt;%@ taglib uri="/WEB-INF/tld/struts-bean.tld" prefix="bean"%&gt;


To debug I set a breakpoint in TaglibHelper#getTaglibVariables():

the tag "bean:define"'s CM declaration is found w/ the first version of the taglib uri (/tags/struts-bean), but not the second (/WEB-INF/tld/struts-bean.tld). 

Pasing along to the TaglibController expert for comment.
Hi, I've found that this same type of issue occurs not just in this situation, but also for &lt;tiles:useAttribute&gt; attributes:

Here is my JSP:
&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"&gt;
&lt;%@ taglib uri="struts-tiles.tld" prefix="tiles" %&gt;
&lt;%@ taglib uri="struts-html.tld" prefix="html" %&gt;
&lt;%@ taglib uri="struts-bean.tld" prefix="bean" %&gt;
&lt;%@ taglib uri="struts-logic.tld" prefix="logic" %&gt;
&lt;%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %&gt;
&lt;%@ taglib prefix="fn" uri="http://java.sun.com/jsp/jstl/functions" %&gt;
&lt;%@page language="java" contentType="text/html; charset=ISO-8859-1" pageEncoding="ISO-8859-1"%&gt;
&lt;tiles:useAttribute classname="java.lang.String" id="type" name="type" scope="page" /&gt;
&lt;body&gt;
&lt;%if (!type.equalsIgnoreCase("")){%&gt; hello &lt;%} %&gt;
&lt;/body&gt;

In Eclipse 3.1.1 with wtp-all-in-one-sdk-1.0 I get: "type cannot be resolved."

Thanks,
Tish

Bertrand, was the struts.jar file in the project and physically located under the workspace directory, or somewhere else?
Believed to be fixed in 1.5.4.
Verified with R-1.5.4-200705021353; closing.  Bertrand, please reopen if you find it to still be a problem.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="105567" />
    <CreationDate amount="2005-07-29 06:38:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="JDT" />
    <component amount="UI" />
    <Version amount="3.0.1" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>[browsing] Wrong alphabetic order for inner classes inside the members view</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="WORKSFORME" />
    <WithStack>The alphabetic sorting inside the members view is wrong if you use inner 
classes. The inner classes will be sorted in alphabetic order if the button is 
unpressed. It means, that the alphabetic sorting for inner classes works on the 
opposite button state.
Moving to JDT..you should also try on Eclipse 3.1
Works for me in I20060807-0010.</WithStack>
    <WithOutStack>The alphabetic sorting inside the members view is wrong if you use inner 
classes. The inner classes will be sorted in alphabetic order if the button is 
unpressed. It means, that the alphabetic sorting for inner classes works on the 
opposite button state.
Moving to JDT..you should also try on Eclipse 3.1
Works for me in I20060807-0010.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="105568" />
    <CreationDate amount="2005-07-29 08:36:00 -0400" />
    <DupId amount="106448" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="User Assistance" />
    <Version amount="3.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="enhancement" />
    <Summery>[Help] Tutorial screens too tightly integrated with IDE</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="DUPLICATE" />
    <WithStack>Am new to Eclipse and am learning that IDE. Am also refamiliarizing myself with 
Java. In doing so, I am running the tutorials found via help contents. Had 
hoped to read the tutorial and implement while reading. However, am finding 
that the tutorial is not scrollable while menu dialogs are open. For instance, 
on my dual-screen system, the tutorial is on one crt with eclipse workbench on 
another. When the wizard for creating a new Java project is running, the 
tutorial screen is not scrollable. For me, this inhibits the learning process. 
The help screen should be decoupled from the main workbench and its dialogs.
This was fixed on windows for 3.2 but is still a problem for other platforms. Note that there is always the workaround of telling help to launch an external browser in the Help preference page.

*** This bug has been marked as a duplicate of 106448 ***</WithStack>
    <WithOutStack>Am new to Eclipse and am learning that IDE. Am also refamiliarizing myself with 
Java. In doing so, I am running the tutorials found via help contents. Had 
hoped to read the tutorial and implement while reading. However, am finding 
that the tutorial is not scrollable while menu dialogs are open. For instance, 
on my dual-screen system, the tutorial is on one crt with eclipse workbench on 
another. When the wizard for creating a new Java project is running, the 
tutorial screen is not scrollable. For me, this inhibits the learning process. 
The help screen should be decoupled from the main workbench and its dialogs.
This was fixed on windows for 3.2 but is still a problem for other platforms. Note that there is always the workaround of telling help to launch an external browser in the Help preference page.

*** This bug has been marked as a duplicate of 106448 ***</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="105569" />
    <CreationDate amount="2005-07-29 08:40:00 -0400" />
    <DupId amount="106600" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="Text" />
    <Version amount="3.1" />
    <rep_platform amount="PC" />
    <op_sys amount="Linux-GTK" />
    <priority amount="P2" />
    <bug_severity amount="normal" />
    <Summery>[] Text editor does not deal gracefully with the 0 char</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="2">
      <source_code type="import">
        <location start="2814" end="2832" />
        <code>import java.io.*;</code>
      </source_code>
      <source_code type="class">
        <location start="2834" end="3142" />
        <code>public class Test {
  public static void main(String[] args) throws Exception {
    FileInputStream fis = new FileInputStream(args[0]);
    for (int i = 0,c; i &lt; 100 &amp;&amp; (c = fis.read()) != -1; i++)
      System.out.println ("#" + i + " - " + Integer.toHexString(c) + " - " +
(char) c);
    fis.close();
  }
}</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="1">
      <Enumeration lines="5">
        <Lines>
          <Line>1. download R3.1</Line>
          <Line>2. create empty simple or Java project</Line>
          <Line>3. save attached file to disk</Line>
          <Line>4. add attached file to the project</Line>
          <Line>5. either open the file that's in the project or use File &gt; Open File...</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="RESOLVED" />
    <resolution amount="DUPLICATE" />
    <WithStack>See attached file.

There are "\0" embedded in the text stream and this causes the remainder of a 
text line not to be rendered.

Øyvind
Created attachment 25462
Example text file
http://dev.eclipse.org/viewcvs/index.cgi/%7Echeckout%7E/platform-text-home/development/bug-incomplete.htm
Will attach two pictures to show the problem
Created attachment 25668
See how emacs renders \0
Created attachment 25669
Eclipse terminates the rendering of the line upon encountering a \0
Emacs renders "^@" when it encounters "\0", whereas Eclipse simply terminates 
rendering of that line.
Works for me using R3.1.

1. download R3.1
2. create empty simple or Java project
3. save attached file to disk
4. add attached file to the project
5. either open the file that's in the project or use File &gt; Open File...

This works with both the Java and the Text editor (see upcoming picture)
Created attachment 25670
The file in the text editor
This only happens Eclipse 3.1 Linux GTK &amp; JRE 5.0.

Works fine w/Eclipse 3.1 Windows and JRE 1.4.2.

I don't know whether it is JRE 5.0 or Linux GTK that is the important 
difference.
What about setting the correct OS when filing the bug - would have saved us both
some cycles. ;-)

Not much we can do. This is caused by FileInputStream. I suggest to file a bug
report against Sun. Also, using a FileReader instead seems not to fix the problem.

Moving to Platform Resources for final comment (we get the stream via
IFile.getContents().
(In reply to comment #10)
&gt; What about setting the correct OS when filing the bug - would have saved us both
&gt; some cycles. ;-)

I should have. Once in a blue moon it is important w.r.t. bugs in Eclipse.
 
&gt; Not much we can do. This is caused by FileInputStream. I suggest to file a bug
&gt; report against Sun.

Eeehhh.... I think I'll drop the ball here. I've reported stuff to Sun before
and there just isn't a positive expected return on investment.

&gt; Also, using a FileReader instead seems not to fix the problem.
&gt;
&gt; Moving to Platform Resources for final comment (we get the stream via
&gt; IFile.getContents().

Thanks.

Øyvind



More 0-char rendering problems, but is it related?

https://bugs.eclipse.org/bugs/show_bug.cgi?id=106600
This seems to be a presentation problem. I would be really surprised if this has
anything to do with reading the file contents. InputStreams do not care about
the contents of the file, it is just a stream of bytes. 

Daniel, how did you confirm the problem? Did you dump the file contents to the
console, or only checked the resulting string read from the file by using the
Eclipse debugger (which uses SWT)?
This bug is about cutting a line at 0c. I debugged the code and you see that the
bytes (or chars if using the FileReader) aren't there. Bug 106600 is unrelated
to this one.
I run this small test program:

import java.io.*;

public class Test {
  public static void main(String[] args) throws Exception {
    FileInputStream fis = new FileInputStream(args[0]);
    for (int i = 0,c; i &lt; 100 &amp;&amp; (c = fis.read()) != -1; i++)
      System.out.println ("#" + i + " - " + Integer.toHexString(c) + " - " +
(char) c);
    fis.close();
  }
}

It dumps the bytes in a file provided as argument (#offset - value as hex -
value as char). If I run it against the file attached, this is the output for
the first lines:

#0 - 0 -
#1 - 0 -
#2 - 23 - #
#3 - 31 - 1
#4 - 2c - ,
#5 - 70 - p
#6 - 67 - g
#7 - 65 - e
#8 - 74 - t
#9 - 20 -
#10 - 30 - 0
#11 - 78 - x
#12 - 32 - 2
#13 - 39 - 9
#14 - 63 - c
#15 - d -
#16 - a -
 
#17 - 46 - F
#18 - 31 - 1
#19 - 20 -
#20 - 67 - g
#21 - 65 - e
#22 - 74 - t
#23 - 20 -
#24 - 30 - 0
#25 - 2f - /
#26 - 30 - 0
#27 - 78 - x
#28 - 30 - 0
#29 - 30 - 0
#30 - 30 - 0
#31 - 30 - 0

...

No bytes were omitted, so this is indeed happening somewhere else (Text or SWT).
However, I would not be surprised if opening a binary file in a text editor did
not work great anyway. 

Moving back to Platform/Text.
Maybe I was fooled by some ui big when debugging the stuff. Will try again...
This is a duplicate of bug 106600.

*** This bug has been marked as a duplicate of 106600 ***</WithStack>
    <WithOutStack>See attached file.

There are "\0" embedded in the text stream and this causes the remainder of a 
text line not to be rendered.

Øyvind
Created attachment 25462
Example text file
http://dev.eclipse.org/viewcvs/index.cgi/%7Echeckout%7E/platform-text-home/development/bug-incomplete.htm
Will attach two pictures to show the problem
Created attachment 25668
See how emacs renders \0
Created attachment 25669
Eclipse terminates the rendering of the line upon encountering a \0
Emacs renders "^@" when it encounters "\0", whereas Eclipse simply terminates 
rendering of that line.
Works for me using R3.1.

1. download R3.1
2. create empty simple or Java project
3. save attached file to disk
4. add attached file to the project
5. either open the file that's in the project or use File &gt; Open File...

This works with both the Java and the Text editor (see upcoming picture)
Created attachment 25670
The file in the text editor
This only happens Eclipse 3.1 Linux GTK &amp; JRE 5.0.

Works fine w/Eclipse 3.1 Windows and JRE 1.4.2.

I don't know whether it is JRE 5.0 or Linux GTK that is the important 
difference.
What about setting the correct OS when filing the bug - would have saved us both
some cycles. ;-)

Not much we can do. This is caused by FileInputStream. I suggest to file a bug
report against Sun. Also, using a FileReader instead seems not to fix the problem.

Moving to Platform Resources for final comment (we get the stream via
IFile.getContents().
(In reply to comment #10)
&gt; What about setting the correct OS when filing the bug - would have saved us both
&gt; some cycles. ;-)

I should have. Once in a blue moon it is important w.r.t. bugs in Eclipse.
 
&gt; Not much we can do. This is caused by FileInputStream. I suggest to file a bug
&gt; report against Sun.

Eeehhh.... I think I'll drop the ball here. I've reported stuff to Sun before
and there just isn't a positive expected return on investment.

&gt; Also, using a FileReader instead seems not to fix the problem.
&gt;
&gt; Moving to Platform Resources for final comment (we get the stream via
&gt; IFile.getContents().

Thanks.

Øyvind



More 0-char rendering problems, but is it related?

https://bugs.eclipse.org/bugs/show_bug.cgi?id=106600
This seems to be a presentation problem. I would be really surprised if this has
anything to do with reading the file contents. InputStreams do not care about
the contents of the file, it is just a stream of bytes. 

Daniel, how did you confirm the problem? Did you dump the file contents to the
console, or only checked the resulting string read from the file by using the
Eclipse debugger (which uses SWT)?
This bug is about cutting a line at 0c. I debugged the code and you see that the
bytes (or chars if using the FileReader) aren't there. Bug 106600 is unrelated
to this one.
I run this small test program:

import java.io.*;

public class Test {
  public static void main(String[] args) throws Exception {
    FileInputStream fis = new FileInputStream(args[0]);
    for (int i = 0,c; i &lt; 100 &amp;&amp; (c = fis.read()) != -1; i++)
      System.out.println ("#" + i + " - " + Integer.toHexString(c) + " - " +
(char) c);
    fis.close();
  }
}

It dumps the bytes in a file provided as argument (#offset - value as hex -
value as char). If I run it against the file attached, this is the output for
the first lines:

#0 - 0 -
#1 - 0 -
#2 - 23 - #
#3 - 31 - 1
#4 - 2c - ,
#5 - 70 - p
#6 - 67 - g
#7 - 65 - e
#8 - 74 - t
#9 - 20 -
#10 - 30 - 0
#11 - 78 - x
#12 - 32 - 2
#13 - 39 - 9
#14 - 63 - c
#15 - d -
#16 - a -
 
#17 - 46 - F
#18 - 31 - 1
#19 - 20 -
#20 - 67 - g
#21 - 65 - e
#22 - 74 - t
#23 - 20 -
#24 - 30 - 0
#25 - 2f - /
#26 - 30 - 0
#27 - 78 - x
#28 - 30 - 0
#29 - 30 - 0
#30 - 30 - 0
#31 - 30 - 0

...

No bytes were omitted, so this is indeed happening somewhere else (Text or SWT).
However, I would not be surprised if opening a binary file in a text editor did
not work great anyway. 

Moving back to Platform/Text.
Maybe I was fooled by some ui big when debugging the stuff. Will try again...
This is a duplicate of bug 106600.

*** This bug has been marked as a duplicate of 106600 ***</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="105570" />
    <CreationDate amount="2005-07-29 09:41:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="JDT" />
    <component amount="Core" />
    <Version amount="3.0.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>"Maximum line width" setting on "Line Wrapping" tab of Code Formatter is ignored</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="WORKSFORME" />
    <WithStack>It appears to ignore the setting and use 80 regardless of the setting.  It did 
leave one line of length 81 unwrapped. I tried settings of 100 and 120, and 
tried both long comments and long expressions; I always got wrapped at around 
80.
Martin, can you please check if this is still a problem in 3.1.
Olivier is the expert...
It also seems to me that the maximum line width is not enforced everywhere. E.g.
Open CopyToClipboardAction.java from the org.eclipse.search plugin and format it
with line width 60. Several lines stay very long but could be broken e.g. on dots.
Could you please provide an example where the maximum length is always
considered to be 80?
Closing as WORKSFORME.
Requested information was never provided.</WithStack>
    <WithOutStack>It appears to ignore the setting and use 80 regardless of the setting.  It did 
leave one line of length 81 unwrapped. I tried settings of 100 and 120, and 
tried both long comments and long expressions; I always got wrapped at around 
80.
Martin, can you please check if this is still a problem in 3.1.
Olivier is the expert...
It also seems to me that the maximum line width is not enforced everywhere. E.g.
Open CopyToClipboardAction.java from the org.eclipse.search plugin and format it
with line width 60. Several lines stay very long but could be broken e.g. on dots.
Could you please provide an example where the maximum length is always
considered to be 80?
Closing as WORKSFORME.
Requested information was never provided.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="105571" />
    <CreationDate amount="2005-07-29 09:51:00 -0400" />
    <DupId amount="" />
    <classification amount="Mylyn" />
    <Product amount="Mylyn" />
    <component amount="Tasks" />
    <Version amount="0.3" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P2" />
    <bug_severity amount="enhancement" />
    <Summery>estimated time for tasks</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>I think that there is just one last feature that we need in the task list in 
order to offer good support for the XP planning game: the ability to estimate 
time for tasks.

This should just be a numeric value in hours.  In the UI we should only let 
people set full hour values (i.e. no minutes), and the typical range should be 
1..5.  A value over 5 indicates that the task should be broken up into sub-
tasks.  

This field should show up in the "Planning Game" part of the task editor.
This estimated time field already exists, but I am not too sure if there is 
anything done with it at the moment.  Also, this should probably be a part of 
the planning game report.
should this be  combo box with 1.. 5 hours then? or a text field?
Created attachment 26028
mylar.tasklist

patch for adding estimated time to planning game report on the task editor.
it uses a spinner as input method
Done, and works great.</WithStack>
    <WithOutStack>I think that there is just one last feature that we need in the task list in 
order to offer good support for the XP planning game: the ability to estimate 
time for tasks.

This should just be a numeric value in hours.  In the UI we should only let 
people set full hour values (i.e. no minutes), and the typical range should be 
1..5.  A value over 5 indicates that the task should be broken up into sub-
tasks.  

This field should show up in the "Planning Game" part of the task editor.
This estimated time field already exists, but I am not too sure if there is 
anything done with it at the moment.  Also, this should probably be a part of 
the planning game report.
should this be  combo box with 1.. 5 hours then? or a text field?
Created attachment 26028
mylar.tasklist

patch for adding estimated time to planning game report on the task editor.
it uses a spinner as input method
Done, and works great.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="105572" />
    <CreationDate amount="2005-07-29 09:56:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse Foundation" />
    <Product amount="z_Archived" />
    <component amount="VE" />
    <Version amount="unspecified" />
    <rep_platform amount="PC" />
    <op_sys amount="Linux-GTK" />
    <priority amount="P3" />
    <bug_severity amount="major" />
    <Summery>TVT 3.1 - TCT 462 - String Truncations</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="WORKSFORME" />
    <WithStack>OS : RHEL 4.0
Must fix: YES
Build date: 25 Jul 2005
Blocking: No
Language: Russian
Tester Name: Alexander Glotov
Problem Description:

Create a RCP plug-in project by selecting File &gt; New&gt; Other…
to bring up the New wizard. Select Plug-in Project from the
list and select Next. On the next page, fill in the project
name field with My RCP Project and select Next. On the next
page, select Yes next to Would you like to create a rich client
application? Select Next.
On the next page, select the RCP Mail Template and select Finish.
Answer No to the Open Associated Perspective prompt.
From the Beans view, select the banner object and set null layout for it.
select the banner object, bring up the context menu (mouse button 2) and select
Customize Layout…to launch the layout customization window.

Translated strings Width, Height and Margin are truncated.
Resizing does not help. Please use empty space on the
right to display entire strings (see screenshot).



Regards,
Alexander Glotov,
Russian TSC
Created attachment 25464
truncations
labels will now grab excess horizontal space so that they can be resized in case
the default width is not enough.
Fixed this again, didn't need the grabs or the width hints.  The problem was we
had widths in the first place.  The labels would take up the amount of space
they need without them set, we were just limiting that.
Verified in M20050815, closing.
Truncation is fixed in windows but still exists in linux.  Please re-investigate.

Will attach a new screenshot from Russian.
Created attachment 26150
screenshot
Not sure what to do about this, we cannot seem to reproduce it on our linux
boxes. Are you sure you are using the latest release on the test machine (make
sure it is M20050817 or later).  The only other thing I can think of is that
this is a problem with RHEL 4.0 for PlatformUI SWT.
Please reopen for tackling in 1.2 if still a problem. We need to close out for
1.1.0.1
closing</WithStack>
    <WithOutStack>OS : RHEL 4.0
Must fix: YES
Build date: 25 Jul 2005
Blocking: No
Language: Russian
Tester Name: Alexander Glotov
Problem Description:

Create a RCP plug-in project by selecting File &gt; New&gt; Other…
to bring up the New wizard. Select Plug-in Project from the
list and select Next. On the next page, fill in the project
name field with My RCP Project and select Next. On the next
page, select Yes next to Would you like to create a rich client
application? Select Next.
On the next page, select the RCP Mail Template and select Finish.
Answer No to the Open Associated Perspective prompt.
From the Beans view, select the banner object and set null layout for it.
select the banner object, bring up the context menu (mouse button 2) and select
Customize Layout…to launch the layout customization window.

Translated strings Width, Height and Margin are truncated.
Resizing does not help. Please use empty space on the
right to display entire strings (see screenshot).



Regards,
Alexander Glotov,
Russian TSC
Created attachment 25464
truncations
labels will now grab excess horizontal space so that they can be resized in case
the default width is not enough.
Fixed this again, didn't need the grabs or the width hints.  The problem was we
had widths in the first place.  The labels would take up the amount of space
they need without them set, we were just limiting that.
Verified in M20050815, closing.
Truncation is fixed in windows but still exists in linux.  Please re-investigate.

Will attach a new screenshot from Russian.
Created attachment 26150
screenshot
Not sure what to do about this, we cannot seem to reproduce it on our linux
boxes. Are you sure you are using the latest release on the test machine (make
sure it is M20050817 or later).  The only other thing I can think of is that
this is a problem with RHEL 4.0 for PlatformUI SWT.
Please reopen for tackling in 1.2 if still a problem. We need to close out for
1.1.0.1
closing</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="105573" />
    <CreationDate amount="2005-07-29 10:07:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="JDT" />
    <component amount="Debug" />
    <Version amount="3.1" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>suspend at uncaught exception shows compiler warning</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="1">
      <source_code type="class">
        <location start="285" end="603" />
        <code>public class ExTest {

    /**
     * @param args
     */
    public static void main(String[] args) {
        new ExTest().foo();

    }

    public void foo() {
        new Runnable() {

            public void run() {
                throw new NullPointerException("BOOM");

            }

        }.run();
    }

}</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="0" />
    <bug_status amount="VERIFIED" />
    <resolution amount="FIXED" />
    <WithStack>If there is a compiler warning at the same location as an uncaught exception, 
the stack trace shows the compiler warning (thinks it is a compiler error that 
caused the suspension). We should only consider compilation problems with an 
error severity in this case:

Example program:

public class ExTest {

    /**
     * @param args
     */
    public static void main(String[] args) {
        new ExTest().foo();

    }

    public void foo() {
        new Runnable() {

            public void run() {
                throw new NullPointerException("BOOM");

            }

        }.run();
    }

}

stack trace:

Thread [main] (Suspended (Non-externalized string literal; it should be 
followed by //$NON-NLS-&lt;n&gt;$))
	ExTest$1.run() line: 23
	ExTest.foo() line: 27
	ExTest.main(String[]) line: 15
Fixed.
I added a test in JavaDebugOptionsManager#getProblem() to return only problems which are errors.

JavaDebugOptionManager - added a test to check if a problem is an error.
Marking fixed.
Verified.</WithStack>
    <WithOutStack>If there is a compiler warning at the same location as an uncaught exception, 
the stack trace shows the compiler warning (thinks it is a compiler error that 
caused the suspension). We should only consider compilation problems with an 
error severity in this case:

Example program:

public class ExTest {

    /**
     * @param args
     */
    public static void main(String[] args) {
        new ExTest().foo();

    }

    public void foo() {
        new Runnable() {

            public void run() {
                throw new NullPointerException("BOOM");

            }

        }.run();
    }

}

stack trace:

Thread [main] (Suspended (Non-externalized string literal; it should be 
followed by //$NON-NLS-&lt;n&gt;$))
	ExTest$1.run() line: 23
	ExTest.foo() line: 27
	ExTest.main(String[]) line: 15
Fixed.
I added a test in JavaDebugOptionsManager#getProblem() to return only problems which are errors.

JavaDebugOptionManager - added a test to check if a problem is an error.
Marking fixed.
Verified.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="105574" />
    <CreationDate amount="2005-07-29 10:09:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="Debug" />
    <Version amount="3.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Linux-GTK" />
    <priority amount="P3" />
    <bug_severity amount="major" />
    <Summery>TVT 3.1 - TCT 466 - Truncated string on Memory monitor</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="VERIFIED" />
    <resolution amount="FIXED" />
    <WithStack>OS : Linux
Must fix ?
Build date:25/07
Blocking: NO
Language: HUN
Bitmap Location: Z:\defects\hu\20.002090.png
Name: Gabor Kiss

Problem Description:
There is a truncated text on Monitor Memory window.
Steps to procedure: Imprt project SB, clik on main.cpp,
start a debug session, open a Memory view, and by right click
select Add Memory Monitor.
You could see a truncated text, as shown at the attached
screenshot.
Created attachment 25465
truncation
The memory view is owned by the platform.  Redirecting to platform debug team.
made changes to MonitorMemoryBlockDialog, the label will now wrap after a certain width.
fixed in HEAD

please verify Sam
verified.</WithStack>
    <WithOutStack>OS : Linux
Must fix ?
Build date:25/07
Blocking: NO
Language: HUN
Bitmap Location: Z:\defects\hu\20.002090.png
Name: Gabor Kiss

Problem Description:
There is a truncated text on Monitor Memory window.
Steps to procedure: Imprt project SB, clik on main.cpp,
start a debug session, open a Memory view, and by right click
select Add Memory Monitor.
You could see a truncated text, as shown at the attached
screenshot.
Created attachment 25465
truncation
The memory view is owned by the platform.  Redirecting to platform debug team.
made changes to MonitorMemoryBlockDialog, the label will now wrap after a certain width.
fixed in HEAD

please verify Sam
verified.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="105575" />
    <CreationDate amount="2005-07-29 10:56:00 -0400" />
    <DupId amount="77102" />
    <classification amount="BIRT" />
    <Product amount="BIRT" />
    <component amount="Report Viewer" />
    <Version amount="unspecified" />
    <rep_platform amount="PC" />
    <op_sys amount="Linux" />
    <priority amount="P3" />
    <bug_severity amount="blocker" />
    <Summery>JVM crashes when opening a newly created report</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="6">
        <Lines>
          <Line>- Linux Fedora Core 3 on a Sony Vaio laptop</Line>
          <Line>- the SUNWappserver jdk (1.4.2)</Line>
          <Line>- Eclipse 3.0.1</Line>
          <Line>- GEF-runtime-3.0.1</Line>
          <Line>- emf-sdo-runtime-2.0.1</Line>
          <Line>- Birt-report-framework-S20051807</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="RESOLVED" />
    <resolution amount="DUPLICATE" />
    <WithStack>Hello,

Impossible to run the Birt basic tutorial.

I can create a new Report projetct and a new report using the Grouped Listing
template, but when I click on Finish, the JMV crashes and the resulting log file
created in my home directory is pasted below :

My config is :
- Linux Fedora Core 3 on a Sony Vaio laptop
- the SUNWappserver jdk (1.4.2)
- Eclipse 3.0.1
- GEF-runtime-3.0.1
- emf-sdo-runtime-2.0.1
- Birt-report-framework-S20051807

-------------------------------------------------
An unexpected exception has been detected in native code outside the VM.
Unexpected Signal : 11 occurred at PC=0x7F48310
Function=gdk_rgb_get_cmap+0x1D
Library=/usr/lib/libgdk-1.2.so.0

Current Java thread:
	at org.eclipse.swt.internal.mozilla.XPCOM.VtblCall(Native Method)
	at org.eclipse.swt.internal.mozilla.nsIBaseWindow.Create(nsIBaseWindow.java:49)
	at org.eclipse.swt.browser.Browser.&lt;init&gt;(Browser.java:270)
	at
org.eclipse.birt.report.designer.internal.ui.editors.preview.PreviewEditor.createPartControl(PreviewEditor.java:293)
	at org.eclipse.ui.part.MultiPageEditorPart.addPage(MultiPageEditorPart.java:120)
	at
org.eclipse.birt.report.designer.ui.editors.ReportEditor.createPreviewPage(ReportEditor.java:956)
	at
org.eclipse.birt.report.designer.ui.editors.ReportEditor.createPages(ReportEditor.java:941)
	at
org.eclipse.ui.part.MultiPageEditorPart.createPartControl(MultiPageEditorPart.java:187)
	at org.eclipse.ui.internal.PartPane$2.run(PartPane.java:137)
	at
org.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java:616)
	at org.eclipse.core.runtime.Platform.run(Platform.java:747)
	at org.eclipse.ui.internal.PartPane.createChildControl(PartPane.java:133)
	at org.eclipse.ui.internal.PartPane.createControl(PartPane.java:205)
	at
org.eclipse.ui.internal.PartStack.refreshPresentationSelection(PartStack.java:939)
	at org.eclipse.ui.internal.PartStack.setSelection(PartStack.java:921)
	at org.eclipse.ui.internal.EditorStack.setSelection(EditorStack.java:196)
	at org.eclipse.ui.internal.PartStack.showPart(PartStack.java:1020)
	at org.eclipse.ui.internal.PartStack.add(PartStack.java:290)
	at org.eclipse.ui.internal.EditorStack.add(EditorStack.java:121)
	at
org.eclipse.ui.internal.EditorSashContainer.addEditor(EditorSashContainer.java:59)
	at org.eclipse.ui.internal.EditorAreaHelper.openEditor(EditorAreaHelper.java:266)
	at org.eclipse.ui.internal.EditorManager$4.run(EditorManager.java:694)
	at org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:69)
	at org.eclipse.ui.internal.EditorManager.createEditorTab(EditorManager.java:683)
	at org.eclipse.ui.internal.EditorManager.openInternalEditor(EditorManager.java:779)
	at
org.eclipse.ui.internal.EditorManager.openEditorFromDescriptor(EditorManager.java:582)
	at org.eclipse.ui.internal.EditorManager.openEditor(EditorManager.java:570)
	at
org.eclipse.ui.internal.WorkbenchPage.busyOpenEditorBatched(WorkbenchPage.java:2244)
	at org.eclipse.ui.internal.WorkbenchPage.busyOpenEditor(WorkbenchPage.java:2177)
	at org.eclipse.ui.internal.WorkbenchPage.access$6(WorkbenchPage.java:2169)
	at org.eclipse.ui.internal.WorkbenchPage$9.run(WorkbenchPage.java:2156)
	at org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:69)
	at org.eclipse.ui.internal.WorkbenchPage.openEditor(WorkbenchPage.java:2151)
	at org.eclipse.ui.ide.IDE.openEditor(IDE.java:299)
	at org.eclipse.ui.actions.OpenFileAction.openFile(OpenFileAction.java:96)
	at
org.eclipse.ui.actions.OpenSystemEditorAction.run(OpenSystemEditorAction.java:94)
	at
org.eclipse.ui.views.navigator.OpenActionGroup.runDefaultAction(OpenActionGroup.java:111)
	at
org.eclipse.ui.views.navigator.MainActionGroup.runDefaultAction(MainActionGroup.java:293)
	at
org.eclipse.ui.views.navigator.ResourceNavigator.handleOpen(ResourceNavigator.java:624)
	at
org.eclipse.ui.views.navigator.ResourceNavigator$6.open(ResourceNavigator.java:388)
	at org.eclipse.jface.viewers.StructuredViewer$2.run(StructuredViewer.java:429)
	at
org.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java:616)
	at org.eclipse.core.runtime.Platform.run(Platform.java:747)
	at org.eclipse.jface.viewers.StructuredViewer.fireOpen(StructuredViewer.java:427)
	at org.eclipse.jface.viewers.StructuredViewer.handleOpen(StructuredViewer.java:635)
	at
org.eclipse.jface.viewers.StructuredViewer$6.handleOpen(StructuredViewer.java:731)
	at org.eclipse.jface.util.OpenStrategy.fireOpenEvent(OpenStrategy.java:211)
	at org.eclipse.jface.util.OpenStrategy.access$2(OpenStrategy.java:206)
	at org.eclipse.jface.util.OpenStrategy$1.handleEvent(OpenStrategy.java:238)
	at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:954)
	at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:2595)
	at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2298)
	at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1377)
	at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1348)
	at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:254)
	at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:141)
	at org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:96)
	at
org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:335)
	at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:273)
	at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:129)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:324)
	at org.eclipse.core.launcher.Main.basicRun(Main.java:185)
	at org.eclipse.core.launcher.Main.run(Main.java:704)
	at org.eclipse.core.launcher.Main.main(Main.java:688)
-------------------------------------------------
You are running eclipse against a version of Mozilla compiled for GTK+ 1.2,
which is incompatible with GTK+ 2.0 required by Eclipse.  This seems strange
since Fedora Core 3 includes a GTK+2 version of Mozilla.  The crash is fixed in
Eclipse 3.1 -- we run away if we detect a 1.2-compiled version of Mozilla.

To fix this problem, export the MOZILLA_FIVE_HOME environment variable to point
at a GTK2 install of Mozilla.

*** This bug has been marked as a duplicate of 77102 ***
Verified in build 20051222.</WithStack>
    <WithOutStack>Hello,

Impossible to run the Birt basic tutorial.

I can create a new Report projetct and a new report using the Grouped Listing
template, but when I click on Finish, the JMV crashes and the resulting log file
created in my home directory is pasted below :

My config is :
- Linux Fedora Core 3 on a Sony Vaio laptop
- the SUNWappserver jdk (1.4.2)
- Eclipse 3.0.1
- GEF-runtime-3.0.1
- emf-sdo-runtime-2.0.1
- Birt-report-framework-S20051807

-------------------------------------------------
An unexpected exception has been detected in native code outside the VM.
Unexpected Signal : 11 occurred at PC=0x7F48310
Function=gdk_rgb_get_cmap+0x1D
Library=/usr/lib/libgdk-1.2.so.0

Current Java thread:
	at org.eclipse.swt.internal.mozilla.XPCOM.VtblCall(Native Method)
	at org.eclipse.swt.internal.mozilla.nsIBaseWindow.Create(nsIBaseWindow.java:49)
	at org.eclipse.swt.browser.Browser.&lt;init&gt;(Browser.java:270)
	at
org.eclipse.birt.report.designer.internal.ui.editors.preview.PreviewEditor.createPartControl(PreviewEditor.java:293)
	at org.eclipse.ui.part.MultiPageEditorPart.addPage(MultiPageEditorPart.java:120)
	at
org.eclipse.birt.report.designer.ui.editors.ReportEditor.createPreviewPage(ReportEditor.java:956)
	at
org.eclipse.birt.report.designer.ui.editors.ReportEditor.createPages(ReportEditor.java:941)
	at
org.eclipse.ui.part.MultiPageEditorPart.createPartControl(MultiPageEditorPart.java:187)
	at org.eclipse.ui.internal.PartPane$2.run(PartPane.java:137)
	at
org.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java:616)
	at org.eclipse.core.runtime.Platform.run(Platform.java:747)
	at org.eclipse.ui.internal.PartPane.createChildControl(PartPane.java:133)
	at org.eclipse.ui.internal.PartPane.createControl(PartPane.java:205)
	at
org.eclipse.ui.internal.PartStack.refreshPresentationSelection(PartStack.java:939)
	at org.eclipse.ui.internal.PartStack.setSelection(PartStack.java:921)
	at org.eclipse.ui.internal.EditorStack.setSelection(EditorStack.java:196)
	at org.eclipse.ui.internal.PartStack.showPart(PartStack.java:1020)
	at org.eclipse.ui.internal.PartStack.add(PartStack.java:290)
	at org.eclipse.ui.internal.EditorStack.add(EditorStack.java:121)
	at
org.eclipse.ui.internal.EditorSashContainer.addEditor(EditorSashContainer.java:59)
	at org.eclipse.ui.internal.EditorAreaHelper.openEditor(EditorAreaHelper.java:266)
	at org.eclipse.ui.internal.EditorManager$4.run(EditorManager.java:694)
	at org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:69)
	at org.eclipse.ui.internal.EditorManager.createEditorTab(EditorManager.java:683)
	at org.eclipse.ui.internal.EditorManager.openInternalEditor(EditorManager.java:779)
	at
org.eclipse.ui.internal.EditorManager.openEditorFromDescriptor(EditorManager.java:582)
	at org.eclipse.ui.internal.EditorManager.openEditor(EditorManager.java:570)
	at
org.eclipse.ui.internal.WorkbenchPage.busyOpenEditorBatched(WorkbenchPage.java:2244)
	at org.eclipse.ui.internal.WorkbenchPage.busyOpenEditor(WorkbenchPage.java:2177)
	at org.eclipse.ui.internal.WorkbenchPage.access$6(WorkbenchPage.java:2169)
	at org.eclipse.ui.internal.WorkbenchPage$9.run(WorkbenchPage.java:2156)
	at org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:69)
	at org.eclipse.ui.internal.WorkbenchPage.openEditor(WorkbenchPage.java:2151)
	at org.eclipse.ui.ide.IDE.openEditor(IDE.java:299)
	at org.eclipse.ui.actions.OpenFileAction.openFile(OpenFileAction.java:96)
	at
org.eclipse.ui.actions.OpenSystemEditorAction.run(OpenSystemEditorAction.java:94)
	at
org.eclipse.ui.views.navigator.OpenActionGroup.runDefaultAction(OpenActionGroup.java:111)
	at
org.eclipse.ui.views.navigator.MainActionGroup.runDefaultAction(MainActionGroup.java:293)
	at
org.eclipse.ui.views.navigator.ResourceNavigator.handleOpen(ResourceNavigator.java:624)
	at
org.eclipse.ui.views.navigator.ResourceNavigator$6.open(ResourceNavigator.java:388)
	at org.eclipse.jface.viewers.StructuredViewer$2.run(StructuredViewer.java:429)
	at
org.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java:616)
	at org.eclipse.core.runtime.Platform.run(Platform.java:747)
	at org.eclipse.jface.viewers.StructuredViewer.fireOpen(StructuredViewer.java:427)
	at org.eclipse.jface.viewers.StructuredViewer.handleOpen(StructuredViewer.java:635)
	at
org.eclipse.jface.viewers.StructuredViewer$6.handleOpen(StructuredViewer.java:731)
	at org.eclipse.jface.util.OpenStrategy.fireOpenEvent(OpenStrategy.java:211)
	at org.eclipse.jface.util.OpenStrategy.access$2(OpenStrategy.java:206)
	at org.eclipse.jface.util.OpenStrategy$1.handleEvent(OpenStrategy.java:238)
	at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:954)
	at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:2595)
	at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2298)
	at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1377)
	at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1348)
	at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:254)
	at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:141)
	at org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:96)
	at
org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:335)
	at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:273)
	at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:129)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:324)
	at org.eclipse.core.launcher.Main.basicRun(Main.java:185)
	at org.eclipse.core.launcher.Main.run(Main.java:704)
	at org.eclipse.core.launcher.Main.main(Main.java:688)
-------------------------------------------------
You are running eclipse against a version of Mozilla compiled for GTK+ 1.2,
which is incompatible with GTK+ 2.0 required by Eclipse.  This seems strange
since Fedora Core 3 includes a GTK+2 version of Mozilla.  The crash is fixed in
Eclipse 3.1 -- we run away if we detect a 1.2-compiled version of Mozilla.

To fix this problem, export the MOZILLA_FIVE_HOME environment variable to point
at a GTK2 install of Mozilla.

*** This bug has been marked as a duplicate of 77102 ***
Verified in build 20051222.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="105576" />
    <CreationDate amount="2005-07-29 10:56:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="UI" />
    <Version amount="3.1" />
    <rep_platform amount="PC" />
    <op_sys amount="Linux-GTK" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>TVT 3.1 - TCT 467 - Disable All and Enable All strings not externalized for translation</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="VERIFIED" />
    <resolution amount="FIXED" />
    <WithStack>OS : Windows XP
Must fix
Build date:26/07
Blocking: NO
Language: ARA
Bitmap Location: Z:\defects\CDT_EnglishText
Tester Name: Mohamed Esmat

Problem Description: The English words "Enable All" and "Disable All" are not
found on the files.

How to recreate the problem:
1. Window -&gt;Preferences -&gt;General -&gt;Capabilities
Created attachment 25466
strings "Enable all" and "Disable all"
In ActivityCategoryPreferencePage.createButtons, the "&amp;Enable All" 
and "D&amp;isable All" strings are hard coded and marked as non-nls.

These strings are the same as
  ActivityEnabler_selectAll
  ActivityEnabler_deselectAll
in ActivityMessages.java.

Created attachment 25585
org.eclipse.ui.workbench patch

patch for workbench plugin, based on 3.1 maint stream
Patch released in 3.2 and 3.1.1
Verified in Arabic, Italian and Russian.  3.1.1 RC2 using 0923 catalogs</WithStack>
    <WithOutStack>OS : Windows XP
Must fix
Build date:26/07
Blocking: NO
Language: ARA
Bitmap Location: Z:\defects\CDT_EnglishText
Tester Name: Mohamed Esmat

Problem Description: The English words "Enable All" and "Disable All" are not
found on the files.

How to recreate the problem:
1. Window -&gt;Preferences -&gt;General -&gt;Capabilities
Created attachment 25466
strings "Enable all" and "Disable all"
In ActivityCategoryPreferencePage.createButtons, the "&amp;Enable All" 
and "D&amp;isable All" strings are hard coded and marked as non-nls.

These strings are the same as
  ActivityEnabler_selectAll
  ActivityEnabler_deselectAll
in ActivityMessages.java.

Created attachment 25585
org.eclipse.ui.workbench patch

patch for workbench plugin, based on 3.1 maint stream
Patch released in 3.2 and 3.1.1
Verified in Arabic, Italian and Russian.  3.1.1 RC2 using 0923 catalogs</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="105577" />
    <CreationDate amount="2005-07-29 11:07:00 -0400" />
    <DupId amount="" />
    <classification amount="Tools" />
    <Product amount="TPTP Resource Monitoring" />
    <component amount="Platform.Execution.Choreography" />
    <Version amount="4.1" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>BPEL engine must implement Isolated scopes according to the BPEL 2.0 specification</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>BPEL engine must implement Isolated scopes according to the BPEL 2.0 specification
Fixed and changes added to CVS HEAD
As of TPTP 4.6.0, TPTP is in maintenance mode and focusing on improving quality by resolving relevant enhancements/defects and increasing test coverage through test creation, automation, Build Verification Tests (BVTs), and expanded run-time execution. As part of the TPTP Bugzilla housecleaning process (see http://wiki.eclipse.org/Bugzilla_Housecleaning_Processes), this enhancement/defect is verified/closed by the Project Lead since this enhancement/defect has been resolved and unverified for more than 1 year and considered to be fixed. If this enhancement/defect is still unresolved and reproducible in the latest TPTP release (http://www.eclipse.org/tptp/home/downloads/), please re-open.</WithStack>
    <WithOutStack>BPEL engine must implement Isolated scopes according to the BPEL 2.0 specification
Fixed and changes added to CVS HEAD
As of TPTP 4.6.0, TPTP is in maintenance mode and focusing on improving quality by resolving relevant enhancements/defects and increasing test coverage through test creation, automation, Build Verification Tests (BVTs), and expanded run-time execution. As part of the TPTP Bugzilla housecleaning process (see http://wiki.eclipse.org/Bugzilla_Housecleaning_Processes), this enhancement/defect is verified/closed by the Project Lead since this enhancement/defect has been resolved and unverified for more than 1 year and considered to be fixed. If this enhancement/defect is still unresolved and reproducible in the latest TPTP release (http://www.eclipse.org/tptp/home/downloads/), please re-open.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="105578" />
    <CreationDate amount="2005-07-29 11:11:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="JDT" />
    <component amount="UI" />
    <Version amount="3.1" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>New java project : Create in extrenal location option is gone!</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="INVALID" />
    <WithStack>In earlier versions of Eclipse, the new project wizard gave the option to create
a project in **any** directory.  Now the only option is to create the project in
a sub-folder of the workspace.

This is VERY frustrating to me.  I have setup my development system with a flat
directory structure.  Forcing users to conform to the IDE's directory structure
is very wrong.  The Microsoft Visual Studio has this same problem.  It wants all
the projects to exist under the solution.  Which creates numerous issues when
trying to develop shared code across multiple solutions.  Removing the option to
create a project in an external location is a step backwards for the Eclipse IDE.

Please dont force a directory structure (nor make it difficult to workaround). 

Please bring back the option to create a project in any directory.

Thanks!
This is still there. The only thing that changed is the label of the action
since most users used this function to include alreadz available external
source. So create a new project and choose "Create project from exisiting source".
Sorry, this feature is NOT there.  Try this...

New Project -&gt; Java Project -&gt; Create Project from Existing Source -&gt; Browse -&gt;
go to a directory that is outside your workspace and press New Folder -&gt; ok the
dialog.   Now you will see the dialog's Next and Finish buttons are disabled.

You can not create a new project in the new folder which is outside the
workspace directory hierarchy!  You said the only thing that changed is the
label.  This is incorrect, the behavior has also changed.
Created attachment 25544
Screen shot
Greg, this still works for me in 3.1.0. I tested it (see attached screen shot).
Can you please provide detailed steps to reproduce.
Ok I found my problem.  It was pilot error.  In going through the steps to
reproduce the error, I had left the project name field empty.  So the dialog
correctly disabled the Next and Finish buttons.

Since my attention was on the "Create project from existing source" field I just
changed (and thus disabling the Next and Finish buttons), I incorrectly thought
the field would not accept any empty directory (misinterpreting the meaning of
the new prompt, and not noticing that I had left the project name field empty).

Thanks for your help.
As of now 'LATER' and 'REMIND' resolutions are no longer supported.
Please reopen this bug if it is still valid for you.</WithStack>
    <WithOutStack>In earlier versions of Eclipse, the new project wizard gave the option to create
a project in **any** directory.  Now the only option is to create the project in
a sub-folder of the workspace.

This is VERY frustrating to me.  I have setup my development system with a flat
directory structure.  Forcing users to conform to the IDE's directory structure
is very wrong.  The Microsoft Visual Studio has this same problem.  It wants all
the projects to exist under the solution.  Which creates numerous issues when
trying to develop shared code across multiple solutions.  Removing the option to
create a project in an external location is a step backwards for the Eclipse IDE.

Please dont force a directory structure (nor make it difficult to workaround). 

Please bring back the option to create a project in any directory.

Thanks!
This is still there. The only thing that changed is the label of the action
since most users used this function to include alreadz available external
source. So create a new project and choose "Create project from exisiting source".
Sorry, this feature is NOT there.  Try this...

New Project -&gt; Java Project -&gt; Create Project from Existing Source -&gt; Browse -&gt;
go to a directory that is outside your workspace and press New Folder -&gt; ok the
dialog.   Now you will see the dialog's Next and Finish buttons are disabled.

You can not create a new project in the new folder which is outside the
workspace directory hierarchy!  You said the only thing that changed is the
label.  This is incorrect, the behavior has also changed.
Created attachment 25544
Screen shot
Greg, this still works for me in 3.1.0. I tested it (see attached screen shot).
Can you please provide detailed steps to reproduce.
Ok I found my problem.  It was pilot error.  In going through the steps to
reproduce the error, I had left the project name field empty.  So the dialog
correctly disabled the Next and Finish buttons.

Since my attention was on the "Create project from existing source" field I just
changed (and thus disabling the Next and Finish buttons), I incorrectly thought
the field would not accept any empty directory (misinterpreting the meaning of
the new prompt, and not noticing that I had left the project name field empty).

Thanks for your help.
As of now 'LATER' and 'REMIND' resolutions are no longer supported.
Please reopen this bug if it is still valid for you.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="105579" />
    <CreationDate amount="2005-07-29 11:36:00 -0400" />
    <DupId amount="93956" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="Compare" />
    <Version amount="3.1" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="enhancement" />
    <Summery>Allow other uses of .class file extensions</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="DUPLICATE" />
    <WithStack>Eclipse always treats files named *.class as Java binary files, and if we want 
to use them for other purposes (e.g. for PHP), Eclipse will do its best to 
stop us. Among other things, this affects file merges and comparisons. Could 
you make this a configurable option?
I'm not sure where this should go, but I'm going to take a guess at 
Platform/Compare. 


*** This bug has been marked as a duplicate of bug 93956 ***</WithStack>
    <WithOutStack>Eclipse always treats files named *.class as Java binary files, and if we want 
to use them for other purposes (e.g. for PHP), Eclipse will do its best to 
stop us. Among other things, this affects file merges and comparisons. Could 
you make this a configurable option?
I'm not sure where this should go, but I'm going to take a guess at 
Platform/Compare. 


*** This bug has been marked as a duplicate of bug 93956 ***</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="105580" />
    <CreationDate amount="2005-07-29 11:56:00 -0400" />
    <DupId amount="" />
    <classification amount="Tools" />
    <Product amount="AspectJ" />
    <component amount="Compiler" />
    <Version amount="unspecified" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P5" />
    <bug_severity amount="trivial" />
    <Summery>Possibly Misleading Type mismatch error message</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="1">
      <source_code type="assignment">
        <location start="51" end="71" />
        <code>a.C1 a = new b.C1();</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="0" />
    <bug_status amount="NEW" />
    <resolution amount="" />
    <WithStack>With 2 classes a.C1 and b.C1, the following line:

a.C1 a = new b.C1();

yields this error message:

Type mismatch: cannot convert from C1 to C1.

While in this case it is pretty obvious what the problem is, but we came across
this problem when using a external API (Type mismatch: cannont convert from
Iterator to Iterator).

A simple fix would be to test for the case when the shortened name of both
classes are the same and instead give the full package name.  For example:

Type mismatch: cannot convert from b.C1 to a.C1.
Andrew, this is a nice self-contained bug report you could possibly take a look
at please.
Found this in JDT for eclipse 3.1.0 final, so I've raised it as bug 105658 in JDT.</WithStack>
    <WithOutStack>With 2 classes a.C1 and b.C1, the following line:

a.C1 a = new b.C1();

yields this error message:

Type mismatch: cannot convert from C1 to C1.

While in this case it is pretty obvious what the problem is, but we came across
this problem when using a external API (Type mismatch: cannont convert from
Iterator to Iterator).

A simple fix would be to test for the case when the shortened name of both
classes are the same and instead give the full package name.  For example:

Type mismatch: cannot convert from b.C1 to a.C1.
Andrew, this is a nice self-contained bug report you could possibly take a look
at please.
Found this in JDT for eclipse 3.1.0 final, so I've raised it as bug 105658 in JDT.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="105581" />
    <CreationDate amount="2005-07-29 11:58:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="JDT" />
    <component amount="Core" />
    <Version amount="3.1" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Creating a Java project from existing source fails because of "Unhandled event loop exception": ArrayIndexOutOfBoundsException</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="VERIFIED" />
    <resolution amount="FIXED" />
    <WithStack>Hello,

I tried to create a Java project from existing source but that fails because of:

!ENTRY org.eclipse.ui 4 4 2005-07-29 17:53:12.656
!MESSAGE Unhandled event loop exception

!ENTRY org.eclipse.ui 4 0 2005-07-29 17:53:12.656
!MESSAGE Failed to execute runnable (java.lang.ArrayIndexOutOfBoundsException: 0)
!STACK 0
org.eclipse.swt.SWTException: Failed to execute runnable
(java.lang.ArrayIndexOutOfBoundsException: 0)
[...]
Caused by: java.lang.ArrayIndexOutOfBoundsException: 0
[...]

!ENTRY org.eclipse.ui 4 4 2005-07-29 17:53:18.234
!MESSAGE Unhandled event loop exception

!ENTRY org.eclipse.ui 4 0 2005-07-29 17:53:18.250
!MESSAGE 0
!STACK 0
java.lang.ArrayIndexOutOfBoundsException: 0
[...]

I will create an attachment with comple log message.

Regards,
  Martin
Created attachment 25468
Log file mentioned in comment 1.

The complete trace taken from {workspace}\.metadata\.log
That's because of the follwing entry in the .classpath file:

  &lt;classpathentry excluding=""
including="plugin.jelly|plugin.properties|project.properties|project.xml|"
kind="src" path="."&gt;
  &lt;/classpathentry&gt;

If I remove that entry, I can open the project.

I think the last '|' is the problem. If I remove only that character, the error
does not occur. The .classpath file is generated by "maven eclipse"
(http://maven.apache.org/reference/plugins/eclipse/).

With Eclipse 3.0.x that was not a problem.
I created an issue in project maven-eclipse-plugin:
http://jira.codehaus.org/browse/MPECLIPSE-96

But Eclipse 3.0.1 ignored that pipe character, so perhaps Eclipse 3.1 should
ignore it, too:

.classpath files working with earlier versions of Eclipse should work because of
backward compatibility, shouldn't?
Changed ClasspathEntry#decodePatterns(...) to ignore empty patterns.
Added regression test ClasspathTests#testEmptyInclusionPattern*()
Verified in I20050920-0010 for 3.2M2</WithStack>
    <WithOutStack>Hello,

I tried to create a Java project from existing source but that fails because of:

!ENTRY org.eclipse.ui 4 4 2005-07-29 17:53:12.656
!MESSAGE Unhandled event loop exception

!ENTRY org.eclipse.ui 4 0 2005-07-29 17:53:12.656
!MESSAGE Failed to execute runnable (java.lang.ArrayIndexOutOfBoundsException: 0)
!STACK 0
org.eclipse.swt.SWTException: Failed to execute runnable
(java.lang.ArrayIndexOutOfBoundsException: 0)
[...]
Caused by: java.lang.ArrayIndexOutOfBoundsException: 0
[...]

!ENTRY org.eclipse.ui 4 4 2005-07-29 17:53:18.234
!MESSAGE Unhandled event loop exception

!ENTRY org.eclipse.ui 4 0 2005-07-29 17:53:18.250
!MESSAGE 0
!STACK 0
java.lang.ArrayIndexOutOfBoundsException: 0
[...]

I will create an attachment with comple log message.

Regards,
  Martin
Created attachment 25468
Log file mentioned in comment 1.

The complete trace taken from {workspace}\.metadata\.log
That's because of the follwing entry in the .classpath file:

  &lt;classpathentry excluding=""
including="plugin.jelly|plugin.properties|project.properties|project.xml|"
kind="src" path="."&gt;
  &lt;/classpathentry&gt;

If I remove that entry, I can open the project.

I think the last '|' is the problem. If I remove only that character, the error
does not occur. The .classpath file is generated by "maven eclipse"
(http://maven.apache.org/reference/plugins/eclipse/).

With Eclipse 3.0.x that was not a problem.
I created an issue in project maven-eclipse-plugin:
http://jira.codehaus.org/browse/MPECLIPSE-96

But Eclipse 3.0.1 ignored that pipe character, so perhaps Eclipse 3.1 should
ignore it, too:

.classpath files working with earlier versions of Eclipse should work because of
backward compatibility, shouldn't?
Changed ClasspathEntry#decodePatterns(...) to ignore empty patterns.
Added regression test ClasspathTests#testEmptyInclusionPattern*()
Verified in I20050920-0010 for 3.2M2</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="105582" />
    <CreationDate amount="2005-07-29 12:02:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="UI" />
    <Version amount="3.1" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="enhancement" />
    <Summery>[PropertiesView] Enhancement Submission to Properties View</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="9">
        <Lines>
          <Line>1) Need control on setting default column widths</Line>
          <Line>2) Need to persist the column widths that the user has set</Line>
          <Line>3) Need categories to show as bold</Line>
          <Line>4) Need to remove toolbar to cleanup the clutter</Line>
          <Line>5) Need programmatic control on selecting next and previous cells</Line>
          <Line>6) Need programmatic control to clear and update values</Line>
          <Line>7) Need tab and shift+tab to cycle to the next/previous cell and apply value</Line>
          <Line>8) Need more control on setting sort keys</Line>
          <Line>9) Needed to fix some miscellaneous bugs (especially with dispose issues)</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="NEW" />
    <resolution amount="" />
    <WithStack>There were several enhancements we needed to the Properties View to make it work
ideally for our product and customers.  I will list up the enhancements we made
and follow up by attaching or including the code.  The enhancements are the
following:

1) Need control on setting default column widths
2) Need to persist the column widths that the user has set
3) Need categories to show as bold
4) Need to remove toolbar to cleanup the clutter
5) Need programmatic control on selecting next and previous cells
6) Need programmatic control to clear and update values
7) Need tab and shift+tab to cycle to the next/previous cell and apply value
8) Need more control on setting sort keys 
9) Needed to fix some miscellaneous bugs (especially with dispose issues)

Novell is contributing this particular code back to the Eclipse code base if you
choose to use any, none, or all of it - or take the ideas and implement it in
your own way.
One other enhancement that was made was to update the values of a cell when the
user hits the Enter key.
Created attachment 25474
Source code for Property View enhancements.
This looks very interesting.  From my own RCP development experience, I remember
that my users explicitly asked for 8, 2, 4, and 1 (prioritized in that order).

As for 7 (keyboard control), my users wanted to use up-arrow and down-arrow to
apply the value of the current cell and start editing the previous/next cell.  I
guess this is something that would be useful for editable tables in general.

I don't know what your use cases were for 5 and 6. Lee, could you provide more
detail why you needed these features?

The whole CellEditor / PropertyView setup is high on my 'want to fix' list. 
Unfortunately the current design seems to be sufficiently broken that without 
making 'breaking' changes it is not possible to provide some of the 
functioanlity that is being requested.

For example, since the current API allows CellEditor derivatives to NOT 
call 'super.activate()' (due to the line 'subclasses may reimplement' in the 
javadoc) we cannot implement proper (and necessary) Activate / Deactivate 
events. This would be necessary in order to implement 7 (so the Property View 
can reliably determine whether or not a cell is active).

I'm currently looking at how I can arrange to do this in a 'least breaking' 
manner...old CE's (and Property Views using them have the existing defects but 
CE's that honor the new contract would work correctly) but I'm not 
there...yet...;-).


Sorry for the slow reply.  #5 and #6 were needed just a means to an end - they 
really aren't needed in and of themselves, but I needed this capability to be 
able to do the keyboard navigation mentioned in #7.</WithStack>
    <WithOutStack>There were several enhancements we needed to the Properties View to make it work
ideally for our product and customers.  I will list up the enhancements we made
and follow up by attaching or including the code.  The enhancements are the
following:

1) Need control on setting default column widths
2) Need to persist the column widths that the user has set
3) Need categories to show as bold
4) Need to remove toolbar to cleanup the clutter
5) Need programmatic control on selecting next and previous cells
6) Need programmatic control to clear and update values
7) Need tab and shift+tab to cycle to the next/previous cell and apply value
8) Need more control on setting sort keys 
9) Needed to fix some miscellaneous bugs (especially with dispose issues)

Novell is contributing this particular code back to the Eclipse code base if you
choose to use any, none, or all of it - or take the ideas and implement it in
your own way.
One other enhancement that was made was to update the values of a cell when the
user hits the Enter key.
Created attachment 25474
Source code for Property View enhancements.
This looks very interesting.  From my own RCP development experience, I remember
that my users explicitly asked for 8, 2, 4, and 1 (prioritized in that order).

As for 7 (keyboard control), my users wanted to use up-arrow and down-arrow to
apply the value of the current cell and start editing the previous/next cell.  I
guess this is something that would be useful for editable tables in general.

I don't know what your use cases were for 5 and 6. Lee, could you provide more
detail why you needed these features?

The whole CellEditor / PropertyView setup is high on my 'want to fix' list. 
Unfortunately the current design seems to be sufficiently broken that without 
making 'breaking' changes it is not possible to provide some of the 
functioanlity that is being requested.

For example, since the current API allows CellEditor derivatives to NOT 
call 'super.activate()' (due to the line 'subclasses may reimplement' in the 
javadoc) we cannot implement proper (and necessary) Activate / Deactivate 
events. This would be necessary in order to implement 7 (so the Property View 
can reliably determine whether or not a cell is active).

I'm currently looking at how I can arrange to do this in a 'least breaking' 
manner...old CE's (and Property Views using them have the existing defects but 
CE's that honor the new contract would work correctly) but I'm not 
there...yet...;-).


Sorry for the slow reply.  #5 and #6 were needed just a means to an end - they 
really aren't needed in and of themselves, but I needed this capability to be 
able to do the keyboard navigation mentioned in #7.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="105583" />
    <CreationDate amount="2005-07-29 12:28:00 -0400" />
    <DupId amount="122421" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="Ant" />
    <Version amount="3.1" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="enhancement" />
    <Summery>Change the way build-user.xml is loaded</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="DUPLICATE" />
    <WithStack>Instead of including build-user.xml through the DOCTYPE declaration the &lt;import&gt;
entity should be used.

This requires a slightly different build-user.xml file, but the advantage is
that XML editors are able to use a DTD on the build-user.xml file and therefore
not complain about malformed XML format. Problem noted when using the &lt;a
href="http://amateras.sourceforge.jp/cgi-bin/fswiki_en/wiki.cgi"&gt;amateras&lt;/a&gt;
XML editor when multiple targets are declared in the build-user.xml file.
enhancement in the works where any buildfiles in the project folder with the top level comment of:
&lt;!-- eclipse.import --&gt;
will be imported into the generated buildfile.
No entity includes are going to be used in the generated buildfile.


*** This bug has been marked as a duplicate of 122421 ***</WithStack>
    <WithOutStack>Instead of including build-user.xml through the DOCTYPE declaration the &lt;import&gt;
entity should be used.

This requires a slightly different build-user.xml file, but the advantage is
that XML editors are able to use a DTD on the build-user.xml file and therefore
not complain about malformed XML format. Problem noted when using the &lt;a
href="http://amateras.sourceforge.jp/cgi-bin/fswiki_en/wiki.cgi"&gt;amateras&lt;/a&gt;
XML editor when multiple targets are declared in the build-user.xml file.
enhancement in the works where any buildfiles in the project folder with the top level comment of:
&lt;!-- eclipse.import --&gt;
will be imported into the generated buildfile.
No entity includes are going to be used in the generated buildfile.


*** This bug has been marked as a duplicate of 122421 ***</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="105584" />
    <CreationDate amount="2005-07-29 12:35:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="JDT" />
    <component amount="UI" />
    <Version amount="3.0.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>[dnd] implement undo [refactoring]</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="NEW" />
    <resolution amount="" />
    <WithStack>Sometimes I accidentally drag and drop a folder (package) into a new place and 
eclipse automatically refactors it updates all the references. Then it is 
quite painful to undo this because it is not obvious where it went and I might 
have local modifications. 

I wish it would prompt me whether or not I want to actually move the package. 
This just happened to me in the resources view but I am sure it happens in 
other views (I don't want to try).
Tobias, instead of showing a dialog we should make DnD of packages and source
folders undoable. Shouldn't be to complicated since most of the code is already
there. Can you please have a look.
It would be good to have a dialog before doing something that could 
potentially affect hundreds of files. Like eclipse does for refactoring you 
could even show the files affected.
(In reply to comment #2)
&gt; It would be good to have a dialog before doing something that could 
&gt; potentially affect hundreds of files. Like eclipse does for refactoring you 
&gt; could even show the files affected.

I just got hit by this again. I was just navigating the folders and accidently 
dragged something. I didn't even notice that something was moved until I 
looked for it. Pleeeaase add a dialog.. this is quite painful. I had to 
completely replace my project from cvs.
Not for 3.2
*** Bug 16264 has been marked as a duplicate of this bug. ***</WithStack>
    <WithOutStack>Sometimes I accidentally drag and drop a folder (package) into a new place and 
eclipse automatically refactors it updates all the references. Then it is 
quite painful to undo this because it is not obvious where it went and I might 
have local modifications. 

I wish it would prompt me whether or not I want to actually move the package. 
This just happened to me in the resources view but I am sure it happens in 
other views (I don't want to try).
Tobias, instead of showing a dialog we should make DnD of packages and source
folders undoable. Shouldn't be to complicated since most of the code is already
there. Can you please have a look.
It would be good to have a dialog before doing something that could 
potentially affect hundreds of files. Like eclipse does for refactoring you 
could even show the files affected.
(In reply to comment #2)
&gt; It would be good to have a dialog before doing something that could 
&gt; potentially affect hundreds of files. Like eclipse does for refactoring you 
&gt; could even show the files affected.

I just got hit by this again. I was just navigating the folders and accidently 
dragged something. I didn't even notice that something was moved until I 
looked for it. Pleeeaase add a dialog.. this is quite painful. I had to 
completely replace my project from cvs.
Not for 3.2
*** Bug 16264 has been marked as a duplicate of this bug. ***</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="105585" />
    <CreationDate amount="2005-07-29 12:49:00 -0400" />
    <DupId amount="50517" />
    <classification amount="Eclipse" />
    <Product amount="PDE" />
    <component amount="UI" />
    <Version amount="3.2" />
    <rep_platform amount="All" />
    <op_sys amount="All" />
    <priority amount="P3" />
    <bug_severity amount="enhancement" />
    <Summery>Make the Error Log view available outside of PDE</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="DUPLICATE" />
    <WithStack>Anyone who is running eclipse, whether as an IDE, or an RCP or a platform for
any arbitrary plugins/features, could use the functionality of the Error Log
view.  Unfortunately, because it is a part of the PDE feature, it comes with all
of the other PDE plugins and functionality.  It would be better to include this
view in the Eclipse platform as a Basic view.


*** This bug has been marked as a duplicate of 50517 ***</WithStack>
    <WithOutStack>Anyone who is running eclipse, whether as an IDE, or an RCP or a platform for
any arbitrary plugins/features, could use the functionality of the Error Log
view.  Unfortunately, because it is a part of the PDE feature, it comes with all
of the other PDE plugins and functionality.  It would be better to include this
view in the Eclipse platform as a Basic view.


*** This bug has been marked as a duplicate of 50517 ***</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="105586" />
    <CreationDate amount="2005-07-29 12:49:00 -0400" />
    <DupId amount="" />
    <classification amount="Tools" />
    <Product amount="TPTP Release Engineering" />
    <component amount="TPTP.Web" />
    <Version amount="4.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>And links to "Built on TPTP" page</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="8">
        <Lines>
          <Line>- IBM Rational Application Developer for Websphere Software:</Line>
          <Line>http://www-306.ibm.com/software/awdtools/developer/application/index.html</Line>
          <Line>- IBM Rational Software Architect:</Line>
          <Line>http://www-306.ibm.com/software/awdtools/architect/swarchitect/index.html</Line>
          <Line>- IBM Rational Manual Tester:</Line>
          <Line>http://www-306.ibm.com/software/awdtools/tester/manual/index.html</Line>
          <Line>- IBM Rational Performance Tester:</Line>
          <Line>http://www-306.ibm.com/software/awdtools/tester/performance/index.html</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>Please add the following links to the list of "Products Built on TPTP" on 
http://www.eclipse.org/tptp/home/project_info/general/buildon.html

       - IBM Rational Application Developer for Websphere Software:  
http://www-306.ibm.com/software/awdtools/developer/application/index.html 
        - IBM Rational Software Architect: 
http://www-306.ibm.com/software/awdtools/architect/swarchitect/index.html 
        - IBM Rational Manual Tester: 
http://www-306.ibm.com/software/awdtools/tester/manual/index.html 
        - IBM Rational Performance Tester: 
http://www-306.ibm.com/software/awdtools/tester/performance/index.html 

Thanks,
Ling
Done. See http://www.eclipse.org/tptp/home/project_info/general/buildon.html
As of TPTP 4.6.0, TPTP is in maintenance mode and focusing on improving quality by resolving relevant enhancements/defects and increasing test coverage through test creation, automation, Build Verification Tests (BVTs), and expanded run-time execution. As part of the TPTP Bugzilla housecleaning process (see http://wiki.eclipse.org/Bugzilla_Housecleaning_Processes), this enhancement/defect is verified/closed by the Project Lead since this enhancement/defect has been resolved and unverified for more than 1 year and considered to be fixed. If this enhancement/defect is still unresolved and reproducible in the latest TPTP release (http://www.eclipse.org/tptp/home/downloads/), please re-open.</WithStack>
    <WithOutStack>Please add the following links to the list of "Products Built on TPTP" on 
http://www.eclipse.org/tptp/home/project_info/general/buildon.html

       - IBM Rational Application Developer for Websphere Software:  
http://www-306.ibm.com/software/awdtools/developer/application/index.html 
        - IBM Rational Software Architect: 
http://www-306.ibm.com/software/awdtools/architect/swarchitect/index.html 
        - IBM Rational Manual Tester: 
http://www-306.ibm.com/software/awdtools/tester/manual/index.html 
        - IBM Rational Performance Tester: 
http://www-306.ibm.com/software/awdtools/tester/performance/index.html 

Thanks,
Ling
Done. See http://www.eclipse.org/tptp/home/project_info/general/buildon.html
As of TPTP 4.6.0, TPTP is in maintenance mode and focusing on improving quality by resolving relevant enhancements/defects and increasing test coverage through test creation, automation, Build Verification Tests (BVTs), and expanded run-time execution. As part of the TPTP Bugzilla housecleaning process (see http://wiki.eclipse.org/Bugzilla_Housecleaning_Processes), this enhancement/defect is verified/closed by the Project Lead since this enhancement/defect has been resolved and unverified for more than 1 year and considered to be fixed. If this enhancement/defect is still unresolved and reproducible in the latest TPTP release (http://www.eclipse.org/tptp/home/downloads/), please re-open.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="105587" />
    <CreationDate amount="2005-07-29 13:02:00 -0400" />
    <DupId amount="" />
    <classification amount="Tools" />
    <Product amount="GEF" />
    <component amount="Examples [GEF 3.x / Zest 1.x]" />
    <Version amount="3.1" />
    <rep_platform amount="All" />
    <op_sys amount="All" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>the caret cannot be placed at the end of a line if it's set by mouse click</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>When moving around the caret by a mouse click, the caret can never be able to be
set at the end of a line.  It is possible to move the caret to the end of a line
using the arrow keys though.
Created attachment 25469
patch for the caret to be able to be set at the end of the line by mouse click

To me, TextLayout.getOffset(int,int,int[]) should be able to return the
position of the end of a line, but it apparantly doesn't.  So this fix takes
care of the special 'end of line' situation.  It's done by comparing the passed
in value (x) and the location at the text length (layout.getLocation(length,
false).x).  If x is bigger than or equal to the location, then that means the
caret MUST be set at the end of the line.
Yes, this is because we need to set trailing = true in that case.

TextLayout and TextFlow are returning the correct information. We are losing it 
in the CaretSearch.
*** Bug 96347 has been marked as a duplicate of this bug. ***
(In reply to comment #2)
&gt; Yes, this is because we need to set trailing = true in that case.
&gt; 
&gt; TextLayout and TextFlow are returning the correct information. We are losing it 
&gt; in the CaretSearch.

You are right, trailing is set to {0}.  It's actually never modified since the
array gets created!  But I set it to {1} in the debugger, but
TextLayout.getOffset(int,int,int[]) still doesn't return the right offset.
I think you have misunderstood something, Takahiro.  Set a breakpoint in 
SelectionRangeDragTracker#getCurrentTextLocation() and click past the end of a 
line of text in the text example.  You'll notice that when textPart.getLocation
() returns, trailing[0] will be set to 1.  However, getCurrentTextLocation() 
then ignores that trailing information and just returns the TextLocation.  
Later, when GraphicalTextViewer refreshes the caret, it places the caret at 
the location.offset - 1 with trailing equals true.  That is what's causing 
this problem.  What we need is some better way of specifying the selection 
range (and probably also caret placement).

On a side note, in the message you sent to gef-dev last week, you had said 
that you had fixed other scrolling and caret location problems.  If these 
problems included anything other than what we're discussing here, please open 
new bug reports for those.
Created attachment 26136
a patch for TextFlowPart

use the trailing information to place the caret properly.
Fixed.
Comment on attachment 26136
a patch for TextFlowPart

As this patch does not seem to have been applied, marking it as obsolete.</WithStack>
    <WithOutStack>When moving around the caret by a mouse click, the caret can never be able to be
set at the end of a line.  It is possible to move the caret to the end of a line
using the arrow keys though.
Created attachment 25469
patch for the caret to be able to be set at the end of the line by mouse click

To me, TextLayout.getOffset(int,int,int[]) should be able to return the
position of the end of a line, but it apparantly doesn't.  So this fix takes
care of the special 'end of line' situation.  It's done by comparing the passed
in value (x) and the location at the text length (layout.getLocation(length,
false).x).  If x is bigger than or equal to the location, then that means the
caret MUST be set at the end of the line.
Yes, this is because we need to set trailing = true in that case.

TextLayout and TextFlow are returning the correct information. We are losing it 
in the CaretSearch.
*** Bug 96347 has been marked as a duplicate of this bug. ***
(In reply to comment #2)
&gt; Yes, this is because we need to set trailing = true in that case.
&gt; 
&gt; TextLayout and TextFlow are returning the correct information. We are losing it 
&gt; in the CaretSearch.

You are right, trailing is set to {0}.  It's actually never modified since the
array gets created!  But I set it to {1} in the debugger, but
TextLayout.getOffset(int,int,int[]) still doesn't return the right offset.
I think you have misunderstood something, Takahiro.  Set a breakpoint in 
SelectionRangeDragTracker#getCurrentTextLocation() and click past the end of a 
line of text in the text example.  You'll notice that when textPart.getLocation
() returns, trailing[0] will be set to 1.  However, getCurrentTextLocation() 
then ignores that trailing information and just returns the TextLocation.  
Later, when GraphicalTextViewer refreshes the caret, it places the caret at 
the location.offset - 1 with trailing equals true.  That is what's causing 
this problem.  What we need is some better way of specifying the selection 
range (and probably also caret placement).

On a side note, in the message you sent to gef-dev last week, you had said 
that you had fixed other scrolling and caret location problems.  If these 
problems included anything other than what we're discussing here, please open 
new bug reports for those.
Created attachment 26136
a patch for TextFlowPart

use the trailing information to place the caret properly.
Fixed.
Comment on attachment 26136
a patch for TextFlowPart

As this patch does not seem to have been applied, marking it as obsolete.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="105588" />
    <CreationDate amount="2005-07-29 13:19:00 -0400" />
    <DupId amount="" />
    <classification amount="Modeling" />
    <Product amount="M2T" />
    <component amount="Jet" />
    <Version amount="unspecified" />
    <rep_platform amount="All" />
    <op_sys amount="All" />
    <priority amount="P2" />
    <bug_severity amount="enhancement" />
    <Summery>Better visibility for JET on EMF website, bugzilla etc.</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="9">
        <Lines>
          <Line>1) On the EMF web site there should be a quick navigation link to info about JET.</Line>
          <Line>2) Bugzilla entires should have a "component" called "Jet".</Line>
          <Line>3) Website and help contents should include a printable quick JET reference with</Line>
          <Line>the syntax and directives (right now this info is hidden away in a tutorial</Line>
          <Line>article).</Line>
          <Line>anything planned?</Line>
          <Line>Actually, yes. JET is moving to EMFT as its own subproject. Builds should be available shortly. Documentation will presumably follow from there. See bug 130256.</Line>
          <Line>I'll leave this to Paul to address as part of the new JET 2 work.</Line>
          <Line>JET has now moved to the M2T project.</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="NEW" />
    <resolution amount="" />
    <WithStack>JET is like a hidden gem. A bit more information about it would be highly
beneficial for its adaption. In particular the JET tool should be more visible
in a number of places on the eclipse web site:

1) On the EMF web site there should be a quick navigation link to info about JET.
2) Bugzilla entires should have a "component" called "Jet".
3) Website and help contents should include a printable quick JET reference with
the syntax and directives (right now this info is hidden away in a tutorial
article).
anything planned?
Actually, yes. JET is moving to EMFT as its own subproject. Builds should be available shortly. Documentation will presumably follow from there. See bug 130256.
I'll leave this to Paul to address as part of the new JET 2 work.
JET has now moved to the M2T project. 

http://www.eclipse.org/modeling/m2t/?project=jet
There are a few new M2T-JET docs here:

http://wiki.eclipse.org/index.php/M2T-JET

but we're always looking for more. 

Morten, do you have anything to contribute to the JET wiki?</WithStack>
    <WithOutStack>JET is like a hidden gem. A bit more information about it would be highly
beneficial for its adaption. In particular the JET tool should be more visible
in a number of places on the eclipse web site:

1) On the EMF web site there should be a quick navigation link to info about JET.
2) Bugzilla entires should have a "component" called "Jet".
3) Website and help contents should include a printable quick JET reference with
the syntax and directives (right now this info is hidden away in a tutorial
article).
anything planned?
Actually, yes. JET is moving to EMFT as its own subproject. Builds should be available shortly. Documentation will presumably follow from there. See bug 130256.
I'll leave this to Paul to address as part of the new JET 2 work.
JET has now moved to the M2T project. 

http://www.eclipse.org/modeling/m2t/?project=jet
There are a few new M2T-JET docs here:

http://wiki.eclipse.org/index.php/M2T-JET

but we're always looking for more. 

Morten, do you have anything to contribute to the JET wiki?</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="105589" />
    <CreationDate amount="2005-07-29 13:31:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse Foundation" />
    <Product amount="z_Archived" />
    <component amount="VE" />
    <Version amount="unspecified" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="trivial" />
    <Summery>TableColumn default name in palette is ivjTableColumn</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>We should change this to not have the ivj on it.
committed to HEAD for VE 1.1.0.1.  please close.
(In reply to comment #1)
&gt; committed to HEAD for VE 1.1.0.1.  please close.


Closed
verified in VE M20050817</WithStack>
    <WithOutStack>We should change this to not have the ivj on it.
committed to HEAD for VE 1.1.0.1.  please close.
(In reply to comment #1)
&gt; committed to HEAD for VE 1.1.0.1.  please close.


Closed
verified in VE M20050817</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="105590" />
    <CreationDate amount="2005-07-29 13:31:00 -0400" />
    <DupId amount="" />
    <classification amount="RT" />
    <Product amount="Equinox" />
    <component amount="Framework" />
    <Version amount="3.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="enhancement" />
    <Summery>Framework Policy for Eclipse-BuddyPolicy</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="WONTFIX" />
    <WithStack>What I'm looking for is something analagous to osgi.parentClassloader=fwk but 
less heavy-handed. Ideally I'd like to limit access to the "fwk" classloader to 
those bundles that explicitly state the requirement in their manifest

Eclipse-BuddyPolicy: app is very close however in many situations I can't 
control the app classloader.

Something like [Eclipse-BuddyPolicy: fwk] would work and could be used to 
indicate that the framework classloader should be consulted.
Created attachment 25470
Adds "fwk" policy

Here's a patch that adds the new policy for anyone who's interested. It's a
very small code change.
Created attachment 25471
the "fwk" doc change

Equally small doc change.
If the osgi.framework property is set to fwk, then setting the buddy policy to
"parent" will do the same. The slight difference with your request is: in my
case all the bundles get access to the fwk classloader and and they get access
to it earlier than in the failure case.

Which classes are you trying to gain access to?
What you describe I think I'm doing (currently) 
with "osgi.parentClassloader=fwk" but as you mention all bundles have access to 
the framework classloader.

I'm interested in launching a headless instance of Eclipse server-side from an 
appserver and have little control over the classpath. I'm also a fan of the 
modularity benefits given by parenting the whole framework with the 
minimal "boot" classlaoder. 


So... as much as possible I'd like to isolate bundles from the appserver 
classpath except where explicitly desired. Something like "Eclipse-BuddyPolicy: 
fwk" works well for this.

In terms of what classes I'm trying to gain access to ... any resources from 
the appserver should be fair game but only when stated explicitly.

This never really did what I wanted.
What I was looking for was someway to have a bundle that was able to "export" packages and resources available on the "fwk" classloader while the osgi.parentclassLoader was "ext" or "boot".
 
"Eclipse-BuddyPolicy: fwk" only allows the bundle declaring the header access to "fwk" but not those bundles that import from it or are dependent on the bundle. This still may be useful but it's not really what I'm looking for.


Still looking for any ideas -- moving to Equinox framework where it should live. I can describe some use-cases if helpful.
Ok... I've tested and "Extension Bundles" give exactly the behaviour I'm looking for.

Changing to WONTFIX as the functionality I need is already handled more cleanly in 3.2. If for some reason someone wants Eclipse-BuddyPolicy "fwk" support they can re-open.</WithStack>
    <WithOutStack>What I'm looking for is something analagous to osgi.parentClassloader=fwk but 
less heavy-handed. Ideally I'd like to limit access to the "fwk" classloader to 
those bundles that explicitly state the requirement in their manifest

Eclipse-BuddyPolicy: app is very close however in many situations I can't 
control the app classloader.

Something like [Eclipse-BuddyPolicy: fwk] would work and could be used to 
indicate that the framework classloader should be consulted.
Created attachment 25470
Adds "fwk" policy

Here's a patch that adds the new policy for anyone who's interested. It's a
very small code change.
Created attachment 25471
the "fwk" doc change

Equally small doc change.
If the osgi.framework property is set to fwk, then setting the buddy policy to
"parent" will do the same. The slight difference with your request is: in my
case all the bundles get access to the fwk classloader and and they get access
to it earlier than in the failure case.

Which classes are you trying to gain access to?
What you describe I think I'm doing (currently) 
with "osgi.parentClassloader=fwk" but as you mention all bundles have access to 
the framework classloader.

I'm interested in launching a headless instance of Eclipse server-side from an 
appserver and have little control over the classpath. I'm also a fan of the 
modularity benefits given by parenting the whole framework with the 
minimal "boot" classlaoder. 


So... as much as possible I'd like to isolate bundles from the appserver 
classpath except where explicitly desired. Something like "Eclipse-BuddyPolicy: 
fwk" works well for this.

In terms of what classes I'm trying to gain access to ... any resources from 
the appserver should be fair game but only when stated explicitly.

This never really did what I wanted.
What I was looking for was someway to have a bundle that was able to "export" packages and resources available on the "fwk" classloader while the osgi.parentclassLoader was "ext" or "boot".
 
"Eclipse-BuddyPolicy: fwk" only allows the bundle declaring the header access to "fwk" but not those bundles that import from it or are dependent on the bundle. This still may be useful but it's not really what I'm looking for.


Still looking for any ideas -- moving to Equinox framework where it should live. I can describe some use-cases if helpful.
Ok... I've tested and "Extension Bundles" give exactly the behaviour I'm looking for.

Changing to WONTFIX as the functionality I need is already handled more cleanly in 3.2. If for some reason someone wants Eclipse-BuddyPolicy "fwk" support they can re-open.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="105591" />
    <CreationDate amount="2005-07-29 13:32:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="SWT" />
    <Version amount="3.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Problems setting and updating an Image on a Label</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="1">
      <source_code type="class">
        <location start="131" end="1065" />
        <code>public class Main {
  public static void main(String[] args) {
    Display display = new Display();
    Shell shell = new Shell(display);
    shell.setLayout(new FillLayout());

    Image image = new Image(display, 160, 160);
    GC gc = new GC(image);
    gc.setBackground(display.getSystemColor(SWT.COLOR_BLUE));
    gc.fillRectangle(0, 0, 160, 160);
    gc.dispose();

    final Image image2 = new Image(display, 160, 160);
    GC gc2 = new GC(image2);
    gc2.setBackground(display.getSystemColor(SWT.COLOR_RED));
    gc2.fillRectangle(0, 0, 160, 160);
    gc2.dispose();

    final Label label = new Label(shell, SWT.NONE);
    label.setImage(image);

    label.addMouseListener(new MouseAdapter() {
      public void mouseDown(MouseEvent e) {
        label.setImage(image2);
      }
    });

    shell.open();
    while (!shell.isDisposed()) {
      if (!display.readAndDispatch()) {
        display.sleep();
      }
    }
  }
}</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>Using latest 3.2 IBuild of SWT, I am seeing different results setting and
updating an Image on a Label to 3.1.

See this snippet:

public class Main {
  public static void main(String[] args) {
    Display display = new Display();
    Shell shell = new Shell(display);
    shell.setLayout(new FillLayout());

    Image image = new Image(display, 160, 160);
    GC gc = new GC(image);
    gc.setBackground(display.getSystemColor(SWT.COLOR_BLUE));
    gc.fillRectangle(0, 0, 160, 160);
    gc.dispose();

    final Image image2 = new Image(display, 160, 160);
    GC gc2 = new GC(image2);
    gc2.setBackground(display.getSystemColor(SWT.COLOR_RED));
    gc2.fillRectangle(0, 0, 160, 160);
    gc2.dispose();

    final Label label = new Label(shell, SWT.NONE);
    label.setImage(image);

    label.addMouseListener(new MouseAdapter() {
      public void mouseDown(MouseEvent e) {
        label.setImage(image2);
      }
    });

    shell.open();
    while (!shell.isDisposed()) {
      if (!display.readAndDispatch()) {
        display.sleep();
      }
    }
  }
}

With 3.1 I am seeing the Blue Rectangle in the center of the Shell. A click on
it updates to the Red Label.

With 3.2 I am seeing the Blue Rectangle top-left of the Shell. A click on it
does not update to the Red Label until I call redraw.

Ben
Fixed &gt; 20050803
... now it's fixed.</WithStack>
    <WithOutStack>Using latest 3.2 IBuild of SWT, I am seeing different results setting and
updating an Image on a Label to 3.1.

See this snippet:

public class Main {
  public static void main(String[] args) {
    Display display = new Display();
    Shell shell = new Shell(display);
    shell.setLayout(new FillLayout());

    Image image = new Image(display, 160, 160);
    GC gc = new GC(image);
    gc.setBackground(display.getSystemColor(SWT.COLOR_BLUE));
    gc.fillRectangle(0, 0, 160, 160);
    gc.dispose();

    final Image image2 = new Image(display, 160, 160);
    GC gc2 = new GC(image2);
    gc2.setBackground(display.getSystemColor(SWT.COLOR_RED));
    gc2.fillRectangle(0, 0, 160, 160);
    gc2.dispose();

    final Label label = new Label(shell, SWT.NONE);
    label.setImage(image);

    label.addMouseListener(new MouseAdapter() {
      public void mouseDown(MouseEvent e) {
        label.setImage(image2);
      }
    });

    shell.open();
    while (!shell.isDisposed()) {
      if (!display.readAndDispatch()) {
        display.sleep();
      }
    }
  }
}

With 3.1 I am seeing the Blue Rectangle in the center of the Shell. A click on
it updates to the Red Label.

With 3.2 I am seeing the Blue Rectangle top-left of the Shell. A click on it
does not update to the Red Label until I call redraw.

Ben
Fixed &gt; 20050803
... now it's fixed.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="105592" />
    <CreationDate amount="2005-07-29 13:33:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="JDT" />
    <component amount="Core" />
    <Version amount="3.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Enum switch statement compile error</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="1">
      <source_code type="class">
        <location start="444" end="649" />
        <code>public class EnumError {
	
	public enum State {
		NORMAL
	}
	
	public void foo() {
		State state = State.NORMAL;
		switch (state) {
		case (NORMAL) :
			System.out.println(State.NORMAL);
			break;
		}
	}
}</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="0" />
    <bug_status amount="VERIFIED" />
    <resolution amount="FIXED" />
    <WithStack>The following code compiles in Eclipse but not under javac. The problem is the 
parenthesis around NORMAL, under javac (java version "1.5.0_04") this causes a 
compile time error. According to the JLS 3rd edition 
(http://java.sun.com/docs/books/jls/third_edition/html/statements.html#14.11) 
it's either a constant expression or an enum constant name. I think javac has 
the correct behavior (it fails to compile), but a lousy error message.

public class EnumError {
	
	public enum State {
		NORMAL
	}
	
	public void foo() {
		State state = State.NORMAL;
		switch (state) {
		case (NORMAL) :
			System.out.println(State.NORMAL);
			break;
		}
	}
}
I would say this is a bug in javac if I refer to jls 15.28 about the constant
expression specifications:
15.28 Constant Expression


ConstantExpression:
        Expression

A compile-time constant expression is an expression denoting a value of
primitive type or a String that does not complete abruptly and is composed using
only the following:
...
    * Parenthesized expressions whose contained expression is a constant expression.
...

So because NORMAL is a constant expression, (NORMAL) should also be a constant
expression.
If you remove the surrounding parenthesis, it works fine.

Philippe, I would close as INVALID.
I would agree with you Olivier. Please add a regression test, and close as invalid.
Added org.eclipse.jdt.core.tests.compiler.regression.EnumTest.test122.
Closing as INVALID.
*** Bug 108675 has been marked as a duplicate of this bug. ***
Reopening, pls see last comment Javac matching entryhttp://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6356542

We should reject parenthesized enum constants in switch.
URL is http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6356542
Fixed and released in HEAD.
Regression test added in org.eclipse.jdt.core.tests.compiler.regression.EnumTest.test122.
Verified for 3.2 M4 using build I20051212-0010</WithStack>
    <WithOutStack>The following code compiles in Eclipse but not under javac. The problem is the 
parenthesis around NORMAL, under javac (java version "1.5.0_04") this causes a 
compile time error. According to the JLS 3rd edition 
(http://java.sun.com/docs/books/jls/third_edition/html/statements.html#14.11) 
it's either a constant expression or an enum constant name. I think javac has 
the correct behavior (it fails to compile), but a lousy error message.

public class EnumError {
	
	public enum State {
		NORMAL
	}
	
	public void foo() {
		State state = State.NORMAL;
		switch (state) {
		case (NORMAL) :
			System.out.println(State.NORMAL);
			break;
		}
	}
}
I would say this is a bug in javac if I refer to jls 15.28 about the constant
expression specifications:
15.28 Constant Expression


ConstantExpression:
        Expression

A compile-time constant expression is an expression denoting a value of
primitive type or a String that does not complete abruptly and is composed using
only the following:
...
    * Parenthesized expressions whose contained expression is a constant expression.
...

So because NORMAL is a constant expression, (NORMAL) should also be a constant
expression.
If you remove the surrounding parenthesis, it works fine.

Philippe, I would close as INVALID.
I would agree with you Olivier. Please add a regression test, and close as invalid.
Added org.eclipse.jdt.core.tests.compiler.regression.EnumTest.test122.
Closing as INVALID.
*** Bug 108675 has been marked as a duplicate of this bug. ***
Reopening, pls see last comment Javac matching entryhttp://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6356542

We should reject parenthesized enum constants in switch.
URL is http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6356542
Fixed and released in HEAD.
Regression test added in org.eclipse.jdt.core.tests.compiler.regression.EnumTest.test122.
Verified for 3.2 M4 using build I20051212-0010</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="105593" />
    <CreationDate amount="2005-07-29 13:37:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse Foundation" />
    <Product amount="z_Archived" />
    <component amount="VE" />
    <Version amount="unspecified" />
    <rep_platform amount="PC" />
    <op_sys amount="Linux-GTK" />
    <priority amount="P3" />
    <bug_severity amount="major" />
    <Summery>TVT 3.1 - TCT 475 - "Style" on New Visual Class Wizard not externalized</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="5">
        <Lines>
          <Line>1. File-&gt;New-&gt;Project-&gt;Java project</Line>
          <Line>2. press ‘Next’. Enter a project name, such as VEtest, and press ‘Finish’.</Line>
          <Line>3. Select File-&gt;New...-&gt;Other... In the New dialog that appears select and</Line>
          <Line>expand the Java option on the left. Then expand the AWT option.</Line>
          <Line>4. In the AWT subfolder select the Frame Visual Class option, then press Next.</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>OS : RHEL 3.1
MUST FIX: Yes
Severity 2
Build date: 20050725
Blocking: NO
Language: CHT
Bitmap Location: 474_210021010.gif
Tester Name: Ivory Chang

Problem Description: New Java Visual Class wizard is in English
Re-create Procedure:
1. File-&gt;New-&gt;Project-&gt;Java project
2. press ‘Next’. Enter a project name, such as VEtest, and press ‘Finish’.
3. Select File-&gt;New...-&gt;Other... In the New dialog that appears select and
expand the Java option on the left. Then expand the AWT option.
4. In the AWT subfolder select the Frame Visual Class option, then press Next.

Best Regards, Ivory Chang TVT, Taiwan
Created attachment 25472
style needs to be externalized
the "style:" text has now been externalized and will be picked up in the next
translation pass.
verified in VE M20050817</WithStack>
    <WithOutStack>OS : RHEL 3.1
MUST FIX: Yes
Severity 2
Build date: 20050725
Blocking: NO
Language: CHT
Bitmap Location: 474_210021010.gif
Tester Name: Ivory Chang

Problem Description: New Java Visual Class wizard is in English
Re-create Procedure:
1. File-&gt;New-&gt;Project-&gt;Java project
2. press ‘Next’. Enter a project name, such as VEtest, and press ‘Finish’.
3. Select File-&gt;New...-&gt;Other... In the New dialog that appears select and
expand the Java option on the left. Then expand the AWT option.
4. In the AWT subfolder select the Frame Visual Class option, then press Next.

Best Regards, Ivory Chang TVT, Taiwan
Created attachment 25472
style needs to be externalized
the "style:" text has now been externalized and will be picked up in the next
translation pass.
verified in VE M20050817</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="105594" />
    <CreationDate amount="2005-07-29 13:40:00 -0400" />
    <DupId amount="" />
    <classification amount="Modeling" />
    <Product amount="M2T" />
    <component amount="Jet" />
    <Version amount="unspecified" />
    <rep_platform amount="All" />
    <op_sys amount="All" />
    <priority amount="P4" />
    <bug_severity amount="enhancement" />
    <Summery>Support for JET sections  (macro-like facility)</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="1">
      <source_code type="functiondef">
        <location start="649" end="712" />
        <code>&lt;%private void formatThis(String name) {%&gt;
&lt;i&gt;&lt;%=name%&gt;&lt;/i&gt;
&lt;%}</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="0" />
    <bug_status amount="NEW" />
    <resolution amount="" />
    <WithStack>Currently all text in JET templates it compiled to print statements in a single
"generate" method. I would like to be able to change the method that the print
statements are compiled to during the template, allowing for the reuse of
sections of JET code in the template (e.g. using java methods written with JET
as parameterized macros from within the same template). This is VERY useful for
complex JET templates, especially those that need be maintained by hand.

For an example see below that shows how to declare a template method called
"formatThis" that just like a macro can be called from the normal generate method.

&lt;%@ section declare %&gt;
&lt;%private void formatThis(String name) {%&gt;
&lt;i&gt;&lt;%=name%&gt;&lt;/i&gt;
&lt;%}%&gt;

&lt;%@ section generate %&gt;
&lt;% formatThis( "foo" ); %&gt;

Nb. This is similar to a feature called sections in the Jostraca code generator
- see http://www.jostraca.net/doc/ref/nreftemdirall.htm#section.
In JET, the usual mechanism for composition and reuse is to define reusable
pieces in individual templates, and then include them.  Also, the JET
enhancements in bug 105966 are expected to include declarations, which allow
simple methods to be literally defined.

That's not to say that this enhancement wouldn't be nice to have.  However, it
can't be considered high priority.
About the existing reuse mechanism: What if you need something almost identical
several times in one big template but it's is not useful outside your context
(i.e. very specific). For this you need to define a private helper method, which
is exactly what I propose. Individual reuseable templates are not always
applicable. The small changes in the proposed feature would make JET much more
useful as a generic template processing facility.
I'll assign this for Paul to consider as part of JET 2.</WithStack>
    <WithOutStack>Currently all text in JET templates it compiled to print statements in a single
"generate" method. I would like to be able to change the method that the print
statements are compiled to during the template, allowing for the reuse of
sections of JET code in the template (e.g. using java methods written with JET
as parameterized macros from within the same template). This is VERY useful for
complex JET templates, especially those that need be maintained by hand.

For an example see below that shows how to declare a template method called
"formatThis" that just like a macro can be called from the normal generate method.

&lt;%@ section declare %&gt;
&lt;%private void formatThis(String name) {%&gt;
&lt;i&gt;&lt;%=name%&gt;&lt;/i&gt;
&lt;%}%&gt;

&lt;%@ section generate %&gt;
&lt;% formatThis( "foo" ); %&gt;

Nb. This is similar to a feature called sections in the Jostraca code generator
- see http://www.jostraca.net/doc/ref/nreftemdirall.htm#section.
In JET, the usual mechanism for composition and reuse is to define reusable
pieces in individual templates, and then include them.  Also, the JET
enhancements in bug 105966 are expected to include declarations, which allow
simple methods to be literally defined.

That's not to say that this enhancement wouldn't be nice to have.  However, it
can't be considered high priority.
About the existing reuse mechanism: What if you need something almost identical
several times in one big template but it's is not useful outside your context
(i.e. very specific). For this you need to define a private helper method, which
is exactly what I propose. Individual reuseable templates are not always
applicable. The small changes in the proposed feature would make JET much more
useful as a generic template processing facility.
I'll assign this for Paul to consider as part of JET 2.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="105595" />
    <CreationDate amount="2005-07-29 13:42:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="JDT" />
    <component amount="Core" />
    <Version amount="3.1" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>[editor] class "cannot be resolved" error from static member on interface class referenced from library in (very large) external jar file</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="3">
      <source_code type="package">
        <location start="19" end="43" />
        <code>package com.bea.example;</code>
      </source_code>
      <source_code type="import">
        <location start="44" end="113" />
        <code>import weblogic.management.mbeanservers.runtime.RuntimeServiceMBean;</code>
      </source_code>
      <source_code type="class">
        <location start="115" end="250" />
        <code>public class JMXClient
{
   public static void main(String[] args)
   {
   	System.out.println(RuntimeServiceMBean.OBJECT_NAME);
   }
}</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="WORKSFORME" />
    <WithStack>Easy repro class:

package com.bea.example;

import weblogic.management.mbeanservers.runtime.RuntimeServiceMBean;

public class JMXClient
{
   public static void main(String[] args)
   {
   	System.out.println(RuntimeServiceMBean.OBJECT_NAME);
   }
}

The editor is giving an error stating "The import 
weblogic.management.mbeanservers.runtime.RuntimeServiceMBean cannot be 
resolved" when I absolutely know for fact that this class exists within the 
the weblogic.jar file which has been added to the libraries as an external jar 
file.

The code actually compiles and executes just fine, only the editor shows an 
error acting as though it cannot find this class definition (interestingly 
enough, the package explorer and other components don't show this error like 
they normally do).

The weblogic.jar file I am using is from the latest release of BEA WebLogic 
Server 9.0 available at http://commerce.bea.com/index.jsp for public download. 

The weblogic.jar file is extremely large (~75M).  If I extract out only the 
few interface class I'm using in my project and add these libraries as an 
external jar in a tiny file it works fine.

Please let me know if you need any assistance at all repro this problem.

eclipse.buildId=I20050627-1435
os.arch=x86
os.name=Windows XP
os.version=5.1
java.runtime.version=1.5.0_02-b09
java.specification.name=Java Platform API Specification
java.specification.vendor=Sun Microsystems Inc.
java.specification.version=1.5
java.vendor=Sun Microsystems Inc.
java.vendor.url=http://java.sun.com/
java.vendor.url.bug=http://java.sun.com/cgi-bin/bugreport.cgi
java.version=1.5.0_02
java.vm.info=mixed mode
java.vm.name=Java HotSpot(TM) Client VM
java.vm.specification.name=Java Virtual Machine Specification
java.vm.specification.vendor=Sun Microsystems Inc.
java.vm.specification.version=1.0
java.vm.vendor=Sun Microsystems Inc.
java.vm.version=1.5.0_02-b09

TIA
Clarification, it doesn't appear to have anything to do with accessing the 
public static final member of the interface class as it seems it simply cannot 
find the class defintion of the interface itself.
Frederic - pls try to reproduce with latest.
Cannot reproduce using 3.2 M6</WithStack>
    <WithOutStack>Easy repro class:

package com.bea.example;

import weblogic.management.mbeanservers.runtime.RuntimeServiceMBean;

public class JMXClient
{
   public static void main(String[] args)
   {
   	System.out.println(RuntimeServiceMBean.OBJECT_NAME);
   }
}

The editor is giving an error stating "The import 
weblogic.management.mbeanservers.runtime.RuntimeServiceMBean cannot be 
resolved" when I absolutely know for fact that this class exists within the 
the weblogic.jar file which has been added to the libraries as an external jar 
file.

The code actually compiles and executes just fine, only the editor shows an 
error acting as though it cannot find this class definition (interestingly 
enough, the package explorer and other components don't show this error like 
they normally do).

The weblogic.jar file I am using is from the latest release of BEA WebLogic 
Server 9.0 available at http://commerce.bea.com/index.jsp for public download. 

The weblogic.jar file is extremely large (~75M).  If I extract out only the 
few interface class I'm using in my project and add these libraries as an 
external jar in a tiny file it works fine.

Please let me know if you need any assistance at all repro this problem.

eclipse.buildId=I20050627-1435
os.arch=x86
os.name=Windows XP
os.version=5.1
java.runtime.version=1.5.0_02-b09
java.specification.name=Java Platform API Specification
java.specification.vendor=Sun Microsystems Inc.
java.specification.version=1.5
java.vendor=Sun Microsystems Inc.
java.vendor.url=http://java.sun.com/
java.vendor.url.bug=http://java.sun.com/cgi-bin/bugreport.cgi
java.version=1.5.0_02
java.vm.info=mixed mode
java.vm.name=Java HotSpot(TM) Client VM
java.vm.specification.name=Java Virtual Machine Specification
java.vm.specification.vendor=Sun Microsystems Inc.
java.vm.specification.version=1.0
java.vm.vendor=Sun Microsystems Inc.
java.vm.version=1.5.0_02-b09

TIA
Clarification, it doesn't appear to have anything to do with accessing the 
public static final member of the interface class as it seems it simply cannot 
find the class defintion of the interface itself.
Frederic - pls try to reproduce with latest.
Cannot reproduce using 3.2 M6</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="105596" />
    <CreationDate amount="2005-07-29 13:42:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse Foundation" />
    <Product amount="z_Archived" />
    <component amount="VE" />
    <Version amount="unspecified" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Drop an inner class and incorrect import code is generated</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>Drop an inner class and some incorrect code is generated. It depends on whether
we are both in the default package, or we are both in the same package, or are
in different packages. Need to work it out in all cases.
This problem happens when they are in two different packages. When the inner class is dropped, the import is added for the inner class, but the type for the bean is Outer.Inner and compile problems occur for the 'Outer'.Inner. 

Now when an internal bean is dropped, an import for the outer class is generated. The type of the bean is generated as Outer.Inner, so no compile problems arise. Released fixes to BeanPartFactory.java and CodeGenUtil.java.
Closing</WithStack>
    <WithOutStack>Drop an inner class and some incorrect code is generated. It depends on whether
we are both in the default package, or we are both in the same package, or are
in different packages. Need to work it out in all cases.
This problem happens when they are in two different packages. When the inner class is dropped, the import is added for the inner class, but the type for the bean is Outer.Inner and compile problems occur for the 'Outer'.Inner. 

Now when an internal bean is dropped, an import for the outer class is generated. The type of the bean is generated as Outer.Inner, so no compile problems arise. Released fixes to BeanPartFactory.java and CodeGenUtil.java.
Closing</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="105597" />
    <CreationDate amount="2005-07-29 14:01:00 -0400" />
    <DupId amount="100974" />
    <classification amount="Eclipse Foundation" />
    <Product amount="z_Archived" />
    <component amount="WTP Datatools" />
    <Version amount="unspecified" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows 2000" />
    <priority amount="P4" />
    <bug_severity amount="major" />
    <Summery>Database Explorer with MySQL 4.0 using double-quotes instead of backtick</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="DUPLICATE" />
    <WithStack>The Database Explorer is using the double-quotes as identifier quote character
for MySQL 4.0 instead of the backtick.

The MySql_4.0.xmi, DBDefinition-&gt;queryDefinition-&gt;identifierQuoteString value is
set to the backtick.

I have set this field to various different values.  None however have changed
the actual identifier quote being used.  As a result I receive a MySQL syntax
error when attempting to get Sample Contents from the DB Explorer.  I am also
not able to explore databases deeper than the table level.  None of the columns,
nor dependencies show up.

The MySQL distribution we are using is 4.0.17 for pc-linux (i686)
WST is RC5 on Eclipse 3.1
This looks like a typo to me, we will fix it in M8. The temp workaround for 
you would be changing "`" to "'" in the vendor doc for MySQL and they do a -
clean option when you start Eclipse. Let me know otherwise.

Der Ping


We can not change "`" to "'" in the vendor doc as this also causes sql exceptions.

The actions need to except the "`" character as well. I have tested this with
the "'" char and I get sql exceptions I have test this by fixing one action to
allow the "`" char and everything worked.

Please see bug 100974

*** This bug has been marked as a duplicate of 100974 ***
This is part of a mass update to close out all stale WTP defects already verified by the reporter but awaiting closure by the assignee.  If you feel this defect was closed inappropriately, please reopen.

Thanks, John Lanuti</WithStack>
    <WithOutStack>The Database Explorer is using the double-quotes as identifier quote character
for MySQL 4.0 instead of the backtick.

The MySql_4.0.xmi, DBDefinition-&gt;queryDefinition-&gt;identifierQuoteString value is
set to the backtick.

I have set this field to various different values.  None however have changed
the actual identifier quote being used.  As a result I receive a MySQL syntax
error when attempting to get Sample Contents from the DB Explorer.  I am also
not able to explore databases deeper than the table level.  None of the columns,
nor dependencies show up.

The MySQL distribution we are using is 4.0.17 for pc-linux (i686)
WST is RC5 on Eclipse 3.1
This looks like a typo to me, we will fix it in M8. The temp workaround for 
you would be changing "`" to "'" in the vendor doc for MySQL and they do a -
clean option when you start Eclipse. Let me know otherwise.

Der Ping


We can not change "`" to "'" in the vendor doc as this also causes sql exceptions.

The actions need to except the "`" character as well. I have tested this with
the "'" char and I get sql exceptions I have test this by fixing one action to
allow the "`" char and everything worked.

Please see bug 100974

*** This bug has been marked as a duplicate of 100974 ***
This is part of a mass update to close out all stale WTP defects already verified by the reporter but awaiting closure by the assignee.  If you feel this defect was closed inappropriately, please reopen.

Thanks, John Lanuti</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="105598" />
    <CreationDate amount="2005-07-29 14:04:00 -0400" />
    <DupId amount="" />
    <classification amount="WebTools" />
    <Product amount="WTP Source Editing" />
    <component amount="wst.xml" />
    <Version amount="unspecified" />
    <rep_platform amount="All" />
    <op_sys amount="All" />
    <priority amount="P3" />
    <bug_severity amount="enhancement" />
    <Summery>[outline] Enhance xml editing experience</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="9">
        <Lines>
          <Line>1.Toggle on/off show attributes in outline view (like shown in design view)</Line>
          <Line />
          <Line>2.Toggle on/off show second column with element content in outline view, like in</Line>
          <Line>design view</Line>
          <Line />
          <Line>3.Add in context menu in properties view (where editable attributes) commands to</Line>
          <Line>add and delete attributes when Grammar Contstraint off</Line>
          <Line>I agree, outline view and XML design view need to more closely integrated, if</Line>
          <Line>not same.</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="NEW" />
    <resolution amount="" />
    <WithStack>I think this will be very consistent features.
We need options so outline view can be exactly as
xml desing view.

To achive same funtionality now I open same file twice with xml editor
one set to Source mode, and second to Design mode and stack them side by side
But unfortunately editors are unlinked
In detail I propose to introduce such things

1.Toggle on/off show attributes in outline view (like shown in design view)

2.Toggle on/off show second column with element content in outline view, like in
design view

3.Add in context menu in properties view (where editable attributes) commands to
add and delete attributes when Grammar Contstraint off
I agree, outline view and XML design view need to more closely integrated, if
not same. 

Plus, if I may add-on (but seems related to a "rework effort") the design table
tree view should work and be available for any DOM (HTML and JSP ... not just XML). 

+1 fully argee. This feature will be great.
Interesting ideas, but we don't have people to work on this just now.  There is still a chance we might do it for 3.0 ourselves, but we would also accept high quality patches.
Idea #1 seems to be present in WTP 3.2.  So that just leaves 2 more to go.</WithStack>
    <WithOutStack>I think this will be very consistent features.
We need options so outline view can be exactly as
xml desing view.

To achive same funtionality now I open same file twice with xml editor
one set to Source mode, and second to Design mode and stack them side by side
But unfortunately editors are unlinked
In detail I propose to introduce such things

1.Toggle on/off show attributes in outline view (like shown in design view)

2.Toggle on/off show second column with element content in outline view, like in
design view

3.Add in context menu in properties view (where editable attributes) commands to
add and delete attributes when Grammar Contstraint off
I agree, outline view and XML design view need to more closely integrated, if
not same. 

Plus, if I may add-on (but seems related to a "rework effort") the design table
tree view should work and be available for any DOM (HTML and JSP ... not just XML). 

+1 fully argee. This feature will be great.
Interesting ideas, but we don't have people to work on this just now.  There is still a chance we might do it for 3.0 ourselves, but we would also accept high quality patches.
Idea #1 seems to be present in WTP 3.2.  So that just leaves 2 more to go.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="105599" />
    <CreationDate amount="2005-07-29 14:21:00 -0400" />
    <DupId amount="" />
    <classification amount="Tools" />
    <Product amount="CDT" />
    <component amount="cdt-core" />
    <Version amount="3.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="major" />
    <Summery>TVT 3.1: TCT535 - repeating "Rename" menu under "Refactor" pulldown</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="10">
        <Lines>
          <Line>- Select a Java project in Package Explorer</Line>
          <Line>- "Rename" menu under "Refactor" pulldown is repeating</Line>
          <Line>- When the first "Rename" is selected, a message saying "the function is not</Line>
          <Line>enabled" is displayed</Line>
          <Line>- problem happens in English also</Line>
          <Line>Created attachment 25473</Line>
          <Line>screen capture</Line>
          <Line>This is not a vanilla Eclipse 3.1 install. The refactoring menu in Eclipse 3.1</Line>
          <Line>doesn't contain any Undo/Redo actions anymore. Additionally there is only one</Line>
          <Line>Rename entry (see attached screen shot).</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>- Select a Java project in Package Explorer
- "Rename" menu under "Refactor" pulldown is repeating
- When the first "Rename" is selected, a message saying "the function is not
  enabled" is displayed
- problem happens in English also
Created attachment 25473
screen capture
This is not a vanilla Eclipse 3.1 install. The refactoring menu in Eclipse 3.1
doesn't contain any Undo/Redo actions anymore. Additionally there is only one
Rename entry (see attached screen shot). 

Kit, which additional plug-ins do you have installed. I assume that one of those
is causing the behaviour. Please report the bug to the plug-in that causes this.


Created attachment 25495
The screen shot
Kit, Steve, 

as said in comment #2 this isn't a Eclipse problem. It is caused by some other
plug-in you must have in your installation. 

I haven't heard back from you if you were able to identify the plug-in that
causes the problem so that I can move the PR to their bucket.

If you don't have any objections I will close the PR since there is nothing
JDT/UI can do to fix it.


Kit and Matt, could one of you chase this one down?  I have an English install 
with Platform, JDT, PDE, EMF, GEF, VE and UML2 and I do not see it.  Maybe it 
is TPTP or WTP.

CDT might be a candidate as well.
CDT is probably a better candidate in this case too.
Any progress here ?
Yes, I just verified that it came from CDT. This is marked as must-fix by 
Hungary. Changing Severity to major.
I think we should make it part- and perspective-dependent.
Fixed in HEAD and 3.1.x.
The CDT "Rename" menu item is only visible in the C/C++ Perspective or when either the C/C++ Projects view or the C/C++ editor is active.
closing old bug</WithStack>
    <WithOutStack>- Select a Java project in Package Explorer
- "Rename" menu under "Refactor" pulldown is repeating
- When the first "Rename" is selected, a message saying "the function is not
  enabled" is displayed
- problem happens in English also
Created attachment 25473
screen capture
This is not a vanilla Eclipse 3.1 install. The refactoring menu in Eclipse 3.1
doesn't contain any Undo/Redo actions anymore. Additionally there is only one
Rename entry (see attached screen shot). 

Kit, which additional plug-ins do you have installed. I assume that one of those
is causing the behaviour. Please report the bug to the plug-in that causes this.


Created attachment 25495
The screen shot
Kit, Steve, 

as said in comment #2 this isn't a Eclipse problem. It is caused by some other
plug-in you must have in your installation. 

I haven't heard back from you if you were able to identify the plug-in that
causes the problem so that I can move the PR to their bucket.

If you don't have any objections I will close the PR since there is nothing
JDT/UI can do to fix it.


Kit and Matt, could one of you chase this one down?  I have an English install 
with Platform, JDT, PDE, EMF, GEF, VE and UML2 and I do not see it.  Maybe it 
is TPTP or WTP.

CDT might be a candidate as well.
CDT is probably a better candidate in this case too.
Any progress here ?
Yes, I just verified that it came from CDT. This is marked as must-fix by 
Hungary. Changing Severity to major.
I think we should make it part- and perspective-dependent.
Fixed in HEAD and 3.1.x.
The CDT "Rename" menu item is only visible in the C/C++ Perspective or when either the C/C++ Projects view or the C/C++ editor is active.
closing old bug</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="105600" />
    <CreationDate amount="2005-07-29 14:38:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse Foundation" />
    <Product amount="Community" />
    <component amount="Website" />
    <Version amount="unspecified" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Miasma -Skin Proposal</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="13">
        <Lines>
          <Line>- increased the eclipse logo using the ai file and pumped up the colours for</Line>
          <Line>the swoosh around it and the larger swoosh on the right side.</Line>
          <Line>- used web safe colours #333366 for the top banner (less saturated purple and</Line>
          <Line>it might look a bit too dark) and #CCCCFF for the bottom banner</Line>
          <Line>- not sure if the large swoosh on the right needs to be</Line>
          <Line>shortened in length so that the search box has a flat background colour behind</Line>
          <Line>it instead of the swoosh graphic</Line>
          <Line>- used a similar gradient effect for the section headers so that they blend</Line>
          <Line>with the content sections.  I reversed the use of gradients in the section</Line>
          <Line>header and bottom banner because the solid colour closes the bottom nicely with</Line>
          <Line>the top banner.  Also, I thought the section header gradients would work well</Line>
          <Line>with the use of gradients in the rollover for the links at top.</Line>
          <Line>Closing as "fixed" since skin-picking is over.</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>The following templates has been a collaboration between Linda Watson, Jinsil 
Boo, Andrew Geraghty
This may not be our only or final submission
Created attachment 25475
home page 

Collaboration with Linda Watson, Jinsil Boo, Andrew Geraghty
Created attachment 25476
Alternate Banner Colour

Collaboration with Linda Watson, Jinsil Boo, Andrew Geraghty
Created attachment 25477
typical 3 column layout
Created attachment 25478
typical related links

Collaboration with Linda Watson, Jinsil Boo, Andrew Geraghty
Created attachment 25479
3 column layout for lists (site maps, news lists etc...)

Collaboration with Linda Watson, Jinsil Boo, Andrew Geraghty
Created attachment 25483
improvements by linda
Created attachment 25498
0729Feedback.gif

Linda's proposal
Adding Linda for further discussion. 

I have one comment to 0729Feedback.gif (attachment 25498). IMHO the ".org" is
not necessary. I even find it distracting.


Re: Zones
I thought about it. Initially I was supporting the zones idea. However, I 'm not
sure it will work. The color variations are difficult, too. But the problem is
how to identify the zones. Foundation/Developers/Users won't work because you
will soon have content that is useful for multiple zones. Zones based on
projects are also not very useful (and too many IMHO).
Look great, Andrew.  I agree with Gunnar that the .org is distracting. I also
like the bottom swoop for the links.
Created attachment 25510
attaching better quality jpeg version of 0729Feedback iteration 

I agree zones would be difficult to achieve in banner area, but perhaps
colour/visual cues in other areas of the ui could be investigated.
Created attachment 25541
alternate page bottom design, "org" removed
I added a variation for page bottom design because the "swoosh" style could be 
difficult to implement.
Created attachment 25710
polish thoughts on the previous designs

Here's a variation to polish the design from designer Kelvin Chan, his
comments:
- increased the eclipse logo using the ai file and pumped up the colours for
the swoosh around it and the larger swoosh on the right side.
- used web safe colours #333366 for the top banner (less saturated purple and
it might look a bit too dark) and #CCCCFF for the bottom banner
		- not sure if the large swoosh on the right needs to be
shortened in length so that the search box has a flat background colour behind
it instead of the swoosh graphic
- used a similar gradient effect for the section headers so that they blend
with the content sections.  I reversed the use of gradients in the section
header and bottom banner because the solid colour closes the bottom nicely with
the top banner.  Also, I thought the section header gradients would work well
with the use of gradients in the rollover for the links at top.
Closing as "fixed" since skin-picking is over.

For the record, becase this skin was so popular, we may make it available as a
skin for eclipse.org.

D.

Moving to Community/Website</WithStack>
    <WithOutStack>The following templates has been a collaboration between Linda Watson, Jinsil 
Boo, Andrew Geraghty
This may not be our only or final submission
Created attachment 25475
home page 

Collaboration with Linda Watson, Jinsil Boo, Andrew Geraghty
Created attachment 25476
Alternate Banner Colour

Collaboration with Linda Watson, Jinsil Boo, Andrew Geraghty
Created attachment 25477
typical 3 column layout
Created attachment 25478
typical related links

Collaboration with Linda Watson, Jinsil Boo, Andrew Geraghty
Created attachment 25479
3 column layout for lists (site maps, news lists etc...)

Collaboration with Linda Watson, Jinsil Boo, Andrew Geraghty
Created attachment 25483
improvements by linda
Created attachment 25498
0729Feedback.gif

Linda's proposal
Adding Linda for further discussion. 

I have one comment to 0729Feedback.gif (attachment 25498). IMHO the ".org" is
not necessary. I even find it distracting.


Re: Zones
I thought about it. Initially I was supporting the zones idea. However, I 'm not
sure it will work. The color variations are difficult, too. But the problem is
how to identify the zones. Foundation/Developers/Users won't work because you
will soon have content that is useful for multiple zones. Zones based on
projects are also not very useful (and too many IMHO).
Look great, Andrew.  I agree with Gunnar that the .org is distracting. I also
like the bottom swoop for the links.
Created attachment 25510
attaching better quality jpeg version of 0729Feedback iteration 

I agree zones would be difficult to achieve in banner area, but perhaps
colour/visual cues in other areas of the ui could be investigated.
Created attachment 25541
alternate page bottom design, "org" removed
I added a variation for page bottom design because the "swoosh" style could be 
difficult to implement.
Created attachment 25710
polish thoughts on the previous designs

Here's a variation to polish the design from designer Kelvin Chan, his
comments:
- increased the eclipse logo using the ai file and pumped up the colours for
the swoosh around it and the larger swoosh on the right side.
- used web safe colours #333366 for the top banner (less saturated purple and
it might look a bit too dark) and #CCCCFF for the bottom banner
		- not sure if the large swoosh on the right needs to be
shortened in length so that the search box has a flat background colour behind
it instead of the swoosh graphic
- used a similar gradient effect for the section headers so that they blend
with the content sections.  I reversed the use of gradients in the section
header and bottom banner because the solid colour closes the bottom nicely with
the top banner.  Also, I thought the section header gradients would work well
with the use of gradients in the rollover for the links at top.
Closing as "fixed" since skin-picking is over.

For the record, becase this skin was so popular, we may make it available as a
skin for eclipse.org.

D.

Moving to Community/Website</WithOutStack>
  </Bug>
</infozilla-output>

