<?xml version="1.0" encoding="UTF-8"?>
<infozilla-output>
  <Bug>
    <BugId amount="119301" />
    <CreationDate amount="2005-12-05 15:28:00 -0500" />
    <DupId amount="" />
    <classification amount="Mylyn" />
    <Product amount="Mylyn" />
    <component amount="Bugzilla" />
    <Version amount="unspecified" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows All" />
    <priority amount="P2" />
    <bug_severity amount="normal" />
    <Summery>improve task planner activity period and UI</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="4">
        <Lines>
          <Line>- since date</Line>
          <Line>- since last plan</Line>
          <Line>- yesterday</Line>
          <Line>- last week</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>Activity period should be flexible and not impose workflow while making daily and weekly planning easy.
- since date
- since last plan
- yesterday
- last week

Also, the reporting of estimates and "yesterday's weather" needs to be improved.
It will also be helpful to state the precise period used. 
Done, except for sine "last plan" which will involve incorporating plans into task list.</WithStack>
    <WithOutStack>Activity period should be flexible and not impose workflow while making daily and weekly planning easy.
- since date
- since last plan
- yesterday
- last week

Also, the reporting of estimates and "yesterday's weather" needs to be improved.
It will also be helpful to state the precise period used. 
Done, except for sine "last plan" which will involve incorporating plans into task list.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="119302" />
    <CreationDate amount="2005-12-05 15:29:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse Foundation" />
    <Product amount="z_Archived" />
    <component amount="VE" />
    <Version amount="unspecified" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Property Promotion induces bad code</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="1">
      <source_code type="functioncall">
        <location start="374" end="424" />
        <code>this.getLayout().setAlignment(FlowLayout.LEFT);</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>If you try to set the widthHint, for example of a (Grid's) LayoutData of an element, VE will produce code like:

button.getLayoutData().widthHint = 100;  

This is a problem, as getLayoutData is not casted properly... but this is also the result that we do not promote anymore the LayoutData.
Similar problem with setting the fields on an AWT FlowLayout produces code like:
   this.getLayout().setAlignment(FlowLayout.LEFT);
FlowLayout should be promoted to a local field so it can be set properly.
The fix has been  released to HEAD.
Closing</WithStack>
    <WithOutStack>If you try to set the widthHint, for example of a (Grid's) LayoutData of an element, VE will produce code like:

button.getLayoutData().widthHint = 100;  

This is a problem, as getLayoutData is not casted properly... but this is also the result that we do not promote anymore the LayoutData.
Similar problem with setting the fields on an AWT FlowLayout produces code like:
   this.getLayout().setAlignment(FlowLayout.LEFT);
FlowLayout should be promoted to a local field so it can be set properly.
The fix has been  released to HEAD.
Closing</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="119303" />
    <CreationDate amount="2005-12-05 15:32:00 -0500" />
    <DupId amount="" />
    <classification amount="Mylyn" />
    <Product amount="Mylyn" />
    <component amount="Monitor" />
    <Version amount="unspecified" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows All" />
    <priority amount="P3" />
    <bug_severity amount="minor" />
    <Summery>Set up tests for monitor.reports and add functionality to scanners</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>Clean-up the structure of monitor.reports scanning facility a bit and set up tests for monitor.reports within monitor.tests.
Test scaffolding added. Will populate with some tests before marked as fixed.

IUsageScanner has an additional method to return accepted users.
A testing harness has been started for monitor.reports in the existing monitor.tests package. 

A DataOverviewCollector has been added to monitor.reports that can provide information about how many users have been analyzed and provides basic statistics about their use.</WithStack>
    <WithOutStack>Clean-up the structure of monitor.reports scanning facility a bit and set up tests for monitor.reports within monitor.tests.
Test scaffolding added. Will populate with some tests before marked as fixed.

IUsageScanner has an additional method to return accepted users.
A testing harness has been started for monitor.reports in the existing monitor.tests package. 

A DataOverviewCollector has been added to monitor.reports that can provide information about how many users have been analyzed and provides basic statistics about their use.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="119304" />
    <CreationDate amount="2005-12-05 15:33:00 -0500" />
    <DupId amount="" />
    <classification amount="Tools" />
    <Product amount="TPTP Profiling" />
    <component amount="Platform.UI.Charting" />
    <Version amount="4.1" />
    <rep_platform amount="All" />
    <op_sys amount="All" />
    <priority amount="P3" />
    <bug_severity amount="critical" />
    <Summery>SWT charts are distorted when using provisional APIs.</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="5">
      <source_code type="singlecomment">
        <location start="53" end="95" />
        <code>//Create an instance of the SWT renderer</code>
      </source_code>
      <source_code type="assignment">
        <location start="95" end="163" />
        <code>IRenderer renderer = new SWTGraphicViewer(parent, SWT.DIALOG_TRIM );</code>
      </source_code>
      <source_code type="singlecomment">
        <location start="164" end="183" />
        <code>//Render chart</code>
      </source_code>
      <source_code type="functioncall">
        <location start="183" end="225" />
        <code>Generator.instance().run(renderer, chart);</code>
      </source_code>
      <source_code type="functioncall">
        <location start="391" end="446" />
        <code>((SWTGraphicViewer)renderer).setContent((IDItem)chart);</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>Consider the following code to generate a SWT chart:

//Create an instance of the SWT renderer
IRenderer renderer = new SWTGraphicViewer(parent, SWT.DIALOG_TRIM );
		 
//Render chart
Generator.instance().run(renderer, chart);

The run method performs unnecessary chart model tranformations that distorts the swt rendering.

The work around is to replace the run method with the following:


((SWTGraphicViewer)renderer).setContent((IDItem)chart);


The set content will not transform the model.
Removed the model transformation code.
Verified.</WithStack>
    <WithOutStack>Consider the following code to generate a SWT chart:

//Create an instance of the SWT renderer
IRenderer renderer = new SWTGraphicViewer(parent, SWT.DIALOG_TRIM );
		 
//Render chart
Generator.instance().run(renderer, chart);

The run method performs unnecessary chart model tranformations that distorts the swt rendering.

The work around is to replace the run method with the following:


((SWTGraphicViewer)renderer).setContent((IDItem)chart);


The set content will not transform the model.
Removed the model transformation code.
Verified.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="119305" />
    <CreationDate amount="2005-12-05 15:33:00 -0500" />
    <DupId amount="" />
    <classification amount="Mylyn" />
    <Product amount="Mylyn" />
    <component amount="Monitor" />
    <Version amount="0.4" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P1" />
    <bug_severity amount="normal" />
    <Summery>cannot find eithics/consent form (.html file)</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="2">
      <source_code type="assignment">
        <location start="1511" end="1560" />
        <code>customizingPlugin = extensions[i].getNamespace();</code>
      </source_code>
      <source_code type="assignment">
        <location start="2402" end="2454" />
        <code>customizingPlugin = extensions[i].getNamespace();</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>This bug occurs when the Mylar monitor is used as a plug-in, not when it is run in a runtime workbench.

Due to renaming of packages for plug-in creation (i.e. adding the version number), the path to the .html file is changed.  When the consent form displays the ethics information (.html file), file cannot be found.

I have a fix for this bug, please assign it to zazam@uvic.ca.
This should actually be fixed in 0.4.4 (Leah was having trouble with it too, and was the one who implemented the fix).  Could you verify that it works Suzanne, and if there's any additional patching that needs to be done I'll be happy to apply it.
Created attachment 31149
Suzanne's patch (small fix)

Leah, I took a look at the latest code from head, and I figure your fix is probably the same as mine.  If it isn't the same, could you tell me what your fix was and I'll test it as well (if you'd like).
Created attachment 31150
Leah's patch

Suzanne, this is my version of the fix, which hasn't been applied yet. I just synched up and tried applying your patch but the consent form didn't show up for me in the runtime workspace nor when I deployed the plug-in. Did you change the path of the consentForm extension point for your study's plugin.xml?
I have my consent form location defined in my plugin.xml as:
consentForm="doc/gild-study-ethics.html"

Leah, your bug fix appears to be pretty much the same as mine.  (Thankfully!) You altered some of the exception handling code and you have moved the following line slightly:

customizingPlugin = extensions[i].getNamespace();

(Did you find this impacted the display of the consent form, or was it for another reason?)

Really, the change in the setFormsConsent() method parameter seems to be the major change.  I applied that part of your patch (you had a "/" prepended, that was the only difference) and your patch worked both for my runtime and plug-in.  

Since Leah's patch is basically the same as mine (I don't know why mine didn't work for Leah, maybe the "/" needed to be prepended, but not for mine?)  I would  have Leah's patch for the next version of Mylar submitted.
Leah: should I apply this patch then?  The next release is on Friday so it would be good to have this in there for both of you.
Created attachment 31273
Leah's patch

Yes, if Suzanne hasn't had any trouble with the patch then we can apply it.

Suzanne - The line you were talking about:
   customizingPlugin = extensions[i].getNamespace();
didn't need to be moved so I've left it where it was originally for this patch.
Patch committed.  Suzanne, please verify so that we can close this.
I have tested the patch on both a Gild study runtime and a plug-in environment.  The patch works fine.  Please close bug.
Excellent.  It's great that both of you are relying on the same functionality and can benefit from each other's efforts.  For future issues of this let's try to keep each other in the loop by adding to the CC list.</WithStack>
    <WithOutStack>This bug occurs when the Mylar monitor is used as a plug-in, not when it is run in a runtime workbench.

Due to renaming of packages for plug-in creation (i.e. adding the version number), the path to the .html file is changed.  When the consent form displays the ethics information (.html file), file cannot be found.

I have a fix for this bug, please assign it to zazam@uvic.ca.
This should actually be fixed in 0.4.4 (Leah was having trouble with it too, and was the one who implemented the fix).  Could you verify that it works Suzanne, and if there's any additional patching that needs to be done I'll be happy to apply it.
Created attachment 31149
Suzanne's patch (small fix)

Leah, I took a look at the latest code from head, and I figure your fix is probably the same as mine.  If it isn't the same, could you tell me what your fix was and I'll test it as well (if you'd like).
Created attachment 31150
Leah's patch

Suzanne, this is my version of the fix, which hasn't been applied yet. I just synched up and tried applying your patch but the consent form didn't show up for me in the runtime workspace nor when I deployed the plug-in. Did you change the path of the consentForm extension point for your study's plugin.xml?
I have my consent form location defined in my plugin.xml as:
consentForm="doc/gild-study-ethics.html"

Leah, your bug fix appears to be pretty much the same as mine.  (Thankfully!) You altered some of the exception handling code and you have moved the following line slightly:

customizingPlugin = extensions[i].getNamespace();

(Did you find this impacted the display of the consent form, or was it for another reason?)

Really, the change in the setFormsConsent() method parameter seems to be the major change.  I applied that part of your patch (you had a "/" prepended, that was the only difference) and your patch worked both for my runtime and plug-in.  

Since Leah's patch is basically the same as mine (I don't know why mine didn't work for Leah, maybe the "/" needed to be prepended, but not for mine?)  I would  have Leah's patch for the next version of Mylar submitted.
Leah: should I apply this patch then?  The next release is on Friday so it would be good to have this in there for both of you.
Created attachment 31273
Leah's patch

Yes, if Suzanne hasn't had any trouble with the patch then we can apply it.

Suzanne - The line you were talking about:
   customizingPlugin = extensions[i].getNamespace();
didn't need to be moved so I've left it where it was originally for this patch.
Patch committed.  Suzanne, please verify so that we can close this.
I have tested the patch on both a Gild study runtime and a plug-in environment.  The patch works fine.  Please close bug.
Excellent.  It's great that both of you are relying on the same functionality and can benefit from each other's efforts.  For future issues of this let's try to keep each other in the loop by adding to the CC list.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="119306" />
    <CreationDate amount="2005-12-05 15:35:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="Debug" />
    <Version amount="3.2" />
    <rep_platform amount="All" />
    <op_sys amount="All" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>[flex-hierarchy] LaunchView autoExpand() creates TreePath with hard coded hierarchy</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="7">
      <source_code type="assignment">
        <location start="89" end="164" />
        <code>ILaunchManager launchManager = DebugPlugin.getDefault().getLaunchManager();</code>
      </source_code>
      <source_code type="assignment">
        <location start="165" end="200" />
        <code>ILaunch launch = frame.getLaunch();</code>
      </source_code>
      <source_code type="assignment">
        <location start="201" end="251" />
        <code>IDebugTarget debugTarget = frame.getDebugTarget();</code>
      </source_code>
      <source_code type="assignment">
        <location start="252" end="287" />
        <code>IThread thread = frame.getThread();</code>
      </source_code>
      <source_code type="assignment">
        <location start="289" end="388" />
        <code>TreePath treePath = new TreePath(new Object[] {launchManager, launch, debugTarget, thread, frame});</code>
      </source_code>
      <source_code type="functioncall">
        <location start="389" end="449" />
        <code>viewer.expand(new TreeSelection(new TreePath[] {treePath}));</code>
      </source_code>
      <source_code type="ifstatement">
        <location start="450" end="538" />
        <code>if (selectNeeded) {
viewer.setSelection(new TreeSelection(new TreePath[] {treePath}));
}</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="0" />
    <bug_status amount="VERIFIED" />
    <resolution amount="FIXED" />
    <WithStack>This code is in autoExpand(), but doesn't respect the new flexible hierarchy story...



ILaunchManager launchManager = DebugPlugin.getDefault().getLaunchManager();
ILaunch launch = frame.getLaunch();
IDebugTarget debugTarget = frame.getDebugTarget();
IThread thread = frame.getThread();

TreePath treePath = new TreePath(new Object[] {launchManager, launch, debugTarget, thread, frame});
viewer.expand(new TreeSelection(new TreePath[] {treePath}));
if (selectNeeded) {
viewer.setSelection(new TreeSelection(new TreePath[] {treePath}));
}
I'm assuming this is off by one and was intended to be logged as a "Debug" bug.  Please move back and explain if this is indeed a doc bug.
The model proxy should do the auto-expand when it is installed. It almost works (except the launch does not auto expand yet).
Fixed in LaunchView and LanuchManagerProxy. Removed auto-expand code from launch view and added code to expand existing launches when the lanuch manager proxy is installed in the debug view.
Please verify, Kevin.
verified</WithStack>
    <WithOutStack>This code is in autoExpand(), but doesn't respect the new flexible hierarchy story...



ILaunchManager launchManager = DebugPlugin.getDefault().getLaunchManager();
ILaunch launch = frame.getLaunch();
IDebugTarget debugTarget = frame.getDebugTarget();
IThread thread = frame.getThread();

TreePath treePath = new TreePath(new Object[] {launchManager, launch, debugTarget, thread, frame});
viewer.expand(new TreeSelection(new TreePath[] {treePath}));
if (selectNeeded) {
viewer.setSelection(new TreeSelection(new TreePath[] {treePath}));
}
I'm assuming this is off by one and was intended to be logged as a "Debug" bug.  Please move back and explain if this is indeed a doc bug.
The model proxy should do the auto-expand when it is installed. It almost works (except the launch does not auto expand yet).
Fixed in LaunchView and LanuchManagerProxy. Removed auto-expand code from launch view and added code to expand existing launches when the lanuch manager proxy is installed in the debug view.
Please verify, Kevin.
verified</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="119307" />
    <CreationDate amount="2005-12-05 15:36:00 -0500" />
    <DupId amount="" />
    <classification amount="Mylyn" />
    <Product amount="Mylyn" />
    <component amount="Core" />
    <Version amount="unspecified" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows All" />
    <priority amount="P3" />
    <bug_severity amount="enhancement" />
    <Summery>[context] resources and other moved elements should maintain interest</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="NEW" />
    <resolution amount="" />
    <WithStack>This is similar to the refactoring support that is (partly) working for Java.
Postponing.
This enhancement would help round out the context model for 1.0.</WithStack>
    <WithOutStack>This is similar to the refactoring support that is (partly) working for Java.
Postponing.
This enhancement would help round out the context model for 1.0.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="119308" />
    <CreationDate amount="2005-12-05 15:44:00 -0500" />
    <DupId amount="" />
    <classification amount="Tools" />
    <Product amount="TPTP Profiling" />
    <component amount="Platform.Doc" />
    <Version amount="4.1" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="major" />
    <Summery>README: Add entry section for "Charting Service" for bug 119304</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="8">
      <source_code type="singlecomment">
        <location start="310" end="352" />
        <code>//Create an instance of the SWT renderer</code>
      </source_code>
      <source_code type="assignment">
        <location start="352" end="421" />
        <code>IRenderer renderer = new SWTGraphicViewer(parent, SWT.DIALOG_TRIM );</code>
      </source_code>
      <source_code type="singlecomment">
        <location start="422" end="461" />
        <code>//show the chart in the SWT renderer</code>
      </source_code>
      <source_code type="functioncall">
        <location start="461" end="504" />
        <code>Generator.instance().run(renderer, chart);</code>
      </source_code>
      <source_code type="singlecomment">
        <location start="658" end="701" />
        <code>//Create an instance of the SWT renderer</code>
      </source_code>
      <source_code type="assignment">
        <location start="701" end="770" />
        <code>IRenderer renderer = new SWTGraphicViewer(parent, SWT.DIALOG_TRIM );</code>
      </source_code>
      <source_code type="singlecomment">
        <location start="771" end="810" />
        <code>//show the chart in the SWT renderer</code>
      </source_code>
      <source_code type="functioncall">
        <location start="810" end="866" />
        <code>((SWTGraphicViewer)renderer).setContent((IDItem)chart);</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>A new entry section called "Charting Service" should be added to the release 
notes.  

The following should be added:

SWT charts are distorted when using the  org.eclipse.tptp.platform.report.core.provisional.Generator.run method.

To generate a SWT chart a developer would typically run the following code:
 //Create an instance of the SWT renderer
 IRenderer renderer = new SWTGraphicViewer(parent, SWT.DIALOG_TRIM );

 //show the chart in the SWT renderer
 Generator.instance().run(renderer, chart);

This will render distorted SWT charts.  The run method does unessessary chart model modifications. Instead developer should execute the following code:

 //Create an instance of the SWT renderer
 IRenderer renderer = new SWTGraphicViewer(parent, SWT.DIALOG_TRIM );

 //show the chart in the SWT renderer
 ((SWTGraphicViewer)renderer).setContent((IDItem)chart);
Completed in the 4.2 time frame.
Closing</WithStack>
    <WithOutStack>A new entry section called "Charting Service" should be added to the release 
notes.  

The following should be added:

SWT charts are distorted when using the  org.eclipse.tptp.platform.report.core.provisional.Generator.run method.

To generate a SWT chart a developer would typically run the following code:
 //Create an instance of the SWT renderer
 IRenderer renderer = new SWTGraphicViewer(parent, SWT.DIALOG_TRIM );

 //show the chart in the SWT renderer
 Generator.instance().run(renderer, chart);

This will render distorted SWT charts.  The run method does unessessary chart model modifications. Instead developer should execute the following code:

 //Create an instance of the SWT renderer
 IRenderer renderer = new SWTGraphicViewer(parent, SWT.DIALOG_TRIM );

 //show the chart in the SWT renderer
 ((SWTGraphicViewer)renderer).setContent((IDItem)chart);
Completed in the 4.2 time frame.
Closing</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="119309" />
    <CreationDate amount="2005-12-05 15:47:00 -0500" />
    <DupId amount="" />
    <classification amount="BIRT" />
    <Product amount="BIRT" />
    <component amount="Data Access" />
    <Version amount="2.0.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Warning when using a text file for data set: May not be a valid flat file</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="2">
        <Lines>
          <Line>1.Select "UTF-8" as encoding format in data source creation dialog.</Line>
          <Line>2.In same dialog, check the box "Use second line as data type indicator".</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>Create a flat file data source.
Create a flat file data set using bookNoInternalComma.TXT, attached.
warning: Selected flat file may not be valid...
Finish creating data set. 
Data set is created and you can display columns in Data  Explorer. 
You can preview the results in the layout view.
Problem: You cannot use the data in a table/grid (listing report).

File is saved using UTF-8 No BOM. Project settings use UTF-8 for text file encoding.
Created attachment 31146
Text file containing 1 record; UTF-8 No BOM
Sorry due to the limitation of cvs i cannot download the plain-text attachment for cvs forcing me to view it on browser. I've tried to copy the content of the text and then save it to the txt file with UTF-8 without BOM format, and everything seems ok for me.

And I am not sure what's your meaning in "Project settings use UTF-8 for text file encoding", do you mean you have selected "UTF-8" as encoding method when you are creating the flatfile datasource?

Could you please try to reproduce this bug again in your local machine with regarding to :
1.Select "UTF-8" as encoding format in data source creation dialog.
2.In same dialog, check the box "Use second line as data type indicator".

If the bug still exists, could you please zip the problematic txt file and attach it to cvs, or just forward it to me using email address lzhu@actuate.com.

Thanks.
The bug is caused by not correctly recognizing the txt file with extension in uppercase. Fixed in source.


Verified in the build 20051220</WithStack>
    <WithOutStack>Create a flat file data source.
Create a flat file data set using bookNoInternalComma.TXT, attached.
warning: Selected flat file may not be valid...
Finish creating data set. 
Data set is created and you can display columns in Data  Explorer. 
You can preview the results in the layout view.
Problem: You cannot use the data in a table/grid (listing report).

File is saved using UTF-8 No BOM. Project settings use UTF-8 for text file encoding.
Created attachment 31146
Text file containing 1 record; UTF-8 No BOM
Sorry due to the limitation of cvs i cannot download the plain-text attachment for cvs forcing me to view it on browser. I've tried to copy the content of the text and then save it to the txt file with UTF-8 without BOM format, and everything seems ok for me.

And I am not sure what's your meaning in "Project settings use UTF-8 for text file encoding", do you mean you have selected "UTF-8" as encoding method when you are creating the flatfile datasource?

Could you please try to reproduce this bug again in your local machine with regarding to :
1.Select "UTF-8" as encoding format in data source creation dialog.
2.In same dialog, check the box "Use second line as data type indicator".

If the bug still exists, could you please zip the problematic txt file and attach it to cvs, or just forward it to me using email address lzhu@actuate.com.

Thanks.
The bug is caused by not correctly recognizing the txt file with extension in uppercase. Fixed in source.


Verified in the build 20051220</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="119310" />
    <CreationDate amount="2005-12-05 15:49:00 -0500" />
    <DupId amount="34136" />
    <classification amount="Eclipse" />
    <Product amount="PDE" />
    <component amount="UI" />
    <Version amount="3.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>[Schema Editor] Editor says source page has errors, but it doesn't show any</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="2">
      <Enumeration lines="1">
        <Lines>
          <Line>e.g. "xsd"</Line>
        </Lines>
      </Enumeration>
      <Enumeration lines="30">
        <Lines>
          <Line>(1) Use of XML Namespaces</Line>
          <Line />
          <Line>e.g. "xsd"</Line>
          <Line />
          <Line>(2) Missing application info not present in the root schema annotation:</Line>
          <Line />
          <Line>e.g.:</Line>
          <Line />
          <Line>&lt;appInfo&gt;</Line>
          <Line>&lt;meta.schema plugin="org.example.test" id="ID" name="NAME"/&gt;</Line>
          <Line>&lt;/appInfo&gt;</Line>
          <Line />
          <Line>I'm attaching a modified version of your XML Schema that corrects these</Line>
          <Line>problems.  Now you will at least be able to get to the form page.</Line>
          <Line />
          <Line>Additional inconsistencies which may befuddle the editor include:</Line>
          <Line />
          <Line>(3) Use of XML Schema extension facets</Line>
          <Line />
          <Line>e.g.:</Line>
          <Line />
          <Line>&lt;element name="description"&gt;</Line>
          <Line>&lt;complexType&gt;</Line>
          <Line>&lt;simpleContent&gt;</Line>
          <Line>&lt;extension base="string"/&gt;</Line>
          <Line>&lt;/simpleContent&gt;</Line>
          <Line>&lt;/complexType&gt;</Line>
          <Line>&lt;/element&gt;</Line>
          <Line />
          <Line>(4) Missing Eclipse specific target namespace</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="RESOLVED" />
    <resolution amount="DUPLICATE" />
    <WithStack>Using 3.2 M3.

I'm trying to edit a schema file using the extension point schema editor. When I open the editor, it brings me to the source page directly. If I try to switch to the Definition or Documentation tab, it says:

"The source page has errors. Other pages cannot be used until these errors are corrected."

However, if I go back to the source page, there are no errors shown. I believe there is something wrong with the schema file itself that is causing this, because this schema is only used for generating documentation. I will attach the schema file...
Created attachment 31147
schema
Hi Curtis,

The XML Schema schema attached is a valid XML Schema document that violates
a number of Eclipse XML Schema limitations within the Extension Point Schema
Editor.

Two primary problems preventing you from viewing the form page:

(1) Use of XML Namespaces

      e.g. "xsd"

(2) Missing application info not present in the root schema annotation:

      e.g.:

      &lt;appInfo&gt;
         &lt;meta.schema plugin="org.example.test" id="ID" name="NAME"/&gt;
      &lt;/appInfo&gt;

I'm attaching a modified version of your XML Schema that corrects these 
problems.  Now you will at least be able to get to the form page.

Additional inconsistencies which may befuddle the editor include:

(3) Use of XML Schema extension facets

      e.g.:

    &lt;element name="description"&gt;
        &lt;complexType&gt;
            &lt;simpleContent&gt;
                &lt;extension base="string"/&gt;
            &lt;/simpleContent&gt;
        &lt;/complexType&gt;
    &lt;/element&gt;

(4) Missing Eclipse specific target namespace

   e.g.:  targetNamespace="org.example.test"



*** This bug has been marked as a duplicate of bug 34136 ***
Created attachment 66531
Modified XML Schema

* Removed XSD namespace qualifiers
* Added root schema annotation application meta data info</WithStack>
    <WithOutStack>Using 3.2 M3.

I'm trying to edit a schema file using the extension point schema editor. When I open the editor, it brings me to the source page directly. If I try to switch to the Definition or Documentation tab, it says:

"The source page has errors. Other pages cannot be used until these errors are corrected."

However, if I go back to the source page, there are no errors shown. I believe there is something wrong with the schema file itself that is causing this, because this schema is only used for generating documentation. I will attach the schema file...
Created attachment 31147
schema
Hi Curtis,

The XML Schema schema attached is a valid XML Schema document that violates
a number of Eclipse XML Schema limitations within the Extension Point Schema
Editor.

Two primary problems preventing you from viewing the form page:

(1) Use of XML Namespaces

      e.g. "xsd"

(2) Missing application info not present in the root schema annotation:

      e.g.:

      &lt;appInfo&gt;
         &lt;meta.schema plugin="org.example.test" id="ID" name="NAME"/&gt;
      &lt;/appInfo&gt;

I'm attaching a modified version of your XML Schema that corrects these 
problems.  Now you will at least be able to get to the form page.

Additional inconsistencies which may befuddle the editor include:

(3) Use of XML Schema extension facets

      e.g.:

    &lt;element name="description"&gt;
        &lt;complexType&gt;
            &lt;simpleContent&gt;
                &lt;extension base="string"/&gt;
            &lt;/simpleContent&gt;
        &lt;/complexType&gt;
    &lt;/element&gt;

(4) Missing Eclipse specific target namespace

   e.g.:  targetNamespace="org.example.test"



*** This bug has been marked as a duplicate of bug 34136 ***
Created attachment 66531
Modified XML Schema

* Removed XSD namespace qualifiers
* Added root schema annotation application meta data info</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="119311" />
    <CreationDate amount="2005-12-05 15:54:00 -0500" />
    <DupId amount="" />
    <classification amount="WebTools" />
    <Product amount="WTP EJB Tools" />
    <component amount="jst.ejb" />
    <Version amount="1.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="enhancement" />
    <Summery>Create Default Session Bean option</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="4">
        <Lines>
          <Line>- implement validation that shows error marker when an EJB 3.0 project has no enterprise bean.</Line>
          <Line>- implement two quick fixes for the error marker: "Create Session Bean" and "Create Message-Driven Bean". Each of the quick fixes will call the corresponding wizard.</Line>
          <Line>Created attachment 159938</Line>
          <Line>No beans validation error for EJB 3.x projects</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>Previously, when creating a new EJB project, there was an option to create a default session bean.  In current WTP drivers, I don't see this option anymore.

Is there a way to create a default session bean programmatically during the EJB project creation?
*** Bug 131406 has been marked as a duplicate of this bug. ***
*** Bug 129195 has been marked as a duplicate of this bug. ***
This could be consider for the next post-Ganymede release. 
(In reply to comment #0)
&gt; Previously, when creating a new EJB project, there was an option to create a
&gt; default session bean.  In current WTP drivers, I don't see this option anymore.
&gt; 
&gt; Is there a way to create a default session bean programmatically during the EJB
&gt; project creation?
&gt; 
Is this still relevant?
In an EJB 3.0 project the ejb-jar.xml is optional. There might be 0 or * beans in the project.

Or you would like to see the option only for EJB 2.1&lt; projects?

It is still relevant - even for EJB 3.x modules without ejb-jar.xml. In this case the EJB JAR archive is just an ordinary JAR archive. The only thing that makes it EJB JAR is the annotated bean classes in it. If there is not such class then it is not an EJB JAR. 

In WTP if you have an EJB 3.0 project without ejb-jar.xml and no bean, then it cannot be exported as valid EJB JAR. Many server runtimes like Glassfish and JBoss fails deploying such JARs, complaining that there is no EJB bean there. 

So, in EJB 3.0 you still need 1 or * beans in the project. 
We will try to implement this enhancements for EJB 3.0 projects in two steps:
  - implement validation that shows error marker when an EJB 3.0 project has no enterprise bean. 
  - implement two quick fixes for the error marker: "Create Session Bean" and "Create Message-Driven Bean". Each of the quick fixes will call the corresponding wizard.
Created attachment 159938
No beans validation error for EJB 3.x projects

    I've created a validator (v2) for this problem which shows error on the EJB 3.x project with two quick fixes available allowing the user to open wizards for new session or message-driven bean. 

    It works fine except for the only problem that the validator could be triggered only manually. Perhaps I've implemented something wrong since the validator doesn't trigger when I add/delete a bean from the project. 

    I've debugged it and appears that when I add/delete a bean from the project the method AbstractValidator.validationStarting(...) is being invoked by the framework, but later the UIEJB3Validator.validate(...) method(s) are not invoked.

    Any ideas?
Created attachment 160088
No beans validation error for EJB 3.x projects v2

    This version of the patch works fine. But there is a little hack in it. I'm using the fact that the validationStarting(...) method of my validator is being invoked when it's supposed to and in its body I'm invoking the actual validation. 

    If somebody has an idea how to implement it better, please share it.
Created attachment 160305
patch v3

Thanks for the patch. Everything is functionally correct. 
I just made some structural and cosmetics changes to the contribution. The most significant is that I moved the UI related code to the jee.ui plugin. This way we avoid the UI dependencies in the jee.ejb plugin.
Patch v3 committed to HEAD.
This caused a dependency cycle between jst.jee.ui (where you added a prereq to jst.ejb.ui) and jst.ejb.ui, which already prereqs jst.jee.ui.
I moved everything you added to org.eclipse.jst.jee.ui over to org.eclipse.jst.ejb.ui - that is the quickest way to fix things up short term.

I also noticed that none of the new .java files nor the new .properties file has the EPL header in it.  (Except for the Messages.java, which has an old IBM EPL header - that should be fixed up, too.)

Please review my changes and fix up as appropriate.
Thanks, Carl!
I added the missing copyright headers.
One last change- in UIEJB3Validator, it checks to see if the total number of session and message driven beans are 0.  There are circumstances where ejbJar.getEnterpriseBeans() returns null, and this should display the validation error.  And there are times where an EJB project could have an Entity bean in it - this should not display the validation error.

I am committing a change to HEAD for UIEJB3Validator to fix those scenarios.
One last, last change - the org.eclipse.jst.ejb.ui.internal.quickfixes.ejb was not listed in the Export-Package section of the MANIFEST.MF for org.eclipse.jst.ejb.ui.  I am adding it in as an internal package.</WithStack>
    <WithOutStack>Previously, when creating a new EJB project, there was an option to create a default session bean.  In current WTP drivers, I don't see this option anymore.

Is there a way to create a default session bean programmatically during the EJB project creation?
*** Bug 131406 has been marked as a duplicate of this bug. ***
*** Bug 129195 has been marked as a duplicate of this bug. ***
This could be consider for the next post-Ganymede release. 
(In reply to comment #0)
&gt; Previously, when creating a new EJB project, there was an option to create a
&gt; default session bean.  In current WTP drivers, I don't see this option anymore.
&gt; 
&gt; Is there a way to create a default session bean programmatically during the EJB
&gt; project creation?
&gt; 
Is this still relevant?
In an EJB 3.0 project the ejb-jar.xml is optional. There might be 0 or * beans in the project.

Or you would like to see the option only for EJB 2.1&lt; projects?

It is still relevant - even for EJB 3.x modules without ejb-jar.xml. In this case the EJB JAR archive is just an ordinary JAR archive. The only thing that makes it EJB JAR is the annotated bean classes in it. If there is not such class then it is not an EJB JAR. 

In WTP if you have an EJB 3.0 project without ejb-jar.xml and no bean, then it cannot be exported as valid EJB JAR. Many server runtimes like Glassfish and JBoss fails deploying such JARs, complaining that there is no EJB bean there. 

So, in EJB 3.0 you still need 1 or * beans in the project. 
We will try to implement this enhancements for EJB 3.0 projects in two steps:
  - implement validation that shows error marker when an EJB 3.0 project has no enterprise bean. 
  - implement two quick fixes for the error marker: "Create Session Bean" and "Create Message-Driven Bean". Each of the quick fixes will call the corresponding wizard.
Created attachment 159938
No beans validation error for EJB 3.x projects

    I've created a validator (v2) for this problem which shows error on the EJB 3.x project with two quick fixes available allowing the user to open wizards for new session or message-driven bean. 

    It works fine except for the only problem that the validator could be triggered only manually. Perhaps I've implemented something wrong since the validator doesn't trigger when I add/delete a bean from the project. 

    I've debugged it and appears that when I add/delete a bean from the project the method AbstractValidator.validationStarting(...) is being invoked by the framework, but later the UIEJB3Validator.validate(...) method(s) are not invoked.

    Any ideas?
Created attachment 160088
No beans validation error for EJB 3.x projects v2

    This version of the patch works fine. But there is a little hack in it. I'm using the fact that the validationStarting(...) method of my validator is being invoked when it's supposed to and in its body I'm invoking the actual validation. 

    If somebody has an idea how to implement it better, please share it.
Created attachment 160305
patch v3

Thanks for the patch. Everything is functionally correct. 
I just made some structural and cosmetics changes to the contribution. The most significant is that I moved the UI related code to the jee.ui plugin. This way we avoid the UI dependencies in the jee.ejb plugin.
Patch v3 committed to HEAD.
This caused a dependency cycle between jst.jee.ui (where you added a prereq to jst.ejb.ui) and jst.ejb.ui, which already prereqs jst.jee.ui.
I moved everything you added to org.eclipse.jst.jee.ui over to org.eclipse.jst.ejb.ui - that is the quickest way to fix things up short term.

I also noticed that none of the new .java files nor the new .properties file has the EPL header in it.  (Except for the Messages.java, which has an old IBM EPL header - that should be fixed up, too.)

Please review my changes and fix up as appropriate.
Thanks, Carl!
I added the missing copyright headers.
One last change- in UIEJB3Validator, it checks to see if the total number of session and message driven beans are 0.  There are circumstances where ejbJar.getEnterpriseBeans() returns null, and this should display the validation error.  And there are times where an EJB project could have an Entity bean in it - this should not display the validation error.

I am committing a change to HEAD for UIEJB3Validator to fix those scenarios.
One last, last change - the org.eclipse.jst.ejb.ui.internal.quickfixes.ejb was not listed in the Export-Package section of the MANIFEST.MF for org.eclipse.jst.ejb.ui.  I am adding it in as an internal package.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="119312" />
    <CreationDate amount="2005-12-05 16:11:00 -0500" />
    <DupId amount="" />
    <classification amount="BIRT" />
    <Product amount="BIRT" />
    <component amount="Report Engine" />
    <Version amount="2.0.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows 2000" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Generated report has incoorect font size</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="WORKSFORME" />
    <WithStack>Create any simple report, preview. Preview result shows incorrect font size.
Created attachment 31186
print screen preview

It looks correct for simple label.
It seems working for me, see the attachment.
ok</WithStack>
    <WithOutStack>Create any simple report, preview. Preview result shows incorrect font size.
Created attachment 31186
print screen preview

It looks correct for simple label.
It seems working for me, see the attachment.
ok</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="119313" />
    <CreationDate amount="2005-12-05 16:12:00 -0500" />
    <DupId amount="" />
    <classification amount="BIRT" />
    <Product amount="BIRT" />
    <component amount="Report Engine" />
    <Version amount="2.0.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows 2000" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Report genertation trap into infinite loop</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>Using attached report with some toc settings, run report. Report runnning never comes back.
Created attachment 31148
test report
The report design create a huge report document(&gt;40M), it contains more than 59 pages. The creation is slow but it create the report document sucessfully.
There seems to be a performance degradation since the new report archive implementation is used. The bug is reopened for further investigation. 
Improved the performance of report archive by providing write(byte b[]) and write(byte b[], int off, int len) to RAFileOutputStream.

The performance for generating the report document is much faster than before (1min VS 4min).
VERIFIED</WithStack>
    <WithOutStack>Using attached report with some toc settings, run report. Report runnning never comes back.
Created attachment 31148
test report
The report design create a huge report document(&gt;40M), it contains more than 59 pages. The creation is slow but it create the report document sucessfully.
There seems to be a performance degradation since the new report archive implementation is used. The bug is reopened for further investigation. 
Improved the performance of report archive by providing write(byte b[]) and write(byte b[], int off, int len) to RAFileOutputStream.

The performance for generating the report document is much faster than before (1min VS 4min).
VERIFIED</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="119314" />
    <CreationDate amount="2005-12-05 16:15:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="PDE" />
    <component amount="Build" />
    <Version amount="3.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Clean up support for JRE compilation profiles</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>As discussed, modify the pde.build support for execution environment as follows:

plugin/build.properties:  jre.compilation.profile="J2SE-1.4"
A property to override the manifest's Bundle-RequiredExectionEnvironment.  This implies a values for the bootclasspath, javacSource and javacTarget if they are not already set.

Top level build.properties:  change bootclasspath.&lt;EE&gt; to simply &lt;EE&gt;
ie: bootclasspath.J2SE-1.4 -&gt; J2SE-1.4


PDE.UI will need to pass the top level &lt;EE&gt; properties supported.  The value for the &lt;EE&gt; property is expected to be the path to the jars for the bootclasspath ("C:\jre\lib\rt.jar;C:\jre\lib\jsse.jar").  The value of jre.compilation.profile is expected to be one of those properties.
Created attachment 31219
patch
patch released in HEAD.</WithStack>
    <WithOutStack>As discussed, modify the pde.build support for execution environment as follows:

plugin/build.properties:  jre.compilation.profile="J2SE-1.4"
A property to override the manifest's Bundle-RequiredExectionEnvironment.  This implies a values for the bootclasspath, javacSource and javacTarget if they are not already set.

Top level build.properties:  change bootclasspath.&lt;EE&gt; to simply &lt;EE&gt;
ie: bootclasspath.J2SE-1.4 -&gt; J2SE-1.4


PDE.UI will need to pass the top level &lt;EE&gt; properties supported.  The value for the &lt;EE&gt; property is expected to be the path to the jars for the bootclasspath ("C:\jre\lib\rt.jar;C:\jre\lib\jsse.jar").  The value of jre.compilation.profile is expected to be one of those properties.
Created attachment 31219
patch
patch released in HEAD.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="119315" />
    <CreationDate amount="2005-12-05 16:15:00 -0500" />
    <DupId amount="" />
    <classification amount="DataTools" />
    <Product amount="Data Tools" />
    <component amount="Connectivity" />
    <Version amount="unspecified" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows 2000" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>[Data Source Explorer] Finish migrating navigator actions to platform navigator framework</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>Need to finish migrating navigator actions to the platform navigator framework and get rid of the old navigator plug-ins.
Delivered changes today to remove dependencies on old Navigator framework and migrate actions to the new framework.
Closing bugs</WithStack>
    <WithOutStack>Need to finish migrating navigator actions to the platform navigator framework and get rid of the old navigator plug-ins.
Delivered changes today to remove dependencies on old Navigator framework and migrate actions to the new framework.
Closing bugs</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="119316" />
    <CreationDate amount="2005-12-05 16:21:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="JDT" />
    <component amount="UI" />
    <Version amount="3.1" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Changes in Logical Model support classes</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>I have dne some refactoring of the Team logical model support classes. Basically, I have moved several class from Team UI to Team Core. I have left stubs in Team UI so that LTK and JDT UI compile but they will not work until they are refactored to use the Core classes. I have also added an abstract class, ResourceMappingMerger,  for IResourceMappingMerger. The LTK/JDT merger should subclass this.
Fixed in HEAD &gt; 20051207</WithStack>
    <WithOutStack>I have dne some refactoring of the Team logical model support classes. Basically, I have moved several class from Team UI to Team Core. I have left stubs in Team UI so that LTK and JDT UI compile but they will not work until they are refactored to use the Core classes. I have also added an abstract class, ResourceMappingMerger,  for IResourceMappingMerger. The LTK/JDT merger should subclass this.
Fixed in HEAD &gt; 20051207</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="119317" />
    <CreationDate amount="2005-12-05 16:24:00 -0500" />
    <DupId amount="129703" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="SWT" />
    <Version amount="3.1" />
    <rep_platform amount="Macintosh" />
    <op_sys amount="Mac OS X - Carbon (unsup.)" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>[Viewers] jvm crash when setting  virtualTableViewer.setItemCount(Integer.MAX_VALUE);</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="DUPLICATE" />
    <WithStack>I using a virtual table viewer with a ILazyContentProvider.
VirtualTableViewer.setItemCount(Integer.MAX_VALUE) just crashs my jvm. Looks like this is not just a value that is used to cacluate the length of the scrollbar, but shouldn't it do it more than that, since it is a virtual table?

Eclipse SDK

Version: 3.1.0
Build id: I20050627-1435

java -version
java version "1.4.2_09"
Java(TM) 2 Runtime Environment, Standard Edition (build 1.4.2_09-232)
Java HotSpot(TM) Client VM (build 1.4.2-54, mixed mode)


OS X 10.4.3
Moving to SWT for comment. Seems to me that this should throw an IllegalArgumentException instead of crashing the VM.
Hi, 
my investigation shows that it is somehow releated to a outofmemory exception.
A VIRTUAL table just means that you don't need to provide the data for all of the rows up-front.  How many rows get queried is completely up to the platform, and the operating systems often still need to create the data structures internally for the full table.

So, the item count does not only control the scroll bar.
(In reply to comment #3)
&gt; A VIRTUAL table just means that you don't need to provide the data for all of
&gt; the rows up-front.  How many rows get queried is completely up to the platform,
&gt; and the operating systems often still need to create the data structures
&gt; internally for the full table.
&gt; 
&gt; So, the item count does not only control the scroll bar.

Hmm, I see. Can you suggest any kind of workaround, may I need to implement a own table viewer or can I somehow manipulate the scroll bar? I want to implement a tool to browse a file type of apache project (nutch) that has may many million records, please give me at least a hint where to search for a workaround.
Thanks!
The end user can not scroll through millions of records and make any sense of them - perhaps you should have a filter mechanism that lets them narrow the results.


*** This bug has been marked as a duplicate of 129703 ***
Changing OS from Mac OS to Mac OS X as per bug 185991</WithStack>
    <WithOutStack>I using a virtual table viewer with a ILazyContentProvider.
VirtualTableViewer.setItemCount(Integer.MAX_VALUE) just crashs my jvm. Looks like this is not just a value that is used to cacluate the length of the scrollbar, but shouldn't it do it more than that, since it is a virtual table?

Eclipse SDK

Version: 3.1.0
Build id: I20050627-1435

java -version
java version "1.4.2_09"
Java(TM) 2 Runtime Environment, Standard Edition (build 1.4.2_09-232)
Java HotSpot(TM) Client VM (build 1.4.2-54, mixed mode)


OS X 10.4.3
Moving to SWT for comment. Seems to me that this should throw an IllegalArgumentException instead of crashing the VM.
Hi, 
my investigation shows that it is somehow releated to a outofmemory exception.
A VIRTUAL table just means that you don't need to provide the data for all of the rows up-front.  How many rows get queried is completely up to the platform, and the operating systems often still need to create the data structures internally for the full table.

So, the item count does not only control the scroll bar.
(In reply to comment #3)
&gt; A VIRTUAL table just means that you don't need to provide the data for all of
&gt; the rows up-front.  How many rows get queried is completely up to the platform,
&gt; and the operating systems often still need to create the data structures
&gt; internally for the full table.
&gt; 
&gt; So, the item count does not only control the scroll bar.

Hmm, I see. Can you suggest any kind of workaround, may I need to implement a own table viewer or can I somehow manipulate the scroll bar? I want to implement a tool to browse a file type of apache project (nutch) that has may many million records, please give me at least a hint where to search for a workaround.
Thanks!
The end user can not scroll through millions of records and make any sense of them - perhaps you should have a filter mechanism that lets them narrow the results.


*** This bug has been marked as a duplicate of 129703 ***
Changing OS from Mac OS to Mac OS X as per bug 185991</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="119318" />
    <CreationDate amount="2005-12-05 16:32:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="JDT" />
    <component amount="Core" />
    <Version amount="3.1.1" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P5" />
    <bug_severity amount="normal" />
    <Summery>[formatter] Poor format for user comments in generated code</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="2">
      <source_code type="multicomment">
        <location start="119" end="214" />
        <code>/**
   * &lt;!-- begin-user-doc --&gt;User comment&lt;!-- end-user-doc --&gt;
   *
   * @generated
   */</code>
      </source_code>
      <source_code type="multicomment">
        <location start="251" end="358" />
        <code>/**
   * &lt;!-- begin-user-doc --&gt;
   * User comment
   * &lt;!-- end-user-doc --&gt;
   *
   * @generated
   */</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="0" />
    <bug_status amount="NEW" />
    <resolution amount="" />
    <WithStack>I have generated code that looks like the following after being formatted with the Eclipse 3.1.1 "built-in" formatter:

  /**
   * &lt;!-- begin-user-doc --&gt;User comment&lt;!-- end-user-doc --&gt;
   *
   * @generated
   */

and I'd like it to look like this:

  /**
   * &lt;!-- begin-user-doc --&gt;
   * User comment
   * &lt;!-- end-user-doc --&gt;
   *
   * @generated
   */

The latter is a better default.  If it cannot be te default then I should be able to produce a formatter profile to do this.
What component generates such a default comment ?
Ownership has changed for the formatter, but I surely will not have enough time to fix your bug during the 3.5 development process, hence set its priority to P5.
Please provide a patch if you definitely need the bug to be fixed in this version and I'll have a look at it...
TIA</WithStack>
    <WithOutStack>I have generated code that looks like the following after being formatted with the Eclipse 3.1.1 "built-in" formatter:

  /**
   * &lt;!-- begin-user-doc --&gt;User comment&lt;!-- end-user-doc --&gt;
   *
   * @generated
   */

and I'd like it to look like this:

  /**
   * &lt;!-- begin-user-doc --&gt;
   * User comment
   * &lt;!-- end-user-doc --&gt;
   *
   * @generated
   */

The latter is a better default.  If it cannot be te default then I should be able to produce a formatter profile to do this.
What component generates such a default comment ?
Ownership has changed for the formatter, but I surely will not have enough time to fix your bug during the 3.5 development process, hence set its priority to P5.
Please provide a patch if you definitely need the bug to be fixed in this version and I'll have a look at it...
TIA</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="119319" />
    <CreationDate amount="2005-12-05 16:37:00 -0500" />
    <DupId amount="" />
    <classification amount="Modeling" />
    <Product amount="GMF-Runtime" />
    <component amount="General" />
    <Version amount="1.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="enhancement" />
    <Summery>Support extensibility for RenderedImageFactory</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="2">
      <Enumeration lines="3">
        <Lines>
          <Line>- Isolate awt dependency into new plug-in org.eclipse.gmf.runtime.draw2d.ui.render.awt.  This allows use of the draw2d.ui.render infrastructure without bringing in the Batik or awt dependency.  If in future there is a replacement for batik, this will allow plug-in of the new technology.  Created a new extension point "renderedImageFactory" to accomplish this.</Line>
          <Line>- Made ImageConverter class internal.  Since BufferedImage can be accessed from the RenderedImage interface through the IAdapter interface.  Existing class has been deprecated...</Line>
          <Line>- Introduced new interface RenderedImageType that allows for autosensing of image types.</Line>
        </Lines>
      </Enumeration>
      <Enumeration lines="5">
        <Lines>
          <Line>- ad-hoc testing with geoshapes / logic examples</Line>
          <Line>- diagram JUnits / draw2d JUnits</Line>
          <Line>[target cleanup] 1.0 M5 was the original target milestone for this bug</Line>
          <Line>[GMF Restructure] Bug 319140 : product GMF and component</Line>
          <Line>Runtime Diagram was the original product and component for this bug</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>Support external clients extensibility of RenderedImageFactory to provide custom implementations of RenderedImage.  Probably this would entail creating an extension point which RenderedImageFactory calls to detect and instantiate an RenderedImage type.

As a precursor to this, we should separate awt dependency from org.eclipse.gmf.runtime.draw2d.ui.render into 2 plug-ins, where one isolates the awt dependency.
Purpose: 
- Isolate awt dependency into new plug-in org.eclipse.gmf.runtime.draw2d.ui.render.awt.  This allows use of the draw2d.ui.render infrastructure without bringing in the Batik or awt dependency.  If in future there is a replacement for batik, this will allow plug-in of the new technology.  Created a new extension point "renderedImageFactory" to accomplish this.
- Made ImageConverter class internal.  Since BufferedImage can be accessed from the RenderedImage interface through the IAdapter interface.  Existing class has been deprecated...
- Introduced new interface RenderedImageType that allows for autosensing of image types.

Note: GMF developers need to reimport the gmf-all.psf (or gmf-core.psf)

Activities: 
bugzilla 119319 gmf-head sshaw 060210 Support extensibility for RenderedImageFactory 

Code Reviewed by: 
Cherie

How tested: 
- ad-hoc testing with geoshapes / logic examples
- diagram JUnits / draw2d JUnits 
[target cleanup] 1.0 M5 was the original target milestone for this bug
[GMF Restructure] Bug 319140 : product GMF and component
Runtime Diagram was the original product and component for this bug</WithStack>
    <WithOutStack>Support external clients extensibility of RenderedImageFactory to provide custom implementations of RenderedImage.  Probably this would entail creating an extension point which RenderedImageFactory calls to detect and instantiate an RenderedImage type.

As a precursor to this, we should separate awt dependency from org.eclipse.gmf.runtime.draw2d.ui.render into 2 plug-ins, where one isolates the awt dependency.
Purpose: 
- Isolate awt dependency into new plug-in org.eclipse.gmf.runtime.draw2d.ui.render.awt.  This allows use of the draw2d.ui.render infrastructure without bringing in the Batik or awt dependency.  If in future there is a replacement for batik, this will allow plug-in of the new technology.  Created a new extension point "renderedImageFactory" to accomplish this.
- Made ImageConverter class internal.  Since BufferedImage can be accessed from the RenderedImage interface through the IAdapter interface.  Existing class has been deprecated...
- Introduced new interface RenderedImageType that allows for autosensing of image types.

Note: GMF developers need to reimport the gmf-all.psf (or gmf-core.psf)

Activities: 
bugzilla 119319 gmf-head sshaw 060210 Support extensibility for RenderedImageFactory 

Code Reviewed by: 
Cherie

How tested: 
- ad-hoc testing with geoshapes / logic examples
- diagram JUnits / draw2d JUnits 
[target cleanup] 1.0 M5 was the original target milestone for this bug
[GMF Restructure] Bug 319140 : product GMF and component
Runtime Diagram was the original product and component for this bug</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="119320" />
    <CreationDate amount="2005-12-05 16:38:00 -0500" />
    <DupId amount="" />
    <classification amount="BIRT" />
    <Product amount="BIRT" />
    <component amount="Report" />
    <Version amount="2.0.0" />
    <rep_platform amount="All" />
    <op_sys amount="Windows 2000" />
    <priority amount="P3" />
    <bug_severity amount="major" />
    <Summery>TOC property is not automatically set for group header element</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="5">
        <Lines>
          <Line>1. If in group header, no top-level element has defined a toc property, DE should add a toc property to the first element.</Line>
          <Line />
          <Line>2. If in group header, some top-level element has already added a toc property, DE should not automatically add a toc property to any elements.</Line>
          <Line />
          <Line>3. If after the DE had added a default toc property to first element, user choose to add a toc property to another element in designer, it is desirable to remove the automatically added one, or otherwise, we run into the case of 2a.</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>By default, we want a grouped report to show TOC automatically. This however, needs DE to add toc property to group header. So what we need is

1. If in group header, no top-level element has defined a toc property, DE should add a toc property to the first element.

2. If in group header, some top-level element has already added a toc property, DE should not automatically add a toc property to any elements.

3. If after the DE had added a default toc property to first element, user choose to add a toc property to another element in designer, it is desirable to remove the automatically added one, or otherwise, we run into the case of 2a.

Until the toc property is set automatically by DE (or designer), users will by default not see TOC. Put it differently: we would like to have a default toc, but the default toc is not created by engine, but by designer automatically setting the toc property for some report elements. 

There may be some designer work related to this bug.
Model used key expression as the default toc for the group element.
Verified in build 20051221</WithStack>
    <WithOutStack>By default, we want a grouped report to show TOC automatically. This however, needs DE to add toc property to group header. So what we need is

1. If in group header, no top-level element has defined a toc property, DE should add a toc property to the first element.

2. If in group header, some top-level element has already added a toc property, DE should not automatically add a toc property to any elements.

3. If after the DE had added a default toc property to first element, user choose to add a toc property to another element in designer, it is desirable to remove the automatically added one, or otherwise, we run into the case of 2a.

Until the toc property is set automatically by DE (or designer), users will by default not see TOC. Put it differently: we would like to have a default toc, but the default toc is not created by engine, but by designer automatically setting the toc property for some report elements. 

There may be some designer work related to this bug.
Model used key expression as the default toc for the group element.
Verified in build 20051221</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="119321" />
    <CreationDate amount="2005-12-05 16:42:00 -0500" />
    <DupId amount="" />
    <classification amount="WebTools" />
    <Product amount="WTP Common Tools" />
    <component amount="wst.common" />
    <Version amount="1.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows 2000" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>[data models] DataModelSynchHelper synchList does not work</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="WONTFIX" />
    <WithStack>List controls are not being supported correctly.   There is no listener on the control so the model is not being updated upon a change.
Closing old bugs.</WithStack>
    <WithOutStack>List controls are not being supported correctly.   There is no listener on the control so the model is not being updated upon a change.
Closing old bugs.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="119322" />
    <CreationDate amount="2005-12-05 16:54:00 -0500" />
    <DupId amount="" />
    <classification amount="WebTools" />
    <Product amount="JSDT" />
    <component amount="Web" />
    <Version amount="3.1" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>[validation] cannot be resolved error in JSP iteration tag inside JavaScript tags</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="4">
      <source_code type="assignment">
        <location start="97" end="151" />
        <code>var lookupObjects = new Array(&lt;%= values.size() %&gt;);</code>
      </source_code>
      <source_code type="assignment">
        <location start="280" end="424" />
        <code>lookupObjects[&lt;%= i++ %&gt;] = new Array("&lt;%= Library.escapeQuotes(lookupObject.getDescription()) %&gt;", "&lt;%= lookupObject.getID().toString() %&gt;");</code>
      </source_code>
      <source_code type="singlecomment">
        <location start="2003" end="2015" />
        <code>//&lt;![CDATA[</code>
      </source_code>
      <source_code type="singlecomment">
        <location start="2458" end="2465" />
        <code>//]]&gt;</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="2">
      <Enumeration lines="6">
        <Lines>
          <Line>- Missing semicolon</Line>
          <Line>- Syntax error on tokens, ( expected  instead</Line>
          <Line>- Syntax error, insert ")" to complete PrimaryNoNewArrayStmt</Line>
          <Line>- Syntax error on token(s), misplaced construct(s)</Line>
          <Line>As mentioned in comment 8, I think the validation messages are coming from JSDT at this point. Variables should be able to be resolved in iteration tags within javascript blocks now.</Line>
          <Line>Looks like the translator is having all sorts of problems with that script region.</Line>
        </Lines>
      </Enumeration>
      <Enumeration lines="6">
        <Lines>
          <Line>- there are red marks on the overview ruler</Line>
          <Line>- in the corresponding lines, the tags that are causing validation errors are underlined in red</Line>
          <Line>BUT</Line>
          <Line>- the vertical ruler does not show any errors (just other warnings)</Line>
          <Line>- the JSP icon in the Project Explorer and in the editor selection tab do not have any red mark</Line>
          <Line>- if I do right-click | Validate in the editor, the Validation Results information message says that the validation completed with 21 warnings (but no errors)</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="CLOSED" />
    <resolution amount="WONTFIX" />
    <WithStack>I have an iteration tag that is inside JavaScript tag like this:

&lt;script language="JavaScript"&gt;
  var lookupObjects = new Array(&lt;%= values.size() %&gt;);
&lt;% int i = 0; %&gt;
&lt;chr:scriptIteration name="lookupObject" type="crha.util.database.Lookup" iterator="&lt;%= values.iterator() %&gt;"&gt;
  lookupObjects[&lt;%= i++ %&gt;] = new Array("&lt;%= Library.escapeQuotes(lookupObject.getDescription()) %&gt;", "&lt;%= lookupObject.getID().toString() %&gt;");
&lt;/chr:scriptIteration&gt;
&lt;/script&gt;

The validator doesn't seem to parse any JSP tags inside JavaScript tags.  Even the syntax colorer seems to be wrong as it displays it as javascript code.  However it does pick up "i = 0" and i++ statements properly but not the iteration tag.  It gives me "lookupObject cannot be resolved" error in Problems window.

I am using Eclipse 3.1.1 with Web Standards Tools Feature 1.0.0
My suspect is that with the new JavaScript support this problem is handled even worse: try to create a JSP with something like this:

&lt;%@ taglib prefix="c"	uri="http://java.sun.com/jsp/jstl/core" %&gt;
&lt;html&gt;
&lt;head&gt;
&lt;script type="text/javascript"&gt;
  &lt;c:if test="true"&gt;
    function myFunction()
    {
      return true;
    }
  &lt;/c:if&gt;
&lt;/script&gt;
&lt;/head&gt;
&lt;/html&gt;

The editor becomes messy and quite unusable... :-(
Hi, any update regarding this bug?
I'm having the same problem on Eclipse JEE 3.5 Galileo...
Everything is fine if i use "&lt;% ... %&gt;" within a javascript block in a jsp page, while jstl tags (or any custom tag, i suppose) are not recognized.
Tried to disable Window-&gt;Preferences-&gt;Validation-&gt;JavaScript syntax valid., but nothing changed.

This is a dup of Bug 156851 or the other way around.
Created attachment 161277
json-taglib sample

work-around for the "jstl in javascript" problem
same problem "JSTL in Javascript", using jstl iterators to build javascript object ...

i found out a nice tag lib: http://json-taglib.sourceforge.net/
to build json objects in jsp(x) ...

see attachment








&lt;script language="JavaScript" type="text/JavaScript"&gt;
//&lt;![CDATA[

var predefinedIntervals = [

&lt;c:forEach var="o" items="${dlgPredefinedIntervals.items}"&gt;
	&lt;c:set var="i" value="${dlgPredefinedIntervals.index[o]}"/&gt;
	&lt;c:if test="${i &gt; 0}"&gt; 
		,
	&lt;/c:if&gt;
	&lt;c:set var="t" value="${o.timeInterval}"/&gt;
	{
		id: "${o.id}", 
		fromDeltaMillis: ${o.fromDeltaMillis},
		toDeltaMillis: ${o.toDeltaMillis},
		fromTime: "${t.fromPoint}",
		toTime: "${t.toPoint}",
		description: "${o.description}" 
	}
&lt;/c:forEach&gt;
 ];

//]]&gt;
&lt;/script&gt;
I believe we've fixed the issues with custom tags not being parsed within script blocks. However, the validation messages that are being seen are likely caused by the JavaScript validator. Chris, do you have any advice?

But the issue of custom tags not being styled properly is still around.
Which validation messages are you referring to Nick?
(In reply to comment #7)
&gt; Which validation messages are you referring to Nick?

For the block of code from comment 5 I see several warnings/errors:

- Missing semicolon
- Syntax error on tokens, ( expected  instead
- Syntax error, insert ")" to complete PrimaryNoNewArrayStmt
- Syntax error on token(s), misplaced construct(s)
As mentioned in comment 8, I think the validation messages are coming from JSDT at this point. Variables should be able to be resolved in iteration tags within javascript blocks now.
Looks like the translator is having all sorts of problems with that script region.

Being translated as...

var predefinedIntervals = [

_$tag______________________________________________________
    _$tag______________________________________________________
    _$tag____________ 0}"&gt; 
        ,
    _$tag__
    _$tag_____________________________________
    {
        id: "${o.id}", 
        fromDeltaMillis: ${o.fromDeltaMillis},
        toDeltaMillis: ${o.toDeltaMillis},
        fromTime: "${t.fromPoint}",
        toTime: "${t.toPoint}",
        description: "${o.description}" 
    }
_$tag_______
 ];
This bug is still severely affecting user experience of the JSP editor in WTP 3.2.0. I hope that it will actually be targeted for 3.2.2!
Please note that I have a JSP now that is showing this problem. The strange thing is that:
- there are red marks on the overview ruler
- in the corresponding lines, the tags that are causing validation errors are underlined in red
BUT
- the vertical ruler does not show any errors (just other warnings)
- the JSP icon in the Project Explorer and in the editor selection tab do not have any red mark
- if I do right-click | Validate in the editor, the Validation Results information message says that the validation completed with 21 warnings (but no errors)

Is this discrepancy normal?
Yes, the JSP editor only paints Markers in the overview ruler, not as-you-type annotations.
Created attachment 205428
code completion for jsp standard tags is completely missing inside html script tags

Please note that usual code completion and syntax highlighting for jsp standard tags is completely missing inside html script tags.

I'm going to attach a screenshot where you can see the correct syntax highlighting for c:if tag outside the script tag (blue arrow), while inside the script body they completely miss (red arrow).

Using Eclipse Web Developer Tools

Version: 3.3.1.v201107072200-7O7IFhREMiB5vNoYqf01XHTvUndyz-yx-9kUyXXL
Build id: 20100921193530
It's sad to see that all the bugs I found on JSDT not only do they don't get fixed, although they severely affect the usability of the Eclipse Javascript tools and support, but after some years they are even lowered in Severity...
Bugs should be set at the proper severity even if they have been open for some time and resources have yet to be available to work on them.

If you would like to submit a patch, we will gladly review it. We have several community submitted patches currently being reviewed and triaged for the next maintenance release (3.5.1). We plan to start delivering them this week. Then we will be prioritizing other open defects to investigate.
Cannot be resolved errors are no longer shown in JSDT.</WithStack>
    <WithOutStack>I have an iteration tag that is inside JavaScript tag like this:

&lt;script language="JavaScript"&gt;
  var lookupObjects = new Array(&lt;%= values.size() %&gt;);
&lt;% int i = 0; %&gt;
&lt;chr:scriptIteration name="lookupObject" type="crha.util.database.Lookup" iterator="&lt;%= values.iterator() %&gt;"&gt;
  lookupObjects[&lt;%= i++ %&gt;] = new Array("&lt;%= Library.escapeQuotes(lookupObject.getDescription()) %&gt;", "&lt;%= lookupObject.getID().toString() %&gt;");
&lt;/chr:scriptIteration&gt;
&lt;/script&gt;

The validator doesn't seem to parse any JSP tags inside JavaScript tags.  Even the syntax colorer seems to be wrong as it displays it as javascript code.  However it does pick up "i = 0" and i++ statements properly but not the iteration tag.  It gives me "lookupObject cannot be resolved" error in Problems window.

I am using Eclipse 3.1.1 with Web Standards Tools Feature 1.0.0
My suspect is that with the new JavaScript support this problem is handled even worse: try to create a JSP with something like this:

&lt;%@ taglib prefix="c"	uri="http://java.sun.com/jsp/jstl/core" %&gt;
&lt;html&gt;
&lt;head&gt;
&lt;script type="text/javascript"&gt;
  &lt;c:if test="true"&gt;
    function myFunction()
    {
      return true;
    }
  &lt;/c:if&gt;
&lt;/script&gt;
&lt;/head&gt;
&lt;/html&gt;

The editor becomes messy and quite unusable... :-(
Hi, any update regarding this bug?
I'm having the same problem on Eclipse JEE 3.5 Galileo...
Everything is fine if i use "&lt;% ... %&gt;" within a javascript block in a jsp page, while jstl tags (or any custom tag, i suppose) are not recognized.
Tried to disable Window-&gt;Preferences-&gt;Validation-&gt;JavaScript syntax valid., but nothing changed.

This is a dup of Bug 156851 or the other way around.
Created attachment 161277
json-taglib sample

work-around for the "jstl in javascript" problem
same problem "JSTL in Javascript", using jstl iterators to build javascript object ...

i found out a nice tag lib: http://json-taglib.sourceforge.net/
to build json objects in jsp(x) ...

see attachment








&lt;script language="JavaScript" type="text/JavaScript"&gt;
//&lt;![CDATA[

var predefinedIntervals = [

&lt;c:forEach var="o" items="${dlgPredefinedIntervals.items}"&gt;
	&lt;c:set var="i" value="${dlgPredefinedIntervals.index[o]}"/&gt;
	&lt;c:if test="${i &gt; 0}"&gt; 
		,
	&lt;/c:if&gt;
	&lt;c:set var="t" value="${o.timeInterval}"/&gt;
	{
		id: "${o.id}", 
		fromDeltaMillis: ${o.fromDeltaMillis},
		toDeltaMillis: ${o.toDeltaMillis},
		fromTime: "${t.fromPoint}",
		toTime: "${t.toPoint}",
		description: "${o.description}" 
	}
&lt;/c:forEach&gt;
 ];

//]]&gt;
&lt;/script&gt;
I believe we've fixed the issues with custom tags not being parsed within script blocks. However, the validation messages that are being seen are likely caused by the JavaScript validator. Chris, do you have any advice?

But the issue of custom tags not being styled properly is still around.
Which validation messages are you referring to Nick?
(In reply to comment #7)
&gt; Which validation messages are you referring to Nick?

For the block of code from comment 5 I see several warnings/errors:

- Missing semicolon
- Syntax error on tokens, ( expected  instead
- Syntax error, insert ")" to complete PrimaryNoNewArrayStmt
- Syntax error on token(s), misplaced construct(s)
As mentioned in comment 8, I think the validation messages are coming from JSDT at this point. Variables should be able to be resolved in iteration tags within javascript blocks now.
Looks like the translator is having all sorts of problems with that script region.

Being translated as...

var predefinedIntervals = [

_$tag______________________________________________________
    _$tag______________________________________________________
    _$tag____________ 0}"&gt; 
        ,
    _$tag__
    _$tag_____________________________________
    {
        id: "${o.id}", 
        fromDeltaMillis: ${o.fromDeltaMillis},
        toDeltaMillis: ${o.toDeltaMillis},
        fromTime: "${t.fromPoint}",
        toTime: "${t.toPoint}",
        description: "${o.description}" 
    }
_$tag_______
 ];
This bug is still severely affecting user experience of the JSP editor in WTP 3.2.0. I hope that it will actually be targeted for 3.2.2!
Please note that I have a JSP now that is showing this problem. The strange thing is that:
- there are red marks on the overview ruler
- in the corresponding lines, the tags that are causing validation errors are underlined in red
BUT
- the vertical ruler does not show any errors (just other warnings)
- the JSP icon in the Project Explorer and in the editor selection tab do not have any red mark
- if I do right-click | Validate in the editor, the Validation Results information message says that the validation completed with 21 warnings (but no errors)

Is this discrepancy normal?
Yes, the JSP editor only paints Markers in the overview ruler, not as-you-type annotations.
Created attachment 205428
code completion for jsp standard tags is completely missing inside html script tags

Please note that usual code completion and syntax highlighting for jsp standard tags is completely missing inside html script tags.

I'm going to attach a screenshot where you can see the correct syntax highlighting for c:if tag outside the script tag (blue arrow), while inside the script body they completely miss (red arrow).

Using Eclipse Web Developer Tools

Version: 3.3.1.v201107072200-7O7IFhREMiB5vNoYqf01XHTvUndyz-yx-9kUyXXL
Build id: 20100921193530
It's sad to see that all the bugs I found on JSDT not only do they don't get fixed, although they severely affect the usability of the Eclipse Javascript tools and support, but after some years they are even lowered in Severity...
Bugs should be set at the proper severity even if they have been open for some time and resources have yet to be available to work on them.

If you would like to submit a patch, we will gladly review it. We have several community submitted patches currently being reviewed and triaged for the next maintenance release (3.5.1). We plan to start delivering them this week. Then we will be prioritizing other open defects to investigate.
Cannot be resolved errors are no longer shown in JSDT.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="119323" />
    <CreationDate amount="2005-12-05 16:57:00 -0500" />
    <DupId amount="105071" />
    <classification amount="Tools" />
    <Product amount="CDT" />
    <component amount="cdt-debug-cdi" />
    <Version amount="3.0.1" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows 2000" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>prompt for errors on launch will not accept "Yes" answer</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="DUPLICATE" />
    <WithStack>Whenever I do a C/C++ type launch and the required project for the launch currently contains an error, it prompts me if I want to continue.  However, it doesn't seem to matter whether I choose "Yes" or "No", it won't launch.  

I think I tracked this down to org.eclipse.debug.internal.ui.launchConfigurations.CompileErrorPromptStatusHandler.  Basically after showing the dialog it checks for "OK_ID", but it is a Yes/No dialog so OK_ID is never returned.  It seems CDT is the only one using this class.  Other launch configs use CompileErrorProjectPromptStatusHandler, which is a very similar class, but handles the return value correctly.  I'm using CDT 3.0.1, Eclipse 3.1.


*** This bug has been marked as a duplicate of 105071 ***</WithStack>
    <WithOutStack>Whenever I do a C/C++ type launch and the required project for the launch currently contains an error, it prompts me if I want to continue.  However, it doesn't seem to matter whether I choose "Yes" or "No", it won't launch.  

I think I tracked this down to org.eclipse.debug.internal.ui.launchConfigurations.CompileErrorPromptStatusHandler.  Basically after showing the dialog it checks for "OK_ID", but it is a Yes/No dialog so OK_ID is never returned.  It seems CDT is the only one using this class.  Other launch configs use CompileErrorProjectPromptStatusHandler, which is a very similar class, but handles the return value correctly.  I'm using CDT 3.0.1, Eclipse 3.1.


*** This bug has been marked as a duplicate of 105071 ***</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="119324" />
    <CreationDate amount="2005-12-05 17:07:00 -0500" />
    <DupId amount="" />
    <classification amount="BIRT" />
    <Product amount="BIRT" />
    <component amount="Chart" />
    <Version amount="2.0.0" />
    <rep_platform amount="All" />
    <op_sys amount="All" />
    <priority amount="P4" />
    <bug_severity amount="enhancement" />
    <Summery>Highlighting and toggling visibility of datasets causes flickering in SWT renderer</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>When highlighting a dataset or toggling on/off a dataset on a SWT chart the entire canvas is redrawn causing flickering problems.  This does not occur in the SWING renderer. 

This problem becomes quite annoying when highlighting a dataset.  The flickering can confuse the user which data was actually highlighted.
This is because our test code just render the chart directly into the canvas GC, if you use a double-buffered drawing policy, the performance then can be greatly improved.
This is indeed a double buffering issue.
Created attachment 31183
This example uses a double buffering technique to avoid flickering in SWT interactive charts
The examples provided with the chart examples plugin now shows how to do the 
double buffering for SWT. So I change this as an enhancement to include a 
"double buffering" setting in the SWT device renderer, to make it easier for 
users who wish to benefit from it automatically. This enhancement can be 
deferred.
The SWT examples don't use double buffering in the new code, please update them 
to use double buffering.
Fixed all SWT renderers in the examples plug-in
As of TPTP 4.6.0, TPTP is in maintenance mode and focusing on improving quality by resolving relevant enhancements/defects and increasing test coverage through test creation, automation, Build Verification Tests (BVTs), and expanded run-time execution. As part of the TPTP Bugzilla housecleaning process (see http://wiki.eclipse.org/Bugzilla_Housecleaning_Processes), this enhancement/defect is verified/closed by the Project Lead since this originator of this enhancement/defect has an inactive Bugzilla account and considered to be fixed. If this enhancement/defect is still unresolved and reproducible in the latest TPTP release (http://www.eclipse.org/tptp/home/downloads/), please re-open.
This enhancement/defect was mistaken closed as part of the TPTP 4.6 Bugzilla housecleaning process (see http://wiki.eclipse.org/Bugzilla_Housecleaning_Processes) since the originator of this enhancement/defect has an inactive Bugzilla account.  If this enhancement/defect is still unresolved and reproducible, please re-open.</WithStack>
    <WithOutStack>When highlighting a dataset or toggling on/off a dataset on a SWT chart the entire canvas is redrawn causing flickering problems.  This does not occur in the SWING renderer. 

This problem becomes quite annoying when highlighting a dataset.  The flickering can confuse the user which data was actually highlighted.
This is because our test code just render the chart directly into the canvas GC, if you use a double-buffered drawing policy, the performance then can be greatly improved.
This is indeed a double buffering issue.
Created attachment 31183
This example uses a double buffering technique to avoid flickering in SWT interactive charts
The examples provided with the chart examples plugin now shows how to do the 
double buffering for SWT. So I change this as an enhancement to include a 
"double buffering" setting in the SWT device renderer, to make it easier for 
users who wish to benefit from it automatically. This enhancement can be 
deferred.
The SWT examples don't use double buffering in the new code, please update them 
to use double buffering.
Fixed all SWT renderers in the examples plug-in
As of TPTP 4.6.0, TPTP is in maintenance mode and focusing on improving quality by resolving relevant enhancements/defects and increasing test coverage through test creation, automation, Build Verification Tests (BVTs), and expanded run-time execution. As part of the TPTP Bugzilla housecleaning process (see http://wiki.eclipse.org/Bugzilla_Housecleaning_Processes), this enhancement/defect is verified/closed by the Project Lead since this originator of this enhancement/defect has an inactive Bugzilla account and considered to be fixed. If this enhancement/defect is still unresolved and reproducible in the latest TPTP release (http://www.eclipse.org/tptp/home/downloads/), please re-open.
This enhancement/defect was mistaken closed as part of the TPTP 4.6 Bugzilla housecleaning process (see http://wiki.eclipse.org/Bugzilla_Housecleaning_Processes) since the originator of this enhancement/defect has an inactive Bugzilla account.  If this enhancement/defect is still unresolved and reproducible, please re-open.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="119325" />
    <CreationDate amount="2005-12-05 17:07:00 -0500" />
    <DupId amount="" />
    <classification amount="WebTools" />
    <Product amount="WTP Java EE Tools" />
    <component amount="jst.j2ee" />
    <Version amount="1.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P2" />
    <bug_severity amount="major" />
    <Summery>Components with meta resources cannot be reloaded</Summery>
    <Patches amount="0" />
    <Stacktraces amount="1">
      <Stacktrace timestamp="1437330614199">
        <Exception>java.lang.ArrayStoreException</Exception>
        <Reason />
        <Frames>
          <Frame depth="0">org.eclipse.emf.common.util.BasicEList.assign(BasicEList.java:187)</Frame>
          <Frame depth="1">org.eclipse.emf.common.util.BasicEList.addUnique(BasicEList.java:664)</Frame>
          <Frame depth="2">org.eclipse.emf.common.notify.impl.NotifyingListImpl.addUnique(NotifyingListImpl.java:323)</Frame>
          <Frame depth="3">org.eclipse.emf.common.util.BasicEList.add(BasicEList.java:644)</Frame>
          <Frame depth="4">org.eclipse.wst.common.internal.emf.utilities.ExtendedEcoreUtil.eSetOrAdd(ExtendedEcoreUtil.java:72)</Frame>
          <Frame depth="5">org.eclipse.wst.common.internal.emf.resource.Translator.setMOFValue(Translator.java:605)</Frame>
          <Frame depth="6">org.eclipse.wst.common.internal.emf.resource.EMF2DOMAdapterImpl.updateMOFMultiPrimitiveFeature(EMF2DOMAdapterImpl.java:1679)</Frame>
          <Frame depth="7">org.eclipse.wst.common.internal.emf.resource.EMF2DOMAdapterImpl.primUpdateMOFMultiFeature(EMF2DOMAdapterImpl.java:1437)</Frame>
          <Frame depth="8">org.eclipse.wst.common.internal.emf.resource.EMF2DOMAdapterImpl.updateMOFMultiFeature(EMF2DOMAdapterImpl.java:1658)</Frame>
          <Frame depth="9">org.eclipse.wst.common.internal.emf.resource.EMF2DOMAdapterImpl.updateMOFFeature(EMF2DOMAdapterImpl.java:1700)</Frame>
          <Frame depth="10">org.eclipse.wst.common.internal.emf.resource.EMF2DOMAdapterImpl.primUpdateMOF(EMF2DOMAdapterImpl.java:892)</Frame>
          <Frame depth="11">org.eclipse.wst.common.internal.emf.resource.EMF2DOMAdapterImpl.updateMOF(EMF2DOMAdapterImpl.java:872)</Frame>
          <Frame depth="12">org.eclipse.wst.common.internal.emf.resource.EMF2DOMAdapterImpl.primUpdateMOFMultiFeature(EMF2DOMAdapterImpl.java:422)</Frame>
          <Frame depth="13">org.eclipse.wst.common.internal.emf.resource.EMF2DOMAdapterImpl.primUpdateMOFMultiFeature(EMF2DOMAdapterImpl.java:1444)</Frame>
          <Frame depth="14">org.eclipse.wst.common.internal.emf.resource.EMF2DOMAdapterImpl.updateMOFMultiFeature(EMF2DOMAdapterImpl.java:1658)</Frame>
          <Frame depth="15">org.eclipse.wst.common.internal.emf.resource.EMF2DOMAdapterImpl.updateMOFFeature(EMF2DOMAdapterImpl.java:1700)</Frame>
          <Frame depth="16">org.eclipse.wst.common.internal.emf.resource.EMF2DOMAdapterImpl.primUpdateMOF(EMF2DOMAdapterImpl.java:892)</Frame>
          <Frame depth="17">org.eclipse.wst.common.internal.emf.resource.EMF2DOMAdapterImpl.updateMOF(EMF2DOMAdapterImpl.java:872)</Frame>
          <Frame depth="18">org.eclipse.wst.common.internal.emf.resource.EMF2DOMAdapterImpl.primUpdateMOFMultiFeature(EMF2DOMAdapterImpl.java:422)</Frame>
          <Frame depth="19">org.eclipse.wst.common.internal.emf.resource.EMF2DOMAdapterImpl.updateMOFRootFeature(EMF2DOMAdapterImpl.java:913)</Frame>
          <Frame depth="20">org.eclipse.wst.common.internal.emf.resource.EMF2DOMAdapterImpl.primUpdateMOF(EMF2DOMAdapterImpl.java:888)</Frame>
          <Frame depth="21">org.eclipse.wst.common.internal.emf.resource.EMF2DOMAdapterImpl.updateMOF(EMF2DOMAdapterImpl.java:872)</Frame>
          <Frame depth="22">org.eclipse.wst.common.internal.emf.resource.EMF2DOMRenderer.doLoad(EMF2DOMRenderer.java:62)</Frame>
          <Frame depth="23">org.eclipse.wst.common.internal.emf.resource.TranslatorResourceImpl.basicDoLoad(TranslatorResourceImpl.java:141)</Frame>
          <Frame depth="24">org.eclipse.wst.common.internal.emf.resource.CompatibilityXMIResourceImpl.doLoad(CompatibilityXMIResourceImpl.java:173)</Frame>
          <Frame depth="25">org.eclipse.emf.ecore.resource.impl.ResourceImpl.load(ResourceImpl.java:977)</Frame>
          <Frame depth="26">org.eclipse.emf.ecore.resource.impl.ResourceImpl.load(ResourceImpl.java:832)</Frame>
          <Frame depth="27">org.eclipse.wst.common.internal.emf.resource.TranslatorResourceImpl.load(TranslatorResourceImpl.java:384)</Frame>
          <Frame depth="28">org.eclipse.wst.common.componentcore.internal.ModuleStructuralModel.getAndLoadLocalResource(ModuleStructuralModel.java:163)</Frame>
          <Frame depth="29">org.eclipse.wst.common.internal.emfworkbench.integration.EditModel.getResource(EditModel.java:681)</Frame>
          <Frame depth="30">org.eclipse.wst.common.internal.emfworkbench.integration.EditModel.getPrimaryResource(EditModel.java:1511)</Frame>
          <Frame depth="31">org.eclipse.wst.common.componentcore.internal.ModuleStructuralModel.prepareProjectModulesIfNecessary(ModuleStructuralModel.java:104)</Frame>
          <Frame depth="32">org.eclipse.wst.common.componentcore.internal.ModuleStructuralModel.getPrimaryRootObject(ModuleStructuralModel.java:89)</Frame>
          <Frame depth="33">org.eclipse.wst.common.componentcore.internal.StructureEdit.getComponentModelRoot(StructureEdit.java:410)</Frame>
          <Frame depth="34">org.eclipse.wst.common.componentcore.internal.StructureEdit.getWorkbenchModules(StructureEdit.java:438)</Frame>
          <Frame depth="35">org.eclipse.wst.common.componentcore.internal.StructureEdit.getComponent(StructureEdit.java:876)</Frame>
          <Frame depth="36">org.eclipse.wst.common.componentcore.internal.resources.VirtualResource.getProjectRelativePaths(VirtualResource.java:115)</Frame>
          <Frame depth="37">org.eclipse.wst.common.componentcore.internal.resources.VirtualResource.getProjectRelativePath(VirtualResource.java:144)</Frame>
          <Frame depth="38">org.eclipse.wst.common.componentcore.internal.resources.VirtualFolder.getUnderlyingFolder(VirtualFolder.java:79)</Frame>
        </Frames>
      </Stacktrace>
    </Stacktraces>
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>We create a Web component.  Our tooling has additional meta resources, so we set the IPath to these meta resources in the component.setMetaResources()
When we shut down Eclipse and then restart it, and wtp goes to reload the .components file, we get a Translator error:

java.lang.ArrayStoreException
	at org.eclipse.emf.common.util.BasicEList.assign(BasicEList.java:187)
	at org.eclipse.emf.common.util.BasicEList.addUnique(BasicEList.java:664)
	at org.eclipse.emf.common.notify.impl.NotifyingListImpl.addUnique(NotifyingListImpl.java:323)
	at org.eclipse.emf.common.util.BasicEList.add(BasicEList.java:644)
	at org.eclipse.wst.common.internal.emf.utilities.ExtendedEcoreUtil.eSetOrAdd(ExtendedEcoreUtil.java:72)
	at org.eclipse.wst.common.internal.emf.resource.Translator.setMOFValue(Translator.java:605)
	at org.eclipse.wst.common.internal.emf.resource.EMF2DOMAdapterImpl.updateMOFMultiPrimitiveFeature(EMF2DOMAdapterImpl.java:1679)
	at org.eclipse.wst.common.internal.emf.resource.EMF2DOMAdapterImpl.primUpdateMOFMultiFeature(EMF2DOMAdapterImpl.java:1437)
	at org.eclipse.wst.common.internal.emf.resource.EMF2DOMAdapterImpl.updateMOFMultiFeature(EMF2DOMAdapterImpl.java:1658)
	at org.eclipse.wst.common.internal.emf.resource.EMF2DOMAdapterImpl.updateMOFFeature(EMF2DOMAdapterImpl.java:1700)
	at org.eclipse.wst.common.internal.emf.resource.EMF2DOMAdapterImpl.primUpdateMOF(EMF2DOMAdapterImpl.java:892)
	at org.eclipse.wst.common.internal.emf.resource.EMF2DOMAdapterImpl.updateMOF(EMF2DOMAdapterImpl.java:872)
	at org.eclipse.wst.common.internal.emf.resource.EMF2DOMAdapterImpl.primUpdateMOFMultiFeature(EMF2DOMAdapterImpl.java:422)
	at org.eclipse.wst.common.internal.emf.resource.EMF2DOMAdapterImpl.primUpdateMOFMultiFeature(EMF2DOMAdapterImpl.java:1444)
	at org.eclipse.wst.common.internal.emf.resource.EMF2DOMAdapterImpl.updateMOFMultiFeature(EMF2DOMAdapterImpl.java:1658)
	at org.eclipse.wst.common.internal.emf.resource.EMF2DOMAdapterImpl.updateMOFFeature(EMF2DOMAdapterImpl.java:1700)
	at org.eclipse.wst.common.internal.emf.resource.EMF2DOMAdapterImpl.primUpdateMOF(EMF2DOMAdapterImpl.java:892)
	at org.eclipse.wst.common.internal.emf.resource.EMF2DOMAdapterImpl.updateMOF(EMF2DOMAdapterImpl.java:872)
	at org.eclipse.wst.common.internal.emf.resource.EMF2DOMAdapterImpl.primUpdateMOFMultiFeature(EMF2DOMAdapterImpl.java:422)
	at org.eclipse.wst.common.internal.emf.resource.EMF2DOMAdapterImpl.updateMOFRootFeature(EMF2DOMAdapterImpl.java:913)
	at org.eclipse.wst.common.internal.emf.resource.EMF2DOMAdapterImpl.primUpdateMOF(EMF2DOMAdapterImpl.java:888)
	at org.eclipse.wst.common.internal.emf.resource.EMF2DOMAdapterImpl.updateMOF(EMF2DOMAdapterImpl.java:872)
	at org.eclipse.wst.common.internal.emf.resource.EMF2DOMRenderer.doLoad(EMF2DOMRenderer.java:62)
	at org.eclipse.wst.common.internal.emf.resource.TranslatorResourceImpl.basicDoLoad(TranslatorResourceImpl.java:141)
	at org.eclipse.wst.common.internal.emf.resource.CompatibilityXMIResourceImpl.doLoad(CompatibilityXMIResourceImpl.java:173)
	at org.eclipse.emf.ecore.resource.impl.ResourceImpl.load(ResourceImpl.java:977)
	at org.eclipse.emf.ecore.resource.impl.ResourceImpl.load(ResourceImpl.java:832)
	at org.eclipse.wst.common.internal.emf.resource.TranslatorResourceImpl.load(TranslatorResourceImpl.java:384)
	at org.eclipse.wst.common.componentcore.internal.ModuleStructuralModel.getAndLoadLocalResource(ModuleStructuralModel.java:163)
	at org.eclipse.wst.common.internal.emfworkbench.integration.EditModel.getResource(EditModel.java:681)
	at org.eclipse.wst.common.internal.emfworkbench.integration.EditModel.getPrimaryResource(EditModel.java:1511)
	at org.eclipse.wst.common.componentcore.internal.ModuleStructuralModel.prepareProjectModulesIfNecessary(ModuleStructuralModel.java:104)
	at org.eclipse.wst.common.componentcore.internal.ModuleStructuralModel.getPrimaryRootObject(ModuleStructuralModel.java:89)
	at org.eclipse.wst.common.componentcore.internal.StructureEdit.getComponentModelRoot(StructureEdit.java:410)
	at org.eclipse.wst.common.componentcore.internal.StructureEdit.getWorkbenchModules(StructureEdit.java:438)
	at org.eclipse.wst.common.componentcore.internal.StructureEdit.getComponent(StructureEdit.java:876)
	at org.eclipse.wst.common.componentcore.internal.resources.VirtualResource.getProjectRelativePaths(VirtualResource.java:115)
	at org.eclipse.wst.common.componentcore.internal.resources.VirtualResource.getProjectRelativePath(VirtualResource.java:144)
	at org.eclipse.wst.common.componentcore.internal.resources.VirtualFolder.getUnderlyingFolder(VirtualFolder.java:79)

This appears to be due to the fact that the property that is read in is a String, yet the meta resources wants an IPath.
The properties of a component are String based, so you must make sure these are set properly.......   Let us know if we are mishandling the strings....
IVirtualComponent.setMetaResources(IPath[]theMetaResourcePaths) is the method that we are using to set the meta resources.  That is the proper method to set the meta resources.  (Note: this is not the metaProperties, it is the metaResources.)

Now, in the .component file, it is stored as:
&lt;meta-resources&gt;foo&lt;/meta-resources&gt;

When the .component file is read back in on workbench restart, it goes to set the meta resources with the string foo, which causes an ArrayStoreException.

An easy test for this- make a web project, shut down the workbench, add the above line in the .component file, and restart the workbench.
This is fixed for RC2.

Adding to Hot List at the request of Scott Peddle and setting priority to P2 in case it is reopened. Scott, pls verify the fix asap. Thx.
Verified that this is fixed in WTP 1.0 RC4.
OK</WithStack>
    <WithOutStack>We create a Web component.  Our tooling has additional meta resources, so we set the IPath to these meta resources in the component.setMetaResources()
When we shut down Eclipse and then restart it, and wtp goes to reload the .components file, we get a Translator error:



This appears to be due to the fact that the property that is read in is a String, yet the meta resources wants an IPath.
The properties of a component are String based, so you must make sure these are set properly.......   Let us know if we are mishandling the strings....
IVirtualComponent.setMetaResources(IPath[]theMetaResourcePaths) is the method that we are using to set the meta resources.  That is the proper method to set the meta resources.  (Note: this is not the metaProperties, it is the metaResources.)

Now, in the .component file, it is stored as:
&lt;meta-resources&gt;foo&lt;/meta-resources&gt;

When the .component file is read back in on workbench restart, it goes to set the meta resources with the string foo, which causes an ArrayStoreException.

An easy test for this- make a web project, shut down the workbench, add the above line in the .component file, and restart the workbench.
This is fixed for RC2.

Adding to Hot List at the request of Scott Peddle and setting priority to P2 in case it is reopened. Scott, pls verify the fix asap. Thx.
Verified that this is fixed in WTP 1.0 RC4.
OK</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="119326" />
    <CreationDate amount="2005-12-05 17:18:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="JDT" />
    <component amount="Text" />
    <Version amount="3.1.1" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="major" />
    <Summery>[implementation] SelectionListenerWithASTManager not always notifying because of null astRoot</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="2">
      <Enumeration lines="4">
        <Lines>
          <Line>1.) Create a new Java Project</Line>
          <Line>2.) Create a new Java class. Important: leave it open.</Line>
          <Line>3.) Create another new Java class</Line>
          <Line>4.) Click Source-&gt;Add comment</Line>
        </Lines>
      </Enumeration>
      <Enumeration lines="3">
        <Lines>
          <Line>- ASTProvider rev. 1.45</Line>
          <Line>- JavaEditor rev. 1.379</Line>
          <Line>- SelectionListenerWithASTManager rev. 1.27</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="VERIFIED" />
    <resolution amount="FIXED" />
    <WithStack>We are having a problem where we do not get notified of a new AST after an AST re-write. Digging into the SelectionListenerWithASTManager, I see it is because the CompilationUnit (astRoot) that is fetched via ASTProvider.getAST() is null. This would be ok, except there is no subsequent notification with a legitimate CompilationUnit until some other event (such as clicking on the CompilationUnit editor) triggers it. Repro is as follows:

1.) Create a new Java Project
2.) Create a new Java class. Important: leave it open.
3.) Create another new Java class
4.) Click Source-&gt;Add comment

No notification ever arrives because the astRoot is null. You can see this by putting a println or a breakpoint after SelectionListenerWithASTManager.java:167.
Moving to JDT UI
I could not reproduce this with your steps: step 4 causes a selection change and hence sends out the correct AST. However, I can reproduce it if I only do step 1 to 3 or even if I simply open a CU.
Fixed in HEAD.
Available in builds &gt; N20051207-0010.
verifying...
Verified that the scenario in comment 0 and the steps in comment 2 work as expected. Found what I think is a similar case under some conditions, see bug 120572.
I still still this. With the exact same repro as below.
We've verified this using the M4, see comment 5. In which build do you see this? If it's newer than M4 then please reopen a new bug.
I saw it on 3.1.2. This was only fixed in 3.2, then?
&gt;I saw it on 3.1.2. This was only fixed in 3.2, then?
Simply look at the target milestone of a bug:
if target milestone &gt; your release ==&gt; not in your release
Restoring verification state, see comment 5.
*** Bug 108914 has been marked as a duplicate of this bug. ***
Could you tell me if the fix for this bug is simply checking fAST for null in ASTProvider.getAST(), or if the fix required is more complex?
No, the fix affects several classes and is more complicated since we also found and fixed another scenario (see bug 120572) when verifing the initial fixing for this one. I did a quick check and think the following classes cover the fixes:
- ASTProvider rev. 1.45
- JavaEditor rev. 1.379
- SelectionListenerWithASTManager rev. 1.27

No guarantee though ;-)</WithStack>
    <WithOutStack>We are having a problem where we do not get notified of a new AST after an AST re-write. Digging into the SelectionListenerWithASTManager, I see it is because the CompilationUnit (astRoot) that is fetched via ASTProvider.getAST() is null. This would be ok, except there is no subsequent notification with a legitimate CompilationUnit until some other event (such as clicking on the CompilationUnit editor) triggers it. Repro is as follows:

1.) Create a new Java Project
2.) Create a new Java class. Important: leave it open.
3.) Create another new Java class
4.) Click Source-&gt;Add comment

No notification ever arrives because the astRoot is null. You can see this by putting a println or a breakpoint after SelectionListenerWithASTManager.java:167.
Moving to JDT UI
I could not reproduce this with your steps: step 4 causes a selection change and hence sends out the correct AST. However, I can reproduce it if I only do step 1 to 3 or even if I simply open a CU.
Fixed in HEAD.
Available in builds &gt; N20051207-0010.
verifying...
Verified that the scenario in comment 0 and the steps in comment 2 work as expected. Found what I think is a similar case under some conditions, see bug 120572.
I still still this. With the exact same repro as below.
We've verified this using the M4, see comment 5. In which build do you see this? If it's newer than M4 then please reopen a new bug.
I saw it on 3.1.2. This was only fixed in 3.2, then?
&gt;I saw it on 3.1.2. This was only fixed in 3.2, then?
Simply look at the target milestone of a bug:
if target milestone &gt; your release ==&gt; not in your release
Restoring verification state, see comment 5.
*** Bug 108914 has been marked as a duplicate of this bug. ***
Could you tell me if the fix for this bug is simply checking fAST for null in ASTProvider.getAST(), or if the fix required is more complex?
No, the fix affects several classes and is more complicated since we also found and fixed another scenario (see bug 120572) when verifing the initial fixing for this one. I did a quick check and think the following classes cover the fixes:
- ASTProvider rev. 1.45
- JavaEditor rev. 1.379
- SelectionListenerWithASTManager rev. 1.27

No guarantee though ;-)</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="119327" />
    <CreationDate amount="2005-12-05 17:19:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="Team" />
    <Version amount="3.2" />
    <rep_platform amount="All" />
    <op_sys amount="All" />
    <priority amount="P2" />
    <bug_severity amount="major" />
    <Summery>[Model Sync] Add IStorageMerger</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>We are a client of org.eclipse.compare. We are developing our Compare/Merge component on top of org.eclipse.compare that allows comparing/merging of modeling artifacts. Currently, we are trying to componentize our component. We want to break up our component into two parts: com.ibm.xtools.comparemerge.core and com.ibm.xtools.comparemerge.ui.  After the componentization, our core component should not be dependent on eclipse ui.  Users can use our core component to silently merge their modeling artifacts without invoking any eclipse ui.  

org.eclipse.compare is now causing problem to our componentization process. Since our core component has to depend on org.eclipse.compare (in order to use things like IStreamMerger), and org.eclipse.compare is currently depending on org.eclipse.ui; there is currently no way for our core component to not  depend on eclipse ui. 

I believe that the problem can only be fixed if org.eclipse.compare is going to be broken up into two parts: org.eclipse.compare.core and org.eclipse.compare.ui, such that org.eclipse.compare.core does not have any dependency on Eclipse ui.

BTW, most of eclipse components are in two parts right now: core and ui...This is the correct way of doing things. This supports rich client platform. 

Please look at the problem and fix it as soon as possible. It is currently blocking our componentization process. Thank you very much.
Mocing to team since we are planning on creating a repalcement API that is based on IStorage. Team has a Core/UI split already so I've adjusted the title.
I have added an IStorageMerger to the Team/Core plugin and modified the merge context to use this API.</WithStack>
    <WithOutStack>We are a client of org.eclipse.compare. We are developing our Compare/Merge component on top of org.eclipse.compare that allows comparing/merging of modeling artifacts. Currently, we are trying to componentize our component. We want to break up our component into two parts: com.ibm.xtools.comparemerge.core and com.ibm.xtools.comparemerge.ui.  After the componentization, our core component should not be dependent on eclipse ui.  Users can use our core component to silently merge their modeling artifacts without invoking any eclipse ui.  

org.eclipse.compare is now causing problem to our componentization process. Since our core component has to depend on org.eclipse.compare (in order to use things like IStreamMerger), and org.eclipse.compare is currently depending on org.eclipse.ui; there is currently no way for our core component to not  depend on eclipse ui. 

I believe that the problem can only be fixed if org.eclipse.compare is going to be broken up into two parts: org.eclipse.compare.core and org.eclipse.compare.ui, such that org.eclipse.compare.core does not have any dependency on Eclipse ui.

BTW, most of eclipse components are in two parts right now: core and ui...This is the correct way of doing things. This supports rich client platform. 

Please look at the problem and fix it as soon as possible. It is currently blocking our componentization process. Thank you very much.
Mocing to team since we are planning on creating a repalcement API that is based on IStorage. Team has a Core/UI split already so I've adjusted the title.
I have added an IStorageMerger to the Team/Core plugin and modified the merge context to use this API.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="119328" />
    <CreationDate amount="2005-12-05 17:36:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse Foundation" />
    <Product amount="Community" />
    <component amount="Website" />
    <Version amount="unspecified" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Where is GMF?</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>I don't see GMF on the projects page.
GMF is a Technology project and is listed on the Technology page. The Projects page lists the top-level projects.</WithStack>
    <WithOutStack>I don't see GMF on the projects page.
GMF is a Technology project and is listed on the Technology page. The Projects page lists the top-level projects.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="119329" />
    <CreationDate amount="2005-12-05 17:39:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="SWT" />
    <Version amount="3.0.1" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows 98" />
    <priority amount="P3" />
    <bug_severity amount="major" />
    <Summery>presentation with chines character</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="WONTFIX" />
    <WithStack>I have problems with my application, I installed in network with java web Start in my clients, windows Xp, is all ok, but in windows 98 I have one error in the presentation of the text.
This error of presentation is a specific event, the event is when I display a table in a specific row and column, and this specific table, appears in chino idiom.

I adjunt the image and code
Created attachment 31151
images and code

The source code, and images of errors in the Windows 98
NOTE:  This is Windows 98.  It could be a font problem (ie. non-Unicode font is missing the glyphs).
bug 166184 may be related.

@krol: did you find a workaround?
The testcase doens't work. Please fix it (it would be nicer if you cold write a smaller snippet). Reopen this problem report once it is done.</WithStack>
    <WithOutStack>I have problems with my application, I installed in network with java web Start in my clients, windows Xp, is all ok, but in windows 98 I have one error in the presentation of the text.
This error of presentation is a specific event, the event is when I display a table in a specific row and column, and this specific table, appears in chino idiom.

I adjunt the image and code
Created attachment 31151
images and code

The source code, and images of errors in the Windows 98
NOTE:  This is Windows 98.  It could be a font problem (ie. non-Unicode font is missing the glyphs).
bug 166184 may be related.

@krol: did you find a workaround?
The testcase doens't work. Please fix it (it would be nicer if you cold write a smaller snippet). Reopen this problem report once it is done.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="119330" />
    <CreationDate amount="2005-12-05 18:00:00 -0500" />
    <DupId amount="" />
    <classification amount="WebTools" />
    <Product amount="WTP Common Tools" />
    <component amount="wst.common" />
    <Version amount="1.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows 2000" />
    <priority amount="P3" />
    <bug_severity amount="enhancement" />
    <Summery>[data models] Add support for ComboViewer in DataModelSynchHelper</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="1">
      <source_code type="functioncall">
        <location start="0" end="177" />
        <code>synchCombo will only work if property is a string value.   A ClassCastException occurs trying to use syncCombo(ComboViewer.getCombo(), OBJECT_RATHER_THAN_STRING_PROPERTY, null);</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="WONTFIX" />
    <WithStack>synchCombo will only work if property is a string value.   A ClassCastException occurs trying to use syncCombo(ComboViewer.getCombo(), OBJECT_RATHER_THAN_STRING_PROPERTY, null);
I should have mentioned before that the problem occurs when the underlying list is updated. 
Closing old bugs.</WithStack>
    <WithOutStack>synchCombo will only work if property is a string value.   A ClassCastException occurs trying to use syncCombo(ComboViewer.getCombo(), OBJECT_RATHER_THAN_STRING_PROPERTY, null);
I should have mentioned before that the problem occurs when the underlying list is updated. 
Closing old bugs.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="119331" />
    <CreationDate amount="2005-12-05 18:00:00 -0500" />
    <DupId amount="" />
    <classification amount="BIRT" />
    <Product amount="BIRT" />
    <component amount="Report Designer" />
    <Version amount="2.0.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows 2000" />
    <priority amount="P3" />
    <bug_severity amount="enhancement" />
    <Summery>Library - name space terminology and behavior</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="4">
        <Lines>
          <Line>- Change the term namespace to 'prefix'</Line>
          <Line>- By default use the library name as the prefix ( namespace ); the dialog to input prefix should be prompted only if hte auto generated prefix is not unique.</Line>
          <Line>Using prefix to replace namespace terminology.</Line>
          <Line>Verified in build 20051220.</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>During BIRT 2.0 library feature review meeting the following change was decided.
- Change the term namespace to 'prefix'
- By default use the library name as the prefix ( namespace ); the dialog to input prefix should be prompted only if hte auto generated prefix is not unique.
Using prefix to replace namespace terminology.
Verified in build 20051220.</WithStack>
    <WithOutStack>During BIRT 2.0 library feature review meeting the following change was decided.
- Change the term namespace to 'prefix'
- By default use the library name as the prefix ( namespace ); the dialog to input prefix should be prompted only if hte auto generated prefix is not unique.
Using prefix to replace namespace terminology.
Verified in build 20051220.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="119332" />
    <CreationDate amount="2005-12-05 18:01:00 -0500" />
    <DupId amount="" />
    <classification amount="BIRT" />
    <Product amount="BIRT" />
    <component amount="Chart" />
    <Version amount="2.0.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows 2000" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>NPE when running attahced report.</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>Run attached report using runtask. Get NPE. Error msg: "Error happended while runntine the report"

RunAndRenderTask works fine with it.
Created attachment 31152
test report
I have fixed the NPE exception, but it is still failed.

This report design contains chart item, in generation the chart never use the query result, so the DTE dones't store the query into report document. In presentation, the chart requests the query result, as it is never stored into the report document, the DTE failes to return the result.


*** Bug 119406 has been marked as a duplicate of this bug. ***
Resolved by implementing IReportItemGeneration and evaluating the expressions 
at that time.
verified
*** Bug 120030 has been marked as a duplicate of this bug. ***
*** Bug 120044 has been marked as a duplicate of this bug. ***</WithStack>
    <WithOutStack>Run attached report using runtask. Get NPE. Error msg: "Error happended while runntine the report"

RunAndRenderTask works fine with it.
Created attachment 31152
test report
I have fixed the NPE exception, but it is still failed.

This report design contains chart item, in generation the chart never use the query result, so the DTE dones't store the query into report document. In presentation, the chart requests the query result, as it is never stored into the report document, the DTE failes to return the result.


*** Bug 119406 has been marked as a duplicate of this bug. ***
Resolved by implementing IReportItemGeneration and evaluating the expressions 
at that time.
verified
*** Bug 120030 has been marked as a duplicate of this bug. ***
*** Bug 120044 has been marked as a duplicate of this bug. ***</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="119333" />
    <CreationDate amount="2005-12-05 18:04:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="UI" />
    <Version amount="3.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>[DataBinding] Tree descriptions are using Class</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="INVALID" />
    <WithStack>The Tree Model/Viewer Descriptons are using Class as an argument to the addColumn, addChildrenProperties.

This will not work for dynamic EMF objects, as EMF uses EClass object to represent the meta information for the class.  We need to change this to Object.
Do you think we should move from Class to Object in other places too (e.g. converter)?
I would think so.  Ugh.

Thanks for pointing this out Gili.
Marking as M5 since this affects the API.
Setting target milestone to 3.2 since we the API for trees is still in flux.
Closing stale bugs.</WithStack>
    <WithOutStack>The Tree Model/Viewer Descriptons are using Class as an argument to the addColumn, addChildrenProperties.

This will not work for dynamic EMF objects, as EMF uses EClass object to represent the meta information for the class.  We need to change this to Object.
Do you think we should move from Class to Object in other places too (e.g. converter)?
I would think so.  Ugh.

Thanks for pointing this out Gili.
Marking as M5 since this affects the API.
Setting target milestone to 3.2 since we the API for trees is still in flux.
Closing stale bugs.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="119334" />
    <CreationDate amount="2005-12-05 18:39:00 -0500" />
    <DupId amount="" />
    <classification amount="WebTools" />
    <Product amount="WTP Source Editing" />
    <component amount="jst.jsp" />
    <Version amount="0.7.1" />
    <rep_platform amount="PC" />
    <op_sys amount="Linux-GTK" />
    <priority amount="P2" />
    <bug_severity amount="normal" />
    <Summery>[jsp20] jsp:directive.tag import= list not recognized in .tagx XML tag files</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>This example results in the complaint "&lt;class&gt; cannot be resolved to a type." If you change "directive.tag" to "directive.page" things are fine, but the resulting document is no longer a compliant tag file: according to the JSP 2.0 spec, to include "directive.page" is such a file is a translation error. (JSP 2.0, section JSP8.5.)

A pity, because between this and Bug 90297, (recognition of jspContext in tag files) it's completely possible to edit .tagx XML tag files, with the benefits of syntax checking...so close, and yet so far.

&lt;jsp:root xmlns:jsp="http://java.sun.com/JSP/Page" version="2.0"
&gt;&lt;jsp:directive.tag import="java.io.ByteArrayOutputStream"/&gt;
&lt;jsp:scriptlet&gt;ByteArrayOutputStream baos = null;&lt;/jsp:scriptlet&gt;
&lt;/jsp:root&gt;
Thanks, we'll give this a priority for 1.5 release. 

Thanks, and looking further, I apologize for creating a new bug over a feature already planned, but not for the 1.0 release. I should have done my homework better. The status should be WONTFIX or LATER or something. I will leave it to someone else to change the status.
&lt;%@ taglib uri="/WEB-INF/appframe2.tld" prefix="ai" %&gt;
I can get customer tag assistant in The page one. when The Page Two include the page one,I can't get customer tag assistant in page two.

David,

Any chance that this issue will be resolved for 2.0? Your last comment from more than a year ago indicated that this will be looked at for the 1.5 release...

There has been interest in this issue from BEA's product group adopting WTP 2.0.
M6 is in shut down, please triage if appropriate for a 2.0 RC milestone.
Fixed in RC0.  Note that for the moment the tag directive may be flagged as unknown, but we expect to have that cleared up well before RC0 is declared.

In reply to comment #3, Edward.Min, could you retry that scenario with an RC0 build?
Verified with 3.0RC4-20080610084135</WithStack>
    <WithOutStack>This example results in the complaint "&lt;class&gt; cannot be resolved to a type." If you change "directive.tag" to "directive.page" things are fine, but the resulting document is no longer a compliant tag file: according to the JSP 2.0 spec, to include "directive.page" is such a file is a translation error. (JSP 2.0, section JSP8.5.)

A pity, because between this and Bug 90297, (recognition of jspContext in tag files) it's completely possible to edit .tagx XML tag files, with the benefits of syntax checking...so close, and yet so far.

&lt;jsp:root xmlns:jsp="http://java.sun.com/JSP/Page" version="2.0"
&gt;&lt;jsp:directive.tag import="java.io.ByteArrayOutputStream"/&gt;
&lt;jsp:scriptlet&gt;ByteArrayOutputStream baos = null;&lt;/jsp:scriptlet&gt;
&lt;/jsp:root&gt;
Thanks, we'll give this a priority for 1.5 release. 

Thanks, and looking further, I apologize for creating a new bug over a feature already planned, but not for the 1.0 release. I should have done my homework better. The status should be WONTFIX or LATER or something. I will leave it to someone else to change the status.
&lt;%@ taglib uri="/WEB-INF/appframe2.tld" prefix="ai" %&gt;
I can get customer tag assistant in The page one. when The Page Two include the page one,I can't get customer tag assistant in page two.

David,

Any chance that this issue will be resolved for 2.0? Your last comment from more than a year ago indicated that this will be looked at for the 1.5 release...

There has been interest in this issue from BEA's product group adopting WTP 2.0.
M6 is in shut down, please triage if appropriate for a 2.0 RC milestone.
Fixed in RC0.  Note that for the moment the tag directive may be flagged as unknown, but we expect to have that cleared up well before RC0 is declared.

In reply to comment #3, Edward.Min, could you retry that scenario with an RC0 build?
Verified with 3.0RC4-20080610084135</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="119335" />
    <CreationDate amount="2005-12-05 18:50:00 -0500" />
    <DupId amount="" />
    <classification amount="BIRT" />
    <Product amount="BIRT" />
    <component amount="Report Engine" />
    <Version amount="2.0.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows 2000" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Report content's layout is not expected when generated as embedded content</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="INVALID" />
    <WithStack>Set render options to be embeddedable, display report page in a div. The report looks different from displaying in the iframe.

Use attached report as example.
Created attachment 31155
report
The iframe is used to embedded an other HTML file in the current html document. The target src must contains a complete html content instead of a HTML fragment.  

The embedded output is a HTML fragement can be used in &lt;div&gt; tag.</WithStack>
    <WithOutStack>Set render options to be embeddedable, display report page in a div. The report looks different from displaying in the iframe.

Use attached report as example.
Created attachment 31155
report
The iframe is used to embedded an other HTML file in the current html document. The target src must contains a complete html content instead of a HTML fragment.  

The embedded output is a HTML fragement can be used in &lt;div&gt; tag.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="119336" />
    <CreationDate amount="2005-12-05 19:07:00 -0500" />
    <DupId amount="" />
    <classification amount="WebTools" />
    <Product amount="WTP Common Tools" />
    <component amount="wst.common" />
    <Version amount="1.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="major" />
    <Summery>Facet categories break preset selection</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>Interactions between the facet categories and feature presets appear to be broken.

If the category is not expanded and a preset selects a facet inside of a category the select appears to not occur.

If the category is expanded and a preset selects a facet inside of a category the category itself does not change state to reflect the state of its children (the facets).
Fixed.
This bug is being moved to the "closed" state since it has been in the fixed state for a so long it is being assumed fixed, without explicit verification from the originator. If there is still a problem, in the most recent 1.5.x builds, please reopen or open another bug.</WithStack>
    <WithOutStack>Interactions between the facet categories and feature presets appear to be broken.

If the category is not expanded and a preset selects a facet inside of a category the select appears to not occur.

If the category is expanded and a preset selects a facet inside of a category the category itself does not change state to reflect the state of its children (the facets).
Fixed.
This bug is being moved to the "closed" state since it has been in the fixed state for a so long it is being assumed fixed, without explicit verification from the originator. If there is still a problem, in the most recent 1.5.x builds, please reopen or open another bug.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="119337" />
    <CreationDate amount="2005-12-05 19:22:00 -0500" />
    <DupId amount="" />
    <classification amount="WebTools" />
    <Product amount="WTP Java EE Tools" />
    <component amount="jst.j2ee" />
    <Version amount="1.5" />
    <rep_platform amount="PC" />
    <op_sys amount="Linux" />
    <priority amount="P2" />
    <bug_severity amount="blocker" />
    <Summery>Hang on EAR import</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>Using WTP 1.0 RC1, when I import an EAR file, the workbench hangs.  Looking at the thread dump, execution in one thread has passed through FacetedProject.modifyInternal(), which is synchronized, and is waiting to aquire an Eclipse Jobs semaphore, while another thread is in StaticWebDeployableFactory.isValidModule(), waiting on a call to FacetedProject.hasProjectFacet(), which is synchronized.
Created attachment 31158
Thread dump

Attached the thread dump for this bug.
Could you attach the ear file that causes the hang?
Created attachment 31198
Ear file for the problem

I have attached the EAR file for this bug.
Haven't been able to reproduce it so far using the provided ear file. Tried half a dozen times with the debugger and half a dozen times without a debugger. 

Note that the ear import wizard does not report progress, so it goes away for a quite a while with ui non-responsive. 
Its definitly hung.

From the thread dump, one of the threads involved is handling resource change notifications, so there is likely a timing issue involved.
This looks very similar to bug 119066.
John, I was not able to reproduce either .. well, ok, I wasn't trying with RC1, exactly. Will try that this afternoon. But, wanted to clarify, since you marked as blocker does that mean you * always * see it? 

Also, do you know if other stuff is "going on" in your workbench when you try this? Such as is another build in progress? 


On my Linux machine, I see this 100% of the time when I import an EAR file.

There is nothing else going on; I start with a clean workspace, and import an EAR file, and it hangs.
I just released the changes to implement a revised locking strategy that should avoid this deadlock.
This change is a bulk update of all _un_targeted, fixed, resolved bugs upon release of M5. This particular bug _might_ have been fixed earlier than M5. (Feel free to correct). 


This bug is being moved to the "closed" state since it has been in the fixed state for a so long it is being assumed fixed, without explicit verification from the originator. If there is still a problem, in the most recent 1.5.x builds, please reopen or open another bug.</WithStack>
    <WithOutStack>Using WTP 1.0 RC1, when I import an EAR file, the workbench hangs.  Looking at the thread dump, execution in one thread has passed through FacetedProject.modifyInternal(), which is synchronized, and is waiting to aquire an Eclipse Jobs semaphore, while another thread is in StaticWebDeployableFactory.isValidModule(), waiting on a call to FacetedProject.hasProjectFacet(), which is synchronized.
Created attachment 31158
Thread dump

Attached the thread dump for this bug.
Could you attach the ear file that causes the hang?
Created attachment 31198
Ear file for the problem

I have attached the EAR file for this bug.
Haven't been able to reproduce it so far using the provided ear file. Tried half a dozen times with the debugger and half a dozen times without a debugger. 

Note that the ear import wizard does not report progress, so it goes away for a quite a while with ui non-responsive. 
Its definitly hung.

From the thread dump, one of the threads involved is handling resource change notifications, so there is likely a timing issue involved.
This looks very similar to bug 119066.
John, I was not able to reproduce either .. well, ok, I wasn't trying with RC1, exactly. Will try that this afternoon. But, wanted to clarify, since you marked as blocker does that mean you * always * see it? 

Also, do you know if other stuff is "going on" in your workbench when you try this? Such as is another build in progress? 


On my Linux machine, I see this 100% of the time when I import an EAR file.

There is nothing else going on; I start with a clean workspace, and import an EAR file, and it hangs.
I just released the changes to implement a revised locking strategy that should avoid this deadlock.
This change is a bulk update of all _un_targeted, fixed, resolved bugs upon release of M5. This particular bug _might_ have been fixed earlier than M5. (Feel free to correct). 


This bug is being moved to the "closed" state since it has been in the fixed state for a so long it is being assumed fixed, without explicit verification from the originator. If there is still a problem, in the most recent 1.5.x builds, please reopen or open another bug.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="119338" />
    <CreationDate amount="2005-12-05 19:31:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse Foundation" />
    <Product amount="Community" />
    <component amount="Website" />
    <Version amount="unspecified" />
    <rep_platform amount="All" />
    <op_sys amount="All" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Cannot not have a $theme in _projectCommon.php</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>When I leave $theme = "Phoenix" out of _projectCommon.php, I see this error (when I run the test locally):
PHP Notice:  Undefined variable: theme in C:\...\Project Phoenix\bjorn-test.php on line 31

I would like to leave the $theme out of the _projectCommon so that we can switch the theme of the website without having to edit many files.
Does bjorn-test.php call $App-&gt;gerenatePage() ?  

http://phoenix.eclipse.org/default/template.php does not have $theme= in $_projectCommon.php (it's commented out) and it runs fine.  PHP errors and warning are enabled on phoenix.eclipse.org
Reopened because bug 118465 is reopened. Works for PHP4, not for PHP5.
Bug 118465 seems closed, fixed and verified.

eclipse.org uses PHP4.

D.
Verifying and/or closing.
Moving to Community/Website</WithStack>
    <WithOutStack>When I leave $theme = "Phoenix" out of _projectCommon.php, I see this error (when I run the test locally):
PHP Notice:  Undefined variable: theme in C:\...\Project Phoenix\bjorn-test.php on line 31

I would like to leave the $theme out of the _projectCommon so that we can switch the theme of the website without having to edit many files.
Does bjorn-test.php call $App-&gt;gerenatePage() ?  

http://phoenix.eclipse.org/default/template.php does not have $theme= in $_projectCommon.php (it's commented out) and it runs fine.  PHP errors and warning are enabled on phoenix.eclipse.org
Reopened because bug 118465 is reopened. Works for PHP4, not for PHP5.
Bug 118465 seems closed, fixed and verified.

eclipse.org uses PHP4.

D.
Verifying and/or closing.
Moving to Community/Website</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="119339" />
    <CreationDate amount="2005-12-05 19:54:00 -0500" />
    <DupId amount="" />
    <classification amount="WebTools" />
    <Product amount="WTP Source Editing" />
    <component amount="jst.jsp" />
    <Version amount="unspecified" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>loose java file in jsp.core plugin project</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>Apparently /search/JSPSearchDocument was created as a result of some mis-applied patch. 

Should delete to avoid confusion.
so deleted. 
Confirming fixed. 
This is part of a mass update to close out all stale WTP defects already verified by the reporter but awaiting closure by the assignee.  If you feel this defect was closed inappropriately, please reopen.

Thanks, John Lanuti</WithStack>
    <WithOutStack>Apparently /search/JSPSearchDocument was created as a result of some mis-applied patch. 

Should delete to avoid confusion.
so deleted. 
Confirming fixed. 
This is part of a mass update to close out all stale WTP defects already verified by the reporter but awaiting closure by the assignee.  If you feel this defect was closed inappropriately, please reopen.

Thanks, John Lanuti</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="119340" />
    <CreationDate amount="2005-12-05 20:02:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="UI" />
    <Version amount="3.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>[PopupDialog] - need constant for horizontal spacing</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="VERIFIED" />
    <resolution amount="FIXED" />
    <WithStack>PopupDialog provides a constant for vertical spacing used in the contents, but not for horizontal spacing.
added constant
PopupDialog.HORIZONTALSPACING

and updated layouts to use the value.

Fixed &gt;20051205
verified I20051213-0100, Win XP Pro through source code inspection</WithStack>
    <WithOutStack>PopupDialog provides a constant for vertical spacing used in the contents, but not for horizontal spacing.
added constant
PopupDialog.HORIZONTALSPACING

and updated layouts to use the value.

Fixed &gt;20051205
verified I20051213-0100, Win XP Pro through source code inspection</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="119341" />
    <CreationDate amount="2005-12-05 20:25:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse Foundation" />
    <Product amount="Community" />
    <component amount="IP Log Tool" />
    <Version amount="unspecified" />
    <rep_platform amount="All" />
    <op_sys amount="All" />
    <priority amount="P4" />
    <bug_severity amount="enhancement" />
    <Summery>Tool to generate the transitive closure of IP logs for projects</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="6">
        <Lines>
          <Line>1. Using the builds.xml official latest releases RSS feed, we can generate a mapping of features -&gt; projects (the project is the one that publishes the RSS feed; the features are the feature ids in that release).</Line>
          <Line>2. Using the feature files, we can build a mapping of features -&gt; prereq features.</Line>
          <Line>3. Using (2) we can create the mapping of features -&gt; closure of prereq features.</Line>
          <Line>4. Using (1) we can map (3) to be project -&gt; closure of prereq projects.</Line>
          <Line>5. Using (5) we can merge all the IP logs (found via project-info.xmls) to form project -&gt; merged IP log.</Line>
          <Line>Moving to IP Log Tool</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="NEW" />
    <resolution amount="" />
    <WithStack>Please automate taking the transitive closure over IP logs for a project and its upstream prerequisites in order to generate the combined IP information
Here's a potential algorithm:
1. Using the builds.xml official latest releases RSS feed, we can generate a mapping of features -&gt; projects (the project is the one that publishes the RSS feed; the features are the feature ids in that release).
2. Using the feature files, we can build a mapping of features -&gt; prereq features.
3. Using (2) we can create the mapping of features -&gt; closure of prereq features.
4. Using (1) we can map (3) to be project -&gt; closure of prereq projects.
5. Using (5) we can merge all the IP logs (found via project-info.xmls) to form project -&gt; merged IP log.
Moving to IP Log Tool</WithStack>
    <WithOutStack>Please automate taking the transitive closure over IP logs for a project and its upstream prerequisites in order to generate the combined IP information
Here's a potential algorithm:
1. Using the builds.xml official latest releases RSS feed, we can generate a mapping of features -&gt; projects (the project is the one that publishes the RSS feed; the features are the feature ids in that release).
2. Using the feature files, we can build a mapping of features -&gt; prereq features.
3. Using (2) we can create the mapping of features -&gt; closure of prereq features.
4. Using (1) we can map (3) to be project -&gt; closure of prereq projects.
5. Using (5) we can merge all the IP logs (found via project-info.xmls) to form project -&gt; merged IP log.
Moving to IP Log Tool</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="119342" />
    <CreationDate amount="2005-12-05 20:47:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse Foundation" />
    <Product amount="Community" />
    <component amount="Website" />
    <Version amount="unspecified" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>broken links</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>I have an eclipse corner article (http://www.eclipse.org/articles/Article-Plugging-into-SourceForge/sourceforge.html) which contains a link to a page that has been moved.

Please add a html redirect so the original link exists (but redirects to the new one) so that existing links (such as in my  article) and other user's favorites/links ar not left as obsolete/404

thanks

https://bugs.eclipse.org/bugs/show_bug.cgi?id=94940 
Product/Component: Community / Articles


dwight@wwwalker.com.au changed:

           What    |Removed                     |Added
----------------------------------------------------------------------------
                 CC|                            |dwight@wwwalker.com.au




------- Comment #27 from dwight@wwwalker.com.au  2005-12-03 04:21 -------
The link http://www.eclipse.org/community/osplugins.html is dead. May be it
should be: http://www.eclipse.org/community/pluginsites.php.




------- You are receiving this mail because: -------
Fixed</WithStack>
    <WithOutStack>I have an eclipse corner article (http://www.eclipse.org/articles/Article-Plugging-into-SourceForge/sourceforge.html) which contains a link to a page that has been moved.

Please add a html redirect so the original link exists (but redirects to the new one) so that existing links (such as in my  article) and other user's favorites/links ar not left as obsolete/404

thanks

https://bugs.eclipse.org/bugs/show_bug.cgi?id=94940 
Product/Component: Community / Articles


dwight@wwwalker.com.au changed:

           What    |Removed                     |Added
----------------------------------------------------------------------------
                 CC|                            |dwight@wwwalker.com.au




------- Comment #27 from dwight@wwwalker.com.au  2005-12-03 04:21 -------
The link http://www.eclipse.org/community/osplugins.html is dead. May be it
should be: http://www.eclipse.org/community/pluginsites.php.




------- You are receiving this mail because: -------
Fixed</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="119343" />
    <CreationDate amount="2005-12-05 20:57:00 -0500" />
    <DupId amount="" />
    <classification amount="BIRT" />
    <Product amount="BIRT" />
    <component amount="Report Viewer" />
    <Version amount="2.0.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="blocker" />
    <Summery>Smoke: Report design can't be edited.</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="2">
      <Enumeration lines="8">
        <Lines>
          <Line>1. Create a report.</Line>
          <Line>2. Preview and then edit it.</Line>
          <Line>3. Preview again.</Line>
          <Line>4. It is not modified.</Line>
          <Line>I am not able to re-produce it. Please verify. Also make sire those libs are copied to the right place.</Line>
          <Line>Assigned to Build.</Line>
          <Line>What does those libs point to? If means 3rd party libs and js, they are all in correct folder.</Line>
          <Line>I experience the same issue, the original description is slightly innacurate, the report design can be modified, but the preview keeps using the original design.</Line>
        </Lines>
      </Enumeration>
      <Enumeration lines="5">
        <Lines>
          <Line>- create a new report</Line>
          <Line>- add a dataset/datasource/chart and preview it: you see the chart</Line>
          <Line>- go back to design mode and delete the chart</Line>
          <Line>- drop the dataset directly as a table on the report design.</Line>
          <Line>- preview the report: you still see the chart and no table.</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>Description: Report design can't be modified.

Steps to reproduce:
1. Create a report.
2. Preview and then edit it.
3. Preview again.
4. It is not modified.
I am not able to re-produce it. Please verify. Also make sire those libs are copied to the right place.
Assigned to Build.
What does those libs point to? If means 3rd party libs and js, they are all in correct folder.
I experience the same issue, the original description is slightly innacurate, the report design can be modified, but the preview keeps using the original design.

Steps:
- create a new report
- add a dataset/datasource/chart and preview it: you see the chart
- go back to design mode and delete the chart
- drop the dataset directly as a table on the report design.
- preview the report: you still see the chart and no table.

Note that the time shown in preview is changing, so the report is generated each time.  Closing and reopening the report design doesn't help, the preview is still stuck on the original design which must have been cached somewhere.

I did install the jar/js as specified.
This probably is caused by some changes in the designer to handle the design update status. When update the report design and switch the current focus, seems report design is updated automatically. (save button is enabled and then disabled) If re-open the design, it is same as before.

The code path for preview inside the editor has not been changed.

You will see the same issue if preview using toolbar button, That is caused by a previous generated report document (you won't see any popup parameter dialog if report doc exists.) and it will be fixed later after viewer/designer integration.
This bug has no relationship with that update state changes of designer.
That changes happens yesterday, but this bug report at Dec 05.

After applied the changes to 119542, this issue is not reproducable. Please verify.
not reproducible with latest source of 12/7.
Verified in build 20051208.
I found this problem again in build 20051209.
-----Original Message-----
From: Wei Chen 
Sent: 08 December 2005 19:10
To: Jun Zhai
Subject: RE: [Bug 119343] Smoke: Report design can't be edited.


If I want to remove the rptdocument, I need to close Eclipse first. After reopen it, the new modification takes effect. The parameter dialog pops up.
But If I didn't reopen Eclipse, after editing report, preview in html, no parameter dialog pops up.

Best Regards,
Viola Chen
Actuate Corportation-Shanghai R&amp;D Center
Phone: (86)21-58826388
Fax: (86)21-58826002
E-mail: wchen@actuate.com
 

-----Original Message-----
From: Jun Zhai 
Sent: Friday, December 09, 2005 11:04 AM
To: Wei Chen
Subject: RE: [Bug 119343] Smoke: Report design can't be edited.

The 2nd time you lauch the viewer, after you remove the rptdocument, does parameter dialog popup?

-----Original Message-----
From: Wei Chen 
Sent: 08 December 2005 18:53
To: Jun Zhai
Subject: RE: [Bug 119343] Smoke: Report design can't be edited.


I deleted the .rptdocument file, but it still doesn't work.

Best Regards,
Viola Chen
Actuate Corportation-Shanghai R&amp;D Center
Phone: (86)21-58826388
Fax: (86)21-58826002
E-mail: wchen@actuate.com
 

-----Original Message-----
From: Jun Zhai 
Sent: Friday, December 09, 2005 10:44 AM
To: Wei Chen
Subject: RE: [Bug 119343] Smoke: Report design can't be edited.

so you use the viewer in a seperate browser not inside editor? If so the issue you see is caused by 120019. You can temporarily manually remove the generated report doc .rptdocument file each time you try to viewer the report.

Please verify whether this is the case.

Jun

-----Original Message-----
From: Wei Chen 
Sent: 08 December 2005 18:41
To: Jun Zhai
Subject: RE: [Bug 119343] Smoke: Report design can't be edited.


The first time I preview the report in html viewer, it works properly. Then I change back to layout editor and edit the report, then preview in html viewer again. It still generated the original result without any modification.

Best Regards,
Viola Chen
Actuate Corportation-Shanghai R&amp;D Center
Phone: (86)21-58826388
Fax: (86)21-58826002
E-mail: wchen@actuate.com
 
-----Original Message-----
From: Jun Zhai 
Sent: Friday, December 09, 2005 10:38 AM
To: Wei Chen
Subject: RE: [Bug 119343] Smoke: Report design can't be edited.

wei,

Please provide some detailed info.

Jun

-----Original Message-----
From: Jun Zhai 
Sent: 08 December 2005 18:07
To: Wei Chen
Subject: RE: [Bug 119343] Smoke: Report design can't be edited.


does it happen inside editor or seperate viewer browser?

*** Bug 120067 has been marked as a duplicate of this bug. ***
Adding solution based on Bugzilla Bug 120019 Can not remove a report document after viewing it.
Verified in build 20051213.</WithStack>
    <WithOutStack>Description: Report design can't be modified.

Steps to reproduce:
1. Create a report.
2. Preview and then edit it.
3. Preview again.
4. It is not modified.
I am not able to re-produce it. Please verify. Also make sire those libs are copied to the right place.
Assigned to Build.
What does those libs point to? If means 3rd party libs and js, they are all in correct folder.
I experience the same issue, the original description is slightly innacurate, the report design can be modified, but the preview keeps using the original design.

Steps:
- create a new report
- add a dataset/datasource/chart and preview it: you see the chart
- go back to design mode and delete the chart
- drop the dataset directly as a table on the report design.
- preview the report: you still see the chart and no table.

Note that the time shown in preview is changing, so the report is generated each time.  Closing and reopening the report design doesn't help, the preview is still stuck on the original design which must have been cached somewhere.

I did install the jar/js as specified.
This probably is caused by some changes in the designer to handle the design update status. When update the report design and switch the current focus, seems report design is updated automatically. (save button is enabled and then disabled) If re-open the design, it is same as before.

The code path for preview inside the editor has not been changed.

You will see the same issue if preview using toolbar button, That is caused by a previous generated report document (you won't see any popup parameter dialog if report doc exists.) and it will be fixed later after viewer/designer integration.
This bug has no relationship with that update state changes of designer.
That changes happens yesterday, but this bug report at Dec 05.

After applied the changes to 119542, this issue is not reproducable. Please verify.
not reproducible with latest source of 12/7.
Verified in build 20051208.
I found this problem again in build 20051209.
-----Original Message-----
From: Wei Chen 
Sent: 08 December 2005 19:10
To: Jun Zhai
Subject: RE: [Bug 119343] Smoke: Report design can't be edited.


If I want to remove the rptdocument, I need to close Eclipse first. After reopen it, the new modification takes effect. The parameter dialog pops up.
But If I didn't reopen Eclipse, after editing report, preview in html, no parameter dialog pops up.

Best Regards,
Viola Chen
Actuate Corportation-Shanghai R&amp;D Center
Phone: (86)21-58826388
Fax: (86)21-58826002
E-mail: wchen@actuate.com
 

-----Original Message-----
From: Jun Zhai 
Sent: Friday, December 09, 2005 11:04 AM
To: Wei Chen
Subject: RE: [Bug 119343] Smoke: Report design can't be edited.

The 2nd time you lauch the viewer, after you remove the rptdocument, does parameter dialog popup?

-----Original Message-----
From: Wei Chen 
Sent: 08 December 2005 18:53
To: Jun Zhai
Subject: RE: [Bug 119343] Smoke: Report design can't be edited.


I deleted the .rptdocument file, but it still doesn't work.

Best Regards,
Viola Chen
Actuate Corportation-Shanghai R&amp;D Center
Phone: (86)21-58826388
Fax: (86)21-58826002
E-mail: wchen@actuate.com
 

-----Original Message-----
From: Jun Zhai 
Sent: Friday, December 09, 2005 10:44 AM
To: Wei Chen
Subject: RE: [Bug 119343] Smoke: Report design can't be edited.

so you use the viewer in a seperate browser not inside editor? If so the issue you see is caused by 120019. You can temporarily manually remove the generated report doc .rptdocument file each time you try to viewer the report.

Please verify whether this is the case.

Jun

-----Original Message-----
From: Wei Chen 
Sent: 08 December 2005 18:41
To: Jun Zhai
Subject: RE: [Bug 119343] Smoke: Report design can't be edited.


The first time I preview the report in html viewer, it works properly. Then I change back to layout editor and edit the report, then preview in html viewer again. It still generated the original result without any modification.

Best Regards,
Viola Chen
Actuate Corportation-Shanghai R&amp;D Center
Phone: (86)21-58826388
Fax: (86)21-58826002
E-mail: wchen@actuate.com
 
-----Original Message-----
From: Jun Zhai 
Sent: Friday, December 09, 2005 10:38 AM
To: Wei Chen
Subject: RE: [Bug 119343] Smoke: Report design can't be edited.

wei,

Please provide some detailed info.

Jun

-----Original Message-----
From: Jun Zhai 
Sent: 08 December 2005 18:07
To: Wei Chen
Subject: RE: [Bug 119343] Smoke: Report design can't be edited.


does it happen inside editor or seperate viewer browser?

*** Bug 120067 has been marked as a duplicate of this bug. ***
Adding solution based on Bugzilla Bug 120019 Can not remove a report document after viewing it.
Verified in build 20051213.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="119344" />
    <CreationDate amount="2005-12-05 21:26:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="User Assistance" />
    <Version amount="3.0.1" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>[Webapp] Accessibility problem on Eclipse Help homepage</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="1">
      <source_code type="multicomment">
        <location start="279" end="340" />
        <code>/* following font size declarations should be OK for DBCS */</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="0" />
    <bug_status amount="ASSIGNED" />
    <resolution amount="" />
    <WithStack>Changing the font size in Internet Explorer doesn't change the size of the font on the Eclipse home page(eclipse/plugins/org.eclipse.help.base_3.0.1/doc/home_page.html). 

We tracked down the problem to the following line of the book.css stylesheet that the home_page.html uses:

/* following font size declarations should be OK for DBCS */
body, h1, h2, h3, h4, h5, h6, p, table, td, caption, th, ul, ol, dl, li, dd, dt {font-size: 10pt; }

It looks like this locks the font at 10pt, and doesn't allow it to be scaled.

We was able to fix it myself by maing these changes:

-Set the font size to 1em instead of 10pt.  Sizes specified in ems can be resized in IE.
	body, h1, h2, h3, h4, h5, h6, p, table, td, caption, th, ul, ol, dl, li, dd, dt {font-size: 1em; }

-1 em is too big as a default size, so I scaled down the body font size to 80%.
	body	     { background: #FFFFFF; font-size:80%;}

I don't know if this was the best way to fix it, but it did seem to work.
Targeting for fix in Eclipse 3.3.</WithStack>
    <WithOutStack>Changing the font size in Internet Explorer doesn't change the size of the font on the Eclipse home page(eclipse/plugins/org.eclipse.help.base_3.0.1/doc/home_page.html). 

We tracked down the problem to the following line of the book.css stylesheet that the home_page.html uses:

/* following font size declarations should be OK for DBCS */
body, h1, h2, h3, h4, h5, h6, p, table, td, caption, th, ul, ol, dl, li, dd, dt {font-size: 10pt; }

It looks like this locks the font at 10pt, and doesn't allow it to be scaled.

We was able to fix it myself by maing these changes:

-Set the font size to 1em instead of 10pt.  Sizes specified in ems can be resized in IE.
	body, h1, h2, h3, h4, h5, h6, p, table, td, caption, th, ul, ol, dl, li, dd, dt {font-size: 1em; }

-1 em is too big as a default size, so I scaled down the body font size to 80%.
	body	     { background: #FFFFFF; font-size:80%;}

I don't know if this was the best way to fix it, but it did seem to work.
Targeting for fix in Eclipse 3.3.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="119345" />
    <CreationDate amount="2005-12-05 21:31:00 -0500" />
    <DupId amount="2148" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="UI" />
    <Version amount="3.1.1" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="enhancement" />
    <Summery>[IDE] Double clicking on a Closed Project should open it</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="DUPLICATE" />
    <WithStack>Its a quite simple and usefull suggestion:

Double clicking on a Closed Project should open it...

if the project depends on other projects which are closed ask user if he wants Eclipse to open them automaticly.

Thats it
Automatically open other products is bug 113178
This is a dup of bug 2148


*** This bug has been marked as a duplicate of 2148 ***</WithStack>
    <WithOutStack>Its a quite simple and usefull suggestion:

Double clicking on a Closed Project should open it...

if the project depends on other projects which are closed ask user if he wants Eclipse to open them automaticly.

Thats it
Automatically open other products is bug 113178
This is a dup of bug 2148


*** This bug has been marked as a duplicate of 2148 ***</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="119346" />
    <CreationDate amount="2005-12-05 22:02:00 -0500" />
    <DupId amount="118634" />
    <classification amount="WebTools" />
    <Product amount="WTP Java EE Tools" />
    <component amount="jst.j2ee" />
    <Version amount="1.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>WebAppContainerInitializer#initialize kicks off builder</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="DUPLICATE" />
    <WithStack>Whenver the workbench is opened, the installed builders are going
to be started. This looks because WebAppContainerInitializer#initialize
installs a job, which calls WebAppContainer(path, jproj).install(),
and afger this api is called, somehoe Build manager believes some
resources are changed so that he starts builders.

This affects the start up performance, so needs to be addressed as
high priority work item.

.
Oops. Meant to dupe it, but clicked the wrong button. Could someone assign it back to me.


*** This bug has been marked as a duplicate of 118634 ***
.</WithStack>
    <WithOutStack>Whenver the workbench is opened, the installed builders are going
to be started. This looks because WebAppContainerInitializer#initialize
installs a job, which calls WebAppContainer(path, jproj).install(),
and afger this api is called, somehoe Build manager believes some
resources are changed so that he starts builders.

This affects the start up performance, so needs to be addressed as
high priority work item.

.
Oops. Meant to dupe it, but clicked the wrong button. Could someone assign it back to me.


*** This bug has been marked as a duplicate of 118634 ***
.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="119347" />
    <CreationDate amount="2005-12-05 22:07:00 -0500" />
    <DupId amount="" />
    <classification amount="BIRT" />
    <Product amount="BIRT" />
    <component amount="Data" />
    <Version amount="2.0.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>[In Eclipse3.0.1]HTTP status 500 display when preview xml data set</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="3">
        <Lines>
          <Line>1. create a xml data source and data set</Line>
          <Line>2. drag data set to layout view</Line>
          <Line>3. preivew</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="CLOSED" />
    <resolution amount="INVALID" />
    <WithStack>description:
HTTP status 500 display when preview xml data set

steps to reproduce:
1. create a xml data source and data set
2. drag data set to layout view
3. preivew

actual result:
"HTTP Status 500 - 

--------------------------------------------------------------------------------

type Exception report

message 

description The server encountered an internal error () that prevented it from
fulfilling this request."error display when preview
The bug is canceled as per the request of the submitter.
When reload the eclipse, the bug disappeared</WithStack>
    <WithOutStack>description:
HTTP status 500 display when preview xml data set

steps to reproduce:
1. create a xml data source and data set
2. drag data set to layout view
3. preivew

actual result:
"HTTP Status 500 - 

--------------------------------------------------------------------------------

type Exception report

message 

description The server encountered an internal error () that prevented it from
fulfilling this request."error display when preview
The bug is canceled as per the request of the submitter.
When reload the eclipse, the bug disappeared</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="119348" />
    <CreationDate amount="2005-12-05 22:08:00 -0500" />
    <DupId amount="" />
    <classification amount="BIRT" />
    <Product amount="BIRT" />
    <component amount="Data Access" />
    <Version amount="2.0.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows 2000" />
    <priority amount="P3" />
    <bug_severity amount="enhancement" />
    <Summery>Update BIRT ODA Plug-in Version in BIRT 2.0</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>In preparation for the BIRT 2.0 release, the BIRT ODA (org.eclipse.birt.data.oda) plugin version should be updated from version 2.0.1 (used in BIRT 1.0) to version 2.0.2 for BIRT 2.0.
There are no real changes to the BIRT ODA project since 2.0.1, except that the BIRT ODA interfaces and implementation have all been marked as deprecated, due to the migration of ODA framework to the Eclipse DataTools Platform (DTP) project.
The BIRT ODA plugin version in BIRT 2.0 will be 
org.eclipse.birt.data.oda_2.0.2
Resolved.  
Updated BIRT ODA plugin version name to org.eclipse.birt.data.oda_2.0.2
Verified in the build 20051220</WithStack>
    <WithOutStack>In preparation for the BIRT 2.0 release, the BIRT ODA (org.eclipse.birt.data.oda) plugin version should be updated from version 2.0.1 (used in BIRT 1.0) to version 2.0.2 for BIRT 2.0.
There are no real changes to the BIRT ODA project since 2.0.1, except that the BIRT ODA interfaces and implementation have all been marked as deprecated, due to the migration of ODA framework to the Eclipse DataTools Platform (DTP) project.
The BIRT ODA plugin version in BIRT 2.0 will be 
org.eclipse.birt.data.oda_2.0.2
Resolved.  
Updated BIRT ODA plugin version name to org.eclipse.birt.data.oda_2.0.2
Verified in the build 20051220</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="119349" />
    <CreationDate amount="2005-12-05 22:22:00 -0500" />
    <DupId amount="" />
    <classification amount="BIRT" />
    <Product amount="BIRT" />
    <component amount="Report Designer" />
    <Version amount="2.0.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="major" />
    <Summery>Smoke Test: Library explorer doesn't work properly.</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="4">
        <Lines>
          <Line>1. Create a report.</Line>
          <Line>2. Open library explorer. It shows "libraries are not available".</Line>
          <Line>Change plugin.xml file to user new package name of AdapterFactory extension point.</Line>
          <Line>Verified in build 20051207.</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>Description: Library explorer doesn't work properly.

Steps to reproduce:
1. Create a report.
2. Open library explorer. It shows "libraries are not available".
Change plugin.xml file to user new package name of AdapterFactory extension point.
Verified in build 20051207.</WithStack>
    <WithOutStack>Description: Library explorer doesn't work properly.

Steps to reproduce:
1. Create a report.
2. Open library explorer. It shows "libraries are not available".
Change plugin.xml file to user new package name of AdapterFactory extension point.
Verified in build 20051207.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="119350" />
    <CreationDate amount="2005-12-05 22:46:00 -0500" />
    <DupId amount="" />
    <classification amount="BIRT" />
    <Product amount="BIRT" />
    <component amount="Report Viewer" />
    <Version amount="2.0.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Error happened when a chart is previewed in html viewer.</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="5">
        <Lines>
          <Line>1. Create a chart and preview in html viewer.</Line>
          <Line>2. Error happened.</Line>
          <Line>Please provide detailed error msg.</Line>
          <Line>Engine's issue.</Line>
          <Line>Verified</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="CLOSED" />
    <resolution amount="INVALID" />
    <WithStack>Description: Error happened when a chart is previewed in html viewer.

Steps to reproduce:
1. Create a chart and preview in html viewer.
2. Error happened.
Please provide detailed error msg.
Engine's issue. 
Verified</WithStack>
    <WithOutStack>Description: Error happened when a chart is previewed in html viewer.

Steps to reproduce:
1. Create a chart and preview in html viewer.
2. Error happened.
Please provide detailed error msg.
Engine's issue. 
Verified</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="119351" />
    <CreationDate amount="2005-12-05 23:01:00 -0500" />
    <DupId amount="" />
    <classification amount="DataTools" />
    <Product amount="Data Tools" />
    <component amount="Connectivity" />
    <Version amount="unspecified" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows 2000" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Update ODA internal library version</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>The ODA project uses an internal birt-core library that provides Platform registry implementation in a server deployment environment.
The internal library should be updated to the latest version from Eclipse BIRT 2.0 M3 release.
Resolved.
Obsolete.  Internal library no longer used, see Bugzilla 131450.</WithStack>
    <WithOutStack>The ODA project uses an internal birt-core library that provides Platform registry implementation in a server deployment environment.
The internal library should be updated to the latest version from Eclipse BIRT 2.0 M3 release.
Resolved.
Obsolete.  Internal library no longer used, see Bugzilla 131450.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="119352" />
    <CreationDate amount="2005-12-05 23:04:00 -0500" />
    <DupId amount="" />
    <classification amount="Tools" />
    <Product amount="AspectJ" />
    <component amount="Compiler" />
    <Version amount="DEVELOPMENT" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>AjType.getSupertype breaks for null</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="3">
      <source_code type="functiondef">
        <location start="114" end="261" />
        <code>public void testObjectSupertype() {
		AjType&lt;?&gt; objectSuper = AjTypeSystem.getAjType(Object.class).getSupertype();
		assertNull(objectSuper);		
	}</code>
      </source_code>
      <source_code type="functiondef">
        <location start="263" end="431" />
        <code>public void testInterfaceSupertype() {
		AjType&lt;?&gt; serializableSuper = AjTypeSystem.getAjType(Serializable.class).getSupertype();
		assertNull(serializableSuper);		
	}</code>
      </source_code>
      <source_code type="functiondef">
        <location start="434" end="617" />
        <code>public AjType&lt;? super T&gt; getSupertype() {
		Class&lt;? super T&gt; superclass = clazz.getSuperclass();
		return superclass==null ? null : (AjType&lt;? super T&gt;) new AjTypeImpl(superclass);
	}</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>I ran into this while using reflection proxies with LTW... See attached patches for these test cases and my fix:

	public void testObjectSupertype() {
		AjType&lt;?&gt; objectSuper = AjTypeSystem.getAjType(Object.class).getSupertype();
		assertNull(objectSuper);		
	}

	public void testInterfaceSupertype() {
		AjType&lt;?&gt; serializableSuper = AjTypeSystem.getAjType(Serializable.class).getSupertype();
		assertNull(serializableSuper);		
	}
	
	public AjType&lt;? super T&gt; getSupertype() {
		Class&lt;? super T&gt; superclass = clazz.getSuperclass();
		return superclass==null ? null : (AjType&lt;? super T&gt;) new AjTypeImpl(superclass);
	}
Created attachment 31169
Module patch for aspectj5rt
I'll let Adrian take a look.
patch applied, thanks :)

waiting on build...
fix available.</WithStack>
    <WithOutStack>I ran into this while using reflection proxies with LTW... See attached patches for these test cases and my fix:

	public void testObjectSupertype() {
		AjType&lt;?&gt; objectSuper = AjTypeSystem.getAjType(Object.class).getSupertype();
		assertNull(objectSuper);		
	}

	public void testInterfaceSupertype() {
		AjType&lt;?&gt; serializableSuper = AjTypeSystem.getAjType(Serializable.class).getSupertype();
		assertNull(serializableSuper);		
	}
	
	public AjType&lt;? super T&gt; getSupertype() {
		Class&lt;? super T&gt; superclass = clazz.getSuperclass();
		return superclass==null ? null : (AjType&lt;? super T&gt;) new AjTypeImpl(superclass);
	}
Created attachment 31169
Module patch for aspectj5rt
I'll let Adrian take a look.
patch applied, thanks :)

waiting on build...
fix available.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="119353" />
    <CreationDate amount="2005-12-05 23:11:00 -0500" />
    <DupId amount="" />
    <classification amount="Tools" />
    <Product amount="AspectJ" />
    <component amount="Compiler" />
    <Version amount="DEVELOPMENT" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Inconsistent Implementations of ReferenceType.getDeclaredMethods()</Summery>
    <Patches amount="1">
      <Patch>
        <index>ReflectionBasedReferenceTypeDelegateTest.java</index>
        <original_file>ReflectionBasedReferenceTypeDelegateTest.java</original_file>
        <modified_file>ReflectionBasedReferenceTypeDelegateTest.java</modified_file>
        <Hunks>
          <hunk>assertTrue("Superclass for Map generic type should be Object but was "+rt2,rt2.equals(UnresolvedType.OBJECT));         &#xD;
&#xD;
     }&#xD;
&#xD;
     &#xD;
&#xD;
+    public void testCompareSubclassDelegates() {&#xD;
&#xD;
+        world.setBehaveInJava5Way(true);&#xD;
&#xD;
+        &#xD;
&#xD;
+        BcelWorld bcelWorld = new BcelWorld();&#xD;
&#xD;
+        bcelWorld.setBehaveInJava5Way(true);&#xD;
&#xD;
+        UnresolvedType javaUtilHashMap = UnresolvedType.forName("java.util.HashMap");&#xD;
&#xD;
+        ReferenceType rawType = (ReferenceType)bcelWorld.resolve(javaUtilHashMap );&#xD;
&#xD;
+        &#xD;
&#xD;
+        ReferenceType rawReflectType = (ReferenceType)world.resolve(javaUtilHashMap );&#xD;
&#xD;
+        assertEquals(rawType.getDelegate().getDeclaredMethods().length, rawReflectType.getDelegate().getDeclaredMethods().length);&#xD;
&#xD;
+    }&#xD;
&#xD;
+    &#xD;
&#xD;
 	// todo: array of int	&#xD;
&#xD;
 &#xD;
&#xD;
 	protected void setUp() throws Exception {</hunk>
        </Hunks>
      </Patch>
    </Patches>
    <Stacktraces amount="1">
      <Stacktrace timestamp="1437330614215">
        <Exception>junit.framework.AssertionFailedError</Exception>
        <Reason>expected:&lt;41&gt; but was:&lt;29&gt;</Reason>
        <Frames>
          <Frame depth="0">junit.framework.Assert.fail(Assert.java:47)</Frame>
          <Frame depth="1">junit.framework.Assert.failNotEquals(Assert.java:282)</Frame>
          <Frame depth="2">junit.framework.Assert.assertEquals(Assert.java:64)</Frame>
          <Frame depth="3">junit.framework.Assert.assertEquals(Assert.java:201)</Frame>
          <Frame depth="4">junit.framework.Assert.assertEquals(Assert.java:207)</Frame>
          <Frame depth="5">org.aspectj.weaver.reflect.ReflectionBasedReferenceTypeDelegateTest.testCompareSubclassDelegates(ReflectionBasedReferenceTypeDelegateTest.java:250)</Frame>
          <Frame depth="6">java.lang.reflect.Method.invoke(Native Method)</Frame>
          <Frame depth="7">junit.framework.TestCase.runTest(TestCase.java:154)</Frame>
          <Frame depth="8">junit.framework.TestCase.runBare(TestCase.java:127)</Frame>
          <Frame depth="9">junit.framework.TestResult$1.protect(TestResult.java:106)</Frame>
          <Frame depth="10">junit.framework.TestResult.runProtected(TestResult.java:124)</Frame>
          <Frame depth="11">junit.framework.TestResult.run(TestResult.java:109)</Frame>
          <Frame depth="12">junit.framework.TestCase.run(TestCase.java:118)</Frame>
          <Frame depth="13">junit.framework.TestSuite.runTest(TestSuite.java:208)</Frame>
          <Frame depth="14">junit.framework.TestSuite.run(TestSuite.java:203)</Frame>
          <Frame depth="15">org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:478)</Frame>
          <Frame depth="16">org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:344)</Frame>
          <Frame depth="17">org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:196)</Frame>
        </Frames>
      </Stacktrace>
    </Stacktraces>
    <SourceCodeRegions amount="3">
      <source_code type="functiondef">
        <location start="1958" end="2562" />
        <code>+    public void testCompareSubclassDelegates() {
+        world.setBehaveInJava5Way(true);
+        
+        BcelWorld bcelWorld = new BcelWorld();
+        bcelWorld.setBehaveInJava5Way(true);
+        UnresolvedType javaUtilHashMap = UnresolvedType.forName("java.util.HashMap");
+        ReferenceType rawType = (ReferenceType)bcelWorld.resolve(javaUtilHashMap );
+        
+        ReferenceType rawReflectType = (ReferenceType)world.resolve(javaUtilHashMap );
+        assertEquals(rawType.getDelegate().getDeclaredMethods().length, rawReflectType.getDelegate().getDeclaredMethods().length);
+    }</code>
      </source_code>
      <source_code type="singlecomment">
        <location start="2569" end="2594" />
        <code>// todo: array of int</code>
      </source_code>
      <source_code type="functiondef">
        <location start="2596" end="2639" />
        <code>protected void setUp() throws Exception {</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>I am running into a problem in load-time weaving when I use reflection delegates because the weaver is generating an incorrect bridge method when I perform an inter-type declaration on Struts.ActionServlet for the init method. On investigation, the BCEL world is recognizing this as an overriding method, because its version of getDeclaredMethods is returning the declared methods for all ancestor superclasses. However, the reflection world is returning only the declared methods for this one class. It therefore appears that the weaver expects getDeclaredMethods to return all of them (making the name quite misleading). I think previously the method was being implemented inconsistently between 1.5 reflection and &lt;1.5 reflection delegates. But it looks like it needs to be handled consistently to include all superclass methods.

However, I dont know what other places (e.g., the MAP) are really expecting getDeclaredMethods and its siblings to behave like Java reflection's version

I started work on adding a getAllDeclaredMethods method to ReferenceType and delegates, as an alternative to provide the weaver the ability to check method overriding as in this case, but it's a little bit involved and I wanted to flag the issue first.

Here's a test that fails and illustrates the issue:
Index: ReflectionBasedReferenceTypeDelegateTest.java
===================================================================
RCS file: /home/technology/org.aspectj/modules/weaver/testsrc/org/aspectj/weaver/reflect/ReflectionBasedReferenceTypeDelegateTest.java,v
retrieving revision 1.5
diff -u -r1.5 ReflectionBasedReferenceTypeDelegateTest.java
--- ReflectionBasedReferenceTypeDelegateTest.java	28 Nov 2005 17:44:40 -0000	1.5
+++ ReflectionBasedReferenceTypeDelegateTest.java	6 Dec 2005 04:11:41 -0000
@@ -238,6 +238,18 @@
         assertTrue("Superclass for Map generic type should be Object but was "+rt2,rt2.equals(UnresolvedType.OBJECT));         
     }
     
+    public void testCompareSubclassDelegates() {
+        world.setBehaveInJava5Way(true);
+        
+        BcelWorld bcelWorld = new BcelWorld();
+        bcelWorld.setBehaveInJava5Way(true);
+        UnresolvedType javaUtilHashMap = UnresolvedType.forName("java.util.HashMap");
+        ReferenceType rawType = (ReferenceType)bcelWorld.resolve(javaUtilHashMap );
+        
+        ReferenceType rawReflectType = (ReferenceType)world.resolve(javaUtilHashMap );
+        assertEquals(rawType.getDelegate().getDeclaredMethods().length, rawReflectType.getDelegate().getDeclaredMethods().length);
+    }
+    
 	// todo: array of int	
 
 	protected void setUp() throws Exception {


This results in:
junit.framework.AssertionFailedError: expected:&lt;41&gt; but was:&lt;29&gt;
	at junit.framework.Assert.fail(Assert.java:47)
	at junit.framework.Assert.failNotEquals(Assert.java:282)
	at junit.framework.Assert.assertEquals(Assert.java:64)
	at junit.framework.Assert.assertEquals(Assert.java:201)
	at junit.framework.Assert.assertEquals(Assert.java:207)
	at org.aspectj.weaver.reflect.ReflectionBasedReferenceTypeDelegateTest.testCompareSubclassDelegates(ReflectionBasedReferenceTypeDelegateTest.java:250)
	at java.lang.reflect.Method.invoke(Native Method)
	at junit.framework.TestCase.runTest(TestCase.java:154)
	at junit.framework.TestCase.runBare(TestCase.java:127)
	at junit.framework.TestResult$1.protect(TestResult.java:106)
	at junit.framework.TestResult.runProtected(TestResult.java:124)
	at junit.framework.TestResult.run(TestResult.java:109)
	at junit.framework.TestCase.run(TestCase.java:118)
	at junit.framework.TestSuite.runTest(TestSuite.java:208)
	at junit.framework.TestSuite.run(TestSuite.java:203)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:478)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:344)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:196)
Two small clarifications: the incorrect bridge method results in a VerifyError. If I use only BCEL delegates then the system behaves properly.
I modified the test program to output what the differences are between the two sets.  Interesting results:

Couldn't find java.util.HashMap java.util.HashMap.init(int) in the bcel set
Couldn't find java.util.HashMap java.util.HashMap.init() in the bcel set
Couldn't find java.util.HashMap java.util.HashMap.init(java.util.Map) in the bcel set
Couldn't find java.util.HashMap java.util.HashMap.init(int, float) in the bcel set
Couldn't find void java.util.HashMap.&lt;init&gt;(int, float) in the reflection set
Couldn't find void java.util.HashMap.&lt;init&gt;(int) in the reflection set
Couldn't find void java.util.HashMap.&lt;init&gt;() in the reflection set
Couldn't find void java.util.HashMap.&lt;init&gt;(java.util.Map) in the reflection set
Couldn't find void java.util.HashMap.&lt;clinit&gt;() in the reflection set

I don't like the disagreement between the 'init' and '&lt;init&gt;' strings.  I suspect that is the root of this problem.  I'm not sure about the &lt;clinit&gt; - but at least we know that can't have an impact on bridge methods ;)

I'm not sure how this quite ties up with Rons description that getDeclaredMethods() is differing in each case as the initial fix here just seems to be transforming the reflection based entries for ctors to indicate &lt;init&gt;...
Created attachment 31379
Patch to the delegates (1.5 and &lt; 1.5)

Ron ... this zip contains two patches, one for the weaver project, one for weaver5 - can you try it out and see if it helps your situation with the rogue bridge method?  Basically I've made the reflection world return the same thing as the bcel world.  The test I modified still fails because of the &lt;clinit&gt; method but that shouldnt impact bridge method creation.
Hmmm .. I just re-read the original append by Ron.

In my case I wasn't getting 41 and 29, I was getting 41 and 40.

perhaps I'm not running it in quite the same way - i'll keep hacking away - but if you could try the patch it might help with the bridge problem.
I will try the patches and report back...

On closer examination, the 29 vs 41 methods I was seeing was on a Java 1.3.1 VM but running in Eclipse where the Java 1.5 JRE was on the classpath and BCEL was using that to resolve types (!). When corrected to use a 1.3 JRE in Eclipse, I see 29 vs 30 methods on a Java 1.3 VM and I always saw 40 vs 41 on a Java 1.5 VM. Hopefully this test will show 29 vs 30 when run via ant (the docs on how to run ant tests for a module from the command line aren't working for me...)

Reflect:
put, clone, get, access$000, access$100, values, size, access$200, clear, remove, access$300, loadFactor, keySet, entrySet, isEmpty, containsValue, containsKey, rehash, putAll, writeObject, readObject, capacity, getHashIterator, access$308, access$110, init, init, init, init
BCEL:
&lt;init&gt;, &lt;init&gt;, &lt;init&gt;, &lt;init&gt;, size, isEmpty, containsValue, containsKey, get, rehash, put, remove, putAll, clear, clone, keySet, values, entrySet, getHashIterator, writeObject, readObject, capacity, loadFactor, access$000, access$100, access$200, access$308, access$110, access$300, &lt;clinit&gt;

It looks like those patches fix the problem (although I had to patch the patches to use an IReflectionWorld interface that my LTWWorld implementation also implements :-)). I am not seeing the same error messages and things appear to be working properly on a quick run. Thanks!
fixes checked in - thanks for trying them out Ron. waiting on build.
oops - closed prematurely.  i'm really waiting on the build...
fix available.</WithStack>
    <WithOutStack>I am running into a problem in load-time weaving when I use reflection delegates because the weaver is generating an incorrect bridge method when I perform an inter-type declaration on Struts.ActionServlet for the init method. On investigation, the BCEL world is recognizing this as an overriding method, because its version of getDeclaredMethods is returning the declared methods for all ancestor superclasses. However, the reflection world is returning only the declared methods for this one class. It therefore appears that the weaver expects getDeclaredMethods to return all of them (making the name quite misleading). I think previously the method was being implemented inconsistently between 1.5 reflection and &lt;1.5 reflection delegates. But it looks like it needs to be handled consistently to include all superclass methods.

However, I dont know what other places (e.g., the MAP) are really expecting getDeclaredMethods and its siblings to behave like Java reflection's version

I started work on adding a getAllDeclaredMethods method to ReferenceType and delegates, as an alternative to provide the weaver the ability to check method overriding as in this case, but it's a little bit involved and I wanted to flag the issue first.

Here's a test that fails and illustrates the issue:
Index: ReflectionBasedReferenceTypeDelegateTest.java
===================================================================
RCS file: /home/technology/org.aspectj/modules/weaver/testsrc/org/aspectj/weaver/reflect/ReflectionBasedReferenceTypeDelegateTest.java,v
retrieving revision 1.5
diff -u -r1.5 ReflectionBasedReferenceTypeDelegateTest.java
--- ReflectionBasedReferenceTypeDelegateTest.java	28 Nov 2005 17:44:40 -0000	1.5
+++ ReflectionBasedReferenceTypeDelegateTest.java	6 Dec 2005 04:11:41 -0000
@@ -238,6 +238,18 @@
         assertTrue("Superclass for Map generic type should be Object but was "+rt2,rt2.equals(UnresolvedType.OBJECT));         
     }
     
+    public void testCompareSubclassDelegates() {
+        world.setBehaveInJava5Way(true);
+        
+        BcelWorld bcelWorld = new BcelWorld();
+        bcelWorld.setBehaveInJava5Way(true);
+        UnresolvedType javaUtilHashMap = UnresolvedType.forName("java.util.HashMap");
+        ReferenceType rawType = (ReferenceType)bcelWorld.resolve(javaUtilHashMap );
+        
+        ReferenceType rawReflectType = (ReferenceType)world.resolve(javaUtilHashMap );
+        assertEquals(rawType.getDelegate().getDeclaredMethods().length, rawReflectType.getDelegate().getDeclaredMethods().length);
+    }
+    
 	// todo: array of int	
 
 	protected void setUp() throws Exception {


This results in:

Two small clarifications: the incorrect bridge method results in a VerifyError. If I use only BCEL delegates then the system behaves properly.
I modified the test program to output what the differences are between the two sets.  Interesting results:

Couldn't find java.util.HashMap java.util.HashMap.init(int) in the bcel set
Couldn't find java.util.HashMap java.util.HashMap.init() in the bcel set
Couldn't find java.util.HashMap java.util.HashMap.init(java.util.Map) in the bcel set
Couldn't find java.util.HashMap java.util.HashMap.init(int, float) in the bcel set
Couldn't find void java.util.HashMap.&lt;init&gt;(int, float) in the reflection set
Couldn't find void java.util.HashMap.&lt;init&gt;(int) in the reflection set
Couldn't find void java.util.HashMap.&lt;init&gt;() in the reflection set
Couldn't find void java.util.HashMap.&lt;init&gt;(java.util.Map) in the reflection set
Couldn't find void java.util.HashMap.&lt;clinit&gt;() in the reflection set

I don't like the disagreement between the 'init' and '&lt;init&gt;' strings.  I suspect that is the root of this problem.  I'm not sure about the &lt;clinit&gt; - but at least we know that can't have an impact on bridge methods ;)

I'm not sure how this quite ties up with Rons description that getDeclaredMethods() is differing in each case as the initial fix here just seems to be transforming the reflection based entries for ctors to indicate &lt;init&gt;...
Created attachment 31379
Patch to the delegates (1.5 and &lt; 1.5)

Ron ... this zip contains two patches, one for the weaver project, one for weaver5 - can you try it out and see if it helps your situation with the rogue bridge method?  Basically I've made the reflection world return the same thing as the bcel world.  The test I modified still fails because of the &lt;clinit&gt; method but that shouldnt impact bridge method creation.
Hmmm .. I just re-read the original append by Ron.

In my case I wasn't getting 41 and 29, I was getting 41 and 40.

perhaps I'm not running it in quite the same way - i'll keep hacking away - but if you could try the patch it might help with the bridge problem.
I will try the patches and report back...

On closer examination, the 29 vs 41 methods I was seeing was on a Java 1.3.1 VM but running in Eclipse where the Java 1.5 JRE was on the classpath and BCEL was using that to resolve types (!). When corrected to use a 1.3 JRE in Eclipse, I see 29 vs 30 methods on a Java 1.3 VM and I always saw 40 vs 41 on a Java 1.5 VM. Hopefully this test will show 29 vs 30 when run via ant (the docs on how to run ant tests for a module from the command line aren't working for me...)

Reflect:
put, clone, get, access$000, access$100, values, size, access$200, clear, remove, access$300, loadFactor, keySet, entrySet, isEmpty, containsValue, containsKey, rehash, putAll, writeObject, readObject, capacity, getHashIterator, access$308, access$110, init, init, init, init
BCEL:
&lt;init&gt;, &lt;init&gt;, &lt;init&gt;, &lt;init&gt;, size, isEmpty, containsValue, containsKey, get, rehash, put, remove, putAll, clear, clone, keySet, values, entrySet, getHashIterator, writeObject, readObject, capacity, loadFactor, access$000, access$100, access$200, access$308, access$110, access$300, &lt;clinit&gt;

It looks like those patches fix the problem (although I had to patch the patches to use an IReflectionWorld interface that my LTWWorld implementation also implements :-)). I am not seeing the same error messages and things appear to be working properly on a quick run. Thanks!
fixes checked in - thanks for trying them out Ron. waiting on build.
oops - closed prematurely.  i'm really waiting on the build...
fix available.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="119354" />
    <CreationDate amount="2005-12-05 23:23:00 -0500" />
    <DupId amount="119485" />
    <classification amount="Eclipse Foundation" />
    <Product amount="z_Archived" />
    <component amount="VE" />
    <Version amount="unspecified" />
    <rep_platform amount="Macintosh" />
    <op_sys amount="Mac OS X - Carbon (unsup.)" />
    <priority amount="P3" />
    <bug_severity amount="major" />
    <Summery>Cannot drop onto composites with layout other than GridLayout</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="DUPLICATE" />
    <WithStack>When attempting to drop a widget onto a composite that has a layout other than GridLayout, the NOT cursor is always displayed.  No errors show up in the logs.  It's possible to switch from a GridLayout to another layout and it looks ok, but you still won't be able to drop after the switch.

Note the platform, this may be a OS X specific bug.
This is probably caused by bug 119485
It is a dup.

*** This bug has been marked as a duplicate of 119485 ***
closing
Changing OS from Mac OS to Mac OS X as per bug 185991</WithStack>
    <WithOutStack>When attempting to drop a widget onto a composite that has a layout other than GridLayout, the NOT cursor is always displayed.  No errors show up in the logs.  It's possible to switch from a GridLayout to another layout and it looks ok, but you still won't be able to drop after the switch.

Note the platform, this may be a OS X specific bug.
This is probably caused by bug 119485
It is a dup.

*** This bug has been marked as a duplicate of 119485 ***
closing
Changing OS from Mac OS to Mac OS X as per bug 185991</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="119355" />
    <CreationDate amount="2005-12-05 23:25:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse Foundation" />
    <Product amount="z_Archived" />
    <component amount="VE" />
    <Version amount="unspecified" />
    <rep_platform amount="Macintosh" />
    <op_sys amount="Mac OS X - Carbon (unsup.)" />
    <priority amount="P3" />
    <bug_severity amount="major" />
    <Summery>Cannot Run As-&gt;Java Bean for SWT class on OS X</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>The Java bean launcher launches AWT to check to see if the class is a Swing/AWT app first, thus the SWT thread can't start once AWT's going.
Swapped the order of the launchers list so that the JFC launcher is checked last (if the project is RCP and/or SWT).  RCP, SWT and JFC Beans now launch properly on OS X.
Verified working in VE build I20051208.
Closing
Changing OS from Mac OS to Mac OS X as per bug 185991</WithStack>
    <WithOutStack>The Java bean launcher launches AWT to check to see if the class is a Swing/AWT app first, thus the SWT thread can't start once AWT's going.
Swapped the order of the launchers list so that the JFC launcher is checked last (if the project is RCP and/or SWT).  RCP, SWT and JFC Beans now launch properly on OS X.
Verified working in VE build I20051208.
Closing
Changing OS from Mac OS to Mac OS X as per bug 185991</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="119356" />
    <CreationDate amount="2005-12-05 23:28:00 -0500" />
    <DupId amount="" />
    <classification amount="BIRT" />
    <Product amount="BIRT" />
    <component amount="Report Engine" />
    <Version amount="2.0.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="major" />
    <Summery>When click the "Preview" in the layout windows, an error appears</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="4">
        <Lines>
          <Line>1. set a data source based on XML file</Line>
          <Line>2. set a data set based on the data source</Line>
          <Line>3. drag the data set to the layout</Line>
          <Line>4. click the "Preview"</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="CLOSED" />
    <resolution amount="WORKSFORME" />
    <WithStack>Description:
  When click the "Preview" in the layout windows, an error appears

Steps to reproduce:
 1. set a data source based on XML file
 2. set a data set based on the data source
 3. drag the data set to the layout
 4. click the "Preview"

Expected results:
 the data are displyed

Actual results:
 Only some of the data are displayed, and throw out an error:"Error happened while running the report"
Created attachment 31179
XML file
Created attachment 31180
Report design
It works for me
The bug is verified.</WithStack>
    <WithOutStack>Description:
  When click the "Preview" in the layout windows, an error appears

Steps to reproduce:
 1. set a data source based on XML file
 2. set a data set based on the data source
 3. drag the data set to the layout
 4. click the "Preview"

Expected results:
 the data are displyed

Actual results:
 Only some of the data are displayed, and throw out an error:"Error happened while running the report"
Created attachment 31179
XML file
Created attachment 31180
Report design
It works for me
The bug is verified.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="119357" />
    <CreationDate amount="2005-12-05 23:29:00 -0500" />
    <DupId amount="" />
    <classification amount="BIRT" />
    <Product amount="BIRT" />
    <component amount="Report Designer" />
    <Version amount="2.0.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="minor" />
    <Summery>Description in "New Template"  dialog is not correct.</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="3">
        <Lines>
          <Line>1. Create a template.</Line>
          <Line>2. See its description, it shows "New Report".</Line>
          <Line>The description title has been changed to "New Template" from "New Report".</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>Description: Description in "New Template"  dialog is not correct.

Steps to reproduce:
1. Create a template.
2. See its description, it shows "New Report".
The description title has been changed to "New Template" from "New Report".

Verified in build 20051212.</WithStack>
    <WithOutStack>Description: Description in "New Template"  dialog is not correct.

Steps to reproduce:
1. Create a template.
2. See its description, it shows "New Report".
The description title has been changed to "New Template" from "New Report".

Verified in build 20051212.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="119358" />
    <CreationDate amount="2005-12-06 00:21:00 -0500" />
    <DupId amount="" />
    <classification amount="BIRT" />
    <Product amount="BIRT" />
    <component amount="Report Engine" />
    <Version amount="unspecified" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>[Regression]font style in generated html output is different from the html generated before.</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="2">
        <Lines>
          <Line>1. new a report and insert some items.</Line>
          <Line>2. preview the report</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>Description:
font style in generated html output is different from the html generated before.

Steps to reproduce:
1. new a report and insert some items.
2. preview the report

Expected result:
Report using default font style.

Actual result:
Report display different font style. 
View the html source and find something as below:
	&lt;body class="style_0"&gt;
		&lt;div style=" font-family: &amp;quot;Arial&amp;quot;,&amp;quot;Helvetica&amp;quot;,sans-serif; font-style: normal; font-variant: normal; font-weight: normal; font-size: 9000; text-indent: 0; text-align: left; letter-spacing: 0; word-spacing: 0; text-transform: none; white-space: normal; margin-top: 0; margin-right: 0; margin-bottom: 0; margin-left: 0; padding-top: 0; padding-right: 0; padding-bottom: 0; padding-left: 0; border-top: 0 none rgb(0, 0, 0); border-right: 0 none rgb(0, 0, 0); border-bottom: 0 none rgb(0, 0, 0); border-left: 0 none rgb(0, 0, 0); color: rgb(0, 0, 0); background-color: transparent; orphans: 2; widows: 2; page-break-before: auto; page-break-after: auto; page-break-inside: auto; vertical-align: baseline; line-height: normal;"&gt;
fixed
verified in build 20051208</WithStack>
    <WithOutStack>Description:
font style in generated html output is different from the html generated before.

Steps to reproduce:
1. new a report and insert some items.
2. preview the report

Expected result:
Report using default font style.

Actual result:
Report display different font style. 
View the html source and find something as below:
	&lt;body class="style_0"&gt;
		&lt;div style=" font-family: &amp;quot;Arial&amp;quot;,&amp;quot;Helvetica&amp;quot;,sans-serif; font-style: normal; font-variant: normal; font-weight: normal; font-size: 9000; text-indent: 0; text-align: left; letter-spacing: 0; word-spacing: 0; text-transform: none; white-space: normal; margin-top: 0; margin-right: 0; margin-bottom: 0; margin-left: 0; padding-top: 0; padding-right: 0; padding-bottom: 0; padding-left: 0; border-top: 0 none rgb(0, 0, 0); border-right: 0 none rgb(0, 0, 0); border-bottom: 0 none rgb(0, 0, 0); border-left: 0 none rgb(0, 0, 0); color: rgb(0, 0, 0); background-color: transparent; orphans: 2; widows: 2; page-break-before: auto; page-break-after: auto; page-break-inside: auto; vertical-align: baseline; line-height: normal;"&gt;
fixed
verified in build 20051208</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="119359" />
    <CreationDate amount="2005-12-06 00:39:00 -0500" />
    <DupId amount="" />
    <classification amount="BIRT" />
    <Product amount="BIRT" />
    <component amount="Chart" />
    <Version amount="2.0.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="major" />
    <Summery>Support setting Meter chart scale label attributes and formatSepcifier through builder</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>Chart engine already support the label attribute and formatspecifier for scale on Dial series, but currently we can't set this through builder UI. Expected this could be available in UI 'caue that's useful and commonly used.
Added corresponding UI part
fixed
closed.</WithStack>
    <WithOutStack>Chart engine already support the label attribute and formatspecifier for scale on Dial series, but currently we can't set this through builder UI. Expected this could be available in UI 'caue that's useful and commonly used.
Added corresponding UI part
fixed
closed.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="119360" />
    <CreationDate amount="2005-12-06 00:57:00 -0500" />
    <DupId amount="" />
    <classification amount="WebTools" />
    <Product amount="WTP Common Tools" />
    <component amount="wst.common" />
    <Version amount="1.5" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="critical" />
    <Summery>can't programmatically reset selections on the FacetsSelectionPanel</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>In my extension to the web project wizard I enhance the 1st page of the wizard and have a few control combinations to drive the facets selection on the 2nd page.  Based on the state of those controls the facet selections vary.  So I need to programmatically reset the selection on the facets selection panel.  However the method "setSelectedProjectFacets()" only add new selections.  There's no other methods that allow me to set facet selections.

my adoption to the platform is based on WTP 1.0 is approaching DCUT so it's very important that this be provided in a timely manner.

Thanks in advance!
Kostantine,

Assigning to you, but Jason may be able to help.....  let us know
This has already been fixed and released last night. Please note though that you will be fighting with the runtime selection combo for the control of the facets list. When the user picks a runtime on the first page, the facets list will reset.
This change is a bulk update of all _un_targeted, fixed, resolved bugs upon release of M5. This particular bug _might_ have been fixed earlier than M5. (Feel free to correct). 


This bug is being moved to the "closed" state since it has been in the fixed state for a so long it is being assumed fixed, without explicit verification from the originator. If there is still a problem, in the most recent 1.5.x builds, please reopen or open another bug.</WithStack>
    <WithOutStack>In my extension to the web project wizard I enhance the 1st page of the wizard and have a few control combinations to drive the facets selection on the 2nd page.  Based on the state of those controls the facet selections vary.  So I need to programmatically reset the selection on the facets selection panel.  However the method "setSelectedProjectFacets()" only add new selections.  There's no other methods that allow me to set facet selections.

my adoption to the platform is based on WTP 1.0 is approaching DCUT so it's very important that this be provided in a timely manner.

Thanks in advance!
Kostantine,

Assigning to you, but Jason may be able to help.....  let us know
This has already been fixed and released last night. Please note though that you will be fighting with the runtime selection combo for the control of the facets list. When the user picks a runtime on the first page, the facets list will reset.
This change is a bulk update of all _un_targeted, fixed, resolved bugs upon release of M5. This particular bug _might_ have been fixed earlier than M5. (Feel free to correct). 


This bug is being moved to the "closed" state since it has been in the fixed state for a so long it is being assumed fixed, without explicit verification from the originator. If there is still a problem, in the most recent 1.5.x builds, please reopen or open another bug.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="119361" />
    <CreationDate amount="2005-12-06 01:15:00 -0500" />
    <DupId amount="94553" />
    <classification amount="BIRT" />
    <Product amount="BIRT" />
    <component amount="Report Designer" />
    <Version amount="2.0.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows 2000" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Outline viewof the report design should show additional items</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="3">
        <Lines>
          <Line>- datasources</Line>
          <Line>- datasets</Line>
          <Line>- parameters</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="RESOLVED" />
    <resolution amount="DUPLICATE" />
    <WithStack>Outline view of the report design should show
- datasources
- datasets
- parameters

( this was decided during the library review meeting )
Note: Its acceptable that the above items are shown in more thatn one place.


*** This bug has been marked as a duplicate of 94553 ***
Verified in build 20051222.</WithStack>
    <WithOutStack>Outline view of the report design should show
- datasources
- datasets
- parameters

( this was decided during the library review meeting )
Note: Its acceptable that the above items are shown in more thatn one place.


*** This bug has been marked as a duplicate of 94553 ***
Verified in build 20051222.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="119362" />
    <CreationDate amount="2005-12-06 01:18:00 -0500" />
    <DupId amount="" />
    <classification amount="BIRT" />
    <Product amount="BIRT" />
    <component amount="Report Designer" />
    <Version amount="2.0.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows 2000" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Rename source tab in the editor layout</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>During the BIRT 2.0 feature demo, it was decided to rename 'source' tab to 'XML'
rename 'source' tab to 'XML'
Verified in build 20051220.</WithStack>
    <WithOutStack>During the BIRT 2.0 feature demo, it was decided to rename 'source' tab to 'XML'
rename 'source' tab to 'XML'
Verified in build 20051220.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="119363" />
    <CreationDate amount="2005-12-06 01:23:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="SWT" />
    <Version amount="3.1" />
    <rep_platform amount="All" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="enhancement" />
    <Summery>Add java.awt.Raster support to ImageData</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="3">
        <Lines>
          <Line>1. Reduce data bandwidth and memory by only converting those pixels to</Line>
          <Line>Images that you intend to actually display.</Line>
          <Line>2. Reduce CPU time by doing as few format conversions as possible.</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="RESOLVED" />
    <resolution amount="WONTFIX" />
    <WithStack>SWT's ImageData class is used to create Image objects to render on-screen.
For applications that use the AWT Image, BufferedImage, and Java Advanced Imaging APIs to manipulate image data, the current implementation of ImageData forces the application to do an explicit conversion from the AWT Raster/ColorModel/DataBuffer object data to the ImageData/PaletteData objects, which incurs extra work copying the pixels and related data and also costs twice the memory to maintain both image objects.

It would be a big improvement for applications that still need to use the AWT Raster-based objects to be able to build an SWT ImageData object that wrapped an AWT Raster object.  The ImageData object could share the same array of pixels as the Raster's DataBuffer, and the ColorModel is straightforward to convert to an equivalent PaletteData object.  This implementation is given in Snippet 156: http://dev.eclipse.org/viewcvs/index.cgi/org.eclipse.swt.snippets/src/org/eclipse/swt/snippets/Snippet156.java?rev=HEAD&amp;content-type=text/vnd.viewcvs-markup,
(which, by the way, should be updated to include awt images that use a ComponentColorModel.)

This enhancement would be a huge win for image processing and image manipulation applications that use SWT for rendering since it would eliminate unnecessary conversion and also eliminate making additional copies of image data.
Realistically, I can't really see us doing this.  SWT runs on platforms where AWT doesn't exist (QNX Photon).

Is there a particular ImageData feature that is missing from SWT?
(In reply to comment #1)
&gt; Realistically, I can't really see us doing this.  SWT runs on platforms where
&gt; AWT doesn't exist (QNX Photon).
&gt; 
&gt; Is there a particular ImageData feature that is missing from SWT?
&gt; 

It's most unfortunate then that SWT image rendering is apparently so fundamentally incompatible (at the API level) with what is now the most prevalent image processing and manipulation API available for Java.

Java Advanced Imaging and ImageIO APIs care nothing whatsoever for rendering graphics, only producing device-independent images from data sources and transforms of other images.  The Java Advanced Imaging API provides a generic image processing operation chain with support for deferred execution, tile-based image operations, flexible caching support, and even native acceleration on some platforms.  ImageIO provides an extensible, flexible API for reading and writing image data from files and other data sources in a wide variety of formats and provides an API for writing plugins for other formats if you need them.  It also provides an object model for image metadata and can encode, decode, and transcode that metadata between formats.  

Sorry if the above sounds like a commercial for JAI and ImageIO, but these libraries are to image processing and i/o handling what SWT is to creating GUIs...and marrying them up currently requires a lot of wasted memory and time.  I know you are constantly concerned with memory footprint and performance issues with SWT, so I know you can appreciate this.

Is there any particular feature lacking in ImageData, you ask?  Well, it is far less generalized than Raster and its supporting classes.  SampleModels can have an arbitrary number of bands in an image and can arrange the pixels in a number of ways like band-interleaved, pixel-interleaved, and multi-pixel-per-sample.  DataBuffers can support a wider variety of data types for pixels (byte, short, unsigned short, int, float).  ColorModels can be not just Direct or Indexed but ComponentColorModels defined with a ColorSpace.

If you can't allow a class in SWT to refer to a class in AWT because you need to support platforms without AWT, then could you please make ImageData extensible and essentially a clone of AWT Raster, SampleModel, ColorModel, and DataBuffer so that other APIs could wrap AWT Raster objects as ImageData objects, and save considerable memory (usually tens or hundreds of megabytes) and stop spending time converting to the current ImageData image representation in the bargain?  This seems like a lot to ask of you, but I fail to see another option at present...it's a shame that my original request wasn't more straightforward.

Thanks for the description of JAI and ImageIO.  It is unlikely that we will clone this API, although the functionality sounds interesting.

Is there a particular feature or API that is missing in SWT, something that is holding you up and stopping you from shipping a product?

Do you have a benchmark or something concrete we can work with that shows the slow conversion or the wasted tens or hundreds of megabytes?
&gt; Thanks for the description of JAI and ImageIO.  It is unlikely that we will
&gt; clone this API, although the functionality sounds interesting.

I would encourage you not to try to clone this API, since it represents years of development by the team who created it.  Ideally, these libraries would be best used integrated with SWT rather than being replaced by it.

&gt; Is there a particular feature or API that is missing in SWT, something that is
&gt; holding you up and stopping you from shipping a product?

Well we're "shipping" our product currently, it's just more bloated than it should be because we need to make SWT copies of every tiled image that we make using JAI.

&gt; Do you have a benchmark or something concrete we can work with that shows the
&gt; slow conversion or the wasted tens or hundreds of megabytes?

Just the product that I help develop.  I'll be presenting a long talk at EclipseCon 2006  titled "NASA Mission Operations with the Rich Client Platform" where you can see it demonstrated, or I can demonstrated it to you personally.

I can give you an architectural description of the application, but I can't give you a copy of it at this time since it's not my intellectual property.  Hopefully that will change in the future.  If an architectural description of how image data is being used in my application (which is likely the case for many applications that use JAI) and how it is being converted into SWT Images would be useful, let me know and I will attach one here.
&gt;Well we're "shipping" our product currently, it's just more bloated than
&gt;it should be because we need to make SWT copies of every tiled image that
&gt;we make using JAI.

I have no idea what this means.

&gt;Just the product that I help develop ...

Several ideas come to mind:  Are you really using all the features of JAI?  It might be possible to implement a subset of the feature that you use for your application.  How about using the SWT_AWT bridge to mock up a JAI and AWT prototype to see how much time and space might be saved by using only JAI and AWT?  That way there will be no conversion.

Also, I'm quite interested in the NASA work and will be sure to attend your talk.  I'm very interested in any concrete problems that you are having.
(In reply to comment #5)
&gt; &gt;Well we're "shipping" our product currently, it's just more bloated than
&gt; &gt;it should be because we need to make SWT copies of every tiled image that
&gt; &gt;we make using JAI.
&gt; 
&gt; I have no idea what this means.

Ok, I'm gonna try to explain it differently below.

&gt; Several ideas come to mind:  Are you really using all the features of JAI?  It

We use a lot of what JAI gives us...we really can't do without it.  The tile cache alone is a critical piece of infrastructure for us, not to mention the 20+ image operations that we need to use, including a handful of custom JAI operations that we maintain ourselves.

&gt; How about using the SWT_AWT bridge to mock up a JAI and AWT
&gt; prototype to see how much time and space might be saved by using only JAI and
&gt; AWT?  That way there will be no conversion.

Oh if only we could have done this when we first moved to Eclipse...!  The deal-breaker for us on this was, is, and continues to be Mac support for the bridge which isn't there.  There was also a problem we were having with using a Swing component to do this on GTK that I filed way back when (Bug 74095), but we've stopped using the bridge entirely since the majority of our users are on Macs.

&gt; 
&gt; Also, I'm quite interested in the NASA work and will be sure to attend your
&gt; talk.  I'm very interested in any concrete problems that you are having.
&gt; 

Thanks!  We can clearly see how interested you are since your team has worked so hard on many of the SWT features that we have asked for in the past, notably the OpenGL binding support which we're very excited to see :)

Here's an example of what we do and how we do it that is hopefully concrete enough for a meaningful discussion:

Say we have a big image that is 10,000 by 10,000 pixels in size, which is 100,000,000 (100M) pixels, 1 byte per pixel (greyscale).  If we want to render this image with SWT in the most naive implementation possible, one would build one huge SWT image that was 100M in size, and have a Canvas in a Shell that calls gc.drawImage(bigSWTImage) with every paint that would crop and/or scale the image to the viewport coordinates to show the part of the image that you want at the scale that you want.  Building that 100M image is a huge hit on memory resources, and you can't build too many of these before you run out of RAM.

A tried-and-true design to get around the need to build entire huge images is to build them in pieces (called tiles) on demand.  If you want to view an image, you load it and break it up into tiles.  If the image is much bigger than the shell, as it often is, then you only build the tiles that are visible.  As you scroll the Canvas and expose areas that haven't been computed yet, you start a thread to build the tiles you need for the exposed region and then paint them when you're done.  You keep all the tiles in an LRU cache in memory with a maximum size that forces the cache to dispose tiles that are least recently used when the cache fills up.  The maximum size has to be at least big enough to hold enough tiles to paint the entire Shell, and other than that it's a trade-off between painting performance and memory usage.  For a good example of an image rendering app that uses a strategy like this, look at how http://maps.google.com looks when it renders.  The implementation behind Google Maps isn't exactly what I'm describing here, but the presentation layer is similar enough to illustrate how my application looks and feels without you actually seeing it.  The GIMP is another good example of an imaging application that uses a tile cache for its processing and rendering that lets it scale well to very large images.

Java Advanced Imaging (JAI) has a good tile cache implementation, plus it also has a host of image processing support algorithms that are important for other features of my particular application to do image analysis.  My customers are scientists and analysts who are trying to analyze images of the surface of Mars, the Moon, Earth's oceans, etc. using images from cameras and spectrometers mounted on a spacecraft and use what they learn to affect changes to the course of a spacecraft in the span of a few hours or less.  As a result, we use quite a bit of the JAI feature set pretty extensively to provide these features in our app, and not using it isn't really an option at present.

However, JAI produces tiles that are AWT RenderedImage objects, which map roughly to SWT Image objects in terms of what they contain...They are basically an array of pixels and a ColorModel, although the AWT objects are more general and flexible when you put them side-by-side and compare features.  For instance, an AWT RenderedImage can represent an image that cannot be directly rendered to a display device (such as an image with more than 8 bits per color channel, or an image of floating point pixel values).  I would not suggest, however, that SWT add support for these types of images that cannot be directly displayed, since that seems to diverge pretty far from what SWT's charter is.

I think that SWT Images probably map more directly to AWT BufferedImage objects, since they are primarily intended to represent images that can be rendered on a display (although via Java2D).  Originally, I was hoping that if I had an AWT BufferedImage object that internally contained an array of pixels that was organized exactly like the pixels are organized for an SWT Image object, that the SWT Image object could "wrap" that array of pixels rather than make a copy of it in memory.  

To further concretize the issue, I'll go back to the scenario that I originally mentioned. If I start with a 100M AWT RendreredImage built with JAI that I can't render on a display and convert it entirely to an SWT Image that I can render on a display, I have to pay an extra 100M of RAM just to copy all the pixels--even if the copy of the pixel array is exactly like that array that I originally had.

Let's say next that we have a more intelligent implementation that makes tiles out of big images and only renders the tiles that are exposed in a Viewport in a ScrolledComposite in a Shell.  If my shell is as big as a display, I still need ~10-20M worth of tiles to have enough tiles to cover the entire the display (obviously this depends on the size of the display, but in a case of a dual-monitor workstation with an effective resolution of 3200x1200 pixels and 32-bit color display, that's ~15.3 M worth of pixels.  

What I was trying to ask for in this feature request was for SWT to support a way for me to be clever and build my AWT RenderedImage in a way that would be compatible with the pixel organization that SWT Image uses, and just let the SWT Image object be a wrapper around the pixel data that I made in the AWT RenderedImage.

I understand that adding an java.awt dependency into SWT is problematic for some of the platforms that it supports.  Maybe an alternative that would work would be to devise an API similar to the SWT_AWT bridge that allows an SWT Image to be built from an AWT RenderedImage?  Given a set of reasonable constraints on what types of RenderedImage objects an SWT Image would accept, could this be done in a way that doesn't create problems for platforms that lack a java.awt implementation?  BTW, how is this handled in the case of the SWT_AWT bridge API on these platforms that refers to java.awt.Frame in the API?
Given that you want to manipulate and manage a large amount of pixel data, using some representation separate from SWT seems reasonable to me.

However, you will always need to perform both a format conversion and at least one data copy when you want to actually push some pixels to the display.  An SWT Image is a handle to an operating system image, already formatted for display, and ideally in video memory already.  This is the target, and there are two problems:

  1. Reduce data bandwidth and memory by only converting those pixels to
     Images that you intend to actually display.
  2. Reduce CPU time by doing as few format conversions as possible.

In SWT, pixel data is transferred via an ImageData object which supports a fixed set of formats.  This potentially incurs one extra copy and conversion of the pixel data you want to display, and it is up to the client to ensure they don't create more Image and ImageData objects than they require.

I suspect that there are ways you can optimize your pipeline before the ImageData conversion becomes the limiting factor, but already you should be able to create an ImageData object and give it the pixel array if you have one around.  This should be optimal.  Having a benchmark or test case that shows exactly where you are having problems would help.
There is a ton of information in your response that I hope to get to.  For now, we are looking into getting rid of some of the copying.  Billy is right, we need example code.  For example, do your image start out as AWT images?  Please attach some representative code for us to work with.
I believe there is enough API already to share the data buffers between AWT and SWT as long as a java.awt.image.DataBufferByte is used. Have a look at this msg. It has code that tries to do something like that.

http://dev.eclipse.org/newslists/news.eclipse.platform.swt/msg14835.html
(In reply to comment #9)
&gt; I believe there is enough API already to share the data buffers between AWT and
&gt; SWT as long as a java.awt.image.DataBufferByte is used. Have a look at this
&gt; msg. It has code that tries to do something like that.
&gt; 
&gt; http://dev.eclipse.org/newslists/news.eclipse.platform.swt/msg14835.html
&gt; 

This looks like it may be just what I was looking for :)

I've been using the approach that the code in Snippet156 uses to convert my images which makes a copy of the pixel array, but what this code example is doing avoids the copy entirely.  I'm going to give this a try as soon as I can...in theory it should do exactly what I want.

Many, many thanks for pointing this out...I wish I had thought of this a year ago...

In return, I will turn this into a code snippet and send it back to you guys attached to this thread so that others can use it too.

... and we will make it into a snippet for the page.
Mark,

What has your experience been with that code?  It still seems to me that creating an Image from ImageData still does not share the data buffer, but merely accomplishes the copying more concisely.  It was quite a while ago that I looked at this, but my experience was that creating the Image this way is still not really satisfactorily fast enough not to have to cache the resulting SWT Image.

I'm wondering if what might be more feasible is an AWT wrapper around an SWT Image instead of the other way around.  Holongate appears to be working with such a solution - have you played with that?  My interest overlaps yours quite a bit (see bug 92626), although I haven't really been able to work on it yet.  I'd really value any discoveries you make!

Cheers,
Ian
Created attachment 36760
This example builds a BufferedImage and wraps it with an SWT Image and renders it in various ways.  It's adapted from the image rotate example originally written by Pratik Shah.
Created attachment 36761
This example builds a JAI TiledImage and wraps it with an SWT Image and renders it in various ways. It's adapted from the image rotate example originally written by Pratik Shah.

This example requires Java Advanced Imaging 1.1 or later to build/run.
The previous two posts are some examples I cooked up during EclipseCon 2006 (fun stuff) that are runnable as SWT snippets.  The BufferedImage one is straightforward to run, but the JAI TiledImage one requires JAI 1.1 or later to build/run.

The main point of providing these examples is to explicitly show that copying pixels from AWT Image objects to SWT Image objects isn't strictly necessary.  Snippet 156 is an example of how to convert between these Image objects using a copy.

I also wanted to mention for those of you who happened to listeend to my talk that the thing about the BGR vs. RGB that I mentioned may not really be that big of a deal in general...after all, you can just pick any bands for red, green, and blue when you construct the PaletteData to specify a direct color model, so if you happen to have created an AWT or JAI image with some intrinsic ordering (RGB, BGR, whatever) and just construct a PaletteData to match it.

Ian Graham made a good point that during the conversion from ImageData to Image, the order of bands in the pixel array may matter in terms of performance impact.  For anyone who's concerned with how to build device-dependent Images from ImageData objects in the Java heap with maximum performance, it may be worthwhile to look at the source and maybe point a profiler at it to measure whether this matters...ideally on several platforms for comparison.  If I'm not the first one to find time to do this, I'd love to know what others may have already discovered in this area.</WithStack>
    <WithOutStack>SWT's ImageData class is used to create Image objects to render on-screen.
For applications that use the AWT Image, BufferedImage, and Java Advanced Imaging APIs to manipulate image data, the current implementation of ImageData forces the application to do an explicit conversion from the AWT Raster/ColorModel/DataBuffer object data to the ImageData/PaletteData objects, which incurs extra work copying the pixels and related data and also costs twice the memory to maintain both image objects.

It would be a big improvement for applications that still need to use the AWT Raster-based objects to be able to build an SWT ImageData object that wrapped an AWT Raster object.  The ImageData object could share the same array of pixels as the Raster's DataBuffer, and the ColorModel is straightforward to convert to an equivalent PaletteData object.  This implementation is given in Snippet 156: http://dev.eclipse.org/viewcvs/index.cgi/org.eclipse.swt.snippets/src/org/eclipse/swt/snippets/Snippet156.java?rev=HEAD&amp;content-type=text/vnd.viewcvs-markup,
(which, by the way, should be updated to include awt images that use a ComponentColorModel.)

This enhancement would be a huge win for image processing and image manipulation applications that use SWT for rendering since it would eliminate unnecessary conversion and also eliminate making additional copies of image data.
Realistically, I can't really see us doing this.  SWT runs on platforms where AWT doesn't exist (QNX Photon).

Is there a particular ImageData feature that is missing from SWT?
(In reply to comment #1)
&gt; Realistically, I can't really see us doing this.  SWT runs on platforms where
&gt; AWT doesn't exist (QNX Photon).
&gt; 
&gt; Is there a particular ImageData feature that is missing from SWT?
&gt; 

It's most unfortunate then that SWT image rendering is apparently so fundamentally incompatible (at the API level) with what is now the most prevalent image processing and manipulation API available for Java.

Java Advanced Imaging and ImageIO APIs care nothing whatsoever for rendering graphics, only producing device-independent images from data sources and transforms of other images.  The Java Advanced Imaging API provides a generic image processing operation chain with support for deferred execution, tile-based image operations, flexible caching support, and even native acceleration on some platforms.  ImageIO provides an extensible, flexible API for reading and writing image data from files and other data sources in a wide variety of formats and provides an API for writing plugins for other formats if you need them.  It also provides an object model for image metadata and can encode, decode, and transcode that metadata between formats.  

Sorry if the above sounds like a commercial for JAI and ImageIO, but these libraries are to image processing and i/o handling what SWT is to creating GUIs...and marrying them up currently requires a lot of wasted memory and time.  I know you are constantly concerned with memory footprint and performance issues with SWT, so I know you can appreciate this.

Is there any particular feature lacking in ImageData, you ask?  Well, it is far less generalized than Raster and its supporting classes.  SampleModels can have an arbitrary number of bands in an image and can arrange the pixels in a number of ways like band-interleaved, pixel-interleaved, and multi-pixel-per-sample.  DataBuffers can support a wider variety of data types for pixels (byte, short, unsigned short, int, float).  ColorModels can be not just Direct or Indexed but ComponentColorModels defined with a ColorSpace.

If you can't allow a class in SWT to refer to a class in AWT because you need to support platforms without AWT, then could you please make ImageData extensible and essentially a clone of AWT Raster, SampleModel, ColorModel, and DataBuffer so that other APIs could wrap AWT Raster objects as ImageData objects, and save considerable memory (usually tens or hundreds of megabytes) and stop spending time converting to the current ImageData image representation in the bargain?  This seems like a lot to ask of you, but I fail to see another option at present...it's a shame that my original request wasn't more straightforward.

Thanks for the description of JAI and ImageIO.  It is unlikely that we will clone this API, although the functionality sounds interesting.

Is there a particular feature or API that is missing in SWT, something that is holding you up and stopping you from shipping a product?

Do you have a benchmark or something concrete we can work with that shows the slow conversion or the wasted tens or hundreds of megabytes?
&gt; Thanks for the description of JAI and ImageIO.  It is unlikely that we will
&gt; clone this API, although the functionality sounds interesting.

I would encourage you not to try to clone this API, since it represents years of development by the team who created it.  Ideally, these libraries would be best used integrated with SWT rather than being replaced by it.

&gt; Is there a particular feature or API that is missing in SWT, something that is
&gt; holding you up and stopping you from shipping a product?

Well we're "shipping" our product currently, it's just more bloated than it should be because we need to make SWT copies of every tiled image that we make using JAI.

&gt; Do you have a benchmark or something concrete we can work with that shows the
&gt; slow conversion or the wasted tens or hundreds of megabytes?

Just the product that I help develop.  I'll be presenting a long talk at EclipseCon 2006  titled "NASA Mission Operations with the Rich Client Platform" where you can see it demonstrated, or I can demonstrated it to you personally.

I can give you an architectural description of the application, but I can't give you a copy of it at this time since it's not my intellectual property.  Hopefully that will change in the future.  If an architectural description of how image data is being used in my application (which is likely the case for many applications that use JAI) and how it is being converted into SWT Images would be useful, let me know and I will attach one here.
&gt;Well we're "shipping" our product currently, it's just more bloated than
&gt;it should be because we need to make SWT copies of every tiled image that
&gt;we make using JAI.

I have no idea what this means.

&gt;Just the product that I help develop ...

Several ideas come to mind:  Are you really using all the features of JAI?  It might be possible to implement a subset of the feature that you use for your application.  How about using the SWT_AWT bridge to mock up a JAI and AWT prototype to see how much time and space might be saved by using only JAI and AWT?  That way there will be no conversion.

Also, I'm quite interested in the NASA work and will be sure to attend your talk.  I'm very interested in any concrete problems that you are having.
(In reply to comment #5)
&gt; &gt;Well we're "shipping" our product currently, it's just more bloated than
&gt; &gt;it should be because we need to make SWT copies of every tiled image that
&gt; &gt;we make using JAI.
&gt; 
&gt; I have no idea what this means.

Ok, I'm gonna try to explain it differently below.

&gt; Several ideas come to mind:  Are you really using all the features of JAI?  It

We use a lot of what JAI gives us...we really can't do without it.  The tile cache alone is a critical piece of infrastructure for us, not to mention the 20+ image operations that we need to use, including a handful of custom JAI operations that we maintain ourselves.

&gt; How about using the SWT_AWT bridge to mock up a JAI and AWT
&gt; prototype to see how much time and space might be saved by using only JAI and
&gt; AWT?  That way there will be no conversion.

Oh if only we could have done this when we first moved to Eclipse...!  The deal-breaker for us on this was, is, and continues to be Mac support for the bridge which isn't there.  There was also a problem we were having with using a Swing component to do this on GTK that I filed way back when (Bug 74095), but we've stopped using the bridge entirely since the majority of our users are on Macs.

&gt; 
&gt; Also, I'm quite interested in the NASA work and will be sure to attend your
&gt; talk.  I'm very interested in any concrete problems that you are having.
&gt; 

Thanks!  We can clearly see how interested you are since your team has worked so hard on many of the SWT features that we have asked for in the past, notably the OpenGL binding support which we're very excited to see :)

Here's an example of what we do and how we do it that is hopefully concrete enough for a meaningful discussion:

Say we have a big image that is 10,000 by 10,000 pixels in size, which is 100,000,000 (100M) pixels, 1 byte per pixel (greyscale).  If we want to render this image with SWT in the most naive implementation possible, one would build one huge SWT image that was 100M in size, and have a Canvas in a Shell that calls gc.drawImage(bigSWTImage) with every paint that would crop and/or scale the image to the viewport coordinates to show the part of the image that you want at the scale that you want.  Building that 100M image is a huge hit on memory resources, and you can't build too many of these before you run out of RAM.

A tried-and-true design to get around the need to build entire huge images is to build them in pieces (called tiles) on demand.  If you want to view an image, you load it and break it up into tiles.  If the image is much bigger than the shell, as it often is, then you only build the tiles that are visible.  As you scroll the Canvas and expose areas that haven't been computed yet, you start a thread to build the tiles you need for the exposed region and then paint them when you're done.  You keep all the tiles in an LRU cache in memory with a maximum size that forces the cache to dispose tiles that are least recently used when the cache fills up.  The maximum size has to be at least big enough to hold enough tiles to paint the entire Shell, and other than that it's a trade-off between painting performance and memory usage.  For a good example of an image rendering app that uses a strategy like this, look at how http://maps.google.com looks when it renders.  The implementation behind Google Maps isn't exactly what I'm describing here, but the presentation layer is similar enough to illustrate how my application looks and feels without you actually seeing it.  The GIMP is another good example of an imaging application that uses a tile cache for its processing and rendering that lets it scale well to very large images.

Java Advanced Imaging (JAI) has a good tile cache implementation, plus it also has a host of image processing support algorithms that are important for other features of my particular application to do image analysis.  My customers are scientists and analysts who are trying to analyze images of the surface of Mars, the Moon, Earth's oceans, etc. using images from cameras and spectrometers mounted on a spacecraft and use what they learn to affect changes to the course of a spacecraft in the span of a few hours or less.  As a result, we use quite a bit of the JAI feature set pretty extensively to provide these features in our app, and not using it isn't really an option at present.

However, JAI produces tiles that are AWT RenderedImage objects, which map roughly to SWT Image objects in terms of what they contain...They are basically an array of pixels and a ColorModel, although the AWT objects are more general and flexible when you put them side-by-side and compare features.  For instance, an AWT RenderedImage can represent an image that cannot be directly rendered to a display device (such as an image with more than 8 bits per color channel, or an image of floating point pixel values).  I would not suggest, however, that SWT add support for these types of images that cannot be directly displayed, since that seems to diverge pretty far from what SWT's charter is.

I think that SWT Images probably map more directly to AWT BufferedImage objects, since they are primarily intended to represent images that can be rendered on a display (although via Java2D).  Originally, I was hoping that if I had an AWT BufferedImage object that internally contained an array of pixels that was organized exactly like the pixels are organized for an SWT Image object, that the SWT Image object could "wrap" that array of pixels rather than make a copy of it in memory.  

To further concretize the issue, I'll go back to the scenario that I originally mentioned. If I start with a 100M AWT RendreredImage built with JAI that I can't render on a display and convert it entirely to an SWT Image that I can render on a display, I have to pay an extra 100M of RAM just to copy all the pixels--even if the copy of the pixel array is exactly like that array that I originally had.

Let's say next that we have a more intelligent implementation that makes tiles out of big images and only renders the tiles that are exposed in a Viewport in a ScrolledComposite in a Shell.  If my shell is as big as a display, I still need ~10-20M worth of tiles to have enough tiles to cover the entire the display (obviously this depends on the size of the display, but in a case of a dual-monitor workstation with an effective resolution of 3200x1200 pixels and 32-bit color display, that's ~15.3 M worth of pixels.  

What I was trying to ask for in this feature request was for SWT to support a way for me to be clever and build my AWT RenderedImage in a way that would be compatible with the pixel organization that SWT Image uses, and just let the SWT Image object be a wrapper around the pixel data that I made in the AWT RenderedImage.

I understand that adding an java.awt dependency into SWT is problematic for some of the platforms that it supports.  Maybe an alternative that would work would be to devise an API similar to the SWT_AWT bridge that allows an SWT Image to be built from an AWT RenderedImage?  Given a set of reasonable constraints on what types of RenderedImage objects an SWT Image would accept, could this be done in a way that doesn't create problems for platforms that lack a java.awt implementation?  BTW, how is this handled in the case of the SWT_AWT bridge API on these platforms that refers to java.awt.Frame in the API?
Given that you want to manipulate and manage a large amount of pixel data, using some representation separate from SWT seems reasonable to me.

However, you will always need to perform both a format conversion and at least one data copy when you want to actually push some pixels to the display.  An SWT Image is a handle to an operating system image, already formatted for display, and ideally in video memory already.  This is the target, and there are two problems:

  1. Reduce data bandwidth and memory by only converting those pixels to
     Images that you intend to actually display.
  2. Reduce CPU time by doing as few format conversions as possible.

In SWT, pixel data is transferred via an ImageData object which supports a fixed set of formats.  This potentially incurs one extra copy and conversion of the pixel data you want to display, and it is up to the client to ensure they don't create more Image and ImageData objects than they require.

I suspect that there are ways you can optimize your pipeline before the ImageData conversion becomes the limiting factor, but already you should be able to create an ImageData object and give it the pixel array if you have one around.  This should be optimal.  Having a benchmark or test case that shows exactly where you are having problems would help.
There is a ton of information in your response that I hope to get to.  For now, we are looking into getting rid of some of the copying.  Billy is right, we need example code.  For example, do your image start out as AWT images?  Please attach some representative code for us to work with.
I believe there is enough API already to share the data buffers between AWT and SWT as long as a java.awt.image.DataBufferByte is used. Have a look at this msg. It has code that tries to do something like that.

http://dev.eclipse.org/newslists/news.eclipse.platform.swt/msg14835.html
(In reply to comment #9)
&gt; I believe there is enough API already to share the data buffers between AWT and
&gt; SWT as long as a java.awt.image.DataBufferByte is used. Have a look at this
&gt; msg. It has code that tries to do something like that.
&gt; 
&gt; http://dev.eclipse.org/newslists/news.eclipse.platform.swt/msg14835.html
&gt; 

This looks like it may be just what I was looking for :)

I've been using the approach that the code in Snippet156 uses to convert my images which makes a copy of the pixel array, but what this code example is doing avoids the copy entirely.  I'm going to give this a try as soon as I can...in theory it should do exactly what I want.

Many, many thanks for pointing this out...I wish I had thought of this a year ago...

In return, I will turn this into a code snippet and send it back to you guys attached to this thread so that others can use it too.

... and we will make it into a snippet for the page.
Mark,

What has your experience been with that code?  It still seems to me that creating an Image from ImageData still does not share the data buffer, but merely accomplishes the copying more concisely.  It was quite a while ago that I looked at this, but my experience was that creating the Image this way is still not really satisfactorily fast enough not to have to cache the resulting SWT Image.

I'm wondering if what might be more feasible is an AWT wrapper around an SWT Image instead of the other way around.  Holongate appears to be working with such a solution - have you played with that?  My interest overlaps yours quite a bit (see bug 92626), although I haven't really been able to work on it yet.  I'd really value any discoveries you make!

Cheers,
Ian
Created attachment 36760
This example builds a BufferedImage and wraps it with an SWT Image and renders it in various ways.  It's adapted from the image rotate example originally written by Pratik Shah.
Created attachment 36761
This example builds a JAI TiledImage and wraps it with an SWT Image and renders it in various ways. It's adapted from the image rotate example originally written by Pratik Shah.

This example requires Java Advanced Imaging 1.1 or later to build/run.
The previous two posts are some examples I cooked up during EclipseCon 2006 (fun stuff) that are runnable as SWT snippets.  The BufferedImage one is straightforward to run, but the JAI TiledImage one requires JAI 1.1 or later to build/run.

The main point of providing these examples is to explicitly show that copying pixels from AWT Image objects to SWT Image objects isn't strictly necessary.  Snippet 156 is an example of how to convert between these Image objects using a copy.

I also wanted to mention for those of you who happened to listeend to my talk that the thing about the BGR vs. RGB that I mentioned may not really be that big of a deal in general...after all, you can just pick any bands for red, green, and blue when you construct the PaletteData to specify a direct color model, so if you happen to have created an AWT or JAI image with some intrinsic ordering (RGB, BGR, whatever) and just construct a PaletteData to match it.

Ian Graham made a good point that during the conversion from ImageData to Image, the order of bands in the pixel array may matter in terms of performance impact.  For anyone who's concerned with how to build device-dependent Images from ImageData objects in the Java heap with maximum performance, it may be worthwhile to look at the source and maybe point a profiler at it to measure whether this matters...ideally on several platforms for comparison.  If I'm not the first one to find time to do this, I'd love to know what others may have already discovered in this area.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="119364" />
    <CreationDate amount="2005-12-06 01:32:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="User Assistance" />
    <Version amount="3.1" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>[Help] Highlight error for "A not B" searching</Summery>
    <Patches amount="1">
      <Patch>
        <index>src/org/eclipse/help/internal/search/QueryBuilder.java</index>
        <original_file>src/org/eclipse/help/internal/search/QueryBuilder.java</original_file>
        <modified_file>src/org/eclipse/help/internal/search/QueryBuilder.java</modified_file>
        <Hunks>
          <hunk>* QueryWordsToken's.&#xD;
&#xD;
 	 */&#xD;
&#xD;
 	private List analyzeTokens(List tokens) {&#xD;
&#xD;
+		boolean isTokenAfterNot = false;&#xD;
&#xD;
 		List newTokens = new ArrayList();&#xD;
&#xD;
 		int wildCardTermCount = 0;&#xD;
&#xD;
 		for (int i = 0; i &lt; tokens.size(); i++) {</hunk>
          <hunk>newTokens.add(QueryWordsToken.word(token.value&#xD;
&#xD;
 								.toLowerCase(locale)));&#xD;
&#xD;
 						// add word to the list of words to highlight&#xD;
&#xD;
-						if (!highlightWords.contains(token.value)) {&#xD;
&#xD;
+						if (!isTokenAfterNot &amp;&amp; !highlightWords.contains(token.value)) {&#xD;
&#xD;
 							highlightWords.add(token.value);&#xD;
&#xD;
 						}&#xD;
&#xD;
 					} else {</hunk>
          <hunk>List wordList = analyzeText(analyzer, "contents", //$NON-NLS-1$&#xD;
&#xD;
 							token.value);&#xD;
&#xD;
 					if (wordList.size() &gt; 0) {&#xD;
&#xD;
-						if (!highlightWords.contains(token.value)) {&#xD;
&#xD;
+						if (!isTokenAfterNot &amp;&amp; !highlightWords.contains(token.value)) {&#xD;
&#xD;
 							// add original word to the list of words to&#xD;
&#xD;
 							// highlight&#xD;
&#xD;
 							highlightWords.add(token.value);</hunk>
          <hunk>// add analyzed word to the list of words to&#xD;
&#xD;
 							// highlight&#xD;
&#xD;
 							// this is required to highlight stemmed words&#xD;
&#xD;
-							if (!highlightWords.contains(word)) {&#xD;
&#xD;
+							if (!isTokenAfterNot &amp;&amp; !highlightWords.contains(word)) {&#xD;
&#xD;
 								highlightWords.add(word);&#xD;
&#xD;
 							}&#xD;
&#xD;
 						} else {</hunk>
          <hunk>// highlighted all over (bug 30263)&#xD;
&#xD;
 								if (!analyzerDesc.getId().startsWith(&#xD;
&#xD;
 										HelpBasePlugin.PLUGIN_ID + "#")) { //$NON-NLS-1$&#xD;
&#xD;
-									if (!highlightWords.contains(word)) {&#xD;
&#xD;
+									if (!isTokenAfterNot &amp;&amp; !highlightWords.contains(word)) {&#xD;
&#xD;
 										highlightWords.add(word);&#xD;
&#xD;
 									}&#xD;
&#xD;
 								}</hunk>
          <hunk>List wordList = analyzeText(analyzer, "exact_contents", //$NON-NLS-1$&#xD;
&#xD;
 						token.value);&#xD;
&#xD;
 				if (wordList.size() &gt; 0) {&#xD;
&#xD;
-					if (!highlightWords.contains(token.value)) {&#xD;
&#xD;
+					if (!isTokenAfterNot &amp;&amp; !highlightWords.contains(token.value)) {&#xD;
&#xD;
 						// add original word to the list of words to highlight&#xD;
&#xD;
 						highlightWords.add(token.value);&#xD;
&#xD;
 					}</hunk>
          <hunk>newTokens.add(phrase);&#xD;
&#xD;
 				}&#xD;
&#xD;
 			}&#xD;
&#xD;
+			isTokenAfterNot = (token.type == QueryWordsToken.NOT);&#xD;
&#xD;
 		}&#xD;
&#xD;
 		return newTokens;&#xD;
&#xD;
 	}</hunk>
        </Hunks>
      </Patch>
    </Patches>
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="20">
      <source_code type="functiondef">
        <location start="1549" end="1592" />
        <code>private List analyzeTokens(List tokens) {</code>
      </source_code>
      <source_code type="assignment">
        <location start="1593" end="1628" />
        <code>+		boolean isTokenAfterNot = false;</code>
      </source_code>
      <source_code type="assignment">
        <location start="1629" end="1665" />
        <code>List newTokens = new ArrayList();</code>
      </source_code>
      <source_code type="assignment">
        <location start="1666" end="1695" />
        <code>int wildCardTermCount = 0;</code>
      </source_code>
      <source_code type="functiondef">
        <location start="1696" end="1740" />
        <code>for (int i = 0; i &lt; tokens.size(); i++) {</code>
      </source_code>
      <source_code type="functioncall">
        <location start="1815" end="1847" />
        <code>.toLowerCase(locale)));</code>
      </source_code>
      <source_code type="singlecomment">
        <location start="1848" end="1901" />
        <code>// add word to the list of words to highlight</code>
      </source_code>
      <source_code type="ifstatement">
        <location start="1901" end="2082" />
        <code>-						if (!highlightWords.contains(token.value)) {
+						if (!isTokenAfterNot &amp;&amp; !highlightWords.contains(token.value)) {
 							highlightWords.add(token.value);
 						}
 					}</code>
      </source_code>
      <source_code type="elsestatement">
        <location start="2075" end="2089" />
        <code>} else {</code>
      </source_code>
      <source_code type="ifstatement">
        <location start="2202" end="2234" />
        <code>if (wordList.size() &gt; 0) {</code>
      </source_code>
      <source_code type="ifstatement">
        <location start="2235" end="2286" />
        <code>-						if (!highlightWords.contains(token.value)) {</code>
      </source_code>
      <source_code type="ifstatement">
        <location start="2287" end="2358" />
        <code>+						if (!isTokenAfterNot &amp;&amp; !highlightWords.contains(token.value)) {</code>
      </source_code>
      <source_code type="singlecomment">
        <location start="2359" end="2412" />
        <code>// add original word to the list of words to</code>
      </source_code>
      <source_code type="singlecomment">
        <location start="2412" end="2433" />
        <code>// highlight</code>
      </source_code>
      <source_code type="functioncall">
        <location start="2433" end="2473" />
        <code>highlightWords.add(token.value);</code>
      </source_code>
      <source_code type="singlecomment">
        <location start="2494" end="2547" />
        <code>// add analyzed word to the list of words to</code>
      </source_code>
      <source_code type="singlecomment">
        <location start="2547" end="2568" />
        <code>// highlight</code>
      </source_code>
      <source_code type="singlecomment">
        <location start="2568" end="2623" />
        <code>// this is required to highlight stemmed words</code>
      </source_code>
      <source_code type="ifstatement">
        <location start="2623" end="2788" />
        <code>-							if (!highlightWords.contains(word)) {
+							if (!isTokenAfterNot &amp;&amp; !highlightWords.contains(word)) {
 								highlightWords.add(word);
 							}
 						}</code>
      </source_code>
      <source_code type="elsestatement">
        <location start="2780" end="3674" />
        <code>} else {
@@ -189,7 +190,7 @@
 								// highlighted all over (bug 30263)
 								if (!analyzerDesc.getId().startsWith(
 										HelpBasePlugin.PLUGIN_ID + "#")) { //$NON-NLS-1$
-									if (!highlightWords.contains(word)) {
+									if (!isTokenAfterNot &amp;&amp; !highlightWords.contains(word)) {
 										highlightWords.add(word);
 									}
 								}
@@ -209,7 +210,7 @@
 				List wordList = analyzeText(analyzer, "exact_contents", //$NON-NLS-1$
 						token.value);
 				if (wordList.size() &gt; 0) {
-					if (!highlightWords.contains(token.value)) {
+					if (!isTokenAfterNot &amp;&amp; !highlightWords.contains(token.value)) {
 						// add original word to the list of words to highlight
 						highlightWords.add(token.value);
 					}
@@ -227,6 +228,7 @@
 					newTokens.add(phrase);
 				}
 			}
+			isTokenAfterNot = (token.type == QueryWordsToken.NOT);
 		}
 		return newTokens;
 	}</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>Reporter: Jiang Lin Quan
JRE Version:  SUN JRE 1.4.2_07
Browser: firefox 1.05
OS: windows XP professional
Eclipse version:3.1.0

&lt;&lt;Steps To Reproduce&gt;&gt;
     1, Launch the Help.
     2, Search for 'help not ecli' (no quotes). 
     3, click the hits to see the highlighted search words.

&lt;&lt;Actual Result&gt;&gt;
    The substring "ecli "of "eclipse"  is  highlighted.

&lt;&lt;Expected Result&gt;&gt;
    The substring "ecli "of "eclipse" should not be highlighted.

&lt;&lt;Cause&gt;&gt;
  In QueryBuilder, the tokens after "NOT" is added to highlight terms too.  

&lt;&lt;Solution&gt;&gt;
  When the search word tokens is after "NOT", Do not add it to highlight terms.
Created attachment 31176
Fix patch
Created attachment 31707
Patch
Patch looks good, I have tested it without any problems. I revised it a little to simpify and make the formatting more consistent with the rest of the code.

Unfortunately I'm getting errors while trying to post the new patch, so I'll add it here as text:

--------------------

### Eclipse Workspace Patch 1.0
#P org.eclipse.help.base
Index: src/org/eclipse/help/internal/search/QueryBuilder.java
===================================================================
RCS file: /home/eclipse/org.eclipse.help.base/src/org/eclipse/help/internal/search/QueryBuilder.java,v
retrieving revision 1.10
diff -u -r1.10 QueryBuilder.java
--- src/org/eclipse/help/internal/search/QueryBuilder.java	20 Apr 2005 04:58:08 -0000	1.10
+++ src/org/eclipse/help/internal/search/QueryBuilder.java	19 Dec 2005 04:18:04 -0000
@@ -131,6 +131,7 @@
 	 * QueryWordsToken's.
 	 */
 	private List analyzeTokens(List tokens) {
+		boolean isTokenAfterNot = false;
 		List newTokens = new ArrayList();
 		int wildCardTermCount = 0;
 		for (int i = 0; i &lt; tokens.size(); i++) {
@@ -147,7 +148,7 @@
 						newTokens.add(QueryWordsToken.word(token.value
 								.toLowerCase(locale)));
 						// add word to the list of words to highlight
-						if (!highlightWords.contains(token.value)) {
+						if (!isTokenAfterNot &amp;&amp; !highlightWords.contains(token.value)) {
 							highlightWords.add(token.value);
 						}
 					} else {
@@ -157,7 +158,7 @@
 					List wordList = analyzeText(analyzer, "contents", //$NON-NLS-1$
 							token.value);
 					if (wordList.size() &gt; 0) {
-						if (!highlightWords.contains(token.value)) {
+						if (!isTokenAfterNot &amp;&amp; !highlightWords.contains(token.value)) {
 							// add original word to the list of words to
 							// highlight
 							highlightWords.add(token.value);
@@ -168,7 +169,7 @@
 							// add analyzed word to the list of words to
 							// highlight
 							// this is required to highlight stemmed words
-							if (!highlightWords.contains(word)) {
+							if (!isTokenAfterNot &amp;&amp; !highlightWords.contains(word)) {
 								highlightWords.add(word);
 							}
 						} else {
@@ -189,7 +190,7 @@
 								// highlighted all over (bug 30263)
 								if (!analyzerDesc.getId().startsWith(
 										HelpBasePlugin.PLUGIN_ID + "#")) { //$NON-NLS-1$
-									if (!highlightWords.contains(word)) {
+									if (!isTokenAfterNot &amp;&amp; !highlightWords.contains(word)) {
 										highlightWords.add(word);
 									}
 								}
@@ -209,7 +210,7 @@
 				List wordList = analyzeText(analyzer, "exact_contents", //$NON-NLS-1$
 						token.value);
 				if (wordList.size() &gt; 0) {
-					if (!highlightWords.contains(token.value)) {
+					if (!isTokenAfterNot &amp;&amp; !highlightWords.contains(token.value)) {
 						// add original word to the list of words to highlight
 						highlightWords.add(token.value);
 					}
@@ -227,6 +228,7 @@
 					newTokens.add(phrase);
 				}
 			}
+			isTokenAfterNot = (token.type == QueryWordsToken.NOT);
 		}
 		return newTokens;
 	}
Mazen, can you apply the patch?
Created attachment 32034
second attempt to attach patch

The pasted patch above is no good (lines wrapped)
Patch applied. Thanks for the contribution.</WithStack>
    <WithOutStack>Reporter: Jiang Lin Quan
JRE Version:  SUN JRE 1.4.2_07
Browser: firefox 1.05
OS: windows XP professional
Eclipse version:3.1.0

&lt;&lt;Steps To Reproduce&gt;&gt;
     1, Launch the Help.
     2, Search for 'help not ecli' (no quotes). 
     3, click the hits to see the highlighted search words.

&lt;&lt;Actual Result&gt;&gt;
    The substring "ecli "of "eclipse"  is  highlighted.

&lt;&lt;Expected Result&gt;&gt;
    The substring "ecli "of "eclipse" should not be highlighted.

&lt;&lt;Cause&gt;&gt;
  In QueryBuilder, the tokens after "NOT" is added to highlight terms too.  

&lt;&lt;Solution&gt;&gt;
  When the search word tokens is after "NOT", Do not add it to highlight terms.
Created attachment 31176
Fix patch
Created attachment 31707
Patch
Patch looks good, I have tested it without any problems. I revised it a little to simpify and make the formatting more consistent with the rest of the code.

Unfortunately I'm getting errors while trying to post the new patch, so I'll add it here as text:

--------------------

### Eclipse Workspace Patch 1.0
#P org.eclipse.help.base
Index: src/org/eclipse/help/internal/search/QueryBuilder.java
===================================================================
RCS file: /home/eclipse/org.eclipse.help.base/src/org/eclipse/help/internal/search/QueryBuilder.java,v
retrieving revision 1.10
diff -u -r1.10 QueryBuilder.java
--- src/org/eclipse/help/internal/search/QueryBuilder.java	20 Apr 2005 04:58:08 -0000	1.10
+++ src/org/eclipse/help/internal/search/QueryBuilder.java	19 Dec 2005 04:18:04 -0000
@@ -131,6 +131,7 @@
 	 * QueryWordsToken's.
 	 */
 	private List analyzeTokens(List tokens) {
+		boolean isTokenAfterNot = false;
 		List newTokens = new ArrayList();
 		int wildCardTermCount = 0;
 		for (int i = 0; i &lt; tokens.size(); i++) {
@@ -147,7 +148,7 @@
 						newTokens.add(QueryWordsToken.word(token.value
 								.toLowerCase(locale)));
 						// add word to the list of words to highlight
-						if (!highlightWords.contains(token.value)) {
+						if (!isTokenAfterNot &amp;&amp; !highlightWords.contains(token.value)) {
 							highlightWords.add(token.value);
 						}
 					} else {
@@ -157,7 +158,7 @@
 					List wordList = analyzeText(analyzer, "contents", //$NON-NLS-1$
 							token.value);
 					if (wordList.size() &gt; 0) {
-						if (!highlightWords.contains(token.value)) {
+						if (!isTokenAfterNot &amp;&amp; !highlightWords.contains(token.value)) {
 							// add original word to the list of words to
 							// highlight
 							highlightWords.add(token.value);
@@ -168,7 +169,7 @@
 							// add analyzed word to the list of words to
 							// highlight
 							// this is required to highlight stemmed words
-							if (!highlightWords.contains(word)) {
+							if (!isTokenAfterNot &amp;&amp; !highlightWords.contains(word)) {
 								highlightWords.add(word);
 							}
 						} else {
@@ -189,7 +190,7 @@
 								// highlighted all over (bug 30263)
 								if (!analyzerDesc.getId().startsWith(
 										HelpBasePlugin.PLUGIN_ID + "#")) { //$NON-NLS-1$
-									if (!highlightWords.contains(word)) {
+									if (!isTokenAfterNot &amp;&amp; !highlightWords.contains(word)) {
 										highlightWords.add(word);
 									}
 								}
@@ -209,7 +210,7 @@
 				List wordList = analyzeText(analyzer, "exact_contents", //$NON-NLS-1$
 						token.value);
 				if (wordList.size() &gt; 0) {
-					if (!highlightWords.contains(token.value)) {
+					if (!isTokenAfterNot &amp;&amp; !highlightWords.contains(token.value)) {
 						// add original word to the list of words to highlight
 						highlightWords.add(token.value);
 					}
@@ -227,6 +228,7 @@
 					newTokens.add(phrase);
 				}
 			}
+			isTokenAfterNot = (token.type == QueryWordsToken.NOT);
 		}
 		return newTokens;
 	}
Mazen, can you apply the patch?
Created attachment 32034
second attempt to attach patch

The pasted patch above is no good (lines wrapped)
Patch applied. Thanks for the contribution.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="119365" />
    <CreationDate amount="2005-12-06 01:34:00 -0500" />
    <DupId amount="119547" />
    <classification amount="BIRT" />
    <Product amount="BIRT" />
    <component amount="Report Designer" />
    <Version amount="2.0.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows 2000" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Library - Support DND from palette to editor</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="5">
        <Lines>
          <Line>- To add a new report item to a library</Line>
          <Line>user should be able to drag and drop a report item from palette to the layout.</Line>
          <Line>- If the library contains no report items, it should add a new component</Line>
          <Line>- If the library already contains a report item, dragging in the area outside the current component should add the component to the library and show tht componenet in the layout.</Line>
          <Line>- The layout should show the last selected report item. Behaviour is similar to the report design layout. i.e - Selecting a non visual report element, will NOT show the message 'Non visual item selected' anymore</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="RESOLVED" />
    <resolution amount="DUPLICATE" />
    <WithStack>During the review meeting it was decided to support adding a new library component by DND a report item from palete to the layout.

- To add a new report item to a library
user should be able to drag and drop a report item from palette to the layout. 
- If the library contains no report items, it should add a new component
- If the library already contains a report item, dragging in the area outside the current component should add the component to the library and show tht componenet in the layout.
- The layout should show the last selected report item. Behaviour is similar to the report design layout. i.e - Selecting a non visual report element, will NOT show the message 'Non visual item selected' anymore


*** This bug has been marked as a duplicate of 119547 ***
Verified in build 20051219.</WithStack>
    <WithOutStack>During the review meeting it was decided to support adding a new library component by DND a report item from palete to the layout.

- To add a new report item to a library
user should be able to drag and drop a report item from palette to the layout. 
- If the library contains no report items, it should add a new component
- If the library already contains a report item, dragging in the area outside the current component should add the component to the library and show tht componenet in the layout.
- The layout should show the last selected report item. Behaviour is similar to the report design layout. i.e - Selecting a non visual report element, will NOT show the message 'Non visual item selected' anymore


*** This bug has been marked as a duplicate of 119547 ***
Verified in build 20051219.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="119366" />
    <CreationDate amount="2005-12-06 01:41:00 -0500" />
    <DupId amount="" />
    <classification amount="BIRT" />
    <Product amount="BIRT" />
    <component amount="Report Designer" />
    <Version amount="2.0.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows 2000" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Changes to template publish dialog</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="6">
        <Lines>
          <Line>- Rename Template publish dialog to 'Template description'</Line>
          <Line>- This dialog should not be shown while publishing.</Line>
          <Line>- Please show this dialog after user selects New Template and selects the file name.</Line>
          <Line>- Also show this dialog when the user clicks save as menu item.</Line>
          <Line>Add page for New Tempalte/Report wizard to allow input of diaply name, description and preview image.</Line>
          <Line>Verified in build 20051223.</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>- Rename Template publish dialog to 'Template description'
- This dialog should not be shown while publishing.
- Please show this dialog after user selects New Template and selects the file name.
- Also show this dialog when the user clicks save as menu item.
Add page for New Tempalte/Report wizard to allow input of diaply name, description and preview image.
Verified in build 20051223.</WithStack>
    <WithOutStack>- Rename Template publish dialog to 'Template description'
- This dialog should not be shown while publishing.
- Please show this dialog after user selects New Template and selects the file name.
- Also show this dialog when the user clicks save as menu item.
Add page for New Tempalte/Report wizard to allow input of diaply name, description and preview image.
Verified in build 20051223.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="119367" />
    <CreationDate amount="2005-12-06 01:46:00 -0500" />
    <DupId amount="" />
    <classification amount="BIRT" />
    <Product amount="BIRT" />
    <component amount="Report" />
    <Version amount="2.0.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows 2000" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Library - remove initialize method.</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>Remove the initialize() method from the library, this is only supported for report design.
Removed in ROM.def
Verified in build 20051222.</WithStack>
    <WithOutStack>Remove the initialize() method from the library, this is only supported for report design.
Removed in ROM.def
Verified in build 20051222.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="119368" />
    <CreationDate amount="2005-12-06 01:47:00 -0500" />
    <DupId amount="118582" />
    <classification amount="Mylyn" />
    <Product amount="Mylyn" />
    <component amount="Bugzilla" />
    <Version amount="0.4" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P2" />
    <bug_severity amount="blocker" />
    <Summery>http auth dialog freezes eclipse</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="DUPLICATE" />
    <WithStack>I've enabled the options that makes mylar refresh all bugzilla queries on startup. The problem is when I start eclipse and the http/web auth popup appears, if I press escape/click cancel rather than entering the login/pass, it completely freezes eclipse. Even if it does crash, shouldn't this operation be non-modal anyway...?
That popup does not come from Mylar or the Bugzilla Client, but from the browser or java.net.  But I will look into making the client more defensive to this issue when resolving the corresponding report.

*** This bug has been marked as a duplicate of 118582 ***</WithStack>
    <WithOutStack>I've enabled the options that makes mylar refresh all bugzilla queries on startup. The problem is when I start eclipse and the http/web auth popup appears, if I press escape/click cancel rather than entering the login/pass, it completely freezes eclipse. Even if it does crash, shouldn't this operation be non-modal anyway...?
That popup does not come from Mylar or the Bugzilla Client, but from the browser or java.net.  But I will look into making the client more defensive to this issue when resolving the corresponding report.

*** This bug has been marked as a duplicate of 118582 ***</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="119369" />
    <CreationDate amount="2005-12-06 02:01:00 -0500" />
    <DupId amount="" />
    <classification amount="BIRT" />
    <Product amount="BIRT" />
    <component amount="Report Engine" />
    <Version amount="unspecified" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>[Regression]Toc defined in table detail cannot be retrieved using findToc in ReportDocument class.</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="2">
        <Lines>
          <Line>1. Generate report document using attached report design.</Line>
          <Line>2. Using findToc() and getChildren() in TOCNode class to get toc</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="CLOSED" />
    <resolution amount="INVALID" />
    <WithStack>Description:
Toc defined in table detail cannot be retrieved using findToc in ReportDocument class.

Steps to reproduce:
1. Generate report document using attached report design.
2. Using findToc() and getChildren() in TOCNode class to get toc

Expected result:
All toc definitions in design file are retrieved.

Actual result:
Only tocs in table header/footer/group were retrived.
Created attachment 31178
design file
the TOC of detail is under the TOC of group.
cancel this bug.</WithStack>
    <WithOutStack>Description:
Toc defined in table detail cannot be retrieved using findToc in ReportDocument class.

Steps to reproduce:
1. Generate report document using attached report design.
2. Using findToc() and getChildren() in TOCNode class to get toc

Expected result:
All toc definitions in design file are retrieved.

Actual result:
Only tocs in table header/footer/group were retrived.
Created attachment 31178
design file
the TOC of detail is under the TOC of group.
cancel this bug.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="119370" />
    <CreationDate amount="2005-12-06 02:04:00 -0500" />
    <DupId amount="" />
    <classification amount="Tools" />
    <Product amount="CDT" />
    <component amount="cdt-debug" />
    <Version amount="3.1" />
    <rep_platform amount="All" />
    <op_sys amount="All" />
    <priority amount="P3" />
    <bug_severity amount="enhancement" />
    <Summery>Target stream should be collected as out-of-band-record for MIInfo evaluation</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="4">
      <Enumeration lines="3">
        <Lines>
          <Line>1) The proposal needs to extend the gdb stub only. The stub is made for adaptation and the adaptation procedure is described in the manual so we are assured that the gdb folk are aware of and will be supporting our approach.</Line>
          <Line />
          <Line>2) The proposal makes existing "monitor" commands available for CDT debug views along with those which are newly created.</Line>
        </Lines>
      </Enumeration>
      <Enumeration lines="5">
        <Lines>
          <Line>- The debug view registers for debug events. (DebugPlugin.addDebugEventListener()).</Line>
          <Line>- When a suspend event is fired (DebugEvent.SUSPEND) a worker thread creates a monitor command object (derived from CLICommand) and posts it to the MISession (MISession.postCommand()).</Line>
          <Line>- The thread then calls Command.getMIInfo() which makes it wait until the command is finished.</Line>
          <Line>- RxThread collects all text which is returned as output in response to the command and puts it into an MIInfo object in the form of out-of-band records (MIOOBRecord).</Line>
          <Line>- This is where the bugfix comes in: Only after the fix is the target stream output stored in the MIInfo object and can be processed by the view's worker thread when it returns from MIInfo().</Line>
        </Lines>
      </Enumeration>
      <Enumeration lines="2">
        <Lines>
          <Line>- Yes, the fix solves a problem, namely to make target stream output available to debug event listeners and</Line>
          <Line>- Yes, it works for me.</Line>
        </Lines>
      </Enumeration>
      <Enumeration lines="2">
        <Lines>
          <Line>- create a new bugzilla for your request - this bugzilla is related, but not quite the same as yours.</Line>
          <Line>- try to start a discussion in the cdt-dev list. If there are no negative replies, why not treat the target output stream like all the others.</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>We are using gdb's "monitor" commands to query some internal information of our debug target. The guidelines in the gdb manual are to extend the serial protocol by modifying the gdb stub (only, without modifying gdb) to understand new monitor commands. Monitor commands are sent as

$qRcmd 

packets. Responses are to be sent as "$O" packets. gdb outputs these with the token "@", i.e. as belonging to the target output stream. Here is a sample of "monitor mbox", a newly introduced command which reports the status the OS's mailboxes:

=======snip==================
[1,133,772,933,238] (gdb)
[1,133,772,936,751] 61 monitor mbox
[1,133,772,936,753] &amp;"monitor mbox\n"
[1,133,772,936,787] @"Box at 0x320dd56c: 0 messages\n"
[1,133,772,936,798] @"Total 1 boxes\n"
[1,133,772,936,802] 61^done
[1,133,772,936,803] (gdb)
=======snap==================

Now in order to use this command from eclipse and populate a new debug view from the output we created the usual CLICommand - MIInfo pair and posted the command via the MISession. Everything works fine except that the records containing the real information are not there. They are not collected in 

org.eclipse.cdt.debug.mi.core.RxThread.processMIOOBRecord(MIStreamRecord stream)

where the three possible output streams are processed. The current implementation is:

Console stream output: echo to console and collect as OOB record.
Log     stream output: echo to console and collect as OOB record.
Target  stream output: just echo to console.

The proposal is to add collecting as OOB record to the third alternative. This will make the output of any monitor commands that are present in a target, or that can be added by extending the gdb stub, available for automatic processing in the CDT debugging framework.
Alternate implementation suggestion from Mikhail Khodjaiants:

&gt; The alternative solution would be the addition of a special MI command for 
this. Is it doable?

I would rather have the enhancement along the lines I suggested above for the following reasons:

1) The proposal needs to extend the gdb stub only. The stub is made for adaptation and the adaptation procedure is described in the manual so we are assured that the gdb folk are aware of and will be supporting our approach.

2) The proposal makes existing "monitor" commands available for CDT debug views along with those which are newly created.

More comments Mikhail? (Or anybody?)
(In reply to comment #1)
&gt; More comments Mikhail? (Or anybody?)

Just a simple question: do you need this for 3.0.2 or 3.1?
No special hurry, I can go by using a patched version of RxThread. I just want to be sure that it will not be forgotten on the long road to version 3.1. 

I understand that fixes for 3.1 go to HEAD and that there is a branch for 3.0.2 and I guess I am happiest if you do the fix now, although it's sufficient to do it in HEAD only.

Thanks a lot!

What if do it this way: I'll set the target milestone to 3.1 and you try the patched version and we'll see if there are some side effects. I didn't write this code and I'm not very comfortable changing it until I learn more.
Is this OK with you?
Fine, just let me know when you've applied the patches.
Hey Michail,

with my changed status I could now do the patch in case you don't find the time. Shall I?


Norbert
Norbert, 
Currently, I am making major changes in mi plugins and I don't want to commit it until I am done with it. Merging is a pain and takes a lot of time. Please, wait I'll let you know when it is save.
Thanks,
Mikhail
Supporting the GDB "monitor" command is an important feature for embedded development.

Seems to work fine on my rocket.

I'm using a BDI 2000 JTAG debugger and I took some simple "monitor" commands for a spin.


(gdb) monitor info
    Core number       : 0
    Core state        : debug mode (ARM)
    Debug entry cause : Breakpoint
    Current PC        : 0x0103fc00
    Current CPSR      : 0x20000013 (Supervisor)

Marking as fixed. Thanks, Norbert.
I had a question regarding this fix.  So when I type "monitor test" will whatever "monitor test" returns be displayed on eclipse console?  Or is this only to be passed to MIInfo?  If it is suppose to be displayed onto the eclipse console than I'm pretty sure the fix does not work.  I just wanted to sure as to what exactly it is suppose to do before going on.  Hope I didn't waste too much of everyone's time.

Mitchell
(In reply to comment #10)
Mitchell,

the purpose of the fix was to get target stream output records into the MIInfo object which can be processed when the target responds to a (monitor) command. The fix does not intend to change the console behavior.
From taking a look at the code I think that the application output should appear in a console, though probably not in the gdb command line console. Alas, I do not have a live example handy and I am not very deeply familiar with the code.
Maybe you should post your question on the mailing list if you think there is something wrong with the behavior.
(In reply to comment #11)
Norbert, what is supposed to happen in this case? We don't use the "monitor" command and I don't have a test case. Didn't you submit it to solve a problem with your implementation? So, does it work for you or not?
(In reply to comment #12)
&gt; (In reply to comment #11)
&gt; Norbert, what is supposed to happen in this case? We don't use the "monitor"
&gt; command and I don't have a test case. Didn't you submit it to solve a problem
&gt; with your implementation? So, does it work for you or not?

I am populating a self-made view from the output of the monitor command. 
- The debug view registers for debug events. (DebugPlugin.addDebugEventListener()).
- When a suspend event is fired (DebugEvent.SUSPEND) a worker thread creates a monitor command object (derived from CLICommand) and posts it to the MISession (MISession.postCommand()).
- The thread then calls Command.getMIInfo() which makes it wait until the command is finished.
- RxThread collects all text which is returned as output in response to the command and puts it into an MIInfo object in the form of out-of-band records (MIOOBRecord). 
- This is where the bugfix comes in: Only after the fix is the target stream output stored in the MIInfo object and can be processed by the view's worker thread when it returns from MIInfo().

So in short:
- Yes, the fix solves a problem, namely to make target stream output available to debug event listeners and
- Yes, it works for me.

I did not need a console echo of the output and I do not remember (this is now about 6 months past) whether there was a console echo.
Alas, my debug view was not used much since then and I do not have a testing scenario handy to see what happens.
Sorry for the confusion. I was under the impression that the fix also enabled the monitor output to eclipse gdb console.  But anyways, the fix does what it is suppose to do.  Again, sorry for the confusion.

Mitchell

(In reply to comment #13)
&gt; (In reply to comment #12)
&gt; &gt; (In reply to comment #11)

Sorry to awaken this thread again...

I am using the "monitor" commands to collect additional information from an embedded target. It is working OK, except that the response is appearing in the console, and I can't disable it.

In RxThread#processMIOOBRecord, for objects of class MIConsoleStreamOutput and MILogStreamOutput, isEnableConsole() is checked before writing to the console, but for MITargetStreamOutput it is not and so the output is alwsys written.

I can't (and don't want to) change GDB. Any suggestions?

Thanks,
(In reply to comment #15)
&gt; Sorry to awaken this thread again...

I think your request is actually different from what this bug report is about.

&gt; embedded target. It is working OK, except that the response is appearing in the
&gt; console, and I can't disable it.
&gt; but for MITargetStreamOutput it is not and so the output is alwsys written.

I agree to your analysis. Bug or feature? that's the question. It could make sense that the target's output stream is written (it is the "standard output" of the debugged application after all) while gdb churn around it is filtered out. If you use the isEnableConsole() method also for the target output stream then you can have either app output plus gdb churn or nothing at all.

But I don't have a usecase where this would hurt me. So I suggest you

- create a new bugzilla for your request - this bugzilla is related, but not quite the same as yours.
- try to start a discussion in the cdt-dev list. If there are no negative replies, why not treat the target output stream like all the others.

This fix creates a memory leak for the duration of the target run. The total memory used is proportional to the print output of the target... see bug 302927</WithStack>
    <WithOutStack>We are using gdb's "monitor" commands to query some internal information of our debug target. The guidelines in the gdb manual are to extend the serial protocol by modifying the gdb stub (only, without modifying gdb) to understand new monitor commands. Monitor commands are sent as

$qRcmd 

packets. Responses are to be sent as "$O" packets. gdb outputs these with the token "@", i.e. as belonging to the target output stream. Here is a sample of "monitor mbox", a newly introduced command which reports the status the OS's mailboxes:

=======snip==================
[1,133,772,933,238] (gdb)
[1,133,772,936,751] 61 monitor mbox
[1,133,772,936,753] &amp;"monitor mbox\n"
[1,133,772,936,787] @"Box at 0x320dd56c: 0 messages\n"
[1,133,772,936,798] @"Total 1 boxes\n"
[1,133,772,936,802] 61^done
[1,133,772,936,803] (gdb)
=======snap==================

Now in order to use this command from eclipse and populate a new debug view from the output we created the usual CLICommand - MIInfo pair and posted the command via the MISession. Everything works fine except that the records containing the real information are not there. They are not collected in 

org.eclipse.cdt.debug.mi.core.RxThread.processMIOOBRecord(MIStreamRecord stream)

where the three possible output streams are processed. The current implementation is:

Console stream output: echo to console and collect as OOB record.
Log     stream output: echo to console and collect as OOB record.
Target  stream output: just echo to console.

The proposal is to add collecting as OOB record to the third alternative. This will make the output of any monitor commands that are present in a target, or that can be added by extending the gdb stub, available for automatic processing in the CDT debugging framework.
Alternate implementation suggestion from Mikhail Khodjaiants:

&gt; The alternative solution would be the addition of a special MI command for 
this. Is it doable?

I would rather have the enhancement along the lines I suggested above for the following reasons:

1) The proposal needs to extend the gdb stub only. The stub is made for adaptation and the adaptation procedure is described in the manual so we are assured that the gdb folk are aware of and will be supporting our approach.

2) The proposal makes existing "monitor" commands available for CDT debug views along with those which are newly created.

More comments Mikhail? (Or anybody?)
(In reply to comment #1)
&gt; More comments Mikhail? (Or anybody?)

Just a simple question: do you need this for 3.0.2 or 3.1?
No special hurry, I can go by using a patched version of RxThread. I just want to be sure that it will not be forgotten on the long road to version 3.1. 

I understand that fixes for 3.1 go to HEAD and that there is a branch for 3.0.2 and I guess I am happiest if you do the fix now, although it's sufficient to do it in HEAD only.

Thanks a lot!

What if do it this way: I'll set the target milestone to 3.1 and you try the patched version and we'll see if there are some side effects. I didn't write this code and I'm not very comfortable changing it until I learn more.
Is this OK with you?
Fine, just let me know when you've applied the patches.
Hey Michail,

with my changed status I could now do the patch in case you don't find the time. Shall I?


Norbert
Norbert, 
Currently, I am making major changes in mi plugins and I don't want to commit it until I am done with it. Merging is a pain and takes a lot of time. Please, wait I'll let you know when it is save.
Thanks,
Mikhail
Supporting the GDB "monitor" command is an important feature for embedded development.

Seems to work fine on my rocket.

I'm using a BDI 2000 JTAG debugger and I took some simple "monitor" commands for a spin.


(gdb) monitor info
    Core number       : 0
    Core state        : debug mode (ARM)
    Debug entry cause : Breakpoint
    Current PC        : 0x0103fc00
    Current CPSR      : 0x20000013 (Supervisor)

Marking as fixed. Thanks, Norbert.
I had a question regarding this fix.  So when I type "monitor test" will whatever "monitor test" returns be displayed on eclipse console?  Or is this only to be passed to MIInfo?  If it is suppose to be displayed onto the eclipse console than I'm pretty sure the fix does not work.  I just wanted to sure as to what exactly it is suppose to do before going on.  Hope I didn't waste too much of everyone's time.

Mitchell
(In reply to comment #10)
Mitchell,

the purpose of the fix was to get target stream output records into the MIInfo object which can be processed when the target responds to a (monitor) command. The fix does not intend to change the console behavior.
From taking a look at the code I think that the application output should appear in a console, though probably not in the gdb command line console. Alas, I do not have a live example handy and I am not very deeply familiar with the code.
Maybe you should post your question on the mailing list if you think there is something wrong with the behavior.
(In reply to comment #11)
Norbert, what is supposed to happen in this case? We don't use the "monitor" command and I don't have a test case. Didn't you submit it to solve a problem with your implementation? So, does it work for you or not?
(In reply to comment #12)
&gt; (In reply to comment #11)
&gt; Norbert, what is supposed to happen in this case? We don't use the "monitor"
&gt; command and I don't have a test case. Didn't you submit it to solve a problem
&gt; with your implementation? So, does it work for you or not?

I am populating a self-made view from the output of the monitor command. 
- The debug view registers for debug events. (DebugPlugin.addDebugEventListener()).
- When a suspend event is fired (DebugEvent.SUSPEND) a worker thread creates a monitor command object (derived from CLICommand) and posts it to the MISession (MISession.postCommand()).
- The thread then calls Command.getMIInfo() which makes it wait until the command is finished.
- RxThread collects all text which is returned as output in response to the command and puts it into an MIInfo object in the form of out-of-band records (MIOOBRecord). 
- This is where the bugfix comes in: Only after the fix is the target stream output stored in the MIInfo object and can be processed by the view's worker thread when it returns from MIInfo().

So in short:
- Yes, the fix solves a problem, namely to make target stream output available to debug event listeners and
- Yes, it works for me.

I did not need a console echo of the output and I do not remember (this is now about 6 months past) whether there was a console echo.
Alas, my debug view was not used much since then and I do not have a testing scenario handy to see what happens.
Sorry for the confusion. I was under the impression that the fix also enabled the monitor output to eclipse gdb console.  But anyways, the fix does what it is suppose to do.  Again, sorry for the confusion.

Mitchell

(In reply to comment #13)
&gt; (In reply to comment #12)
&gt; &gt; (In reply to comment #11)

Sorry to awaken this thread again...

I am using the "monitor" commands to collect additional information from an embedded target. It is working OK, except that the response is appearing in the console, and I can't disable it.

In RxThread#processMIOOBRecord, for objects of class MIConsoleStreamOutput and MILogStreamOutput, isEnableConsole() is checked before writing to the console, but for MITargetStreamOutput it is not and so the output is alwsys written.

I can't (and don't want to) change GDB. Any suggestions?

Thanks,
(In reply to comment #15)
&gt; Sorry to awaken this thread again...

I think your request is actually different from what this bug report is about.

&gt; embedded target. It is working OK, except that the response is appearing in the
&gt; console, and I can't disable it.
&gt; but for MITargetStreamOutput it is not and so the output is alwsys written.

I agree to your analysis. Bug or feature? that's the question. It could make sense that the target's output stream is written (it is the "standard output" of the debugged application after all) while gdb churn around it is filtered out. If you use the isEnableConsole() method also for the target output stream then you can have either app output plus gdb churn or nothing at all.

But I don't have a usecase where this would hurt me. So I suggest you

- create a new bugzilla for your request - this bugzilla is related, but not quite the same as yours.
- try to start a discussion in the cdt-dev list. If there are no negative replies, why not treat the target output stream like all the others.

This fix creates a memory leak for the duration of the target run. The total memory used is proportional to the print output of the target... see bug 302927</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="119371" />
    <CreationDate amount="2005-12-06 02:11:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="JDT" />
    <component amount="Debug" />
    <Version amount="3.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>A missing EE optional attribute causes an SWT error</Summery>
    <Patches amount="0" />
    <Stacktraces amount="1">
      <Stacktrace timestamp="1437330614247">
        <Exception>java.lang.IllegalArgumentException</Exception>
        <Reason>Argument cannot be null</Reason>
        <Frames>
          <Frame depth="0">org.eclipse.swt.SWT.error(SWT.java:3246)</Frame>
          <Frame depth="1">org.eclipse.swt.SWT.error(SWT.java:3185)</Frame>
          <Frame depth="2">org.eclipse.swt.SWT.error(SWT.java:3156)</Frame>
          <Frame depth="3">org.eclipse.swt.widgets.Widget.error(Widget.java:413)</Frame>
          <Frame depth="4">org.eclipse.swt.widgets.Text.setText(Text.java:1626)</Frame>
          <Frame depth="5">org.eclipse.jdt.internal.debug.ui.jres.JREProfilesPreferencePage$1.selectionChanged(JREProfilesPreferencePage.java:171)</Frame>
          <Frame depth="6">org.eclipse.jface.viewers.Viewer$2.run(Viewer.java:162)</Frame>
          <Frame depth="7">org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:37)</Frame>
          <Frame depth="8">org.eclipse.core.runtime.Platform.run(Platform.java:785)</Frame>
          <Frame depth="9">org.eclipse.ui.internal.JFaceUtil$1.run(JFaceUtil.java:44)</Frame>
          <Frame depth="10">org.eclipse.jface.util.SafeRunnable.run(SafeRunnable.java:148)</Frame>
          <Frame depth="11">org.eclipse.jface.viewers.Viewer.fireSelectionChanged(Viewer.java:160)</Frame>
          <Frame depth="12">org.eclipse.jface.viewers.StructuredViewer.updateSelection(StructuredViewer.java:1784)</Frame>
          <Frame depth="13">org.eclipse.jface.viewers.StructuredViewer.handleSelect(StructuredViewer.java:1027)</Frame>
          <Frame depth="14">org.eclipse.jface.viewers.StructuredViewer$4.widgetSelected(StructuredViewer.java:1053)</Frame>
          <Frame depth="15">org.eclipse.jface.util.OpenStrategy.fireSelectionEvent(OpenStrategy.java:210)</Frame>
          <Frame depth="16">org.eclipse.jface.util.OpenStrategy.access$3(OpenStrategy.java:205)</Frame>
          <Frame depth="17">org.eclipse.jface.util.OpenStrategy$1.handleEvent(OpenStrategy.java:365)</Frame>
          <Frame depth="18">org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)</Frame>
          <Frame depth="19">org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:906)</Frame>
          <Frame depth="20">org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3241)</Frame>
          <Frame depth="21">org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2861)</Frame>
          <Frame depth="22">org.eclipse.jface.window.Window.runEventLoop(Window.java:808)</Frame>
          <Frame depth="23">org.eclipse.jface.window.Window.open(Window.java:786)</Frame>
          <Frame depth="24">org.eclipse.ui.internal.OpenPreferencesAction.run(OpenPreferencesAction.java:66)</Frame>
          <Frame depth="25">org.eclipse.jface.action.Action.runWithEvent(Action.java:492)</Frame>
          <Frame depth="26">org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection(ActionContributionItem.java:530)</Frame>
          <Frame depth="27">org.eclipse.jface.action.ActionContributionItem.access$2(ActionContributionItem.java:480)</Frame>
          <Frame depth="28">org.eclipse.jface.action.ActionContributionItem$5.handleEvent(ActionContributionItem.java:392)</Frame>
          <Frame depth="29">org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)</Frame>
          <Frame depth="30">org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:906)</Frame>
          <Frame depth="31">org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3241)</Frame>
          <Frame depth="32">org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2861)</Frame>
          <Frame depth="33">org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1763)</Frame>
          <Frame depth="34">org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1727)</Frame>
          <Frame depth="35">org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:396)</Frame>
          <Frame depth="36">org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:143)</Frame>
          <Frame depth="37">org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:106)</Frame>
          <Frame depth="38">org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:109)</Frame>
          <Frame depth="39">org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:92)</Frame>
          <Frame depth="40">org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:68)</Frame>
          <Frame depth="41">org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:369)</Frame>
          <Frame depth="42">org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:167)</Frame>
          <Frame depth="43">sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)</Frame>
          <Frame depth="44">sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)</Frame>
          <Frame depth="45">sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)</Frame>
          <Frame depth="46">java.lang.reflect.Method.invoke(Method.java:324)</Frame>
          <Frame depth="47">org.eclipse.core.launcher.Main.invokeFramework(Main.java:338)</Frame>
          <Frame depth="48">org.eclipse.core.launcher.Main.basicRun(Main.java:282)</Frame>
          <Frame depth="49">org.eclipse.core.launcher.Main.run(Main.java:977)</Frame>
          <Frame depth="50">org.eclipse.core.launcher.Main.main(Main.java:952)</Frame>
        </Frames>
      </Stacktrace>
    </Stacktraces>
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="VERIFIED" />
    <resolution amount="FIXED" />
    <WithStack>The 'description' attribute in the executionEnvironments extension point is supposed to be optional.

however, if the description is missing, the following error occurs whenever I select such a JRE profile on the JRE Profiles preference page.

Error 2005-12-06 02:06:44.492 Problems occurred when invoking code from plug-in: "org.eclipse.jface".
java.lang.IllegalArgumentException: Argument cannot be null
at org.eclipse.swt.SWT.error(SWT.java:3246)
at org.eclipse.swt.SWT.error(SWT.java:3185)
at org.eclipse.swt.SWT.error(SWT.java:3156)
at org.eclipse.swt.widgets.Widget.error(Widget.java:413)
at org.eclipse.swt.widgets.Text.setText(Text.java:1626)
at org.eclipse.jdt.internal.debug.ui.jres.JREProfilesPreferencePage$1.selectionChanged(JREProfilesPreferencePage.java:171)
at org.eclipse.jface.viewers.Viewer$2.run(Viewer.java:162)
at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:37)
at org.eclipse.core.runtime.Platform.run(Platform.java:785)
at org.eclipse.ui.internal.JFaceUtil$1.run(JFaceUtil.java:44)
at org.eclipse.jface.util.SafeRunnable.run(SafeRunnable.java:148)
at org.eclipse.jface.viewers.Viewer.fireSelectionChanged(Viewer.java:160)
at org.eclipse.jface.viewers.StructuredViewer.updateSelection(StructuredViewer.java:1784)
at org.eclipse.jface.viewers.StructuredViewer.handleSelect(StructuredViewer.java:1027)
at org.eclipse.jface.viewers.StructuredViewer$4.widgetSelected(StructuredViewer.java:1053)
at org.eclipse.jface.util.OpenStrategy.fireSelectionEvent(OpenStrategy.java:210)
at org.eclipse.jface.util.OpenStrategy.access$3(OpenStrategy.java:205)
at org.eclipse.jface.util.OpenStrategy$1.handleEvent(OpenStrategy.java:365)
at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:906)
at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3241)
at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2861)
at org.eclipse.jface.window.Window.runEventLoop(Window.java:808)
at org.eclipse.jface.window.Window.open(Window.java:786)
at org.eclipse.ui.internal.OpenPreferencesAction.run(OpenPreferencesAction.java:66)
at org.eclipse.jface.action.Action.runWithEvent(Action.java:492)
at org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection(ActionContributionItem.java:530)
at org.eclipse.jface.action.ActionContributionItem.access$2(ActionContributionItem.java:480)
at org.eclipse.jface.action.ActionContributionItem$5.handleEvent(ActionContributionItem.java:392)
at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:906)
at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3241)
at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2861)
at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1763)
at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1727)
at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:396)
at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:143)
at org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:106)
at org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:109)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:92)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:68)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:369)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:167)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:324)
at org.eclipse.core.launcher.Main.invokeFramework(Main.java:338)
at org.eclipse.core.launcher.Main.basicRun(Main.java:282)
at org.eclipse.core.launcher.Main.run(Main.java:977)
at org.eclipse.core.launcher.Main.main(Main.java:952)
Fixed in JREProfilesPreferencePage.
Please verify, Kevin.
verified</WithStack>
    <WithOutStack>The 'description' attribute in the executionEnvironments extension point is supposed to be optional.

however, if the description is missing, the following error occurs whenever I select such a JRE profile on the JRE Profiles preference page.

Error 2005-12-06 02:06:44.492 Problems occurred when invoking code from plug-in: "org.eclipse.jface".

Fixed in JREProfilesPreferencePage.
Please verify, Kevin.
verified</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="119372" />
    <CreationDate amount="2005-12-06 02:19:00 -0500" />
    <DupId amount="" />
    <classification amount="Mylyn" />
    <Product amount="Mylyn" />
    <component amount="Core" />
    <Version amount="0.4" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P1" />
    <bug_severity amount="blocker" />
    <Summery>workspace move breaks mylar paths</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>Hi. I renamed my workspace directory, re-launched eclipse, pointed it to my new workspace directory and all the tasks (well, bugzilla queries) were gone, even though the untouched .mylar directory was still in the workspace root. 

And also, going to preferences -&gt; mylar -&gt; monitor, the "enable logging to" value is still unchecked which is good, but it even the greyed out value is set to the old directory.
Created attachment 31193
Screenshot of error

After creating a new bugzilla query, it sucessfully downloaded the bugs. I activated one and started to do work. After about 15 min, an error occured (see screenshot). It's still using the old absolute path.

FYI, I created a new file and typed "abstract class " to create a new class when the error occurred.
Thansk for diagnosing David, that will make it quicker to fix.
Btw David, you can manually edit the path of the context file for the resource.  Just double click the task to open the editor, click the Task Info tab, and expand the "Resources" section.  But until 0.4.5 it may just be easier for you to try to keep the .mylar directory in the old location if that's possible, and then move it again.
Hi David,

I tried renaming both my runtime and development workspaces and the tasks, queries, and contexts moved properly. The broken path issue was a problem with earlier versions of Mylar but it should be working now (I tried with 0.4.4). 

What version are you using?
I was using 0.4.4 too...hmmm...how did u rename ur workspace?
I'm using Windows XP and I just renamed the folder containing the workspace. 

How long have you been using Mylar? The problem could be that your tasks (and possibly queries?) were created using earlier versions of Mylar that had a problem with with moving due to error-prone path information in the data files.
I can vouch for the fact that David has been using Mylar for quite some time :)

Which means that the task list workspace moves need to take care of the old paths.  I'm guessing that I won't have trouble triggering this problem with my task list since I get to claim being the first Mylar user.

Wesley, if you're planning on looking into this let me know and I can attach my task list.  Otherwise I hope to get to it tomorrow.
Mik, I have one of your old task lists so I can try moving the workspace using it.
Hi guys.

Although I'm using 0.4.4 now, I'm quite sure that I was using an earlier version from the 0.4.x series when I created the workspace. Here's the thing though, after the trouble I was getting after i renamed the workspace, i closed eclipse, manually deleted the .mylar directory, relaunched eclipse and made sure that the Task Directory (in prefs-&gt;mylar-&gt;task list) was correct. Since then everything's been fine BUT, just to test it I closed eclipse, renamed the workspace and tried again and guess what - my bugzilla queries were gone. The Task Directory in the prefs was still pointing at the old directory. Although now that I think about it I problably should've tried changing it. But still, shouldn't have to if it's in the workspace. Maybe %workspace%/.mylar would be a better solution that the full path.

Good luck guys :)
oh sorry, i didn't actually tell uz the point, lol. The point is that because i deleted the old .mylar directory, the new one was made with 0.4.4 yet when I renamed I got the same problem again so i think the bug still persists in 0.4.4.
Thanks for the helpful additional comments David. I'll post when I find something out about what's going on.
I can now replicate this problem and it looks like it's exactly what David diagnosed. When you first start mylar in a new workspace, the data directory is set to the full path of the .mylar directory. So when you move the workspace it looks in the wrong place.

Mik, a simple way to fix this would be to have all clients get the data directory path from MylarPlugin. MylarPlugin would then return getDefaultStoreDirectory() unless the user has explicitly specified another location (stored in the preference store). Let me know if I should give this a try or if you have another plan.
Excellent, thanks for the very helpful diagnosis David!  

Wesley: that's exactly the right fix--i.e. getting at the source of the problem and not fixing in the clients.  Is there a path or file that the clients are using which we could simply make private in order to enforce use of that method?
&gt;Excellent, thanks for the very helpful diagnosis David!

Glad to help. Thanks for Mylar :)
I've localized the directory code, and for tomorrow's 0.4.5 release all should be consistent after a move (please reopen if you see any problems).  Also, if you hit "Restore Defaults" on the task list page (and make sure that the "copy" option is checked), the workspace location will be used, and if you move your workspace Mylar will continue using the workspace relative path so there is no longer a need to change that option unless you want your tasks and contexts stored outside the workspace.</WithStack>
    <WithOutStack>Hi. I renamed my workspace directory, re-launched eclipse, pointed it to my new workspace directory and all the tasks (well, bugzilla queries) were gone, even though the untouched .mylar directory was still in the workspace root. 

And also, going to preferences -&gt; mylar -&gt; monitor, the "enable logging to" value is still unchecked which is good, but it even the greyed out value is set to the old directory.
Created attachment 31193
Screenshot of error

After creating a new bugzilla query, it sucessfully downloaded the bugs. I activated one and started to do work. After about 15 min, an error occured (see screenshot). It's still using the old absolute path.

FYI, I created a new file and typed "abstract class " to create a new class when the error occurred.
Thansk for diagnosing David, that will make it quicker to fix.
Btw David, you can manually edit the path of the context file for the resource.  Just double click the task to open the editor, click the Task Info tab, and expand the "Resources" section.  But until 0.4.5 it may just be easier for you to try to keep the .mylar directory in the old location if that's possible, and then move it again.
Hi David,

I tried renaming both my runtime and development workspaces and the tasks, queries, and contexts moved properly. The broken path issue was a problem with earlier versions of Mylar but it should be working now (I tried with 0.4.4). 

What version are you using?
I was using 0.4.4 too...hmmm...how did u rename ur workspace?
I'm using Windows XP and I just renamed the folder containing the workspace. 

How long have you been using Mylar? The problem could be that your tasks (and possibly queries?) were created using earlier versions of Mylar that had a problem with with moving due to error-prone path information in the data files.
I can vouch for the fact that David has been using Mylar for quite some time :)

Which means that the task list workspace moves need to take care of the old paths.  I'm guessing that I won't have trouble triggering this problem with my task list since I get to claim being the first Mylar user.

Wesley, if you're planning on looking into this let me know and I can attach my task list.  Otherwise I hope to get to it tomorrow.
Mik, I have one of your old task lists so I can try moving the workspace using it.
Hi guys.

Although I'm using 0.4.4 now, I'm quite sure that I was using an earlier version from the 0.4.x series when I created the workspace. Here's the thing though, after the trouble I was getting after i renamed the workspace, i closed eclipse, manually deleted the .mylar directory, relaunched eclipse and made sure that the Task Directory (in prefs-&gt;mylar-&gt;task list) was correct. Since then everything's been fine BUT, just to test it I closed eclipse, renamed the workspace and tried again and guess what - my bugzilla queries were gone. The Task Directory in the prefs was still pointing at the old directory. Although now that I think about it I problably should've tried changing it. But still, shouldn't have to if it's in the workspace. Maybe %workspace%/.mylar would be a better solution that the full path.

Good luck guys :)
oh sorry, i didn't actually tell uz the point, lol. The point is that because i deleted the old .mylar directory, the new one was made with 0.4.4 yet when I renamed I got the same problem again so i think the bug still persists in 0.4.4.
Thanks for the helpful additional comments David. I'll post when I find something out about what's going on.
I can now replicate this problem and it looks like it's exactly what David diagnosed. When you first start mylar in a new workspace, the data directory is set to the full path of the .mylar directory. So when you move the workspace it looks in the wrong place.

Mik, a simple way to fix this would be to have all clients get the data directory path from MylarPlugin. MylarPlugin would then return getDefaultStoreDirectory() unless the user has explicitly specified another location (stored in the preference store). Let me know if I should give this a try or if you have another plan.
Excellent, thanks for the very helpful diagnosis David!  

Wesley: that's exactly the right fix--i.e. getting at the source of the problem and not fixing in the clients.  Is there a path or file that the clients are using which we could simply make private in order to enforce use of that method?
&gt;Excellent, thanks for the very helpful diagnosis David!

Glad to help. Thanks for Mylar :)
I've localized the directory code, and for tomorrow's 0.4.5 release all should be consistent after a move (please reopen if you see any problems).  Also, if you hit "Restore Defaults" on the task list page (and make sure that the "copy" option is checked), the workspace location will be used, and if you move your workspace Mylar will continue using the workspace relative path so there is no longer a need to change that option unless you want your tasks and contexts stored outside the workspace.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="119373" />
    <CreationDate amount="2005-12-06 02:30:00 -0500" />
    <DupId amount="" />
    <classification amount="RT" />
    <Product amount="Equinox" />
    <component amount="Framework" />
    <Version amount="unspecified" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>OSGi/Minimum-1.1 profile is missing a backslash</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>org.osgi.framework.executionenvironment = \
 OSGi/Minimum-1.0,
 OSGi/Minimum-1.1

Observe how a backslash is missing on the second line
Fixed in HEAD.</WithStack>
    <WithOutStack>org.osgi.framework.executionenvironment = \
 OSGi/Minimum-1.0,
 OSGi/Minimum-1.1

Observe how a backslash is missing on the second line
Fixed in HEAD.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="119374" />
    <CreationDate amount="2005-12-06 02:52:00 -0500" />
    <DupId amount="" />
    <classification amount="BIRT" />
    <Product amount="BIRT" />
    <component amount="Report Engine" />
    <Version amount="2.0.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>org.eclipse.birt.report.engine.pdf unit test compilation failed in daily build 20051206</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>Unit test report is not generated for org.eclipse.birt.report.engine.pdf, please see the attachment for details.
Created attachment 31181
log file
fixed
Verified in daily build 20051207-0630. Fixed.</WithStack>
    <WithOutStack>Unit test report is not generated for org.eclipse.birt.report.engine.pdf, please see the attachment for details.
Created attachment 31181
log file
fixed
Verified in daily build 20051207-0630. Fixed.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="119375" />
    <CreationDate amount="2005-12-06 02:55:00 -0500" />
    <DupId amount="" />
    <classification amount="BIRT" />
    <Product amount="BIRT" />
    <component amount="Report Engine" />
    <Version amount="2.0.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>org.eclipse.birt.report.engine unit test failed in daily build 20051206</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>org.eclipse.birt.report.engine unit test failed.Please see attached.
Created attachment 31182
unit test result file
fixed
Verified in daily build 20051207-0630. Fixed.</WithStack>
    <WithOutStack>org.eclipse.birt.report.engine unit test failed.Please see attached.
Created attachment 31182
unit test result file
fixed
Verified in daily build 20051207-0630. Fixed.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="119376" />
    <CreationDate amount="2005-12-06 02:57:00 -0500" />
    <DupId amount="" />
    <classification amount="BIRT" />
    <Product amount="BIRT" />
    <component amount="Data" />
    <Version amount="2.0.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>org.eclipse.birt.data unit test failed in daily build 20051206</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>org.eclipse.birt.data unit test failed.Please see attached.
Created attachment 31184
unit test result file
Fixed now.
Verified in rolling build 20051207. Fixed.</WithStack>
    <WithOutStack>org.eclipse.birt.data unit test failed.Please see attached.
Created attachment 31184
unit test result file
Fixed now.
Verified in rolling build 20051207. Fixed.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="119377" />
    <CreationDate amount="2005-12-06 02:59:00 -0500" />
    <DupId amount="" />
    <classification amount="BIRT" />
    <Product amount="BIRT" />
    <component amount="Report Designer" />
    <Version amount="2.0.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>org.eclipse.birt.report.designer.tests unit test failed in daily build 20051206</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>org.eclipse.birt.report.designer.tests unit test failed.Please see attached.
Created attachment 31185
unit test result file
The unit tests have been fixed.
Verified in rolling build 20051207. Not fixed throughly.
The unit tests have been fixed.

fixed. verified in daily build 20051208</WithStack>
    <WithOutStack>org.eclipse.birt.report.designer.tests unit test failed.Please see attached.
Created attachment 31185
unit test result file
The unit tests have been fixed.
Verified in rolling build 20051207. Not fixed throughly.
The unit tests have been fixed.

fixed. verified in daily build 20051208</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="119378" />
    <CreationDate amount="2005-12-06 03:31:00 -0500" />
    <DupId amount="82166" />
    <classification amount="Eclipse" />
    <Product amount="JDT" />
    <component amount="UI" />
    <Version amount="3.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>ImportRewriteContext that tests scope and existing type usages</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="DUPLICATE" />
    <WithStack>20051206

We need an Import rewrite context that also is sensitive to the context where an import is added and what types are already used.
Isn't this a dup of bug 82166?
Yes you are right!

*** This bug has been marked as a duplicate of 82166 ***</WithStack>
    <WithOutStack>20051206

We need an Import rewrite context that also is sensitive to the context where an import is added and what types are already used.
Isn't this a dup of bug 82166?
Yes you are right!

*** This bug has been marked as a duplicate of 82166 ***</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="119379" />
    <CreationDate amount="2005-12-06 03:42:00 -0500" />
    <DupId amount="" />
    <classification amount="BIRT" />
    <Product amount="BIRT" />
    <component amount="Report Engine" />
    <Version amount="2.0.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Fonts in pdf don't work</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>In the 2.0M2 build of the "RCP Report Designer" I was able to use fonts in my pdf reports. This no longer works with the 2.0M3 build of the "RCP Report Designer". I only get the default "Times New Roman" font.

I tried adding the iText.jar file to the plugins\org.eclipse.birt.report.engine.emitter.fo_1.0.1\lib directory. That didn't help.

The log files in C:\birt_m3\plugins\org.eclipse.birt.report.viewer_1.0.1\birt\logs
are empty.

I start birt with the following birt.cmd file:
echo on
setlocal
cd %~dp0
start javaw -DFOP_CONFIG_FILE=C:\birt_m3\fop\fop.xml -cp startup.jar      org.eclipse.core.launcher.Main -application org.eclipse.birt.report.designer.ui.rcp.DesignerApplication%*
endlocal

My fop.xml file looks like this:
&lt;!--&lt;!DOCTYPE configuration SYSTEM "config.dtd"&gt;--&gt;
&lt;!-- to developers: have a look at the config.dtd to 
     see how to structure your config entries --&gt;

&lt;configuration&gt;
  &lt;entry&gt;
    &lt;key&gt;version&lt;/key&gt;
    &lt;value&gt;FOP 0.20.5&lt;/value&gt;
  &lt;/entry&gt;

  &lt;entry&gt;
    &lt;key&gt;baseDir&lt;/key&gt;
    &lt;value&gt;C:\birt_m3\fop\&lt;/value&gt;
  &lt;/entry&gt;
  
  &lt;entry&gt;
    &lt;key&gt;fontBaseDir&lt;/key&gt;
    &lt;value&gt;C:\birt_m3\fop\&lt;/value&gt;
  &lt;/entry&gt;
  
  &lt;entry&gt;
    &lt;key&gt;quiet&lt;/key&gt;
    &lt;value&gt;false&lt;/value&gt;
  &lt;/entry&gt;

  &lt;entry&gt;
    &lt;key&gt;debugMode&lt;/key&gt;
    &lt;value&gt;false&lt;/value&gt;
  &lt;/entry&gt;

  &lt;entry&gt;
    &lt;key&gt;dumpConfiguration&lt;/key&gt;
    &lt;value&gt;false&lt;/value&gt;
  &lt;/entry&gt;
 
  &lt;fonts&gt;
    &lt;font metrics-file="ariblk.xml" embed-file="ariblk.ttf" kerning="yes"&gt;
      &lt;font-triplet name="arial black" style="normal" weight="normal"/&gt;
      &lt;font-triplet name="arial black" style="normal" weight="bold"/&gt;
    &lt;/font&gt;
 &lt;/fonts&gt;
&lt;/configuration&gt;
Till now one had to convert the font names to lower case in the fop.xml file. Now one has to use the same font name in the fop.xml file as one uses in the report.

For example one has to replace the following entry

&lt;font metrics-file="ariblk.xml" embed-file="ariblk.ttf" kerning="yes"&gt;
      &lt;font-triplet name="arial black" style="normal" weight="normal"/&gt;
      &lt;font-triplet name="arial black" style="normal" weight="bold"/&gt;
&lt;/font&gt;

by this entry

&lt;font metrics-file="ariblk.xml" embed-file="ariblk.ttf" kerning="yes"&gt;
      &lt;font-triplet name="Arial Black" style="normal" weight="normal"/&gt;
      &lt;font-triplet name="Arial Black" style="normal" weight="bold"/&gt;
&lt;/font&gt;
Verified (20051222),

fixed by reporter.</WithStack>
    <WithOutStack>In the 2.0M2 build of the "RCP Report Designer" I was able to use fonts in my pdf reports. This no longer works with the 2.0M3 build of the "RCP Report Designer". I only get the default "Times New Roman" font.

I tried adding the iText.jar file to the plugins\org.eclipse.birt.report.engine.emitter.fo_1.0.1\lib directory. That didn't help.

The log files in C:\birt_m3\plugins\org.eclipse.birt.report.viewer_1.0.1\birt\logs
are empty.

I start birt with the following birt.cmd file:
echo on
setlocal
cd %~dp0
start javaw -DFOP_CONFIG_FILE=C:\birt_m3\fop\fop.xml -cp startup.jar      org.eclipse.core.launcher.Main -application org.eclipse.birt.report.designer.ui.rcp.DesignerApplication%*
endlocal

My fop.xml file looks like this:
&lt;!--&lt;!DOCTYPE configuration SYSTEM "config.dtd"&gt;--&gt;
&lt;!-- to developers: have a look at the config.dtd to 
     see how to structure your config entries --&gt;

&lt;configuration&gt;
  &lt;entry&gt;
    &lt;key&gt;version&lt;/key&gt;
    &lt;value&gt;FOP 0.20.5&lt;/value&gt;
  &lt;/entry&gt;

  &lt;entry&gt;
    &lt;key&gt;baseDir&lt;/key&gt;
    &lt;value&gt;C:\birt_m3\fop\&lt;/value&gt;
  &lt;/entry&gt;
  
  &lt;entry&gt;
    &lt;key&gt;fontBaseDir&lt;/key&gt;
    &lt;value&gt;C:\birt_m3\fop\&lt;/value&gt;
  &lt;/entry&gt;
  
  &lt;entry&gt;
    &lt;key&gt;quiet&lt;/key&gt;
    &lt;value&gt;false&lt;/value&gt;
  &lt;/entry&gt;

  &lt;entry&gt;
    &lt;key&gt;debugMode&lt;/key&gt;
    &lt;value&gt;false&lt;/value&gt;
  &lt;/entry&gt;

  &lt;entry&gt;
    &lt;key&gt;dumpConfiguration&lt;/key&gt;
    &lt;value&gt;false&lt;/value&gt;
  &lt;/entry&gt;
 
  &lt;fonts&gt;
    &lt;font metrics-file="ariblk.xml" embed-file="ariblk.ttf" kerning="yes"&gt;
      &lt;font-triplet name="arial black" style="normal" weight="normal"/&gt;
      &lt;font-triplet name="arial black" style="normal" weight="bold"/&gt;
    &lt;/font&gt;
 &lt;/fonts&gt;
&lt;/configuration&gt;
Till now one had to convert the font names to lower case in the fop.xml file. Now one has to use the same font name in the fop.xml file as one uses in the report.

For example one has to replace the following entry

&lt;font metrics-file="ariblk.xml" embed-file="ariblk.ttf" kerning="yes"&gt;
      &lt;font-triplet name="arial black" style="normal" weight="normal"/&gt;
      &lt;font-triplet name="arial black" style="normal" weight="bold"/&gt;
&lt;/font&gt;

by this entry

&lt;font metrics-file="ariblk.xml" embed-file="ariblk.ttf" kerning="yes"&gt;
      &lt;font-triplet name="Arial Black" style="normal" weight="normal"/&gt;
      &lt;font-triplet name="Arial Black" style="normal" weight="bold"/&gt;
&lt;/font&gt;
Verified (20051222),

fixed by reporter.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="119380" />
    <CreationDate amount="2005-12-06 03:55:00 -0500" />
    <DupId amount="" />
    <classification amount="Mylyn" />
    <Product amount="Mylyn" />
    <component amount="Core" />
    <Version amount="0.4" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P1" />
    <bug_severity amount="critical" />
    <Summery>MyLar Seems to Block and make Eclipse unusable when running external build</Summery>
    <Patches amount="0" />
    <Stacktraces amount="4">
      <Stacktrace timestamp="1437330614263">
        <Exception>java.util.ConcurrentModificationException</Exception>
        <Reason />
        <Frames>
          <Frame depth="0">java.util.HashMap$HashIterator.nextEntry(Unknown Source)</Frame>
          <Frame depth="1">java.util.HashMap$KeyIterator.next(Unknown Source)</Frame>
          <Frame depth="2">org.eclipse.mylar.core.internal.MylarContext.getInteresting(MylarContext.java:137)</Frame>
          <Frame depth="3">org.eclipse.mylar.core.internal.CompositeContext.getInteresting(CompositeContext.java:71)</Frame>
          <Frame depth="4">org.eclipse.mylar.core.internal.MylarContextManager.getInterestingDocuments(MylarContextManager.java:652)</Frame>
          <Frame depth="5">org.eclipse.mylar.core.internal.MylarContextManager.getInterestingDocuments(MylarContextManager.java:669)</Frame>
          <Frame depth="6">org.eclipse.mylar.ide.MylarIdePlugin.getInterestingResources(MylarIdePlugin.java:153)</Frame>
          <Frame depth="7">org.eclipse.mylar.ide.MylarContextChangeSet.getAllResourcesInChangeContext(MylarContextChangeSet.java:162)</Frame>
          <Frame depth="8">org.eclipse.mylar.ide.MylarContextChangeSet.contains(MylarContextChangeSet.java:172)</Frame>
          <Frame depth="9">org.eclipse.team.internal.core.subscribers.SubscriberChangeSetCollector$EventHandler.removeFromAllSets(SubscriberChangeSetCollector.java:218)</Frame>
          <Frame depth="10">org.eclipse.team.internal.core.subscribers.SubscriberChangeSetCollector$EventHandler.handleChange(SubscriberChangeSetCollector.java:202)</Frame>
          <Frame depth="11">org.eclipse.team.internal.core.subscribers.SubscriberChangeSetCollector$EventHandler.doDispatchEvents(SubscriberChangeSetCollector.java:84)</Frame>
          <Frame depth="12">org.eclipse.team.internal.core.BackgroundEventHandler.dispatchEvents(BackgroundEventHandler.java:354)</Frame>
          <Frame depth="13">org.eclipse.team.internal.core.BackgroundEventHandler.processEvents(BackgroundEventHandler.java:334)</Frame>
          <Frame depth="14">org.eclipse.team.internal.core.BackgroundEventHandler$1.run(BackgroundEventHandler.java:173)</Frame>
          <Frame depth="15">org.eclipse.core.internal.jobs.Worker.run(Worker.java:76)</Frame>
        </Frames>
      </Stacktrace>
      <Stacktrace timestamp="1437330614263">
        <Exception>java.util.ConcurrentModificationException</Exception>
        <Reason />
        <Frames>
          <Frame depth="0">java.util.HashMap$HashIterator.nextEntry(Unknown Source)</Frame>
          <Frame depth="1">java.util.HashMap$KeyIterator.next(Unknown Source)</Frame>
          <Frame depth="2">org.eclipse.mylar.core.internal.MylarContext.getInteresting(MylarContext.java:137)</Frame>
          <Frame depth="3">org.eclipse.mylar.core.internal.CompositeContext.getInteresting(CompositeContext.java:71)</Frame>
          <Frame depth="4">org.eclipse.mylar.core.internal.MylarContextManager.getInterestingDocuments(MylarContextManager.java:652)</Frame>
          <Frame depth="5">org.eclipse.mylar.core.internal.MylarContextManager.getInterestingDocuments(MylarContextManager.java:669)</Frame>
          <Frame depth="6">org.eclipse.mylar.ide.MylarIdePlugin.getInterestingResources(MylarIdePlugin.java:153)</Frame>
          <Frame depth="7">org.eclipse.mylar.ide.MylarContextChangeSet.getAllResourcesInChangeContext(MylarContextChangeSet.java:162)</Frame>
          <Frame depth="8">org.eclipse.mylar.ide.MylarContextChangeSet.contains(MylarContextChangeSet.java:172)</Frame>
          <Frame depth="9">org.eclipse.team.internal.core.subscribers.SubscriberChangeSetCollector$EventHandler.removeFromAllSets(SubscriberChangeSetCollector.java:218)</Frame>
          <Frame depth="10">org.eclipse.team.internal.core.subscribers.SubscriberChangeSetCollector$EventHandler.handleChange(SubscriberChangeSetCollector.java:202)</Frame>
          <Frame depth="11">org.eclipse.team.internal.core.subscribers.SubscriberChangeSetCollector$EventHandler.doDispatchEvents(SubscriberChangeSetCollector.java:84)</Frame>
          <Frame depth="12">org.eclipse.team.internal.core.BackgroundEventHandler.dispatchEvents(BackgroundEventHandler.java:354)</Frame>
          <Frame depth="13">org.eclipse.team.internal.core.BackgroundEventHandler.processEvents(BackgroundEventHandler.java:334)</Frame>
          <Frame depth="14">org.eclipse.team.internal.core.BackgroundEventHandler$1.run(BackgroundEventHandler.java:173)</Frame>
          <Frame depth="15">org.eclipse.core.internal.jobs.Worker.run(Worker.java:76)</Frame>
        </Frames>
      </Stacktrace>
      <Stacktrace timestamp="1437330614263">
        <Exception>java.util.ConcurrentModificationException</Exception>
        <Reason />
        <Frames>
          <Frame depth="0">java.util.HashMap$HashIterator.nextEntry(Unknown Source)</Frame>
          <Frame depth="1">java.util.HashMap$KeyIterator.next(Unknown Source)</Frame>
          <Frame depth="2">org.eclipse.mylar.core.internal.MylarContext.getInteresting(MylarContext.java:137)</Frame>
          <Frame depth="3">org.eclipse.mylar.core.internal.CompositeContext.getInteresting(CompositeContext.java:71)</Frame>
          <Frame depth="4">org.eclipse.mylar.core.internal.MylarContextManager.getInterestingDocuments(MylarContextManager.java:652)</Frame>
          <Frame depth="5">org.eclipse.mylar.core.internal.MylarContextManager.getInterestingDocuments(MylarContextManager.java:669)</Frame>
          <Frame depth="6">org.eclipse.mylar.ide.MylarIdePlugin.getInterestingResources(MylarIdePlugin.java:153)</Frame>
          <Frame depth="7">org.eclipse.mylar.ide.MylarContextChangeSet.getAllResourcesInChangeContext(MylarContextChangeSet.java:162)</Frame>
          <Frame depth="8">org.eclipse.mylar.ide.MylarContextChangeSet.contains(MylarContextChangeSet.java:172)</Frame>
          <Frame depth="9">org.eclipse.team.internal.core.subscribers.SubscriberChangeSetCollector$EventHandler.removeFromAllSets(SubscriberChangeSetCollector.java:218)</Frame>
          <Frame depth="10">org.eclipse.team.internal.core.subscribers.SubscriberChangeSetCollector$EventHandler.handleChange(SubscriberChangeSetCollector.java:202)</Frame>
          <Frame depth="11">org.eclipse.team.internal.core.subscribers.SubscriberChangeSetCollector$EventHandler.doDispatchEvents(SubscriberChangeSetCollector.java:84)</Frame>
          <Frame depth="12">org.eclipse.team.internal.core.BackgroundEventHandler.dispatchEvents(BackgroundEventHandler.java:354)</Frame>
          <Frame depth="13">org.eclipse.team.internal.core.BackgroundEventHandler.processEvents(BackgroundEventHandler.java:334)</Frame>
          <Frame depth="14">org.eclipse.team.internal.core.BackgroundEventHandler$1.run(BackgroundEventHandler.java:173)</Frame>
          <Frame depth="15">org.eclipse.core.internal.jobs.Worker.run(Worker.java:76)</Frame>
        </Frames>
      </Stacktrace>
      <Stacktrace timestamp="1437330614263">
        <Exception>java.util.ConcurrentModificationException</Exception>
        <Reason />
        <Frames>
          <Frame depth="0">java.util.HashMap$HashIterator.nextEntry(Unknown Source)</Frame>
          <Frame depth="1">java.util.HashMap$KeyIterator.next(Unknown Source)</Frame>
          <Frame depth="2">org.eclipse.mylar.core.internal.MylarContext.getInteresting(MylarContext.java:137)</Frame>
          <Frame depth="3">org.eclipse.mylar.core.internal.CompositeContext.getInteresting(CompositeContext.java:71)</Frame>
          <Frame depth="4">org.eclipse.mylar.core.internal.MylarContextManager.getInterestingDocuments(MylarContextManager.java:652)</Frame>
          <Frame depth="5">org.eclipse.mylar.core.internal.MylarContextManager.getInterestingDocuments(MylarContextManager.java:669)</Frame>
          <Frame depth="6">org.eclipse.mylar.ide.MylarIdePlugin.getInterestingResources(MylarIdePlugin.java:153)</Frame>
          <Frame depth="7">org.eclipse.mylar.ide.MylarContextChangeSet.getAllResourcesInChangeContext(MylarContextChangeSet.java:162)</Frame>
          <Frame depth="8">org.eclipse.mylar.ide.MylarContextChangeSet.contains(MylarContextChangeSet.java:172)</Frame>
          <Frame depth="9">org.eclipse.team.internal.core.subscribers.SubscriberChangeSetCollector$EventHandler.removeFromAllSets(SubscriberChangeSetCollector.java:218)</Frame>
          <Frame depth="10">org.eclipse.team.internal.core.subscribers.SubscriberChangeSetCollector$EventHandler.handleChange(SubscriberChangeSetCollector.java:202)</Frame>
          <Frame depth="11">org.eclipse.team.internal.core.subscribers.SubscriberChangeSetCollector$EventHandler.doDispatchEvents(SubscriberChangeSetCollector.java:84)</Frame>
          <Frame depth="12">org.eclipse.team.internal.core.BackgroundEventHandler.dispatchEvents(BackgroundEventHandler.java:354)</Frame>
          <Frame depth="13">org.eclipse.team.internal.core.BackgroundEventHandler.processEvents(BackgroundEventHandler.java:334)</Frame>
          <Frame depth="14">org.eclipse.team.internal.core.BackgroundEventHandler$1.run(BackgroundEventHandler.java:173)</Frame>
          <Frame depth="15">org.eclipse.core.internal.jobs.Worker.run(Worker.java:76)</Frame>
        </Frames>
      </Stacktrace>
    </Stacktraces>
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>When using MyLar 4.4 on Eclipse 3.1.1 on WinXP Pro (2,4Ghz 1GB RAM) with a big workspace and starting a ant build outside of Eclipse. The workbench seems to get stuck in a build or refreshing workspace loop. CPU Usage goes up to 100% and Eclipse becomes totally unresponsive. This happens when refresh automatically is activated and the workspace is trying to refresh and when refresh automatically is deactivated and doing a manual build on the project that is being touched by the build file.

Details for the external build:
The build touches the source folder in the current Project and creates build artefacts in the root of the Project:
ProjectRoot
 |- sources
 |- build.classes (created by build)

When refresh automatically is on Eclipse becomes unresponsive (&gt; 5Min. than I broke off) and no error is displayed in the .log file.

When refresh automatically is off Eclipse locks up but becomes responsive after some amount of time (&gt; 1Min) The following error was recorded in the .log
!ENTRY org.eclipse.core.runtime 4 2 2005-12-06 09:40:39.223
!MESSAGE An internal error occurred during: "Updating Change Sets for CVS Workspace".
!STACK 0
java.util.ConcurrentModificationException
	at java.util.HashMap$HashIterator.nextEntry(Unknown Source)
	at java.util.HashMap$KeyIterator.next(Unknown Source)
	at org.eclipse.mylar.core.internal.MylarContext.getInteresting(MylarContext.java:137)
	at org.eclipse.mylar.core.internal.CompositeContext.getInteresting(CompositeContext.java:71)
	at org.eclipse.mylar.core.internal.MylarContextManager.getInterestingDocuments(MylarContextManager.java:652)
	at org.eclipse.mylar.core.internal.MylarContextManager.getInterestingDocuments(MylarContextManager.java:669)
	at org.eclipse.mylar.ide.MylarIdePlugin.getInterestingResources(MylarIdePlugin.java:153)
	at org.eclipse.mylar.ide.MylarContextChangeSet.getAllResourcesInChangeContext(MylarContextChangeSet.java:162)
	at org.eclipse.mylar.ide.MylarContextChangeSet.contains(MylarContextChangeSet.java:172)
	at org.eclipse.team.internal.core.subscribers.SubscriberChangeSetCollector$EventHandler.removeFromAllSets(SubscriberChangeSetCollector.java:218)
	at org.eclipse.team.internal.core.subscribers.SubscriberChangeSetCollector$EventHandler.handleChange(SubscriberChangeSetCollector.java:202)
	at org.eclipse.team.internal.core.subscribers.SubscriberChangeSetCollector$EventHandler.doDispatchEvents(SubscriberChangeSetCollector.java:84)
	at org.eclipse.team.internal.core.BackgroundEventHandler.dispatchEvents(BackgroundEventHandler.java:354)
	at org.eclipse.team.internal.core.BackgroundEventHandler.processEvents(BackgroundEventHandler.java:334)
	at org.eclipse.team.internal.core.BackgroundEventHandler$1.run(BackgroundEventHandler.java:173)
	at org.eclipse.core.internal.jobs.Worker.run(Worker.java:76)

!ENTRY org.eclipse.core.runtime 4 2 2005-12-06 09:40:40.795
!MESSAGE An internal error occurred during: "Updating Change Sets for CVS Workspace".
!STACK 0
java.util.ConcurrentModificationException
	at java.util.HashMap$HashIterator.nextEntry(Unknown Source)
	at java.util.HashMap$KeyIterator.next(Unknown Source)
	at org.eclipse.mylar.core.internal.MylarContext.getInteresting(MylarContext.java:137)
	at org.eclipse.mylar.core.internal.CompositeContext.getInteresting(CompositeContext.java:71)
	at org.eclipse.mylar.core.internal.MylarContextManager.getInterestingDocuments(MylarContextManager.java:652)
	at org.eclipse.mylar.core.internal.MylarContextManager.getInterestingDocuments(MylarContextManager.java:669)
	at org.eclipse.mylar.ide.MylarIdePlugin.getInterestingResources(MylarIdePlugin.java:153)
	at org.eclipse.mylar.ide.MylarContextChangeSet.getAllResourcesInChangeContext(MylarContextChangeSet.java:162)
	at org.eclipse.mylar.ide.MylarContextChangeSet.contains(MylarContextChangeSet.java:172)
	at org.eclipse.team.internal.core.subscribers.SubscriberChangeSetCollector$EventHandler.removeFromAllSets(SubscriberChangeSetCollector.java:218)
	at org.eclipse.team.internal.core.subscribers.SubscriberChangeSetCollector$EventHandler.handleChange(SubscriberChangeSetCollector.java:202)
	at org.eclipse.team.internal.core.subscribers.SubscriberChangeSetCollector$EventHandler.doDispatchEvents(SubscriberChangeSetCollector.java:84)
	at org.eclipse.team.internal.core.BackgroundEventHandler.dispatchEvents(BackgroundEventHandler.java:354)
	at org.eclipse.team.internal.core.BackgroundEventHandler.processEvents(BackgroundEventHandler.java:334)
	at org.eclipse.team.internal.core.BackgroundEventHandler$1.run(BackgroundEventHandler.java:173)
	at org.eclipse.core.internal.jobs.Worker.run(Worker.java:76)

!ENTRY org.eclipse.core.runtime 4 2 2005-12-06 09:41:12.611
!MESSAGE An internal error occurred during: "Updating Change Sets for CVS Workspace".
!STACK 0
java.util.ConcurrentModificationException
	at java.util.HashMap$HashIterator.nextEntry(Unknown Source)
	at java.util.HashMap$KeyIterator.next(Unknown Source)
	at org.eclipse.mylar.core.internal.MylarContext.getInteresting(MylarContext.java:137)
	at org.eclipse.mylar.core.internal.CompositeContext.getInteresting(CompositeContext.java:71)
	at org.eclipse.mylar.core.internal.MylarContextManager.getInterestingDocuments(MylarContextManager.java:652)
	at org.eclipse.mylar.core.internal.MylarContextManager.getInterestingDocuments(MylarContextManager.java:669)
	at org.eclipse.mylar.ide.MylarIdePlugin.getInterestingResources(MylarIdePlugin.java:153)
	at org.eclipse.mylar.ide.MylarContextChangeSet.getAllResourcesInChangeContext(MylarContextChangeSet.java:162)
	at org.eclipse.mylar.ide.MylarContextChangeSet.contains(MylarContextChangeSet.java:172)
	at org.eclipse.team.internal.core.subscribers.SubscriberChangeSetCollector$EventHandler.removeFromAllSets(SubscriberChangeSetCollector.java:218)
	at org.eclipse.team.internal.core.subscribers.SubscriberChangeSetCollector$EventHandler.handleChange(SubscriberChangeSetCollector.java:202)
	at org.eclipse.team.internal.core.subscribers.SubscriberChangeSetCollector$EventHandler.doDispatchEvents(SubscriberChangeSetCollector.java:84)
	at org.eclipse.team.internal.core.BackgroundEventHandler.dispatchEvents(BackgroundEventHandler.java:354)
	at org.eclipse.team.internal.core.BackgroundEventHandler.processEvents(BackgroundEventHandler.java:334)
	at org.eclipse.team.internal.core.BackgroundEventHandler$1.run(BackgroundEventHandler.java:173)
	at org.eclipse.core.internal.jobs.Worker.run(Worker.java:76)

!ENTRY org.eclipse.core.runtime 4 2 2005-12-06 09:41:44.817
!MESSAGE An internal error occurred during: "Updating Change Sets for CVS Workspace".
!STACK 0
java.util.ConcurrentModificationException
	at java.util.HashMap$HashIterator.nextEntry(Unknown Source)
	at java.util.HashMap$KeyIterator.next(Unknown Source)
	at org.eclipse.mylar.core.internal.MylarContext.getInteresting(MylarContext.java:137)
	at org.eclipse.mylar.core.internal.CompositeContext.getInteresting(CompositeContext.java:71)
	at org.eclipse.mylar.core.internal.MylarContextManager.getInterestingDocuments(MylarContextManager.java:652)
	at org.eclipse.mylar.core.internal.MylarContextManager.getInterestingDocuments(MylarContextManager.java:669)
	at org.eclipse.mylar.ide.MylarIdePlugin.getInterestingResources(MylarIdePlugin.java:153)
	at org.eclipse.mylar.ide.MylarContextChangeSet.getAllResourcesInChangeContext(MylarContextChangeSet.java:162)
	at org.eclipse.mylar.ide.MylarContextChangeSet.contains(MylarContextChangeSet.java:172)
	at org.eclipse.team.internal.core.subscribers.SubscriberChangeSetCollector$EventHandler.removeFromAllSets(SubscriberChangeSetCollector.java:218)
	at org.eclipse.team.internal.core.subscribers.SubscriberChangeSetCollector$EventHandler.handleChange(SubscriberChangeSetCollector.java:202)
	at org.eclipse.team.internal.core.subscribers.SubscriberChangeSetCollector$EventHandler.doDispatchEvents(SubscriberChangeSetCollector.java:84)
	at org.eclipse.team.internal.core.BackgroundEventHandler.dispatchEvents(BackgroundEventHandler.java:354)
	at org.eclipse.team.internal.core.BackgroundEventHandler.processEvents(BackgroundEventHandler.java:334)
	at org.eclipse.team.internal.core.BackgroundEventHandler$1.run(BackgroundEventHandler.java:173)
	at org.eclipse.core.internal.jobs.Worker.run(Worker.java:76)

Workaround: Deactivating Refresh automatically and deactivating the task when doing external build. (This is tediouse and makes using MyLar a no option IMO)

The following was commented on the newsgroup by Mik Kersten:
[...]
&gt;It sounds like this could result from a problem with the automatic update of &gt;change sets or interest being set on resources created by the external build.
[...]
Thanks for the details Stefan, that should be enough for me to reproduce.  This will be fixed for Friday's 0.4.5 release, and I'll make the automatic change set management optional (definitely agree that the current work-around is much too tedious).  But note that the Mylar version is 0.4.4, not 4.4, largely because there better not be any such problems in a version &gt; 1.0 ;)
Stefan I've put some fixes in place and can not replicate this anymore, but I could not replicate it reliably.  Could you please try the following dev build and see if you can still replicate this problem?

download.eclipse.org/technology/mylar/update-site/dev/e3.1
(In reply to comment #2)
Looks good. I've run two builds (one with refresh automatically and one without refresh automatically). Both ran through without interfering with eclipse. 
For my setting the problem is solved! 

Thanks you
Great, thanks for verifying!</WithStack>
    <WithOutStack>When using MyLar 4.4 on Eclipse 3.1.1 on WinXP Pro (2,4Ghz 1GB RAM) with a big workspace and starting a ant build outside of Eclipse. The workbench seems to get stuck in a build or refreshing workspace loop. CPU Usage goes up to 100% and Eclipse becomes totally unresponsive. This happens when refresh automatically is activated and the workspace is trying to refresh and when refresh automatically is deactivated and doing a manual build on the project that is being touched by the build file.

Details for the external build:
The build touches the source folder in the current Project and creates build artefacts in the root of the Project:
ProjectRoot
 |- sources
 |- build.classes (created by build)

When refresh automatically is on Eclipse becomes unresponsive (&gt; 5Min. than I broke off) and no error is displayed in the .log file.

When refresh automatically is off Eclipse locks up but becomes responsive after some amount of time (&gt; 1Min) The following error was recorded in the .log
!ENTRY org.eclipse.core.runtime 4 2 2005-12-06 09:40:39.223
!MESSAGE An internal error occurred during: "Updating Change Sets for CVS Workspace".
!STACK 0

!ENTRY org.eclipse.core.runtime 4 2 2005-12-06 09:40:40.795
!MESSAGE An internal error occurred during: "Updating Change Sets for CVS Workspace".
!STACK 0
java.util.ConcurrentModificationException
	at java.util.HashMap$HashIterator.nextEntry(Unknown Source)
	at java.util.HashMap$KeyIterator.next(Unknown Source)
	at org.eclipse.mylar.core.internal.MylarContext.getInteresting(MylarContext.java:137)
	at org.eclipse.mylar.core.internal.CompositeContext.getInteresting(CompositeContext.java:71)
	at org.eclipse.mylar.core.internal.MylarContextManager.getInterestingDocuments(MylarContextManager.java:652)
	at org.eclipse.mylar.core.internal.MylarContextManager.getInterestingDocuments(MylarContextManager.java:669)
	at org.eclipse.mylar.ide.MylarIdePlugin.getInterestingResources(MylarIdePlugin.java:153)
	at org.eclipse.mylar.ide.MylarContextChangeSet.getAllResourcesInChangeContext(MylarContextChangeSet.java:162)
	at org.eclipse.mylar.ide.MylarContextChangeSet.contains(MylarContextChangeSet.java:172)
	at org.eclipse.team.internal.core.subscribers.SubscriberChangeSetCollector$EventHandler.removeFromAllSets(SubscriberChangeSetCollector.java:218)
	at org.eclipse.team.internal.core.subscribers.SubscriberChangeSetCollector$EventHandler.handleChange(SubscriberChangeSetCollector.java:202)
	at org.eclipse.team.internal.core.subscribers.SubscriberChangeSetCollector$EventHandler.doDispatchEvents(SubscriberChangeSetCollector.java:84)
	at org.eclipse.team.internal.core.BackgroundEventHandler.dispatchEvents(BackgroundEventHandler.java:354)
	at org.eclipse.team.internal.core.BackgroundEventHandler.processEvents(BackgroundEventHandler.java:334)
	at org.eclipse.team.internal.core.BackgroundEventHandler$1.run(BackgroundEventHandler.java:173)
	at org.eclipse.core.internal.jobs.Worker.run(Worker.java:76)

!ENTRY org.eclipse.core.runtime 4 2 2005-12-06 09:41:12.611
!MESSAGE An internal error occurred during: "Updating Change Sets for CVS Workspace".
!STACK 0
java.util.ConcurrentModificationException
	at java.util.HashMap$HashIterator.nextEntry(Unknown Source)
	at java.util.HashMap$KeyIterator.next(Unknown Source)
	at org.eclipse.mylar.core.internal.MylarContext.getInteresting(MylarContext.java:137)
	at org.eclipse.mylar.core.internal.CompositeContext.getInteresting(CompositeContext.java:71)
	at org.eclipse.mylar.core.internal.MylarContextManager.getInterestingDocuments(MylarContextManager.java:652)
	at org.eclipse.mylar.core.internal.MylarContextManager.getInterestingDocuments(MylarContextManager.java:669)
	at org.eclipse.mylar.ide.MylarIdePlugin.getInterestingResources(MylarIdePlugin.java:153)
	at org.eclipse.mylar.ide.MylarContextChangeSet.getAllResourcesInChangeContext(MylarContextChangeSet.java:162)
	at org.eclipse.mylar.ide.MylarContextChangeSet.contains(MylarContextChangeSet.java:172)
	at org.eclipse.team.internal.core.subscribers.SubscriberChangeSetCollector$EventHandler.removeFromAllSets(SubscriberChangeSetCollector.java:218)
	at org.eclipse.team.internal.core.subscribers.SubscriberChangeSetCollector$EventHandler.handleChange(SubscriberChangeSetCollector.java:202)
	at org.eclipse.team.internal.core.subscribers.SubscriberChangeSetCollector$EventHandler.doDispatchEvents(SubscriberChangeSetCollector.java:84)
	at org.eclipse.team.internal.core.BackgroundEventHandler.dispatchEvents(BackgroundEventHandler.java:354)
	at org.eclipse.team.internal.core.BackgroundEventHandler.processEvents(BackgroundEventHandler.java:334)
	at org.eclipse.team.internal.core.BackgroundEventHandler$1.run(BackgroundEventHandler.java:173)
	at org.eclipse.core.internal.jobs.Worker.run(Worker.java:76)

!ENTRY org.eclipse.core.runtime 4 2 2005-12-06 09:41:44.817
!MESSAGE An internal error occurred during: "Updating Change Sets for CVS Workspace".
!STACK 0


Workaround: Deactivating Refresh automatically and deactivating the task when doing external build. (This is tediouse and makes using MyLar a no option IMO)

The following was commented on the newsgroup by Mik Kersten:
[...]
&gt;It sounds like this could result from a problem with the automatic update of &gt;change sets or interest being set on resources created by the external build.
[...]
Thanks for the details Stefan, that should be enough for me to reproduce.  This will be fixed for Friday's 0.4.5 release, and I'll make the automatic change set management optional (definitely agree that the current work-around is much too tedious).  But note that the Mylar version is 0.4.4, not 4.4, largely because there better not be any such problems in a version &gt; 1.0 ;)
Stefan I've put some fixes in place and can not replicate this anymore, but I could not replicate it reliably.  Could you please try the following dev build and see if you can still replicate this problem?

download.eclipse.org/technology/mylar/update-site/dev/e3.1
(In reply to comment #2)
Looks good. I've run two builds (one with refresh automatically and one without refresh automatically). Both ran through without interfering with eclipse. 
For my setting the problem is solved! 

Thanks you
Great, thanks for verifying!</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="119381" />
    <CreationDate amount="2005-12-06 04:10:00 -0500" />
    <DupId amount="" />
    <classification amount="BIRT" />
    <Product amount="BIRT" />
    <component amount="Report Engine" />
    <Version amount="unspecified" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="minor" />
    <Summery>Report design name isn't saved in report document.</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="3">
        <Lines>
          <Line>1. Generate a report document through a report design</Line>
          <Line>2. Using getReportRunnable() in IReportDocument class to get ReportRunnable</Line>
          <Line>3. Using getReportName()</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>Description:
Report design name isn't saved in report document.

Steps to reproduce:
1. Generate a report document through a report design
2. Using getReportRunnable() in IReportDocument class to get ReportRunnable
3. Using getReportName()

Expected result:
return report design name.

Actual result:
return "&lt;stream&gt;".
the reportName is alwasy the file name of report design. If the report design saved into the report document, the report design name is missing. Should we store the report design name into the report document?

Create a stream called designName and save the report design as UTFString in it.
Verified in build 20051220.</WithStack>
    <WithOutStack>Description:
Report design name isn't saved in report document.

Steps to reproduce:
1. Generate a report document through a report design
2. Using getReportRunnable() in IReportDocument class to get ReportRunnable
3. Using getReportName()

Expected result:
return report design name.

Actual result:
return "&lt;stream&gt;".
the reportName is alwasy the file name of report design. If the report design saved into the report document, the report design name is missing. Should we store the report design name into the report document?

Create a stream called designName and save the report design as UTFString in it.
Verified in build 20051220.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="119382" />
    <CreationDate amount="2005-12-06 04:32:00 -0500" />
    <DupId amount="" />
    <classification amount="BIRT" />
    <Product amount="BIRT" />
    <component amount="Report Engine" />
    <Version amount="unspecified" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>GetPageNumber( InstanceID iid ) in ReportDocumentReader class isn't implemented.</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="VERIFIED" />
    <resolution amount="WONTFIX" />
    <WithStack>Description:
GetPageNumber( InstanceID iid ) in ReportDocumentReader class isn't implemented.

Steps to reproduce:
1. View GetPageNumber( InstanceID iid ) method in ReportDocumentReader class

Result:
It just returns 0.
It seems that no one will use this API in RC, so can we move it to BIRT 2.1?
Moved to future release as the function is not needed in BIRT 2.0.
is this method on a public API? if yes, I think we shall either remove it or implement it.   We are supposed API freeze at M5.
decide on the API.
package org.eclipse.report.birt.engine.api.impl is a private package, so ReportDocumentReader is not a public API. Whether it will be implemented is an internal decision.
OK.</WithStack>
    <WithOutStack>Description:
GetPageNumber( InstanceID iid ) in ReportDocumentReader class isn't implemented.

Steps to reproduce:
1. View GetPageNumber( InstanceID iid ) method in ReportDocumentReader class

Result:
It just returns 0.
It seems that no one will use this API in RC, so can we move it to BIRT 2.1?
Moved to future release as the function is not needed in BIRT 2.0.
is this method on a public API? if yes, I think we shall either remove it or implement it.   We are supposed API freeze at M5.
decide on the API.
package org.eclipse.report.birt.engine.api.impl is a private package, so ReportDocumentReader is not a public API. Whether it will be implemented is an internal decision.
OK.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="119383" />
    <CreationDate amount="2005-12-06 04:37:00 -0500" />
    <DupId amount="" />
    <classification amount="Tools" />
    <Product amount="AspectJ" />
    <component amount="Compiler" />
    <Version amount="1.5.0M5" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="critical" />
    <Summery>Classpath problem with AspectJ Compiler 1.5.0M5</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="1">
        <Lines>
          <Line>e.g., "SomeFile.java:243"</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="RESOLVED" />
    <resolution amount="INVALID" />
    <WithStack>Hi,

I am trying to compile few dynamically generated aspects programatically. In the program i will contruct a classpath with aspectjrt.jar and aspecttools.jar and other third party jars, which my program depends on. And i compile the dynamically generated aspects as follows,

java -Xmx512m -classpath (followed by all the jars that i have constructed) org.aspectj.tools.ajc.Main E:\MyProject\com\test\aspect\myaspect\hdyb\*.java

When executed as above, it gives the following error,

Exception thrown from AspectJ 1.5.0M5

This might be logged as a bug already -- find current bugs at
  http://bugs.eclipse.org/bugs/buglist.cgi?product=AspectJ&amp;component=Compiler

Bugs for exceptions thrown have titles File:line from the top stack, 
e.g., "SomeFile.java:243"

If you don't find the exception below in a bug, please add a new bug
at http://bugs.eclipse.org/bugs/enter_bug.cgi?product=AspectJ
To make the bug a priority, please include a test program
that can reproduce this exception.

when batch building with classpath:
&lt;classpath&gt;
In the classpath built by aspectj, aspectjtools.jar is not present.

When i try to run the same scenario from command prompt, by explicitly setting in the classpath aspectjtools.jar and aspectjrt.jar and other third party jars, which my stub depends on.. it is compiling successfully and also weaving successfully.

Please let me know, how aspectjtools.jar is considered by ajc in the classpath.

Thanks in advance
R.S.Dhanalakshmi
&gt; I am trying to compile few dynamically generated aspects programatically. In
&gt; the program i will contruct a classpath with aspectjrt.jar and aspecttools.jar
&gt; and other third party jars, which my program depends on. And i compile the
&gt; dynamically generated aspects as follows,

I presume aspecttools.jar is a typo though? and it should read aspectjtools.jar.

Take a look in the batch file for ajc, c:\aspectj1.5\bin\ajc.bat to see how ajc puts aspectjtools.jar on the classpath for invoking the compiler.

----8&lt;-----
@echo off
REM This file generated by AspectJ installer

if "%JAVA_HOME%" == "" set JAVA_HOME=C:\Program Files\Java\j2re1.4.2_01
if "%ASPECTJ_HOME%" == "" set ASPECTJ_HOME=c:\aspectj1.5.0-dev

if exist "%JAVA_HOME%\bin\java.exe" goto haveJava
if exist "%JAVA_HOME%\bin\java.bat" goto haveJava
if exist "%JAVA_HOME%\bin\java" goto haveJava
echo java does not exist as %JAVA_HOME%\bin\java
echo please fix the JAVA_HOME environment variable
:haveJava
"%JAVA_HOME%\bin\java" -classpath "%ASPECTJ_HOME%\lib\aspectjtools.jar;%JAVA_HOM
E%\lib\tools.jar;%CLASSPATH%" -Xmx64M org.aspectj.tools.ajc.Main %*
----8&lt;-----
This was never a bug, more of a question! I'm presuming that Andy's last comment (as of December 2005) solved the problem, if not, please post to the users or dev list.

Thanks.</WithStack>
    <WithOutStack>Hi,

I am trying to compile few dynamically generated aspects programatically. In the program i will contruct a classpath with aspectjrt.jar and aspecttools.jar and other third party jars, which my program depends on. And i compile the dynamically generated aspects as follows,

java -Xmx512m -classpath (followed by all the jars that i have constructed) org.aspectj.tools.ajc.Main E:\MyProject\com\test\aspect\myaspect\hdyb\*.java

When executed as above, it gives the following error,

Exception thrown from AspectJ 1.5.0M5

This might be logged as a bug already -- find current bugs at
  http://bugs.eclipse.org/bugs/buglist.cgi?product=AspectJ&amp;component=Compiler

Bugs for exceptions thrown have titles File:line from the top stack, 
e.g., "SomeFile.java:243"

If you don't find the exception below in a bug, please add a new bug
at http://bugs.eclipse.org/bugs/enter_bug.cgi?product=AspectJ
To make the bug a priority, please include a test program
that can reproduce this exception.

when batch building with classpath:
&lt;classpath&gt;
In the classpath built by aspectj, aspectjtools.jar is not present.

When i try to run the same scenario from command prompt, by explicitly setting in the classpath aspectjtools.jar and aspectjrt.jar and other third party jars, which my stub depends on.. it is compiling successfully and also weaving successfully.

Please let me know, how aspectjtools.jar is considered by ajc in the classpath.

Thanks in advance
R.S.Dhanalakshmi
&gt; I am trying to compile few dynamically generated aspects programatically. In
&gt; the program i will contruct a classpath with aspectjrt.jar and aspecttools.jar
&gt; and other third party jars, which my program depends on. And i compile the
&gt; dynamically generated aspects as follows,

I presume aspecttools.jar is a typo though? and it should read aspectjtools.jar.

Take a look in the batch file for ajc, c:\aspectj1.5\bin\ajc.bat to see how ajc puts aspectjtools.jar on the classpath for invoking the compiler.

----8&lt;-----
@echo off
REM This file generated by AspectJ installer

if "%JAVA_HOME%" == "" set JAVA_HOME=C:\Program Files\Java\j2re1.4.2_01
if "%ASPECTJ_HOME%" == "" set ASPECTJ_HOME=c:\aspectj1.5.0-dev

if exist "%JAVA_HOME%\bin\java.exe" goto haveJava
if exist "%JAVA_HOME%\bin\java.bat" goto haveJava
if exist "%JAVA_HOME%\bin\java" goto haveJava
echo java does not exist as %JAVA_HOME%\bin\java
echo please fix the JAVA_HOME environment variable
:haveJava
"%JAVA_HOME%\bin\java" -classpath "%ASPECTJ_HOME%\lib\aspectjtools.jar;%JAVA_HOM
E%\lib\tools.jar;%CLASSPATH%" -Xmx64M org.aspectj.tools.ajc.Main %*
----8&lt;-----
This was never a bug, more of a question! I'm presuming that Andy's last comment (as of December 2005) solved the problem, if not, please post to the users or dev list.

Thanks.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="119384" />
    <CreationDate amount="2005-12-06 04:52:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="Text" />
    <Version amount="3.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="enhancement" />
    <Summery>[api] Add new API to support memory efficient StyleRange support in StyledText</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="ASSIGNED" />
    <resolution amount="" />
    <WithStack>StyledText has new API that allows to separate the styles from the ranges (see StyleRange). This allows to reduce the memory consumption compared to using just StyleRange-s.

In order to support this we will have to introduce new API in Platform Text and change all clients in Platform Text and JDT Text plus inform other clients. Platform Text will have to convert old API calls and merge the result with the usages of the new API calls before calling StyledText API.

This includes a major rewrite of TextPresentation.

NOTE: StyledText is converting to the new structure when the old APIs are called.
3.2 time permitting.
Has to be shifted to 3.3.
This reaches deep into the APIs and is too late at this point for 3.3.
Created attachment 175181
Extended version of TextPresentation

In an earlier project of mine (a PL/I editor) I discovered how important the new StyledText API is.  When I tried to process huge source files (nearing 1 megabyte) it brought Eclipse to its knees.  But when I used the new StyledText interface directly in the presentation repairer (instead of the normal processing), it was reasonably usable.  The performance difference was night and day!  One problem, of course, was that text annotations were not merged properly.

In a current project, I'm using an extended projection viewer.  While I was at it, I decided to extend TextPresentation as well so that it uses the new StyledText API while still allowing in-text annotations to be merged.  

I am attaching the source for my extended TextPresentation in its current state, and have included some commentary to explain the changes.

It adds API, but as far as I can tell none of the old API is broken.

It seems to be working, although more debugging is certainly needed.  I have no idea if this will be of use to you directly, but feel free.  If anyone is working on this problem perhaps it will make interesting reading.  At least it demonstrates that the problem can be solved, although production code might not do it the same way I did.

Please let me know if I can help further.  Would you like this in the form of a patch file?

Bill Fenlason
Hi Bill,
which version of Eclipse do you use? SWT internally changed their code to reduce the memory so that the new API is not always needed.

Could you attach your code together with a test case that shows the memory benefits?
Dani,

The preliminary code in the attachment I posted was based on the 3.6 TextPresentation.    

Do you know which version of StyledText contains the changes you mentioned?  I will want to check that out.  I didn't notice changes in 3.6, but I haven't looked closely yet.      

The memory savings are external to the StyledText widget and relate to the ability to share and reuse StyleRange objects. (StyleRange extends TextStyle) 

Currently when a presentation is generated, StyleRange objects can not be shared and a different (new) StyleRange object is needed for each token in the presentation.  For large source files that can be a big number, since typically the average token length is 5 or less.  

If the StyleRange objects are shared by providing the offset and length separately as int arguments (to the TextPresentation addStyleRange method, etc.), only a small (fixed) number of model StyleRange objects are needed.  

The StyledText API allows shared StyleRanges but currently the TextPresentation does not.  The StyledText API doesn't help much because it isn't used.

(Undoubtedly you know all that, but other readers might not be as aware of the situation.)  

Unfortunately I'm unable to generate a test case to quantify the memory savings and performance difference right now.
&gt;Do you know which version of StyledText contains the changes you mentioned?
Since 3.2. As you can see from the implementation, the old methods call the new ones that try to optimize the memory.

So far we simply didn't start to add the new APIs to TextPresentation because our use for that class is in the text viewer and hence we only benefit if we also rewrite all the related code.

If only adding the new APIs to TextPresentation helps you then we can do that but as previously said, we need a regular patch and test cases for the new APIs.
Yes, corresponding changes to the TextViewer are necessary if the text viewer is to use the more efficient API.  

My project extends TextViewer.  The changes are straight forward but I'm still testing them.  I'll append the TextViewer changes in the near future.  

In the attached version of TextPresentation, the applyTextPresentation() method is modified to demonstrate the use of the new API.  The TextViewer changes are similar.

Certainly the bulk of the use will be through the TextViewer, but note that other callers, such as the HTMLTextPresenter or 3rd party code can still use the old TextPresentation API.  Naturally, it is essential that the old API keep working while the text viewer gets the benefit of the 3.3 StyledText API.

When I've finished testing I'll generate patches.  It's early to discuss test cases, but I assume the sample XML plugin editor may be a reasonable start.
&gt;but I assume the sample XML plugin editor may be a reasonable start.
You can use that to test the initial implementation on your side but I'd expect to see additional tests in org.eclipse.jface.text.tests.TextPresentationTest and also memory usage comparisons e.g. when typing in the Java or Text editor.
Created attachment 175676
 Extended version of TextPresentation (Updated)

This is an updated version of TextPresentation as an extension.  Patch will be provided after more testing.
Created attachment 175677
TextViewer override

This is an override for TextViewer which allows it to use the new version of TextPresentation and thus the 3.3 StyledText widget API.  A TextViewer patch will be provided after more testing.</WithStack>
    <WithOutStack>StyledText has new API that allows to separate the styles from the ranges (see StyleRange). This allows to reduce the memory consumption compared to using just StyleRange-s.

In order to support this we will have to introduce new API in Platform Text and change all clients in Platform Text and JDT Text plus inform other clients. Platform Text will have to convert old API calls and merge the result with the usages of the new API calls before calling StyledText API.

This includes a major rewrite of TextPresentation.

NOTE: StyledText is converting to the new structure when the old APIs are called.
3.2 time permitting.
Has to be shifted to 3.3.
This reaches deep into the APIs and is too late at this point for 3.3.
Created attachment 175181
Extended version of TextPresentation

In an earlier project of mine (a PL/I editor) I discovered how important the new StyledText API is.  When I tried to process huge source files (nearing 1 megabyte) it brought Eclipse to its knees.  But when I used the new StyledText interface directly in the presentation repairer (instead of the normal processing), it was reasonably usable.  The performance difference was night and day!  One problem, of course, was that text annotations were not merged properly.

In a current project, I'm using an extended projection viewer.  While I was at it, I decided to extend TextPresentation as well so that it uses the new StyledText API while still allowing in-text annotations to be merged.  

I am attaching the source for my extended TextPresentation in its current state, and have included some commentary to explain the changes.

It adds API, but as far as I can tell none of the old API is broken.

It seems to be working, although more debugging is certainly needed.  I have no idea if this will be of use to you directly, but feel free.  If anyone is working on this problem perhaps it will make interesting reading.  At least it demonstrates that the problem can be solved, although production code might not do it the same way I did.

Please let me know if I can help further.  Would you like this in the form of a patch file?

Bill Fenlason
Hi Bill,
which version of Eclipse do you use? SWT internally changed their code to reduce the memory so that the new API is not always needed.

Could you attach your code together with a test case that shows the memory benefits?
Dani,

The preliminary code in the attachment I posted was based on the 3.6 TextPresentation.    

Do you know which version of StyledText contains the changes you mentioned?  I will want to check that out.  I didn't notice changes in 3.6, but I haven't looked closely yet.      

The memory savings are external to the StyledText widget and relate to the ability to share and reuse StyleRange objects. (StyleRange extends TextStyle) 

Currently when a presentation is generated, StyleRange objects can not be shared and a different (new) StyleRange object is needed for each token in the presentation.  For large source files that can be a big number, since typically the average token length is 5 or less.  

If the StyleRange objects are shared by providing the offset and length separately as int arguments (to the TextPresentation addStyleRange method, etc.), only a small (fixed) number of model StyleRange objects are needed.  

The StyledText API allows shared StyleRanges but currently the TextPresentation does not.  The StyledText API doesn't help much because it isn't used.

(Undoubtedly you know all that, but other readers might not be as aware of the situation.)  

Unfortunately I'm unable to generate a test case to quantify the memory savings and performance difference right now.
&gt;Do you know which version of StyledText contains the changes you mentioned?
Since 3.2. As you can see from the implementation, the old methods call the new ones that try to optimize the memory.

So far we simply didn't start to add the new APIs to TextPresentation because our use for that class is in the text viewer and hence we only benefit if we also rewrite all the related code.

If only adding the new APIs to TextPresentation helps you then we can do that but as previously said, we need a regular patch and test cases for the new APIs.
Yes, corresponding changes to the TextViewer are necessary if the text viewer is to use the more efficient API.  

My project extends TextViewer.  The changes are straight forward but I'm still testing them.  I'll append the TextViewer changes in the near future.  

In the attached version of TextPresentation, the applyTextPresentation() method is modified to demonstrate the use of the new API.  The TextViewer changes are similar.

Certainly the bulk of the use will be through the TextViewer, but note that other callers, such as the HTMLTextPresenter or 3rd party code can still use the old TextPresentation API.  Naturally, it is essential that the old API keep working while the text viewer gets the benefit of the 3.3 StyledText API.

When I've finished testing I'll generate patches.  It's early to discuss test cases, but I assume the sample XML plugin editor may be a reasonable start.
&gt;but I assume the sample XML plugin editor may be a reasonable start.
You can use that to test the initial implementation on your side but I'd expect to see additional tests in org.eclipse.jface.text.tests.TextPresentationTest and also memory usage comparisons e.g. when typing in the Java or Text editor.
Created attachment 175676
 Extended version of TextPresentation (Updated)

This is an updated version of TextPresentation as an extension.  Patch will be provided after more testing.
Created attachment 175677
TextViewer override

This is an override for TextViewer which allows it to use the new version of TextPresentation and thus the 3.3 StyledText widget API.  A TextViewer patch will be provided after more testing.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="119385" />
    <CreationDate amount="2005-12-06 04:56:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="SWT" />
    <Version amount="3.1.1" />
    <rep_platform amount="PC" />
    <op_sys amount="Linux-GTK" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>squeeze fonts after pango&amp;gtk update</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="NEW" />
    <resolution amount="" />
    <WithStack>After an update of pango and gtk (pango now in version 1.10.1 and gtk in version 2.8.8) some fonts in eclipse looking funny [1]. I think it's a genereal problem, because other apps seems to have similar problems. However, I don't know whom this bug belongs to :)

Distribution is gentoo

[1] http://www.martin-fernau.de/pics/lager/20051206/eclipse_fontproblem.png
Can you give an example of a problem in another app?

I think you should first file this in the gentoo bugzilla at
http://bugzilla.gentoo.org/ against GTK+.
Sure, I have an example of firefox [1]
I think it's an font-problem of pango/gtk. Some fonts squeeze like in the pictured - other not. If I aliase the fonts, all fonts are working.
Sorry if I was to fast to file a bugreport here. I will write a new report on bugzilla.gentoo.org

[1] http://www.martin-fernau.de/pics/lager/20051206/fontproblem.png
Can you post a link to the gentoo bugzilla when you file the bug?  Thanks!
here is the link you want: http://bugs.gentoo.org/show_bug.cgi?id=114644</WithStack>
    <WithOutStack>After an update of pango and gtk (pango now in version 1.10.1 and gtk in version 2.8.8) some fonts in eclipse looking funny [1]. I think it's a genereal problem, because other apps seems to have similar problems. However, I don't know whom this bug belongs to :)

Distribution is gentoo

[1] http://www.martin-fernau.de/pics/lager/20051206/eclipse_fontproblem.png
Can you give an example of a problem in another app?

I think you should first file this in the gentoo bugzilla at
http://bugzilla.gentoo.org/ against GTK+.
Sure, I have an example of firefox [1]
I think it's an font-problem of pango/gtk. Some fonts squeeze like in the pictured - other not. If I aliase the fonts, all fonts are working.
Sorry if I was to fast to file a bugreport here. I will write a new report on bugzilla.gentoo.org

[1] http://www.martin-fernau.de/pics/lager/20051206/fontproblem.png
Can you post a link to the gentoo bugzilla when you file the bug?  Thanks!
here is the link you want: http://bugs.gentoo.org/show_bug.cgi?id=114644</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="119386" />
    <CreationDate amount="2005-12-06 05:09:00 -0500" />
    <DupId amount="" />
    <classification amount="BIRT" />
    <Product amount="BIRT" />
    <component amount="Report" />
    <Version amount="2.0.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Exception is thrown out when cascading parameter group is copied.</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="5">
        <Lines>
          <Line>1. Create a cascading parameter.</Line>
          <Line>2. Copy and paste it.</Line>
          <Line>java.lang.StackOverflowError occurs.</Line>
          <Line>Fixed StackOverflowError caused by the bug in SlotHandle.</Line>
          <Line>Verified in build 20051208.</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>Description: Error occurs when cascading parameter group is copied.

Steps to reproduce:
1. Create a cascading parameter.
2. Copy and paste it. 
java.lang.StackOverflowError occurs.
Fixed StackOverflowError caused by the bug in SlotHandle.
Verified in build 20051208.</WithStack>
    <WithOutStack>Description: Error occurs when cascading parameter group is copied.

Steps to reproduce:
1. Create a cascading parameter.
2. Copy and paste it. 
java.lang.StackOverflowError occurs.
Fixed StackOverflowError caused by the bug in SlotHandle.
Verified in build 20051208.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="119387" />
    <CreationDate amount="2005-12-06 05:10:00 -0500" />
    <DupId amount="" />
    <classification amount="Tools" />
    <Product amount="CDT" />
    <component amount="cdt-core" />
    <Version amount="3.1" />
    <rep_platform amount="PC" />
    <op_sys amount="Linux" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>spawner doesnt kill child process on linux (most probably all unix)</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>If you launch for instance a build and it's implemented in a recursive way, make
will start several subprocesses. Cancelling the build does kill only the root
make-process, its childs run till normal termination.

Proposed Fix:

The spawner creates a new program group by calling
setpgid(getpgid(), getpgid())
after the fork (has to be done before any exec.. call)
the call to kill is replaced by killpg to destroy the whole process group.

This fix should work for most probably all unix systems.
Created attachment 31190
Proposed patch 

Patch for linux, should work for all unix implementations.
Tested on RHEL 4.
Cool thanks, I'll take a look.
Could this fix be added to the 3.0.2 Release?
We've passed RC0 and I'm afraid rebuilding the native libraries will destablize 3.0.2, not to mention take a long time since we need co-operation of the community to make this happen. I'll mark this for 3.1 to make sure it gets done.
Created attachment 39632
Test makefiles for reproducing problem

This zip contains 2 makefiles. Extract them to a directory and start make there.
The first makefile will launch make in the subdir and this will launch sleep, so that there are 3 processes running (2x make and sleep). If the process is launched using the command launcher you can kill it using the destroy() method. In the original implementation only the root make process will be killed, with the patch applied all 3 processes should be killed.
Applied the patch, the binaries are yet to be updated.
This is fixed for Windows, all Linux but PPC and Solaris.</WithStack>
    <WithOutStack>If you launch for instance a build and it's implemented in a recursive way, make
will start several subprocesses. Cancelling the build does kill only the root
make-process, its childs run till normal termination.

Proposed Fix:

The spawner creates a new program group by calling
setpgid(getpgid(), getpgid())
after the fork (has to be done before any exec.. call)
the call to kill is replaced by killpg to destroy the whole process group.

This fix should work for most probably all unix systems.
Created attachment 31190
Proposed patch 

Patch for linux, should work for all unix implementations.
Tested on RHEL 4.
Cool thanks, I'll take a look.
Could this fix be added to the 3.0.2 Release?
We've passed RC0 and I'm afraid rebuilding the native libraries will destablize 3.0.2, not to mention take a long time since we need co-operation of the community to make this happen. I'll mark this for 3.1 to make sure it gets done.
Created attachment 39632
Test makefiles for reproducing problem

This zip contains 2 makefiles. Extract them to a directory and start make there.
The first makefile will launch make in the subdir and this will launch sleep, so that there are 3 processes running (2x make and sleep). If the process is launched using the command launcher you can kill it using the destroy() method. In the original implementation only the root make process will be killed, with the patch applied all 3 processes should be killed.
Applied the patch, the binaries are yet to be updated.
This is fixed for Windows, all Linux but PPC and Solaris.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="119388" />
    <CreationDate amount="2005-12-06 05:11:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="Debug" />
    <Version amount="3.1.1" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows 2000" />
    <priority amount="P3" />
    <bug_severity amount="minor" />
    <Summery>[console] Fixed width console broken by tab characters</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="WONTFIX" />
    <WithStack>When using a fixed width console, any lines which contain a tab are shown as longer than the fixed width.

Specifically, it appears that the formatting algorithm fixes the console width to a number of bytes, not characters. This is particularly evident with stack traces which begin with a tab. Because the tab renders as 8 spaces (in my config), each tab character on any given line causes that line to exceed the defined width by 7 characters.
For this to work properly, I think we'd need to translate (or at least simulate) the tab chars to be real spaces. This would be required to make character ranges match up with document ranges. For example, if a document consists of a tab, the doc length is currently 1. However, it is rendered as 8 by SWT (or whatever the tab size is).

Daniel, does jface do anything here, or are there any existing requests against jface to handle tabs in documents differently?
&gt;Daniel, does jface do anything here, or are there any existing requests against
&gt;jface to handle tabs in documents differently?
What should it "do"? What do you mean by "handle tabs differently"?
If a tab character is mapped to 8 characters for presentation purposes, does (or should) the document consider the tab to be 1 character or 8?
1. 8 is just the display tab width.
Not planned for 3.2
As of now 'LATER' and 'REMIND' resolutions are no longer supported.
Please reopen this bug if it is still valid for you.</WithStack>
    <WithOutStack>When using a fixed width console, any lines which contain a tab are shown as longer than the fixed width.

Specifically, it appears that the formatting algorithm fixes the console width to a number of bytes, not characters. This is particularly evident with stack traces which begin with a tab. Because the tab renders as 8 spaces (in my config), each tab character on any given line causes that line to exceed the defined width by 7 characters.
For this to work properly, I think we'd need to translate (or at least simulate) the tab chars to be real spaces. This would be required to make character ranges match up with document ranges. For example, if a document consists of a tab, the doc length is currently 1. However, it is rendered as 8 by SWT (or whatever the tab size is).

Daniel, does jface do anything here, or are there any existing requests against jface to handle tabs in documents differently?
&gt;Daniel, does jface do anything here, or are there any existing requests against
&gt;jface to handle tabs in documents differently?
What should it "do"? What do you mean by "handle tabs differently"?
If a tab character is mapped to 8 characters for presentation purposes, does (or should) the document consider the tab to be 1 character or 8?
1. 8 is just the display tab width.
Not planned for 3.2
As of now 'LATER' and 'REMIND' resolutions are no longer supported.
Please reopen this bug if it is still valid for you.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="119389" />
    <CreationDate amount="2005-12-06 05:20:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="JDT" />
    <component amount="Text" />
    <Version amount="3.1" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="minor" />
    <Summery>[syntax highlighting] {@inheritDoc} is not syntax colored</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="WORKSFORME" />
    <WithStack>3.1

{@inheritDoc} is not syntax colored.

It works for:
{ @inheritDoc}
{ @inheritDoc }
Works fine in 3.5
Created attachment 143769
screenshot
As seen on the screenshot - it isn't
I'm using Build id: 20090621-0832
You should reopen this bug
The correct syntax of the tag is {@inheritDoc} (i.e. no space before the '@') and it is correctly colored as link. This is as designed.</WithStack>
    <WithOutStack>3.1

{@inheritDoc} is not syntax colored.

It works for:
{ @inheritDoc}
{ @inheritDoc }
Works fine in 3.5
Created attachment 143769
screenshot
As seen on the screenshot - it isn't
I'm using Build id: 20090621-0832
You should reopen this bug
The correct syntax of the tag is {@inheritDoc} (i.e. no space before the '@') and it is correctly colored as link. This is as designed.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="119390" />
    <CreationDate amount="2005-12-06 05:50:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="JDT" />
    <component amount="Debug" />
    <Version amount="3.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>NPE from</Summery>
    <Patches amount="0" />
    <Stacktraces amount="1">
      <Stacktrace timestamp="1437330614263">
        <Exception>java.lang.NullPointerException</Exception>
        <Reason />
        <Frames>
          <Frame depth="0">org.eclipse.jdt.internal.launching.environments.EnvironmentsManager.vmAdded(EnvironmentsManager.java:369)</Frame>
          <Frame depth="1">org.eclipse.jdt.launching.JavaRuntime.fireVMAdded(JavaRuntime.java:2150)</Frame>
          <Frame depth="2">org.eclipse.jdt.launching.VMStandin.convertToRealVM(VMStandin.java:132)</Frame>
          <Frame depth="3">org.eclipse.jdt.launching.JavaRuntime.loadVMDefsIntoMemory(JavaRuntime.java:1458)</Frame>
          <Frame depth="4">org.eclipse.jdt.launching.JavaRuntime.initializeVMConfiguration(JavaRuntime.java:1417)</Frame>
          <Frame depth="5">org.eclipse.jdt.launching.JavaRuntime.initializeVMTypes(JavaRuntime.java:309)</Frame>
          <Frame depth="6">org.eclipse.jdt.launching.JavaRuntime.getVMInstallTypes(JavaRuntime.java:480)</Frame>
          <Frame depth="7">org.eclipse.pde.internal.ui.launcher.VMHelper.getAllVMInstances(VMHelper.java:53)</Frame>
          <Frame depth="8">org.eclipse.pde.internal.ui.launcher.VMHelper.getVMInstallNames(VMHelper.java:64)</Frame>
          <Frame depth="9">org.eclipse.pde.internal.ui.editor.target.JRESection.createClient(JRESection.java:85)</Frame>
          <Frame depth="10">org.eclipse.pde.internal.ui.editor.target.JRESection.&lt;init&gt;(JRESection.java:42)</Frame>
          <Frame depth="11">org.eclipse.pde.internal.ui.editor.target.EnvironmentPage.fillBody(EnvironmentPage.java:41)</Frame>
          <Frame depth="12">org.eclipse.pde.internal.ui.editor.target.EnvironmentPage.createFormContent(EnvironmentPage.java:25)</Frame>
          <Frame depth="13">org.eclipse.ui.forms.editor.FormPage$1.run(FormPage.java:151)</Frame>
          <Frame depth="14">org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:69)</Frame>
          <Frame depth="15">org.eclipse.ui.forms.editor.FormPage.createPartControl(FormPage.java:149)</Frame>
          <Frame depth="16">org.eclipse.ui.forms.editor.FormEditor.pageChange(FormEditor.java:444)</Frame>
          <Frame depth="17">org.eclipse.pde.internal.ui.editor.PDEFormEditor.pageChange(PDEFormEditor.java:266)</Frame>
          <Frame depth="18">org.eclipse.ui.forms.editor.FormEditor.setActivePage(FormEditor.java:578)</Frame>
          <Frame depth="19">org.eclipse.ui.forms.editor.FormEditor.setActivePage(FormEditor.java:484)</Frame>
          <Frame depth="20">org.eclipse.pde.internal.ui.editor.PDEFormEditor.setActivePage(PDEFormEditor.java:594)</Frame>
          <Frame depth="21">org.eclipse.pde.internal.ui.editor.PDEFormEditor.createPages(PDEFormEditor.java:262)</Frame>
          <Frame depth="22">org.eclipse.ui.part.MultiPageEditorPart.createPartControl(MultiPageEditorPart.java:243)</Frame>
          <Frame depth="23">org.eclipse.ui.internal.EditorReference.createPartHelper(EditorReference.java:598)</Frame>
          <Frame depth="24">org.eclipse.ui.internal.EditorReference.createPart(EditorReference.java:374)</Frame>
          <Frame depth="25">org.eclipse.ui.internal.WorkbenchPartReference.getPart(WorkbenchPartReference.java:552)</Frame>
          <Frame depth="26">org.eclipse.ui.internal.EditorAreaHelper.setVisibleEditor(EditorAreaHelper.java:260)</Frame>
          <Frame depth="27">org.eclipse.ui.internal.EditorManager.setVisibleEditor(EditorManager.java:1201)</Frame>
          <Frame depth="28">org.eclipse.ui.internal.EditorManager$5.run(EditorManager.java:920)</Frame>
          <Frame depth="29">org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:37)</Frame>
          <Frame depth="30">org.eclipse.core.runtime.Platform.run(Platform.java:785)</Frame>
          <Frame depth="31">org.eclipse.ui.internal.EditorManager.restoreState(EditorManager.java:915)</Frame>
          <Frame depth="32">org.eclipse.ui.internal.WorkbenchPage.restoreState(WorkbenchPage.java:2615)</Frame>
          <Frame depth="33">org.eclipse.ui.internal.WorkbenchWindow.restoreState(WorkbenchWindow.java:1851)</Frame>
          <Frame depth="34">org.eclipse.ui.internal.Workbench.doRestoreState(Workbench.java:2644)</Frame>
          <Frame depth="35">org.eclipse.ui.internal.Workbench.access$14(Workbench.java:2593)</Frame>
          <Frame depth="36">org.eclipse.ui.internal.Workbench$17.run(Workbench.java:1542)</Frame>
          <Frame depth="37">org.eclipse.ui.internal.Workbench.runStartupWithProgress(Workbench.java:1294)</Frame>
          <Frame depth="38">org.eclipse.ui.internal.Workbench.restoreState(Workbench.java:1540)</Frame>
          <Frame depth="39">org.eclipse.ui.internal.Workbench.access$12(Workbench.java:1519)</Frame>
          <Frame depth="40">org.eclipse.ui.internal.Workbench$15.run(Workbench.java:1402)</Frame>
          <Frame depth="41">org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:37)</Frame>
          <Frame depth="42">org.eclipse.core.runtime.Platform.run(Platform.java:785)</Frame>
          <Frame depth="43">org.eclipse.ui.internal.Workbench.restoreState(Workbench.java:1346)</Frame>
          <Frame depth="44">org.eclipse.ui.internal.WorkbenchConfigurer.restoreState(WorkbenchConfigurer.java:183)</Frame>
          <Frame depth="45">org.eclipse.ui.application.WorkbenchAdvisor.openWindows(WorkbenchAdvisor.java:700)</Frame>
          <Frame depth="46">org.eclipse.ui.internal.Workbench.init(Workbench.java:1074)</Frame>
          <Frame depth="47">org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1696)</Frame>
          <Frame depth="48">org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:396)</Frame>
          <Frame depth="49">org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:143)</Frame>
          <Frame depth="50">org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:106)</Frame>
          <Frame depth="51">org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:109)</Frame>
          <Frame depth="52">org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:92)</Frame>
          <Frame depth="53">org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:68)</Frame>
          <Frame depth="54">org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:369)</Frame>
          <Frame depth="55">org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:167)</Frame>
          <Frame depth="56">sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)</Frame>
          <Frame depth="57">sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)</Frame>
          <Frame depth="58">sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)</Frame>
          <Frame depth="59">java.lang.reflect.Method.invoke(Method.java:324)</Frame>
          <Frame depth="60">org.eclipse.core.launcher.Main.invokeFramework(Main.java:338)</Frame>
          <Frame depth="61">org.eclipse.core.launcher.Main.basicRun(Main.java:282)</Frame>
          <Frame depth="62">org.eclipse.core.launcher.Main.run(Main.java:977)</Frame>
          <Frame depth="63">org.eclipse.core.launcher.Main.main(Main.java:952)</Frame>
        </Frames>
      </Stacktrace>
    </Stacktraces>
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="VERIFIED" />
    <resolution amount="FIXED" />
    <WithStack>One of our new editors queries EnvironmentsManager for EE's.  When Eclipse starts and one of these editors is open, I get the following NPE:

Error 2005-12-06 05:48:31.679 Unable to create editor ID org.eclipse.pde.ui.targetEditor: An unexpected exception was thrown.
java.lang.NullPointerException
at org.eclipse.jdt.internal.launching.environments.EnvironmentsManager.vmAdded(EnvironmentsManager.java:369)
at org.eclipse.jdt.launching.JavaRuntime.fireVMAdded(JavaRuntime.java:2150)
at org.eclipse.jdt.launching.VMStandin.convertToRealVM(VMStandin.java:132)
at org.eclipse.jdt.launching.JavaRuntime.loadVMDefsIntoMemory(JavaRuntime.java:1458)
at org.eclipse.jdt.launching.JavaRuntime.initializeVMConfiguration(JavaRuntime.java:1417)
at org.eclipse.jdt.launching.JavaRuntime.initializeVMTypes(JavaRuntime.java:309)
at org.eclipse.jdt.launching.JavaRuntime.getVMInstallTypes(JavaRuntime.java:480)
at org.eclipse.pde.internal.ui.launcher.VMHelper.getAllVMInstances(VMHelper.java:53)
at org.eclipse.pde.internal.ui.launcher.VMHelper.getVMInstallNames(VMHelper.java:64)
at org.eclipse.pde.internal.ui.editor.target.JRESection.createClient(JRESection.java:85)
at org.eclipse.pde.internal.ui.editor.target.JRESection.&lt;init&gt;(JRESection.java:42)
at org.eclipse.pde.internal.ui.editor.target.EnvironmentPage.fillBody(EnvironmentPage.java:41)
at org.eclipse.pde.internal.ui.editor.target.EnvironmentPage.createFormContent(EnvironmentPage.java:25)
at org.eclipse.ui.forms.editor.FormPage$1.run(FormPage.java:151)
at org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:69)
at org.eclipse.ui.forms.editor.FormPage.createPartControl(FormPage.java:149)
at org.eclipse.ui.forms.editor.FormEditor.pageChange(FormEditor.java:444)
at org.eclipse.pde.internal.ui.editor.PDEFormEditor.pageChange(PDEFormEditor.java:266)
at org.eclipse.ui.forms.editor.FormEditor.setActivePage(FormEditor.java:578)
at org.eclipse.ui.forms.editor.FormEditor.setActivePage(FormEditor.java:484)
at org.eclipse.pde.internal.ui.editor.PDEFormEditor.setActivePage(PDEFormEditor.java:594)
at org.eclipse.pde.internal.ui.editor.PDEFormEditor.createPages(PDEFormEditor.java:262)
at org.eclipse.ui.part.MultiPageEditorPart.createPartControl(MultiPageEditorPart.java:243)
at org.eclipse.ui.internal.EditorReference.createPartHelper(EditorReference.java:598)
at org.eclipse.ui.internal.EditorReference.createPart(EditorReference.java:374)
at org.eclipse.ui.internal.WorkbenchPartReference.getPart(WorkbenchPartReference.java:552)
at org.eclipse.ui.internal.EditorAreaHelper.setVisibleEditor(EditorAreaHelper.java:260)
at org.eclipse.ui.internal.EditorManager.setVisibleEditor(EditorManager.java:1201)
at org.eclipse.ui.internal.EditorManager$5.run(EditorManager.java:920)
at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:37)
at org.eclipse.core.runtime.Platform.run(Platform.java:785)
at org.eclipse.ui.internal.EditorManager.restoreState(EditorManager.java:915)
at org.eclipse.ui.internal.WorkbenchPage.restoreState(WorkbenchPage.java:2615)
at org.eclipse.ui.internal.WorkbenchWindow.restoreState(WorkbenchWindow.java:1851)
at org.eclipse.ui.internal.Workbench.doRestoreState(Workbench.java:2644)
at org.eclipse.ui.internal.Workbench.access$14(Workbench.java:2593)
at org.eclipse.ui.internal.Workbench$17.run(Workbench.java:1542)
at org.eclipse.ui.internal.Workbench.runStartupWithProgress(Workbench.java:1294)
at org.eclipse.ui.internal.Workbench.restoreState(Workbench.java:1540)
at org.eclipse.ui.internal.Workbench.access$12(Workbench.java:1519)
at org.eclipse.ui.internal.Workbench$15.run(Workbench.java:1402)
at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:37)
at org.eclipse.core.runtime.Platform.run(Platform.java:785)
at org.eclipse.ui.internal.Workbench.restoreState(Workbench.java:1346)
at org.eclipse.ui.internal.WorkbenchConfigurer.restoreState(WorkbenchConfigurer.java:183)
at org.eclipse.ui.application.WorkbenchAdvisor.openWindows(WorkbenchAdvisor.java:700)
at org.eclipse.ui.internal.Workbench.init(Workbench.java:1074)
at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1696)
at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:396)
at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:143)
at org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:106)
at org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:109)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:92)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:68)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:369)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:167)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:324)
at org.eclipse.core.launcher.Main.invokeFramework(Main.java:338)
at org.eclipse.core.launcher.Main.basicRun(Main.java:282)
at org.eclipse.core.launcher.Main.run(Main.java:977)
at org.eclipse.core.launcher.Main.main(Main.java:952)
Fixed in EnvironmentsManager. We should only process vm additions if the compatibilities cache has been initialized. Otherwise, it will be initialized lazily at a later time.
Please verify, Kevin.
verified</WithStack>
    <WithOutStack>One of our new editors queries EnvironmentsManager for EE's.  When Eclipse starts and one of these editors is open, I get the following NPE:

Error 2005-12-06 05:48:31.679 Unable to create editor ID org.eclipse.pde.ui.targetEditor: An unexpected exception was thrown.

Fixed in EnvironmentsManager. We should only process vm additions if the compatibilities cache has been initialized. Otherwise, it will be initialized lazily at a later time.
Please verify, Kevin.
verified</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="119391" />
    <CreationDate amount="2005-12-06 05:51:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="Debug" />
    <Version amount="3.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Many NPEs in DebugTargetProxy.containsEvent</Summery>
    <Patches amount="0" />
    <Stacktraces amount="1">
      <Stacktrace timestamp="1437330614263">
        <Exception>java.lang.NullPointerException</Exception>
        <Reason />
        <Frames>
          <Frame depth="0">org.eclipse.debug.internal.ui.viewers.update.DebugTargetProxy.containsEvent(DebugTargetProxy.java:27)</Frame>
          <Frame depth="1">org.eclipse.debug.internal.ui.viewers.update.EventHandlerModelProxy.handleDebugEvents(EventHandlerModelProxy.java:121)</Frame>
          <Frame depth="2">org.eclipse.debug.core.DebugPlugin$EventNotifier.run(DebugPlugin.java:1086)</Frame>
          <Frame depth="3">org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:37)</Frame>
          <Frame depth="4">org.eclipse.core.runtime.Platform.run(Platform.java:785)</Frame>
          <Frame depth="5">org.eclipse.debug.core.DebugPlugin$EventNotifier.dispatch(DebugPlugin.java:1118)</Frame>
          <Frame depth="6">org.eclipse.debug.core.DebugPlugin$EventDispatchJob.run(DebugPlugin.java:343)</Frame>
          <Frame depth="7">org.eclipse.core.internal.jobs.Worker.run(Worker.java:58)</Frame>
        </Frames>
      </Stacktrace>
    </Stacktraces>
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="VERIFIED" />
    <resolution amount="FIXED" />
    <WithStack>I20051130-1215

Found this many times in my .log - sorry no steps.

!ENTRY org.eclipse.debug.core 4 2 2005-12-06 09:28:56.439
!MESSAGE Problems occurred when invoking code from plug-in: "org.eclipse.debug.core".
!STACK 0
java.lang.NullPointerException
	at org.eclipse.debug.internal.ui.viewers.update.DebugTargetProxy.containsEvent(DebugTargetProxy.java:27)
	at org.eclipse.debug.internal.ui.viewers.update.EventHandlerModelProxy.handleDebugEvents(EventHandlerModelProxy.java:121)
	at org.eclipse.debug.core.DebugPlugin$EventNotifier.run(DebugPlugin.java:1086)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:37)
	at org.eclipse.core.runtime.Platform.run(Platform.java:785)
	at org.eclipse.debug.core.DebugPlugin$EventNotifier.dispatch(DebugPlugin.java:1118)
	at org.eclipse.debug.core.DebugPlugin$EventDispatchJob.run(DebugPlugin.java:343)
	at org.eclipse.core.internal.jobs.Worker.run(Worker.java:58)
Fixed in DebugTargetProxy. An expression may return null for #getDebugTarget(). Added null check.
Please verify, Kevin.
verified</WithStack>
    <WithOutStack>I20051130-1215

Found this many times in my .log - sorry no steps.

!ENTRY org.eclipse.debug.core 4 2 2005-12-06 09:28:56.439
!MESSAGE Problems occurred when invoking code from plug-in: "org.eclipse.debug.core".
!STACK 0

Fixed in DebugTargetProxy. An expression may return null for #getDebugTarget(). Added null check.
Please verify, Kevin.
verified</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="119392" />
    <CreationDate amount="2005-12-06 05:55:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="JDT" />
    <component amount="UI" />
    <Version amount="3.2" />
    <rep_platform amount="PC" />
    <op_sys amount="All" />
    <priority amount="P3" />
    <bug_severity amount="minor" />
    <Summery>Misleading dialog caption for derived rename compilation unit [refactoring]</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="5">
        <Lines>
          <Line>- Invoke Rename refactoring on cu</Line>
          <Line>- Choose to configure the name matching strategy</Line>
          <Line>-&gt; Dialog shows "Rename Type", but should inherit the caption from the user input dialog.</Line>
          <Line>Created attachment 31470</Line>
          <Line>jdt.ui</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="VERIFIED" />
    <resolution amount="FIXED" />
    <WithStack>I20051130-1215 + ZRH plugin export

Steps to reproduce:
- Invoke Rename refactoring on cu
- Choose to configure the name matching strategy
-&gt; Dialog shows "Rename Type", but should inherit the caption from the user input dialog.
Created attachment 31470
jdt.ui

You're right. Attached patch fixes the problem.
Created attachment 31476
jdt.ui
Released second fix for M4 (does not copy title, but gives real name).
verified 20051213-0010</WithStack>
    <WithOutStack>I20051130-1215 + ZRH plugin export

Steps to reproduce:
- Invoke Rename refactoring on cu
- Choose to configure the name matching strategy
-&gt; Dialog shows "Rename Type", but should inherit the caption from the user input dialog.
Created attachment 31470
jdt.ui

You're right. Attached patch fixes the problem.
Created attachment 31476
jdt.ui
Released second fix for M4 (does not copy title, but gives real name).
verified 20051213-0010</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="119393" />
    <CreationDate amount="2005-12-06 05:58:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="JDT" />
    <component amount="UI" />
    <Version amount="3.1.1" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>[quickfix] "Remove declaration ... without possible side effects" has side effects</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="2">
      <source_code type="package">
        <location start="291" end="312" />
        <code>package removeunused;</code>
      </source_code>
      <source_code type="class">
        <location start="314" end="835" />
        <code>public class RemoveUnusedParamBug {

	// set "Unnecessary code-&gt;Parameter is never read" 
	// to "Warning". Now select the second parameter below
	// and do quickfix "Remove declaration..."
	// (does not work)
	// then undo and try again with Alt+Shift+C (works)
	
	public RemoveUnusedParamBug (int i, int j) {
		System.out.println(i);
	}
	
	// same here
	public void sameHere(int i, int j) {
		System.out.println(i);
	}
	
	public static void main(String[] args) {
		new RemoveUnusedParamBug(47, 11).sameHere(8, 15);
	}
}</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="WONTFIX" />
    <WithStack>Hi,

I'm not sure if this is really a bug (maybe it's by design), but it is first irritating, then annoying. 

Problem is that when quickfix removes an unused param from a method it does not fix invocations of that method ("Refactor-&gt;Change method signature" fixes it correctly).

Example:

package removeunused;

public class RemoveUnusedParamBug {

	// set "Unnecessary code-&gt;Parameter is never read" 
	// to "Warning". Now select the second parameter below
	// and do quickfix "Remove declaration..."
	// (does not work)
	// then undo and try again with Alt+Shift+C (works)
	
	public RemoveUnusedParamBug (int i, int j) {
		System.out.println(i);
	}
	
	// same here
	public void sameHere(int i, int j) {
		System.out.println(i);
	}
	
	public static void main(String[] args) {
		new RemoveUnusedParamBug(47, 11).sameHere(8, 15);
	}
}

Proposed fix: change the quickfix's result to be the same as the result of "Change method signature".

Michael
Quick fix isn't refactoring, so it doesn't try do expensive operation like searching all references ect.</WithStack>
    <WithOutStack>Hi,

I'm not sure if this is really a bug (maybe it's by design), but it is first irritating, then annoying. 

Problem is that when quickfix removes an unused param from a method it does not fix invocations of that method ("Refactor-&gt;Change method signature" fixes it correctly).

Example:

package removeunused;

public class RemoveUnusedParamBug {

	// set "Unnecessary code-&gt;Parameter is never read" 
	// to "Warning". Now select the second parameter below
	// and do quickfix "Remove declaration..."
	// (does not work)
	// then undo and try again with Alt+Shift+C (works)
	
	public RemoveUnusedParamBug (int i, int j) {
		System.out.println(i);
	}
	
	// same here
	public void sameHere(int i, int j) {
		System.out.println(i);
	}
	
	public static void main(String[] args) {
		new RemoveUnusedParamBug(47, 11).sameHere(8, 15);
	}
}

Proposed fix: change the quickfix's result to be the same as the result of "Change method signature".

Michael
Quick fix isn't refactoring, so it doesn't try do expensive operation like searching all references ect.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="119394" />
    <CreationDate amount="2005-12-06 06:52:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="JDT" />
    <component amount="UI" />
    <Version amount="3.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>[refactoring] IndexOutOfBoundsException in Change Method Signature</Summery>
    <Patches amount="0" />
    <Stacktraces amount="2">
      <Stacktrace timestamp="1437330614263">
        <Exception>java.lang.reflect.InvocationTargetException</Exception>
        <Reason />
        <Frames>
          <Frame depth="0">org.eclipse.jface.operation.ModalContext.run(ModalContext.java:327)</Frame>
          <Frame depth="1">org.eclipse.ltk.internal.ui.refactoring.RefactoringWizardDialog2.run(RefactoringWizardDialog2.java:308)</Frame>
          <Frame depth="2">org.eclipse.ltk.ui.refactoring.RefactoringWizard.createChange(RefactoringWizard.java:571)</Frame>
          <Frame depth="3">org.eclipse.ltk.ui.refactoring.RefactoringWizard.computeUserInputSuccessorPage(RefactoringWizard.java:414)</Frame>
          <Frame depth="4">org.eclipse.ltk.ui.refactoring.UserInputWizardPage.computeSuccessorPage(UserInputWizardPage.java:75)</Frame>
          <Frame depth="5">org.eclipse.ltk.ui.refactoring.UserInputWizardPage.getNextPage(UserInputWizardPage.java:115)</Frame>
          <Frame depth="6">org.eclipse.ltk.internal.ui.refactoring.RefactoringWizardDialog2.nextOrPreviewPressed(RefactoringWizardDialog2.java:475)</Frame>
          <Frame depth="7">org.eclipse.ltk.internal.ui.refactoring.RefactoringWizardDialog2.access$3(RefactoringWizardDialog2.java:472)</Frame>
          <Frame depth="8">org.eclipse.ltk.internal.ui.refactoring.RefactoringWizardDialog2$1.widgetSelected(RefactoringWizardDialog2.java:660)</Frame>
          <Frame depth="9">org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:90)</Frame>
          <Frame depth="10">org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)</Frame>
          <Frame depth="11">org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:906)</Frame>
          <Frame depth="12">org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3241)</Frame>
          <Frame depth="13">org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2861)</Frame>
          <Frame depth="14">org.eclipse.jface.window.Window.runEventLoop(Window.java:808)</Frame>
          <Frame depth="15">org.eclipse.jface.window.Window.open(Window.java:786)</Frame>
          <Frame depth="16">org.eclipse.ltk.ui.refactoring.RefactoringWizardOpenOperation$1.run(RefactoringWizardOpenOperation.java:131)</Frame>
          <Frame depth="17">org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:69)</Frame>
          <Frame depth="18">org.eclipse.ltk.ui.refactoring.RefactoringWizardOpenOperation.run(RefactoringWizardOpenOperation.java:144)</Frame>
          <Frame depth="19">org.eclipse.jdt.internal.ui.refactoring.actions.RefactoringStarter.activate(RefactoringStarter.java:40)</Frame>
          <Frame depth="20">org.eclipse.jdt.internal.ui.refactoring.UserInterfaceStarter.activate(UserInterfaceStarter.java:56)</Frame>
          <Frame depth="21">org.eclipse.jdt.internal.corext.refactoring.RefactoringExecutionStarter$1.activate(RefactoringExecutionStarter.java:182)</Frame>
          <Frame depth="22">org.eclipse.jdt.internal.corext.refactoring.RefactoringExecutionStarter.startChangeSignatureRefactoring(RefactoringExecutionStarter.java:187)</Frame>
          <Frame depth="23">org.eclipse.jdt.ui.actions.ModifyParametersAction.run(ModifyParametersAction.java:132)</Frame>
          <Frame depth="24">org.eclipse.jdt.ui.actions.SelectionDispatchAction.dispatchRun(SelectionDispatchAction.java:253)</Frame>
          <Frame depth="25">org.eclipse.jdt.ui.actions.SelectionDispatchAction.run(SelectionDispatchAction.java:225)</Frame>
          <Frame depth="26">org.eclipse.jface.action.Action.runWithEvent(Action.java:492)</Frame>
          <Frame depth="27">org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection(ActionContributionItem.java:530)</Frame>
          <Frame depth="28">org.eclipse.jface.action.ActionContributionItem.access$2(ActionContributionItem.java:480)</Frame>
          <Frame depth="29">org.eclipse.jface.action.ActionContributionItem$5.handleEvent(ActionContributionItem.java:392)</Frame>
          <Frame depth="30">org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)</Frame>
          <Frame depth="31">org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:906)</Frame>
          <Frame depth="32">org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3241)</Frame>
          <Frame depth="33">org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2861)</Frame>
          <Frame depth="34">org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1763)</Frame>
          <Frame depth="35">org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1727)</Frame>
          <Frame depth="36">org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:396)</Frame>
          <Frame depth="37">org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:143)</Frame>
          <Frame depth="38">org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:106)</Frame>
          <Frame depth="39">org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:109)</Frame>
          <Frame depth="40">org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:92)</Frame>
          <Frame depth="41">org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:68)</Frame>
          <Frame depth="42">org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:369)</Frame>
          <Frame depth="43">org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:167)</Frame>
          <Frame depth="44">sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)</Frame>
          <Frame depth="45">sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)</Frame>
          <Frame depth="46">sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)</Frame>
          <Frame depth="47">java.lang.reflect.Method.invoke(Method.java:585)</Frame>
          <Frame depth="48">org.eclipse.core.launcher.Main.invokeFramework(Main.java:338)</Frame>
          <Frame depth="49">org.eclipse.core.launcher.Main.basicRun(Main.java:282)</Frame>
          <Frame depth="50">org.eclipse.core.launcher.Main.run(Main.java:977)</Frame>
          <Frame depth="51">org.eclipse.core.launcher.Main.main(Main.java:952)</Frame>
        </Frames>
      </Stacktrace>
      <Cause timestamp="1437330614263">
        <Exception>java.lang.IndexOutOfBoundsException</Exception>
        <Reason>Index: 0, Size: 0</Reason>
        <Frames>
          <Frame depth="0">java.util.ArrayList.RangeCheck(ArrayList.java:547)</Frame>
          <Frame depth="1">java.util.ArrayList.get(ArrayList.java:322)</Frame>
          <Frame depth="2">org.eclipse.jdt.core.dom.ASTNode$NodeList.get(ASTNode.java:1194)</Frame>
          <Frame depth="3">org.eclipse.jdt.internal.corext.refactoring.TypeContextChecker$MethodTypesChecker.resolveBindings(TypeContextChecker.java:176)</Frame>
          <Frame depth="4">org.eclipse.jdt.internal.corext.refactoring.TypeContextChecker$MethodTypesChecker.checkAndResolveMethodTypes(TypeContextChecker.java:118)</Frame>
          <Frame depth="5">org.eclipse.jdt.internal.corext.refactoring.TypeContextChecker.checkAndResolveMethodTypes(TypeContextChecker.java:437)</Frame>
          <Frame depth="6">org.eclipse.jdt.internal.corext.refactoring.structure.ChangeSignatureRefactoring.checkSignature(ChangeSignatureRefactoring.java:329)</Frame>
          <Frame depth="7">org.eclipse.jdt.internal.corext.refactoring.structure.ChangeSignatureRefactoring.checkFinalConditions(ChangeSignatureRefactoring.java:709)</Frame>
          <Frame depth="8">org.eclipse.ltk.core.refactoring.CheckConditionsOperation.run(CheckConditionsOperation.java:84)</Frame>
          <Frame depth="9">org.eclipse.ltk.core.refactoring.CreateChangeOperation.run(CreateChangeOperation.java:117)</Frame>
          <Frame depth="10">org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1714)</Frame>
          <Frame depth="11">org.eclipse.ltk.internal.ui.refactoring.WorkbenchRunnableAdapter.run(WorkbenchRunnableAdapter.java:86)</Frame>
          <Frame depth="12">org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:113)</Frame>
        </Frames>
      </Cause>
    </Stacktraces>
    <SourceCodeRegions amount="1">
      <source_code type="class">
        <location start="50" end="149" />
        <code>public class Foo {
	public void test() {
		Foo b= new Foo() {
			public void foo() {
			}
		};
	}
}</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="0" />
    <bug_status amount="VERIFIED" />
    <resolution amount="FIXED" />
    <WithStack>Build id: I20051130-1215

Having:

--------------
public class Foo {
	public void test() {
		Foo b= new Foo() {
			public void foo() {
			}
		};
	}
}
--------------

Invoke Change Signature on foo(); add one parameter, press "Preview":

java.lang.reflect.InvocationTargetException
	at org.eclipse.jface.operation.ModalContext.run(ModalContext.java:327)
	at org.eclipse.ltk.internal.ui.refactoring.RefactoringWizardDialog2.run(RefactoringWizardDialog2.java:308)
	at org.eclipse.ltk.ui.refactoring.RefactoringWizard.createChange(RefactoringWizard.java:571)
	at org.eclipse.ltk.ui.refactoring.RefactoringWizard.computeUserInputSuccessorPage(RefactoringWizard.java:414)
	at org.eclipse.ltk.ui.refactoring.UserInputWizardPage.computeSuccessorPage(UserInputWizardPage.java:75)
	at org.eclipse.ltk.ui.refactoring.UserInputWizardPage.getNextPage(UserInputWizardPage.java:115)
	at org.eclipse.ltk.internal.ui.refactoring.RefactoringWizardDialog2.nextOrPreviewPressed(RefactoringWizardDialog2.java:475)
	at org.eclipse.ltk.internal.ui.refactoring.RefactoringWizardDialog2.access$3(RefactoringWizardDialog2.java:472)
	at org.eclipse.ltk.internal.ui.refactoring.RefactoringWizardDialog2$1.widgetSelected(RefactoringWizardDialog2.java:660)
	at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:90)
	at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:906)
	at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3241)
	at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2861)
	at org.eclipse.jface.window.Window.runEventLoop(Window.java:808)
	at org.eclipse.jface.window.Window.open(Window.java:786)
	at org.eclipse.ltk.ui.refactoring.RefactoringWizardOpenOperation$1.run(RefactoringWizardOpenOperation.java:131)
	at org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:69)
	at org.eclipse.ltk.ui.refactoring.RefactoringWizardOpenOperation.run(RefactoringWizardOpenOperation.java:144)
	at org.eclipse.jdt.internal.ui.refactoring.actions.RefactoringStarter.activate(RefactoringStarter.java:40)
	at org.eclipse.jdt.internal.ui.refactoring.UserInterfaceStarter.activate(UserInterfaceStarter.java:56)
	at org.eclipse.jdt.internal.corext.refactoring.RefactoringExecutionStarter$1.activate(RefactoringExecutionStarter.java:182)
	at org.eclipse.jdt.internal.corext.refactoring.RefactoringExecutionStarter.startChangeSignatureRefactoring(RefactoringExecutionStarter.java:187)
	at org.eclipse.jdt.ui.actions.ModifyParametersAction.run(ModifyParametersAction.java:132)
	at org.eclipse.jdt.ui.actions.SelectionDispatchAction.dispatchRun(SelectionDispatchAction.java:253)
	at org.eclipse.jdt.ui.actions.SelectionDispatchAction.run(SelectionDispatchAction.java:225)
	at org.eclipse.jface.action.Action.runWithEvent(Action.java:492)
	at org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection(ActionContributionItem.java:530)
	at org.eclipse.jface.action.ActionContributionItem.access$2(ActionContributionItem.java:480)
	at org.eclipse.jface.action.ActionContributionItem$5.handleEvent(ActionContributionItem.java:392)
	at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:906)
	at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3241)
	at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2861)
	at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1763)
	at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1727)
	at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:396)
	at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:143)
	at org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:106)
	at org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:109)
	at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:92)
	at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:68)
	at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:369)
	at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:167)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:585)
	at org.eclipse.core.launcher.Main.invokeFramework(Main.java:338)
	at org.eclipse.core.launcher.Main.basicRun(Main.java:282)
	at org.eclipse.core.launcher.Main.run(Main.java:977)
	at org.eclipse.core.launcher.Main.main(Main.java:952)
Caused by: java.lang.IndexOutOfBoundsException: Index: 0, Size: 0
	at java.util.ArrayList.RangeCheck(ArrayList.java:547)
	at java.util.ArrayList.get(ArrayList.java:322)
	at org.eclipse.jdt.core.dom.ASTNode$NodeList.get(ASTNode.java:1194)
	at org.eclipse.jdt.internal.corext.refactoring.TypeContextChecker$MethodTypesChecker.resolveBindings(TypeContextChecker.java:176)
	at org.eclipse.jdt.internal.corext.refactoring.TypeContextChecker$MethodTypesChecker.checkAndResolveMethodTypes(TypeContextChecker.java:118)
	at org.eclipse.jdt.internal.corext.refactoring.TypeContextChecker.checkAndResolveMethodTypes(TypeContextChecker.java:437)
	at org.eclipse.jdt.internal.corext.refactoring.structure.ChangeSignatureRefactoring.checkSignature(ChangeSignatureRefactoring.java:329)
	at org.eclipse.jdt.internal.corext.refactoring.structure.ChangeSignatureRefactoring.checkFinalConditions(ChangeSignatureRefactoring.java:709)
	at org.eclipse.ltk.core.refactoring.CheckConditionsOperation.run(CheckConditionsOperation.java:84)
	at org.eclipse.ltk.core.refactoring.CreateChangeOperation.run(CreateChangeOperation.java:117)
	at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1714)
	at org.eclipse.ltk.internal.ui.refactoring.WorkbenchRunnableAdapter.run(WorkbenchRunnableAdapter.java:86)
	at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:113)
Fixed in HEAD.
Verified in I20051213-0010.</WithStack>
    <WithOutStack>Build id: I20051130-1215

Having:

--------------
public class Foo {
	public void test() {
		Foo b= new Foo() {
			public void foo() {
			}
		};
	}
}
--------------

Invoke Change Signature on foo(); add one parameter, press "Preview":



Fixed in HEAD.
Verified in I20051213-0010.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="119395" />
    <CreationDate amount="2005-12-06 07:01:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="JDT" />
    <component amount="Core" />
    <Version amount="3.1.1" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows 2000" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>[1.5][compiler] wildcard capture and unnecessary cast warning</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="5">
      <source_code type="package">
        <location start="0" end="18" />
        <code>package noel.bugs;</code>
      </source_code>
      <source_code type="import">
        <location start="19" end="45" />
        <code>import java.util.HashMap;</code>
      </source_code>
      <source_code type="import">
        <location start="46" end="67" />
        <code>import java.util.Map;</code>
      </source_code>
      <source_code type="multicomment">
        <location start="68" end="305" />
        <code>/**
 * Without the cast on the relevant line, the SUN compiler (JDK1.5.0_06) will flag an error.
 * 
 * With the cast, Eclipse issues a warning that the cast is unnecessary. But as far as I can
 * tell, the cast really is necessary.
 */</code>
      </source_code>
      <source_code type="class">
        <location start="306" end="957" />
        <code>public class EclipseGenericsBug {

	public static class DatabaseObject {
	}
	
	public static class ObjectFormUI&lt;T extends DatabaseObject&gt;  {
	}
	
	private static final Map&lt;Class&lt;? extends DatabaseObject&gt;, Class&lt;? extends ObjectFormUI&gt;&gt; uiMap 
		= new HashMap&lt;Class&lt;? extends DatabaseObject&gt;, Class&lt;? extends ObjectFormUI&gt;&gt;();
	
	private EclipseGenericsBug() {
	}
	
	public static &lt;T extends DatabaseObject&gt; Class&lt;? extends ObjectFormUI&lt;T&gt;&gt; getUI(Class&lt;T&gt; persistentClass) {
		// &gt;&gt;&gt;&gt;&gt;&gt; THIS LINE IS THE CRITICAL ONE &lt;&lt;&lt;&lt;&lt;&lt;&lt;
		return (Class&lt;? extends ObjectFormUI&lt;T&gt;&gt;) uiMap.get(persistentClass);
		// &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
	}

}</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="WORKSFORME" />
    <WithStack>package noel.bugs;

import java.util.HashMap;
import java.util.Map;

/**
 * Without the cast on the relevant line, the SUN compiler (JDK1.5.0_06) will flag an error.
 * 
 * With the cast, Eclipse issues a warning that the cast is unnecessary. But as far as I can
 * tell, the cast really is necessary.
 */
public class EclipseGenericsBug {

	public static class DatabaseObject {
	}
	
	public static class ObjectFormUI&lt;T extends DatabaseObject&gt;  {
	}
	
	private static final Map&lt;Class&lt;? extends DatabaseObject&gt;, Class&lt;? extends ObjectFormUI&gt;&gt; uiMap 
		= new HashMap&lt;Class&lt;? extends DatabaseObject&gt;, Class&lt;? extends ObjectFormUI&gt;&gt;();
	
	private EclipseGenericsBug() {
	}
	
	public static &lt;T extends DatabaseObject&gt; Class&lt;? extends ObjectFormUI&lt;T&gt;&gt; getUI(Class&lt;T&gt; persistentClass) {
		// &gt;&gt;&gt;&gt;&gt;&gt; THIS LINE IS THE CRITICAL ONE &lt;&lt;&lt;&lt;&lt;&lt;&lt;
		return (Class&lt;? extends ObjectFormUI&lt;T&gt;&gt;) uiMap.get(persistentClass);
		// &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
	}

}
Works fine now. We resolved some extraneous unnecessary cast diagnostics in presence of unchecked conversions.

Added GenericTypeTest#test875
Also added GenericTypeTest#test876</WithStack>
    <WithOutStack>package noel.bugs;

import java.util.HashMap;
import java.util.Map;

/**
 * Without the cast on the relevant line, the SUN compiler (JDK1.5.0_06) will flag an error.
 * 
 * With the cast, Eclipse issues a warning that the cast is unnecessary. But as far as I can
 * tell, the cast really is necessary.
 */
public class EclipseGenericsBug {

	public static class DatabaseObject {
	}
	
	public static class ObjectFormUI&lt;T extends DatabaseObject&gt;  {
	}
	
	private static final Map&lt;Class&lt;? extends DatabaseObject&gt;, Class&lt;? extends ObjectFormUI&gt;&gt; uiMap 
		= new HashMap&lt;Class&lt;? extends DatabaseObject&gt;, Class&lt;? extends ObjectFormUI&gt;&gt;();
	
	private EclipseGenericsBug() {
	}
	
	public static &lt;T extends DatabaseObject&gt; Class&lt;? extends ObjectFormUI&lt;T&gt;&gt; getUI(Class&lt;T&gt; persistentClass) {
		// &gt;&gt;&gt;&gt;&gt;&gt; THIS LINE IS THE CRITICAL ONE &lt;&lt;&lt;&lt;&lt;&lt;&lt;
		return (Class&lt;? extends ObjectFormUI&lt;T&gt;&gt;) uiMap.get(persistentClass);
		// &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
	}

}
Works fine now. We resolved some extraneous unnecessary cast diagnostics in presence of unchecked conversions.

Added GenericTypeTest#test875
Also added GenericTypeTest#test876</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="119396" />
    <CreationDate amount="2005-12-06 07:23:00 -0500" />
    <DupId amount="" />
    <classification amount="Tools" />
    <Product amount="CDT" />
    <component amount="cdt-build" />
    <Version amount="3.1" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="critical" />
    <Summery>generated make files fail on windows</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="2">
      <source_code type="singlecomment">
        <location start="1957" end="2018" />
        <code>// if the input resource isn't a variable then quote it</code>
      </source_code>
      <source_code type="functioncall">
        <location start="2209" end="2268" />
        <code>tempBuffer.append(inputResources[k] + WHITESPACE);</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>I've just come across a problem that sounds like it may be related to the recent discussion about spaces in filenames. Its occured with a non-Cygwin Windows toolchain (MinGW gcc 3.4), however my filenames don't have spaces. I'm currently playing with CDT HEAD, and am trying to compile a project which lives under path:

    C:\eclipseWork\workspaces\runtime-workspace\baddeps\src\hello.c

 

The managed make system is generating make files containing rules of the form

 

    # Each subdirectory must supply rules for building sources it contributes
    src/%.o: ../src/%.c
     @echo 'Building file: $&lt;'
     @echo 'Invoking: GCC C Compiler'
     @echo gcc -O0 -g3 -Wall -c -fmessage-length=0 -o'$@' '$&lt;'
     @gcc -O0 -g3 -Wall -c -fmessage-length=0 -o'$@' '$&lt;' &amp;&amp; \
     echo -n '$(@:%.o=%.d)' $(dir $@) &gt; '$(@:%.o=%.d)' &amp;&amp; \
     gcc -MM -MG -P -w -O0 -g3 -Wall -c -fmessage-length=0  '$&lt;' &gt;&gt; '$(@:%.o=%.d)'
     @echo 'Finished building: $&lt;'
     @echo ' '

 

(note that the input macro $&lt; is now enclosed in single quotes). Upon running this gives output:


    **** Full rebuild of configuration Debug for project baddeps ****

    

    make -k clean all 
    rm -rf  ./src/hello.o  ./src//hello.d  baddeps.exe
    ' '
    'Building file: ../src/hello.c'
    'Invoking: GCC C Compiler'
    gcc -O0 -g3 -Wall -c -fmessage-length=0 -o'src/hello.o' '../src/hello.c'
    gcc: '../src/hello.c': No such file or directory
    gcc: no input files
    make: *** [src/hello.o] Error 1
    make: Target `all' not remade because of errors.
    Build complete for project baddeps

 

because the underlying shell is Windows XP CMD.exe, which (from experiments) treats single quotes the same as any alphanumeric character. Running the same gcc command from the shell, without single quotes, compiles as expected.

I've tracked this down to the code below from org.eclipse.cdt.managedbuilder.internal.core.ManagedCommandLineGenerator (originating in rev 1.3)

    // if the input resource isn't a variable then quote it

    if(inputResources[k].indexOf("$(") != 0) //$NON-NLS-1$
         tempBuffer.append(SINGLE_QUOTE + inputResources[k] + SINGLE_QUOTE + WHITESPACE); //$NON-NLS-1$ //$NON-NLS-2$
        else
         tempBuffer.append(inputResources[k] + WHITESPACE);
this defect is related to a subject discussed on the cdt-dev mailing list originated by Chris R. which discusses supporting spaces in filenames (subject line "The Shell Game")

adding single quotes around file names which would allow tools invoked from a unix shell to receive filenames containing spaces seems to confuse windows CMD.exe


I'll change the single quotes to double quotes.  That should appease both bash and cmd.exe
Can you confirm which version of CDT this was on?  I see you've put 3.0.1 but as I recall the spaces support which added the single quotes was only done on HEAD.
sorry - my bad

I've been developing from HEAD but wrongly assumed it had got into 3.0.1

I have committed a change to 3.1 (head) to use double quotes rather than single quotes.</WithStack>
    <WithOutStack>I've just come across a problem that sounds like it may be related to the recent discussion about spaces in filenames. Its occured with a non-Cygwin Windows toolchain (MinGW gcc 3.4), however my filenames don't have spaces. I'm currently playing with CDT HEAD, and am trying to compile a project which lives under path:

    C:\eclipseWork\workspaces\runtime-workspace\baddeps\src\hello.c

 

The managed make system is generating make files containing rules of the form

 

    # Each subdirectory must supply rules for building sources it contributes
    src/%.o: ../src/%.c
     @echo 'Building file: $&lt;'
     @echo 'Invoking: GCC C Compiler'
     @echo gcc -O0 -g3 -Wall -c -fmessage-length=0 -o'$@' '$&lt;'
     @gcc -O0 -g3 -Wall -c -fmessage-length=0 -o'$@' '$&lt;' &amp;&amp; \
     echo -n '$(@:%.o=%.d)' $(dir $@) &gt; '$(@:%.o=%.d)' &amp;&amp; \
     gcc -MM -MG -P -w -O0 -g3 -Wall -c -fmessage-length=0  '$&lt;' &gt;&gt; '$(@:%.o=%.d)'
     @echo 'Finished building: $&lt;'
     @echo ' '

 

(note that the input macro $&lt; is now enclosed in single quotes). Upon running this gives output:


    **** Full rebuild of configuration Debug for project baddeps ****

    

    make -k clean all 
    rm -rf  ./src/hello.o  ./src//hello.d  baddeps.exe
    ' '
    'Building file: ../src/hello.c'
    'Invoking: GCC C Compiler'
    gcc -O0 -g3 -Wall -c -fmessage-length=0 -o'src/hello.o' '../src/hello.c'
    gcc: '../src/hello.c': No such file or directory
    gcc: no input files
    make: *** [src/hello.o] Error 1
    make: Target `all' not remade because of errors.
    Build complete for project baddeps

 

because the underlying shell is Windows XP CMD.exe, which (from experiments) treats single quotes the same as any alphanumeric character. Running the same gcc command from the shell, without single quotes, compiles as expected.

I've tracked this down to the code below from org.eclipse.cdt.managedbuilder.internal.core.ManagedCommandLineGenerator (originating in rev 1.3)

    // if the input resource isn't a variable then quote it

    if(inputResources[k].indexOf("$(") != 0) //$NON-NLS-1$
         tempBuffer.append(SINGLE_QUOTE + inputResources[k] + SINGLE_QUOTE + WHITESPACE); //$NON-NLS-1$ //$NON-NLS-2$
        else
         tempBuffer.append(inputResources[k] + WHITESPACE);
this defect is related to a subject discussed on the cdt-dev mailing list originated by Chris R. which discusses supporting spaces in filenames (subject line "The Shell Game")

adding single quotes around file names which would allow tools invoked from a unix shell to receive filenames containing spaces seems to confuse windows CMD.exe


I'll change the single quotes to double quotes.  That should appease both bash and cmd.exe
Can you confirm which version of CDT this was on?  I see you've put 3.0.1 but as I recall the spaces support which added the single quotes was only done on HEAD.
sorry - my bad

I've been developing from HEAD but wrongly assumed it had got into 3.0.1

I have committed a change to 3.1 (head) to use double quotes rather than single quotes.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="119397" />
    <CreationDate amount="2005-12-06 07:26:00 -0500" />
    <DupId amount="" />
    <classification amount="BIRT" />
    <Product amount="BIRT" />
    <component amount="Report Engine" />
    <Version amount="2.0.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>2.0M3 build ignores column width when generating pdfs</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>Birt seems to ignore the column width values in the 2.0M3 build when generating pdfs. In the generated pdf file all columns have got the same width.

column_width.rptdesign contains a simple example that works with the 2.0M2 build
but doesn't work with the 2.0M3 build.
Created attachment 31191
Simple example that shows the bug
Fixed in new BIRT PDF emitter
Verified (20051222)
Viewer Version : 2.3.1

Engine Version: 2.3.1

JRE version: 1.6.0_04

Problem comes up again :(

using 
SalesInvoice.rptdesign

I can provide live address link, to check the behavior.</WithStack>
    <WithOutStack>Birt seems to ignore the column width values in the 2.0M3 build when generating pdfs. In the generated pdf file all columns have got the same width.

column_width.rptdesign contains a simple example that works with the 2.0M2 build
but doesn't work with the 2.0M3 build.
Created attachment 31191
Simple example that shows the bug
Fixed in new BIRT PDF emitter
Verified (20051222)
Viewer Version : 2.3.1

Engine Version: 2.3.1

JRE version: 1.6.0_04

Problem comes up again :(

using 
SalesInvoice.rptdesign

I can provide live address link, to check the behavior.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="119398" />
    <CreationDate amount="2005-12-06 07:33:00 -0500" />
    <DupId amount="" />
    <classification amount="BIRT" />
    <Product amount="BIRT" />
    <component amount="Report Engine" />
    <Version amount="unspecified" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Using RenderTask to render pdf file but the master page information lost.</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="2">
        <Lines>
          <Line>1. Generate attached case1.rptdesign to report document</Line>
          <Line>2. Using RenderTask to render report document to pdf file.</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>Description:
Using RenderTask to render pdf file but the master page information lost.

Steps to reproduce:
1. Generate attached case1.rptdesign to report document
2. Using RenderTask to render report document to pdf file.

Expected result:
Master Page contents show in pdf file.

Actual result:
In generated pdf file, I saw "NO DATA FOUND!!!" instead of master page contents
Created attachment 31192
case1.rptdesign
*** Bug 119399 has been marked as a duplicate of this bug. ***
PDF emitter generates page content by itself. 
When generating page header or footer, NullPointException will throw out.
fix this bug
Verified in build 20051208</WithStack>
    <WithOutStack>Description:
Using RenderTask to render pdf file but the master page information lost.

Steps to reproduce:
1. Generate attached case1.rptdesign to report document
2. Using RenderTask to render report document to pdf file.

Expected result:
Master Page contents show in pdf file.

Actual result:
In generated pdf file, I saw "NO DATA FOUND!!!" instead of master page contents
Created attachment 31192
case1.rptdesign
*** Bug 119399 has been marked as a duplicate of this bug. ***
PDF emitter generates page content by itself. 
When generating page header or footer, NullPointException will throw out.
fix this bug
Verified in build 20051208</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="119399" />
    <CreationDate amount="2005-12-06 07:56:00 -0500" />
    <DupId amount="119398" />
    <classification amount="BIRT" />
    <Product amount="BIRT" />
    <component amount="Report Engine" />
    <Version amount="unspecified" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Using RenderTask to render pdf file but the master page information lost.</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="2">
        <Lines>
          <Line>1. Generate attached case1.rptdesign to report document</Line>
          <Line>2. Using RenderTask to render report document to pdf file.</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="CLOSED" />
    <resolution amount="DUPLICATE" />
    <WithStack>Description:
Using RenderTask to render pdf file but the master page information lost.

Steps to reproduce:
1. Generate attached case1.rptdesign to report document
2. Using RenderTask to render report document to pdf file.

Expected result:
Master Page contents show in pdf file.

Actual result:
In generated pdf file, I saw "NO DATA FOUND!!!" instead of master page contents
This bug is duplicated with #119398 caused by network problem.

*** This bug has been marked as a duplicate of 119398 ***
close it.</WithStack>
    <WithOutStack>Description:
Using RenderTask to render pdf file but the master page information lost.

Steps to reproduce:
1. Generate attached case1.rptdesign to report document
2. Using RenderTask to render report document to pdf file.

Expected result:
Master Page contents show in pdf file.

Actual result:
In generated pdf file, I saw "NO DATA FOUND!!!" instead of master page contents
This bug is duplicated with #119398 caused by network problem.

*** This bug has been marked as a duplicate of 119398 ***
close it.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="119400" />
    <CreationDate amount="2005-12-06 08:06:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="Text" />
    <Version amount="3.1" />
    <rep_platform amount="All" />
    <op_sys amount="All" />
    <priority amount="P3" />
    <bug_severity amount="enhancement" />
    <Summery>[templates] Make templates project specific and allow team sharing</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="ASSIGNED" />
    <resolution amount="" />
    <WithStack>It is already possible to import and export templates.  But I think exported templates that are stored with the project in source control, should be 'automatically import' (made available) by virtue of having the project open.</WithStack>
    <WithOutStack>It is already possible to import and export templates.  But I think exported templates that are stored with the project in source control, should be 'automatically import' (made available) by virtue of having the project open.</WithOutStack>
  </Bug>
</infozilla-output>

