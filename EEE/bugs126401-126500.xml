<?xml version="1.0" encoding="UTF-8"?>
<infozilla-output>
  <Bug>
    <BugId amount="126401" />
    <CreationDate amount="2006-02-03 14:59:00 -0500" />
    <DupId amount="" />
    <classification amount="Tools" />
    <Product amount="AspectJ" />
    <component amount="IDE" />
    <Version amount="1.5.0M5" />
    <rep_platform amount="Macintosh" />
    <op_sys amount="Mac OS X - Carbon (unsup.)" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>AspectJ Throws Exception upon Aspect File Rename</Summery>
    <Patches amount="0" />
    <Stacktraces amount="1">
      <Stacktrace timestamp="1437330655894">
        <Exception>java.lang.NullPointerException</Exception>
        <Reason />
        <Frames>
          <Frame depth="0">org.aspectj.org.eclipse.jdt.internal.compiler.lookup.CompilationUnitScope.typeToRecord(CompilationUnitScope.java:710)</Frame>
          <Frame depth="1">org.aspectj.org.eclipse.jdt.internal.compiler.lookup.CompilationUnitScope.recordTypeReference(CompilationUnitScope.java:632)</Frame>
          <Frame depth="2">org.aspectj.ajdt.internal.compiler.lookup.InterTypeFieldBinding.canBeSeenBy(InterTypeFieldBinding.java:55)</Frame>
          <Frame depth="3">org.aspectj.org.eclipse.jdt.internal.compiler.lookup.FieldBinding.getVisibleBinding(FieldBinding.java:326)</Frame>
          <Frame depth="4">org.aspectj.org.eclipse.jdt.internal.compiler.lookup.Scope.findField(Scope.java:814)</Frame>
          <Frame depth="5">org.aspectj.org.eclipse.jdt.internal.compiler.lookup.MethodScope.findField(MethodScope.java:337)</Frame>
          <Frame depth="6">org.aspectj.org.eclipse.jdt.internal.compiler.lookup.Scope.getField(Scope.java:1763)</Frame>
          <Frame depth="7">org.aspectj.org.eclipse.jdt.internal.compiler.ast.QualifiedNameReference.getOtherFieldBindings(QualifiedNameReference.java:720)</Frame>
          <Frame depth="8">org.aspectj.org.eclipse.jdt.internal.compiler.ast.QualifiedNameReference.resolveType(QualifiedNameReference.java:914)</Frame>
          <Frame depth="9">org.aspectj.org.eclipse.jdt.internal.compiler.ast.UnaryExpression.resolveType(UnaryExpression.java:210)</Frame>
          <Frame depth="10">org.aspectj.org.eclipse.jdt.internal.compiler.ast.Expression.resolveTypeExpecting(Expression.java:848)</Frame>
          <Frame depth="11">org.aspectj.org.eclipse.jdt.internal.compiler.ast.IfStatement.resolve(IfStatement.java:222)</Frame>
          <Frame depth="12">org.aspectj.org.eclipse.jdt.internal.compiler.ast.AbstractMethodDeclaration.resolveStatements(AbstractMethodDeclaration.java:422)</Frame>
          <Frame depth="13">org.aspectj.org.eclipse.jdt.internal.compiler.ast.MethodDeclaration.resolveStatements(MethodDeclaration.java:178)</Frame>
          <Frame depth="14">org.aspectj.ajdt.internal.compiler.ast.AdviceDeclaration.resolveStatements(AdviceDeclaration.java:134)</Frame>
          <Frame depth="15">org.aspectj.org.eclipse.jdt.internal.compiler.ast.AbstractMethodDeclaration.resolve(AbstractMethodDeclaration.java:400)</Frame>
          <Frame depth="16">org.aspectj.org.eclipse.jdt.internal.compiler.ast.TypeDeclaration.resolve(TypeDeclaration.java:1088)</Frame>
          <Frame depth="17">org.aspectj.ajdt.internal.compiler.ast.AspectDeclaration.resolve(AspectDeclaration.java:114)</Frame>
          <Frame depth="18">org.aspectj.org.eclipse.jdt.internal.compiler.ast.TypeDeclaration.resolve(TypeDeclaration.java:1137)</Frame>
          <Frame depth="19">org.aspectj.org.eclipse.jdt.internal.compiler.ast.CompilationUnitDeclaration.resolve(CompilationUnitDeclaration.java:305)</Frame>
          <Frame depth="20">org.aspectj.org.eclipse.jdt.internal.compiler.Compiler.process(Compiler.java:514)</Frame>
          <Frame depth="21">org.aspectj.org.eclipse.jdt.internal.compiler.Compiler.compile(Compiler.java:329)</Frame>
          <Frame depth="22">org.aspectj.ajdt.internal.core.builder.AjBuildManager.performCompilation(AjBuildManager.java:809)</Frame>
          <Frame depth="23">org.aspectj.ajdt.internal.core.builder.AjBuildManager.doBuild(AjBuildManager.java:254)</Frame>
          <Frame depth="24">org.aspectj.ajdt.internal.core.builder.AjBuildManager.incrementalBuild(AjBuildManager.java:163)</Frame>
          <Frame depth="25">org.aspectj.ajde.internal.CompilerAdapter.compile(CompilerAdapter.java:117)</Frame>
          <Frame depth="26">org.aspectj.ajde.internal.AspectJBuildManager$CompilerThread.run(AspectJBuildManager.java:191)</Frame>
        </Frames>
      </Stacktrace>
    </Stacktraces>
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="WORKSFORME" />
    <WithStack>I went to change the name of the aspect in my project. AJDC does not, as you know, support much in the way of refactoring. So I first edited the file to change the name of the aspect there. When I went to rename the file (using Rename.. from the menu attached to the file), I was told that AspectJ had crashed.

Here is the stack trace:

java.lang.NullPointerException
at org.aspectj.org.eclipse.jdt.internal.compiler.lookup.CompilationUnitScope.typeToRecord(CompilationUnitScope.java:710)
at org.aspectj.org.eclipse.jdt.internal.compiler.lookup.CompilationUnitScope.recordTypeReference(CompilationUnitScope.java:632)
at org.aspectj.ajdt.internal.compiler.lookup.InterTypeFieldBinding.canBeSeenBy(InterTypeFieldBinding.java:55)
at org.aspectj.org.eclipse.jdt.internal.compiler.lookup.FieldBinding.getVisibleBinding(FieldBinding.java:326)
at org.aspectj.org.eclipse.jdt.internal.compiler.lookup.Scope.findField(Scope.java:814)
at org.aspectj.org.eclipse.jdt.internal.compiler.lookup.MethodScope.findField(MethodScope.java:337)
at org.aspectj.org.eclipse.jdt.internal.compiler.lookup.Scope.getField(Scope.java:1763)
at org.aspectj.org.eclipse.jdt.internal.compiler.ast.QualifiedNameReference.getOtherFieldBindings(QualifiedNameReference.java:720)
at org.aspectj.org.eclipse.jdt.internal.compiler.ast.QualifiedNameReference.resolveType(QualifiedNameReference.java:914)
at org.aspectj.org.eclipse.jdt.internal.compiler.ast.UnaryExpression.resolveType(UnaryExpression.java:210)
at org.aspectj.org.eclipse.jdt.internal.compiler.ast.Expression.resolveTypeExpecting(Expression.java:848)
at org.aspectj.org.eclipse.jdt.internal.compiler.ast.IfStatement.resolve(IfStatement.java:222)
at org.aspectj.org.eclipse.jdt.internal.compiler.ast.AbstractMethodDeclaration.resolveStatements(AbstractMethodDeclaration.java:422)
at org.aspectj.org.eclipse.jdt.internal.compiler.ast.MethodDeclaration.resolveStatements(MethodDeclaration.java:178)
at org.aspectj.ajdt.internal.compiler.ast.AdviceDeclaration.resolveStatements(AdviceDeclaration.java:134)
at org.aspectj.org.eclipse.jdt.internal.compiler.ast.AbstractMethodDeclaration.resolve(AbstractMethodDeclaration.java:400)
at org.aspectj.org.eclipse.jdt.internal.compiler.ast.TypeDeclaration.resolve(TypeDeclaration.java:1088)
at org.aspectj.ajdt.internal.compiler.ast.AspectDeclaration.resolve(AspectDeclaration.java:114)
at org.aspectj.org.eclipse.jdt.internal.compiler.ast.TypeDeclaration.resolve(TypeDeclaration.java:1137)
at org.aspectj.org.eclipse.jdt.internal.compiler.ast.CompilationUnitDeclaration.resolve(CompilationUnitDeclaration.java:305)
at org.aspectj.org.eclipse.jdt.internal.compiler.Compiler.process(Compiler.java:514)
at org.aspectj.org.eclipse.jdt.internal.compiler.Compiler.compile(Compiler.java:329)
at org.aspectj.ajdt.internal.core.builder.AjBuildManager.performCompilation(AjBuildManager.java:809)
at org.aspectj.ajdt.internal.core.builder.AjBuildManager.doBuild(AjBuildManager.java:254)
at org.aspectj.ajdt.internal.core.builder.AjBuildManager.incrementalBuild(AjBuildManager.java:163)
at org.aspectj.ajde.internal.CompilerAdapter.compile(CompilerAdapter.java:117)
at org.aspectj.ajde.internal.AspectJBuildManager$CompilerThread.run(AspectJBuildManager.java:191)

NullPointerException thrown: null
I've written a testcase which follows the steps you describe, however, am not seeing the NPE. Instead I'm seeing a "type A is needed by reweavable type C" type message after editing the file to change the name of the aspect there. Would you be able to attach the aspect which you were wanting to rename?
Unfortunately,  I've still been unable to reproduce this bug :-(

James, are you able to provide more information? Have you been able to reproduce it? Are you able to attach the aspect you were editing when you saw the npe?

Looking at this in more detail, it looks like possibly the declaringClass is set to null when the InterTypeFieldBinding is created which means that world.makeTypeBinding(withinType) returned null. This kind of makes sense since the name of the aspect has changed so if we thought that withinType was the original type which no longer exists then this would possibly return null. 

Its hard to go further with this until I can reproduce it.
No response - closing as UTR.
stalebug</WithStack>
    <WithOutStack>I went to change the name of the aspect in my project. AJDC does not, as you know, support much in the way of refactoring. So I first edited the file to change the name of the aspect there. When I went to rename the file (using Rename.. from the menu attached to the file), I was told that AspectJ had crashed.

Here is the stack trace:



NullPointerException thrown: null
I've written a testcase which follows the steps you describe, however, am not seeing the NPE. Instead I'm seeing a "type A is needed by reweavable type C" type message after editing the file to change the name of the aspect there. Would you be able to attach the aspect which you were wanting to rename?
Unfortunately,  I've still been unable to reproduce this bug :-(

James, are you able to provide more information? Have you been able to reproduce it? Are you able to attach the aspect you were editing when you saw the npe?

Looking at this in more detail, it looks like possibly the declaringClass is set to null when the InterTypeFieldBinding is created which means that world.makeTypeBinding(withinType) returned null. This kind of makes sense since the name of the aspect has changed so if we thought that withinType was the original type which no longer exists then this would possibly return null. 

Its hard to go further with this until I can reproduce it.
No response - closing as UTR.
stalebug</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="126402" />
    <CreationDate amount="2006-02-03 15:00:00 -0500" />
    <DupId amount="" />
    <classification amount="RT" />
    <Product amount="Equinox" />
    <component amount="Compendium" />
    <Version amount="3.2" />
    <rep_platform amount="PC" />
    <op_sys amount="All" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>need API for Bidi text processing support</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>See UI bug 119517 for reasoning behind this.  Basically, some strings have a particular semantic meaning and need to be left to right (LTR) oriented overall but each segment of the string needs to follow the Bidi algorithm.  Strings like file paths are a prime example of this.  The / character is a separator and the text between each / must follow the bidi algorithm.  But the overall file path must be LTR oriented.  The only way we can do this is to process the string.  The user provides the segment separators (delimiters) and we process the string to add LRM markers around the separators and LRE/PDF markers for the text within each segment.
Created attachment 34119
patch

Patch for the new text processor class in the org.eclipse.osgi project.
Created attachment 34133
patch

best. patch. ever.
best patch ever has been released.  I noticed some bogus code in the Framework class that could potentially override the default locale set by EclipseEnvironmentInfo which would essentially cause us to ignore the osgi.nl property.  I removed this bogus code from Framework.
Clearly DJ should be a committer on this component...

Hey, why isn't he?  Lets fix that...
(In reply to comment #3)
&gt; I noticed some bogus code in the Framework
&gt; class that could potentially override the default locale set by
&gt; EclipseEnvironmentInfo which would essentially cause us to ignore the osgi.nl
&gt; property.  I removed this bogus code from Framework.

Thanks Tom. That was on my TODO list.
re: comment #4. I shouldn't really take all the credit for the patch.... but I will. ;-)</WithStack>
    <WithOutStack>See UI bug 119517 for reasoning behind this.  Basically, some strings have a particular semantic meaning and need to be left to right (LTR) oriented overall but each segment of the string needs to follow the Bidi algorithm.  Strings like file paths are a prime example of this.  The / character is a separator and the text between each / must follow the bidi algorithm.  But the overall file path must be LTR oriented.  The only way we can do this is to process the string.  The user provides the segment separators (delimiters) and we process the string to add LRM markers around the separators and LRE/PDF markers for the text within each segment.
Created attachment 34119
patch

Patch for the new text processor class in the org.eclipse.osgi project.
Created attachment 34133
patch

best. patch. ever.
best patch ever has been released.  I noticed some bogus code in the Framework class that could potentially override the default locale set by EclipseEnvironmentInfo which would essentially cause us to ignore the osgi.nl property.  I removed this bogus code from Framework.
Clearly DJ should be a committer on this component...

Hey, why isn't he?  Lets fix that...
(In reply to comment #3)
&gt; I noticed some bogus code in the Framework
&gt; class that could potentially override the default locale set by
&gt; EclipseEnvironmentInfo which would essentially cause us to ignore the osgi.nl
&gt; property.  I removed this bogus code from Framework.

Thanks Tom. That was on my TODO list.
re: comment #4. I shouldn't really take all the credit for the patch.... but I will. ;-)</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="126403" />
    <CreationDate amount="2006-02-03 15:03:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="User Assistance" />
    <Version amount="3.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="minor" />
    <Summery>[CheatSheet] Variable substitution does not take place in subitems</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="NEW" />
    <resolution amount="" />
    <WithStack>The help page "Cheat Sheet Content File XML Format" indicates that subitem titles can contain references to variables (see below). The behavior does not match the documentation, in fact no substitution takes place for regular or conditional subitems.

From the help page:

label - The title of the cheat sheet sub-item. If the string contains substring occurrences of the form "${var}", they are considered references to cheat sheet variables. All such occurrences in the string value will be replaced by the value of the corresponding variable in the context of the execution of the cheat sheet, or the empty string for variables that are unbound. The values of the variables are as of the beginning of the execution of the main step (when the &lt;item&gt; element is elaborated), rather than when the individual sub-step are run.</WithStack>
    <WithOutStack>The help page "Cheat Sheet Content File XML Format" indicates that subitem titles can contain references to variables (see below). The behavior does not match the documentation, in fact no substitution takes place for regular or conditional subitems.

From the help page:

label - The title of the cheat sheet sub-item. If the string contains substring occurrences of the form "${var}", they are considered references to cheat sheet variables. All such occurrences in the string value will be replaced by the value of the corresponding variable in the context of the execution of the cheat sheet, or the empty string for variables that are unbound. The values of the variables are as of the beginning of the execution of the main step (when the &lt;item&gt; element is elaborated), rather than when the individual sub-step are run.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="126404" />
    <CreationDate amount="2006-02-03 15:04:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="UI" />
    <Version amount="3.2" />
    <rep_platform amount="All" />
    <op_sys amount="All" />
    <priority amount="P1" />
    <bug_severity amount="major" />
    <Summery>[Commands] handlers: Key binding availability dependant on view focus</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="VERIFIED" />
    <resolution amount="FIXED" />
    <WithStack>build i0125 and build i031

When I am in the Outline view (for a Java editor) and I click on a method and hit ctrl-shift-g nothing happens. I have to click on the method name in the Java editor and then hit the keys in order for the search to happen.

Let me know if you want to see a demo or need more information about my setup. (workbench.xml?)
I thought we had fixed this one.  Sorry about that....
I'll fix this one.
Fixed in CVS.
Verified in I20060214-0800.</WithStack>
    <WithOutStack>build i0125 and build i031

When I am in the Outline view (for a Java editor) and I click on a method and hit ctrl-shift-g nothing happens. I have to click on the method name in the Java editor and then hit the keys in order for the search to happen.

Let me know if you want to see a demo or need more information about my setup. (workbench.xml?)
I thought we had fixed this one.  Sorry about that....
I'll fix this one.
Fixed in CVS.
Verified in I20060214-0800.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="126405" />
    <CreationDate amount="2006-02-03 15:12:00 -0500" />
    <DupId amount="128269" />
    <classification amount="WebTools" />
    <Product amount="WTP Common Tools" />
    <component amount="wst.common" />
    <Version amount="1.5" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="enhancement" />
    <Summery>[hotbug] Add way to execute code whenever a facet combination is met</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="DUPLICATE" />
    <WithStack>I need a way to run some code whenever a Dynamic Web Project is created. (Either new, or by adding the facet at a later time) This also means during "import" operations like import from WAR/EAR/Project Interchange

Requirements:

* I need to run code whenever the "web" facet is added. 
* I need to *not* run code when certain other 3-rd party facets are present. 
* If I launch the Dynamic Web Project wizard, I would like to "flag" my invocation to customize the execution of my code. 
* I would like to have another "flag" set if invoked via an import-type operation (WAR/EAR/PI) so I can customize the execution of my code. 
* * Additionally, if we are doing an import, I'd like to be called after all the resources are imported since I need to analyze the incoming resources.
Kosta, can you please comment on this general concept? 
Does it seem there's a need for "facet listeners"? 
(for complex "custom" logic?) 
Or, do you think these types of scenerios could be addressed 
within existing framework? 
Thanks. 
Added to the 1.5 hot list. Setting priority to P2.
1-2. There is already a mechanism in place for listening to changes to a faceted project... IFacetedProject.addListener. What's typically done is to watch for project creation using a resource listener and to then add a listener to the faceted project. Some number of facets will have been installed by then, so you should process them as if you just received a faceted project changed event. 

3-4. If you are launching a wizard, you can pre-configure the datamodel for your facet to set a flag.

5. You should be able to accomplish this using either a post-operation defined using the data model framework extension points or by registering a resource change listener.
Please re-open with more details if you feel that what's described in comment #3 does not work for your usecases.
(In reply to comment #3)

Issues 1-2: The problem with using a resource change listener is that there is not an early enough time to register my listener. Resource change listeners are typically added in the Plugin#start() method. If the product is started and my plugin is never activated, I won't have an opportunity to run code when facetsare installed. Maybe you can provide an extension point to automatically add a IFacetedProjectListener to new projects? 

(As an aside, I'm looking at the interface for IFacetedProjectListener now - why  is there only a projectChanged() method? Most listeners take in an Event parameter that provides the listener with contextual information. Maybe something like a FacetChangedEvent that tells you what feature changed, old and new values?)  

Issue 3: For my personal invocation of the New Project Wizard, I can definately set my own property on the datamodel myself. But -- for the import wizards...

Issue 4: I don't see a way for me to get the various import wizard to set the "How-Invoked" property automatically. I would like to request that there be a standard "How-Invoked" property that I can inspect during the execution of my  FacetedProjectListener. I would like to have each wizard set the "How-Invoked" property. I.e.: the Project Interchange wizard would set it to "ProjectInterchange", the WAR import would set it to "WarImport" and so on. 

Issue 5: I have already been using a post-operation and I have found it lacking.  Actually these reasons are why I've opened this bug. There are problems with a post-operation listener. I have mine currently registered like this:

&lt;extension id="myIdJST"
  point="org.eclipse.wst.common.frameworks.OperationExtension"&gt;
  &lt;operationExtension
   id="FacetDataModelProvider.Notification.INSTALL.jst.web"
postOperationClass="myClass" /&gt;
&lt;/extension&gt;
&lt;extension id="myIdWST"
  point="org.eclipse.wst.common.frameworks.OperationExtension"&gt;
  &lt;operationExtension
    id="FacetDataModelProvider.Notification.INSTALL.wst.web"
postOperationClass="myClass" /&gt;
&lt;/extension&gt;

The problem is that my post-operation is invoked too soon. There are a bunch of other facets being installed at the same time. When my post-operation runs the other facets are not there yet. Additionally, for import operations, the resources have not been copied into the project completely either. The same issues with using a resource change listener I described before also apply here. Provided I have a way to add my FacetedProjectListener via extension point, do you think that a FacetedProjectListener will be able to solve this issue? 

General questions: How is the FacetedProjectListener notified? If for example, you are creating a new project with multiple enabled facets, does it get invoked  every time a new facet is installed or only once at the very end? When it is called are you allowed to modify the workspace? 

1-2. You can configure your plugin to activate on startup. This will allow you to register a resource change listener early enough. I will look into adding the extension point that you are requesting, but since there is a workaround, whether this makes it into 1.5 will depend on the number of other issues raised. 

As for your question about the listener interface... When the listener facility was implemented, the detailed delta computation was unnecessary overhead as most listeners can just look at the project state. Feel free to make a case for the delta to be included if you feel that you cannot solve your usecase by examining the project state.

3-4. Are you sure there isn't any other way for you to implement your logic? Allowing facet delegates or listeners to be context sensetive has a potential to create a lot of problems.

The listeners are executed after all of the modifications have been made and the scheduling rule for said modifications released. You should be careful about putting any code into a faceted project listener that needs to modify workspace resources. That could cause ui to block and various other problems. If you need to modify resources, you should create and schedule a job inside the listener instead of doing the work directly.
Using IStartup and a resource change listener is problematic for several reasons. 1) IStartup extensions can be disabled in the UI - this is unacceptable. 2) IStartup is too early. It will activate my plugin (which is a leaf plugin - depends on WTP, EMF, GEF, GMF, etc) which will in turn activate all downstream plugins leading to decreased performance. 3) My resource change listener will be notified for all resource changes even if it has nothing to do with web project creation which will also affect resource affecting performance in general.

Due to the fact that the FacetedProjectListener doesn't even say which *project* is the one that changed, I will need to create an instance of the ProjectListener per project. This will not scale very well. If the IFacetedProjectListener had a IProject parameter at the very least I could use a singleton listener for the entire workspace. 

Just to clearify: when FactedProjectListener#projectChanged() is called, all of the facets (even if multiple facets are added) will be present on the FacetedProject and all resources for the project (even if they were added during an import operation) will be present. 

With regards to issue 4, I'm not sure if there is another way to implement my logic. I need to know the difference in IFacetedProjectListener#projectChanged() between two categories of operations: New project Creation or Import. If you know of another way to tell these apart I will use that instead. 

Can the FacetedProjectListener have access to the DataModel that caused the event? I will need this to inspect the DataModel for my custom property, and also to read the "how-invoked" property to tell if it was an import vs newproject. 

Proposed modifications to IFacetedProjectListener:

Add parameter IProject (for performance reasons, and required if you don't want to add an additional factory class for use by the extension point) 

Add parameter WTPOperationDataModel (so I can inspect the properties that I set on the new project wizard data model before I programatically invoked it, and also to inspect the "how-invoked" property) 


Regarding the use of IStartup and resource change listeners. I realize that this solution is sub-optimal, but I am trying to illustrate that there is a way to do what you need done using currently available facilities. That's not to say that an extension point for registering listeners is not desirable, but since you have a workaround I cannot guarantee that this enhancement will make it into this release.

You can mitigate the impact of (2) by factoring out the resource listener and IStartup extension into a separate plugin with minimal dependencies. You can mitigate the impact of (3) by ensuring that the noop path of your resource change listener is as brief as possible.

Regarding the scalability concerns with regards to having a separate listener for each project. One light-weight object per project in the workspace is in now way going to impact scalability.

Regarding the time that the listener is called. The only thing that I can guarantee is that the listeners will be called at the very end of the IFacetedProject.modify() method. If the modify method is called once with a set of facet actions, then the listeners will be called only once. If the modify method is called once for each facet action, then the listeners will be called multiple times. The project creation and add/remove logic will only call modify once. I don't know about import. I also don't know whether import copies the files before or after the facets are installed. I suggest you contact cbridgha@us.ibm.com and/or jlanuti@us.ibm.com with your questions regarding the import.

I don't know what to tell you regarding distinguishing between create and import. Since you haven't provided any details as to why you may need to know the destinction, I cannot help you find a different way to address your problem. You really should try to find a way to treat your facet installation the same regardless of the context. Create and import are not the only places that facets can be installed from. You really have no way of knowing all the context. I do not want to encourage potentially error-prone coding practices by allowing context-sensetive facet install delegates to be written.

Regarding the proposed changes to the IFacetedProjectListener interface. The faceted project api was released as "provisional" in WTP 1.0. This means, that while we do not guarantee that no breaking api changes will be made, any such changes have to be carefully scrutinized. Changing the IFacetedProjectListener interface will break all of the adopters currently using that interface. Again, that's not to say that this change cannot happen, but it's unlikely due to the nature of this release.
Added to the 15 hot list.
Jeffrey, 

Please remove this from the 1.5 Hot List as there is a workaround that I've described. We need to get much better about only adding things to the Hot List that are truly blocking. Otherwise the Hot List is meaningless.
I Opened another bug 128269 that contains code that will solve my original request. Please review and commit the code soon. 
Discussion from the 03/09 status meeting:

Jeff - I tried to follow up with Min and Scott after the 03/02 status meeting. Didn't get a response from them.

Min or Scott, there were concerns about whether this bug should be a hot bug or not. Can one of you provide some justification on why this should be a hot bug and need to be fixed in the 1.5 release? If I don't hear back from you before the next status meeting (03/16), this bug will be removed from the hot list. Thanks.
This bug could be resolved as a duplicate of bug 128269. That bug has already been resolved and has met my goals. 


*** This bug has been marked as a duplicate of 128269 ***
Update all 1.5 hot bugs to use the new hot bug process.
Verified</WithStack>
    <WithOutStack>I need a way to run some code whenever a Dynamic Web Project is created. (Either new, or by adding the facet at a later time) This also means during "import" operations like import from WAR/EAR/Project Interchange

Requirements:

* I need to run code whenever the "web" facet is added. 
* I need to *not* run code when certain other 3-rd party facets are present. 
* If I launch the Dynamic Web Project wizard, I would like to "flag" my invocation to customize the execution of my code. 
* I would like to have another "flag" set if invoked via an import-type operation (WAR/EAR/PI) so I can customize the execution of my code. 
* * Additionally, if we are doing an import, I'd like to be called after all the resources are imported since I need to analyze the incoming resources.
Kosta, can you please comment on this general concept? 
Does it seem there's a need for "facet listeners"? 
(for complex "custom" logic?) 
Or, do you think these types of scenerios could be addressed 
within existing framework? 
Thanks. 
Added to the 1.5 hot list. Setting priority to P2.
1-2. There is already a mechanism in place for listening to changes to a faceted project... IFacetedProject.addListener. What's typically done is to watch for project creation using a resource listener and to then add a listener to the faceted project. Some number of facets will have been installed by then, so you should process them as if you just received a faceted project changed event. 

3-4. If you are launching a wizard, you can pre-configure the datamodel for your facet to set a flag.

5. You should be able to accomplish this using either a post-operation defined using the data model framework extension points or by registering a resource change listener.
Please re-open with more details if you feel that what's described in comment #3 does not work for your usecases.
(In reply to comment #3)

Issues 1-2: The problem with using a resource change listener is that there is not an early enough time to register my listener. Resource change listeners are typically added in the Plugin#start() method. If the product is started and my plugin is never activated, I won't have an opportunity to run code when facetsare installed. Maybe you can provide an extension point to automatically add a IFacetedProjectListener to new projects? 

(As an aside, I'm looking at the interface for IFacetedProjectListener now - why  is there only a projectChanged() method? Most listeners take in an Event parameter that provides the listener with contextual information. Maybe something like a FacetChangedEvent that tells you what feature changed, old and new values?)  

Issue 3: For my personal invocation of the New Project Wizard, I can definately set my own property on the datamodel myself. But -- for the import wizards...

Issue 4: I don't see a way for me to get the various import wizard to set the "How-Invoked" property automatically. I would like to request that there be a standard "How-Invoked" property that I can inspect during the execution of my  FacetedProjectListener. I would like to have each wizard set the "How-Invoked" property. I.e.: the Project Interchange wizard would set it to "ProjectInterchange", the WAR import would set it to "WarImport" and so on. 

Issue 5: I have already been using a post-operation and I have found it lacking.  Actually these reasons are why I've opened this bug. There are problems with a post-operation listener. I have mine currently registered like this:

&lt;extension id="myIdJST"
  point="org.eclipse.wst.common.frameworks.OperationExtension"&gt;
  &lt;operationExtension
   id="FacetDataModelProvider.Notification.INSTALL.jst.web"
postOperationClass="myClass" /&gt;
&lt;/extension&gt;
&lt;extension id="myIdWST"
  point="org.eclipse.wst.common.frameworks.OperationExtension"&gt;
  &lt;operationExtension
    id="FacetDataModelProvider.Notification.INSTALL.wst.web"
postOperationClass="myClass" /&gt;
&lt;/extension&gt;

The problem is that my post-operation is invoked too soon. There are a bunch of other facets being installed at the same time. When my post-operation runs the other facets are not there yet. Additionally, for import operations, the resources have not been copied into the project completely either. The same issues with using a resource change listener I described before also apply here. Provided I have a way to add my FacetedProjectListener via extension point, do you think that a FacetedProjectListener will be able to solve this issue? 

General questions: How is the FacetedProjectListener notified? If for example, you are creating a new project with multiple enabled facets, does it get invoked  every time a new facet is installed or only once at the very end? When it is called are you allowed to modify the workspace? 

1-2. You can configure your plugin to activate on startup. This will allow you to register a resource change listener early enough. I will look into adding the extension point that you are requesting, but since there is a workaround, whether this makes it into 1.5 will depend on the number of other issues raised. 

As for your question about the listener interface... When the listener facility was implemented, the detailed delta computation was unnecessary overhead as most listeners can just look at the project state. Feel free to make a case for the delta to be included if you feel that you cannot solve your usecase by examining the project state.

3-4. Are you sure there isn't any other way for you to implement your logic? Allowing facet delegates or listeners to be context sensetive has a potential to create a lot of problems.

The listeners are executed after all of the modifications have been made and the scheduling rule for said modifications released. You should be careful about putting any code into a faceted project listener that needs to modify workspace resources. That could cause ui to block and various other problems. If you need to modify resources, you should create and schedule a job inside the listener instead of doing the work directly.
Using IStartup and a resource change listener is problematic for several reasons. 1) IStartup extensions can be disabled in the UI - this is unacceptable. 2) IStartup is too early. It will activate my plugin (which is a leaf plugin - depends on WTP, EMF, GEF, GMF, etc) which will in turn activate all downstream plugins leading to decreased performance. 3) My resource change listener will be notified for all resource changes even if it has nothing to do with web project creation which will also affect resource affecting performance in general.

Due to the fact that the FacetedProjectListener doesn't even say which *project* is the one that changed, I will need to create an instance of the ProjectListener per project. This will not scale very well. If the IFacetedProjectListener had a IProject parameter at the very least I could use a singleton listener for the entire workspace. 

Just to clearify: when FactedProjectListener#projectChanged() is called, all of the facets (even if multiple facets are added) will be present on the FacetedProject and all resources for the project (even if they were added during an import operation) will be present. 

With regards to issue 4, I'm not sure if there is another way to implement my logic. I need to know the difference in IFacetedProjectListener#projectChanged() between two categories of operations: New project Creation or Import. If you know of another way to tell these apart I will use that instead. 

Can the FacetedProjectListener have access to the DataModel that caused the event? I will need this to inspect the DataModel for my custom property, and also to read the "how-invoked" property to tell if it was an import vs newproject. 

Proposed modifications to IFacetedProjectListener:

Add parameter IProject (for performance reasons, and required if you don't want to add an additional factory class for use by the extension point) 

Add parameter WTPOperationDataModel (so I can inspect the properties that I set on the new project wizard data model before I programatically invoked it, and also to inspect the "how-invoked" property) 


Regarding the use of IStartup and resource change listeners. I realize that this solution is sub-optimal, but I am trying to illustrate that there is a way to do what you need done using currently available facilities. That's not to say that an extension point for registering listeners is not desirable, but since you have a workaround I cannot guarantee that this enhancement will make it into this release.

You can mitigate the impact of (2) by factoring out the resource listener and IStartup extension into a separate plugin with minimal dependencies. You can mitigate the impact of (3) by ensuring that the noop path of your resource change listener is as brief as possible.

Regarding the scalability concerns with regards to having a separate listener for each project. One light-weight object per project in the workspace is in now way going to impact scalability.

Regarding the time that the listener is called. The only thing that I can guarantee is that the listeners will be called at the very end of the IFacetedProject.modify() method. If the modify method is called once with a set of facet actions, then the listeners will be called only once. If the modify method is called once for each facet action, then the listeners will be called multiple times. The project creation and add/remove logic will only call modify once. I don't know about import. I also don't know whether import copies the files before or after the facets are installed. I suggest you contact cbridgha@us.ibm.com and/or jlanuti@us.ibm.com with your questions regarding the import.

I don't know what to tell you regarding distinguishing between create and import. Since you haven't provided any details as to why you may need to know the destinction, I cannot help you find a different way to address your problem. You really should try to find a way to treat your facet installation the same regardless of the context. Create and import are not the only places that facets can be installed from. You really have no way of knowing all the context. I do not want to encourage potentially error-prone coding practices by allowing context-sensetive facet install delegates to be written.

Regarding the proposed changes to the IFacetedProjectListener interface. The faceted project api was released as "provisional" in WTP 1.0. This means, that while we do not guarantee that no breaking api changes will be made, any such changes have to be carefully scrutinized. Changing the IFacetedProjectListener interface will break all of the adopters currently using that interface. Again, that's not to say that this change cannot happen, but it's unlikely due to the nature of this release.
Added to the 15 hot list.
Jeffrey, 

Please remove this from the 1.5 Hot List as there is a workaround that I've described. We need to get much better about only adding things to the Hot List that are truly blocking. Otherwise the Hot List is meaningless.
I Opened another bug 128269 that contains code that will solve my original request. Please review and commit the code soon. 
Discussion from the 03/09 status meeting:

Jeff - I tried to follow up with Min and Scott after the 03/02 status meeting. Didn't get a response from them.

Min or Scott, there were concerns about whether this bug should be a hot bug or not. Can one of you provide some justification on why this should be a hot bug and need to be fixed in the 1.5 release? If I don't hear back from you before the next status meeting (03/16), this bug will be removed from the hot list. Thanks.
This bug could be resolved as a duplicate of bug 128269. That bug has already been resolved and has met my goals. 


*** This bug has been marked as a duplicate of 128269 ***
Update all 1.5 hot bugs to use the new hot bug process.
Verified</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="126406" />
    <CreationDate amount="2006-02-03 15:22:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse Foundation" />
    <Product amount="z_Archived" />
    <component amount="VE" />
    <Version amount="unspecified" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="minor" />
    <Summery>setLabelFor not available for JLabel</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="17">
      <source_code type="assignment">
        <location start="97" end="127" />
        <code>jLabelPassword = new JLabel();</code>
      </source_code>
      <source_code type="functioncall">
        <location start="128" end="164" />
        <code>jLabelPassword.setText("Password:");</code>
      </source_code>
      <source_code type="functioncall">
        <location start="165" end="216" />
        <code>jLabelPassword.setDisplayedMnemonic(KeyEvent.VK_P);</code>
      </source_code>
      <source_code type="functioncall">
        <location start="217" end="292" />
        <code>jLabelPassword.setComponentOrientation(ComponentOrientation.LEFT_TO_RIGHT);</code>
      </source_code>
      <source_code type="assignment">
        <location start="293" end="320" />
        <code>jLabelLogin = new JLabel();</code>
      </source_code>
      <source_code type="functioncall">
        <location start="321" end="351" />
        <code>jLabelLogin.setText("Login:");</code>
      </source_code>
      <source_code type="functioncall">
        <location start="352" end="400" />
        <code>jLabelLogin.setDisplayedMnemonic(KeyEvent.VK_L);</code>
      </source_code>
      <source_code type="functioncall">
        <location start="401" end="473" />
        <code>jLabelLogin.setComponentOrientation(ComponentOrientation.LEFT_TO_RIGHT);</code>
      </source_code>
      <source_code type="assignment">
        <location start="474" end="502" />
        <code>jContentPane = new JPanel();</code>
      </source_code>
      <source_code type="functioncall">
        <location start="503" end="547" />
        <code>jContentPane.setLayout(new GridBagLayout());</code>
      </source_code>
      <source_code type="functioncall">
        <location start="548" end="598" />
        <code>jContentPane.add(jLabelLogin, gridBagConstraints);</code>
      </source_code>
      <source_code type="functioncall">
        <location start="599" end="659" />
        <code>jContentPane.add(getJTextFieldLogin(), gridBagConstraints1);</code>
      </source_code>
      <source_code type="functioncall">
        <location start="660" end="714" />
        <code>jContentPane.add(jLabelPassword, gridBagConstraints2);</code>
      </source_code>
      <source_code type="functioncall">
        <location start="715" end="782" />
        <code>jContentPane.add(getJPasswordFieldPassword(), gridBagConstraints3);</code>
      </source_code>
      <source_code type="functioncall">
        <location start="783" end="835" />
        <code>jContentPane.add(getJButton(), gridBagConstraints4);</code>
      </source_code>
      <source_code type="functioncall">
        <location start="836" end="877" />
        <code>jLabelLogin.setLabelFor(jTextFieldLogin);</code>
      </source_code>
      <source_code type="functioncall">
        <location start="878" end="929" />
        <code>jLabelPassword.setLabelFor(jPasswordFieldPassword);</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="WORKSFORME" />
    <WithStack>Hi,

It will be great to be able to edit the setLabelFor property for JLabel objects.

Example:

jLabelPassword = new JLabel();
jLabelPassword.setText("Password:");
jLabelPassword.setDisplayedMnemonic(KeyEvent.VK_P);
jLabelPassword.setComponentOrientation(ComponentOrientation.LEFT_TO_RIGHT);
jLabelLogin = new JLabel();
jLabelLogin.setText("Login:");
jLabelLogin.setDisplayedMnemonic(KeyEvent.VK_L);
jLabelLogin.setComponentOrientation(ComponentOrientation.LEFT_TO_RIGHT);
jContentPane = new JPanel();
jContentPane.setLayout(new GridBagLayout());
jContentPane.add(jLabelLogin, gridBagConstraints);
jContentPane.add(getJTextFieldLogin(), gridBagConstraints1);
jContentPane.add(jLabelPassword, gridBagConstraints2);
jContentPane.add(getJPasswordFieldPassword(), gridBagConstraints3);
jContentPane.add(getJButton(), gridBagConstraints4);
jLabelLogin.setLabelFor(jTextFieldLogin);
jLabelPassword.setLabelFor(jPasswordFieldPassword);

setLabelFor calls need to be placed at the end since other objects was created with call to getxxxx methods.

Regards,

Jean-Marc Spaggiari
Jean-Marc,
This capability is already there on the property sheet view. This property is classified by VE as an "expert" property and will show on the property sheet when you select "Show Advanced Properties" in the property sheet view. Select the button in the value cell... this brings up a dialog that allows you to select other components that are part of the visual class.

I've included a snapshot of the property sheet view.
Created attachment 34197
Property sheet view with "Show Advanced Properties" button
closing</WithStack>
    <WithOutStack>Hi,

It will be great to be able to edit the setLabelFor property for JLabel objects.

Example:

jLabelPassword = new JLabel();
jLabelPassword.setText("Password:");
jLabelPassword.setDisplayedMnemonic(KeyEvent.VK_P);
jLabelPassword.setComponentOrientation(ComponentOrientation.LEFT_TO_RIGHT);
jLabelLogin = new JLabel();
jLabelLogin.setText("Login:");
jLabelLogin.setDisplayedMnemonic(KeyEvent.VK_L);
jLabelLogin.setComponentOrientation(ComponentOrientation.LEFT_TO_RIGHT);
jContentPane = new JPanel();
jContentPane.setLayout(new GridBagLayout());
jContentPane.add(jLabelLogin, gridBagConstraints);
jContentPane.add(getJTextFieldLogin(), gridBagConstraints1);
jContentPane.add(jLabelPassword, gridBagConstraints2);
jContentPane.add(getJPasswordFieldPassword(), gridBagConstraints3);
jContentPane.add(getJButton(), gridBagConstraints4);
jLabelLogin.setLabelFor(jTextFieldLogin);
jLabelPassword.setLabelFor(jPasswordFieldPassword);

setLabelFor calls need to be placed at the end since other objects was created with call to getxxxx methods.

Regards,

Jean-Marc Spaggiari
Jean-Marc,
This capability is already there on the property sheet view. This property is classified by VE as an "expert" property and will show on the property sheet when you select "Show Advanced Properties" in the property sheet view. Select the button in the value cell... this brings up a dialog that allows you to select other components that are part of the visual class.

I've included a snapshot of the property sheet view.
Created attachment 34197
Property sheet view with "Show Advanced Properties" button
closing</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="126407" />
    <CreationDate amount="2006-02-03 15:26:00 -0500" />
    <DupId amount="124931" />
    <classification amount="WebTools" />
    <Product amount="WTP Source Editing" />
    <component amount="jst.jsp" />
    <Version amount="1.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows 2000" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>"[variable] cannot be resolved" in static includes</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="2">
      <source_code type="functiondef">
        <location start="144" end="187" />
        <code>for(int i = 0; i &lt; 5; i++) {%&gt;
	&lt;%=i%&gt;
&lt;%
}</code>
      </source_code>
      <source_code type="functiondef">
        <location start="493" end="538" />
        <code>for(int i = 0; i &lt; 5; i++) {
	out.write(i);
}</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="DUPLICATE" />
    <WithStack>Concerning to static includes, the wtp JSP validation often has strange behaviour:

Create a file "myinclude.jspf" with the following code:

&lt;%
for(int i = 0; i &lt; 5; i++) {%&gt;
	&lt;%=i%&gt;
&lt;%
}%&gt;


Insert the corresponding static include into a JSP:

&lt;%@ include file="myinclude.jspf"%&gt;

This causes the validation error "i cannot be resolved".
Using the same code directly in the JSP causes no validation error.
The following code also causes no validation error, if used in the included file:

&lt;%
for(int i = 0; i &lt; 5; i++) {
	out.write(i);
}%&gt;
Which version of WTP are you using?
This one I believe has been fixed recently (bug 124931)

Thanks for all these testcases by the way. We're really trying to improve quality for 1.5, so we'll be fixing as many of these cases as we can.

*** This bug has been marked as a duplicate of 124931 ***
This bug was moved to 'closed' state, since it is so old is is assumed its dup, invalid, or worksforme resolution is no longer in qustion and the bugzilla needs no further attention. Feel free to re-open, or open a new bug, if this semi-automatic processing was done in error in this case. 
Tested in WTP 1.5.2, this bug is still the same.
Sorry, I mixed it with Bug 126381 which is still not fixed.

*** This bug has been marked as a duplicate of 124931 ***
This is part of a mass update to close out all stale WTP bugs which are in the resolved state without an appropriate targeted version.  If you feel this bug was closed inappropriately, please reopen.</WithStack>
    <WithOutStack>Concerning to static includes, the wtp JSP validation often has strange behaviour:

Create a file "myinclude.jspf" with the following code:

&lt;%
for(int i = 0; i &lt; 5; i++) {%&gt;
	&lt;%=i%&gt;
&lt;%
}%&gt;


Insert the corresponding static include into a JSP:

&lt;%@ include file="myinclude.jspf"%&gt;

This causes the validation error "i cannot be resolved".
Using the same code directly in the JSP causes no validation error.
The following code also causes no validation error, if used in the included file:

&lt;%
for(int i = 0; i &lt; 5; i++) {
	out.write(i);
}%&gt;
Which version of WTP are you using?
This one I believe has been fixed recently (bug 124931)

Thanks for all these testcases by the way. We're really trying to improve quality for 1.5, so we'll be fixing as many of these cases as we can.

*** This bug has been marked as a duplicate of 124931 ***
This bug was moved to 'closed' state, since it is so old is is assumed its dup, invalid, or worksforme resolution is no longer in qustion and the bugzilla needs no further attention. Feel free to re-open, or open a new bug, if this semi-automatic processing was done in error in this case. 
Tested in WTP 1.5.2, this bug is still the same.
Sorry, I mixed it with Bug 126381 which is still not fixed.

*** This bug has been marked as a duplicate of 124931 ***
This is part of a mass update to close out all stale WTP bugs which are in the resolved state without an appropriate targeted version.  If you feel this bug was closed inappropriately, please reopen.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="126408" />
    <CreationDate amount="2006-02-03 15:33:00 -0500" />
    <DupId amount="" />
    <classification amount="WebTools" />
    <Product amount="WTP Webservices" />
    <component amount="jst.ws" />
    <Version amount="1.0.1" />
    <rep_platform amount="PC" />
    <op_sys amount="Linux" />
    <priority amount="P3" />
    <bug_severity amount="major" />
    <Summery>Intermittent exception after clicking next after the object selection page</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>This problem was reported based on a WTP 0130 101 build.  This seems to be intermittent and would not be able to reproduce every time.

The user has created a Dynamic Web Project, and Import a WSDL file under the Dynamic web Project -&gt; &lt;my project&gt; -&gt; WebContent -&gt; wsdl

Right click the wsdl and click WebServices -&gt; Generate Java bean skeleton
In the next panel ,select Top Down EJB WebService, click next.
On the next panel, click next...and it throws following exception:
IWAB0234E An internal error occurred. Details: null
    java.lang.UnsupportedOperationException
    at java.util.Collections$UnmodifiableCollection.add(Collections.java:1018)
    at org.eclipse.jst.ws.internal.consumption.ui.widgets.runtime.ClientRuntimeSelect
ionWidgetDefaultingCommand.getServerFromProject(ClientRuntimeSelectionWidgetDefaultin
gCommand.java:432)
    at org.eclipse.jst.ws.internal.consumption.ui.widgets.runtime.ClientRuntimeSelect
ionWidgetDefaultingCommand.setClientDefaultServer(ClientRuntimeSelectionWidgetDefault
ingCommand.java:293)
    at org.eclipse.jst.ws.internal.consumption.ui.widgets.runtime.ClientRuntimeSelect
ionWidgetDefaultingCommand.execute(ClientRuntimeSelectionWidgetDefaultingCommand.java
:208)
    at org.eclipse.jst.ws.internal.creation.ui.widgets.runtime.ServerRuntimeSelection
WidgetDefaultingCommand.execute(ServerRuntimeSelectionWidgetDefaultingCommand.java:73
)
    at org.eclipse.wst.command.internal.env.core.fragment.CommandFragmentEngine.runCo
mmand(CommandFragmentEngine.java:387)
    at org.eclipse.wst.command.internal.env.core.fragment.CommandFragmentEngine.visit
Top(CommandFragmentEngine.java:327)
    at org.eclipse.wst.command.internal.env.core.fragment.CommandFragmentEngine.moveF
orwardToNextStop(CommandFragmentEngine.java:226)
    at org.eclipse.wst.command.internal.env.ui.widgets.SimpleCommandEngineManager$5.r
un(SimpleCommandEngineManager.java:247)
    at org.eclipse.jface.operation.ModalContext.runInCurrentThread(ModalContext.java:
346)
    at org.eclipse.jface.operation.ModalContext.run(ModalContext.java:291)
    at org.eclipse.jface.wizard.WizardDialog.run(WizardDialog.java:830)
    at org.eclipse.wst.command.internal.env.ui.widgets.SimpleCommandEngineManager.run
ForwardToNextStop(SimpleCommandEngineManager.java:217)
    at org.eclipse.wst.command.internal.env.ui.widgets.WizardPageManager.runForwardTo
NextStop(WizardPageManager.java:79)
    at org.eclipse.wst.command.internal.env.ui.widgets.WizardPageManager.getNextPage(
WizardPageManager.java:125)
    at org.eclipse.wst.command.internal.env.ui.widgets.SimpleWizardPage.getNextPage(S
impleWizardPage.java:119)
    at org.eclipse.jface.wizard.WizardDialog.nextPressed(WizardDialog.java:747)
    at org.eclipse.jface.wizard.WizardDialog.buttonPressed(WizardDialog.java:345)
    at org.eclipse.jface.dialogs.Dialog$2.widgetSelected(Dialog.java:556)
    at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:90)
    at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1021)
    at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:2867)
    at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2572)
    at org.eclipse.jface.window.Window.runEventLoop(Window.java:809)
    at org.eclipse.jface.window.Window.open(Window.java:787)
    at org.eclipse.wst.command.internal.env.ui.widgets.popup.DynamicPopupWizard.run(D
ynamicPopupWizard.java:126)
    at org.eclipse.ui.internal.PluginAction.runWithEvent(PluginAction.java:246)
    at org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection(ActionCo
ntributionItem.java:538)
    at org.eclipse.jface.action.ActionContributionItem.access$2(ActionContributionIte
m.java:488)
    at org.eclipse.jface.action.ActionContributionItem$5.handleEvent(ActionContributi
onItem.java:400)
Rupam, from a cursory glance at the code, it seems like IFacetedProject.getProjectFacets() may return immutable collections in some cases. It isn't necessarily good form to alter collections returned by a method, though getProjectFacets' JavaDoc should really be making this clear. Anyways, cloning the Set with the help of addAll() may be the prudent (and cheap) fix here.
I have a fix in hand for this bug. Rather than lumping yet another bug into the patches attached to bug 124143, I'll wait until those patches have been committed and then create a fresh patch for this bug. Let me know if you'd like to handle it differently.

Thanks.
Rupam, I hear WTP 1.0.1 is shutting down today. Can this get into WTP 1.0.1?
Yen,
Chris targeted it to 1.0.1 so I'm assuming that's his intention. It's a very simple fix.
Created attachment 34206
apply to org.eclipse.jst.ws.consumption.ui/src/org/eclipse/jst/ws/internal/consumption/ui/widgets/runtime/ClientRuntimeSelectionWidgetDefaultingCommand.java

patch 1 of 1 - This is ready to be reviwed and committed. I just realized that ClientRuntimeSelectionWidgetDefaultingCommand was not modified in the patches attached to bug 124143, so I'm attaching just the patch for that file to this bug.
Patches reviewed and committed.  The changes had been released to M101 and HEAD as v200602061953.
I have not run into this since picking up new WTP driver.
ok</WithStack>
    <WithOutStack>This problem was reported based on a WTP 0130 101 build.  This seems to be intermittent and would not be able to reproduce every time.

The user has created a Dynamic Web Project, and Import a WSDL file under the Dynamic web Project -&gt; &lt;my project&gt; -&gt; WebContent -&gt; wsdl

Right click the wsdl and click WebServices -&gt; Generate Java bean skeleton
In the next panel ,select Top Down EJB WebService, click next.
On the next panel, click next...and it throws following exception:
IWAB0234E An internal error occurred. Details: null
    java.lang.UnsupportedOperationException
    at java.util.Collections$UnmodifiableCollection.add(Collections.java:1018)
    at org.eclipse.jst.ws.internal.consumption.ui.widgets.runtime.ClientRuntimeSelect
ionWidgetDefaultingCommand.getServerFromProject(ClientRuntimeSelectionWidgetDefaultin
gCommand.java:432)
    at org.eclipse.jst.ws.internal.consumption.ui.widgets.runtime.ClientRuntimeSelect
ionWidgetDefaultingCommand.setClientDefaultServer(ClientRuntimeSelectionWidgetDefault
ingCommand.java:293)
    at org.eclipse.jst.ws.internal.consumption.ui.widgets.runtime.ClientRuntimeSelect
ionWidgetDefaultingCommand.execute(ClientRuntimeSelectionWidgetDefaultingCommand.java
:208)
    at org.eclipse.jst.ws.internal.creation.ui.widgets.runtime.ServerRuntimeSelection
WidgetDefaultingCommand.execute(ServerRuntimeSelectionWidgetDefaultingCommand.java:73
)
    at org.eclipse.wst.command.internal.env.core.fragment.CommandFragmentEngine.runCo
mmand(CommandFragmentEngine.java:387)
    at org.eclipse.wst.command.internal.env.core.fragment.CommandFragmentEngine.visit
Top(CommandFragmentEngine.java:327)
    at org.eclipse.wst.command.internal.env.core.fragment.CommandFragmentEngine.moveF
orwardToNextStop(CommandFragmentEngine.java:226)
    at org.eclipse.wst.command.internal.env.ui.widgets.SimpleCommandEngineManager$5.r
un(SimpleCommandEngineManager.java:247)
    at org.eclipse.jface.operation.ModalContext.runInCurrentThread(ModalContext.java:
346)
    at org.eclipse.jface.operation.ModalContext.run(ModalContext.java:291)
    at org.eclipse.jface.wizard.WizardDialog.run(WizardDialog.java:830)
    at org.eclipse.wst.command.internal.env.ui.widgets.SimpleCommandEngineManager.run
ForwardToNextStop(SimpleCommandEngineManager.java:217)
    at org.eclipse.wst.command.internal.env.ui.widgets.WizardPageManager.runForwardTo
NextStop(WizardPageManager.java:79)
    at org.eclipse.wst.command.internal.env.ui.widgets.WizardPageManager.getNextPage(
WizardPageManager.java:125)
    at org.eclipse.wst.command.internal.env.ui.widgets.SimpleWizardPage.getNextPage(S
impleWizardPage.java:119)
    at org.eclipse.jface.wizard.WizardDialog.nextPressed(WizardDialog.java:747)
    at org.eclipse.jface.wizard.WizardDialog.buttonPressed(WizardDialog.java:345)
    at org.eclipse.jface.dialogs.Dialog$2.widgetSelected(Dialog.java:556)
    at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:90)
    at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1021)
    at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:2867)
    at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2572)
    at org.eclipse.jface.window.Window.runEventLoop(Window.java:809)
    at org.eclipse.jface.window.Window.open(Window.java:787)
    at org.eclipse.wst.command.internal.env.ui.widgets.popup.DynamicPopupWizard.run(D
ynamicPopupWizard.java:126)
    at org.eclipse.ui.internal.PluginAction.runWithEvent(PluginAction.java:246)
    at org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection(ActionCo
ntributionItem.java:538)
    at org.eclipse.jface.action.ActionContributionItem.access$2(ActionContributionIte
m.java:488)
    at org.eclipse.jface.action.ActionContributionItem$5.handleEvent(ActionContributi
onItem.java:400)
Rupam, from a cursory glance at the code, it seems like IFacetedProject.getProjectFacets() may return immutable collections in some cases. It isn't necessarily good form to alter collections returned by a method, though getProjectFacets' JavaDoc should really be making this clear. Anyways, cloning the Set with the help of addAll() may be the prudent (and cheap) fix here.
I have a fix in hand for this bug. Rather than lumping yet another bug into the patches attached to bug 124143, I'll wait until those patches have been committed and then create a fresh patch for this bug. Let me know if you'd like to handle it differently.

Thanks.
Rupam, I hear WTP 1.0.1 is shutting down today. Can this get into WTP 1.0.1?
Yen,
Chris targeted it to 1.0.1 so I'm assuming that's his intention. It's a very simple fix.
Created attachment 34206
apply to org.eclipse.jst.ws.consumption.ui/src/org/eclipse/jst/ws/internal/consumption/ui/widgets/runtime/ClientRuntimeSelectionWidgetDefaultingCommand.java

patch 1 of 1 - This is ready to be reviwed and committed. I just realized that ClientRuntimeSelectionWidgetDefaultingCommand was not modified in the patches attached to bug 124143, so I'm attaching just the patch for that file to this bug.
Patches reviewed and committed.  The changes had been released to M101 and HEAD as v200602061953.
I have not run into this since picking up new WTP driver.
ok</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="126409" />
    <CreationDate amount="2006-02-03 15:43:00 -0500" />
    <DupId amount="" />
    <classification amount="WebTools" />
    <Product amount="WTP Java EE Tools" />
    <component amount="jst.j2ee" />
    <Version amount="1.0.1" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P2" />
    <bug_severity amount="blocker" />
    <Summery>classes missing from deployed jars</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="9">
        <Lines>
          <Line>1) The classes being imported are inside the ImportedClasses directory.</Line>
          <Line>2) How do I check the second issue (i.e. imported classes directory is not being properly added to the component)?</Line>
          <Line>The imported classes folder is properly added to the .component in my tests.....</Line>
          <Line>Created attachment 34247</Line>
          <Line>First of two patch jars.</Line>
          <Line>Created attachment 34248</Line>
          <Line>Second of two patch jars</Line>
          <Line>Please give these patches a try, an reopen if they fail to fix your testcase.</Line>
          <Line>Jason, please make sure you push these changes to the 1.5 stream as well.</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>Our tool which runs in Headless Eclipse mode imports an EJB jar, runs some operations including generating Java files and compiling them and then exports the resulting EJB project as a new EJB jar. The resulting jar is missing some classes which were in the original EJB jar. This is a random problem but occurs over 50% of the time in my test batch of 56 runs.

Could this problem be somehow caused by the patch for 123147?
Created attachment 34137
events-server.jar - problem occurs about 50% of the time
Created attachment 34138
DefaultApplication.ear - problem occurs about 50% of time
Created attachment 34196
RetireServices.ear - slight variation but similar problem.
The RetireServices.ear shows a variation of the problem reported here. Instead of an either/or effect where the output ear/jar can be classified in two states
based on size, the size out the output ear in this case fluctuates between 3 or 4 different values.
Added to the 1.0.1 hot list.
Are the reexported archives missing some, or all of the original .class files that don't have source?  Only the .class files without source will be place in the imported classes directory.  Sound like, from your description, that either classes without source are not being imported to the imported classes directory, or the imported classes directory is not being properly added to the component.  Can you check your workspace after you hit a failing test to see if it is one of those problems?
In my tests, the missing classes seem to be located in the "imported_classes" folder, but are NOT regenerated classes.

We need to also look at the order in which these files are processed.
In these examples, generated classes are also included via the output folder from the newly compiled java classes, so we need to make sure this version of the .class file is chosen...  (may be different problem)
Jason,

In the case of events-server.jar, they're missing some of the original .class files that don't have source. I took a look at one of the failing cases for events-server.jar and here are the
answers to your questions:

1) The classes being imported are inside the ImportedClasses directory.
2) How do I check the second issue (i.e. imported classes directory is not being properly added to the component)?
The imported classes folder is properly added to the .component in my tests.....
Created attachment 34247
First of two patch jars.
Created attachment 34248
Second of two patch jars
Please give these patches a try, an reopen if they fail to fix your testcase.
Jason, please make sure you push these changes to the 1.5 stream as well.

Thanks!
dropped to 1.5 now as well as 1.0.1 code streams
This ia part of a mass update, marking fixed blockers older than 6 months as automatically verified (the logic being it must be fixed or we sure would have heard about it!) As always, feel free to re-open if not fixed! 

closing.</WithStack>
    <WithOutStack>Our tool which runs in Headless Eclipse mode imports an EJB jar, runs some operations including generating Java files and compiling them and then exports the resulting EJB project as a new EJB jar. The resulting jar is missing some classes which were in the original EJB jar. This is a random problem but occurs over 50% of the time in my test batch of 56 runs.

Could this problem be somehow caused by the patch for 123147?
Created attachment 34137
events-server.jar - problem occurs about 50% of the time
Created attachment 34138
DefaultApplication.ear - problem occurs about 50% of time
Created attachment 34196
RetireServices.ear - slight variation but similar problem.
The RetireServices.ear shows a variation of the problem reported here. Instead of an either/or effect where the output ear/jar can be classified in two states
based on size, the size out the output ear in this case fluctuates between 3 or 4 different values.
Added to the 1.0.1 hot list.
Are the reexported archives missing some, or all of the original .class files that don't have source?  Only the .class files without source will be place in the imported classes directory.  Sound like, from your description, that either classes without source are not being imported to the imported classes directory, or the imported classes directory is not being properly added to the component.  Can you check your workspace after you hit a failing test to see if it is one of those problems?
In my tests, the missing classes seem to be located in the "imported_classes" folder, but are NOT regenerated classes.

We need to also look at the order in which these files are processed.
In these examples, generated classes are also included via the output folder from the newly compiled java classes, so we need to make sure this version of the .class file is chosen...  (may be different problem)
Jason,

In the case of events-server.jar, they're missing some of the original .class files that don't have source. I took a look at one of the failing cases for events-server.jar and here are the
answers to your questions:

1) The classes being imported are inside the ImportedClasses directory.
2) How do I check the second issue (i.e. imported classes directory is not being properly added to the component)?
The imported classes folder is properly added to the .component in my tests.....
Created attachment 34247
First of two patch jars.
Created attachment 34248
Second of two patch jars
Please give these patches a try, an reopen if they fail to fix your testcase.
Jason, please make sure you push these changes to the 1.5 stream as well.

Thanks!
dropped to 1.5 now as well as 1.0.1 code streams
This ia part of a mass update, marking fixed blockers older than 6 months as automatically verified (the logic being it must be fixed or we sure would have heard about it!) As always, feel free to re-open if not fixed! 

closing.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="126410" />
    <CreationDate amount="2006-02-03 15:46:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="CVS" />
    <Version amount="3.1.2" />
    <rep_platform amount="PC" />
    <op_sys amount="All" />
    <priority amount="P3" />
    <bug_severity amount="enhancement" />
    <Summery>Commit single file deletions</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="WORKSFORME" />
    <WithStack>There appears to be no easy way (if any) to commit the deletion of a single file.  The only way I know how to do it in eclipse is to commit the parent directory. But if I did not wish to commit the entire directory. I had to use another tool to commit a deleted file.

The deleted file could be shown in the file nagivator with a special icon to represent that it has been deleted locally but not on the CVS server. Since it currently isn't shown in the navigator, there is no way to commit it as deleted.
Yes there is.  Right-click the parent directory and use Synchronize with Repository.  You should be switched to the Sync view.  From there, commit the single file deletion.
Thanks for the explanation.

I think alot of people would still prefer at least the option of displaying the deleted files and allowing them to commit it without switching perspectives.

It would ease the transition from using programs like WinCVS that do it this way.

When I saw the "Synchronize with Repository", I wasn't sure if it simply committed everything automatically, so I didn't dare experiment with it.



Moving to platform/team.

D.
The way this is done is through the synchronze view. Although it is technically possible to show deleted files in other views (like the Resource Navigator) doing so may break backwards compatibility (i.e. actions contributed to those views expect that the resources displayed in the view to exist locally).</WithStack>
    <WithOutStack>There appears to be no easy way (if any) to commit the deletion of a single file.  The only way I know how to do it in eclipse is to commit the parent directory. But if I did not wish to commit the entire directory. I had to use another tool to commit a deleted file.

The deleted file could be shown in the file nagivator with a special icon to represent that it has been deleted locally but not on the CVS server. Since it currently isn't shown in the navigator, there is no way to commit it as deleted.
Yes there is.  Right-click the parent directory and use Synchronize with Repository.  You should be switched to the Sync view.  From there, commit the single file deletion.
Thanks for the explanation.

I think alot of people would still prefer at least the option of displaying the deleted files and allowing them to commit it without switching perspectives.

It would ease the transition from using programs like WinCVS that do it this way.

When I saw the "Synchronize with Repository", I wasn't sure if it simply committed everything automatically, so I didn't dare experiment with it.



Moving to platform/team.

D.
The way this is done is through the synchronze view. Although it is technically possible to show deleted files in other views (like the Resource Navigator) doing so may break backwards compatibility (i.e. actions contributed to those views expect that the resources displayed in the view to exist locally).</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="126411" />
    <CreationDate amount="2006-02-03 15:47:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse Foundation" />
    <Product amount="Community" />
    <component amount="EclipseCon" />
    <Version amount="unspecified" />
    <rep_platform amount="All" />
    <op_sys amount="All" />
    <priority amount="P3" />
    <bug_severity amount="enhancement" />
    <Summery>iCalendar feed from detail pages</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>I'd like to be able to go an EclipseCon detail page and have an [iCal] icon near the bottom that will return an iCalendar feed of that page. For most detail pages, it has a single event (that event).  For Recommended Track detail pages, it returns the iCalendar for all the presentations in the track.
The common header include (which is used on lists, on the detail page, and on the home page) now has a link to the iCal (.ics) file for the corresponding submission. There are two curcumstances where we use the link: (1) if the submission has a time/location or if (2) the submission is a track (and therefore, references a set of submissions). In the latter case the .ics file contains multiple events.

The .ics file contains a non-standard element recognized by iCal that specifies a calendar name. During the import process, the user can choose the calendar underwhich to store the events, or choose "New calendar" which uses the non-standard element.

The file works with iCal, Sunbird (on Mac OS X and Windows) and KOrganizer on Linux. It does NOT work with Outlook.
Verifying and/or closing.</WithStack>
    <WithOutStack>I'd like to be able to go an EclipseCon detail page and have an [iCal] icon near the bottom that will return an iCalendar feed of that page. For most detail pages, it has a single event (that event).  For Recommended Track detail pages, it returns the iCalendar for all the presentations in the track.
The common header include (which is used on lists, on the detail page, and on the home page) now has a link to the iCal (.ics) file for the corresponding submission. There are two curcumstances where we use the link: (1) if the submission has a time/location or if (2) the submission is a track (and therefore, references a set of submissions). In the latter case the .ics file contains multiple events.

The .ics file contains a non-standard element recognized by iCal that specifies a calendar name. During the import process, the user can choose the calendar underwhich to store the events, or choose "New calendar" which uses the non-standard element.

The file works with iCal, Sunbird (on Mac OS X and Windows) and KOrganizer on Linux. It does NOT work with Outlook.
Verifying and/or closing.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="126412" />
    <CreationDate amount="2006-02-03 15:52:00 -0500" />
    <DupId amount="" />
    <classification amount="WebTools" />
    <Product amount="WTP ServerTools" />
    <component amount="wst.server" />
    <Version amount="1.0.1" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="major" />
    <Summery>DeletedModule for child projects should include module id for parent</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>There may be some way other way to get at this information that I'm missing but it does not currently appear possible to distinguish the DeletedModule objects that represent standalone modules vs those that represent child modules (e.g. web module projects); the method ServerBehaviorDelegate.addRemovedModules() will add each DeletedModule as the sole member of an IModule array (even if was published as the child module of an EAR) and the module id information about the parent module contained in the publish.xml file is stripped off when the DeletedModule is constructed.

Seems like the fix would be to have addRemovedModules() build an appropriate IModule array for child DeletedModules based on the the value of the modules-ids attributes, however, just exposing the parent portion the modules-ids attribute via the DeletedModule class would suffice.
Code dropped to HEAD. Will be released soon.
Released to 2.0.
Closing as fixed since M3.  If this was closed in error, please reopen.</WithStack>
    <WithOutStack>There may be some way other way to get at this information that I'm missing but it does not currently appear possible to distinguish the DeletedModule objects that represent standalone modules vs those that represent child modules (e.g. web module projects); the method ServerBehaviorDelegate.addRemovedModules() will add each DeletedModule as the sole member of an IModule array (even if was published as the child module of an EAR) and the module id information about the parent module contained in the publish.xml file is stripped off when the DeletedModule is constructed.

Seems like the fix would be to have addRemovedModules() build an appropriate IModule array for child DeletedModules based on the the value of the modules-ids attributes, however, just exposing the parent portion the modules-ids attribute via the DeletedModule class would suffice.
Code dropped to HEAD. Will be released soon.
Released to 2.0.
Closing as fixed since M3.  If this was closed in error, please reopen.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="126413" />
    <CreationDate amount="2006-02-03 16:00:00 -0500" />
    <DupId amount="" />
    <classification amount="Modeling" />
    <Product amount="GMF-Runtime" />
    <component amount="General" />
    <Version amount="1.0" />
    <rep_platform amount="PC" />
    <op_sys amount="All" />
    <priority amount="P1" />
    <bug_severity amount="critical" />
    <Summery>ShapeColorsAndFontsPropertySection.refresh and ColorsAndFontsPropertySection.refresh leak image handles</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>ShapeColorsAndFontsPropertySection.refresh and ColorsAndFontsPropertySection.refresh both create image handles each time they are called.  These images are passed to ToolItems, and the images never get disposed.  This eventually causes an "SWT: No more handles" error, and is probably leaking memory.

In applications that call refresh often, such as applications with active data, this causes loss of functionality in a matter of minutes.  This is a very serious bug for those types of applications.
*** Bug 125187 has been marked as a duplicate of this bug. ***
can this one get fixed for M6?
Reassigning to Tom unless Anthony objects...  Tom has a few property page defects to look at...
Created attachment 39576
Disposes Images

This patch disposes the Images after they are no longer needed. It also has previous changes regarding removing gradients when the Fonts and Colors Group is drawn.
Committed the patch
Ran sleak and images were still leaking, so delivered an additional fix.
[target cleanup] 1.0 RC was the original target milestone for this bug
[GMF Restructure] Bug 319140 : product GMF and component
Runtime Diagram was the original product and component for this bug</WithStack>
    <WithOutStack>ShapeColorsAndFontsPropertySection.refresh and ColorsAndFontsPropertySection.refresh both create image handles each time they are called.  These images are passed to ToolItems, and the images never get disposed.  This eventually causes an "SWT: No more handles" error, and is probably leaking memory.

In applications that call refresh often, such as applications with active data, this causes loss of functionality in a matter of minutes.  This is a very serious bug for those types of applications.
*** Bug 125187 has been marked as a duplicate of this bug. ***
can this one get fixed for M6?
Reassigning to Tom unless Anthony objects...  Tom has a few property page defects to look at...
Created attachment 39576
Disposes Images

This patch disposes the Images after they are no longer needed. It also has previous changes regarding removing gradients when the Fonts and Colors Group is drawn.
Committed the patch
Ran sleak and images were still leaking, so delivered an additional fix.
[target cleanup] 1.0 RC was the original target milestone for this bug
[GMF Restructure] Bug 319140 : product GMF and component
Runtime Diagram was the original product and component for this bug</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="126414" />
    <CreationDate amount="2006-02-03 16:21:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="UI" />
    <Version amount="3.2" />
    <rep_platform amount="All" />
    <op_sys amount="All" />
    <priority amount="P1" />
    <bug_severity amount="enhancement" />
    <Summery>[Commands] handlers: Provide help context ids</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="VERIFIED" />
    <resolution amount="FIXED" />
    <WithStack>For commands and handlers to replace actions, they need to be capable of providing help context identifiers.  For an example, see OpenResourceHandler in org.eclipse.ui.ide.

This help context id will need to be definable through XML and through code.
This new functionality is now available.  There is no notification on changes to the help context id, and no plans on providing such notification.
Verified by test cases in org.eclipse.ui.tests.</WithStack>
    <WithOutStack>For commands and handlers to replace actions, they need to be capable of providing help context identifiers.  For an example, see OpenResourceHandler in org.eclipse.ui.ide.

This help context id will need to be definable through XML and through code.
This new functionality is now available.  There is no notification on changes to the help context id, and no plans on providing such notification.
Verified by test cases in org.eclipse.ui.tests.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="126415" />
    <CreationDate amount="2006-02-03 16:35:00 -0500" />
    <DupId amount="" />
    <classification amount="BIRT" />
    <Product amount="BIRT" />
    <component amount="Report Designer" />
    <Version amount="2.0.0" />
    <rep_platform amount="PC" />
    <op_sys amount="All" />
    <priority amount="P3" />
    <bug_severity amount="enhancement" />
    <Summery>Hard to translate the word "None" for German</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>German translation for the word "None" is depend on what it refers to.
For example, 

  Choices.exportType.none=None would refer to exports, "Export" is masculine in German, therefore the masculine form "Keiner".

  Choices.analysisType.none=None will be translated to "Keine".

It would be really helpful (for most languages) to make these "None"s slightly more verbose, i.e. for example "No line", "No export", "No search type" etc., so that languages that use genders do not have the problem of having to decide which gender to use to translate "None" and being wrong half (or, in the case of German, two thirds) of the time.


org.eclipse.birt.chart.ui.extension\src\org\eclipse\birt\chart\ui\extension\i18n\messages.properties(632):ChartSheetImpl.Label.None=None
org.eclipse.birt.report.designer.core\src\org\eclipse\birt\report\designer\nls\messages.properties(30):ApplyStyleAction.actionLabel.none=None
org.eclipse.birt.report.designer.core\src\org\eclipse\birt\report\designer\nls\messages.properties(36):ApplyThemeAction.actionLabel.none=None
org.eclipse.birt.report.designer.core\src\org\eclipse\birt\report\designer\nls\messages.properties(117):BindingPage.None=None
org.eclipse.birt.report.designer.core\src\org\eclipse\birt\report\designer\nls\messages.properties(150):BordersPage.Tooltip.None=None
org.eclipse.birt.report.designer.core\src\org\eclipse\birt\report\designer\nls\messages.properties(233):ChoiceSetFactory.choice.None=None
org.eclipse.birt.report.designer.core\src\org\eclipse\birt\report\designer\nls\messages.properties(1247):FormatNumberPage.currency.symbol.none=None
org.eclipse.birt.report.designer.core\src\org\eclipse\birt\report\designer\nls\messages.properties(1487):HyperlinkBuilder.Radio.None=None
org.eclipse.birt.report.designer.core\src\org\eclipse\birt\report\designer\nls\messages.properties(1494):HyperLinkPage.Label.None=None
org.eclipse.birt.report.designer.core\src\org\eclipse\birt\report\designer\nls\messages.properties(2665):StyleComboProvider.LineStyle.None=None
org.eclipse.birt.report.model\src\org\eclipse\birt\report\model\i18n\Messages.properties(79):Choices.textUnderline.none=None
org.eclipse.birt.report.model\src\org\eclipse\birt\report\model\i18n\Messages.properties(83):Choices.lineStyle.none=None
org.eclipse.birt.report.model\src\org\eclipse\birt\report\model\i18n\Messages.properties(135):Choices.interval.none=None
org.eclipse.birt.report.model\src\org\eclipse\birt\report\model\i18n\Messages.properties(169):Choices.imageRefType.none=None
org.eclipse.birt.report.model\src\org\eclipse\birt\report\model\i18n\Messages.properties(195):Choices.dropType.none=None
org.eclipse.birt.report.model\src\org\eclipse\birt\report\model\i18n\Messages.properties(211):Choices.lineType.none=None
org.eclipse.birt.report.model\src\org\eclipse\birt\report\model\i18n\Messages.properties(218):Choices.pageBreakBefore.none=None
org.eclipse.birt.report.model\src\org\eclipse\birt\report\model\i18n\Messages.properties(223):Choices.pageBreakAfter.none=None
org.eclipse.birt.report.model\src\org\eclipse\birt\report\model\i18n\Messages.properties(228):Choices.actionLinkType.none=None
org.eclipse.birt.report.model\src\org\eclipse\birt\report\model\i18n\Messages.properties(238):Choices.drillThroughType.none=None
org.eclipse.birt.report.model\src\org\eclipse\birt\report\model\i18n\Messages.properties(293):Choices.transform.none=None
org.eclipse.birt.report.model\src\org\eclipse\birt\report\model\i18n\Messages.properties(316):Choices.display.none=None
org.eclipse.birt.report.model\src\org\eclipse\birt\report\model\i18n\Messages.properties(335):Choices.textOverline.none=None
org.eclipse.birt.report.model\src\org\eclipse\birt\report\model\i18n\Messages.properties(339):Choices.textLineThrough.none=None
org.eclipse.birt.report.model\src\org\eclipse\birt\report\model\i18n\Messages.properties(407):Choices.searchType.none=None
org.eclipse.birt.report.model\src\org\eclipse\birt\report\model\i18n\Messages.properties(410):Choices.exportType.none=None
org.eclipse.birt.report.model\src\org\eclipse\birt\report\model\i18n\Messages.properties(419):Choices.analysisType.none=None
org.eclipse.birt.report.model\src\org\eclipse\birt\report\model\i18n\Messages.properties(493):Choices.sortType.none=none
Doshiro, will you be able to make these changes?
(In reply to comment #1)
&gt; Doshiro, will you be able to make these changes?

I can make these changes for 2.1

Chnage following "None" 

org.eclipse.birt.report.designer.core\src\org\eclipse\birt\report\designer\nls\messages.propertie

FormatNumberPage.currency.symbol.none=None         "No symbol"
HyperlinkBuilder.Radio.None=None                             "No link"
HyperLinkPage.Label.None=None             	                "No link"
StyleComboProvider.LineStyle.None=None        	  "No style"

org.eclipse.birt.report.model\src\org\eclipse\birt\report\model\i18n\Messages.properties

Choices.textUnderline.none=None   		  "No underline"
Choices.lineStyle.none=None                                    "No line style" 
Choices.interval.none=None                                     "No interval"
Choices.imageRefType.none=None                            "No image"
Choices.lineType.none=None                                    "No line type"
Choices.pageBreakBefore.none=None                        "No page break before"
Choices.pageBreakAfter.none=None                          "No page break after"
Choices.actionLinkType.none=None                           "No action link type"
Choices.drillThroughType.none=None                         "No drill-through type"
Choices.transform.none=None                                  "No transformation"
Choices.display.none=None                                     "No display"
Choices.textOverline.none=None                              "No line over text"
Choices.textLineThrough.none=None                        "No line through text"
Choices.searchType.none=None                               "No search type"
Choices.exportType.none=None                               "No export type"
Choices.analysisType.none=None                             "No analysis type"
Choices.sortType.none=none                                  "No sort type"</WithStack>
    <WithOutStack>German translation for the word "None" is depend on what it refers to.
For example, 

  Choices.exportType.none=None would refer to exports, "Export" is masculine in German, therefore the masculine form "Keiner".

  Choices.analysisType.none=None will be translated to "Keine".

It would be really helpful (for most languages) to make these "None"s slightly more verbose, i.e. for example "No line", "No export", "No search type" etc., so that languages that use genders do not have the problem of having to decide which gender to use to translate "None" and being wrong half (or, in the case of German, two thirds) of the time.


org.eclipse.birt.chart.ui.extension\src\org\eclipse\birt\chart\ui\extension\i18n\messages.properties(632):ChartSheetImpl.Label.None=None
org.eclipse.birt.report.designer.core\src\org\eclipse\birt\report\designer\nls\messages.properties(30):ApplyStyleAction.actionLabel.none=None
org.eclipse.birt.report.designer.core\src\org\eclipse\birt\report\designer\nls\messages.properties(36):ApplyThemeAction.actionLabel.none=None
org.eclipse.birt.report.designer.core\src\org\eclipse\birt\report\designer\nls\messages.properties(117):BindingPage.None=None
org.eclipse.birt.report.designer.core\src\org\eclipse\birt\report\designer\nls\messages.properties(150):BordersPage.Tooltip.None=None
org.eclipse.birt.report.designer.core\src\org\eclipse\birt\report\designer\nls\messages.properties(233):ChoiceSetFactory.choice.None=None
org.eclipse.birt.report.designer.core\src\org\eclipse\birt\report\designer\nls\messages.properties(1247):FormatNumberPage.currency.symbol.none=None
org.eclipse.birt.report.designer.core\src\org\eclipse\birt\report\designer\nls\messages.properties(1487):HyperlinkBuilder.Radio.None=None
org.eclipse.birt.report.designer.core\src\org\eclipse\birt\report\designer\nls\messages.properties(1494):HyperLinkPage.Label.None=None
org.eclipse.birt.report.designer.core\src\org\eclipse\birt\report\designer\nls\messages.properties(2665):StyleComboProvider.LineStyle.None=None
org.eclipse.birt.report.model\src\org\eclipse\birt\report\model\i18n\Messages.properties(79):Choices.textUnderline.none=None
org.eclipse.birt.report.model\src\org\eclipse\birt\report\model\i18n\Messages.properties(83):Choices.lineStyle.none=None
org.eclipse.birt.report.model\src\org\eclipse\birt\report\model\i18n\Messages.properties(135):Choices.interval.none=None
org.eclipse.birt.report.model\src\org\eclipse\birt\report\model\i18n\Messages.properties(169):Choices.imageRefType.none=None
org.eclipse.birt.report.model\src\org\eclipse\birt\report\model\i18n\Messages.properties(195):Choices.dropType.none=None
org.eclipse.birt.report.model\src\org\eclipse\birt\report\model\i18n\Messages.properties(211):Choices.lineType.none=None
org.eclipse.birt.report.model\src\org\eclipse\birt\report\model\i18n\Messages.properties(218):Choices.pageBreakBefore.none=None
org.eclipse.birt.report.model\src\org\eclipse\birt\report\model\i18n\Messages.properties(223):Choices.pageBreakAfter.none=None
org.eclipse.birt.report.model\src\org\eclipse\birt\report\model\i18n\Messages.properties(228):Choices.actionLinkType.none=None
org.eclipse.birt.report.model\src\org\eclipse\birt\report\model\i18n\Messages.properties(238):Choices.drillThroughType.none=None
org.eclipse.birt.report.model\src\org\eclipse\birt\report\model\i18n\Messages.properties(293):Choices.transform.none=None
org.eclipse.birt.report.model\src\org\eclipse\birt\report\model\i18n\Messages.properties(316):Choices.display.none=None
org.eclipse.birt.report.model\src\org\eclipse\birt\report\model\i18n\Messages.properties(335):Choices.textOverline.none=None
org.eclipse.birt.report.model\src\org\eclipse\birt\report\model\i18n\Messages.properties(339):Choices.textLineThrough.none=None
org.eclipse.birt.report.model\src\org\eclipse\birt\report\model\i18n\Messages.properties(407):Choices.searchType.none=None
org.eclipse.birt.report.model\src\org\eclipse\birt\report\model\i18n\Messages.properties(410):Choices.exportType.none=None
org.eclipse.birt.report.model\src\org\eclipse\birt\report\model\i18n\Messages.properties(419):Choices.analysisType.none=None
org.eclipse.birt.report.model\src\org\eclipse\birt\report\model\i18n\Messages.properties(493):Choices.sortType.none=none
Doshiro, will you be able to make these changes?
(In reply to comment #1)
&gt; Doshiro, will you be able to make these changes?

I can make these changes for 2.1

Chnage following "None" 

org.eclipse.birt.report.designer.core\src\org\eclipse\birt\report\designer\nls\messages.propertie

FormatNumberPage.currency.symbol.none=None         "No symbol"
HyperlinkBuilder.Radio.None=None                             "No link"
HyperLinkPage.Label.None=None             	                "No link"
StyleComboProvider.LineStyle.None=None        	  "No style"

org.eclipse.birt.report.model\src\org\eclipse\birt\report\model\i18n\Messages.properties

Choices.textUnderline.none=None   		  "No underline"
Choices.lineStyle.none=None                                    "No line style" 
Choices.interval.none=None                                     "No interval"
Choices.imageRefType.none=None                            "No image"
Choices.lineType.none=None                                    "No line type"
Choices.pageBreakBefore.none=None                        "No page break before"
Choices.pageBreakAfter.none=None                          "No page break after"
Choices.actionLinkType.none=None                           "No action link type"
Choices.drillThroughType.none=None                         "No drill-through type"
Choices.transform.none=None                                  "No transformation"
Choices.display.none=None                                     "No display"
Choices.textOverline.none=None                              "No line over text"
Choices.textLineThrough.none=None                        "No line through text"
Choices.searchType.none=None                               "No search type"
Choices.exportType.none=None                               "No export type"
Choices.analysisType.none=None                             "No analysis type"
Choices.sortType.none=none                                  "No sort type"</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="126416" />
    <CreationDate amount="2006-02-03 16:55:00 -0500" />
    <DupId amount="" />
    <classification amount="WebTools" />
    <Product amount="WTP Webservices" />
    <component amount="wst.wsi" />
    <Version amount="1.0.1" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>[performance] WS-I validator runs very slowly in large workspaces</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>I recently profiled and made performance improvements to the WSDL validator. While doing this I saw that the WS-I validator takes a significant amount of time to run for large and even relatively small numbers of WSDL files.

In 1.0.1, to validate a project that contains 10 simple (no dependencies on external WSDL or XSD files) WSDL files (see the WSDL performance tests), the WSDL validator takes 0.55 seconds. With WS-I validation enabled this number jumps to 12.01 seconds. For a project that contains 100 simple WSDL files the WSDL validator takes 2.69 seconds and the WS-I validator takes 145.56 seconds! (I ran these tests on my ThinkPad.)

Part of the problem is likely that the WS-I validator currently has to recreate the WSDL model and does not take advantage of the performance improvements in the WSDL validator. The WSDL validator will likely need to change the extension validator API to expose the WSDL model and the WS-I validator needs to be profiled to understand further performance bottlenecks.
*** Bug 130931 has been marked as a duplicate of this bug. ***
We put in quite a few performance fixes into the WS-I validator over the last few weeks. I have a large workspace with 1000+ WSDL files, the WSDL validator took ~9s to run and the WS-I validator took ~20s to run. Althought the WS-I validator is still twice as slow, it used to take the WS-I validator ~130s to validate this workspace.

For the record, we did not implement a solution to share the WSDL model between the WSDL validator and the WS-I validator. It's too big of a change in 1.5.1. I'll open an enhancement request to track that. I'm resolving this bug now. If there are other improvements that you can think of, please open separate bugs to track them. Thanks.
performance bugs should use performance keyword (not [performance] in subject). 

Verified on WTP R-1.5.1-200609230508. Performance with WS-I validation enabled now looks decent in my informal tests. Nice work.
This is part of a "mass update" where bugs showing "fixed" between 7/1/2006 and 9/27/2006 are assumed fixed in WTP 1.5.1. feel free to change the target milestone if you know a more accurate setting. 
This is part of a mass update to close out all stale WTP defects already verified by the reporter but awaiting closure by the assignee.  If you feel this defect was closed inappropriately, please reopen.

Thanks, John Lanuti</WithStack>
    <WithOutStack>I recently profiled and made performance improvements to the WSDL validator. While doing this I saw that the WS-I validator takes a significant amount of time to run for large and even relatively small numbers of WSDL files.

In 1.0.1, to validate a project that contains 10 simple (no dependencies on external WSDL or XSD files) WSDL files (see the WSDL performance tests), the WSDL validator takes 0.55 seconds. With WS-I validation enabled this number jumps to 12.01 seconds. For a project that contains 100 simple WSDL files the WSDL validator takes 2.69 seconds and the WS-I validator takes 145.56 seconds! (I ran these tests on my ThinkPad.)

Part of the problem is likely that the WS-I validator currently has to recreate the WSDL model and does not take advantage of the performance improvements in the WSDL validator. The WSDL validator will likely need to change the extension validator API to expose the WSDL model and the WS-I validator needs to be profiled to understand further performance bottlenecks.
*** Bug 130931 has been marked as a duplicate of this bug. ***
We put in quite a few performance fixes into the WS-I validator over the last few weeks. I have a large workspace with 1000+ WSDL files, the WSDL validator took ~9s to run and the WS-I validator took ~20s to run. Althought the WS-I validator is still twice as slow, it used to take the WS-I validator ~130s to validate this workspace.

For the record, we did not implement a solution to share the WSDL model between the WSDL validator and the WS-I validator. It's too big of a change in 1.5.1. I'll open an enhancement request to track that. I'm resolving this bug now. If there are other improvements that you can think of, please open separate bugs to track them. Thanks.
performance bugs should use performance keyword (not [performance] in subject). 

Verified on WTP R-1.5.1-200609230508. Performance with WS-I validation enabled now looks decent in my informal tests. Nice work.
This is part of a "mass update" where bugs showing "fixed" between 7/1/2006 and 9/27/2006 are assumed fixed in WTP 1.5.1. feel free to change the target milestone if you know a more accurate setting. 
This is part of a mass update to close out all stale WTP defects already verified by the reporter but awaiting closure by the assignee.  If you feel this defect was closed inappropriately, please reopen.

Thanks, John Lanuti</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="126417" />
    <CreationDate amount="2006-02-03 16:56:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="Debug" />
    <Version amount="3.1" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Leak: AbstractDebugContextActionDelegates leaked for debug session</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="VERIFIED" />
    <resolution amount="FIXED" />
    <WithStack>The AbstractDebugContextActionDelegate in init(IViewPart) always registers the action delegate as a context listener for the debug view.

In dispose of AbstractDebugContextActionDelegate, the action delegate is deregistered with the view id of the delegates view.

This mismatch results in actions such as ConsoleTerminateActionDelegate leaking as they remain as debug context listeners never to be removed.
Fixed the leak. It turns out the "terminate" and "remove launch" actions in the console context menu are busted. They don't know which process/launch to work on. They bind to the active debug context, which is not always the console being displayed. I will file a new bug for that.

To fix the leak, the actions listen to the active context in their part, and deregister from their part.
Please verify, Mike.
verified.</WithStack>
    <WithOutStack>The AbstractDebugContextActionDelegate in init(IViewPart) always registers the action delegate as a context listener for the debug view.

In dispose of AbstractDebugContextActionDelegate, the action delegate is deregistered with the view id of the delegates view.

This mismatch results in actions such as ConsoleTerminateActionDelegate leaking as they remain as debug context listeners never to be removed.
Fixed the leak. It turns out the "terminate" and "remove launch" actions in the console context menu are busted. They don't know which process/launch to work on. They bind to the active debug context, which is not always the console being displayed. I will file a new bug for that.

To fix the leak, the actions listen to the active context in their part, and deregister from their part.
Please verify, Mike.
verified.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="126418" />
    <CreationDate amount="2006-02-03 16:57:00 -0500" />
    <DupId amount="" />
    <classification amount="WebTools" />
    <Product amount="WTP Webservices" />
    <component amount="jst.ws" />
    <Version amount="1.0.1" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Remove old Geronimo JARs from the list of JARs to exclude in ClasspathUtils</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>When testing against pre-1.0 Geronimo server, the list of Geronimo JARs containing javax.activation.DataHandler were:

"geronimo-spec-activation-1.0.2-rc3.jar",
"geronimo-spec-j2ee-1.4-rc3.jar",
"geronimo-spec-activation-1.0.2-rc4.jar",
"geronimo-spec-j2ee-1.4-rc4.jar"

These are not the name of the JARs in Geronimo 1.0 server anymore.  

Removing these JARs from the list of JARs to exclude in ClasspathUtils since we don't want to exclude a whole J2EE JAR from the classpath.  Geronimo Web services would require the workaround documented in bug 104993 comment #8 (https://bugs.eclipse.org/bugs/show_bug.cgi?id=104993#c8) to work successfully.
Changes committed and released to HEAD and M101 as v20060203_2215.
Verified on M101 0214.</WithStack>
    <WithOutStack>When testing against pre-1.0 Geronimo server, the list of Geronimo JARs containing javax.activation.DataHandler were:

"geronimo-spec-activation-1.0.2-rc3.jar",
"geronimo-spec-j2ee-1.4-rc3.jar",
"geronimo-spec-activation-1.0.2-rc4.jar",
"geronimo-spec-j2ee-1.4-rc4.jar"

These are not the name of the JARs in Geronimo 1.0 server anymore.  

Removing these JARs from the list of JARs to exclude in ClasspathUtils since we don't want to exclude a whole J2EE JAR from the classpath.  Geronimo Web services would require the workaround documented in bug 104993 comment #8 (https://bugs.eclipse.org/bugs/show_bug.cgi?id=104993#c8) to work successfully.
Changes committed and released to HEAD and M101 as v20060203_2215.
Verified on M101 0214.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="126419" />
    <CreationDate amount="2006-02-03 16:58:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="JDT" />
    <component amount="Core" />
    <Version amount="3.1" />
    <rep_platform amount="PC" />
    <op_sys amount="Linux" />
    <priority amount="P3" />
    <bug_severity amount="enhancement" />
    <Summery>ecj should include value of "java.endorsed.dirs" system property in its bootclasspath</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="VERIFIED" />
    <resolution amount="FIXED" />
    <WithStack>Eclipse's Java compiler should include the value of the "java.endorsed.dirs" system property on its bootclasspath by default.  This value should be overridable on the command line with the -endorseddirs option.
According to what is in this page http://java.sun.com/j2se/1.4.2/docs/guide/standards/index.html, not any packages can be retrieved from the endorsed library directories.
Is this what you want?
The contents of the endorsed library directories should then be inserted before the contents of the bootclasspath.
Is this what you expect?
The documentation I've found on javac's handling of endorsed directories is from the 1.5 -help output:

  -endorseddirs &lt;dirs&gt;       Override location of endorsed standards path

and the manpage:

http://java.sun.com/j2se/1.5.0/docs/tooldocs/solaris/javac.html

-Djava.endorsed.dirs=directories
    Override the location of endorsed standards path.

These options lead me to believe that endorsed directories should be handled in a similar way to extension directories.  I don't know where in the bootclasspath order endorsed jars should be included though.

As for a jar's "endorsed" status, I would prefer that ecj not check that.  I'd rather it just put any jar it finds in the endorsed directory on the bootclasspath.
Darin - are you supporting endorsed dirs on JRE container ? If so, what spec are you using ?
Yes, we support endorderd dirs on the JRE container. When a JRE is added to the workspace, we execute the JRE to retrieve its java.endorsed.dirs attribute and these locations to the JRE container.
So you simply retrieve the jars within this folder? Do you actually filter the classes from the jars to retrieve only some specific packages?
We use the jars, we do not retrieve specific packages.
+1 for 3.2RC2
Created attachment 38712
Proposed fix

Make endorsed dirs similar to extdirs and prepend endorsed jars in the bootclasspath.
Created attachment 38713
Regression tests updated

BatchCompiler test12 needs to be updated.
Fixed and released in HEAD.
Please try it and let me know if this is the expected behavior.
In case this property is not set, a string is left in the classpath and it is causing an ArrayStoreException.
Fix is trivial.
Fixed and released in HEAD.
*** Bug 137597 has been marked as a duplicate of this bug. ***
Verified with I20060427-1600 for 3.2RC2</WithStack>
    <WithOutStack>Eclipse's Java compiler should include the value of the "java.endorsed.dirs" system property on its bootclasspath by default.  This value should be overridable on the command line with the -endorseddirs option.
According to what is in this page http://java.sun.com/j2se/1.4.2/docs/guide/standards/index.html, not any packages can be retrieved from the endorsed library directories.
Is this what you want?
The contents of the endorsed library directories should then be inserted before the contents of the bootclasspath.
Is this what you expect?
The documentation I've found on javac's handling of endorsed directories is from the 1.5 -help output:

  -endorseddirs &lt;dirs&gt;       Override location of endorsed standards path

and the manpage:

http://java.sun.com/j2se/1.5.0/docs/tooldocs/solaris/javac.html

-Djava.endorsed.dirs=directories
    Override the location of endorsed standards path.

These options lead me to believe that endorsed directories should be handled in a similar way to extension directories.  I don't know where in the bootclasspath order endorsed jars should be included though.

As for a jar's "endorsed" status, I would prefer that ecj not check that.  I'd rather it just put any jar it finds in the endorsed directory on the bootclasspath.
Darin - are you supporting endorsed dirs on JRE container ? If so, what spec are you using ?
Yes, we support endorderd dirs on the JRE container. When a JRE is added to the workspace, we execute the JRE to retrieve its java.endorsed.dirs attribute and these locations to the JRE container.
So you simply retrieve the jars within this folder? Do you actually filter the classes from the jars to retrieve only some specific packages?
We use the jars, we do not retrieve specific packages.
+1 for 3.2RC2
Created attachment 38712
Proposed fix

Make endorsed dirs similar to extdirs and prepend endorsed jars in the bootclasspath.
Created attachment 38713
Regression tests updated

BatchCompiler test12 needs to be updated.
Fixed and released in HEAD.
Please try it and let me know if this is the expected behavior.
In case this property is not set, a string is left in the classpath and it is causing an ArrayStoreException.
Fix is trivial.
Fixed and released in HEAD.
*** Bug 137597 has been marked as a duplicate of this bug. ***
Verified with I20060427-1600 for 3.2RC2</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="126420" />
    <CreationDate amount="2006-02-03 17:00:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="PDE" />
    <component amount="Build" />
    <Version amount="3.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Exporting a feature fails due to "Unable to delete directory"</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="NEW" />
    <resolution amount="" />
    <WithStack>Eclipse Version: 3.2.0
Build id: I20051215-1506

I have a feature that includes about 40 plugins. About 90% of the time, when I export the feature, I get this error ending with "Unable to delete directory .....\temp.folder\myplugin.jar.bin"

C:\eclipse\workspaces\workspace\com.yyyy.yyyy.feature\build.xml:184: The following error occurred while executing this line:
C:\eclipse\workspaces\workspace\com.yyyy.yyyy.feature\build.xml:35: The following error occurred while executing this line:
C:\eclipse\workspaces\workspace\com.yyyy.yyyy\build.xml:88: The following error occurred while executing this line:
C:\eclipse\workspaces\workspace\com.yyyy.yyyy\build.xml:76: Unable to delete directory C:\eclipse\workspaces\workspace\com.yyyy.yyyy\temp.folder\myplugin.jar.bin


I can successfully export the myplugin plugin on its own. 

I cannot construct a simple testcase to repo the problem. This seems like a timing issue due to the number of plugins involved??

If I look in the filesystem under C:\eclipse\workspaces\workspace\com.yyyy.yyyy, temp.folder is not there.
*** Bug 126427 has been marked as a duplicate of this bug. ***
Moving to pde/build since the failure occurs during the execution of the build script.

Although not sure if there is anything that can be done to resolve/reproduce it.</WithStack>
    <WithOutStack>Eclipse Version: 3.2.0
Build id: I20051215-1506

I have a feature that includes about 40 plugins. About 90% of the time, when I export the feature, I get this error ending with "Unable to delete directory .....\temp.folder\myplugin.jar.bin"

C:\eclipse\workspaces\workspace\com.yyyy.yyyy.feature\build.xml:184: The following error occurred while executing this line:
C:\eclipse\workspaces\workspace\com.yyyy.yyyy.feature\build.xml:35: The following error occurred while executing this line:
C:\eclipse\workspaces\workspace\com.yyyy.yyyy\build.xml:88: The following error occurred while executing this line:
C:\eclipse\workspaces\workspace\com.yyyy.yyyy\build.xml:76: Unable to delete directory C:\eclipse\workspaces\workspace\com.yyyy.yyyy\temp.folder\myplugin.jar.bin


I can successfully export the myplugin plugin on its own. 

I cannot construct a simple testcase to repo the problem. This seems like a timing issue due to the number of plugins involved??

If I look in the filesystem under C:\eclipse\workspaces\workspace\com.yyyy.yyyy, temp.folder is not there.
*** Bug 126427 has been marked as a duplicate of this bug. ***
Moving to pde/build since the failure occurs during the execution of the build script.

Although not sure if there is anything that can be done to resolve/reproduce it.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="126421" />
    <CreationDate amount="2006-02-03 17:03:00 -0500" />
    <DupId amount="" />
    <classification amount="Tools" />
    <Product amount="TPTP Profiling" />
    <component amount="Platform.Doc" />
    <Version amount="4.2" />
    <rep_platform amount="PC" />
    <op_sys amount="All" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>[probekit docs] Migrate the dynamic probekit documents to TPTP</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>Migrate the dynamic probekit documents to TPTP.  Any association with IBM should be removed. Diagrams also need to be updated, since the UI was slightly modified. 

Ruth, please assign this enhancement to me.
Part of bug#109684.
Updated docs checked into HEAD at 11:56pm, March 27/06
Verified on TPTP-4.3.0-200611160100. Closing.</WithStack>
    <WithOutStack>Migrate the dynamic probekit documents to TPTP.  Any association with IBM should be removed. Diagrams also need to be updated, since the UI was slightly modified. 

Ruth, please assign this enhancement to me.
Part of bug#109684.
Updated docs checked into HEAD at 11:56pm, March 27/06
Verified on TPTP-4.3.0-200611160100. Closing.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="126422" />
    <CreationDate amount="2006-02-03 17:04:00 -0500" />
    <DupId amount="" />
    <classification amount="BIRT" />
    <Product amount="BIRT" />
    <component amount="Report Designer" />
    <Version amount="2.0.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P1" />
    <bug_severity amount="enhancement" />
    <Summery>New Report Wizard</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="VERIFIED" />
    <resolution amount="FIXED" />
    <WithStack> My First Report template should not be selected as a default one thus needs to be moved to the second place. Once the very first report is created by the user, he might never use it again. Clicking on Finish button in the first step in the wizard should result in Blank Report creation.
 Remove the Show Report Cheat Sheet option for this report, since once unselected- it defeats the purpose of this report template.
Move My First report to second place of template selection list page in New Report Wizard. Disable the show cheat sheet option check box for my first report.
Verify on build 20060220
verified in 20060302</WithStack>
    <WithOutStack> My First Report template should not be selected as a default one thus needs to be moved to the second place. Once the very first report is created by the user, he might never use it again. Clicking on Finish button in the first step in the wizard should result in Blank Report creation.
 Remove the Show Report Cheat Sheet option for this report, since once unselected- it defeats the purpose of this report template.
Move My First report to second place of template selection list page in New Report Wizard. Disable the show cheat sheet option check box for my first report.
Verify on build 20060220
verified in 20060302</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="126423" />
    <CreationDate amount="2006-02-03 17:05:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="JDT" />
    <component amount="Core" />
    <Version amount="3.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>ClassFormatError -  Repetitive method name/signature</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="8">
      <source_code type="class">
        <location start="1995" end="3581" />
        <code>public class collagen.plan.SetBeforeAct extends collagen.plan.Act$Base implements collagen.plan.Manipulation,collagen.plan.SetBefore{
    public static int INDEX;
    public static final collagen.infer.equal.Term$Slot[] PARAMETERS;
    static {};
    public collagen.plan.Momento getBefore();
    public collagen.plan.Momento getAfter();
    public void setBefore(collagen.plan.Momento);
    public void setAfter(collagen.plan.Momento);
    public collagen.plan.Act$Occurrence newOccurrence(long);
    public collagen.plan.Act$Quoted getPurpose();
    public int getIndex();
    public collagen.infer.equal.Term$Slot[] getParameterOps();
    protected collagen.infer.equal.Term[] getParameterArray();
    protected void setParameterArray(collagen.infer.equal.Term[]);
    public boolean isShowable();
    public collagen.plan.SetBeforeAct();
    public collagen.plan.SetBeforeAct(collagen.plan.Actor, collagen.plan.Act$Quoted);
    public collagen.plan.SetBeforeAct(collagen.infer.equal.Term[], collagen.infer.equal.Term[], collagen.infer.equal.Term[]);
    public collagen.plan.SetBeforeAct(collagen.plan.Actor, collagen.plan.Act);
    public boolean requiresExplanation();
    public collagen.infer.tms.Proposition[] matches(collagen.infer.equal.Term, boolean);
    public java.lang.Boolean isApplicable();
    public java.lang.Boolean isAchieved();
    public collagen.infer.equal.Term$Slot[] getResultOps();  &lt;&lt;&lt;ALSO WRONG!
    public collagen.infer.equal.Term$Slot[] getPropertyOps(); &lt;&lt;&lt;ALSO WRONG!
    public collagen.infer.equal.Term$Slot[] getParameterOps();  &lt;&lt;&lt;DUPLICATE!!!
}</code>
      </source_code>
      <source_code type="class">
        <location start="3743" end="5096" />
        <code>public class collagen.plan.SetBeforeAct extends collagen.plan.Act$Base implements collagen.plan.Manipulation,collagen.plan.SetBefore{
    public static int INDEX;
    public static final collagen.infer.equal.Term$Slot[] PARAMETERS;
    public collagen.plan.Momento getBefore();
    public collagen.plan.Momento getAfter();
    public void setBefore(collagen.plan.Momento);
    public void setAfter(collagen.plan.Momento);
    public collagen.plan.Act$Occurrence newOccurrence(long);
    public collagen.plan.Act$Quoted getPurpose();
    public int getIndex();
    public collagen.infer.equal.Term$Slot[] getParameterOps();
    protected collagen.infer.equal.Term[] getParameterArray();
    protected void setParameterArray(collagen.infer.equal.Term[]);
    public boolean isShowable();
    public collagen.plan.SetBeforeAct();
    public collagen.plan.SetBeforeAct(collagen.plan.Actor, collagen.plan.Act$Quoted);
    public collagen.plan.SetBeforeAct(collagen.infer.equal.Term[], collagen.infer.equal.Term[], collagen.infer.equal.Term[]);
    public collagen.plan.SetBeforeAct(collagen.plan.Actor, collagen.plan.Act);
    public boolean requiresExplanation();
    public collagen.infer.tms.Proposition[] matches(collagen.infer.equal.Term, boolean);
    public java.lang.Boolean isApplicable();
    public java.lang.Boolean isAchieved();
    static {};
}</code>
      </source_code>
      <source_code type="functioncall">
        <location start="5922" end="5977" />
        <code>public collagen.infer.equal.Term$Slot[] getResultOps();</code>
      </source_code>
      <source_code type="functioncall">
        <location start="6041" end="6112" />
        <code>collagen/plan/Act$Base.getResultOps:()[Lcollagen/infer/equal/Term$Slot;</code>
      </source_code>
      <source_code type="functioncall">
        <location start="6130" end="6187" />
        <code>public collagen.infer.equal.Term$Slot[] getPropertyOps();</code>
      </source_code>
      <source_code type="functioncall">
        <location start="6251" end="6327" />
        <code>collagen/plan/Act_Builtin.getPropertyOps:()[Lcollagen/infer/equal/Term$Slot;</code>
      </source_code>
      <source_code type="functioncall">
        <location start="6345" end="6403" />
        <code>public collagen.infer.equal.Term$Slot[] getParameterOps();</code>
      </source_code>
      <source_code type="functioncall">
        <location start="6467" end="6518" />
        <code>getParameterOps:()[Lcollagen/infer/equal/Term$Slot;</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="INVALID" />
    <WithStack>[Note bug description continued in multiple comments... Why don't you allow
attachments? ]

I got the following error, which should never be possible: 

Exception in thread "main" java.lang.ClassFormatError: Repetitive method name/signature in class file collagen/plan/SetBeforeAct
	at java.lang.ClassLoader.defineClass1(Native Method)
	at java.lang.ClassLoader.defineClass(Unknown Source)
	at java.security.SecureClassLoader.defineClass(Unknown Source)
	at java.net.URLClassLoader.defineClass(Unknown Source)
	at java.net.URLClassLoader.access$100(Unknown Source)
	at java.net.URLClassLoader$1.run(Unknown Source)
	at java.security.AccessController.doPrivileged(Native Method)
	at java.net.URLClassLoader.findClass(Unknown Source)
	at java.lang.ClassLoader.loadClass(Unknown Source)
	at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
	at java.lang.ClassLoader.loadClass(Unknown Source)
	at java.lang.ClassLoader.loadClassInternal(Unknown Source)
	at collagen.plan.Builtin.&lt;clinit&gt;(Builtin.java:18)
	at java.lang.Class.forName0(Native Method)
	at java.lang.Class.forName(Unknown Source)
	at com.merl.util.Utils.instantiate(Utils.java:202)
	at collagen.plan.Library$Path.setUp(Library.java:315)
	at collagen.Collagen.preInit(Collagen.java:237)
	at com.merl.util.BeanComponent$Base.init(BeanComponent.java:1222)
	at com.merl.util.BeanComponent$Base.start(BeanComponent.java:1268)
	at com.merl.util.BeanComponent$Base.main(BeanComponent.java:674)
	at com.merl.util.BeanComponentApplet.main(BeanComponentApplet.java:29)
	at collagen.Collagen.main(Collagen.java:152)

I enclose the source file later below, but the entire project is much
too large.  I am just doing a normal Java project.  Note that if I use
javac from the the command line to recompile the source file, the
offending duplicate method signature for getParameterOps() goes away:

***********************************************************************

&gt; javap collagen.plan.SetBeforeAct
Compiled from "SetBeforeAct.java"
public class collagen.plan.SetBeforeAct extends collagen.plan.Act$Base implements collagen.plan.Manipulation,collagen.plan.SetBefore{
    public static int INDEX;
    public static final collagen.infer.equal.Term$Slot[] PARAMETERS;
    static {};
    public collagen.plan.Momento getBefore();
    public collagen.plan.Momento getAfter();
    public void setBefore(collagen.plan.Momento);
    public void setAfter(collagen.plan.Momento);
    public collagen.plan.Act$Occurrence newOccurrence(long);
    public collagen.plan.Act$Quoted getPurpose();
    public int getIndex();
    public collagen.infer.equal.Term$Slot[] getParameterOps();
    protected collagen.infer.equal.Term[] getParameterArray();
    protected void setParameterArray(collagen.infer.equal.Term[]);
    public boolean isShowable();
    public collagen.plan.SetBeforeAct();
    public collagen.plan.SetBeforeAct(collagen.plan.Actor, collagen.plan.Act$Quoted);
    public collagen.plan.SetBeforeAct(collagen.infer.equal.Term[], collagen.infer.equal.Term[], collagen.infer.equal.Term[]);
    public collagen.plan.SetBeforeAct(collagen.plan.Actor, collagen.plan.Act);
    public boolean requiresExplanation();
    public collagen.infer.tms.Proposition[] matches(collagen.infer.equal.Term, boolean);
    public java.lang.Boolean isApplicable();
    public java.lang.Boolean isAchieved();
    public collagen.infer.equal.Term$Slot[] getResultOps();  &lt;&lt;&lt;ALSO WRONG!
    public collagen.infer.equal.Term$Slot[] getPropertyOps(); &lt;&lt;&lt;ALSO WRONG!
    public collagen.infer.equal.Term$Slot[] getParameterOps();  &lt;&lt;&lt;DUPLICATE!!!
}

****************************************************************
&gt; javac SetBeforeAct.java
&gt; javap collagen.plan.SetBeforeAct
Compiled from "SetBeforeAct.java"
public class collagen.plan.SetBeforeAct extends collagen.plan.Act$Base implements collagen.plan.Manipulation,collagen.plan.SetBefore{
    public static int INDEX;
    public static final collagen.infer.equal.Term$Slot[] PARAMETERS;
    public collagen.plan.Momento getBefore();
    public collagen.plan.Momento getAfter();
    public void setBefore(collagen.plan.Momento);
    public void setAfter(collagen.plan.Momento);
    public collagen.plan.Act$Occurrence newOccurrence(long);
    public collagen.plan.Act$Quoted getPurpose();
    public int getIndex();
    public collagen.infer.equal.Term$Slot[] getParameterOps();
    protected collagen.infer.equal.Term[] getParameterArray();
    protected void setParameterArray(collagen.infer.equal.Term[]);
    public boolean isShowable();
    public collagen.plan.SetBeforeAct();
    public collagen.plan.SetBeforeAct(collagen.plan.Actor, collagen.plan.Act$Quoted);
    public collagen.plan.SetBeforeAct(collagen.infer.equal.Term[], collagen.infer.equal.Term[], collagen.infer.equal.Term[]);
    public collagen.plan.SetBeforeAct(collagen.plan.Actor, collagen.plan.Act);
    public boolean requiresExplanation();
    public collagen.infer.tms.Proposition[] matches(collagen.infer.equal.Term, boolean);
    public java.lang.Boolean isApplicable();
    public java.lang.Boolean isAchieved();
    static {};
}

&gt; Notice that not only redundant getParameterOps() goes away, but also
getPropertyOps() and getResultOps(), which are also _wrong_ (see
next comment)
Created attachment 34129
Source file for SetBeforeAct
Created attachment 34130
Class file with repetitive method getParameterOps
Created attachment 34131
Source file containing parent of SetBeforeAct
Created attachment 34132
Class file for Act.Base
Ok, the attachment option doesn't show up until the next window... 

Anyways, I attached both source file for both the offending class and its
parent, and the bad class file, and the class file for it's parent, so you can
do a full decompile to see more info.

Here's the key info re the bad method entries (you can see the last one just
leads to an infinite loop!).

I am hosed.  A workaround idea would be welcome... -CR


public collagen.infer.equal.Term$Slot[] getResultOps();
  Code:
   0:   aload_0
   1:   invokevirtual   #198; //Method
collagen/plan/Act$Base.getResultOps:()[Lcollagen/infer/equal/Term$Slot;
   4:   areturn

public collagen.infer.equal.Term$Slot[] getPropertyOps();
  Code:
   0:   aload_0
   1:   invokevirtual   #203; //Method
collagen/plan/Act_Builtin.getPropertyOps:()[Lcollagen/infer/equal/Term$Slot;
   4:   areturn

public collagen.infer.equal.Term$Slot[] getParameterOps();
  Code:
   0:   aload_0
   1:   invokevirtual   #205; //Method
getParameterOps:()[Lcollagen/infer/equal/Term$Slot;
   4:   areturn

}

*** Bug 126424 has been marked as a duplicate of this bug. ***
**********NB*************

I am using 3.1.2 (not in drop-down list above).

I am going to try falling back to 3.1.1...
(a lot of stuff happened in the meanwhile)
Dropping back to 3.1.1 didn't help.

Btw, during building I get messages like:

(100 Errors, 0 Warnings.  Fixed 53 + 0 )

Eventually there are no errors at the end.  I assume that what Eclipse is fixing is undefined types due to circularity in my class paths (between projects), which I have.  It isn't actually editing the byte codes, is it?

Maybe this is a Sun compiler error... I'll look there next...

Help!!  -CR
Falling back to 3.1.1 did not help.

I am already using the latest JDK 5.0 Update 6.

Errggggg....
It would be really nice if we could get a complete test case.
Even if the resulting project is pretty big, we should set up a way to retrieve it. Without a complete test case, it is difficult to reproduce this issue.
Thanks.
Hi Olivier,  Thanks for responding so quickly.

I hear you about a reproducible test case, but I am afraid it would be very difficult for me to post the whole project, in part because it is proprietary code.  

I was hoping that someone who knows the insides of the compiler would have a clue from the particular symptom of generating extraneous methods.  Basically the compiler should obviously _never_ produce such broken byte code.

Another thing I wonder about is why use javac gives the correct result:  Eclipse uses the compiler code from the JDK, doesn't it?  If so, all I can figure out is that the _order_ of compilation in the Eclipse build process somehow triggers a latent Sun compiler bug; or perhaps Eclipse _uses_ the compiler in some special optimized way?

Btw, I checked on the Sun web site for bugs related to this ClassFormatError, but didn't see any.

Any help would be appreciated, especially from a compiler expert.

Thanks, -CR
Ok, I see that Eclipse really does have is own compiler, distinct from the Sun compiler... So this really is a bug in the Eclipse compiler...  

Any compiler experts out there who might suggest a workaround? 

Has anything like this been fixed in the 3.2.2 release?  (I looked through the build notes and saw lots of bugs fixed in the compiler...).

Thanks in advance, -CR
Charles,

Without steps to reproduce, it is hard to figure what is going on. Basically, your samples to do not compile out of their context, and it would be tedious to infer anything from these fragments. The theory is that duplicates should never occur, and compiler checks before adding synthetics/bridge methods for collisions with user code. Now you may have found a bug in this area.

We haven't made any fix in this area, neither have heard of a similar problem to date.
I would really encourage you to extract a test case that would provide all necessary classes. So if you could provide all the classes to compile the source file SetBeforeAct.java, this would greatly help.
You can strip the method body of the dependant classes if you don't want to provide the code.
[Sorry this posting is a bit long, but I think it is worthwhile... -CR]

Cher Olivier et Philippe,

First let me sincerely apologize for not being able to provide you with a reproducible test---I understand completely why you are reluctant to look at this bug without one; and Eclipse is after all a community effort.

On the other hand, I figured out some more information over the weekend (I spent a fair bit of it on this problem), which I think should be able to lead you to the buggy code in the compiler, so that this doesn't happen to anyone else.

The clue is that (as I mentioned in my original posting) there are circular project dependencies in my class path.  Indeed, the compiler does warn me about this, but I think producing an illegal class file is a bit of an extreme reacion on its part :-).  When I divided one of my projects into two parts to avoid the circularity, the problem disappeared!  Also, all the messages in the progress windows about "Fixing" errors no longer appears.

Coming back to the issue of duplicate methods, it seems to me that this is a fairly simple invariant to verify by code inspection.  All you need to do is to make sure that every place a method signature (synthetic or not) is added, there is an unavoidable check for duplicates.  There can't be that many places where methods are added, and if there are a lot, they should/could all go through a shared utility method which checks for duplicates.  

Furthermore, given the circularity issue above, my guess is that there is some clever editing of class files going on, e.g., first a "placeholder" method is added, and then on the next compilation cycle of the circularity, it is supposed to be updated with the "real" method, but the code accidentally forgets to delete the synthetic method.  

In any case, there definitely is a (bad) bug, and I think that a careful code inspection, informed by the information provided here, is likely to find it.

I will curious to hear what happens,

Bon chance!  -CR


Merci (thanks) Charles.
The theory is that all such field/method creations are already protected.
Also, can you reproduce this issue in latest 3.2 integration build ?
Philippe,

 &gt; The theory is that all such field/method creations are already protected.

We agree that is the theory, but the practice appears to be different :-).  Seriously, though, my experience in similar cases is that a careful code walkthrough to verify the theory (especially when one has strong reason to believe there is a hole) often finds the hole.  It's up to you.

 &gt; Also, can you reproduce this issue in latest 3.2 integration build ?

Sorry, but I am loathe to reconfigure my projects back to their losing configuration, now that I have things working again.

-CR
Charles,

Are you using compliance 1.3 in your compiler settings ?
Please check bug 137744.
To Olivier:

I am using compliance 5.0.

Bug 1377744 certainly does look related.  Perhaps it was not totally fixed in 1.3 and is showing up in a slightly different form here?
Let us know if you can reproduce using a build &gt; 20060421.
Bug 137744 relates to a regression introduced with perf work for sorting method bindings. The present bug was discovered prior to introduction of sorting, which is also confirmed by the fact it also occurs on 3.1.1.

I am suspecting a bogus addition of a bridge method or something like this.

Kent - did you fix some bridge issues lately ?
yes - see bug 132831
Pls reopen if symptoms persist in latest.
As of now 'LATER' and 'REMIND' resolutions are no longer supported.
Please reopen this bug if it is still valid for you.</WithStack>
    <WithOutStack>[Note bug description continued in multiple comments... Why don't you allow
attachments? ]

I got the following error, which should never be possible: 

Exception in thread "main" java.lang.ClassFormatError: Repetitive method name/signature in class file collagen/plan/SetBeforeAct
	at java.lang.ClassLoader.defineClass1(Native Method)
	at java.lang.ClassLoader.defineClass(Unknown Source)
	at java.security.SecureClassLoader.defineClass(Unknown Source)
	at java.net.URLClassLoader.defineClass(Unknown Source)
	at java.net.URLClassLoader.access$100(Unknown Source)
	at java.net.URLClassLoader$1.run(Unknown Source)
	at java.security.AccessController.doPrivileged(Native Method)
	at java.net.URLClassLoader.findClass(Unknown Source)
	at java.lang.ClassLoader.loadClass(Unknown Source)
	at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
	at java.lang.ClassLoader.loadClass(Unknown Source)
	at java.lang.ClassLoader.loadClassInternal(Unknown Source)
	at collagen.plan.Builtin.&lt;clinit&gt;(Builtin.java:18)
	at java.lang.Class.forName0(Native Method)
	at java.lang.Class.forName(Unknown Source)
	at com.merl.util.Utils.instantiate(Utils.java:202)
	at collagen.plan.Library$Path.setUp(Library.java:315)
	at collagen.Collagen.preInit(Collagen.java:237)
	at com.merl.util.BeanComponent$Base.init(BeanComponent.java:1222)
	at com.merl.util.BeanComponent$Base.start(BeanComponent.java:1268)
	at com.merl.util.BeanComponent$Base.main(BeanComponent.java:674)
	at com.merl.util.BeanComponentApplet.main(BeanComponentApplet.java:29)
	at collagen.Collagen.main(Collagen.java:152)

I enclose the source file later below, but the entire project is much
too large.  I am just doing a normal Java project.  Note that if I use
javac from the the command line to recompile the source file, the
offending duplicate method signature for getParameterOps() goes away:

***********************************************************************

&gt; javap collagen.plan.SetBeforeAct
Compiled from "SetBeforeAct.java"
public class collagen.plan.SetBeforeAct extends collagen.plan.Act$Base implements collagen.plan.Manipulation,collagen.plan.SetBefore{
    public static int INDEX;
    public static final collagen.infer.equal.Term$Slot[] PARAMETERS;
    static {};
    public collagen.plan.Momento getBefore();
    public collagen.plan.Momento getAfter();
    public void setBefore(collagen.plan.Momento);
    public void setAfter(collagen.plan.Momento);
    public collagen.plan.Act$Occurrence newOccurrence(long);
    public collagen.plan.Act$Quoted getPurpose();
    public int getIndex();
    public collagen.infer.equal.Term$Slot[] getParameterOps();
    protected collagen.infer.equal.Term[] getParameterArray();
    protected void setParameterArray(collagen.infer.equal.Term[]);
    public boolean isShowable();
    public collagen.plan.SetBeforeAct();
    public collagen.plan.SetBeforeAct(collagen.plan.Actor, collagen.plan.Act$Quoted);
    public collagen.plan.SetBeforeAct(collagen.infer.equal.Term[], collagen.infer.equal.Term[], collagen.infer.equal.Term[]);
    public collagen.plan.SetBeforeAct(collagen.plan.Actor, collagen.plan.Act);
    public boolean requiresExplanation();
    public collagen.infer.tms.Proposition[] matches(collagen.infer.equal.Term, boolean);
    public java.lang.Boolean isApplicable();
    public java.lang.Boolean isAchieved();
    public collagen.infer.equal.Term$Slot[] getResultOps();  &lt;&lt;&lt;ALSO WRONG!
    public collagen.infer.equal.Term$Slot[] getPropertyOps(); &lt;&lt;&lt;ALSO WRONG!
    public collagen.infer.equal.Term$Slot[] getParameterOps();  &lt;&lt;&lt;DUPLICATE!!!
}

****************************************************************
&gt; javac SetBeforeAct.java
&gt; javap collagen.plan.SetBeforeAct
Compiled from "SetBeforeAct.java"
public class collagen.plan.SetBeforeAct extends collagen.plan.Act$Base implements collagen.plan.Manipulation,collagen.plan.SetBefore{
    public static int INDEX;
    public static final collagen.infer.equal.Term$Slot[] PARAMETERS;
    public collagen.plan.Momento getBefore();
    public collagen.plan.Momento getAfter();
    public void setBefore(collagen.plan.Momento);
    public void setAfter(collagen.plan.Momento);
    public collagen.plan.Act$Occurrence newOccurrence(long);
    public collagen.plan.Act$Quoted getPurpose();
    public int getIndex();
    public collagen.infer.equal.Term$Slot[] getParameterOps();
    protected collagen.infer.equal.Term[] getParameterArray();
    protected void setParameterArray(collagen.infer.equal.Term[]);
    public boolean isShowable();
    public collagen.plan.SetBeforeAct();
    public collagen.plan.SetBeforeAct(collagen.plan.Actor, collagen.plan.Act$Quoted);
    public collagen.plan.SetBeforeAct(collagen.infer.equal.Term[], collagen.infer.equal.Term[], collagen.infer.equal.Term[]);
    public collagen.plan.SetBeforeAct(collagen.plan.Actor, collagen.plan.Act);
    public boolean requiresExplanation();
    public collagen.infer.tms.Proposition[] matches(collagen.infer.equal.Term, boolean);
    public java.lang.Boolean isApplicable();
    public java.lang.Boolean isAchieved();
    static {};
}

&gt; Notice that not only redundant getParameterOps() goes away, but also
getPropertyOps() and getResultOps(), which are also _wrong_ (see
next comment)
Created attachment 34129
Source file for SetBeforeAct
Created attachment 34130
Class file with repetitive method getParameterOps
Created attachment 34131
Source file containing parent of SetBeforeAct
Created attachment 34132
Class file for Act.Base
Ok, the attachment option doesn't show up until the next window... 

Anyways, I attached both source file for both the offending class and its
parent, and the bad class file, and the class file for it's parent, so you can
do a full decompile to see more info.

Here's the key info re the bad method entries (you can see the last one just
leads to an infinite loop!).

I am hosed.  A workaround idea would be welcome... -CR


public collagen.infer.equal.Term$Slot[] getResultOps();
  Code:
   0:   aload_0
   1:   invokevirtual   #198; //Method
collagen/plan/Act$Base.getResultOps:()[Lcollagen/infer/equal/Term$Slot;
   4:   areturn

public collagen.infer.equal.Term$Slot[] getPropertyOps();
  Code:
   0:   aload_0
   1:   invokevirtual   #203; //Method
collagen/plan/Act_Builtin.getPropertyOps:()[Lcollagen/infer/equal/Term$Slot;
   4:   areturn

public collagen.infer.equal.Term$Slot[] getParameterOps();
  Code:
   0:   aload_0
   1:   invokevirtual   #205; //Method
getParameterOps:()[Lcollagen/infer/equal/Term$Slot;
   4:   areturn

}

*** Bug 126424 has been marked as a duplicate of this bug. ***
**********NB*************

I am using 3.1.2 (not in drop-down list above).

I am going to try falling back to 3.1.1...
(a lot of stuff happened in the meanwhile)
Dropping back to 3.1.1 didn't help.

Btw, during building I get messages like:

(100 Errors, 0 Warnings.  Fixed 53 + 0 )

Eventually there are no errors at the end.  I assume that what Eclipse is fixing is undefined types due to circularity in my class paths (between projects), which I have.  It isn't actually editing the byte codes, is it?

Maybe this is a Sun compiler error... I'll look there next...

Help!!  -CR
Falling back to 3.1.1 did not help.

I am already using the latest JDK 5.0 Update 6.

Errggggg....
It would be really nice if we could get a complete test case.
Even if the resulting project is pretty big, we should set up a way to retrieve it. Without a complete test case, it is difficult to reproduce this issue.
Thanks.
Hi Olivier,  Thanks for responding so quickly.

I hear you about a reproducible test case, but I am afraid it would be very difficult for me to post the whole project, in part because it is proprietary code.  

I was hoping that someone who knows the insides of the compiler would have a clue from the particular symptom of generating extraneous methods.  Basically the compiler should obviously _never_ produce such broken byte code.

Another thing I wonder about is why use javac gives the correct result:  Eclipse uses the compiler code from the JDK, doesn't it?  If so, all I can figure out is that the _order_ of compilation in the Eclipse build process somehow triggers a latent Sun compiler bug; or perhaps Eclipse _uses_ the compiler in some special optimized way?

Btw, I checked on the Sun web site for bugs related to this ClassFormatError, but didn't see any.

Any help would be appreciated, especially from a compiler expert.

Thanks, -CR
Ok, I see that Eclipse really does have is own compiler, distinct from the Sun compiler... So this really is a bug in the Eclipse compiler...  

Any compiler experts out there who might suggest a workaround? 

Has anything like this been fixed in the 3.2.2 release?  (I looked through the build notes and saw lots of bugs fixed in the compiler...).

Thanks in advance, -CR
Charles,

Without steps to reproduce, it is hard to figure what is going on. Basically, your samples to do not compile out of their context, and it would be tedious to infer anything from these fragments. The theory is that duplicates should never occur, and compiler checks before adding synthetics/bridge methods for collisions with user code. Now you may have found a bug in this area.

We haven't made any fix in this area, neither have heard of a similar problem to date.
I would really encourage you to extract a test case that would provide all necessary classes. So if you could provide all the classes to compile the source file SetBeforeAct.java, this would greatly help.
You can strip the method body of the dependant classes if you don't want to provide the code.
[Sorry this posting is a bit long, but I think it is worthwhile... -CR]

Cher Olivier et Philippe,

First let me sincerely apologize for not being able to provide you with a reproducible test---I understand completely why you are reluctant to look at this bug without one; and Eclipse is after all a community effort.

On the other hand, I figured out some more information over the weekend (I spent a fair bit of it on this problem), which I think should be able to lead you to the buggy code in the compiler, so that this doesn't happen to anyone else.

The clue is that (as I mentioned in my original posting) there are circular project dependencies in my class path.  Indeed, the compiler does warn me about this, but I think producing an illegal class file is a bit of an extreme reacion on its part :-).  When I divided one of my projects into two parts to avoid the circularity, the problem disappeared!  Also, all the messages in the progress windows about "Fixing" errors no longer appears.

Coming back to the issue of duplicate methods, it seems to me that this is a fairly simple invariant to verify by code inspection.  All you need to do is to make sure that every place a method signature (synthetic or not) is added, there is an unavoidable check for duplicates.  There can't be that many places where methods are added, and if there are a lot, they should/could all go through a shared utility method which checks for duplicates.  

Furthermore, given the circularity issue above, my guess is that there is some clever editing of class files going on, e.g., first a "placeholder" method is added, and then on the next compilation cycle of the circularity, it is supposed to be updated with the "real" method, but the code accidentally forgets to delete the synthetic method.  

In any case, there definitely is a (bad) bug, and I think that a careful code inspection, informed by the information provided here, is likely to find it.

I will curious to hear what happens,

Bon chance!  -CR


Merci (thanks) Charles.
The theory is that all such field/method creations are already protected.
Also, can you reproduce this issue in latest 3.2 integration build ?
Philippe,

 &gt; The theory is that all such field/method creations are already protected.

We agree that is the theory, but the practice appears to be different :-).  Seriously, though, my experience in similar cases is that a careful code walkthrough to verify the theory (especially when one has strong reason to believe there is a hole) often finds the hole.  It's up to you.

 &gt; Also, can you reproduce this issue in latest 3.2 integration build ?

Sorry, but I am loathe to reconfigure my projects back to their losing configuration, now that I have things working again.

-CR
Charles,

Are you using compliance 1.3 in your compiler settings ?
Please check bug 137744.
To Olivier:

I am using compliance 5.0.

Bug 1377744 certainly does look related.  Perhaps it was not totally fixed in 1.3 and is showing up in a slightly different form here?
Let us know if you can reproduce using a build &gt; 20060421.
Bug 137744 relates to a regression introduced with perf work for sorting method bindings. The present bug was discovered prior to introduction of sorting, which is also confirmed by the fact it also occurs on 3.1.1.

I am suspecting a bogus addition of a bridge method or something like this.

Kent - did you fix some bridge issues lately ?
yes - see bug 132831
Pls reopen if symptoms persist in latest.
As of now 'LATER' and 'REMIND' resolutions are no longer supported.
Please reopen this bug if it is still valid for you.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="126424" />
    <CreationDate amount="2006-02-03 17:11:00 -0500" />
    <DupId amount="126423" />
    <classification amount="Eclipse" />
    <Product amount="JDT" />
    <component amount="Core" />
    <Version amount="3.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>ClassFormatError -  Repetitive method name/signature</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="8">
      <source_code type="class">
        <location start="1995" end="3581" />
        <code>public class collagen.plan.SetBeforeAct extends collagen.plan.Act$Base implements collagen.plan.Manipulation,collagen.plan.SetBefore{
    public static int INDEX;
    public static final collagen.infer.equal.Term$Slot[] PARAMETERS;
    static {};
    public collagen.plan.Momento getBefore();
    public collagen.plan.Momento getAfter();
    public void setBefore(collagen.plan.Momento);
    public void setAfter(collagen.plan.Momento);
    public collagen.plan.Act$Occurrence newOccurrence(long);
    public collagen.plan.Act$Quoted getPurpose();
    public int getIndex();
    public collagen.infer.equal.Term$Slot[] getParameterOps();
    protected collagen.infer.equal.Term[] getParameterArray();
    protected void setParameterArray(collagen.infer.equal.Term[]);
    public boolean isShowable();
    public collagen.plan.SetBeforeAct();
    public collagen.plan.SetBeforeAct(collagen.plan.Actor, collagen.plan.Act$Quoted);
    public collagen.plan.SetBeforeAct(collagen.infer.equal.Term[], collagen.infer.equal.Term[], collagen.infer.equal.Term[]);
    public collagen.plan.SetBeforeAct(collagen.plan.Actor, collagen.plan.Act);
    public boolean requiresExplanation();
    public collagen.infer.tms.Proposition[] matches(collagen.infer.equal.Term, boolean);
    public java.lang.Boolean isApplicable();
    public java.lang.Boolean isAchieved();
    public collagen.infer.equal.Term$Slot[] getResultOps();  &lt;&lt;&lt;ALSO WRONG!
    public collagen.infer.equal.Term$Slot[] getPropertyOps(); &lt;&lt;&lt;ALSO WRONG!
    public collagen.infer.equal.Term$Slot[] getParameterOps();  &lt;&lt;&lt;DUPLICATE!!!
}</code>
      </source_code>
      <source_code type="class">
        <location start="3743" end="5096" />
        <code>public class collagen.plan.SetBeforeAct extends collagen.plan.Act$Base implements collagen.plan.Manipulation,collagen.plan.SetBefore{
    public static int INDEX;
    public static final collagen.infer.equal.Term$Slot[] PARAMETERS;
    public collagen.plan.Momento getBefore();
    public collagen.plan.Momento getAfter();
    public void setBefore(collagen.plan.Momento);
    public void setAfter(collagen.plan.Momento);
    public collagen.plan.Act$Occurrence newOccurrence(long);
    public collagen.plan.Act$Quoted getPurpose();
    public int getIndex();
    public collagen.infer.equal.Term$Slot[] getParameterOps();
    protected collagen.infer.equal.Term[] getParameterArray();
    protected void setParameterArray(collagen.infer.equal.Term[]);
    public boolean isShowable();
    public collagen.plan.SetBeforeAct();
    public collagen.plan.SetBeforeAct(collagen.plan.Actor, collagen.plan.Act$Quoted);
    public collagen.plan.SetBeforeAct(collagen.infer.equal.Term[], collagen.infer.equal.Term[], collagen.infer.equal.Term[]);
    public collagen.plan.SetBeforeAct(collagen.plan.Actor, collagen.plan.Act);
    public boolean requiresExplanation();
    public collagen.infer.tms.Proposition[] matches(collagen.infer.equal.Term, boolean);
    public java.lang.Boolean isApplicable();
    public java.lang.Boolean isAchieved();
    static {};
}</code>
      </source_code>
      <source_code type="functioncall">
        <location start="5720" end="5775" />
        <code>public collagen.infer.equal.Term$Slot[] getResultOps();</code>
      </source_code>
      <source_code type="functioncall">
        <location start="5798" end="5904" />
        <code>1:	invokevirtual	#198; //Method collagen/plan/Act$Base.getResultOps:()[Lcollagen/infer/equal/Term$Slot;</code>
      </source_code>
      <source_code type="functioncall">
        <location start="5920" end="5977" />
        <code>public collagen.infer.equal.Term$Slot[] getPropertyOps();</code>
      </source_code>
      <source_code type="functioncall">
        <location start="6000" end="6111" />
        <code>1:	invokevirtual	#203; //Method collagen/plan/Act_Builtin.getPropertyOps:()[Lcollagen/infer/equal/Term$Slot;</code>
      </source_code>
      <source_code type="functioncall">
        <location start="6127" end="6185" />
        <code>public collagen.infer.equal.Term$Slot[] getParameterOps();</code>
      </source_code>
      <source_code type="functioncall">
        <location start="6208" end="6294" />
        <code>1:	invokevirtual	#205; //Method getParameterOps:()[Lcollagen/infer/equal/Term$Slot;</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="DUPLICATE" />
    <WithStack>[Note bug description continued in multiple comments... Why don't you allow
attachments? ]

I got the following error, which should never be possible: 

Exception in thread "main" java.lang.ClassFormatError: Repetitive method name/signature in class file collagen/plan/SetBeforeAct
	at java.lang.ClassLoader.defineClass1(Native Method)
	at java.lang.ClassLoader.defineClass(Unknown Source)
	at java.security.SecureClassLoader.defineClass(Unknown Source)
	at java.net.URLClassLoader.defineClass(Unknown Source)
	at java.net.URLClassLoader.access$100(Unknown Source)
	at java.net.URLClassLoader$1.run(Unknown Source)
	at java.security.AccessController.doPrivileged(Native Method)
	at java.net.URLClassLoader.findClass(Unknown Source)
	at java.lang.ClassLoader.loadClass(Unknown Source)
	at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
	at java.lang.ClassLoader.loadClass(Unknown Source)
	at java.lang.ClassLoader.loadClassInternal(Unknown Source)
	at collagen.plan.Builtin.&lt;clinit&gt;(Builtin.java:18)
	at java.lang.Class.forName0(Native Method)
	at java.lang.Class.forName(Unknown Source)
	at com.merl.util.Utils.instantiate(Utils.java:202)
	at collagen.plan.Library$Path.setUp(Library.java:315)
	at collagen.Collagen.preInit(Collagen.java:237)
	at com.merl.util.BeanComponent$Base.init(BeanComponent.java:1222)
	at com.merl.util.BeanComponent$Base.start(BeanComponent.java:1268)
	at com.merl.util.BeanComponent$Base.main(BeanComponent.java:674)
	at com.merl.util.BeanComponentApplet.main(BeanComponentApplet.java:29)
	at collagen.Collagen.main(Collagen.java:152)

I enclose the source file later below, but the entire project is much
too large.  I am just doing a normal Java project.  Note that if I use
javac from the the command line to recompile the source file, the
offending duplicate method signature for getParameterOps() goes away:

***********************************************************************

&gt; javap collagen.plan.SetBeforeAct
Compiled from "SetBeforeAct.java"
public class collagen.plan.SetBeforeAct extends collagen.plan.Act$Base implements collagen.plan.Manipulation,collagen.plan.SetBefore{
    public static int INDEX;
    public static final collagen.infer.equal.Term$Slot[] PARAMETERS;
    static {};
    public collagen.plan.Momento getBefore();
    public collagen.plan.Momento getAfter();
    public void setBefore(collagen.plan.Momento);
    public void setAfter(collagen.plan.Momento);
    public collagen.plan.Act$Occurrence newOccurrence(long);
    public collagen.plan.Act$Quoted getPurpose();
    public int getIndex();
    public collagen.infer.equal.Term$Slot[] getParameterOps();
    protected collagen.infer.equal.Term[] getParameterArray();
    protected void setParameterArray(collagen.infer.equal.Term[]);
    public boolean isShowable();
    public collagen.plan.SetBeforeAct();
    public collagen.plan.SetBeforeAct(collagen.plan.Actor, collagen.plan.Act$Quoted);
    public collagen.plan.SetBeforeAct(collagen.infer.equal.Term[], collagen.infer.equal.Term[], collagen.infer.equal.Term[]);
    public collagen.plan.SetBeforeAct(collagen.plan.Actor, collagen.plan.Act);
    public boolean requiresExplanation();
    public collagen.infer.tms.Proposition[] matches(collagen.infer.equal.Term, boolean);
    public java.lang.Boolean isApplicable();
    public java.lang.Boolean isAchieved();
    public collagen.infer.equal.Term$Slot[] getResultOps();  &lt;&lt;&lt;ALSO WRONG!
    public collagen.infer.equal.Term$Slot[] getPropertyOps(); &lt;&lt;&lt;ALSO WRONG!
    public collagen.infer.equal.Term$Slot[] getParameterOps();  &lt;&lt;&lt;DUPLICATE!!!
}

****************************************************************
&gt; javac SetBeforeAct.java
&gt; javap collagen.plan.SetBeforeAct
Compiled from "SetBeforeAct.java"
public class collagen.plan.SetBeforeAct extends collagen.plan.Act$Base implements collagen.plan.Manipulation,collagen.plan.SetBefore{
    public static int INDEX;
    public static final collagen.infer.equal.Term$Slot[] PARAMETERS;
    public collagen.plan.Momento getBefore();
    public collagen.plan.Momento getAfter();
    public void setBefore(collagen.plan.Momento);
    public void setAfter(collagen.plan.Momento);
    public collagen.plan.Act$Occurrence newOccurrence(long);
    public collagen.plan.Act$Quoted getPurpose();
    public int getIndex();
    public collagen.infer.equal.Term$Slot[] getParameterOps();
    protected collagen.infer.equal.Term[] getParameterArray();
    protected void setParameterArray(collagen.infer.equal.Term[]);
    public boolean isShowable();
    public collagen.plan.SetBeforeAct();
    public collagen.plan.SetBeforeAct(collagen.plan.Actor, collagen.plan.Act$Quoted);
    public collagen.plan.SetBeforeAct(collagen.infer.equal.Term[], collagen.infer.equal.Term[], collagen.infer.equal.Term[]);
    public collagen.plan.SetBeforeAct(collagen.plan.Actor, collagen.plan.Act);
    public boolean requiresExplanation();
    public collagen.infer.tms.Proposition[] matches(collagen.infer.equal.Term, boolean);
    public java.lang.Boolean isApplicable();
    public java.lang.Boolean isAchieved();
    static {};
}

&gt; Notice that not only redundant getParameterOps() goes away, but also
getPropertyOps() and getResultOps(), which are also _wrong_ (see
next comment)
Ok, the attachment option doesn't show up until the next window... But I can't view them (View All is grayed out).

Anyways, I attached both source file for both the offending class and its parent, and the bad class file, and the class file for it's parent, so you can do a full decompile to see more info.

Here's the key info re the bad method entries (you can see the last one just leads to an infinite loop!).

I am hosed.  A workaround idea would be welcome... -CR


public collagen.infer.equal.Term$Slot[] getResultOps();
  Code:
   0:	aload_0
   1:	invokevirtual	#198; //Method collagen/plan/Act$Base.getResultOps:()[Lcollagen/infer/equal/Term$Slot;
   4:	areturn

public collagen.infer.equal.Term$Slot[] getPropertyOps();
  Code:
   0:	aload_0
   1:	invokevirtual	#203; //Method collagen/plan/Act_Builtin.getPropertyOps:()[Lcollagen/infer/equal/Term$Slot;
   4:	areturn

public collagen.infer.equal.Term$Slot[] getParameterOps();
  Code:
   0:	aload_0
   1:	invokevirtual	#205; //Method getParameterOps:()[Lcollagen/infer/equal/Term$Slot;
   4:	areturn

}




*** This bug has been marked as a duplicate of 126423 ***</WithStack>
    <WithOutStack>[Note bug description continued in multiple comments... Why don't you allow
attachments? ]

I got the following error, which should never be possible: 

Exception in thread "main" java.lang.ClassFormatError: Repetitive method name/signature in class file collagen/plan/SetBeforeAct
	at java.lang.ClassLoader.defineClass1(Native Method)
	at java.lang.ClassLoader.defineClass(Unknown Source)
	at java.security.SecureClassLoader.defineClass(Unknown Source)
	at java.net.URLClassLoader.defineClass(Unknown Source)
	at java.net.URLClassLoader.access$100(Unknown Source)
	at java.net.URLClassLoader$1.run(Unknown Source)
	at java.security.AccessController.doPrivileged(Native Method)
	at java.net.URLClassLoader.findClass(Unknown Source)
	at java.lang.ClassLoader.loadClass(Unknown Source)
	at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
	at java.lang.ClassLoader.loadClass(Unknown Source)
	at java.lang.ClassLoader.loadClassInternal(Unknown Source)
	at collagen.plan.Builtin.&lt;clinit&gt;(Builtin.java:18)
	at java.lang.Class.forName0(Native Method)
	at java.lang.Class.forName(Unknown Source)
	at com.merl.util.Utils.instantiate(Utils.java:202)
	at collagen.plan.Library$Path.setUp(Library.java:315)
	at collagen.Collagen.preInit(Collagen.java:237)
	at com.merl.util.BeanComponent$Base.init(BeanComponent.java:1222)
	at com.merl.util.BeanComponent$Base.start(BeanComponent.java:1268)
	at com.merl.util.BeanComponent$Base.main(BeanComponent.java:674)
	at com.merl.util.BeanComponentApplet.main(BeanComponentApplet.java:29)
	at collagen.Collagen.main(Collagen.java:152)

I enclose the source file later below, but the entire project is much
too large.  I am just doing a normal Java project.  Note that if I use
javac from the the command line to recompile the source file, the
offending duplicate method signature for getParameterOps() goes away:

***********************************************************************

&gt; javap collagen.plan.SetBeforeAct
Compiled from "SetBeforeAct.java"
public class collagen.plan.SetBeforeAct extends collagen.plan.Act$Base implements collagen.plan.Manipulation,collagen.plan.SetBefore{
    public static int INDEX;
    public static final collagen.infer.equal.Term$Slot[] PARAMETERS;
    static {};
    public collagen.plan.Momento getBefore();
    public collagen.plan.Momento getAfter();
    public void setBefore(collagen.plan.Momento);
    public void setAfter(collagen.plan.Momento);
    public collagen.plan.Act$Occurrence newOccurrence(long);
    public collagen.plan.Act$Quoted getPurpose();
    public int getIndex();
    public collagen.infer.equal.Term$Slot[] getParameterOps();
    protected collagen.infer.equal.Term[] getParameterArray();
    protected void setParameterArray(collagen.infer.equal.Term[]);
    public boolean isShowable();
    public collagen.plan.SetBeforeAct();
    public collagen.plan.SetBeforeAct(collagen.plan.Actor, collagen.plan.Act$Quoted);
    public collagen.plan.SetBeforeAct(collagen.infer.equal.Term[], collagen.infer.equal.Term[], collagen.infer.equal.Term[]);
    public collagen.plan.SetBeforeAct(collagen.plan.Actor, collagen.plan.Act);
    public boolean requiresExplanation();
    public collagen.infer.tms.Proposition[] matches(collagen.infer.equal.Term, boolean);
    public java.lang.Boolean isApplicable();
    public java.lang.Boolean isAchieved();
    public collagen.infer.equal.Term$Slot[] getResultOps();  &lt;&lt;&lt;ALSO WRONG!
    public collagen.infer.equal.Term$Slot[] getPropertyOps(); &lt;&lt;&lt;ALSO WRONG!
    public collagen.infer.equal.Term$Slot[] getParameterOps();  &lt;&lt;&lt;DUPLICATE!!!
}

****************************************************************
&gt; javac SetBeforeAct.java
&gt; javap collagen.plan.SetBeforeAct
Compiled from "SetBeforeAct.java"
public class collagen.plan.SetBeforeAct extends collagen.plan.Act$Base implements collagen.plan.Manipulation,collagen.plan.SetBefore{
    public static int INDEX;
    public static final collagen.infer.equal.Term$Slot[] PARAMETERS;
    public collagen.plan.Momento getBefore();
    public collagen.plan.Momento getAfter();
    public void setBefore(collagen.plan.Momento);
    public void setAfter(collagen.plan.Momento);
    public collagen.plan.Act$Occurrence newOccurrence(long);
    public collagen.plan.Act$Quoted getPurpose();
    public int getIndex();
    public collagen.infer.equal.Term$Slot[] getParameterOps();
    protected collagen.infer.equal.Term[] getParameterArray();
    protected void setParameterArray(collagen.infer.equal.Term[]);
    public boolean isShowable();
    public collagen.plan.SetBeforeAct();
    public collagen.plan.SetBeforeAct(collagen.plan.Actor, collagen.plan.Act$Quoted);
    public collagen.plan.SetBeforeAct(collagen.infer.equal.Term[], collagen.infer.equal.Term[], collagen.infer.equal.Term[]);
    public collagen.plan.SetBeforeAct(collagen.plan.Actor, collagen.plan.Act);
    public boolean requiresExplanation();
    public collagen.infer.tms.Proposition[] matches(collagen.infer.equal.Term, boolean);
    public java.lang.Boolean isApplicable();
    public java.lang.Boolean isAchieved();
    static {};
}

&gt; Notice that not only redundant getParameterOps() goes away, but also
getPropertyOps() and getResultOps(), which are also _wrong_ (see
next comment)
Ok, the attachment option doesn't show up until the next window... But I can't view them (View All is grayed out).

Anyways, I attached both source file for both the offending class and its parent, and the bad class file, and the class file for it's parent, so you can do a full decompile to see more info.

Here's the key info re the bad method entries (you can see the last one just leads to an infinite loop!).

I am hosed.  A workaround idea would be welcome... -CR


public collagen.infer.equal.Term$Slot[] getResultOps();
  Code:
   0:	aload_0
   1:	invokevirtual	#198; //Method collagen/plan/Act$Base.getResultOps:()[Lcollagen/infer/equal/Term$Slot;
   4:	areturn

public collagen.infer.equal.Term$Slot[] getPropertyOps();
  Code:
   0:	aload_0
   1:	invokevirtual	#203; //Method collagen/plan/Act_Builtin.getPropertyOps:()[Lcollagen/infer/equal/Term$Slot;
   4:	areturn

public collagen.infer.equal.Term$Slot[] getParameterOps();
  Code:
   0:	aload_0
   1:	invokevirtual	#205; //Method getParameterOps:()[Lcollagen/infer/equal/Term$Slot;
   4:	areturn

}




*** This bug has been marked as a duplicate of 126423 ***</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="126425" />
    <CreationDate amount="2006-02-03 17:12:00 -0500" />
    <DupId amount="" />
    <classification amount="Tools" />
    <Product amount="TPTP Probe Instrumentation" />
    <component amount="Platform.Execution.ProbekitBCI" />
    <Version amount="4.2" />
    <rep_platform amount="PC" />
    <op_sys amount="All" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Migrate the probekit test cases into TPTP</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>Migrate the probekit test cases into TPTP.  There should be enough test cases to cover most of the use cases.  Test cases should be automated as much as possible.

Allan, please assign this enhancement to me.
Part of bug#109684.
Test cases for probekit have been created.  They will be automated in I3.  I will automate as many of them as possible in I2. 
Automated AGR test cases as well as TPTP Plugin JUnit test cases have been committed to CVS in test-results/platform/org.eclipse.hyades.probekit.tests.
Verified and closing.</WithStack>
    <WithOutStack>Migrate the probekit test cases into TPTP.  There should be enough test cases to cover most of the use cases.  Test cases should be automated as much as possible.

Allan, please assign this enhancement to me.
Part of bug#109684.
Test cases for probekit have been created.  They will be automated in I3.  I will automate as many of them as possible in I2. 
Automated AGR test cases as well as TPTP Plugin JUnit test cases have been committed to CVS in test-results/platform/org.eclipse.hyades.probekit.tests.
Verified and closing.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="126426" />
    <CreationDate amount="2006-02-03 17:15:00 -0500" />
    <DupId amount="" />
    <classification amount="BIRT" />
    <Product amount="BIRT" />
    <component amount="Report Designer" />
    <Version amount="2.0.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>consistent tables look and feel</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="WONTFIX" />
    <WithStack>currently two different looks are being used for table-data modification.
See attachment 1 and 2.
Only the table 2 layout should be used.
Created attachment 34134
table structure 1

In Table structure 1, user had to click the add button to add parameters or filers to a table.
Created attachment 34135
table structure 2, should be used throughout

Table structure 2 allows the user to directly click on a line and set parameters etc. No add button to click to allow the operation. Thia approach should be consistent
We'll not do this because the requirement of accessbility. 
Using the recommended table will break accessibility.</WithStack>
    <WithOutStack>currently two different looks are being used for table-data modification.
See attachment 1 and 2.
Only the table 2 layout should be used.
Created attachment 34134
table structure 1

In Table structure 1, user had to click the add button to add parameters or filers to a table.
Created attachment 34135
table structure 2, should be used throughout

Table structure 2 allows the user to directly click on a line and set parameters etc. No add button to click to allow the operation. Thia approach should be consistent
We'll not do this because the requirement of accessbility. 
Using the recommended table will break accessibility.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="126427" />
    <CreationDate amount="2006-02-03 17:18:00 -0500" />
    <DupId amount="126420" />
    <classification amount="Eclipse" />
    <Product amount="PDE" />
    <component amount="UI" />
    <Version amount="3.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Exporting a feature fails due to "Unable to delete directory"</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="DUPLICATE" />
    <WithStack>Eclipse Version: 3.2.0
Build id: I20051215-1506

I have a feature that includes about 40 plugins. About 90% of the time, when I export the feature, I get this error ending with "Unable to delete directory .....\temp.folder\myplugin.jar.bin"

C:\eclipse\workspaces\workspace\com.yyyy.yyyy.feature\build.xml:184: The following error occurred while executing this line:
C:\eclipse\workspaces\workspace\com.yyyy.yyyy.feature\build.xml:35: The following error occurred while executing this line:
C:\eclipse\workspaces\workspace\com.yyyy.yyyy\build.xml:88: The following error occurred while executing this line:
C:\eclipse\workspaces\workspace\com.yyyy.yyyy\build.xml:76: Unable to delete directory C:\eclipse\workspaces\workspace\com.yyyy.yyyy\temp.folder\myplugin.jar.bin


I can successfully export the myplugin plugin on its own. 

I cannot construct a simple testcase to repo the problem. This seems like a timing issue due to the number of plugins involved??

If I look in the filesystem under C:\eclipse\workspaces\workspace\com.yyyy.yyyy, temp.folder is not there.


*** This bug has been marked as a duplicate of 126420 ***</WithStack>
    <WithOutStack>Eclipse Version: 3.2.0
Build id: I20051215-1506

I have a feature that includes about 40 plugins. About 90% of the time, when I export the feature, I get this error ending with "Unable to delete directory .....\temp.folder\myplugin.jar.bin"

C:\eclipse\workspaces\workspace\com.yyyy.yyyy.feature\build.xml:184: The following error occurred while executing this line:
C:\eclipse\workspaces\workspace\com.yyyy.yyyy.feature\build.xml:35: The following error occurred while executing this line:
C:\eclipse\workspaces\workspace\com.yyyy.yyyy\build.xml:88: The following error occurred while executing this line:
C:\eclipse\workspaces\workspace\com.yyyy.yyyy\build.xml:76: Unable to delete directory C:\eclipse\workspaces\workspace\com.yyyy.yyyy\temp.folder\myplugin.jar.bin


I can successfully export the myplugin plugin on its own. 

I cannot construct a simple testcase to repo the problem. This seems like a timing issue due to the number of plugins involved??

If I look in the filesystem under C:\eclipse\workspaces\workspace\com.yyyy.yyyy, temp.folder is not there.


*** This bug has been marked as a duplicate of 126420 ***</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="126428" />
    <CreationDate amount="2006-02-03 17:22:00 -0500" />
    <DupId amount="" />
    <classification amount="BIRT" />
    <Product amount="BIRT" />
    <component amount="Report Designer" />
    <Version amount="2.0.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P1" />
    <bug_severity amount="enhancement" />
    <Summery>"..." in buttons</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="VERIFIED" />
    <resolution amount="FIXED" />
    <WithStack>All the buttons captions that will invoke dialogs should be followed by the . For example all the Browse buttons, Expression Builder Buttons, Add buttons etc
 Identified locations where the change is needed:
 Property Editor: Browse button for the Preview Image in report properties
 Property Editor: Add button for Highlighting Rules
 Style Dialog: Browse button for Background Image
 Style Dialog: Add and Edit buttons for Map Rules
 New Report Dialog Step 3: Browse button
I've fixed it
Verify on build 20060220
verified in 20060302</WithStack>
    <WithOutStack>All the buttons captions that will invoke dialogs should be followed by the . For example all the Browse buttons, Expression Builder Buttons, Add buttons etc
 Identified locations where the change is needed:
 Property Editor: Browse button for the Preview Image in report properties
 Property Editor: Add button for Highlighting Rules
 Style Dialog: Browse button for Background Image
 Style Dialog: Add and Edit buttons for Map Rules
 New Report Dialog Step 3: Browse button
I've fixed it
Verify on build 20060220
verified in 20060302</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="126429" />
    <CreationDate amount="2006-02-03 17:37:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="UI" />
    <Version amount="3.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="major" />
    <Summery>[ActivityMgmt] Activities should allow default enablement to be controlled by product definition</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="3">
      <Enumeration lines="3">
        <Lines>
          <Line>1- bugzilla.activity.repro.ui -- Defines a simple wizard that doesn't do anything. We need it because this will be the UI we'll try to toggle on/off with capabilities</Line>
          <Line>2- bugzilla.activity.repro.activity -- Defines an activity category, activity, and an activity pattern binding that binds to the wizard defined in bugzilla.activity.repro.ui</Line>
          <Line>3- bugzilla.activity.repro.enablement -- Just defines a default enablement for the activity defined in bugzilla.activity.repro.activity</Line>
        </Lines>
      </Enumeration>
      <Enumeration lines="4">
        <Lines>
          <Line>1- Add the bugzilla.activity.repro.ui plugin to the plugins directory and start Eclipse. RESULT (EXPECTED): A wizard category, "126429," is added with one wizard, "126429 Repro."</Line>
          <Line>2- Add the bugzilla.activity.repro.activity plugin to the plugins directory and restart Eclipse. RESULT (EXPECTED): The wizard category, "126429," is no longer visible by default. A new capability preference category, "126429 Repro Activities," is added and unchecked by deafult.</Line>
          <Line>3. Add the bugzilla.activity.repro.enablement plugin to the plugins directory and restart Eclipse. RESULT (EXPECTED): The wizard category, "126429," and its wizard are visible. The capability preference category, "126429 Repro Activities," is checked by deafult.</Line>
          <Line>4. Edit eclipse/plugins/org.eclipse.platform/plugin_customization.ini file to set the default capability preference key "org.eclipse.ui.workbench/UIActivities.bugzilla.activity.repro.activity.activity" to false (see attached). Restart Eclipse</Line>
        </Lines>
      </Enumeration>
      <Enumeration lines="11">
        <Lines>
          <Line>- not "plugins" folder, but "dropins",</Line>
          <Line>- the signature information has to be removed from modified org.eclipse.sdk, or it has to be rebuild taking qualifier into account;</Line>
          <Line>- org.eclipse.platform vs org.eclipse.sdk - note that .ini file in platform has this:</Line>
          <Line># WARNING: This file defines the preference overrides for the Platform build</Line>
          <Line># (the one with no JDT or PDE), not the SDK build (aka the IDE).</Line>
          <Line># For the SDK build, use the plugin_customization.ini file in the</Line>
          <Line># org.eclipse.sdk plug-in instead.)</Line>
          <Line>Created attachment 192476</Line>
          <Line>Fix for restoring default activity enablement</Line>
          <Line>Patch applied to CVS Head.</Line>
          <Line>Verified in I20110425-1800.</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="VERIFIED" />
    <resolution amount="FIXED" />
    <WithStack>When composing a product out of various Eclipse distributions, such as Eclipse Platform SDK and WebTools, it is often desirable to control which activities are enabled by default in order to create an initial product experience that's less overwhelming and more relevant to the product usecases.

Currently, if the someone (like the author of the activity) turns on default enablement via the &lt;defaultEnablement&gt; element of the org.eclipse.ui.activities extension point, there is nothing that the end-product can do to change that. It would be very useful to be able to override default enablement for activities via product properties (IProduct.getProperty()).

Can this be addressed in the 3.2 timeframe? I can help (provide a patch) if needed.
We wont have time to address this in 3.2 as our API freeze is this week.  However, I believe you could already achieve this behavior by preference overrides.  Take a look at how the activity state is persisted in preferences and simply provide a plugin_customization.ini that sets the enabled state to the activities that you desire.

(Incidentally, I believe there is another PR in the Activities sphere that suggests only considering defaultEnablement elements from the plug-in that contains the product definition that is currently running.  That might be a more elegant way to achieve what you desire.  I can't find it at the moment but if I do I might mark this bug as a dupe of it.)
Marking as WONTFIX - this can be accomplished via preference overrides.
Could you expand on "this can be accomplished via preference overrides" or point me at the area of docs that talks about preference overrides?
Please see the doc at http://help.eclipse.org/help21/index.jsp?topic=/org.eclipse.platform.doc.isv/guide/product_config.htm

Basically, you'd add lines to the plugin_customization.ini like the following:

org.eclipse.ui.workbench/UIActivities.&lt;activityid&gt;=true|false

this would cause the given activity to default to the specified enablement 
Created attachment 70249
Plugins and plugin_customization.ini file for repro case

Repro case showing that plugin_customization.ini cannot be used to counter a default enablement extension
To test the idea that plugin_customization.ini could be used to counter a default enablement extension, I created three plugins to repro. The attached zip file contains each of these plugins:
1- bugzilla.activity.repro.ui -- Defines a simple wizard that doesn't do anything. We need it because this will be the UI we'll try to toggle on/off with capabilities
2- bugzilla.activity.repro.activity -- Defines an activity category, activity, and an activity pattern binding that binds to the wizard defined in bugzilla.activity.repro.ui
3- bugzilla.activity.repro.enablement -- Just defines a default enablement for the activity defined in bugzilla.activity.repro.activity

To repro:
1- Add the bugzilla.activity.repro.ui plugin to the plugins directory and start Eclipse. RESULT (EXPECTED): A wizard category, "126429," is added with one wizard, "126429 Repro." 
2- Add the bugzilla.activity.repro.activity plugin to the plugins directory and restart Eclipse. RESULT (EXPECTED): The wizard category, "126429," is no longer visible by default. A new capability preference category, "126429 Repro Activities," is added and unchecked by deafult. 
3. Add the bugzilla.activity.repro.enablement plugin to the plugins directory and restart Eclipse. RESULT (EXPECTED): The wizard category, "126429," and its wizard are visible. The capability preference category, "126429 Repro Activities," is checked by deafult. 
4. Edit eclipse/plugins/org.eclipse.platform/plugin_customization.ini file to set the default capability preference key "org.eclipse.ui.workbench/UIActivities.bugzilla.activity.repro.activity.activity" to false (see attached). Restart Eclipse

EXPECTED: The wizard category, "126429," is no longer visible by default. The capability preference category, "126429 Repro Activities," is unchecked by deafult. 

ACTUAL: The wizard category, "126429," and its wizard are visible. The capability preference category, "126429 Repro Activities," is checked by deafult. 

To verify that the plugin_customization.ini file preferences are getting picked up in my environment I added an entry to change the default intro page theme and got the expected result (the MESH theme instead of CIRCLES). For each restart in the above repro steps, I used a fresh workspace.

Question: Can trigger point advisors disable capabilities that are otherwise set to default enablement?


Suggest we re-open this one
Re-opening based on information that the described facility does not work in this scenario.
I just learned about this issue, and it seems to be nasty ! 

Product builders should always be able to control default activity state. And, as per comment 4 it looks like a mechanism to support this was designed but it doesn't work.

Based on this information I'm marking this as a bug rather than enhancement request, and I'm marking severity Major unless somebody can come up with a workaround for the situation (not being able to control what's visible in my product is a major loss of functionality).

I'd really like to see this addressed in 3.7 ... Kosta, does your comment 0 offer to provide a patch still stand?
&gt; Kosta, does your comment 0 offer to provide a patch still stand?

I am afraid that the offer has expired. I am no longer working on the product where this was relevant.
I retested the steps in comment 6 and it seems to work for me.  I had to put the plugin_customization.ini into org.eclipse.sdk instead of org.eclipse.platform, but I guess that depends on the installation.
What is not working is Restore Defaults in the Capabilities preferences page.  This always resets to the default enablement configured via plugin.xml and does not consider preference defaults.  'OK' stores the enablement state in the instance preferences so that plugin_customization.ini no longer works.
I think the original issue has been fixed, probably related to bug 184783.

(In reply to comment #10)
&gt; I retested the steps in comment 6 and it seems to work for me.
...
&gt; This always resets to the default enablement configured via plugin.xml and does
&gt; not consider preference defaults.

I got the same - customization file works, but not reset to defaults.

(Note that original steps have to be slightly modified to account for p2:
- not "plugins" folder, but "dropins",
- the signature information has to be removed from modified org.eclipse.sdk, or it has to be rebuild taking qualifier into account;
- org.eclipse.platform vs org.eclipse.sdk - note that .ini file in platform has this:
# WARNING: This file defines the preference overrides for the Platform build 
# (the one with no JDT or PDE), not the SDK build (aka the IDE).  
# For the SDK build, use the plugin_customization.ini file in the 
# org.eclipse.sdk plug-in instead.)
Created attachment 192476
Fix for restoring default activity enablement
Patch applied to CVS Head.
Verified in I20110425-1800.</WithStack>
    <WithOutStack>When composing a product out of various Eclipse distributions, such as Eclipse Platform SDK and WebTools, it is often desirable to control which activities are enabled by default in order to create an initial product experience that's less overwhelming and more relevant to the product usecases.

Currently, if the someone (like the author of the activity) turns on default enablement via the &lt;defaultEnablement&gt; element of the org.eclipse.ui.activities extension point, there is nothing that the end-product can do to change that. It would be very useful to be able to override default enablement for activities via product properties (IProduct.getProperty()).

Can this be addressed in the 3.2 timeframe? I can help (provide a patch) if needed.
We wont have time to address this in 3.2 as our API freeze is this week.  However, I believe you could already achieve this behavior by preference overrides.  Take a look at how the activity state is persisted in preferences and simply provide a plugin_customization.ini that sets the enabled state to the activities that you desire.

(Incidentally, I believe there is another PR in the Activities sphere that suggests only considering defaultEnablement elements from the plug-in that contains the product definition that is currently running.  That might be a more elegant way to achieve what you desire.  I can't find it at the moment but if I do I might mark this bug as a dupe of it.)
Marking as WONTFIX - this can be accomplished via preference overrides.
Could you expand on "this can be accomplished via preference overrides" or point me at the area of docs that talks about preference overrides?
Please see the doc at http://help.eclipse.org/help21/index.jsp?topic=/org.eclipse.platform.doc.isv/guide/product_config.htm

Basically, you'd add lines to the plugin_customization.ini like the following:

org.eclipse.ui.workbench/UIActivities.&lt;activityid&gt;=true|false

this would cause the given activity to default to the specified enablement 
Created attachment 70249
Plugins and plugin_customization.ini file for repro case

Repro case showing that plugin_customization.ini cannot be used to counter a default enablement extension
To test the idea that plugin_customization.ini could be used to counter a default enablement extension, I created three plugins to repro. The attached zip file contains each of these plugins:
1- bugzilla.activity.repro.ui -- Defines a simple wizard that doesn't do anything. We need it because this will be the UI we'll try to toggle on/off with capabilities
2- bugzilla.activity.repro.activity -- Defines an activity category, activity, and an activity pattern binding that binds to the wizard defined in bugzilla.activity.repro.ui
3- bugzilla.activity.repro.enablement -- Just defines a default enablement for the activity defined in bugzilla.activity.repro.activity

To repro:
1- Add the bugzilla.activity.repro.ui plugin to the plugins directory and start Eclipse. RESULT (EXPECTED): A wizard category, "126429," is added with one wizard, "126429 Repro." 
2- Add the bugzilla.activity.repro.activity plugin to the plugins directory and restart Eclipse. RESULT (EXPECTED): The wizard category, "126429," is no longer visible by default. A new capability preference category, "126429 Repro Activities," is added and unchecked by deafult. 
3. Add the bugzilla.activity.repro.enablement plugin to the plugins directory and restart Eclipse. RESULT (EXPECTED): The wizard category, "126429," and its wizard are visible. The capability preference category, "126429 Repro Activities," is checked by deafult. 
4. Edit eclipse/plugins/org.eclipse.platform/plugin_customization.ini file to set the default capability preference key "org.eclipse.ui.workbench/UIActivities.bugzilla.activity.repro.activity.activity" to false (see attached). Restart Eclipse

EXPECTED: The wizard category, "126429," is no longer visible by default. The capability preference category, "126429 Repro Activities," is unchecked by deafult. 

ACTUAL: The wizard category, "126429," and its wizard are visible. The capability preference category, "126429 Repro Activities," is checked by deafult. 

To verify that the plugin_customization.ini file preferences are getting picked up in my environment I added an entry to change the default intro page theme and got the expected result (the MESH theme instead of CIRCLES). For each restart in the above repro steps, I used a fresh workspace.

Question: Can trigger point advisors disable capabilities that are otherwise set to default enablement?


Suggest we re-open this one
Re-opening based on information that the described facility does not work in this scenario.
I just learned about this issue, and it seems to be nasty ! 

Product builders should always be able to control default activity state. And, as per comment 4 it looks like a mechanism to support this was designed but it doesn't work.

Based on this information I'm marking this as a bug rather than enhancement request, and I'm marking severity Major unless somebody can come up with a workaround for the situation (not being able to control what's visible in my product is a major loss of functionality).

I'd really like to see this addressed in 3.7 ... Kosta, does your comment 0 offer to provide a patch still stand?
&gt; Kosta, does your comment 0 offer to provide a patch still stand?

I am afraid that the offer has expired. I am no longer working on the product where this was relevant.
I retested the steps in comment 6 and it seems to work for me.  I had to put the plugin_customization.ini into org.eclipse.sdk instead of org.eclipse.platform, but I guess that depends on the installation.
What is not working is Restore Defaults in the Capabilities preferences page.  This always resets to the default enablement configured via plugin.xml and does not consider preference defaults.  'OK' stores the enablement state in the instance preferences so that plugin_customization.ini no longer works.
I think the original issue has been fixed, probably related to bug 184783.

(In reply to comment #10)
&gt; I retested the steps in comment 6 and it seems to work for me.
...
&gt; This always resets to the default enablement configured via plugin.xml and does
&gt; not consider preference defaults.

I got the same - customization file works, but not reset to defaults.

(Note that original steps have to be slightly modified to account for p2:
- not "plugins" folder, but "dropins",
- the signature information has to be removed from modified org.eclipse.sdk, or it has to be rebuild taking qualifier into account;
- org.eclipse.platform vs org.eclipse.sdk - note that .ini file in platform has this:
# WARNING: This file defines the preference overrides for the Platform build 
# (the one with no JDT or PDE), not the SDK build (aka the IDE).  
# For the SDK build, use the plugin_customization.ini file in the 
# org.eclipse.sdk plug-in instead.)
Created attachment 192476
Fix for restoring default activity enablement
Patch applied to CVS Head.
Verified in I20110425-1800.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="126430" />
    <CreationDate amount="2006-02-03 17:37:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="JDT" />
    <component amount="Debug" />
    <Version amount="3.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>local variables hidden from Variables view during debug</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="WORKSFORME" />
    <WithStack>I've found a time when specific variables may be hidden from the Variables view when debugging a Java program. This occurs when a local variable has not been instantiated yet, and later in the code the variable will either be instantiated or an exception will be thrown. Since the only two options are 1) instantiate the variable, or 2) disrupt flow of execution with an exception, it is known with certainty that anywhere past the throwing of the exception the variable must have a value and its value can be used. Even so, the debugger doesn't display this local variable in the Variables view. The variable can't be resolved in the Expressions view either. I will add some code as an example.

I've tested this behavior in both Eclipse 3.1.0 and 3.1.2.
Created attachment 34136
Example code

This code, if debugged will never show the local variable named "hidden" in either the Variables view nor the Expressions view.
works for me on 3.2. There were some refresh issues in the variables view in 3.1.x releases that have been solved in the 3.2 stream.
Created attachment 34481
Screenshot of bug

As can be seen from this screenshot, the local variable "hidden" is not displayed in the Variables view in the top right corner, but the variables "i" and "args" are displayed.
Perhaps I did not adequately describe the bug, or it was otherwise misunderstood by the one who marked this bug RESOLVED, but this bug has not been fixed in 3.2.  The attached screenshot was taken when using the most recent nightly build (20060209), though I neglected to mention that in its description.  Previous to this I tested the problem on 3.2M4 and got the same results.  If it does happen to be working for you, could you please specify what hardware, java version, OS, and Eclipse version you were using? Thanks.
This also works for me on I20060210-0800, using jdk1.4.2_08 and 1.5.0_04.
Sorry for any added hassle for reopening the bug. It does work on the newest versions.  Thanks for the patience.  Thanks, Eclipse Team for amazing work!
I have experienced (and am currently experiencing it now) both on my 3.1.2 and 3.2 RC 4 installation.  It seems to be project specific items and not pervasive through the whole of the installation.

The variables panel only displays the "this" instance and does _not_ display method scoped / local variable.

This is a serious problem for us - it's entirely crippling our productivity.

We are ready to provide resources to whomever gets assigned this bug to see it resolved as quickly as possible.


Sounds like you are missing debug attributes. When varaiable debug attributes are missing, locals/args are not displayed/available in the variables view. Ensure you are compiling with the following preference turned on: "Java &gt; Compiler &gt; Add variable attributes to generated class files (used by the debugger)".

Note that this bug is considered closed/resolved. Please open a new bug with steps to reproduce if the problem persists.</WithStack>
    <WithOutStack>I've found a time when specific variables may be hidden from the Variables view when debugging a Java program. This occurs when a local variable has not been instantiated yet, and later in the code the variable will either be instantiated or an exception will be thrown. Since the only two options are 1) instantiate the variable, or 2) disrupt flow of execution with an exception, it is known with certainty that anywhere past the throwing of the exception the variable must have a value and its value can be used. Even so, the debugger doesn't display this local variable in the Variables view. The variable can't be resolved in the Expressions view either. I will add some code as an example.

I've tested this behavior in both Eclipse 3.1.0 and 3.1.2.
Created attachment 34136
Example code

This code, if debugged will never show the local variable named "hidden" in either the Variables view nor the Expressions view.
works for me on 3.2. There were some refresh issues in the variables view in 3.1.x releases that have been solved in the 3.2 stream.
Created attachment 34481
Screenshot of bug

As can be seen from this screenshot, the local variable "hidden" is not displayed in the Variables view in the top right corner, but the variables "i" and "args" are displayed.
Perhaps I did not adequately describe the bug, or it was otherwise misunderstood by the one who marked this bug RESOLVED, but this bug has not been fixed in 3.2.  The attached screenshot was taken when using the most recent nightly build (20060209), though I neglected to mention that in its description.  Previous to this I tested the problem on 3.2M4 and got the same results.  If it does happen to be working for you, could you please specify what hardware, java version, OS, and Eclipse version you were using? Thanks.
This also works for me on I20060210-0800, using jdk1.4.2_08 and 1.5.0_04.
Sorry for any added hassle for reopening the bug. It does work on the newest versions.  Thanks for the patience.  Thanks, Eclipse Team for amazing work!
I have experienced (and am currently experiencing it now) both on my 3.1.2 and 3.2 RC 4 installation.  It seems to be project specific items and not pervasive through the whole of the installation.

The variables panel only displays the "this" instance and does _not_ display method scoped / local variable.

This is a serious problem for us - it's entirely crippling our productivity.

We are ready to provide resources to whomever gets assigned this bug to see it resolved as quickly as possible.


Sounds like you are missing debug attributes. When varaiable debug attributes are missing, locals/args are not displayed/available in the variables view. Ensure you are compiling with the following preference turned on: "Java &gt; Compiler &gt; Add variable attributes to generated class files (used by the debugger)".

Note that this bug is considered closed/resolved. Please open a new bug with steps to reproduce if the problem persists.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="126431" />
    <CreationDate amount="2006-02-03 17:38:00 -0500" />
    <DupId amount="" />
    <classification amount="WebTools" />
    <Product amount="WTP Webservices" />
    <component amount="jst.ws" />
    <Version amount="1.0.1" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows 2000" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Generate a proxy stay checked during disabled</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="INVALID" />
    <WithStack>This is an usability issue reported by an user.  When "Install Web service on server" get de-selected, "Start Web service in Web project" and "Generate a proxy" both get disabled, but only "Start Web service in Web project" get unchecked ("Generate a proxy" stays checked).  This produces a false impression to the user such that he/she can still "Generate a proxy".
Joan, over to you, though with the changes we are planning to page one, this issue should become moot.
With the new page 1 UI this is no longer an issue.

Thanks, Joan.
Verified this is not an issue in the WTP 1.5 Web service wizard
Closed.</WithStack>
    <WithOutStack>This is an usability issue reported by an user.  When "Install Web service on server" get de-selected, "Start Web service in Web project" and "Generate a proxy" both get disabled, but only "Start Web service in Web project" get unchecked ("Generate a proxy" stays checked).  This produces a false impression to the user such that he/she can still "Generate a proxy".
Joan, over to you, though with the changes we are planning to page one, this issue should become moot.
With the new page 1 UI this is no longer an issue.

Thanks, Joan.
Verified this is not an issue in the WTP 1.5 Web service wizard
Closed.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="126432" />
    <CreationDate amount="2006-02-03 17:38:00 -0500" />
    <DupId amount="" />
    <classification amount="Tools" />
    <Product amount="TPTP Profiling" />
    <component amount="Platform.UI" />
    <Version amount="4.3" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="enhancement" />
    <Summery>[Probekit UI] Get rid of the Filter tab for the 'Probe' profiling type</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="WONTFIX" />
    <WithStack>Other than the global filter set, the probekit profiling type has a Filter tab of its own, which can be used to override the global filter set.  This tab should be removed, since it introduces inconsistency in the UI.  This is the only profiling type that has its own specific filter set.  If specific filter sets are to be implemented then they should be present for all profiling types and not just the probekit profiling type.
Part of an enhancement (bug#109684).
We've decided not to remove the custom filter tab, since it causes the toolkit to lose certain functionalities.  I'll leave this bug open, however, as a placeholder for making UI improvements for the probekit filters.
Plan keyward is reserved for project lead only. Also Defects should not have this designation.
Update severity to enhancement and moving target for 4.3

The fix requires UI and PII changes and it should be reviewed by the usability team
Not in plan for 4.4; Moving target to future
As of TPTP 4.6.0, TPTP is in maintenance mode and focusing on improving quality by resolving relevant defects and increasing test coverage through test creation, automation, Build Verification Tests (BVTs), and expanded run-time execution. As such, TPTP is not delivering enhancements. As part of the TPTP Bugzilla housecleaning process (see http://wiki.eclipse.org/Bugzilla_Housecleaning_Processes), this enhancement is resolved as WONTFIX. For this enhancement to be considered, please re-open with an attached patch including the Description Document (see http://www.eclipse.org/tptp/home/documents/process/development/description_documents.html), code (see http://www.eclipse.org/tptp/home/documents/resources/TPTPDevGuide.htm), and test cases (see http://www.eclipse.org/tptp/home/documents/process/TPTP_Testing_Strategy.html).
As of TPTP 4.6.0, TPTP is in maintenance mode and focusing on improving quality by resolving relevant defects and increasing test coverage through test creation, automation, Build Verification Tests (BVTs), and expanded run-time execution. As such, TPTP is not delivering enhancements. As part of the TPTP Bugzilla housecleaning process (see http://wiki.eclipse.org/Bugzilla_Housecleaning_Processes), this enhancement is resolved as WONTFIX. For this enhancement to be considered, please re-open with an attached patch including the Description Document (see http://www.eclipse.org/tptp/home/documents/process/development/description_documents.html), code (see http://www.eclipse.org/tptp/home/documents/resources/TPTPDevGuide.htm), and test cases (see http://www.eclipse.org/tptp/home/documents/process/TPTP_Testing_Strategy.html).
As of TPTP 4.6.0, TPTP is in maintenance mode and focusing on improving quality by resolving relevant enhancements/defects and increasing test coverage through test creation, automation, Build Verification Tests (BVTs), and expanded run-time execution. As part of the TPTP Bugzilla housecleaning process (see http://wiki.eclipse.org/Bugzilla_Housecleaning_Processes), this enhancement/defect is verified/closed by the Project Lead since this enhancement/defect has been resolved and unverified for more than 1 year and considered to be fixed. If this enhancement/defect is still unresolved and reproducible in the latest TPTP release (http://www.eclipse.org/tptp/home/downloads/), please re-open.</WithStack>
    <WithOutStack>Other than the global filter set, the probekit profiling type has a Filter tab of its own, which can be used to override the global filter set.  This tab should be removed, since it introduces inconsistency in the UI.  This is the only profiling type that has its own specific filter set.  If specific filter sets are to be implemented then they should be present for all profiling types and not just the probekit profiling type.
Part of an enhancement (bug#109684).
We've decided not to remove the custom filter tab, since it causes the toolkit to lose certain functionalities.  I'll leave this bug open, however, as a placeholder for making UI improvements for the probekit filters.
Plan keyward is reserved for project lead only. Also Defects should not have this designation.
Update severity to enhancement and moving target for 4.3

The fix requires UI and PII changes and it should be reviewed by the usability team
Not in plan for 4.4; Moving target to future
As of TPTP 4.6.0, TPTP is in maintenance mode and focusing on improving quality by resolving relevant defects and increasing test coverage through test creation, automation, Build Verification Tests (BVTs), and expanded run-time execution. As such, TPTP is not delivering enhancements. As part of the TPTP Bugzilla housecleaning process (see http://wiki.eclipse.org/Bugzilla_Housecleaning_Processes), this enhancement is resolved as WONTFIX. For this enhancement to be considered, please re-open with an attached patch including the Description Document (see http://www.eclipse.org/tptp/home/documents/process/development/description_documents.html), code (see http://www.eclipse.org/tptp/home/documents/resources/TPTPDevGuide.htm), and test cases (see http://www.eclipse.org/tptp/home/documents/process/TPTP_Testing_Strategy.html).
As of TPTP 4.6.0, TPTP is in maintenance mode and focusing on improving quality by resolving relevant defects and increasing test coverage through test creation, automation, Build Verification Tests (BVTs), and expanded run-time execution. As such, TPTP is not delivering enhancements. As part of the TPTP Bugzilla housecleaning process (see http://wiki.eclipse.org/Bugzilla_Housecleaning_Processes), this enhancement is resolved as WONTFIX. For this enhancement to be considered, please re-open with an attached patch including the Description Document (see http://www.eclipse.org/tptp/home/documents/process/development/description_documents.html), code (see http://www.eclipse.org/tptp/home/documents/resources/TPTPDevGuide.htm), and test cases (see http://www.eclipse.org/tptp/home/documents/process/TPTP_Testing_Strategy.html).
As of TPTP 4.6.0, TPTP is in maintenance mode and focusing on improving quality by resolving relevant enhancements/defects and increasing test coverage through test creation, automation, Build Verification Tests (BVTs), and expanded run-time execution. As part of the TPTP Bugzilla housecleaning process (see http://wiki.eclipse.org/Bugzilla_Housecleaning_Processes), this enhancement/defect is verified/closed by the Project Lead since this enhancement/defect has been resolved and unverified for more than 1 year and considered to be fixed. If this enhancement/defect is still unresolved and reproducible in the latest TPTP release (http://www.eclipse.org/tptp/home/downloads/), please re-open.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="126433" />
    <CreationDate amount="2006-02-03 17:42:00 -0500" />
    <DupId amount="133671" />
    <classification amount="WebTools" />
    <Product amount="WTP Source Editing" />
    <component amount="jst.jsp" />
    <Version amount="1.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows 2000" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>JSP validation often does not update its error markers</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="DUPLICATE" />
    <WithStack>If you remove the validation errors from a jsp, the error markers often stay at the previous error location (and in the problems view).

Then it just helps, if you cut the whole jsp-content into the clipboard, save the empty file and paste the content back into the jsp.

Sometimes even that doesn't help and you have to cut the jsp-content into the clipboard, delete the file in the package-explorer/navigator, create a new jsp with same name and paste the content back into the jsp.

Unfortunately I haven't found a rule so far, under which circumstances those problems occur. Sometimes the validation updates its markers right away, sometimes you have the mentioned trouble to update / get rid of the markers.
Mass transfer from pa to dw. Needs more triage. 

The description of this bug sounds like bug 133671, so I'm going to resolve this bug as a duplicate.

*** This bug has been marked as a duplicate of bug 133671 ***
.</WithStack>
    <WithOutStack>If you remove the validation errors from a jsp, the error markers often stay at the previous error location (and in the problems view).

Then it just helps, if you cut the whole jsp-content into the clipboard, save the empty file and paste the content back into the jsp.

Sometimes even that doesn't help and you have to cut the jsp-content into the clipboard, delete the file in the package-explorer/navigator, create a new jsp with same name and paste the content back into the jsp.

Unfortunately I haven't found a rule so far, under which circumstances those problems occur. Sometimes the validation updates its markers right away, sometimes you have the mentioned trouble to update / get rid of the markers.
Mass transfer from pa to dw. Needs more triage. 

The description of this bug sounds like bug 133671, so I'm going to resolve this bug as a duplicate.

*** This bug has been marked as a duplicate of bug 133671 ***
.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="126434" />
    <CreationDate amount="2006-02-03 18:10:00 -0500" />
    <DupId amount="118029" />
    <classification amount="WebTools" />
    <Product amount="WTP Source Editing" />
    <component amount="jst.jsp" />
    <Version amount="1.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows 2000" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>File search with focus on JSP editor and project scope does not work anymore</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="DUPLICATE" />
    <WithStack>With focus on the JSP editor, open the search dialog (Ctrl + H), "File Search" tab, select "Enclosing Projects"...
-&gt; The search always finishes immediately with no results.

Moving the focus to the Navigator view or Package Explorer (same File/Project selected) and doing the same search shows the correct results.


*** This bug has been marked as a duplicate of 118029 ***
This bug was moved to 'closed' state, since it is so old is is assumed its dup, invalid, or worksforme resolution is no longer in qustion and the bugzilla needs no further attention. Feel free to re-open, or open a new bug, if this semi-automatic processing was done in error in this case.</WithStack>
    <WithOutStack>With focus on the JSP editor, open the search dialog (Ctrl + H), "File Search" tab, select "Enclosing Projects"...
-&gt; The search always finishes immediately with no results.

Moving the focus to the Navigator view or Package Explorer (same File/Project selected) and doing the same search shows the correct results.


*** This bug has been marked as a duplicate of 118029 ***
This bug was moved to 'closed' state, since it is so old is is assumed its dup, invalid, or worksforme resolution is no longer in qustion and the bugzilla needs no further attention. Feel free to re-open, or open a new bug, if this semi-automatic processing was done in error in this case.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="126435" />
    <CreationDate amount="2006-02-03 18:15:00 -0500" />
    <DupId amount="" />
    <classification amount="Tools" />
    <Product amount="TPTP Testing" />
    <component amount="Platform.UI.ReportingInfrastructure" />
    <Version amount="4.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="enhancement" />
    <Summery>Convert trace files to BIRT reports without loading them in TPTP's model</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="WONTFIX" />
    <WithStack>MOTIVATION:

The bottleneck in TPTP's profiler are the loaders which populate TPTP's model.  As an experiment I tried profiling a runtime instance of the workbench on my desktop *without any filters*.  First I tried profiling in standalone mode by directing all profiling data to a file.  It took approximately 4 minutes for the workbench to start.  It was pretty slow to work with, but it was still possible.  Then I tried profiling the samething by sending the profiling data directly to the workbench.  I left the computer running for more than 2 hours and it was still trying to launch the workbench.  Eventually, I gave up and killed the process.

There are generally a lot of complaints about the profiler's performance and its ability to scale.  Right now, it's hardly possible to profile large applications.  If we allow the user to bypass the trace data from being populated to TPTP's model and yet generate useful profiling reports then we can allow them to profile large applications.

ENHANCEMENT:

Sheldon has recently implemented a method for generating BIRT reports from TPTP's models.  This feature is a request to providde a mechanism for directly converting trace data to BIRT reports.  The user should be able to send all profiling data to a file and use this file to generate BIRT reports without having to import the trace file into the workbench.  This can perhaps be implemented as an XSLT transformation, which transforms the XML trace file into the expected XML format for BIRT.

This feature will also satisfy the users that are only interested in BIRT reports.  With this feature they can go directly from profiling data to BIRT reports rather than from profiling data to TPTP reports and then to BIRT reports.
I also would like to see a clean way for import/export trace files to XML/CVS/HTML ... 
This would greatly help to integrate the results of "headless" profiling sessions with e.g. BIRT and such thinks like automated performance tests.
(In reply to comment #1)
I am not sure, if you are talking about generating the BIRT Reports in HTML format in headless way, from trace.trcxml data (headless profiling of applications) ?
If yes, this is what I require, I have several trace.trcxml files, which I need to parse and generate BIRT reports in a headless way.
Thanks.
As of TPTP 4.6.0, TPTP is in maintenance mode and focusing on improving quality by resolving relevant defects and increasing test coverage through test creation, automation, Build Verification Tests (BVTs), and expanded run-time execution. As such, TPTP is not delivering enhancements. As part of the TPTP Bugzilla housecleaning process (see http://wiki.eclipse.org/Bugzilla_Housecleaning_Processes), this enhancement is resolved as WONTFIX. For this enhancement to be considered, please re-open with an attached patch including the Description Document (see http://www.eclipse.org/tptp/home/documents/process/development/description_documents.html), code (see http://www.eclipse.org/tptp/home/documents/resources/TPTPDevGuide.htm), and test cases (see http://www.eclipse.org/tptp/home/documents/process/TPTP_Testing_Strategy.html).
As of TPTP 4.6.0, TPTP is in maintenance mode and focusing on improving quality by resolving relevant defects and increasing test coverage through test creation, automation, Build Verification Tests (BVTs), and expanded run-time execution. As such, TPTP is not delivering enhancements. As part of the TPTP Bugzilla housecleaning process (see http://wiki.eclipse.org/Bugzilla_Housecleaning_Processes), this enhancement is resolved as WONTFIX. For this enhancement to be considered, please re-open with an attached patch including the Description Document (see http://www.eclipse.org/tptp/home/documents/process/development/description_documents.html), code (see http://www.eclipse.org/tptp/home/documents/resources/TPTPDevGuide.htm), and test cases (see http://www.eclipse.org/tptp/home/documents/process/TPTP_Testing_Strategy.html).
As of TPTP 4.6.0, TPTP is in maintenance mode and focusing on improving quality by resolving relevant enhancements/defects and increasing test coverage through test creation, automation, Build Verification Tests (BVTs), and expanded run-time execution. As part of the TPTP Bugzilla housecleaning process (see http://wiki.eclipse.org/Bugzilla_Housecleaning_Processes), this enhancement/defect is verified/closed by the Project Lead since this enhancement/defect has been resolved and unverified for more than 1 year and considered to be fixed. If this enhancement/defect is still unresolved and reproducible in the latest TPTP release (http://www.eclipse.org/tptp/home/downloads/), please re-open.</WithStack>
    <WithOutStack>MOTIVATION:

The bottleneck in TPTP's profiler are the loaders which populate TPTP's model.  As an experiment I tried profiling a runtime instance of the workbench on my desktop *without any filters*.  First I tried profiling in standalone mode by directing all profiling data to a file.  It took approximately 4 minutes for the workbench to start.  It was pretty slow to work with, but it was still possible.  Then I tried profiling the samething by sending the profiling data directly to the workbench.  I left the computer running for more than 2 hours and it was still trying to launch the workbench.  Eventually, I gave up and killed the process.

There are generally a lot of complaints about the profiler's performance and its ability to scale.  Right now, it's hardly possible to profile large applications.  If we allow the user to bypass the trace data from being populated to TPTP's model and yet generate useful profiling reports then we can allow them to profile large applications.

ENHANCEMENT:

Sheldon has recently implemented a method for generating BIRT reports from TPTP's models.  This feature is a request to providde a mechanism for directly converting trace data to BIRT reports.  The user should be able to send all profiling data to a file and use this file to generate BIRT reports without having to import the trace file into the workbench.  This can perhaps be implemented as an XSLT transformation, which transforms the XML trace file into the expected XML format for BIRT.

This feature will also satisfy the users that are only interested in BIRT reports.  With this feature they can go directly from profiling data to BIRT reports rather than from profiling data to TPTP reports and then to BIRT reports.
I also would like to see a clean way for import/export trace files to XML/CVS/HTML ... 
This would greatly help to integrate the results of "headless" profiling sessions with e.g. BIRT and such thinks like automated performance tests.
(In reply to comment #1)
I am not sure, if you are talking about generating the BIRT Reports in HTML format in headless way, from trace.trcxml data (headless profiling of applications) ?
If yes, this is what I require, I have several trace.trcxml files, which I need to parse and generate BIRT reports in a headless way.
Thanks.
As of TPTP 4.6.0, TPTP is in maintenance mode and focusing on improving quality by resolving relevant defects and increasing test coverage through test creation, automation, Build Verification Tests (BVTs), and expanded run-time execution. As such, TPTP is not delivering enhancements. As part of the TPTP Bugzilla housecleaning process (see http://wiki.eclipse.org/Bugzilla_Housecleaning_Processes), this enhancement is resolved as WONTFIX. For this enhancement to be considered, please re-open with an attached patch including the Description Document (see http://www.eclipse.org/tptp/home/documents/process/development/description_documents.html), code (see http://www.eclipse.org/tptp/home/documents/resources/TPTPDevGuide.htm), and test cases (see http://www.eclipse.org/tptp/home/documents/process/TPTP_Testing_Strategy.html).
As of TPTP 4.6.0, TPTP is in maintenance mode and focusing on improving quality by resolving relevant defects and increasing test coverage through test creation, automation, Build Verification Tests (BVTs), and expanded run-time execution. As such, TPTP is not delivering enhancements. As part of the TPTP Bugzilla housecleaning process (see http://wiki.eclipse.org/Bugzilla_Housecleaning_Processes), this enhancement is resolved as WONTFIX. For this enhancement to be considered, please re-open with an attached patch including the Description Document (see http://www.eclipse.org/tptp/home/documents/process/development/description_documents.html), code (see http://www.eclipse.org/tptp/home/documents/resources/TPTPDevGuide.htm), and test cases (see http://www.eclipse.org/tptp/home/documents/process/TPTP_Testing_Strategy.html).
As of TPTP 4.6.0, TPTP is in maintenance mode and focusing on improving quality by resolving relevant enhancements/defects and increasing test coverage through test creation, automation, Build Verification Tests (BVTs), and expanded run-time execution. As part of the TPTP Bugzilla housecleaning process (see http://wiki.eclipse.org/Bugzilla_Housecleaning_Processes), this enhancement/defect is verified/closed by the Project Lead since this enhancement/defect has been resolved and unverified for more than 1 year and considered to be fixed. If this enhancement/defect is still unresolved and reproducible in the latest TPTP release (http://www.eclipse.org/tptp/home/downloads/), please re-open.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="126436" />
    <CreationDate amount="2006-02-03 18:55:00 -0500" />
    <DupId amount="" />
    <classification amount="Tools" />
    <Product amount="PTP" />
    <component amount="Photran.For Internal Use" />
    <Version amount="3.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Linux-GTK" />
    <priority amount="P5" />
    <bug_severity amount="normal" />
    <Summery>Outline parser can't handle / in several locations</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>The following statements all get the outline parser to give little information

148       FORMAT (/ ' *TestForBackup*  Backup due to too large a fractional ', 'change in core power.' / )
149       FORMAT ( / ' *TestForBackup*  Backup due to too large a fractional ', 'change in core power.' /)
150       FORMAT ( / ' *TestForBackup*  Backup due to too large a fractional change in core power.', // )

These result in a skull icon in the outline pane with the text "-1"

Similar constructs also generate errors:

         ictl(1:6) = ( / ictl1, ictl2, 1, 0, 0, 0 / )
         ictl(1:6) = (/ ictl1, ictl2, 1, 0, 0, 0 /)

The first line generates the skull with text:
"Error: Unexpected T_SLASH "/"

the second line generates the same error as above, a -1.
Created attachment 34139
Test Fortran File illustrating errors
 In the isolated test case attached the line:

   ictl(1:6) = (/ ictl1, ictl2, 1, 0, 0, 0 /)
 
   did not create any errors,  need to isolate what the other problem was...
Temporarily resolved via error production in 4.0 beta 2 -- revisit later
LATER/REMIND bugs are being automatically reopened as P5 because the LATER and REMIND resolutions are deprecated.
Fixed in CVS (via error production); closing</WithStack>
    <WithOutStack>The following statements all get the outline parser to give little information

148       FORMAT (/ ' *TestForBackup*  Backup due to too large a fractional ', 'change in core power.' / )
149       FORMAT ( / ' *TestForBackup*  Backup due to too large a fractional ', 'change in core power.' /)
150       FORMAT ( / ' *TestForBackup*  Backup due to too large a fractional change in core power.', // )

These result in a skull icon in the outline pane with the text "-1"

Similar constructs also generate errors:

         ictl(1:6) = ( / ictl1, ictl2, 1, 0, 0, 0 / )
         ictl(1:6) = (/ ictl1, ictl2, 1, 0, 0, 0 /)

The first line generates the skull with text:
"Error: Unexpected T_SLASH "/"

the second line generates the same error as above, a -1.
Created attachment 34139
Test Fortran File illustrating errors
 In the isolated test case attached the line:

   ictl(1:6) = (/ ictl1, ictl2, 1, 0, 0, 0 /)
 
   did not create any errors,  need to isolate what the other problem was...
Temporarily resolved via error production in 4.0 beta 2 -- revisit later
LATER/REMIND bugs are being automatically reopened as P5 because the LATER and REMIND resolutions are deprecated.
Fixed in CVS (via error production); closing</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="126437" />
    <CreationDate amount="2006-02-03 19:11:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="JDT" />
    <component amount="Debug" />
    <Version amount="3.1" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Incorrect error reporting in AbstractJavaLaunchConfigurationDelegate</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="VERIFIED" />
    <resolution amount="FIXED" />
    <WithStack>AbstractJavaLaunchConfigurationDelegate.verifyWorkingDirectory incorrectly reports the error on the path variable (which is null).
Fixed in AbstractJavaLaunchConfigurationDelegate.
Cleaned up spelling as well.
Marking fixed.
Verified.</WithStack>
    <WithOutStack>AbstractJavaLaunchConfigurationDelegate.verifyWorkingDirectory incorrectly reports the error on the path variable (which is null).
Fixed in AbstractJavaLaunchConfigurationDelegate.
Cleaned up spelling as well.
Marking fixed.
Verified.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="126438" />
    <CreationDate amount="2006-02-03 19:22:00 -0500" />
    <DupId amount="" />
    <classification amount="WebTools" />
    <Product amount="WTP Java EE Tools" />
    <component amount="jst.j2ee" />
    <Version amount="1.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="major" />
    <Summery>Classpath variables not resolved when publishing.</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="WORKSFORME" />
    <WithStack>I have a dynamic web project that includes some modules via classpath variables.  

Ex:
&lt;dependent-module deploy-path="/WEB-INF/lib" handle="module:/classpath/var/M2_REPO/commons-beanutils/commons-beanutils/1.7.0/commons-beanutils-1.7.0.jar"&gt;
&lt;dependency-type&gt;uses&lt;/dependency-type&gt;
&lt;/dependent-module&gt;


When I export the project as a WAR file then the variables are properly resolved, however if I try to "Run on Server" the web project then the I get a publishing failed dialog with the message that "Publishing failed
  Resource /M2_REPO/commons-beanutils/commons-beanutils/1.7.0/commons-beanutils-1.7.0.jar does not exist."

The beanutils jar is the 1st entry in the list.  If I rearrange the list then the next new entry fails.
What build are you on?
Version: 1.0.0
Build id: 200601131852

Is what shows up in the about box for the WTP feature.


Is "commons-beanutils" supposed to be duplicated in your path?  Is that the issue?
Perhaps not, the project seems to be doubled for all refs...
Sorry I didn't follow that.  commons-beanutils should show up only once in the war's WEB-INF/lib if that is what you mean.  And it does if I export the war.  Nonetheless, publishing doesn't resolve.
My mistake, the duplication in the path there is intentional, it is project name/component name.  That is not the issue.  Neeraj, can you take a look at this.  It may be that ComponentDeployable.getUtilMembers() isn't doing the right thing when you use a "variable" entry.
I just tried it, and it works for me on the latest WTP 1.0.1 M builds.  Try grabbing a recent 101.
The build id I used shows that I'm using WTP 1.5M4, so shouldn't this fix be in the current development or was this a recent fix on the 1.0.1 maintenance branch.  Nonetheless, it won't help as I need to be using the latest of WTP for other bugs to be resolved.
All fixes from WTP 1.0.1 are also released to the 1.5 M5 stream.  So, you would need the latest WTP 1.5 M5 integration build.
verified 20060925
Closing.</WithStack>
    <WithOutStack>I have a dynamic web project that includes some modules via classpath variables.  

Ex:
&lt;dependent-module deploy-path="/WEB-INF/lib" handle="module:/classpath/var/M2_REPO/commons-beanutils/commons-beanutils/1.7.0/commons-beanutils-1.7.0.jar"&gt;
&lt;dependency-type&gt;uses&lt;/dependency-type&gt;
&lt;/dependent-module&gt;


When I export the project as a WAR file then the variables are properly resolved, however if I try to "Run on Server" the web project then the I get a publishing failed dialog with the message that "Publishing failed
  Resource /M2_REPO/commons-beanutils/commons-beanutils/1.7.0/commons-beanutils-1.7.0.jar does not exist."

The beanutils jar is the 1st entry in the list.  If I rearrange the list then the next new entry fails.
What build are you on?
Version: 1.0.0
Build id: 200601131852

Is what shows up in the about box for the WTP feature.


Is "commons-beanutils" supposed to be duplicated in your path?  Is that the issue?
Perhaps not, the project seems to be doubled for all refs...
Sorry I didn't follow that.  commons-beanutils should show up only once in the war's WEB-INF/lib if that is what you mean.  And it does if I export the war.  Nonetheless, publishing doesn't resolve.
My mistake, the duplication in the path there is intentional, it is project name/component name.  That is not the issue.  Neeraj, can you take a look at this.  It may be that ComponentDeployable.getUtilMembers() isn't doing the right thing when you use a "variable" entry.
I just tried it, and it works for me on the latest WTP 1.0.1 M builds.  Try grabbing a recent 101.
The build id I used shows that I'm using WTP 1.5M4, so shouldn't this fix be in the current development or was this a recent fix on the 1.0.1 maintenance branch.  Nonetheless, it won't help as I need to be using the latest of WTP for other bugs to be resolved.
All fixes from WTP 1.0.1 are also released to the 1.5 M5 stream.  So, you would need the latest WTP 1.5 M5 integration build.
verified 20060925
Closing.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="126439" />
    <CreationDate amount="2006-02-03 19:47:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="Debug" />
    <Version amount="3.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>SelectAllExpressionsAction leakage</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="VERIFIED" />
    <resolution amount="FIXED" />
    <WithStack>SelectAllExpressionsAction adds itself as an expression listener in its initialize message.

It is never removed as a listener.

This results in significant leakage when opening and closing the Expressions View
Fixed in SelectAllExpressionsAction.
Please verify DarinW.
Verified.</WithStack>
    <WithOutStack>SelectAllExpressionsAction adds itself as an expression listener in its initialize message.

It is never removed as a listener.

This results in significant leakage when opening and closing the Expressions View
Fixed in SelectAllExpressionsAction.
Please verify DarinW.
Verified.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="126440" />
    <CreationDate amount="2006-02-03 19:49:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="PDE" />
    <component amount="UI" />
    <Version amount="3.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Plug-in Export dialog JAR signing tab not using dialog font</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>I20060131-1200
File&gt;Export&gt;Deployable plug-ins and fragments
Options&gt;Package plug-ins as individual JAR archives
JAR Signing

Body of the tab does not use the dialog font
Bug only occurred when the JAR signing tab was created dynamically.

Fixed.  Thank you for reporting.</WithStack>
    <WithOutStack>I20060131-1200
File&gt;Export&gt;Deployable plug-ins and fragments
Options&gt;Package plug-ins as individual JAR archives
JAR Signing

Body of the tab does not use the dialog font
Bug only occurred when the JAR signing tab was created dynamically.

Fixed.  Thank you for reporting.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="126441" />
    <CreationDate amount="2006-02-03 20:00:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="CVS" />
    <Version amount="3.1.1" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows 2000" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>add Team - Remove from Version Control menu item</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="5">
        <Lines>
          <Line>1. save a copy of the file elsewhere locally</Line>
          <Line>2. delete the file</Line>
          <Line>3. synchronize</Line>
          <Line>4. commit delete change</Line>
          <Line>5. move copy (from step 1) to original location</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="RESOLVED" />
    <resolution amount="WONTFIX" />
    <WithStack>I am suprised that there is no 'Team&gt;Remove from Version Control' item in
context menu for a cvs managed file. if a file (such as a log file) is
accidentally added to cvs i currently have to:
1. save a copy of the file elsewhere locally
2. delete the file
3. synchronize
4. commit delete change
5. move copy (from step 1) to original location

All this because there is no implicit 'Remove from Version Control' command.

Why is this feature disabled/not availible?
Is there an easier way to do what i describe above?
Such an operation would be used so infrequently, I don't think it warrants inclusion (i.e. your the first to ask in 5 years). Also, we have tailored thre CVS workflow in Eclipse such that users should never need to do an explicit Add to Version Control (i.e. we allow the user to control what gets added or ignored during the commit). 

Also, in order to remove a file from version control (assuming it hasn't been committed) all you need to do is rename it and then rename it back and the file will no longer be under version control. Of course, if you committed it, then you need to commit the deletion before renaming the file back.
i would have expected it to be there for the sake of completeness at the very least. and it has been brought up before albeit a long time ago #9693

is the eclipse development cycle winding down or something? every bug i would like fixed (voted for) is either 'wont fix' or 'later'. i am aware that this is the wrong place for this discussion, but it seems that the only things that annoy me about eclipse are being considered unimportant.
It's mainly an issue of manpower. There is only so much we can do. The main priorities for the Eclipse Platform are set by the PMC and we prioritize our work based on that. Of course, if there are problems that we think impact a large number of users, we will consider that when prioritizing. 

I don't believe that fixing this bug would have a noticable impact on most user. As a matter of fact, I think it would confuse most user since they probably don't even use Add to Version Control (e.g. I never use Add to Version Control since it is handled during a commit). They would probably see the menu option and think that they can remove any file from version control when, in reality, they would only be able to do it on files that were added but not yet committed.

Having said all this, I think it would be acceptable to have a Remove from Version Control operation on the CVS main menu. I don't think it should go on the context menu since we try to only have frequently used commands there. The command would need to be enabled only for the case where the selected file(s) are added to version control and not committed. However, we do not have the manpower to do this. If you think it is important, we would be happy to accept a patch.

As for the other bugs you mentioned, the same factors apply. If the bug will only benefit a small set of users, we just can't give it a high priority. A case needs to be made that the issue has a large impact. Another avenue that many have taken is to provide a patch. We generally accept patches if they add new funtionality in a way that does not imapct exisiting features in a negative way.
thankyou for your response.

one outstanding question/clarification of this bug before it returns to the ether...

"in reality, they would only be able to do it on files that were added but not yet committed."

why wouldn't it work for committed files? i would find the feature useless otherwise! i'm requesting a feature that will take a file that is added and committed, remove it from cvs and put it in a state where i can add it to cvs ignore. or it could automatically add it to cvs ignore (prompt). right?
The short answer is because CVS doesn't support that operation. I would argue that the operation would be used so infrequently that there is little benefit to having an explicit command. The steps you outlines to get the same result are not really that difficult.</WithStack>
    <WithOutStack>I am suprised that there is no 'Team&gt;Remove from Version Control' item in
context menu for a cvs managed file. if a file (such as a log file) is
accidentally added to cvs i currently have to:
1. save a copy of the file elsewhere locally
2. delete the file
3. synchronize
4. commit delete change
5. move copy (from step 1) to original location

All this because there is no implicit 'Remove from Version Control' command.

Why is this feature disabled/not availible?
Is there an easier way to do what i describe above?
Such an operation would be used so infrequently, I don't think it warrants inclusion (i.e. your the first to ask in 5 years). Also, we have tailored thre CVS workflow in Eclipse such that users should never need to do an explicit Add to Version Control (i.e. we allow the user to control what gets added or ignored during the commit). 

Also, in order to remove a file from version control (assuming it hasn't been committed) all you need to do is rename it and then rename it back and the file will no longer be under version control. Of course, if you committed it, then you need to commit the deletion before renaming the file back.
i would have expected it to be there for the sake of completeness at the very least. and it has been brought up before albeit a long time ago #9693

is the eclipse development cycle winding down or something? every bug i would like fixed (voted for) is either 'wont fix' or 'later'. i am aware that this is the wrong place for this discussion, but it seems that the only things that annoy me about eclipse are being considered unimportant.
It's mainly an issue of manpower. There is only so much we can do. The main priorities for the Eclipse Platform are set by the PMC and we prioritize our work based on that. Of course, if there are problems that we think impact a large number of users, we will consider that when prioritizing. 

I don't believe that fixing this bug would have a noticable impact on most user. As a matter of fact, I think it would confuse most user since they probably don't even use Add to Version Control (e.g. I never use Add to Version Control since it is handled during a commit). They would probably see the menu option and think that they can remove any file from version control when, in reality, they would only be able to do it on files that were added but not yet committed.

Having said all this, I think it would be acceptable to have a Remove from Version Control operation on the CVS main menu. I don't think it should go on the context menu since we try to only have frequently used commands there. The command would need to be enabled only for the case where the selected file(s) are added to version control and not committed. However, we do not have the manpower to do this. If you think it is important, we would be happy to accept a patch.

As for the other bugs you mentioned, the same factors apply. If the bug will only benefit a small set of users, we just can't give it a high priority. A case needs to be made that the issue has a large impact. Another avenue that many have taken is to provide a patch. We generally accept patches if they add new funtionality in a way that does not imapct exisiting features in a negative way.
thankyou for your response.

one outstanding question/clarification of this bug before it returns to the ether...

"in reality, they would only be able to do it on files that were added but not yet committed."

why wouldn't it work for committed files? i would find the feature useless otherwise! i'm requesting a feature that will take a file that is added and committed, remove it from cvs and put it in a state where i can add it to cvs ignore. or it could automatically add it to cvs ignore (prompt). right?
The short answer is because CVS doesn't support that operation. I would argue that the operation would be used so infrequently that there is little benefit to having an explicit command. The steps you outlines to get the same result are not really that difficult.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="126442" />
    <CreationDate amount="2006-02-03 20:21:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="Compare" />
    <Version amount="3.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P1" />
    <bug_severity amount="major" />
    <Summery>[Viewers] each compare editor is leaked</Summery>
    <Patches amount="0" />
    <Stacktraces amount="1">
      <Stacktrace timestamp="1437330655972">
        <Exception>java.lang.NullPointerException</Exception>
        <Reason />
        <Frames>
          <Frame depth="0">org.eclipse.compare.CompareEditorInput.removeCompareInputChangeListener(CompareEditorInput.java:1023)</Frame>
          <Frame depth="1">org.eclipse.compare.contentmergeviewer.ContentMergeViewer.handleDispose(ContentMergeViewer.java:909)</Frame>
          <Frame depth="2">org.eclipse.compare.contentmergeviewer.TextMergeViewer.handleDispose(TextMergeViewer.java:1762)</Frame>
          <Frame depth="3">org.eclipse.jface.viewers.ContentViewer$2.widgetDisposed(ContentViewer.java:191)</Frame>
          <Frame depth="4">org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:116)</Frame>
          <Frame depth="5">org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)</Frame>
          <Frame depth="6">org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:938)</Frame>
          <Frame depth="7">org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:962)</Frame>
          <Frame depth="8">org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:943)</Frame>
          <Frame depth="9">org.eclipse.swt.widgets.Widget.release(Widget.java:740)</Frame>
          <Frame depth="10">org.eclipse.swt.widgets.Composite.releaseChildren(Composite.java:662)</Frame>
          <Frame depth="11">org.eclipse.swt.widgets.Widget.release(Widget.java:743)</Frame>
          <Frame depth="12">org.eclipse.swt.widgets.Composite.releaseChildren(Composite.java:662)</Frame>
          <Frame depth="13">org.eclipse.swt.widgets.Widget.release(Widget.java:743)</Frame>
          <Frame depth="14">org.eclipse.swt.widgets.Composite.releaseChildren(Composite.java:662)</Frame>
          <Frame depth="15">org.eclipse.swt.widgets.Widget.release(Widget.java:743)</Frame>
          <Frame depth="16">org.eclipse.swt.widgets.Composite.releaseChildren(Composite.java:662)</Frame>
          <Frame depth="17">org.eclipse.swt.widgets.Widget.release(Widget.java:743)</Frame>
          <Frame depth="18">org.eclipse.swt.widgets.Composite.releaseChildren(Composite.java:662)</Frame>
          <Frame depth="19">org.eclipse.swt.widgets.Widget.release(Widget.java:743)</Frame>
          <Frame depth="20">org.eclipse.swt.widgets.Widget.dispose(Widget.java:410)</Frame>
          <Frame depth="21">org.eclipse.ui.internal.PartPane.dispose(PartPane.java:175)</Frame>
          <Frame depth="22">org.eclipse.ui.internal.WorkbenchPartReference.dispose(WorkbenchPartReference.java:668)</Frame>
          <Frame depth="23">org.eclipse.ui.internal.WorkbenchPage.disposePart(WorkbenchPage.java:1586)</Frame>
          <Frame depth="24">org.eclipse.ui.internal.WorkbenchPage.handleDeferredEvents(WorkbenchPage.java:1345)</Frame>
          <Frame depth="25">org.eclipse.ui.internal.WorkbenchPage.deferUpdates(WorkbenchPage.java:1329)</Frame>
          <Frame depth="26">org.eclipse.ui.internal.WorkbenchPage.closeEditors(WorkbenchPage.java:1303)</Frame>
          <Frame depth="27">org.eclipse.ui.internal.WorkbenchPage.closeEditor(WorkbenchPage.java:1358)</Frame>
          <Frame depth="28">org.eclipse.ui.internal.EditorPane.doHide(EditorPane.java:61)</Frame>
          <Frame depth="29">org.eclipse.ui.internal.PartStack.close(PartStack.java:519)</Frame>
          <Frame depth="30">org.eclipse.ui.internal.EditorStack.close(EditorStack.java:209)</Frame>
          <Frame depth="31">org.eclipse.ui.internal.PartStack$1.close(PartStack.java:119)</Frame>
          <Frame depth="32">org.eclipse.ui.internal.presentations.util.TabbedStackPresentation$1.handleEvent(TabbedStackPresentation.java:81)</Frame>
          <Frame depth="33">org.eclipse.ui.internal.presentations.util.AbstractTabFolder.fireEvent(AbstractTabFolder.java:267)</Frame>
          <Frame depth="34">org.eclipse.ui.internal.presentations.util.AbstractTabFolder.fireEvent(AbstractTabFolder.java:276)</Frame>
          <Frame depth="35">org.eclipse.ui.internal.presentations.defaultpresentation.DefaultTabFolder.access$1(DefaultTabFolder.java:1)</Frame>
          <Frame depth="36">org.eclipse.ui.internal.presentations.defaultpresentation.DefaultTabFolder$1.closeButtonPressed(DefaultTabFolder.java:67)</Frame>
          <Frame depth="37">org.eclipse.ui.internal.presentations.PaneFolder.notifyCloseListeners(PaneFolder.java:596)</Frame>
          <Frame depth="38">org.eclipse.ui.internal.presentations.PaneFolder$3.close(PaneFolder.java:189)</Frame>
          <Frame depth="39">org.eclipse.swt.custom.CTabFolder.onMouse(CTabFolder.java:2142)</Frame>
          <Frame depth="40">org.eclipse.swt.custom.CTabFolder$1.handleEvent(CTabFolder.java:312)</Frame>
          <Frame depth="41">org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)</Frame>
          <Frame depth="42">org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:938)</Frame>
          <Frame depth="43">org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3673)</Frame>
          <Frame depth="44">org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3284)</Frame>
          <Frame depth="45">org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2361)</Frame>
          <Frame depth="46">org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2325)</Frame>
          <Frame depth="47">org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2200)</Frame>
          <Frame depth="48">org.eclipse.ui.internal.Workbench$4.run(Workbench.java:466)</Frame>
          <Frame depth="49">org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:289)</Frame>
          <Frame depth="50">org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:461)</Frame>
          <Frame depth="51">org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)</Frame>
          <Frame depth="52">org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:101)</Frame>
          <Frame depth="53">org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:152)</Frame>
          <Frame depth="54">org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:106)</Frame>
          <Frame depth="55">org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:76)</Frame>
          <Frame depth="56">org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:359)</Frame>
          <Frame depth="57">org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:174)</Frame>
          <Frame depth="58">sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)</Frame>
          <Frame depth="59">sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)</Frame>
          <Frame depth="60">sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)</Frame>
          <Frame depth="61">java.lang.reflect.Method.invoke(Method.java:585)</Frame>
          <Frame depth="62">org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:476)</Frame>
          <Frame depth="63">org.eclipse.equinox.launcher.Main.basicRun(Main.java:416)</Frame>
          <Frame depth="64">org.eclipse.equinox.launcher.Main.run(Main.java:1141)</Frame>
          <Frame depth="65">org.eclipse.equinox.launcher.Main.main(Main.java:1116)</Frame>
        </Frames>
      </Stacktrace>
    </Stacktraces>
    <SourceCodeRegions amount="2">
      <source_code type="multicomment">
        <location start="6140" end="6230" />
        <code>/*
	 * @see org.eclipse.ui.part.EditorActionBarContributor#dispose()
	 * @since 3.3
	 */</code>
      </source_code>
      <source_code type="functiondef">
        <location start="6231" end="6302" />
        <code>public void dispose() {
		setActiveEditor(null);
		super.dispose();
	}</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="1">
      <Enumeration lines="7">
        <Lines>
          <Line>1) Comment 2 indicates a leak occurs because a tool bar is recreated when the editor is closed. This is old so I'll need to confirm that it is still the case.</Line>
          <Line />
          <Line>2) A change in 3.3 has caused the editor to be leaked because the editor history is holding onto the input which is holding onto the editor. I think the real issue here is that the editor history is keeping a reference to the editor input. Compare editors do not generally stay in the editor history when the are closed but there appears to be some scenarios where a reference is kept. If they are kept, an error occurs if the input is selected from the drop down. Regardless, in the very least, I will address the leak and will hopefully be able to sort of the reference in the editor history.</Line>
          <Line>&gt;I think the</Line>
          <Line>&gt;real issue here is that the editor history is keeping a reference to the editor</Line>
          <Line>&gt;input.</Line>
          <Line>Nope. This is well documents in IEditorInput:</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>I was profiling on I20060131-1200 and noticed leakage on opening and closing the Compare editor.

Test case:
In the Synchronize view, double click on an outgoing CVS change
Close the resulting Compare Editor.

Using OptimizeIt, I see leakage which appears to be traced back to the toolbar created in the CompareViewerPane not being disposed.

This likely be handled by disposing the toolbarmanager in the dispose listener?
fixed for I20060207
There appears to still be a problem here with Java file compares
The following stack shows a toolbar manager etc getting created on the dispose of the JavaStructureDiffViewer. This manager and toolbar do not get disposed.

	CompareEditorInput$3(CompareViewerPane).getToolBarManager() line: 146
	CompareViewerPane.getToolBarManager(Composite) line: 124
	JavaStructureDiffViewer.setSmartButtonVisible(boolean) line: 202
	JavaStructureDiffViewer.compareInputChanged(ICompareInput) line: 126
	JavaStructureDiffViewer(StructureDiffViewer).handleDispose(DisposeEvent) line: 163
	ContentViewer$2.widgetDisposed(DisposeEvent) line: 189
	TypedListener.handleEvent(Event) line: 101
	EventTable.sendEvent(Event) line: 66
	Tree(Widget).sendEvent(Event) line: 925
	Tree(Widget).sendEvent(int, Event, boolean) line: 949
	Tree(Widget).sendEvent(int) line: 930
	Tree(Widget).release(boolean) line: 740
	CompareEditorInput$3(Composite).releaseChildren(boolean) line: 623
	CompareEditorInput$3(Widget).release(boolean) line: 743
	Splitter(Composite).releaseChildren(boolean) line: 623
	Splitter(Widget).release(boolean) line: 743
	Splitter(Composite).releaseChildren(boolean) line: 623
	Splitter(Widget).release(boolean) line: 743
	Composite.releaseChildren(boolean) line: 623
	Composite(Widget).release(boolean) line: 743
	Composite.releaseChildren(boolean) line: 623
	Composite(Widget).release(boolean) line: 743
	Composite(Widget).dispose() line: 412
	EditorPane(PartPane).dispose() line: 164
	EditorReference(WorkbenchPartReference).dispose() line: 628
	WorkbenchPage.disposePart(WorkbenchPartReference) line: 1435
	WorkbenchPage.handleDeferredEvents() line: 1262
	WorkbenchPage.deferUpdates(boolean) line: 1246
	WorkbenchPage.closeEditors(IEditorReference[], boolean) line: 1220
	WorkbenchPage.closeEditor(IEditorReference, boolean) line: 1275
	EditorPane.doHide() line: 54
	EditorStack(PartStack).close(IPresentablePart) line: 497
	EditorStack.close(IPresentablePart[]) line: 201
	PartStack$1.close(IPresentablePart[]) line: 105
	TabbedStackPresentation$1.handleEvent(TabFolderEvent) line: 81
	DefaultTabFolder(AbstractTabFolder).fireEvent(TabFolderEvent) line: 267
	DefaultTabFolder(AbstractTabFolder).fireEvent(int, AbstractTabItem) line: 276
	DefaultTabFolder.access$1(DefaultTabFolder, int, AbstractTabItem) line: 1
	DefaultTabFolder$1.closeButtonPressed(CTabItem) line: 67
	PaneFolder.notifyCloseListeners(CTabItem) line: 580
	PaneFolder$3.close(CTabFolderEvent) line: 187
	CTabFolder.onMouse(Event) line: 2105
	CTabFolder$1.handleEvent(Event) line: 291
	EventTable.sendEvent(Event) line: 66
	CTabFolder(Widget).sendEvent(Event) line: 925
	Display.runDeferredEvents() line: 3287
	Display.readAndDispatch() line: 2907
	Workbench.runEventLoop(Window$IExceptionHandler, Display) line: 1899
	Workbench.runUI() line: 1863
	Workbench.createAndRunWorkbench(Display, WorkbenchAdvisor) line: 417
	PlatformUI.createAndRunWorkbench(Display, WorkbenchAdvisor) line: 143
	IDEApplication.run(Object) line: 106
	PlatformActivator$1.run(Object) line: 99
	EclipseAppLauncher.runApplication(Object) line: 92
	EclipseAppLauncher.start(Object) line: 68
	EclipseStarter.run(Object) line: 374
	EclipseStarter.run(String[], Runnable) line: 169
	NativeMethodAccessorImpl.invoke0(Method, Object, Object[]) line: not available [native method]
	NativeMethodAccessorImpl.invoke(Object, Object[]) line: 39
	DelegatingMethodAccessorImpl.invoke(Object, Object[]) line: 25
	Method.invoke(Object, Object[]) line: 324
	Main.invokeFramework(String[], URL[]) line: 338
	Main.basicRun(String[]) line: 282
	Main.run(String[]) line: 977
	Main.main(String[]) line: 952

Not for M5
Increasing priority since every single compare editor is leaked as long as its editor input is in the navigation history.
Created attachment 62756
Reference graph + alloc backtrace
There appears to be 2 problems mentioned here:

1) Comment 2 indicates a leak occurs because a tool bar is recreated when the editor is closed. This is old so I'll need to confirm that it is still the case.

2) A change in 3.3 has caused the editor to be leaked because the editor history is holding onto the input which is holding onto the editor. I think the real issue here is that the editor history is keeping a reference to the editor input. Compare editors do not generally stay in the editor history when the are closed but there appears to be some scenarios where a reference is kept. If they are kept, an error occurs if the input is selected from the drop down. Regardless, in the very least, I will address the leak and will hopefully be able to sort of the reference in the editor history.
&gt;I think the
&gt;real issue here is that the editor history is keeping a reference to the editor
&gt;input.
Nope. This is well documents in IEditorInput:

 * Please note that it is important that the editor input be light weight.
 * Within the workbench, the navigation history tends to hold on to editor
 * inputs as a means of reconstructing the editor at a later time. The
 * navigation history can hold on to quite a few inputs (i.e., the default is
 * fifty). The actual data model should probably not be held in the input.

Thanks for the info. I have released a fix for 2 to HEAD and will investigate 1 during M7.
I verified your fix in HEAD. There are two problems with it:

1. it give an NPE (see below)
2. the editor input is gone but there's still every last closed editor leaked because the editor contributor holds on to the last active editor.

!ENTRY org.eclipse.ui 4 0 2007-04-04 10:05:15.454
!MESSAGE Unhandled event loop exception
!STACK 0
java.lang.NullPointerException
	at org.eclipse.compare.CompareEditorInput.removeCompareInputChangeListener(CompareEditorInput.java:1023)
	at org.eclipse.compare.contentmergeviewer.ContentMergeViewer.handleDispose(ContentMergeViewer.java:909)
	at org.eclipse.compare.contentmergeviewer.TextMergeViewer.handleDispose(TextMergeViewer.java:1762)
	at org.eclipse.jface.viewers.ContentViewer$2.widgetDisposed(ContentViewer.java:191)
	at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:116)
	at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:938)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:962)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:943)
	at org.eclipse.swt.widgets.Widget.release(Widget.java:740)
	at org.eclipse.swt.widgets.Composite.releaseChildren(Composite.java:662)
	at org.eclipse.swt.widgets.Widget.release(Widget.java:743)
	at org.eclipse.swt.widgets.Composite.releaseChildren(Composite.java:662)
	at org.eclipse.swt.widgets.Widget.release(Widget.java:743)
	at org.eclipse.swt.widgets.Composite.releaseChildren(Composite.java:662)
	at org.eclipse.swt.widgets.Widget.release(Widget.java:743)
	at org.eclipse.swt.widgets.Composite.releaseChildren(Composite.java:662)
	at org.eclipse.swt.widgets.Widget.release(Widget.java:743)
	at org.eclipse.swt.widgets.Composite.releaseChildren(Composite.java:662)
	at org.eclipse.swt.widgets.Widget.release(Widget.java:743)
	at org.eclipse.swt.widgets.Widget.dispose(Widget.java:410)
	at org.eclipse.ui.internal.PartPane.dispose(PartPane.java:175)
	at org.eclipse.ui.internal.WorkbenchPartReference.dispose(WorkbenchPartReference.java:668)
	at org.eclipse.ui.internal.WorkbenchPage.disposePart(WorkbenchPage.java:1586)
	at org.eclipse.ui.internal.WorkbenchPage.handleDeferredEvents(WorkbenchPage.java:1345)
	at org.eclipse.ui.internal.WorkbenchPage.deferUpdates(WorkbenchPage.java:1329)
	at org.eclipse.ui.internal.WorkbenchPage.closeEditors(WorkbenchPage.java:1303)
	at org.eclipse.ui.internal.WorkbenchPage.closeEditor(WorkbenchPage.java:1358)
	at org.eclipse.ui.internal.EditorPane.doHide(EditorPane.java:61)
	at org.eclipse.ui.internal.PartStack.close(PartStack.java:519)
	at org.eclipse.ui.internal.EditorStack.close(EditorStack.java:209)
	at org.eclipse.ui.internal.PartStack$1.close(PartStack.java:119)
	at org.eclipse.ui.internal.presentations.util.TabbedStackPresentation$1.handleEvent(TabbedStackPresentation.java:81)
	at org.eclipse.ui.internal.presentations.util.AbstractTabFolder.fireEvent(AbstractTabFolder.java:267)
	at org.eclipse.ui.internal.presentations.util.AbstractTabFolder.fireEvent(AbstractTabFolder.java:276)
	at org.eclipse.ui.internal.presentations.defaultpresentation.DefaultTabFolder.access$1(DefaultTabFolder.java:1)
	at org.eclipse.ui.internal.presentations.defaultpresentation.DefaultTabFolder$1.closeButtonPressed(DefaultTabFolder.java:67)
	at org.eclipse.ui.internal.presentations.PaneFolder.notifyCloseListeners(PaneFolder.java:596)
	at org.eclipse.ui.internal.presentations.PaneFolder$3.close(PaneFolder.java:189)
	at org.eclipse.swt.custom.CTabFolder.onMouse(CTabFolder.java:2142)
	at org.eclipse.swt.custom.CTabFolder$1.handleEvent(CTabFolder.java:312)
	at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:938)
	at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3673)
	at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3284)
	at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2361)
	at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2325)
	at org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2200)
	at org.eclipse.ui.internal.Workbench$4.run(Workbench.java:466)
	at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:289)
	at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:461)
	at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
	at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:101)
	at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:152)
	at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:106)
	at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:76)
	at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:359)
	at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:174)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:585)
	at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:476)
	at org.eclipse.equinox.launcher.Main.basicRun(Main.java:416)
	at org.eclipse.equinox.launcher.Main.run(Main.java:1141)
	at org.eclipse.equinox.launcher.Main.main(Main.java:1116)

Michael, once you have fixed the NPE adding the following method to CompareEditorContributor will fix the remaining leakage:

	/*
	 * @see org.eclipse.ui.part.EditorActionBarContributor#dispose()
	 * @since 3.3
	 */
	public void dispose() {
		setActiveEditor(null);
		super.dispose();
	}

HTH
Dani

Thanks Dani. I have a question for you. Why is the workbench keeping a reference to a disposed IEditorActionBarContributor? The javadoc doesn't seem to indicate that a disposed instance can be reused so I don;t see why the reference would be kept.
Because your contributor registers global action handlers in setActiveEditor(...) and they remain connected if you don't unregister them. I guess the reference to the contributor comes from there.
I see. I'm used to views where the SubActionBar handles that. I noticed that other editor contributors (e.g. BasicTextEditorActionContributor) clear the actions on dispose so I'll do that too.
I've released the fix for the NPE on Compare with Each Other and I've added the editor contribution dispose which nulls the editor and the global actions.
Michael, I've verified the bug in HEAD.
Of course I meant the fix not the bug. OK to close.
I have released a fix for the problem mentioned in comment 2 as well.</WithStack>
    <WithOutStack>I was profiling on I20060131-1200 and noticed leakage on opening and closing the Compare editor.

Test case:
In the Synchronize view, double click on an outgoing CVS change
Close the resulting Compare Editor.

Using OptimizeIt, I see leakage which appears to be traced back to the toolbar created in the CompareViewerPane not being disposed.

This likely be handled by disposing the toolbarmanager in the dispose listener?
fixed for I20060207
There appears to still be a problem here with Java file compares
The following stack shows a toolbar manager etc getting created on the dispose of the JavaStructureDiffViewer. This manager and toolbar do not get disposed.

	CompareEditorInput$3(CompareViewerPane).getToolBarManager() line: 146
	CompareViewerPane.getToolBarManager(Composite) line: 124
	JavaStructureDiffViewer.setSmartButtonVisible(boolean) line: 202
	JavaStructureDiffViewer.compareInputChanged(ICompareInput) line: 126
	JavaStructureDiffViewer(StructureDiffViewer).handleDispose(DisposeEvent) line: 163
	ContentViewer$2.widgetDisposed(DisposeEvent) line: 189
	TypedListener.handleEvent(Event) line: 101
	EventTable.sendEvent(Event) line: 66
	Tree(Widget).sendEvent(Event) line: 925
	Tree(Widget).sendEvent(int, Event, boolean) line: 949
	Tree(Widget).sendEvent(int) line: 930
	Tree(Widget).release(boolean) line: 740
	CompareEditorInput$3(Composite).releaseChildren(boolean) line: 623
	CompareEditorInput$3(Widget).release(boolean) line: 743
	Splitter(Composite).releaseChildren(boolean) line: 623
	Splitter(Widget).release(boolean) line: 743
	Splitter(Composite).releaseChildren(boolean) line: 623
	Splitter(Widget).release(boolean) line: 743
	Composite.releaseChildren(boolean) line: 623
	Composite(Widget).release(boolean) line: 743
	Composite.releaseChildren(boolean) line: 623
	Composite(Widget).release(boolean) line: 743
	Composite(Widget).dispose() line: 412
	EditorPane(PartPane).dispose() line: 164
	EditorReference(WorkbenchPartReference).dispose() line: 628
	WorkbenchPage.disposePart(WorkbenchPartReference) line: 1435
	WorkbenchPage.handleDeferredEvents() line: 1262
	WorkbenchPage.deferUpdates(boolean) line: 1246
	WorkbenchPage.closeEditors(IEditorReference[], boolean) line: 1220
	WorkbenchPage.closeEditor(IEditorReference, boolean) line: 1275
	EditorPane.doHide() line: 54
	EditorStack(PartStack).close(IPresentablePart) line: 497
	EditorStack.close(IPresentablePart[]) line: 201
	PartStack$1.close(IPresentablePart[]) line: 105
	TabbedStackPresentation$1.handleEvent(TabFolderEvent) line: 81
	DefaultTabFolder(AbstractTabFolder).fireEvent(TabFolderEvent) line: 267
	DefaultTabFolder(AbstractTabFolder).fireEvent(int, AbstractTabItem) line: 276
	DefaultTabFolder.access$1(DefaultTabFolder, int, AbstractTabItem) line: 1
	DefaultTabFolder$1.closeButtonPressed(CTabItem) line: 67
	PaneFolder.notifyCloseListeners(CTabItem) line: 580
	PaneFolder$3.close(CTabFolderEvent) line: 187
	CTabFolder.onMouse(Event) line: 2105
	CTabFolder$1.handleEvent(Event) line: 291
	EventTable.sendEvent(Event) line: 66
	CTabFolder(Widget).sendEvent(Event) line: 925
	Display.runDeferredEvents() line: 3287
	Display.readAndDispatch() line: 2907
	Workbench.runEventLoop(Window$IExceptionHandler, Display) line: 1899
	Workbench.runUI() line: 1863
	Workbench.createAndRunWorkbench(Display, WorkbenchAdvisor) line: 417
	PlatformUI.createAndRunWorkbench(Display, WorkbenchAdvisor) line: 143
	IDEApplication.run(Object) line: 106
	PlatformActivator$1.run(Object) line: 99
	EclipseAppLauncher.runApplication(Object) line: 92
	EclipseAppLauncher.start(Object) line: 68
	EclipseStarter.run(Object) line: 374
	EclipseStarter.run(String[], Runnable) line: 169
	NativeMethodAccessorImpl.invoke0(Method, Object, Object[]) line: not available [native method]
	NativeMethodAccessorImpl.invoke(Object, Object[]) line: 39
	DelegatingMethodAccessorImpl.invoke(Object, Object[]) line: 25
	Method.invoke(Object, Object[]) line: 324
	Main.invokeFramework(String[], URL[]) line: 338
	Main.basicRun(String[]) line: 282
	Main.run(String[]) line: 977
	Main.main(String[]) line: 952

Not for M5
Increasing priority since every single compare editor is leaked as long as its editor input is in the navigation history.
Created attachment 62756
Reference graph + alloc backtrace
There appears to be 2 problems mentioned here:

1) Comment 2 indicates a leak occurs because a tool bar is recreated when the editor is closed. This is old so I'll need to confirm that it is still the case.

2) A change in 3.3 has caused the editor to be leaked because the editor history is holding onto the input which is holding onto the editor. I think the real issue here is that the editor history is keeping a reference to the editor input. Compare editors do not generally stay in the editor history when the are closed but there appears to be some scenarios where a reference is kept. If they are kept, an error occurs if the input is selected from the drop down. Regardless, in the very least, I will address the leak and will hopefully be able to sort of the reference in the editor history.
&gt;I think the
&gt;real issue here is that the editor history is keeping a reference to the editor
&gt;input.
Nope. This is well documents in IEditorInput:

 * Please note that it is important that the editor input be light weight.
 * Within the workbench, the navigation history tends to hold on to editor
 * inputs as a means of reconstructing the editor at a later time. The
 * navigation history can hold on to quite a few inputs (i.e., the default is
 * fifty). The actual data model should probably not be held in the input.

Thanks for the info. I have released a fix for 2 to HEAD and will investigate 1 during M7.
I verified your fix in HEAD. There are two problems with it:

1. it give an NPE (see below)
2. the editor input is gone but there's still every last closed editor leaked because the editor contributor holds on to the last active editor.

!ENTRY org.eclipse.ui 4 0 2007-04-04 10:05:15.454
!MESSAGE Unhandled event loop exception
!STACK 0


Michael, once you have fixed the NPE adding the following method to CompareEditorContributor will fix the remaining leakage:

	/*
	 * @see org.eclipse.ui.part.EditorActionBarContributor#dispose()
	 * @since 3.3
	 */
	public void dispose() {
		setActiveEditor(null);
		super.dispose();
	}

HTH
Dani

Thanks Dani. I have a question for you. Why is the workbench keeping a reference to a disposed IEditorActionBarContributor? The javadoc doesn't seem to indicate that a disposed instance can be reused so I don;t see why the reference would be kept.
Because your contributor registers global action handlers in setActiveEditor(...) and they remain connected if you don't unregister them. I guess the reference to the contributor comes from there.
I see. I'm used to views where the SubActionBar handles that. I noticed that other editor contributors (e.g. BasicTextEditorActionContributor) clear the actions on dispose so I'll do that too.
I've released the fix for the NPE on Compare with Each Other and I've added the editor contribution dispose which nulls the editor and the global actions.
Michael, I've verified the bug in HEAD.
Of course I meant the fix not the bug. OK to close.
I have released a fix for the problem mentioned in comment 2 as well.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="126443" />
    <CreationDate amount="2006-02-03 20:57:00 -0500" />
    <DupId amount="" />
    <classification amount="Modeling" />
    <Product amount="GMF-Runtime" />
    <component amount="General" />
    <Version amount="1.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="blocker" />
    <Summery>Compilation error in MSLCrossReferenceAdapter blocking build</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>The following error is present using the latest EMF integration build (I20060202-0200):

The return type is incompatible with ECrossReferenceAdapter.getCrossReferenceAdapter(Notifier)MSLCrossReferenceAdapter.java	org.eclipse.gmf.runtime.emf.core/src/org/eclipse/gmf/runtime/emf/core/internal/index	line 552
Renamed the offending method to getMSLCrossReferenceAdapter.

Actually, this should not have been a compile error; looks like a bug in the JDT compiler.  Static methods cannot conflict in this way with different return types because they are not polymorphic.  The compiler generates invokeSpecial bytecodes that bind statically to the type and method, so there is never an issue of conflict.

[GMF Restructure] Bug 319140 : product GMF and component
Runtime EMF was the original product and component for this bug</WithStack>
    <WithOutStack>The following error is present using the latest EMF integration build (I20060202-0200):

The return type is incompatible with ECrossReferenceAdapter.getCrossReferenceAdapter(Notifier)MSLCrossReferenceAdapter.java	org.eclipse.gmf.runtime.emf.core/src/org/eclipse/gmf/runtime/emf/core/internal/index	line 552
Renamed the offending method to getMSLCrossReferenceAdapter.

Actually, this should not have been a compile error; looks like a bug in the JDT compiler.  Static methods cannot conflict in this way with different return types because they are not polymorphic.  The compiler generates invokeSpecial bytecodes that bind statically to the type and method, so there is never an issue of conflict.

[GMF Restructure] Bug 319140 : product GMF and component
Runtime EMF was the original product and component for this bug</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="126444" />
    <CreationDate amount="2006-02-03 21:21:00 -0500" />
    <DupId amount="" />
    <classification amount="Mylyn" />
    <Product amount="Mylyn" />
    <component amount="Tasks" />
    <Version amount="unspecified" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows All" />
    <priority amount="P2" />
    <bug_severity amount="normal" />
    <Summery>doSave(..) called too many times on MylarTaskEditor</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="INVALID" />
    <WithStack>Reproduce by setting a breakpoint on it, and changing the description of a bug report.
Unable to reproduce. 
Changing status...
Resolved.</WithStack>
    <WithOutStack>Reproduce by setting a breakpoint on it, and changing the description of a bug report.
Unable to reproduce. 
Changing status...
Resolved.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="126445" />
    <CreationDate amount="2006-02-03 23:28:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="Team" />
    <Version amount="3.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P1" />
    <bug_severity amount="normal" />
    <Summery>[Model Sync] Need to provide access to team content extension descriptors</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>We need to provide access to team content extension descriptors.
Added an IteamContentDescriptionManager that provides access to the descriptors</WithStack>
    <WithOutStack>We need to provide access to team content extension descriptors.
Added an IteamContentDescriptionManager that provides access to the descriptors</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="126446" />
    <CreationDate amount="2006-02-04 01:39:00 -0500" />
    <DupId amount="" />
    <classification amount="Tools" />
    <Product amount="TPTP Testing" />
    <component amount="Test.Agents.Recorder" />
    <Version amount="4.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="major" />
    <Summery>RecorderClient::getDestinationAbsolutePath() does not put in semi-colon separators when more than 2 files</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>When the RecorderClient:getDestinationAbsolutePath() method is called with more than 2 files (jars), then the resultant string contains paths where only the first and second are separated by semi-colons. The consective files do not have a separator between them.

This methd works when there is either one or 2 files identifies in the array but fails when there are more.
Fixed this method to always put a semi-colon after each file in the converted string. So a list of 
{"c:\temp\Recorder_deploy\a.jar", "c:\temp\Recorder_deploy\b.jar", "c:\temp\Recorder_deploy\c.jar"}

will be converted into

"c:\temp\Recorder_deploy\a.jar;c:\temp\Recorder_deploy\a.jar;c:\temp\Recorder_deploy\a.jar;"

Notice that the semi-colon is used as a terminator. The string always starts without a semi-colon but always will end with one irrespective of how many files in the list. 
ACTION: Please verify/close this defect.
verified in TPTP and a consuming product
Closing this defect as its been verified as fixed.</WithStack>
    <WithOutStack>When the RecorderClient:getDestinationAbsolutePath() method is called with more than 2 files (jars), then the resultant string contains paths where only the first and second are separated by semi-colons. The consective files do not have a separator between them.

This methd works when there is either one or 2 files identifies in the array but fails when there are more.
Fixed this method to always put a semi-colon after each file in the converted string. So a list of 
{"c:\temp\Recorder_deploy\a.jar", "c:\temp\Recorder_deploy\b.jar", "c:\temp\Recorder_deploy\c.jar"}

will be converted into

"c:\temp\Recorder_deploy\a.jar;c:\temp\Recorder_deploy\a.jar;c:\temp\Recorder_deploy\a.jar;"

Notice that the semi-colon is used as a terminator. The string always starts without a semi-colon but always will end with one irrespective of how many files in the list. 
ACTION: Please verify/close this defect.
verified in TPTP and a consuming product
Closing this defect as its been verified as fixed.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="126447" />
    <CreationDate amount="2006-02-04 07:15:00 -0500" />
    <DupId amount="" />
    <classification amount="WebTools" />
    <Product amount="WTP Java EE Tools" />
    <component amount="jst.j2ee" />
    <Version amount="1.0.1" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="major" />
    <Summery>J2EEFlexProjDeployable.getUri returns null for a dynamic web module</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>I am trying to resolve # 122383 but the getUri method returns null for dynamic web projects.
This is fixed for the WTP 1.0.1 RC1 candidate driver 02/07/06 and moved to 1.5 committers stream.
This bug was moved to 'closed' state, since it is so old its assumed fixed and no longer useful or need further attention. Feel free to re-open, or open a new bug, if this semi-automatic processing was done in error.</WithStack>
    <WithOutStack>I am trying to resolve # 122383 but the getUri method returns null for dynamic web projects.
This is fixed for the WTP 1.0.1 RC1 candidate driver 02/07/06 and moved to 1.5 committers stream.
This bug was moved to 'closed' state, since it is so old its assumed fixed and no longer useful or need further attention. Feel free to re-open, or open a new bug, if this semi-automatic processing was done in error.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="126448" />
    <CreationDate amount="2006-02-04 07:30:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="CVS" />
    <Version amount="3.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P2" />
    <bug_severity amount="normal" />
    <Summery>[Operations] Need to prompt when the scope has additional resources</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>In the major scope management refactoring, the code to prompt if the scope of a RepositoryProviderOperation was expanded was removed. We need to add it back. We should create a API subclass of ModelOperation that clients can use to generate a scope and prompt if necessary.
Fixed</WithStack>
    <WithOutStack>In the major scope management refactoring, the code to prompt if the scope of a RepositoryProviderOperation was expanded was removed. We need to add it back. We should create a API subclass of ModelOperation that clients can use to generate a scope and prompt if necessary.
Fixed</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="126449" />
    <CreationDate amount="2006-02-04 08:30:00 -0500" />
    <DupId amount="" />
    <classification amount="Modeling" />
    <Product amount="EMF" />
    <component amount="Tools" />
    <Version amount="2.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Boolean Flags can be silently reused</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="2">
      <source_code type="ifstatement">
        <location start="1422" end="1964" />
        <code>if (ePackage == EcorePackage.eINSTANCE)
    {
      if (ecoreGenPackage == null)
      {
        GenModel ecoreGenModel = getGenModel().createGenModel();
        ecoreGenModel.initialize(Collections.singleton(EcorePackage.eINSTANCE));
        ecoreGenPackage = (GenPackage)ecoreGenModel.getGenPackages().get(0);
        ecoreGenPackage.setPrefix("Ecore");
        ecoreGenPackage.setBasePackage("org.eclipse.emf");
        ((GenPackageImpl)ecoreGenPackage).setImportManager(getImportManager());
      }
      return ecoreGenPackage;
    }</code>
      </source_code>
      <source_code type="assignment">
        <location start="2910" end="2961" />
        <code>protected static final int LOCAL_EFLAG = 1 &lt;&lt; 10;</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="WONTFIX" />
    <WithStack>If some model specifies 8 Boolean Flags Reserved Bits, and a derived
model does likewise and both models generate boolean attributes, both
sets of boolean attributes start at 1 &lt;&lt; 8 and of course malfunction.

I assumed that 'reserved' meant that up to 'reserved' bits could be used
for attributes, rather than that 'reserved' was an unchecked guess as to
what other models might do.
Ed,

That's not what I see when I try it.  It should be counting up the booleans from the inheritance chain, which is what I'm seeing.  I'll need to see an example where it doesn't work.
Created attachment 34278
Repro

Attached comprises Ucore which extends Ecore, both of which reserve 8 flags bits. UParameterImpl has LOCAL_EFLAG = 1 &lt;&lt; 8, but the inherited ETypedElement
has ORDERED_EFLAG = 1 &lt;&lt; 8.
Reopen (separately since can't combine with create attachment)
Ed,

I see the problem and it is very specific to the fact that you are extending Ecore.  One thing to note is that your Ucore.ecore isn't actually referring to your Ecore.ecore copy at all (and you shouldn't have a copy anyway, you should refer to the one available in the Ecore plugin) it's referring to the generated Ecore package instance itself, i.e., you reference the nsURI not the location of the Ecore.ecore resource.  We create a special GenPackage for that Ecore instance in this method in GenBaseImpl:

  public GenPackage findGenPackage(EPackage ePackage)
  {
    if (ePackage == EcorePackage.eINSTANCE)
    {
      if (ecoreGenPackage == null)
      {
        GenModel ecoreGenModel = getGenModel().createGenModel();
        ecoreGenModel.initialize(Collections.singleton(EcorePackage.eINSTANCE));
        ecoreGenPackage = (GenPackage)ecoreGenModel.getGenPackages().get(0);
        ecoreGenPackage.setPrefix("Ecore");
        ecoreGenPackage.setBasePackage("org.eclipse.emf");
        ((GenPackageImpl)ecoreGenPackage).setImportManager(getImportManager());
      }
      return ecoreGenPackage;
    }

and as you can see, we don't set the flags there.

Although we could do that, for someone extending Ecore (which we advise against) you really should be using the Ecore.genmodel we provide (to pick up all the settings) and should be refering to the Ecore.ecore available in org.eclipse.emf.ecore/model/Ecore.ecore, since that's the tool time artifact.

I remember suggesting in the newsgroup that someone open a feature request so that "Load Resource..." provides the option to load registered Ecore models (ones available in the plugin environment), but they didn't take me up on that.

Changing your Umodel.ecore to reference EParameter like this:

eSuperTypes="platform:/plugin/org.eclipse.emf.ecore/model/Ecore.ecore#//EParameter"

and changing your Umodel.genmodel to reference the Ecore.genmodel like this:

usedGenPackages="platform:/plugin/org.eclipse.emf.ecore/model/Ecore.genmodel#//ecore

and using that to generate results in this

  protected static final int LOCAL_EFLAG = 1 &lt;&lt; 10;

I'll wait for you to verify that the problem is entirely avoidable before returning this defect.

Ta. Fixed.

FYI:

Many of my working practices date from when my understanding/genmodel was much less robust. I had to take a local copy of Ecore.*.

I took the opportunity to do the ../../plug-in-id trick throughout. Hopefully
EMFT will provide a consistent release to accompany M5.

I considered not extending Ecore, but since I'm implementing QVT which extends
MOF, and Ecore is my input, I'm left with little alternative. EClass as both class and meta-class is confusing enough. Having my EClass for classes but
EMF's EClass for meta-classes could be really confusing/disastrous.

Load Resource... I'll raise the feature request. I've already implemented it
for my extension of EDiagram. I'm not sure if GEF has exploited it yet.</WithStack>
    <WithOutStack>If some model specifies 8 Boolean Flags Reserved Bits, and a derived
model does likewise and both models generate boolean attributes, both
sets of boolean attributes start at 1 &lt;&lt; 8 and of course malfunction.

I assumed that 'reserved' meant that up to 'reserved' bits could be used
for attributes, rather than that 'reserved' was an unchecked guess as to
what other models might do.
Ed,

That's not what I see when I try it.  It should be counting up the booleans from the inheritance chain, which is what I'm seeing.  I'll need to see an example where it doesn't work.
Created attachment 34278
Repro

Attached comprises Ucore which extends Ecore, both of which reserve 8 flags bits. UParameterImpl has LOCAL_EFLAG = 1 &lt;&lt; 8, but the inherited ETypedElement
has ORDERED_EFLAG = 1 &lt;&lt; 8.
Reopen (separately since can't combine with create attachment)
Ed,

I see the problem and it is very specific to the fact that you are extending Ecore.  One thing to note is that your Ucore.ecore isn't actually referring to your Ecore.ecore copy at all (and you shouldn't have a copy anyway, you should refer to the one available in the Ecore plugin) it's referring to the generated Ecore package instance itself, i.e., you reference the nsURI not the location of the Ecore.ecore resource.  We create a special GenPackage for that Ecore instance in this method in GenBaseImpl:

  public GenPackage findGenPackage(EPackage ePackage)
  {
    if (ePackage == EcorePackage.eINSTANCE)
    {
      if (ecoreGenPackage == null)
      {
        GenModel ecoreGenModel = getGenModel().createGenModel();
        ecoreGenModel.initialize(Collections.singleton(EcorePackage.eINSTANCE));
        ecoreGenPackage = (GenPackage)ecoreGenModel.getGenPackages().get(0);
        ecoreGenPackage.setPrefix("Ecore");
        ecoreGenPackage.setBasePackage("org.eclipse.emf");
        ((GenPackageImpl)ecoreGenPackage).setImportManager(getImportManager());
      }
      return ecoreGenPackage;
    }

and as you can see, we don't set the flags there.

Although we could do that, for someone extending Ecore (which we advise against) you really should be using the Ecore.genmodel we provide (to pick up all the settings) and should be refering to the Ecore.ecore available in org.eclipse.emf.ecore/model/Ecore.ecore, since that's the tool time artifact.

I remember suggesting in the newsgroup that someone open a feature request so that "Load Resource..." provides the option to load registered Ecore models (ones available in the plugin environment), but they didn't take me up on that.

Changing your Umodel.ecore to reference EParameter like this:

eSuperTypes="platform:/plugin/org.eclipse.emf.ecore/model/Ecore.ecore#//EParameter"

and changing your Umodel.genmodel to reference the Ecore.genmodel like this:

usedGenPackages="platform:/plugin/org.eclipse.emf.ecore/model/Ecore.genmodel#//ecore

and using that to generate results in this

  protected static final int LOCAL_EFLAG = 1 &lt;&lt; 10;

I'll wait for you to verify that the problem is entirely avoidable before returning this defect.

Ta. Fixed.

FYI:

Many of my working practices date from when my understanding/genmodel was much less robust. I had to take a local copy of Ecore.*.

I took the opportunity to do the ../../plug-in-id trick throughout. Hopefully
EMFT will provide a consistent release to accompany M5.

I considered not extending Ecore, but since I'm implementing QVT which extends
MOF, and Ecore is my input, I'm left with little alternative. EClass as both class and meta-class is confusing enough. Having my EClass for classes but
EMF's EClass for meta-classes could be really confusing/disastrous.

Load Resource... I'll raise the feature request. I've already implemented it
for my extension of EDiagram. I'm not sure if GEF has exploited it yet.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="126450" />
    <CreationDate amount="2006-02-04 09:05:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="SWT" />
    <Version amount="3.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>pack() and GridLayout conflicts</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="36">
      <source_code type="import">
        <location start="29" end="58" />
        <code>import org.eclipse.swt.SWT;</code>
      </source_code>
      <source_code type="import">
        <location start="59" end="106" />
        <code>import org.eclipse.swt.events.SelectionAdapter;</code>
      </source_code>
      <source_code type="import">
        <location start="107" end="152" />
        <code>import org.eclipse.swt.events.SelectionEvent;</code>
      </source_code>
      <source_code type="import">
        <location start="153" end="192" />
        <code>import org.eclipse.swt.layout.GridData;</code>
      </source_code>
      <source_code type="import">
        <location start="193" end="234" />
        <code>import org.eclipse.swt.layout.GridLayout;</code>
      </source_code>
      <source_code type="import">
        <location start="235" end="273" />
        <code>import org.eclipse.swt.widgets.Button;</code>
      </source_code>
      <source_code type="import">
        <location start="274" end="313" />
        <code>import org.eclipse.swt.widgets.Display;</code>
      </source_code>
      <source_code type="import">
        <location start="314" end="351" />
        <code>import org.eclipse.swt.widgets.Shell;</code>
      </source_code>
      <source_code type="import">
        <location start="352" end="388" />
        <code>import org.eclipse.swt.widgets.Tree;</code>
      </source_code>
      <source_code type="import">
        <location start="389" end="429" />
        <code>import org.eclipse.swt.widgets.TreeItem;</code>
      </source_code>
      <source_code type="class">
        <location start="431" end="2224" />
        <code>public class TestPack extends Shell {

    private Tree tree;
    /**
     * Launch the application
     * @param args
     */
    public static void main(String args[]) {
        try {
            Display display = Display.getDefault();
            TestPack shell = new TestPack(display, SWT.SHELL_TRIM);
            shell.open();
            shell.layout();
            while (!shell.isDisposed()) {
                if (!display.readAndDispatch())
                    display.sleep();
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    /**
     * Create the shell
     * @param display
     * @param style
     */
    public TestPack(Display display, int style) {
        super(display, style);
        createContents();
    }

    /**
     * Create contents of the window
     */
    protected void createContents() {
        setText("SWT Application");
        setSize(500, 375);
        setLayout(new GridLayout());

        final Button packButton = new Button(this, SWT.NONE);

        packButton.setText("pack()");

        tree = new Tree(this, SWT.BORDER);
        tree.setLayoutData(new GridData(GridData.FILL, GridData.FILL, true, true));

        final TreeItem newItemTreeItem = new TreeItem(tree, SWT.NONE);
        newItemTreeItem.setText("New item");

        final TreeItem newItemTreeItem_1 = new TreeItem(newItemTreeItem, SWT.NONE);
        newItemTreeItem_1.setText("New item");
        //
        
        packButton.addSelectionListener(new SelectionAdapter() {
            public void widgetSelected(final SelectionEvent e) {
                tree.pack();
            }
        });
    }

    @Override
    protected void checkSubclass() {
        // Disable the check that prevents subclassing of SWT components
    }

}</code>
      </source_code>
      <source_code type="package">
        <location start="2439" end="2474" />
        <code>package com.azew.azewexplorer.test;</code>
      </source_code>
      <source_code type="import">
        <location start="2475" end="2503" />
        <code>import org.eclipse.swt.SWT;</code>
      </source_code>
      <source_code type="import">
        <location start="2504" end="2551" />
        <code>import org.eclipse.swt.events.SelectionAdapter;</code>
      </source_code>
      <source_code type="import">
        <location start="2552" end="2597" />
        <code>import org.eclipse.swt.events.SelectionEvent;</code>
      </source_code>
      <source_code type="import">
        <location start="2598" end="2637" />
        <code>import org.eclipse.swt.layout.GridData;</code>
      </source_code>
      <source_code type="import">
        <location start="2638" end="2679" />
        <code>import org.eclipse.swt.layout.GridLayout;</code>
      </source_code>
      <source_code type="import">
        <location start="2680" end="2718" />
        <code>import org.eclipse.swt.widgets.Button;</code>
      </source_code>
      <source_code type="import">
        <location start="2719" end="2758" />
        <code>import org.eclipse.swt.widgets.Display;</code>
      </source_code>
      <source_code type="import">
        <location start="2759" end="2796" />
        <code>import org.eclipse.swt.widgets.Shell;</code>
      </source_code>
      <source_code type="import">
        <location start="2797" end="2833" />
        <code>import org.eclipse.swt.widgets.Tree;</code>
      </source_code>
      <source_code type="import">
        <location start="2834" end="2874" />
        <code>import org.eclipse.swt.widgets.TreeItem;</code>
      </source_code>
      <source_code type="class">
        <location start="2876" end="4761" />
        <code>public class TestPack extends Shell {

    private Tree tree;
    /**
     * Launch the application
     * @param args
     */
    public static void main(String args[]) {
        try {
            Display display = Display.getDefault();
            TestPack shell = new TestPack(display, SWT.SHELL_TRIM);
            shell.open();
            shell.layout();
            while (!shell.isDisposed()) {
                if (!display.readAndDispatch())
                    display.sleep();
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    /**
     * Create the shell
     * @param display
     * @param style
     */
    public TestPack(Display display, int style) {
        super(display, style);
        createContents();
    }

    /**
     * Create contents of the window
     */
    protected void createContents() {
        setText("SWT Application");
        setSize(500, 375);
        setLayout(new GridLayout());

        final Button packButton = new Button(this, SWT.NONE);
        packButton.setLayoutData(new GridData(116, 63));

        packButton.setText("pack()");

        tree = new Tree(this, SWT.BORDER);
        tree.setLayoutData(new GridData(GridData.FILL, GridData.FILL, true, true));

        final TreeItem newItemTreeItem = new TreeItem(tree, SWT.NONE);
        newItemTreeItem.setText("New item");

        final TreeItem newItemTreeItem_1 = new TreeItem(newItemTreeItem, SWT.NONE);
        newItemTreeItem_1.setText("New item");
        //
        
        packButton.addSelectionListener(new SelectionAdapter() {
            public void widgetSelected(final SelectionEvent e) {
                packButton.pack();
                tree.pack();
            }
        });
    }

    @Override
    protected void checkSubclass() {
        // Disable the check that prevents subclassing of SWT components
    }

}</code>
      </source_code>
      <source_code type="import">
        <location start="5958" end="5988" />
        <code>import org.eclipse.swt.SWT;</code>
      </source_code>
      <source_code type="import">
        <location start="5989" end="6036" />
        <code>import org.eclipse.swt.events.SelectionAdapter;</code>
      </source_code>
      <source_code type="import">
        <location start="6037" end="6082" />
        <code>import org.eclipse.swt.events.SelectionEvent;</code>
      </source_code>
      <source_code type="import">
        <location start="6083" end="6122" />
        <code>import org.eclipse.swt.layout.GridData;</code>
      </source_code>
      <source_code type="import">
        <location start="6123" end="6164" />
        <code>import org.eclipse.swt.layout.GridLayout;</code>
      </source_code>
      <source_code type="import">
        <location start="6165" end="6203" />
        <code>import org.eclipse.swt.widgets.Button;</code>
      </source_code>
      <source_code type="import">
        <location start="6204" end="6243" />
        <code>import org.eclipse.swt.widgets.Display;</code>
      </source_code>
      <source_code type="import">
        <location start="6244" end="6281" />
        <code>import org.eclipse.swt.widgets.Label;</code>
      </source_code>
      <source_code type="import">
        <location start="6282" end="6319" />
        <code>import org.eclipse.swt.widgets.Shell;</code>
      </source_code>
      <source_code type="import">
        <location start="6320" end="6359" />
        <code>import org.eclipse.swt.widgets.ToolBar;</code>
      </source_code>
      <source_code type="import">
        <location start="6360" end="6400" />
        <code>import org.eclipse.swt.widgets.ToolItem;</code>
      </source_code>
      <source_code type="class">
        <location start="6402" end="8830" />
        <code>public class TestLayout2 extends Shell {

    /**
     * Launch the application
     * @param args
     */
    public static void main(String args[]) {
        try {
            Display display = Display.getDefault();
            TestLayout2 shell = new TestLayout2(display, SWT.SHELL_TRIM);
            shell.open();
            shell.layout();
            while (!shell.isDisposed()) {
                if (!display.readAndDispatch())
                    display.sleep();
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    /**
     * Create the shell
     * @param display
     * @param style
     */
    public TestLayout2(Display display, int style) {
        super(display, style);
        createContents();
    }

    /**
     * Create contents of the window
     */
    protected void createContents() {
        setText("SWT Application");
        setSize(728, 486);
        setLayout(new GridLayout());

        final ToolBar toolBar = new ToolBar(this, SWT.FLAT);
        toolBar.setLayoutData(new GridData(GridData.FILL, GridData.CENTER, true, false));

        final ToolItem newItemToolItem = new ToolItem(toolBar, SWT.PUSH);
        newItemToolItem.setText("ToolBar Item 11");

        final ToolItem newItemToolItem_3 = new ToolItem(toolBar, SWT.PUSH);
        newItemToolItem_3.setText("12ToolBar Item 1");

        final ToolBar toolBar_1 = new ToolBar(this, SWT.FLAT);
        toolBar_1.setLayoutData(new GridData(GridData.FILL, GridData.CENTER, true, false));

        final ToolItem newItemToolItem_1 = new ToolItem(toolBar_1, SWT.PUSH);
        newItemToolItem_1.setText("ToolBar Item 21");

        final ToolItem newItemToolItem_2 = new ToolItem(toolBar_1, SWT.PUSH);
        newItemToolItem_2.setText("ToolBar Item 22");

        final Button clickMeToButton = new Button(this, SWT.NONE);
        clickMeToButton.addSelectionListener(new SelectionAdapter() {
            public void widgetSelected(final SelectionEvent e) {
                toolBar_1.dispose();
            }
        });
        clickMeToButton.setLayoutData(new GridData(GridData.FILL, GridData.FILL, true, true));
        clickMeToButton.setText("Click me to dispose 2nd ToolBar,\n the GridLayout is useless until you resize the window");
        //
    }

    @Override
    protected void checkSubclass() {
        // Disable the check that prevents subclassing of SWT components
    }

}</code>
      </source_code>
      <source_code type="functiondef">
        <location start="8901" end="9094" />
        <code>clickMeToButton.addSelectionListener(new SelectionAdapter() {
    public void widgetSelected(final SelectionEvent e) {
      toolBar_1.dispose();
      layout(); // &lt;- add this line
    }
  }</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="INVALID" />
    <WithStack>Consider the following code:


import org.eclipse.swt.SWT;
import org.eclipse.swt.events.SelectionAdapter;
import org.eclipse.swt.events.SelectionEvent;
import org.eclipse.swt.layout.GridData;
import org.eclipse.swt.layout.GridLayout;
import org.eclipse.swt.widgets.Button;
import org.eclipse.swt.widgets.Display;
import org.eclipse.swt.widgets.Shell;
import org.eclipse.swt.widgets.Tree;
import org.eclipse.swt.widgets.TreeItem;

public class TestPack extends Shell {

    private Tree tree;
    /**
     * Launch the application
     * @param args
     */
    public static void main(String args[]) {
        try {
            Display display = Display.getDefault();
            TestPack shell = new TestPack(display, SWT.SHELL_TRIM);
            shell.open();
            shell.layout();
            while (!shell.isDisposed()) {
                if (!display.readAndDispatch())
                    display.sleep();
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    /**
     * Create the shell
     * @param display
     * @param style
     */
    public TestPack(Display display, int style) {
        super(display, style);
        createContents();
    }

    /**
     * Create contents of the window
     */
    protected void createContents() {
        setText("SWT Application");
        setSize(500, 375);
        setLayout(new GridLayout());

        final Button packButton = new Button(this, SWT.NONE);

        packButton.setText("pack()");

        tree = new Tree(this, SWT.BORDER);
        tree.setLayoutData(new GridData(GridData.FILL, GridData.FILL, true, true));

        final TreeItem newItemTreeItem = new TreeItem(tree, SWT.NONE);
        newItemTreeItem.setText("New item");

        final TreeItem newItemTreeItem_1 = new TreeItem(newItemTreeItem, SWT.NONE);
        newItemTreeItem_1.setText("New item");
        //
        
        packButton.addSelectionListener(new SelectionAdapter() {
            public void widgetSelected(final SelectionEvent e) {
                tree.pack();
            }
        });
    }

    @Override
    protected void checkSubclass() {
        // Disable the check that prevents subclassing of SWT components
    }

}
When clicking the button, the Tree becomes smaller.
This is an bug: 
Why pack() makes GridLayout useless?


After doing that, you resize the Shell window, the tree return to correct size.

I changed the code to:


package com.azew.azewexplorer.test;

import org.eclipse.swt.SWT;
import org.eclipse.swt.events.SelectionAdapter;
import org.eclipse.swt.events.SelectionEvent;
import org.eclipse.swt.layout.GridData;
import org.eclipse.swt.layout.GridLayout;
import org.eclipse.swt.widgets.Button;
import org.eclipse.swt.widgets.Display;
import org.eclipse.swt.widgets.Shell;
import org.eclipse.swt.widgets.Tree;
import org.eclipse.swt.widgets.TreeItem;

public class TestPack extends Shell {

    private Tree tree;
    /**
     * Launch the application
     * @param args
     */
    public static void main(String args[]) {
        try {
            Display display = Display.getDefault();
            TestPack shell = new TestPack(display, SWT.SHELL_TRIM);
            shell.open();
            shell.layout();
            while (!shell.isDisposed()) {
                if (!display.readAndDispatch())
                    display.sleep();
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    /**
     * Create the shell
     * @param display
     * @param style
     */
    public TestPack(Display display, int style) {
        super(display, style);
        createContents();
    }

    /**
     * Create contents of the window
     */
    protected void createContents() {
        setText("SWT Application");
        setSize(500, 375);
        setLayout(new GridLayout());

        final Button packButton = new Button(this, SWT.NONE);
        packButton.setLayoutData(new GridData(116, 63));

        packButton.setText("pack()");

        tree = new Tree(this, SWT.BORDER);
        tree.setLayoutData(new GridData(GridData.FILL, GridData.FILL, true, true));

        final TreeItem newItemTreeItem = new TreeItem(tree, SWT.NONE);
        newItemTreeItem.setText("New item");

        final TreeItem newItemTreeItem_1 = new TreeItem(newItemTreeItem, SWT.NONE);
        newItemTreeItem_1.setText("New item");
        //
        
        packButton.addSelectionListener(new SelectionAdapter() {
            public void widgetSelected(final SelectionEvent e) {
                packButton.pack();
                tree.pack();
            }
        });
    }

    @Override
    protected void checkSubclass() {
        // Disable the check that prevents subclassing of SWT components
    }

}

When clicking the button, button and tree become smaller, but the tree and button borders are not the same distance as before.

I think, GridLayout should automatically layout the Button and Tree after clicking the button, not after resizing the Shell window.


When you call pack() on the button and the tree, both controls will be
correctly resized to their preferred sizes (their locations will not change).
The layout of the parent (the shell) is not involved in any of this.
In fact, calling pack() on controls that are already managed by a layout
is not a thing one would normally do. What is your code trying to accomplish?
Did you mean to call pack() on the shell?
Hi Florian Priester,

I have two toolbars(one is higher, another is lower) and an text area(below the two toolbars) in the Shell window, they are managed by the GridLayout.

If I disposed the lower toolbar, there will be a big gray rectangle appear at the place of the seconde toolbar.

When you resize the Shell window, the gray rectangle will disappear.

I think the GridLayout should automatically re-layout the window, not after resizing the window
Please run the following code, and you will understand what I meant:



import org.eclipse.swt.SWT;
import org.eclipse.swt.events.SelectionAdapter;
import org.eclipse.swt.events.SelectionEvent;
import org.eclipse.swt.layout.GridData;
import org.eclipse.swt.layout.GridLayout;
import org.eclipse.swt.widgets.Button;
import org.eclipse.swt.widgets.Display;
import org.eclipse.swt.widgets.Label;
import org.eclipse.swt.widgets.Shell;
import org.eclipse.swt.widgets.ToolBar;
import org.eclipse.swt.widgets.ToolItem;

public class TestLayout2 extends Shell {

    /**
     * Launch the application
     * @param args
     */
    public static void main(String args[]) {
        try {
            Display display = Display.getDefault();
            TestLayout2 shell = new TestLayout2(display, SWT.SHELL_TRIM);
            shell.open();
            shell.layout();
            while (!shell.isDisposed()) {
                if (!display.readAndDispatch())
                    display.sleep();
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    /**
     * Create the shell
     * @param display
     * @param style
     */
    public TestLayout2(Display display, int style) {
        super(display, style);
        createContents();
    }

    /**
     * Create contents of the window
     */
    protected void createContents() {
        setText("SWT Application");
        setSize(728, 486);
        setLayout(new GridLayout());

        final ToolBar toolBar = new ToolBar(this, SWT.FLAT);
        toolBar.setLayoutData(new GridData(GridData.FILL, GridData.CENTER, true, false));

        final ToolItem newItemToolItem = new ToolItem(toolBar, SWT.PUSH);
        newItemToolItem.setText("ToolBar Item 11");

        final ToolItem newItemToolItem_3 = new ToolItem(toolBar, SWT.PUSH);
        newItemToolItem_3.setText("12ToolBar Item 1");

        final ToolBar toolBar_1 = new ToolBar(this, SWT.FLAT);
        toolBar_1.setLayoutData(new GridData(GridData.FILL, GridData.CENTER, true, false));

        final ToolItem newItemToolItem_1 = new ToolItem(toolBar_1, SWT.PUSH);
        newItemToolItem_1.setText("ToolBar Item 21");

        final ToolItem newItemToolItem_2 = new ToolItem(toolBar_1, SWT.PUSH);
        newItemToolItem_2.setText("ToolBar Item 22");

        final Button clickMeToButton = new Button(this, SWT.NONE);
        clickMeToButton.addSelectionListener(new SelectionAdapter() {
            public void widgetSelected(final SelectionEvent e) {
                toolBar_1.dispose();
            }
        });
        clickMeToButton.setLayoutData(new GridData(GridData.FILL, GridData.FILL, true, true));
        clickMeToButton.setText("Click me to dispose 2nd ToolBar,\n the GridLayout is useless until you resize the window");
        //
    }

    @Override
    protected void checkSubclass() {
        // Disable the check that prevents subclassing of SWT components
    }

}
You need to call layout() on the shell after disposing the tool bar:

  clickMeToButton.addSelectionListener(new SelectionAdapter() {
    public void widgetSelected(final SelectionEvent e) {
      toolBar_1.dispose();
      layout(); // &lt;- add this line
    }
  });

Disposing a child does not automatically re-layout its parent in SWT.
Calling pack(), setBounds(), setSize(), setLocation() is not valid when combined with any layout.  The layout is managing the size and position of the controls so the application should not do so as well.

Closing this bug as invalid.

Thanks Florian for helping fx figure out his bug.
Thank you!</WithStack>
    <WithOutStack>Consider the following code:


import org.eclipse.swt.SWT;
import org.eclipse.swt.events.SelectionAdapter;
import org.eclipse.swt.events.SelectionEvent;
import org.eclipse.swt.layout.GridData;
import org.eclipse.swt.layout.GridLayout;
import org.eclipse.swt.widgets.Button;
import org.eclipse.swt.widgets.Display;
import org.eclipse.swt.widgets.Shell;
import org.eclipse.swt.widgets.Tree;
import org.eclipse.swt.widgets.TreeItem;

public class TestPack extends Shell {

    private Tree tree;
    /**
     * Launch the application
     * @param args
     */
    public static void main(String args[]) {
        try {
            Display display = Display.getDefault();
            TestPack shell = new TestPack(display, SWT.SHELL_TRIM);
            shell.open();
            shell.layout();
            while (!shell.isDisposed()) {
                if (!display.readAndDispatch())
                    display.sleep();
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    /**
     * Create the shell
     * @param display
     * @param style
     */
    public TestPack(Display display, int style) {
        super(display, style);
        createContents();
    }

    /**
     * Create contents of the window
     */
    protected void createContents() {
        setText("SWT Application");
        setSize(500, 375);
        setLayout(new GridLayout());

        final Button packButton = new Button(this, SWT.NONE);

        packButton.setText("pack()");

        tree = new Tree(this, SWT.BORDER);
        tree.setLayoutData(new GridData(GridData.FILL, GridData.FILL, true, true));

        final TreeItem newItemTreeItem = new TreeItem(tree, SWT.NONE);
        newItemTreeItem.setText("New item");

        final TreeItem newItemTreeItem_1 = new TreeItem(newItemTreeItem, SWT.NONE);
        newItemTreeItem_1.setText("New item");
        //
        
        packButton.addSelectionListener(new SelectionAdapter() {
            public void widgetSelected(final SelectionEvent e) {
                tree.pack();
            }
        });
    }

    @Override
    protected void checkSubclass() {
        // Disable the check that prevents subclassing of SWT components
    }

}
When clicking the button, the Tree becomes smaller.
This is an bug: 
Why pack() makes GridLayout useless?


After doing that, you resize the Shell window, the tree return to correct size.

I changed the code to:


package com.azew.azewexplorer.test;

import org.eclipse.swt.SWT;
import org.eclipse.swt.events.SelectionAdapter;
import org.eclipse.swt.events.SelectionEvent;
import org.eclipse.swt.layout.GridData;
import org.eclipse.swt.layout.GridLayout;
import org.eclipse.swt.widgets.Button;
import org.eclipse.swt.widgets.Display;
import org.eclipse.swt.widgets.Shell;
import org.eclipse.swt.widgets.Tree;
import org.eclipse.swt.widgets.TreeItem;

public class TestPack extends Shell {

    private Tree tree;
    /**
     * Launch the application
     * @param args
     */
    public static void main(String args[]) {
        try {
            Display display = Display.getDefault();
            TestPack shell = new TestPack(display, SWT.SHELL_TRIM);
            shell.open();
            shell.layout();
            while (!shell.isDisposed()) {
                if (!display.readAndDispatch())
                    display.sleep();
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    /**
     * Create the shell
     * @param display
     * @param style
     */
    public TestPack(Display display, int style) {
        super(display, style);
        createContents();
    }

    /**
     * Create contents of the window
     */
    protected void createContents() {
        setText("SWT Application");
        setSize(500, 375);
        setLayout(new GridLayout());

        final Button packButton = new Button(this, SWT.NONE);
        packButton.setLayoutData(new GridData(116, 63));

        packButton.setText("pack()");

        tree = new Tree(this, SWT.BORDER);
        tree.setLayoutData(new GridData(GridData.FILL, GridData.FILL, true, true));

        final TreeItem newItemTreeItem = new TreeItem(tree, SWT.NONE);
        newItemTreeItem.setText("New item");

        final TreeItem newItemTreeItem_1 = new TreeItem(newItemTreeItem, SWT.NONE);
        newItemTreeItem_1.setText("New item");
        //
        
        packButton.addSelectionListener(new SelectionAdapter() {
            public void widgetSelected(final SelectionEvent e) {
                packButton.pack();
                tree.pack();
            }
        });
    }

    @Override
    protected void checkSubclass() {
        // Disable the check that prevents subclassing of SWT components
    }

}

When clicking the button, button and tree become smaller, but the tree and button borders are not the same distance as before.

I think, GridLayout should automatically layout the Button and Tree after clicking the button, not after resizing the Shell window.


When you call pack() on the button and the tree, both controls will be
correctly resized to their preferred sizes (their locations will not change).
The layout of the parent (the shell) is not involved in any of this.
In fact, calling pack() on controls that are already managed by a layout
is not a thing one would normally do. What is your code trying to accomplish?
Did you mean to call pack() on the shell?
Hi Florian Priester,

I have two toolbars(one is higher, another is lower) and an text area(below the two toolbars) in the Shell window, they are managed by the GridLayout.

If I disposed the lower toolbar, there will be a big gray rectangle appear at the place of the seconde toolbar.

When you resize the Shell window, the gray rectangle will disappear.

I think the GridLayout should automatically re-layout the window, not after resizing the window
Please run the following code, and you will understand what I meant:



import org.eclipse.swt.SWT;
import org.eclipse.swt.events.SelectionAdapter;
import org.eclipse.swt.events.SelectionEvent;
import org.eclipse.swt.layout.GridData;
import org.eclipse.swt.layout.GridLayout;
import org.eclipse.swt.widgets.Button;
import org.eclipse.swt.widgets.Display;
import org.eclipse.swt.widgets.Label;
import org.eclipse.swt.widgets.Shell;
import org.eclipse.swt.widgets.ToolBar;
import org.eclipse.swt.widgets.ToolItem;

public class TestLayout2 extends Shell {

    /**
     * Launch the application
     * @param args
     */
    public static void main(String args[]) {
        try {
            Display display = Display.getDefault();
            TestLayout2 shell = new TestLayout2(display, SWT.SHELL_TRIM);
            shell.open();
            shell.layout();
            while (!shell.isDisposed()) {
                if (!display.readAndDispatch())
                    display.sleep();
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    /**
     * Create the shell
     * @param display
     * @param style
     */
    public TestLayout2(Display display, int style) {
        super(display, style);
        createContents();
    }

    /**
     * Create contents of the window
     */
    protected void createContents() {
        setText("SWT Application");
        setSize(728, 486);
        setLayout(new GridLayout());

        final ToolBar toolBar = new ToolBar(this, SWT.FLAT);
        toolBar.setLayoutData(new GridData(GridData.FILL, GridData.CENTER, true, false));

        final ToolItem newItemToolItem = new ToolItem(toolBar, SWT.PUSH);
        newItemToolItem.setText("ToolBar Item 11");

        final ToolItem newItemToolItem_3 = new ToolItem(toolBar, SWT.PUSH);
        newItemToolItem_3.setText("12ToolBar Item 1");

        final ToolBar toolBar_1 = new ToolBar(this, SWT.FLAT);
        toolBar_1.setLayoutData(new GridData(GridData.FILL, GridData.CENTER, true, false));

        final ToolItem newItemToolItem_1 = new ToolItem(toolBar_1, SWT.PUSH);
        newItemToolItem_1.setText("ToolBar Item 21");

        final ToolItem newItemToolItem_2 = new ToolItem(toolBar_1, SWT.PUSH);
        newItemToolItem_2.setText("ToolBar Item 22");

        final Button clickMeToButton = new Button(this, SWT.NONE);
        clickMeToButton.addSelectionListener(new SelectionAdapter() {
            public void widgetSelected(final SelectionEvent e) {
                toolBar_1.dispose();
            }
        });
        clickMeToButton.setLayoutData(new GridData(GridData.FILL, GridData.FILL, true, true));
        clickMeToButton.setText("Click me to dispose 2nd ToolBar,\n the GridLayout is useless until you resize the window");
        //
    }

    @Override
    protected void checkSubclass() {
        // Disable the check that prevents subclassing of SWT components
    }

}
You need to call layout() on the shell after disposing the tool bar:

  clickMeToButton.addSelectionListener(new SelectionAdapter() {
    public void widgetSelected(final SelectionEvent e) {
      toolBar_1.dispose();
      layout(); // &lt;- add this line
    }
  });

Disposing a child does not automatically re-layout its parent in SWT.
Calling pack(), setBounds(), setSize(), setLocation() is not valid when combined with any layout.  The layout is managing the size and position of the controls so the application should not do so as well.

Closing this bug as invalid.

Thanks Florian for helping fx figure out his bug.
Thank you!</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="126451" />
    <CreationDate amount="2006-02-04 09:10:00 -0500" />
    <DupId amount="" />
    <classification amount="RT" />
    <Product amount="Equinox" />
    <component amount="Framework" />
    <Version amount="3.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>[launcher] ensure the launchers feature does not contain the launchers</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="WONTFIX" />
    <WithStack>in 3.1 we made a mistake and put the launchers themselves in the launchers feature.  This resulted in the launchers feature jar being 3MB rather then a few KB and impacts update performance.  We should look at moving the launchers themselves out into a data file that is referenced from the feature.
Think this is one for Andrew?
The launcher feature still contains the launcher binaries.
Despite the confusing title (what was I thinking?! What does the launchers feature contain if not the launchers...)  Is this still relevant?  Update manager now has a caching mechanism that may render this optimization moot.
Is this still an issue.  Do we have a launchers feature anymore?  I know we have an org.eclipse.equinox.executable feature and this feature DOES still include all the launchers for the delta pack.  Is this something we would want to change?
Closing as wontfix.  The I don't think we want to remove the launchers from the executable feature.  Jeff, please correct me if I am wrong.
*** Bug 152034 has been marked as a duplicate of this bug. ***</WithStack>
    <WithOutStack>in 3.1 we made a mistake and put the launchers themselves in the launchers feature.  This resulted in the launchers feature jar being 3MB rather then a few KB and impacts update performance.  We should look at moving the launchers themselves out into a data file that is referenced from the feature.
Think this is one for Andrew?
The launcher feature still contains the launcher binaries.
Despite the confusing title (what was I thinking?! What does the launchers feature contain if not the launchers...)  Is this still relevant?  Update manager now has a caching mechanism that may render this optimization moot.
Is this still an issue.  Do we have a launchers feature anymore?  I know we have an org.eclipse.equinox.executable feature and this feature DOES still include all the launchers for the delta pack.  Is this something we would want to change?
Closing as wontfix.  The I don't think we want to remove the launchers from the executable feature.  Jeff, please correct me if I am wrong.
*** Bug 152034 has been marked as a duplicate of this bug. ***</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="126452" />
    <CreationDate amount="2006-02-04 09:39:00 -0500" />
    <DupId amount="126291" />
    <classification amount="WebTools" />
    <Product amount="WTP Java EE Tools" />
    <component amount="jst.j2ee" />
    <Version amount="1.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="major" />
    <Summery>META-INF/ejb-jar.xml in xxx-ejb.jar in xxx.ear not included on publish</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="4">
        <Lines>
          <Line>- 1 EJB Project</Line>
          <Line>- 1 Dynamic Web Project</Line>
          <Line>- 1 EAR Project</Line>
          <Line>- and some utility projects.</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="CLOSED" />
    <resolution amount="DUPLICATE" />
    <WithStack>I use WTP 1.0 patched M200602010238 on PC with WebLogic 9.1

I have build web application including:
- 1 EJB Project
- 1 Dynamic Web Project
- 1 EAR Project
- and some utility projects.

In case of 'Export...&gt;EAR file' on EAR project,
xxx.ear &gt; xxx-ejb.jar &gt; META-INF/ejb-jar.xml was generated successfully.

But, 'Publish' from Servers view,
d:/bea/xxx/yyy/zzz/autodeploy/xxx.ear &gt; xxx-ejb.jar is not include META-INF/ejb-jar.xml
I'm thinking this may be a duplicate of: https://bugs.eclipse.org/bugs/show_bug.cgi?id=126291

Can you paste or attach your .component file here?

Thanks.
The EJB project's .component file that is


*** This bug has been marked as a duplicate of 126291 ***
Where is released 1.0.1 ?
I have Installed wtp-sdk-M200602141429.
And, publish to WebLogic 9.1.

 [EJB:010120] error : deployment descriptor 'META-INF/ejb-jar.xml'  'D:\bea\user_projects\domains\base_domain\.\servers\AdminServer\tmp\_WL_user\_appsdir_sandbox_ear\ku3blk\sandbox-ejb.jar' ...
	at weblogic.ejb.container.deployer.EJBModule.prepare(EJBModule.java:381)
	at weblogic.application.internal.flow.ModuleListenerInvoker.prepare(ModuleListenerInvoker.java:90)
	at weblogic.application.internal.flow.DeploymentCallbackFlow$1.next(DeploymentCallbackFlow.java:318)
	at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:26)
	at weblogic.application.internal.flow.DeploymentCallbackFlow.prepare(DeploymentCallbackFlow.java:53)
	Truncated. see log file for complete stacktrace


sandbox.ear includes:
 sandbox-web.war
 sandbox-common.war
 sandbox-ejb.jar
 sandgoc-ejbClient.jar

sandbox-ejb/.settings/.component:
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;project-modules id="moduleCoreId"&gt;
&lt;wb-module deploy-name="sthdg-common-ejb"&gt;
&lt;wb-resource deploy-path="/" source-path="/build/src"/&gt;
&lt;wb-resource deploy-path="/" source-path="/src"/&gt;
&lt;wb-resource deploy-path="/" source-path="/ejbModule"/&gt;
&lt;dependent-module deploy-path="/" handle="module:/resource/sthdg-common-ejbClient/sthdg-common-ejbClient"&gt;
&lt;dependency-type&gt;uses&lt;/dependency-type&gt;
&lt;/dependent-module&gt;
&lt;dependent-module deploy-path="/" handle="module:/resource/sthdg-common-lib/sthdg-common-lib"&gt;
&lt;dependency-type&gt;uses&lt;/dependency-type&gt;
&lt;/dependent-module&gt;
&lt;property name="java-output-path" value="/build/classes/"/&gt;
&lt;property name="ClientProject" value="sthdg-common-ejbClient"/&gt;
&lt;property name="ClientJARURI" value="sthdg-common-ejbClient.jar"/&gt;
&lt;/wb-module&gt;
&lt;/project-modules&gt;

And,
...\workspace\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\sandbox\sandbox-ejb.jar  including only META-INF/ folder.
(In reply to comment #2)
&gt; The EJB project's .component file that is
&gt; 
Sorry, It's my fault...
sandbox-ejb's ejb-jar.xml has some validation errors because sandbox-ejb has no Bean.


verified 20060925
Closing.</WithStack>
    <WithOutStack>I use WTP 1.0 patched M200602010238 on PC with WebLogic 9.1

I have build web application including:
- 1 EJB Project
- 1 Dynamic Web Project
- 1 EAR Project
- and some utility projects.

In case of 'Export...&gt;EAR file' on EAR project,
xxx.ear &gt; xxx-ejb.jar &gt; META-INF/ejb-jar.xml was generated successfully.

But, 'Publish' from Servers view,
d:/bea/xxx/yyy/zzz/autodeploy/xxx.ear &gt; xxx-ejb.jar is not include META-INF/ejb-jar.xml
I'm thinking this may be a duplicate of: https://bugs.eclipse.org/bugs/show_bug.cgi?id=126291

Can you paste or attach your .component file here?

Thanks.
The EJB project's .component file that is


*** This bug has been marked as a duplicate of 126291 ***
Where is released 1.0.1 ?
I have Installed wtp-sdk-M200602141429.
And, publish to WebLogic 9.1.

 [EJB:010120] error : deployment descriptor 'META-INF/ejb-jar.xml'  'D:\bea\user_projects\domains\base_domain\.\servers\AdminServer\tmp\_WL_user\_appsdir_sandbox_ear\ku3blk\sandbox-ejb.jar' ...
	at weblogic.ejb.container.deployer.EJBModule.prepare(EJBModule.java:381)
	at weblogic.application.internal.flow.ModuleListenerInvoker.prepare(ModuleListenerInvoker.java:90)
	at weblogic.application.internal.flow.DeploymentCallbackFlow$1.next(DeploymentCallbackFlow.java:318)
	at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:26)
	at weblogic.application.internal.flow.DeploymentCallbackFlow.prepare(DeploymentCallbackFlow.java:53)
	Truncated. see log file for complete stacktrace


sandbox.ear includes:
 sandbox-web.war
 sandbox-common.war
 sandbox-ejb.jar
 sandgoc-ejbClient.jar

sandbox-ejb/.settings/.component:
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;project-modules id="moduleCoreId"&gt;
&lt;wb-module deploy-name="sthdg-common-ejb"&gt;
&lt;wb-resource deploy-path="/" source-path="/build/src"/&gt;
&lt;wb-resource deploy-path="/" source-path="/src"/&gt;
&lt;wb-resource deploy-path="/" source-path="/ejbModule"/&gt;
&lt;dependent-module deploy-path="/" handle="module:/resource/sthdg-common-ejbClient/sthdg-common-ejbClient"&gt;
&lt;dependency-type&gt;uses&lt;/dependency-type&gt;
&lt;/dependent-module&gt;
&lt;dependent-module deploy-path="/" handle="module:/resource/sthdg-common-lib/sthdg-common-lib"&gt;
&lt;dependency-type&gt;uses&lt;/dependency-type&gt;
&lt;/dependent-module&gt;
&lt;property name="java-output-path" value="/build/classes/"/&gt;
&lt;property name="ClientProject" value="sthdg-common-ejbClient"/&gt;
&lt;property name="ClientJARURI" value="sthdg-common-ejbClient.jar"/&gt;
&lt;/wb-module&gt;
&lt;/project-modules&gt;

And,
...\workspace\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\sandbox\sandbox-ejb.jar  including only META-INF/ folder.
(In reply to comment #2)
&gt; The EJB project's .component file that is
&gt; 
Sorry, It's my fault...
sandbox-ejb's ejb-jar.xml has some validation errors because sandbox-ejb has no Bean.


verified 20060925
Closing.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="126453" />
    <CreationDate amount="2006-02-04 09:39:00 -0500" />
    <DupId amount="" />
    <classification amount="Modeling" />
    <Product amount="EMF" />
    <component amount="Core" />
    <Version amount="2.2" />
    <rep_platform amount="Macintosh" />
    <op_sys amount="Mac OS X - Carbon (unsup.)" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Non-containment references &amp; enums are not selectable in generated editor properties</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="2">
      <source_code type="assignment">
        <location start="2089" end="2125" />
        <code>String result = getLiteralGen();</code>
      </source_code>
      <source_code type="assignment">
        <location start="2126" end="2173" />
        <code>return result == null ? getName() : result;</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="WORKSFORME" />
    <WithStack>2.2.0 M4 and I200602020000

If you have a model with non-containment references or enums, you can't select them using the generated editor properties view.  When you click the box in the properties view and click the expand triangle, the slection is empty.
Clarification: The problem is for non-containment references with cardinality 0..1.  The problem does not exist for cardinality 0..n.  The ... button case works, the tirangle select one from the list does not.
Bryan,

I should be able to reproduce this with the schema library example from the tutorial, but that works fine.  Are you unable to set the author or category of a book for that example?  Is this problem maybe platform specific?
I tracked down the problem with enums not working.  If you create a model using the ecore editor, create an enum, leave out the text for the Literal field, and generate code, you get an empty selection.  This was a bug on my part.

Now, if you use the ecore editor to change the Literal field of an enum, the changes do not get merged into the edit plugin.properties file.  This is reproducible with the tutorial example.  Simply open the library.ecore, change one of the Literals of the BookCategory, and regen the edit plugin.

The problem with the class reference appears to be isolated to a specific case, and I won't be able to track it down until I get home.
Bryan,

Are you sure? I can't reproduce this and I should be able to for the library example because it doesn't define explicit literal values, only the names:

  &lt;eClassifiers xsi:type="ecore:EEnum" name="BookCategory"&gt;
    &lt;eAnnotations source="http:///org/eclipse/emf/ecore/util/ExtendedMetaData"&gt;
      &lt;details key="name" value="BookCategory"/&gt;
    &lt;/eAnnotations&gt;
    &lt;eLiterals name="Mystery"/&gt;
    &lt;eLiterals name="ScienceFiction" value="1"/&gt;
    &lt;eLiterals name="Biography" value="2"/&gt;
  &lt;/eClassifiers&gt;

And since if the literal is missing the name is returned (in EEnumLiteralImpl), I'm very doubtful about the problem:

  public String getLiteralGen()
  {
    return literal;
  }

  public String getLiteral()
  {
    String result = getLiteralGen();
    return result == null ? getName() : result;
  }

Are you sure you haven't defined enum literals with the empty string as their literal value?

Note that only new properties are added to a .properties file.  Existing properties are never changed once they exist (so that user changes will persist).

Sorry, I'll return it as works for me pending an example that I can use to reproduce the problem.

Ok, the problem was that since the Literal was blank, entries were put in the properties file with no value.  And since changes don't merge as you have indicated, setting the Literal in the ecore editor has no effect.  Not sure if you want to consider this a bug with blank entries put in the properties file, or just usesr error.  I'm fine with user error.
Bryan,

There will need to be constraint that the literal values must be unique:
  https://bugs.eclipse.org/bugs/show_bug.cgi?id=75933
But I'm not sure the empty string should be explicitly disallowed.  In fact, it probably should be allowed...</WithStack>
    <WithOutStack>2.2.0 M4 and I200602020000

If you have a model with non-containment references or enums, you can't select them using the generated editor properties view.  When you click the box in the properties view and click the expand triangle, the slection is empty.
Clarification: The problem is for non-containment references with cardinality 0..1.  The problem does not exist for cardinality 0..n.  The ... button case works, the tirangle select one from the list does not.
Bryan,

I should be able to reproduce this with the schema library example from the tutorial, but that works fine.  Are you unable to set the author or category of a book for that example?  Is this problem maybe platform specific?
I tracked down the problem with enums not working.  If you create a model using the ecore editor, create an enum, leave out the text for the Literal field, and generate code, you get an empty selection.  This was a bug on my part.

Now, if you use the ecore editor to change the Literal field of an enum, the changes do not get merged into the edit plugin.properties file.  This is reproducible with the tutorial example.  Simply open the library.ecore, change one of the Literals of the BookCategory, and regen the edit plugin.

The problem with the class reference appears to be isolated to a specific case, and I won't be able to track it down until I get home.
Bryan,

Are you sure? I can't reproduce this and I should be able to for the library example because it doesn't define explicit literal values, only the names:

  &lt;eClassifiers xsi:type="ecore:EEnum" name="BookCategory"&gt;
    &lt;eAnnotations source="http:///org/eclipse/emf/ecore/util/ExtendedMetaData"&gt;
      &lt;details key="name" value="BookCategory"/&gt;
    &lt;/eAnnotations&gt;
    &lt;eLiterals name="Mystery"/&gt;
    &lt;eLiterals name="ScienceFiction" value="1"/&gt;
    &lt;eLiterals name="Biography" value="2"/&gt;
  &lt;/eClassifiers&gt;

And since if the literal is missing the name is returned (in EEnumLiteralImpl), I'm very doubtful about the problem:

  public String getLiteralGen()
  {
    return literal;
  }

  public String getLiteral()
  {
    String result = getLiteralGen();
    return result == null ? getName() : result;
  }

Are you sure you haven't defined enum literals with the empty string as their literal value?

Note that only new properties are added to a .properties file.  Existing properties are never changed once they exist (so that user changes will persist).

Sorry, I'll return it as works for me pending an example that I can use to reproduce the problem.

Ok, the problem was that since the Literal was blank, entries were put in the properties file with no value.  And since changes don't merge as you have indicated, setting the Literal in the ecore editor has no effect.  Not sure if you want to consider this a bug with blank entries put in the properties file, or just usesr error.  I'm fine with user error.
Bryan,

There will need to be constraint that the literal values must be unique:
  https://bugs.eclipse.org/bugs/show_bug.cgi?id=75933
But I'm not sure the empty string should be explicitly disallowed.  In fact, it probably should be allowed...</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="126454" />
    <CreationDate amount="2006-02-04 10:01:00 -0500" />
    <DupId amount="" />
    <classification amount="Modeling" />
    <Product amount="MDT.OCL" />
    <component amount="Core" />
    <Version amount="1.0.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Misparse of Collection Operation</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="WORKSFORME" />
    <WithStack>The following OCL expression

self.e-&gt;sum()

successfuly parses as an invariant but toString yields

Set {self.e}.sum()

whereas self.e.sum()

parses but fails to validate since the parse has inserted a collect() that
causes the operation validation to use the element rather than the set type.
I don't see any problem in converting this expression to a string and parsing the result.

If I create the following metamodel:

   EPackage pkg1
      EClass C1
          EAttribute e : EInt

where e is a scalar (multiplicity 0..1), then parsing

   self.e-&gt;sum()

and invoking OCLExpression.toString() results in 

   Set {self.e}-&gt;sum()

This successfully (re)parses and evaluates on instances of C1.
Note, in particular, that the result of toString() uses the arrow (-&gt;) syntax, not dot (.) as reported.  The dot syntax should not parse, as collection operations require the arrow.  Also, "self.e.sum()" should not parse because the OCL Integer type does not define a sum() operation.

I am using the 1.0.0M5 version.
Works for me too. Problem caused by a duff tutorial example.
Oh, was that an EMFT or GMF tutorial? (the EMFT OCL parser was incubated for a time in GMF).  If so, I would like to fix it.
No, it was the GMT/ATL Book2Publication example.
The ATL subset OCL parser doesn't distinguish . and -&gt;
Closing after over 18 months in resolved state.</WithStack>
    <WithOutStack>The following OCL expression

self.e-&gt;sum()

successfuly parses as an invariant but toString yields

Set {self.e}.sum()

whereas self.e.sum()

parses but fails to validate since the parse has inserted a collect() that
causes the operation validation to use the element rather than the set type.
I don't see any problem in converting this expression to a string and parsing the result.

If I create the following metamodel:

   EPackage pkg1
      EClass C1
          EAttribute e : EInt

where e is a scalar (multiplicity 0..1), then parsing

   self.e-&gt;sum()

and invoking OCLExpression.toString() results in 

   Set {self.e}-&gt;sum()

This successfully (re)parses and evaluates on instances of C1.
Note, in particular, that the result of toString() uses the arrow (-&gt;) syntax, not dot (.) as reported.  The dot syntax should not parse, as collection operations require the arrow.  Also, "self.e.sum()" should not parse because the OCL Integer type does not define a sum() operation.

I am using the 1.0.0M5 version.
Works for me too. Problem caused by a duff tutorial example.
Oh, was that an EMFT or GMF tutorial? (the EMFT OCL parser was incubated for a time in GMF).  If so, I would like to fix it.
No, it was the GMT/ATL Book2Publication example.
The ATL subset OCL parser doesn't distinguish . and -&gt;
Closing after over 18 months in resolved state.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="126455" />
    <CreationDate amount="2006-02-04 11:52:00 -0500" />
    <DupId amount="126104" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="Resources" />
    <Version amount="3.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Build folders not created on check-out</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="7">
        <Lines>
          <Line>1) create a folder called Build, outside of the workspace structure</Line>
          <Line>2) create a linked resource to this folder called BUILD</Line>
          <Line>3) create a project called 'xx' and sets its output folder to BUILD\xx</Line>
          <Line>4) commit the project/classpath files to CVS</Line>
          <Line>5) start a new workspace</Line>
          <Line>6) create a build folder and BUILD linked resource</Line>
          <Line>7) check out the xx project and note that the build fails as BUILD\xx is not being automatically created.</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="RESOLVED" />
    <resolution amount="DUPLICATE" />
    <WithStack>I use linked folders for my projects' build areas. For example I create a Build\ folder parallel to my workspace\ and direct all project builds there to keep them apart from my project source.

Thus each project has an output folder of BUILD\projectName where BUILD is a linked resource pointing to my builds folder.

This works just fine during code development but is now breaking when I recreate a workspace - which is, I believe, a change in behaviour over previous releases.

If I commit my proect file to CVS, all is fine - but if I create a new workspace, and create the BUILD linked resource and folder, checking out a project does not create the BUILD\projectName output folder and thus builds fail to work until I manually create the folder.

This is a real pain, especially with team project sets where there are multiple projects and I have to recreate each build folder by hand

I don't know if I've expressed that clearly, so here's another go...
1) create a folder called Build, outside of the workspace structure
2) create a linked resource to this folder called BUILD
3) create a project called 'xx' and sets its output folder to BUILD\xx
4) commit the project/classpath files to CVS
5) start a new workspace
6) create a build folder and BUILD linked resource
7) check out the xx project and note that the build fails as BUILD\xx is not being automatically created.

This is observed in 3.2 M4, but has not been present in previous build 3.0, 3.1 or 3.2
I have noticed this in other situations - perhaps when there are multiple output folders for a project, so the fail case described may not be the only one


*** This bug has been marked as a duplicate of 126104 ***</WithStack>
    <WithOutStack>I use linked folders for my projects' build areas. For example I create a Build\ folder parallel to my workspace\ and direct all project builds there to keep them apart from my project source.

Thus each project has an output folder of BUILD\projectName where BUILD is a linked resource pointing to my builds folder.

This works just fine during code development but is now breaking when I recreate a workspace - which is, I believe, a change in behaviour over previous releases.

If I commit my proect file to CVS, all is fine - but if I create a new workspace, and create the BUILD linked resource and folder, checking out a project does not create the BUILD\projectName output folder and thus builds fail to work until I manually create the folder.

This is a real pain, especially with team project sets where there are multiple projects and I have to recreate each build folder by hand

I don't know if I've expressed that clearly, so here's another go...
1) create a folder called Build, outside of the workspace structure
2) create a linked resource to this folder called BUILD
3) create a project called 'xx' and sets its output folder to BUILD\xx
4) commit the project/classpath files to CVS
5) start a new workspace
6) create a build folder and BUILD linked resource
7) check out the xx project and note that the build fails as BUILD\xx is not being automatically created.

This is observed in 3.2 M4, but has not been present in previous build 3.0, 3.1 or 3.2
I have noticed this in other situations - perhaps when there are multiple output folders for a project, so the fail case described may not be the only one


*** This bug has been marked as a duplicate of 126104 ***</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="126456" />
    <CreationDate amount="2006-02-04 13:59:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse Foundation" />
    <Product amount="Community" />
    <component amount="Process" />
    <Version amount="unspecified" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P4" />
    <bug_severity amount="enhancement" />
    <Summery>Centralized repository of requirements</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>There should be a centralized place that explicitly lists all requirements for Eclipse.org software. There are a few different resources which mention requirements informally that I know of, some of which are:

http://www.eclipse.org/legal/guidetolegaldoc.php
http://www.eclipse.org/projects/dev_process/project-status-infrastructure-page1.php
http://www.eclipse.org/projects/dev_process/example-project-info.xml (contained in the above tutorial, but mentions several requirements)
http://www.eclipse.org/articles/Article-UI-Guidelines/Contents.html

Where possible, I believe the requirements embedded in these documents should be available separately in a consistent, easily testable checklist format similar to how the UI guidelines are succintly summarized. While investigating for my own project I identified a noncompliance issue in a large Eclipse.org project, which I reported. I believe that compliance rates with requirements would improve if there was one repository of these requirements and it would also serve as a place to make sure that all requirements can be viewed relative to one another, decreasing the chance of conflicting or overlapping requirements. It would also make it easy to create an RSS feed or changelog of what is new that you have to make sure to do to be in compliance.
Let's call them "requirements" (must) and "recommendations" (should) and "advice" (could). Anyway, I'll work on this.
Personally, I think that a centralized repository would be pretty difficult to create. There are quite a few bits and pieces coming in from different perspectives - legal and process to name just two.

That said, this is a good idea, and we should figure out a way to accomplish the goal.

Bjorn --- remember the conversations we had a while back about enabling some sort of tagging mechanism for the site? This sort of "cross cutting concern" seems like it would be an ideal application of that, no?
I envision a checklist page that points to the details on all the other pages.
We now have a central documentation point on the wiki: http://wiki.eclipse.org/Development_Resources
This is not a complete solution to this bug, but it is a good place for people who ideas about how we should set up these checklists to start working. I'm closing this bug as fixed we'll see what the community comes up with for structure on the wiki.</WithStack>
    <WithOutStack>There should be a centralized place that explicitly lists all requirements for Eclipse.org software. There are a few different resources which mention requirements informally that I know of, some of which are:

http://www.eclipse.org/legal/guidetolegaldoc.php
http://www.eclipse.org/projects/dev_process/project-status-infrastructure-page1.php
http://www.eclipse.org/projects/dev_process/example-project-info.xml (contained in the above tutorial, but mentions several requirements)
http://www.eclipse.org/articles/Article-UI-Guidelines/Contents.html

Where possible, I believe the requirements embedded in these documents should be available separately in a consistent, easily testable checklist format similar to how the UI guidelines are succintly summarized. While investigating for my own project I identified a noncompliance issue in a large Eclipse.org project, which I reported. I believe that compliance rates with requirements would improve if there was one repository of these requirements and it would also serve as a place to make sure that all requirements can be viewed relative to one another, decreasing the chance of conflicting or overlapping requirements. It would also make it easy to create an RSS feed or changelog of what is new that you have to make sure to do to be in compliance.
Let's call them "requirements" (must) and "recommendations" (should) and "advice" (could). Anyway, I'll work on this.
Personally, I think that a centralized repository would be pretty difficult to create. There are quite a few bits and pieces coming in from different perspectives - legal and process to name just two.

That said, this is a good idea, and we should figure out a way to accomplish the goal.

Bjorn --- remember the conversations we had a while back about enabling some sort of tagging mechanism for the site? This sort of "cross cutting concern" seems like it would be an ideal application of that, no?
I envision a checklist page that points to the details on all the other pages.
We now have a central documentation point on the wiki: http://wiki.eclipse.org/Development_Resources
This is not a complete solution to this bug, but it is a good place for people who ideas about how we should set up these checklists to start working. I'm closing this bug as fixed we'll see what the community comes up with for structure on the wiki.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="126457" />
    <CreationDate amount="2006-02-04 14:13:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="Doc" />
    <Version amount="3.1" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="minor" />
    <Summery>3 garbled pages in the english documentation</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="INVALID" />
    <WithStack>The pages 1131 to 1133 (reader's numbering) of the document "Platform Plug-in Developer Guide" (org.eclipse.platform.doc.isv.3.1.pdf) are completely garbled in Acrobat 5.0 and Foxit pdf reader 1.3.
We no longer produce PDF documentation as far as I know.</WithStack>
    <WithOutStack>The pages 1131 to 1133 (reader's numbering) of the document "Platform Plug-in Developer Guide" (org.eclipse.platform.doc.isv.3.1.pdf) are completely garbled in Acrobat 5.0 and Foxit pdf reader 1.3.
We no longer produce PDF documentation as far as I know.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="126458" />
    <CreationDate amount="2006-02-04 14:27:00 -0500" />
    <DupId amount="" />
    <classification amount="WebTools" />
    <Product amount="WTP Releng" />
    <component amount="releng" />
    <Version amount="unspecified" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>underscores in version qualifiers don't work well</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>While the OSGI spec says underscores and hyphens (and alphanumerics) are all allowable in version qualifiers, there's some part of Eclipse tooling that's hapving problems with underscores (see bug 89428). In brief, in 3.1.x stream, source isn't associated with its code plugins correctly, and in 3.1 and 3.2 there are some erroneous warning messages. While everything *runs* fine, we should not use underscores in our qualifiers to avoid this problems. 

We can re-consider in some future version one all is known to work as espected.
This is basically "fixed" (now being policy).

This is part of a mass update to close out all stale WTP defects already verified by the reporter but awaiting closure by the assignee.  If you feel this defect was closed inappropriately, please reopen.

Thanks, John Lanuti</WithStack>
    <WithOutStack>While the OSGI spec says underscores and hyphens (and alphanumerics) are all allowable in version qualifiers, there's some part of Eclipse tooling that's hapving problems with underscores (see bug 89428). In brief, in 3.1.x stream, source isn't associated with its code plugins correctly, and in 3.1 and 3.2 there are some erroneous warning messages. While everything *runs* fine, we should not use underscores in our qualifiers to avoid this problems. 

We can re-consider in some future version one all is known to work as espected.
This is basically "fixed" (now being policy).

This is part of a mass update to close out all stale WTP defects already verified by the reporter but awaiting closure by the assignee.  If you feel this defect was closed inappropriately, please reopen.

Thanks, John Lanuti</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="126459" />
    <CreationDate amount="2006-02-04 14:53:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="UI" />
    <Version amount="3.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>[Common Navigator] CommonViewer should use TreePathViewerSorter</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>The spec of CommonViewerSorter states that it must be used with a CommonViewer. However, there is nothing in the class that has a depencency on CommonViewer. The only dependency is on INavigatorContentService. Unless there is some reason to do so, I think that CommonViewer should be a convenience class and there should be no reference to it from the INavigatorContentService, INavigatorActionService or CommonViewerSorter.

Here is the reason for my request. One of the things we have in Team is a global synchronization wizard. From this, the user can browse the workspace and select what resources they want to synchronize. I have extended this to use the Common Navigator framework. The tricky part is that the tree is a ContainerCheckedTreeViewer. I was able to use an INavigatorContentService with this viewer with no problems. I want to use the CommonViewerSorter as well and there does not appear to be anything in the implementation that would prevent it's use.
The biggest connection between the CommonViewerSorter and CommonViewer seems to be that the viewer needs to provide the sorter with the parent when sorting. Given the recent work on support for TreePaths in the JFace tree viewer, I think it would be worthwhile to create a TreePath based sorter and have it live in JFace. An added benefit of this would be that the CommonViewer would not need to override as many methods.

Nick and Michael, does this seem reasonable? If it does, I can help with the implementation if needed. I've been looking at support for TreePath based content providers already (see bug 122756).
As for the use of the INavigatorContentService in a CheckboxTreeViewer (i.e. not a subclass of CommonViewer), can you think of any gotchas I should be aware of? I haven't seen any problems yet.
Created attachment 34166
Patch to add TreePathViewerSorter to JFace

Here's the patch that adds the TreePathViewerSorter to JFace and converts the CommonViewerSorter to use that sorter (and removes the copied code from CommonViewer).
I have logged bug 126506 to add the TreePathViewerSorter to JFace
This was also scoped for M5. The change is required to make better use of JFace API that was introduced in M5.
+1 to applying the patch.


Released the patch. Added a work around due to bug 129193.

Fixed.</WithStack>
    <WithOutStack>The spec of CommonViewerSorter states that it must be used with a CommonViewer. However, there is nothing in the class that has a depencency on CommonViewer. The only dependency is on INavigatorContentService. Unless there is some reason to do so, I think that CommonViewer should be a convenience class and there should be no reference to it from the INavigatorContentService, INavigatorActionService or CommonViewerSorter.

Here is the reason for my request. One of the things we have in Team is a global synchronization wizard. From this, the user can browse the workspace and select what resources they want to synchronize. I have extended this to use the Common Navigator framework. The tricky part is that the tree is a ContainerCheckedTreeViewer. I was able to use an INavigatorContentService with this viewer with no problems. I want to use the CommonViewerSorter as well and there does not appear to be anything in the implementation that would prevent it's use.
The biggest connection between the CommonViewerSorter and CommonViewer seems to be that the viewer needs to provide the sorter with the parent when sorting. Given the recent work on support for TreePaths in the JFace tree viewer, I think it would be worthwhile to create a TreePath based sorter and have it live in JFace. An added benefit of this would be that the CommonViewer would not need to override as many methods.

Nick and Michael, does this seem reasonable? If it does, I can help with the implementation if needed. I've been looking at support for TreePath based content providers already (see bug 122756).
As for the use of the INavigatorContentService in a CheckboxTreeViewer (i.e. not a subclass of CommonViewer), can you think of any gotchas I should be aware of? I haven't seen any problems yet.
Created attachment 34166
Patch to add TreePathViewerSorter to JFace

Here's the patch that adds the TreePathViewerSorter to JFace and converts the CommonViewerSorter to use that sorter (and removes the copied code from CommonViewer).
I have logged bug 126506 to add the TreePathViewerSorter to JFace
This was also scoped for M5. The change is required to make better use of JFace API that was introduced in M5.
+1 to applying the patch.


Released the patch. Added a work around due to bug 129193.

Fixed.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="126460" />
    <CreationDate amount="2006-02-04 15:07:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="UI" />
    <Version amount="3.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>[Common Navigator] Make CommonViewerSorter extendable</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="WORKSFORME" />
    <WithStack>At the top level of the sync view, I would like to sort model providers by their extends relationship. I can't see a way to do it with the current API. Because each model providers comes from a different content extension, I can't use a commonSorter extension. I can't write my own sorter from scratch because CommonViewerSorter uses internal NavigatorContentService code. I don't want to rely on priorities because I already know the relationships between the model providers. I could do what I want easily by subclasses CommonViewerSorter to override the compare method.
With the TreePathViewerSorter added to JFace, I should be able to do what I need by wrapping the CommonViewerSorter.</WithStack>
    <WithOutStack>At the top level of the sync view, I would like to sort model providers by their extends relationship. I can't see a way to do it with the current API. Because each model providers comes from a different content extension, I can't use a commonSorter extension. I can't write my own sorter from scratch because CommonViewerSorter uses internal NavigatorContentService code. I don't want to rely on priorities because I already know the relationships between the model providers. I could do what I want easily by subclasses CommonViewerSorter to override the compare method.
With the TreePathViewerSorter added to JFace, I should be able to do what I need by wrapping the CommonViewerSorter.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="126461" />
    <CreationDate amount="2006-02-04 15:18:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="UI" />
    <Version amount="3.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>[Common Navigator] Priority should default to normal</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>I didn't give one of my navigatorContent extensions a priority. As a result, the priority number was a very large number (at least when I debugged it during sorting). The priority should default to some value (either normal or low) when a priority is not specified.
Also, I explicitly set the priority of my extension to "lowest" and expected it to be last but it was first.

The default value has been set to "NORMAL" (It was Int.Max from before the introduction of the priority enum).

Can you clarify the context of the extension being "first" ?
It was at the top of the sorted level in the viewer and I expected it to be at the bottom.

Most of the cases for the navigator seem to always expect higher priority items to be at the top of the list. Therefore the priority enum values have been reversed. The HIGHEST_VALUE is now 0 and the LOWEST_VALUE is now 7. This should correct your problem and I think it makes the most sense.</WithStack>
    <WithOutStack>I didn't give one of my navigatorContent extensions a priority. As a result, the priority number was a very large number (at least when I debugged it during sorting). The priority should default to some value (either normal or low) when a priority is not specified.
Also, I explicitly set the priority of my extension to "lowest" and expected it to be last but it was first.

The default value has been set to "NORMAL" (It was Int.Max from before the introduction of the priority enum).

Can you clarify the context of the extension being "first" ?
It was at the top of the sorted level in the viewer and I expected it to be at the bottom.

Most of the cases for the navigator seem to always expect higher priority items to be at the top of the list. Therefore the priority enum values have been reversed. The HIGHEST_VALUE is now 0 and the LOWEST_VALUE is now 7. This should correct your problem and I think it makes the most sense.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="126462" />
    <CreationDate amount="2006-02-04 15:38:00 -0500" />
    <DupId amount="" />
    <classification amount="WebTools" />
    <Product amount="WTP Java EE Tools" />
    <component amount="jst.j2ee" />
    <Version amount="1.0.1" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="critical" />
    <Summery>setBatch() not refreshing XML model.</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>During long operations, the setBatch api is used on the EMF2DOMRenderer class.
This will "batch" up all the EMF model changes, and when turned off, should update the XML model appropriately at once.

After the model notification is turned back on, the model is never being refreshed.
Created attachment 34147
Renderer patch
Hi David,

I found the problem I was seeing with the setBatch call on the renderer.
After notification was turned back on, the xml model was never refreshed, so I added a line to force the refresh.

Patch attached - I'll let you apply.....
Thanks Chuck, since I was in this code anyway, I fixed up my that setBatchMode(boolean) method to be deprecated, and replaced with the more obvious methods batchModeStart() and batchModeEnd(). 

Should be identical behavior (even if deprecated one still used, but please confirm if you get a chnace. 

ok</WithStack>
    <WithOutStack>During long operations, the setBatch api is used on the EMF2DOMRenderer class.
This will "batch" up all the EMF model changes, and when turned off, should update the XML model appropriately at once.

After the model notification is turned back on, the model is never being refreshed.
Created attachment 34147
Renderer patch
Hi David,

I found the problem I was seeing with the setBatch call on the renderer.
After notification was turned back on, the xml model was never refreshed, so I added a line to force the refresh.

Patch attached - I'll let you apply.....
Thanks Chuck, since I was in this code anyway, I fixed up my that setBatchMode(boolean) method to be deprecated, and replaced with the more obvious methods batchModeStart() and batchModeEnd(). 

Should be identical behavior (even if deprecated one still used, but please confirm if you get a chnace. 

ok</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="126463" />
    <CreationDate amount="2006-02-04 16:01:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse Foundation" />
    <Product amount="z_Archived" />
    <component amount="VE" />
    <Version amount="unspecified" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>main method not created error message</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="WORKSFORME" />
    <WithStack>I am using eclipse 3.2M4 with VE 1.2 plugin. When I create a java project with a visual class of the swing application and check off public main method choice and click next and finish, it gives me an error message main method not created even though it created a main method.
Created attachment 34148
eclipse log file

I am including the eclipse .log file
Richard,
I cannot recreate this problem. I tried on Eclipse 3.2M4 with VE 1.2M1 and I also tried with the latest VE Integration build VE 20060203 which is based on Eclipse 20060131.

Does this occur everytime you create a new Swing visual class w/Main selected? Or did it just happen this one time?

The .log errors are not related to the error message you got for the "main" problem and since 1.2M1 we have fixed some problems that may have caused some of the errors that were in the .log.
It happened one time. just after i downloaded and installed eclipse 3.2M4 and VE 1.2. it was a main thread exception. I could not reproduced for the life of me. Sorry.
if you want to close this report, you are free to do so. I am using eclipse 3.2M5a with ve 1.2M2. No problems so far.
Thanks for the information... closing...
closed</WithStack>
    <WithOutStack>I am using eclipse 3.2M4 with VE 1.2 plugin. When I create a java project with a visual class of the swing application and check off public main method choice and click next and finish, it gives me an error message main method not created even though it created a main method.
Created attachment 34148
eclipse log file

I am including the eclipse .log file
Richard,
I cannot recreate this problem. I tried on Eclipse 3.2M4 with VE 1.2M1 and I also tried with the latest VE Integration build VE 20060203 which is based on Eclipse 20060131.

Does this occur everytime you create a new Swing visual class w/Main selected? Or did it just happen this one time?

The .log errors are not related to the error message you got for the "main" problem and since 1.2M1 we have fixed some problems that may have caused some of the errors that were in the .log.
It happened one time. just after i downloaded and installed eclipse 3.2M4 and VE 1.2. it was a main thread exception. I could not reproduced for the life of me. Sorry.
if you want to close this report, you are free to do so. I am using eclipse 3.2M5a with ve 1.2M2. No problems so far.
Thanks for the information... closing...
closed</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="126464" />
    <CreationDate amount="2006-02-04 16:02:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="Resources" />
    <Version amount="3.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>[Resource Mapping] Model object of IWorkspaceRoot</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>We need to specify whether or not IWorkspaceRoot will be used as a model object in a resource mapping. If it can be, it needs to be handled properly. I tried a synchronized and got at least one error.
Created attachment 36774
Patch
Here's a patch to SimpleResourceMapping that handles IWorkspaceRoot properly. I think we should spec that a resource of a traversal is never the workspace root.
Michael, can you repatch against HEAD? I released your other change and now can't apply this patch.
Patch applied.</WithStack>
    <WithOutStack>We need to specify whether or not IWorkspaceRoot will be used as a model object in a resource mapping. If it can be, it needs to be handled properly. I tried a synchronized and got at least one error.
Created attachment 36774
Patch
Here's a patch to SimpleResourceMapping that handles IWorkspaceRoot properly. I think we should spec that a resource of a traversal is never the workspace root.
Michael, can you repatch against HEAD? I released your other change and now can't apply this patch.
Patch applied.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="126465" />
    <CreationDate amount="2006-02-04 16:18:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="UI" />
    <Version amount="3.1" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P1" />
    <bug_severity amount="normal" />
    <Summery>[MPE] first page is blank upon creation</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="2">
        <Lines>
          <Line>1. File &gt; New &gt; Other &gt; Product Configuration.</Line>
          <Line>2. Enter the name of a file.  Press Finish.</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="VERIFIED" />
    <resolution amount="FIXED" />
    <WithStack>Build id: I20060131-1200

This one must be a recent regression.

1. File &gt; New &gt; Other &gt; Product Configuration.  
2. Enter the name of a file.  Press Finish.

Note how the first page is completely blank.
If you switch to another page, then return to the first page, it populates fine.

Same thing happens when you create a new Target Definition file.
The problem does not occur if I run against org.eclipse.ui.workbench version I-20060124-0800.
Paul, can you have a look please?

*** Bug 126960 has been marked as a duplicate of this bug. ***
*** Bug 127079 has been marked as a duplicate of this bug. ***
PW,
the problem seems to be in MultiPageEditorPart#createPartControl().

After the call to getTabFolder().setSelection(0), a call to getEditor(0) is returning null for the IEditorPart.
Actually, getEditor(0) returning null was OK, since your form pages aren't editors.

It had to do with changes to setActivePage(*) in createPartControl(*)  The FormEditor overrides setActivePage(*) to do some initialization, and changes to the MultiPageEditorPart initialization changed the event order.  I've reverted it and now the FormEditor based stuff should be fine.

I've opened a request for a minor change to FormEditor, bug 127258, but it doesn't concern this bug.

This exposes bug 121866 

PW

verified in I20060216-0010</WithStack>
    <WithOutStack>Build id: I20060131-1200

This one must be a recent regression.

1. File &gt; New &gt; Other &gt; Product Configuration.  
2. Enter the name of a file.  Press Finish.

Note how the first page is completely blank.
If you switch to another page, then return to the first page, it populates fine.

Same thing happens when you create a new Target Definition file.
The problem does not occur if I run against org.eclipse.ui.workbench version I-20060124-0800.
Paul, can you have a look please?

*** Bug 126960 has been marked as a duplicate of this bug. ***
*** Bug 127079 has been marked as a duplicate of this bug. ***
PW,
the problem seems to be in MultiPageEditorPart#createPartControl().

After the call to getTabFolder().setSelection(0), a call to getEditor(0) is returning null for the IEditorPart.
Actually, getEditor(0) returning null was OK, since your form pages aren't editors.

It had to do with changes to setActivePage(*) in createPartControl(*)  The FormEditor overrides setActivePage(*) to do some initialization, and changes to the MultiPageEditorPart initialization changed the event order.  I've reverted it and now the FormEditor based stuff should be fine.

I've opened a request for a minor change to FormEditor, bug 127258, but it doesn't concern this bug.

This exposes bug 121866 

PW

verified in I20060216-0010</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="126466" />
    <CreationDate amount="2006-02-04 17:08:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse Foundation" />
    <Product amount="z_Archived" />
    <component amount="VE" />
    <Version amount="unspecified" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="enhancement" />
    <Summery>null layout default in content pane</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>I am using eclipse 3.2M4 with VE 1.2 plug-in. Currently, the content pane layout default is borderlayout. borderlayout does not give you free design over the swing frame. You have to go through this hocus pocus or extra steps of fitting swing components in the frame. That is wastes time and does not promote Rapid Application Development or RAD. Please make the content pane layout default to null. The null layout gives free design over the swing frame. You can position swing components very easily.
The use of BorderLayout as the default layout of content panes is intentional - as this is the layout you get by default in content panes from Swing. You can easily select the Content Pane and change its layout by right clicking on it, and choosing another option from the Set Layout menu. If you want to change the default layout of other panels, you can do so from the Visual Editor preferences (under the Swing sub category).  However, using the null layout is discouraged for real world apps, because the sizes of widgets within it do not respond automatically to the resizing of windows, differences in font sizes on various platforms, different string lengths produced by internationalizing text, etc.
Can you make the layouts other than null layout more user friendly or visually manageable by presenting a visual preview editor help adjust position and sizing? Currently, when I use the non-null layouts, either I have to write extra java layout code or use the custom layout grid with the arrows if the layout is support and I go back and forth. It is consuming time.
(In reply to comment #2)
&gt; Can you make the layouts other than null layout more user friendly or visually
&gt; manageable by presenting a visual preview editor help adjust position and
&gt; sizing? Currently, when I use the non-null layouts, either I have to write
&gt; extra java layout code or use the custom layout grid with the arrows if the
&gt; layout is support and I go back and forth. It is consuming time.
&gt; 

Richard,
Could you be more specific in what ways you are looking to make the non-null layouts more "user friendly and visually manageable"? What extra java layout code do you have to write because the visual helps aren't there in VE? Perhaps a step-by-step scenario for a small application would help. We are always looking for ways to improve VE and make it easier and quicker to create GUI applications.

There are many Swing layouts in which VE provides visual helps although I have to admit it requires some knowledge of the layout and the types of "constraints" needed by the layout in order to get the desired look and component layout. But VE tries to allow as much as possible using Drag&amp;Drop manipulation in the Graph view. And if that's not suffice... tweeking the controls using the Customize Layout window.

The ideal solution would be to allow all sorts of manipulation in the graph view without prior knowledge and/or experience with the Swing layouts and to keep this somewhat abstracted from the user. But the VE hasn't evolved to this point yet. 

Anyway... your input and feedback is very helpful. Please provide more detatils.

Thanks... Peter Walker
Here is an example. When I have used the borderlayout, it broke up the frame into boxes. the boxes are west, north, east, south. When I add a swing component to these boxes, it disappeared until manipulate code the content pane to size and position. That was a pain to do. The VE should make these boxes transparent to programmer, allowed the programmer to position and size the swing component any where on on the frame without disappearing, and automatically update the boxes with the pane or layout values from position and size of the swing component.

As for the custom layout window, it only supports gridlayout and gridbaglayout. Why can't the custom layout support the layouts?
(In reply to comment #4)

What the VE does is to make the live window WYSIWYG so that whatever appears at runtime is what you see in the design view.  For something like BorderLayout it has five regions (N,E,S,W and Center) and its runtime behavior is such that if something is in the Center then it occupies the entire container.  If it's one of the other four then it occupies that region's edge fully, the remaining axis being the preferred one of the Component.  

There is no way we could do anything like what you want, which is to have absolute positioning when using BorderLayout - it's just not what that layout manager was designed for.  This is what null layout is for, however this suffers that on resize of the window nothing moves or if anything gets bigger or smaller (for example it's label gets made bigger at runtime because it has been internationalized into a bundle) then it doesn't resize.  For this GridBagLayout tends to be the one that Swing programmers used.  The VE makes GridBagLayout the default for newly dropped or subclasses Containers, although this is a preference you can set.

Try using GridBagLayout and seeing whether this does what you want ?  This is the default that we use when a Container is dropped or subclasses, however for a JFrame subclass the runtime behavior is that the contentPane is automatically put into BorderLayout.  We don't change this, because if we do we'd get complaints from people that we were doing something they didn't expect - you can change it by selecting the content pane and using the layout drop down arrow on the toolbar( or the layout property on the property sheet).

For the layout dialog the reason we haven't done Border is just that we haven't got around to it.  The VE is open source and we have a lot of items to tackle so we just prioritize based on user feedback, and we also welcome users to get involved and learn the VE framework and provide patches and fixes if they want to.  The VE is an extensible plugin and we use flexible extension points for everything, so a BorderLayout page for the layout properties could be easily added - I'm not sure what it would look like and what value it would add though.  My vote would be to make GridBagLayout more usable and possible tackle something like SpringLayout or maybe some of the JGoodies ones.
Thanks for pointing out that we're missing the BorderLayout layout page.  I think this was initially overlooked because there's only two properties to customize on BorderLayout (horizontal and vertical gap), so it's not as useful as other layout customization pages.  But we should have layout pages for all layouts we support that have any customization possible.  To this end I've opened bug 126715.
comment 6, I will try that gridlayout and that stuff you mentioned and see if it works for me. I will try to not use the null layout even though it is very easy and in the long run, it will bites us when we go another platform in the terms of size and position. I will look these frameworks and understand them BETTER and enter more bug reports. My vote is for that ideal solution you mentioned earlier. ;)

comment 7, you are welcome. I hope that bug gets fixed.
(In reply to comment #8)

One thing that is kinda cool is to design in null layout and then switch to GridBagLayout.  Peter Walker wrote some very cool code that looks at the position of the components you set in null and preserves them in GridBagLayout by creating the right constraints.  The effect is that the GUI doesn't change but you now have GridBagConstraint objects so resize works better.

Have fun
Comment 9 Thanks.
the switching back and forth from null layout works for me for now. I am still for that ideal solution. When I used the gridbaglayout alone, something strange happened with the custom layout window. When I increased the left setting, the swing component went to the right. In fact, every direction setting I tried resulted in the opposite direction of the setting. I tried moving the swing component with the mouse when I was in gridbadlayout mode. It would not budge. what a disappointment that was.
the gridbagbad layout worked when i used ve. case closed</WithStack>
    <WithOutStack>I am using eclipse 3.2M4 with VE 1.2 plug-in. Currently, the content pane layout default is borderlayout. borderlayout does not give you free design over the swing frame. You have to go through this hocus pocus or extra steps of fitting swing components in the frame. That is wastes time and does not promote Rapid Application Development or RAD. Please make the content pane layout default to null. The null layout gives free design over the swing frame. You can position swing components very easily.
The use of BorderLayout as the default layout of content panes is intentional - as this is the layout you get by default in content panes from Swing. You can easily select the Content Pane and change its layout by right clicking on it, and choosing another option from the Set Layout menu. If you want to change the default layout of other panels, you can do so from the Visual Editor preferences (under the Swing sub category).  However, using the null layout is discouraged for real world apps, because the sizes of widgets within it do not respond automatically to the resizing of windows, differences in font sizes on various platforms, different string lengths produced by internationalizing text, etc.
Can you make the layouts other than null layout more user friendly or visually manageable by presenting a visual preview editor help adjust position and sizing? Currently, when I use the non-null layouts, either I have to write extra java layout code or use the custom layout grid with the arrows if the layout is support and I go back and forth. It is consuming time.
(In reply to comment #2)
&gt; Can you make the layouts other than null layout more user friendly or visually
&gt; manageable by presenting a visual preview editor help adjust position and
&gt; sizing? Currently, when I use the non-null layouts, either I have to write
&gt; extra java layout code or use the custom layout grid with the arrows if the
&gt; layout is support and I go back and forth. It is consuming time.
&gt; 

Richard,
Could you be more specific in what ways you are looking to make the non-null layouts more "user friendly and visually manageable"? What extra java layout code do you have to write because the visual helps aren't there in VE? Perhaps a step-by-step scenario for a small application would help. We are always looking for ways to improve VE and make it easier and quicker to create GUI applications.

There are many Swing layouts in which VE provides visual helps although I have to admit it requires some knowledge of the layout and the types of "constraints" needed by the layout in order to get the desired look and component layout. But VE tries to allow as much as possible using Drag&amp;Drop manipulation in the Graph view. And if that's not suffice... tweeking the controls using the Customize Layout window.

The ideal solution would be to allow all sorts of manipulation in the graph view without prior knowledge and/or experience with the Swing layouts and to keep this somewhat abstracted from the user. But the VE hasn't evolved to this point yet. 

Anyway... your input and feedback is very helpful. Please provide more detatils.

Thanks... Peter Walker
Here is an example. When I have used the borderlayout, it broke up the frame into boxes. the boxes are west, north, east, south. When I add a swing component to these boxes, it disappeared until manipulate code the content pane to size and position. That was a pain to do. The VE should make these boxes transparent to programmer, allowed the programmer to position and size the swing component any where on on the frame without disappearing, and automatically update the boxes with the pane or layout values from position and size of the swing component.

As for the custom layout window, it only supports gridlayout and gridbaglayout. Why can't the custom layout support the layouts?
(In reply to comment #4)

What the VE does is to make the live window WYSIWYG so that whatever appears at runtime is what you see in the design view.  For something like BorderLayout it has five regions (N,E,S,W and Center) and its runtime behavior is such that if something is in the Center then it occupies the entire container.  If it's one of the other four then it occupies that region's edge fully, the remaining axis being the preferred one of the Component.  

There is no way we could do anything like what you want, which is to have absolute positioning when using BorderLayout - it's just not what that layout manager was designed for.  This is what null layout is for, however this suffers that on resize of the window nothing moves or if anything gets bigger or smaller (for example it's label gets made bigger at runtime because it has been internationalized into a bundle) then it doesn't resize.  For this GridBagLayout tends to be the one that Swing programmers used.  The VE makes GridBagLayout the default for newly dropped or subclasses Containers, although this is a preference you can set.

Try using GridBagLayout and seeing whether this does what you want ?  This is the default that we use when a Container is dropped or subclasses, however for a JFrame subclass the runtime behavior is that the contentPane is automatically put into BorderLayout.  We don't change this, because if we do we'd get complaints from people that we were doing something they didn't expect - you can change it by selecting the content pane and using the layout drop down arrow on the toolbar( or the layout property on the property sheet).

For the layout dialog the reason we haven't done Border is just that we haven't got around to it.  The VE is open source and we have a lot of items to tackle so we just prioritize based on user feedback, and we also welcome users to get involved and learn the VE framework and provide patches and fixes if they want to.  The VE is an extensible plugin and we use flexible extension points for everything, so a BorderLayout page for the layout properties could be easily added - I'm not sure what it would look like and what value it would add though.  My vote would be to make GridBagLayout more usable and possible tackle something like SpringLayout or maybe some of the JGoodies ones.
Thanks for pointing out that we're missing the BorderLayout layout page.  I think this was initially overlooked because there's only two properties to customize on BorderLayout (horizontal and vertical gap), so it's not as useful as other layout customization pages.  But we should have layout pages for all layouts we support that have any customization possible.  To this end I've opened bug 126715.
comment 6, I will try that gridlayout and that stuff you mentioned and see if it works for me. I will try to not use the null layout even though it is very easy and in the long run, it will bites us when we go another platform in the terms of size and position. I will look these frameworks and understand them BETTER and enter more bug reports. My vote is for that ideal solution you mentioned earlier. ;)

comment 7, you are welcome. I hope that bug gets fixed.
(In reply to comment #8)

One thing that is kinda cool is to design in null layout and then switch to GridBagLayout.  Peter Walker wrote some very cool code that looks at the position of the components you set in null and preserves them in GridBagLayout by creating the right constraints.  The effect is that the GUI doesn't change but you now have GridBagConstraint objects so resize works better.

Have fun
Comment 9 Thanks.
the switching back and forth from null layout works for me for now. I am still for that ideal solution. When I used the gridbaglayout alone, something strange happened with the custom layout window. When I increased the left setting, the swing component went to the right. In fact, every direction setting I tried resulted in the opposite direction of the setting. I tried moving the swing component with the mouse when I was in gridbadlayout mode. It would not budge. what a disappointment that was.
the gridbagbad layout worked when i used ve. case closed</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="126467" />
    <CreationDate amount="2006-02-04 19:07:00 -0500" />
    <DupId amount="" />
    <classification amount="BIRT" />
    <Product amount="BIRT" />
    <component amount="Data" />
    <Version amount="2.0.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="major" />
    <Summery>Hardcoded XML file path is stored for data sets and data sources</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="2">
      <Enumeration lines="6">
        <Lines>
          <Line>1. Create new report</Line>
          <Line>2. Create new data source pointing to an XML file A</Line>
          <Line>3. Create several data sets using data source from step 2</Line>
          <Line>4. Generate report ====&gt; SUCCESS</Line>
          <Line>5. Now edit data source and point it to a different XML file B</Line>
          <Line>6. Generate report ====&gt; FAILURE</Line>
        </Lines>
      </Enumeration>
      <Enumeration lines="7">
        <Lines>
          <Line>1.XML file A</Line>
          <Line>2.XML file B</Line>
          <Line>3.XML schema they complied to</Line>
          <Line>4.The report design file</Line>
          <Line>5.The error message</Line>
          <Line>Barys, can you attach the XML files for investigation? Thanks.</Line>
          <Line>It turns the behaviou I've seen was caused by problem on our end (different schema was used for XML file B compared to A).</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="CLOSED" />
    <resolution amount="WORKSFORME" />
    <WithStack>1. Create new report
2. Create new data source pointing to an XML file A
3. Create several data sets using data source from step 2
4. Generate report ====&gt; SUCCESS
5. Now edit data source and point it to a different XML file B
6. Generate report ====&gt; FAILURE

Looking into .rptdesign file I can see that full path to the XML file is stored not only for the data source BUT for every data set too. This is not flexible and causes breaks as described above.

The natural way of doing this would be to have data sets contain references to their data sources and retrieve the XML file from the data source (and not store it with every dataset).

This bug adversely affects our project. Please fix it asap.
Here is the excerpt from the .rptdesign file. XML_FILE property shouldn't have direct value of file path but obtain it from the referred data source.

    &lt;data-sets&gt;
        &lt;oda-data-set             
         ...

&lt;property name="XML_FILE"&gt;D:\TEMP\BLA\FOO\fHcJTtEdqTrtdZodfDuA_root.xml&lt;/property&gt;
         ...
        &lt;/oda-data-set&gt;

Actually the xml file path that is stored in data set is called "sample xml file". It is used by DataSetEditor to preview the result of XML column mapping in Column Mapping page.It is by default set to the xml file defined in data source.

The failure of report generation should not be caused by this "sample xml file". Actually it has nothing to do with the report generation.

I am not quit sure with the kind of failure you met.If the failure means "no data generated in report", that may possibly caused by mismatching of xml column mapping and the new xml file.If not please provide us with more information about the failure.




This bug also address a fact that the current xml data set creator/editor are not user-friendly enough so that user can customize the preview-ablility of their xml data set.Some enhancement should be made.
Bugzilla bug 126483 has been filed to trace the problem.
&lt;I am not quit sure with the kind of failure you met.If the failure means "no
data generated in report", that may possibly caused by mismatching of xml
column mapping and the new xml file.If not please provide us with more
information about the failure.&gt;

Report generation failure = red error messages in the report Preview. AND no data are retrieved from the XML file. 

Both XML files comply with the same schema therefore Report Design should work successfully for both XML files.
I've tried to reproduce the bug but failed.Could you please provide the following files so that I can make more precise investigation:
1.XML file A
2.XML file B
3.XML schema they complied to 
4.The report design file
5.The error message
Barys, can you attach the XML files for investigation? Thanks.
It turns the behaviou I've seen was caused by problem on our end (different schema was used for XML file B compared to A).

Resolving this bug.
closing this...</WithStack>
    <WithOutStack>1. Create new report
2. Create new data source pointing to an XML file A
3. Create several data sets using data source from step 2
4. Generate report ====&gt; SUCCESS
5. Now edit data source and point it to a different XML file B
6. Generate report ====&gt; FAILURE

Looking into .rptdesign file I can see that full path to the XML file is stored not only for the data source BUT for every data set too. This is not flexible and causes breaks as described above.

The natural way of doing this would be to have data sets contain references to their data sources and retrieve the XML file from the data source (and not store it with every dataset).

This bug adversely affects our project. Please fix it asap.
Here is the excerpt from the .rptdesign file. XML_FILE property shouldn't have direct value of file path but obtain it from the referred data source.

    &lt;data-sets&gt;
        &lt;oda-data-set             
         ...

&lt;property name="XML_FILE"&gt;D:\TEMP\BLA\FOO\fHcJTtEdqTrtdZodfDuA_root.xml&lt;/property&gt;
         ...
        &lt;/oda-data-set&gt;

Actually the xml file path that is stored in data set is called "sample xml file". It is used by DataSetEditor to preview the result of XML column mapping in Column Mapping page.It is by default set to the xml file defined in data source.

The failure of report generation should not be caused by this "sample xml file". Actually it has nothing to do with the report generation.

I am not quit sure with the kind of failure you met.If the failure means "no data generated in report", that may possibly caused by mismatching of xml column mapping and the new xml file.If not please provide us with more information about the failure.




This bug also address a fact that the current xml data set creator/editor are not user-friendly enough so that user can customize the preview-ablility of their xml data set.Some enhancement should be made.
Bugzilla bug 126483 has been filed to trace the problem.
&lt;I am not quit sure with the kind of failure you met.If the failure means "no
data generated in report", that may possibly caused by mismatching of xml
column mapping and the new xml file.If not please provide us with more
information about the failure.&gt;

Report generation failure = red error messages in the report Preview. AND no data are retrieved from the XML file. 

Both XML files comply with the same schema therefore Report Design should work successfully for both XML files.
I've tried to reproduce the bug but failed.Could you please provide the following files so that I can make more precise investigation:
1.XML file A
2.XML file B
3.XML schema they complied to 
4.The report design file
5.The error message
Barys, can you attach the XML files for investigation? Thanks.
It turns the behaviou I've seen was caused by problem on our end (different schema was used for XML file B compared to A).

Resolving this bug.
closing this...</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="126468" />
    <CreationDate amount="2006-02-04 19:14:00 -0500" />
    <DupId amount="126469" />
    <classification amount="BIRT" />
    <Product amount="BIRT" />
    <component amount="Report Designer" />
    <Version amount="2.0.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="critical" />
    <Summery>Unable to create report off XMl schema</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="DUPLICATE" />
    <WithStack>I was able to create XML Data Source just fine (although a warning dialog
had to be dismissed). However when trying to add column mappings for the
data source I get following errors:

A BIRT exception occurred.
  Plug-in Provider:Eclipse.org
  Plug-in Name:BIRT Data Engine
  Plug-in ID:org.eclipse.birt.data
  Version:2.0.0
  Error Code:odaconsumer.CannotOpenConnection
  Error Message:Cannot open the connection for the driver:
org.eclipse.birt.report.data.oda.xml
Some connection properties are missing.

Also the error is always displayed when I double-click my Dataset.


My expectation is that I should be able to create: Data Source, Data Set and
add column mappings to Data Set based on schema only. I do expect the
preview being unavailable due to lack of real data.


*** This bug has been marked as a duplicate of 126469 ***
Verified.</WithStack>
    <WithOutStack>I was able to create XML Data Source just fine (although a warning dialog
had to be dismissed). However when trying to add column mappings for the
data source I get following errors:

A BIRT exception occurred.
  Plug-in Provider:Eclipse.org
  Plug-in Name:BIRT Data Engine
  Plug-in ID:org.eclipse.birt.data
  Version:2.0.0
  Error Code:odaconsumer.CannotOpenConnection
  Error Message:Cannot open the connection for the driver:
org.eclipse.birt.report.data.oda.xml
Some connection properties are missing.

Also the error is always displayed when I double-click my Dataset.


My expectation is that I should be able to create: Data Source, Data Set and
add column mappings to Data Set based on schema only. I do expect the
preview being unavailable due to lack of real data.


*** This bug has been marked as a duplicate of 126469 ***
Verified.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="126469" />
    <CreationDate amount="2006-02-04 19:14:00 -0500" />
    <DupId amount="" />
    <classification amount="BIRT" />
    <Product amount="BIRT" />
    <component amount="Data" />
    <Version amount="2.0.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="major" />
    <Summery>Unable to create report off XML schema</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>I was able to create XML Data Source just fine (although a warning dialog
had to be dismissed). However when trying to add column mappings for the
data source I get following errors:

A BIRT exception occurred.
  Plug-in Provider:Eclipse.org
  Plug-in Name:BIRT Data Engine
  Plug-in ID:org.eclipse.birt.data
  Version:2.0.0
  Error Code:odaconsumer.CannotOpenConnection
  Error Message:Cannot open the connection for the driver:
org.eclipse.birt.report.data.oda.xml
Some connection properties are missing.

Also the error is always displayed when I double-click my Dataset.


My expectation is that I should be able to create: Data Source, Data Set and
add column mappings to Data Set based on schema only. I do expect the
preview being unavailable due to lack of real data.
*** Bug 126468 has been marked as a duplicate of this bug. ***
Could you please attach the design file you used, which can reproduce the bug?

Thanks.
I guess that you create a data source without giving source xml file. So that when create data set based on that data source the specified error message will generate.

However, under that circumstance, even if the error message is prompted, the data set can still be created successfully.

If my assumption is correct, then this is an expected behavior.For whenever an data set editor is opened the connection validation would be made.

With regarding to the special use case you want(create data set without being able to preview it), I will discuss with other developers to see whether an enhancement should be made to accomodate this requirement.This will be done asap.
Bugzilla bug 126483 has been filed to trace the problem.
Lower its severity since it is actually an enhancement.
This is neither special case nor an enhancement. Without being able to create column mappings report is useless. Presently if you use XML schema only to build your report the only thing you can do is create a data source.

Please see bug 126483 for detail.
See my comments to 126483. 

Main problem why this defect was filed -- inability to create data sets and column mappings based on XML schema. It is fine that preview will be unavailable. User should be able to work with data sets and column mappings.
The major problem that causes user cannot create dataset simply out of an xml schema is that when creating dataset xml ui will try to make a preview.However by fixing bug 126483 the preview is now not compulsory.User can define a dataset without an xml data source file, as far as they provide a schema file.I believe this is exactly the very functionality this bug requested.The new feature will be available in build 3/8/2006.

BTW,you may forget to attach your comments to bug 126483.</WithStack>
    <WithOutStack>I was able to create XML Data Source just fine (although a warning dialog
had to be dismissed). However when trying to add column mappings for the
data source I get following errors:

A BIRT exception occurred.
  Plug-in Provider:Eclipse.org
  Plug-in Name:BIRT Data Engine
  Plug-in ID:org.eclipse.birt.data
  Version:2.0.0
  Error Code:odaconsumer.CannotOpenConnection
  Error Message:Cannot open the connection for the driver:
org.eclipse.birt.report.data.oda.xml
Some connection properties are missing.

Also the error is always displayed when I double-click my Dataset.


My expectation is that I should be able to create: Data Source, Data Set and
add column mappings to Data Set based on schema only. I do expect the
preview being unavailable due to lack of real data.
*** Bug 126468 has been marked as a duplicate of this bug. ***
Could you please attach the design file you used, which can reproduce the bug?

Thanks.
I guess that you create a data source without giving source xml file. So that when create data set based on that data source the specified error message will generate.

However, under that circumstance, even if the error message is prompted, the data set can still be created successfully.

If my assumption is correct, then this is an expected behavior.For whenever an data set editor is opened the connection validation would be made.

With regarding to the special use case you want(create data set without being able to preview it), I will discuss with other developers to see whether an enhancement should be made to accomodate this requirement.This will be done asap.
Bugzilla bug 126483 has been filed to trace the problem.
Lower its severity since it is actually an enhancement.
This is neither special case nor an enhancement. Without being able to create column mappings report is useless. Presently if you use XML schema only to build your report the only thing you can do is create a data source.

Please see bug 126483 for detail.
See my comments to 126483. 

Main problem why this defect was filed -- inability to create data sets and column mappings based on XML schema. It is fine that preview will be unavailable. User should be able to work with data sets and column mappings.
The major problem that causes user cannot create dataset simply out of an xml schema is that when creating dataset xml ui will try to make a preview.However by fixing bug 126483 the preview is now not compulsory.User can define a dataset without an xml data source file, as far as they provide a schema file.I believe this is exactly the very functionality this bug requested.The new feature will be available in build 3/8/2006.

BTW,you may forget to attach your comments to bug 126483.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="126470" />
    <CreationDate amount="2006-02-04 19:41:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="JDT" />
    <component amount="Core" />
    <Version amount="3.1.1" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>getSourceRange().getOffset() returning incorrect values</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="1">
      <source_code type="functiondef">
        <location start="731" end="1067" />
        <code>for (int j = 0; j &lt; iMethods.length; j++) {
	System.out.println(iMethods[j].getElementName() + " offset: " + iMethods[j].getSourceRange().getOffset());
	if (iMethods[j].getSource().length() &gt; 25) {
		System.out.println(iMethods[j].getSource().substring(0, 25));
	} else {
		System.out.println(iMethods[j].getSource().substring(0));
	}
}</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="INVALID" />
    <WithStack>I've come across an issue while getting the offset for source.

If I retrieve the offset for a method that shares its name with another method that accepts different parameters both methods get the same offset.  The offset is the lowest of the two actual offsets (ie they both have the same offset which is the offset for the method which occurs first).

In this printout I have an example.  As I iterate over a collection of IMethods I print out the method name and the first 25 characters of the source (which is sufficient to show the discrepancy).

MethodNameTester offset: 507
public MethodNameTester(i

MethodNameTester offset: 507
public MethodNameTester()

The code is as follows (it's a little dirty for testing, sorry):

for (int j = 0; j &lt; iMethods.length; j++) {
	System.out.println(iMethods[j].getElementName() + " offset: " + iMethods[j].getSourceRange().getOffset());
	if (iMethods[j].getSource().length() &gt; 25) {
		System.out.println(iMethods[j].getSource().substring(0, 25));
	} else {
		System.out.println(iMethods[j].getSource().substring(0));
	}
}
Could you please provide steps to reproduce?
I've been trying to reproduce the error, but to no avail.

I'll mark the bug as invalid, and if I'm ever able to reproduce it again (there may have been other factors at work) I'll reopen the ticket.

Thank you.</WithStack>
    <WithOutStack>I've come across an issue while getting the offset for source.

If I retrieve the offset for a method that shares its name with another method that accepts different parameters both methods get the same offset.  The offset is the lowest of the two actual offsets (ie they both have the same offset which is the offset for the method which occurs first).

In this printout I have an example.  As I iterate over a collection of IMethods I print out the method name and the first 25 characters of the source (which is sufficient to show the discrepancy).

MethodNameTester offset: 507
public MethodNameTester(i

MethodNameTester offset: 507
public MethodNameTester()

The code is as follows (it's a little dirty for testing, sorry):

for (int j = 0; j &lt; iMethods.length; j++) {
	System.out.println(iMethods[j].getElementName() + " offset: " + iMethods[j].getSourceRange().getOffset());
	if (iMethods[j].getSource().length() &gt; 25) {
		System.out.println(iMethods[j].getSource().substring(0, 25));
	} else {
		System.out.println(iMethods[j].getSource().substring(0));
	}
}
Could you please provide steps to reproduce?
I've been trying to reproduce the error, but to no avail.

I'll mark the bug as invalid, and if I'm ever able to reproduce it again (there may have been other factors at work) I'll reopen the ticket.

Thank you.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="126471" />
    <CreationDate amount="2006-02-04 20:32:00 -0500" />
    <DupId amount="229969" />
    <classification amount="Eclipse Foundation" />
    <Product amount="Community" />
    <component amount="Website" />
    <Version amount="unspecified" />
    <rep_platform amount="All" />
    <op_sys amount="All" />
    <priority amount="P3" />
    <bug_severity amount="enhancement" />
    <Summery>Update site for stable builds</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="DUPLICATE" />
    <WithStack>The eclipse foundation should have an update site for the beta test versions of eclipse, its projects, and its plugins. It will save us time downloading and updated test versions.
It'd be nice if milestone builds could be obtained from an update site...
I hope they really implement it.
What is "a beta test version"? Do you mean milestones of each of the projects (Mx)? Do you mean release candidates (RCx)?  Do you mean integration builds (I-*)? Just trying to clarify the terminology.
the beta versions I meant were the milestones versions.
I know I might sound technologically greedy and asking the impossible. But can make your update site be progressive? Progressive meaning it updates according your project life cycle. If you are in your milestone phase, have the update site update the milestones. If you are coming out of the milestone phase and into RC phase, update the last milestone version to the for first RC version and continue to update using later RC versions after that. If you are officially releasing, update last RC version to the official version. I honestly do not know anything about Integration versions in your project life cycle. But I think you can fill in the missing pieces. 
Technically everything is possible. :)

As far as the Eclipse SDK is concerned there is even no difference between a milestone build and an RC build from a build type point of view. There are both so called stable builds (see http://download.eclipse.org/eclipse/downloads/build_types.html).

+1 for having an update site for stable builds.
Thanks for the build information. I hope you will implement this.
Re comment 5 - I think you're asking for the impossible but only because you don't seem to understand the Eclipse project's lifecycles. Technically it's possible to have a single update site. But let me make one point and then ask some more questions:

* Each Eclipse project is run independently. There is no centralized authority which schedules the projects to do milestones or releases concurrently. This year, ten of the projects have agreed to release simultaneously (codename: Callisto). The other 42 Eclipse projects may or may not have the same release cycle.

Question 1: what if project X releases M3 on 1-Jan and project Y releases M5 on 1-Feb and then project X releases M4 on 1-Mar, but Y.M5 does not work with X.M3.  So in Jan, the update site would contain ( X.M3 ) = good. In Feb, the update site would contain ( X.M3, Y.M5 ) = good. In Mar, the update site would contain ( X.M4, Y.M5 ) = bad because these two don't work together.  So do you really want the latest milestone of every project?

Question 1a: Don't you really want "the latest consistent version of all the projects"?  That may not be "the latest milestones" because the different projects move at different speeds.

Question 2: if we have milestones, release candidates (which are just miletones), and releases on the update side, then the releases would only be on the site for six weeks before the next milestone took over the top spot. For example: the Eclipse platform 3.2 Final will be released on June 28th.  The Eclipse platform 3.3M1 will be released six weeks later. Thus anyone coming to the update site in August would start getting the (potentially flakey) milestone releases instead of the (usually dependable) final release.  Is that the desired behavior?
(In reply to comment #8)
&gt; Question 1: what if project X releases M3 on 1-Jan and project Y releases M5 on
&gt; 1-Feb and then project X releases M4 on 1-Mar, but Y.M5 does not work with
&gt; X.M3.  So in Jan, the update site would contain ( X.M3 ) = good. In Feb, the
&gt; update site would contain ( X.M3, Y.M5 ) = good. In Mar, the update site would
&gt; contain ( X.M4, Y.M5 ) = bad because these two don't work together.  So do you
&gt; really want the latest milestone of every project?

In theory, the Eclipse Update Manager should transparently handle all such cases, i.e. not activating invalid configurations. However, this requires to keep more than the current milestone build on this update site.

&gt; Question 1a: Don't you really want "the latest consistent version of all the
&gt; projects"?  That may not be "the latest milestones" because the different
&gt; projects move at different speeds.

That's an interesting point, i.e. having a different update site for each release train.

&gt; Question 2: if we have milestones, release candidates (which are just
&gt; miletones), and releases on the update side, then the releases would only be on
&gt; the site for six weeks before the next milestone took over the top spot. For
&gt; example: the Eclipse platform 3.2 Final will be released on June 28th.  The
&gt; Eclipse platform 3.3M1 will be released six weeks later. Thus anyone coming to
&gt; the update site in August would start getting the (potentially flakey)
&gt; milestone releases instead of the (usually dependable) final release.  Is that
&gt; the desired behavior?

I don't even think the stable builds should be put onto the same update site as the release builds. I think it shold be a different update site and people should be required to add it manually to their booksmarks.

See bug 77143 for a versioning discussion. I would even consider marking this bug dependend on bug 77143 because this bug looks like an infrastructure request to me whereas bug 77143 discusses the implementation. ;)
Re: comment 8, you are right. I did not know that your project life cycles was not centrally coordinated and independent. All I do is program in java. Eclipse is one of my tools.

Your questions being up very points. No one would like version clashes and incompatibities including me. I would the first one to scream. However, it would great to have such an update site. There has to be some coordination to pull this off.




Is calisto going to resolved this bug report?
Can anyone answer my question?

(In reply to comment #11)
&gt; Is calisto going to resolved this bug report?


Richard, Callisto is a series of releases. You won't find milestone builds on the update site.
(In reply to comment #13)
&gt; Richard, Callisto is a series of releases. 

Sorry, this sounds ambiguous. I meant to say that Callisto contains only official release builds and no milestones.

OK. Thanks.

(In reply to comment #14)
&gt; (In reply to comment #13)
&gt; &gt; Richard, Callisto is a series of releases. 
&gt; Sorry, this sounds ambiguous. I meant to say that Callisto contains only
&gt; official release builds and no milestones.


I re-read through these comments, and if we have any hopes of implementing this, I think something like bug 164390 would need to be implemented for all the projects.  I'm marking this bug as dependent on that one.


*** This bug has been marked as a duplicate of bug 229969 ***</WithStack>
    <WithOutStack>The eclipse foundation should have an update site for the beta test versions of eclipse, its projects, and its plugins. It will save us time downloading and updated test versions.
It'd be nice if milestone builds could be obtained from an update site...
I hope they really implement it.
What is "a beta test version"? Do you mean milestones of each of the projects (Mx)? Do you mean release candidates (RCx)?  Do you mean integration builds (I-*)? Just trying to clarify the terminology.
the beta versions I meant were the milestones versions.
I know I might sound technologically greedy and asking the impossible. But can make your update site be progressive? Progressive meaning it updates according your project life cycle. If you are in your milestone phase, have the update site update the milestones. If you are coming out of the milestone phase and into RC phase, update the last milestone version to the for first RC version and continue to update using later RC versions after that. If you are officially releasing, update last RC version to the official version. I honestly do not know anything about Integration versions in your project life cycle. But I think you can fill in the missing pieces. 
Technically everything is possible. :)

As far as the Eclipse SDK is concerned there is even no difference between a milestone build and an RC build from a build type point of view. There are both so called stable builds (see http://download.eclipse.org/eclipse/downloads/build_types.html).

+1 for having an update site for stable builds.
Thanks for the build information. I hope you will implement this.
Re comment 5 - I think you're asking for the impossible but only because you don't seem to understand the Eclipse project's lifecycles. Technically it's possible to have a single update site. But let me make one point and then ask some more questions:

* Each Eclipse project is run independently. There is no centralized authority which schedules the projects to do milestones or releases concurrently. This year, ten of the projects have agreed to release simultaneously (codename: Callisto). The other 42 Eclipse projects may or may not have the same release cycle.

Question 1: what if project X releases M3 on 1-Jan and project Y releases M5 on 1-Feb and then project X releases M4 on 1-Mar, but Y.M5 does not work with X.M3.  So in Jan, the update site would contain ( X.M3 ) = good. In Feb, the update site would contain ( X.M3, Y.M5 ) = good. In Mar, the update site would contain ( X.M4, Y.M5 ) = bad because these two don't work together.  So do you really want the latest milestone of every project?

Question 1a: Don't you really want "the latest consistent version of all the projects"?  That may not be "the latest milestones" because the different projects move at different speeds.

Question 2: if we have milestones, release candidates (which are just miletones), and releases on the update side, then the releases would only be on the site for six weeks before the next milestone took over the top spot. For example: the Eclipse platform 3.2 Final will be released on June 28th.  The Eclipse platform 3.3M1 will be released six weeks later. Thus anyone coming to the update site in August would start getting the (potentially flakey) milestone releases instead of the (usually dependable) final release.  Is that the desired behavior?
(In reply to comment #8)
&gt; Question 1: what if project X releases M3 on 1-Jan and project Y releases M5 on
&gt; 1-Feb and then project X releases M4 on 1-Mar, but Y.M5 does not work with
&gt; X.M3.  So in Jan, the update site would contain ( X.M3 ) = good. In Feb, the
&gt; update site would contain ( X.M3, Y.M5 ) = good. In Mar, the update site would
&gt; contain ( X.M4, Y.M5 ) = bad because these two don't work together.  So do you
&gt; really want the latest milestone of every project?

In theory, the Eclipse Update Manager should transparently handle all such cases, i.e. not activating invalid configurations. However, this requires to keep more than the current milestone build on this update site.

&gt; Question 1a: Don't you really want "the latest consistent version of all the
&gt; projects"?  That may not be "the latest milestones" because the different
&gt; projects move at different speeds.

That's an interesting point, i.e. having a different update site for each release train.

&gt; Question 2: if we have milestones, release candidates (which are just
&gt; miletones), and releases on the update side, then the releases would only be on
&gt; the site for six weeks before the next milestone took over the top spot. For
&gt; example: the Eclipse platform 3.2 Final will be released on June 28th.  The
&gt; Eclipse platform 3.3M1 will be released six weeks later. Thus anyone coming to
&gt; the update site in August would start getting the (potentially flakey)
&gt; milestone releases instead of the (usually dependable) final release.  Is that
&gt; the desired behavior?

I don't even think the stable builds should be put onto the same update site as the release builds. I think it shold be a different update site and people should be required to add it manually to their booksmarks.

See bug 77143 for a versioning discussion. I would even consider marking this bug dependend on bug 77143 because this bug looks like an infrastructure request to me whereas bug 77143 discusses the implementation. ;)
Re: comment 8, you are right. I did not know that your project life cycles was not centrally coordinated and independent. All I do is program in java. Eclipse is one of my tools.

Your questions being up very points. No one would like version clashes and incompatibities including me. I would the first one to scream. However, it would great to have such an update site. There has to be some coordination to pull this off.




Is calisto going to resolved this bug report?
Can anyone answer my question?

(In reply to comment #11)
&gt; Is calisto going to resolved this bug report?


Richard, Callisto is a series of releases. You won't find milestone builds on the update site.
(In reply to comment #13)
&gt; Richard, Callisto is a series of releases. 

Sorry, this sounds ambiguous. I meant to say that Callisto contains only official release builds and no milestones.

OK. Thanks.

(In reply to comment #14)
&gt; (In reply to comment #13)
&gt; &gt; Richard, Callisto is a series of releases. 
&gt; Sorry, this sounds ambiguous. I meant to say that Callisto contains only
&gt; official release builds and no milestones.


I re-read through these comments, and if we have any hopes of implementing this, I think something like bug 164390 would need to be implemented for all the projects.  I'm marking this bug as dependent on that one.


*** This bug has been marked as a duplicate of bug 229969 ***</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="126472" />
    <CreationDate amount="2006-02-04 21:55:00 -0500" />
    <DupId amount="" />
    <classification amount="BIRT" />
    <Product amount="BIRT" />
    <component amount="Data" />
    <Version amount="2.0.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="enhancement" />
    <Summery>Data of timestamp type cannot be displayed precisely in data set preview.</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="NEW" />
    <resolution amount="" />
    <WithStack>Data of timestamp type cannot be displayed precisely in data set preview.They are displayed as of Date type rather than timestamp type.This is because a data value of timestamp type, when being passed by org.eclipse.birt.core.data.DataTypeUtil, is converted to Date type. Futhermore, the current BIRT Data Type (defined in org.eclipse.birt.core.data.DataType.java) does not support timestamp data type.
"TIME" type is also converted to Date type automatically, so that it cannot be displayed properly as well.
enhancement to add two new data types.  Work around is to use script of formatting of date-time data type.
*** Bug 132787 has been marked as a duplicate of this bug. ***
We may need to follow SQL standard, which has three data types for date/time.

java.sql.Date // year, month, day 
java.sql.Time // hour, minute, second
java.sql.TimeStamp // year, month, date, hour, minute, second, nano
*** Bug 144856 has been marked as a duplicate of this bug. ***
*** Bug 162162 has been marked as a duplicate of this bug. ***</WithStack>
    <WithOutStack>Data of timestamp type cannot be displayed precisely in data set preview.They are displayed as of Date type rather than timestamp type.This is because a data value of timestamp type, when being passed by org.eclipse.birt.core.data.DataTypeUtil, is converted to Date type. Futhermore, the current BIRT Data Type (defined in org.eclipse.birt.core.data.DataType.java) does not support timestamp data type.
"TIME" type is also converted to Date type automatically, so that it cannot be displayed properly as well.
enhancement to add two new data types.  Work around is to use script of formatting of date-time data type.
*** Bug 132787 has been marked as a duplicate of this bug. ***
We may need to follow SQL standard, which has three data types for date/time.

java.sql.Date // year, month, day 
java.sql.Time // hour, minute, second
java.sql.TimeStamp // year, month, date, hour, minute, second, nano
*** Bug 144856 has been marked as a duplicate of this bug. ***
*** Bug 162162 has been marked as a duplicate of this bug. ***</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="126473" />
    <CreationDate amount="2006-02-04 22:10:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="JDT" />
    <component amount="UI" />
    <Version amount="3.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>[Team Sync] React to rename of API in Team</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>Leading up to the API freeze, I have renamed the following classes/interfaces:

IResourceMappingScope renamed to ISynchronizationScope
ICompareAdapter rename to ISynchronizationCompareAdapter
AbstractCompareAdapter renamed to SynchronizationCompareAdapter

Stubs are in place for the old classes so this change will not cause any compile errors.
*** Bug 126486 has been marked as a duplicate of this bug. ***
I have updated references to the three types in our code. However, there is still a reference to IResourceMappingScope in SynchronizationContentProvider#isInScope(...). Since this method is overridden, it requires a coordinated release. I suggest to to it for the M5 warm-up build.
Sounds good
Fixed in HEAD &gt; 20060210</WithStack>
    <WithOutStack>Leading up to the API freeze, I have renamed the following classes/interfaces:

IResourceMappingScope renamed to ISynchronizationScope
ICompareAdapter rename to ISynchronizationCompareAdapter
AbstractCompareAdapter renamed to SynchronizationCompareAdapter

Stubs are in place for the old classes so this change will not cause any compile errors.
*** Bug 126486 has been marked as a duplicate of this bug. ***
I have updated references to the three types in our code. However, there is still a reference to IResourceMappingScope in SynchronizationContentProvider#isInScope(...). Since this method is overridden, it requires a coordinated release. I suggest to to it for the M5 warm-up build.
Sounds good
Fixed in HEAD &gt; 20060210</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="126474" />
    <CreationDate amount="2006-02-04 22:24:00 -0500" />
    <DupId amount="79708" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="Resources" />
    <Version amount="3.0.1" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows 2000" />
    <priority amount="P3" />
    <bug_severity amount="enhancement" />
    <Summery>Need capability to instantaneously propagate common preferences (and their changes) among large number of Eclipse installations</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="DUPLICATE" />
    <WithStack>Our customer                                                                          is aware of the Window-&gt;Preferences  Export/Import capability, 
but that is not answering their needs:                                   
they would like to have a common set of preferences that users (some     
300) would automatically inherit, without having to do a manual import   
each time.

The manual import mechanism doesn't work for them since it is prone to   
errors (forgetting to do it) and also due to overwriting of "personal"       
preferences.   In other words, a "master" preference list would          
overwrite an individual's preset local preferences.                       
                                                                         
They want to be able to decide which preferences are common, and only    
those to be automatically inherited when a change is done in a master    
location.  (like library name changes between their product releases     
e.g.)                                                                    
                                                                         
Customer gave an example on how JBuilder provides this facility,        
through a common folder that any preferences put there are shared by all 
developers.  (Eclipse would "look" at some folder, which is shared by many Eclipse installs, and any change in that common folder, would automatically be seen and adopted by all the Eclipse installations which are seeing that folder.)

Customer added:
"You can put the following example in the PMR.
Each time a prefrence change we cannot rely on each designers to import files, they forget and we end up with code being build with the wrong library.
We need to put common library definition for a 100 Eclipse projects in ClearCase.
When one library is changing version we update it in the common definition and because all 100 pojects include a refrence to that definition they automatically point to the right version.
 
Other IDEs are doing this by defining a common directory (can be set for the designers at installation time) where department settings are stored.
 
I am sure the import/export can work with small companies, keep in mind we have software developed by many designers on diffrent sites.
The CPP software has 450 designers on 6 sites."


*** This bug has been marked as a duplicate of 79708 ***
Dominique.Toupin@ericsson.com</WithStack>
    <WithOutStack>Our customer                                                                          is aware of the Window-&gt;Preferences  Export/Import capability, 
but that is not answering their needs:                                   
they would like to have a common set of preferences that users (some     
300) would automatically inherit, without having to do a manual import   
each time.

The manual import mechanism doesn't work for them since it is prone to   
errors (forgetting to do it) and also due to overwriting of "personal"       
preferences.   In other words, a "master" preference list would          
overwrite an individual's preset local preferences.                       
                                                                         
They want to be able to decide which preferences are common, and only    
those to be automatically inherited when a change is done in a master    
location.  (like library name changes between their product releases     
e.g.)                                                                    
                                                                         
Customer gave an example on how JBuilder provides this facility,        
through a common folder that any preferences put there are shared by all 
developers.  (Eclipse would "look" at some folder, which is shared by many Eclipse installs, and any change in that common folder, would automatically be seen and adopted by all the Eclipse installations which are seeing that folder.)

Customer added:
"You can put the following example in the PMR.
Each time a prefrence change we cannot rely on each designers to import files, they forget and we end up with code being build with the wrong library.
We need to put common library definition for a 100 Eclipse projects in ClearCase.
When one library is changing version we update it in the common definition and because all 100 pojects include a refrence to that definition they automatically point to the right version.
 
Other IDEs are doing this by defining a common directory (can be set for the designers at installation time) where department settings are stored.
 
I am sure the import/export can work with small companies, keep in mind we have software developed by many designers on diffrent sites.
The CPP software has 450 designers on 6 sites."


*** This bug has been marked as a duplicate of 79708 ***
Dominique.Toupin@ericsson.com</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="126475" />
    <CreationDate amount="2006-02-05 01:07:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="SWT" />
    <Version amount="3.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Flat ToolBar Item should not be in "Up" status by default</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="21">
      <source_code type="import">
        <location start="281" end="313" />
        <code>import org.eclipse.swt.SWT;</code>
      </source_code>
      <source_code type="import">
        <location start="314" end="361" />
        <code>import org.eclipse.swt.events.SelectionAdapter;</code>
      </source_code>
      <source_code type="import">
        <location start="362" end="407" />
        <code>import org.eclipse.swt.events.SelectionEvent;</code>
      </source_code>
      <source_code type="import">
        <location start="408" end="447" />
        <code>import org.eclipse.swt.layout.GridData;</code>
      </source_code>
      <source_code type="import">
        <location start="448" end="489" />
        <code>import org.eclipse.swt.layout.GridLayout;</code>
      </source_code>
      <source_code type="import">
        <location start="490" end="528" />
        <code>import org.eclipse.swt.widgets.Button;</code>
      </source_code>
      <source_code type="import">
        <location start="529" end="568" />
        <code>import org.eclipse.swt.widgets.Display;</code>
      </source_code>
      <source_code type="import">
        <location start="569" end="606" />
        <code>import org.eclipse.swt.widgets.Label;</code>
      </source_code>
      <source_code type="import">
        <location start="607" end="644" />
        <code>import org.eclipse.swt.widgets.Shell;</code>
      </source_code>
      <source_code type="import">
        <location start="645" end="684" />
        <code>import org.eclipse.swt.widgets.ToolBar;</code>
      </source_code>
      <source_code type="import">
        <location start="685" end="725" />
        <code>import org.eclipse.swt.widgets.ToolItem;</code>
      </source_code>
      <source_code type="class">
        <location start="727" end="3155" />
        <code>public class TestLayout2 extends Shell {

    /**
     * Launch the application
     * @param args
     */
    public static void main(String args[]) {
        try {
            Display display = Display.getDefault();
            TestLayout2 shell = new TestLayout2(display, SWT.SHELL_TRIM);
            shell.open();
            shell.layout();
            while (!shell.isDisposed()) {
                if (!display.readAndDispatch())
                    display.sleep();
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    /**
     * Create the shell
     * @param display
     * @param style
     */
    public TestLayout2(Display display, int style) {
        super(display, style);
        createContents();
    }

    /**
     * Create contents of the window
     */
    protected void createContents() {
        setText("SWT Application");
        setSize(728, 486);
        setLayout(new GridLayout());

        final ToolBar toolBar = new ToolBar(this, SWT.FLAT);
        toolBar.setLayoutData(new GridData(GridData.FILL, GridData.CENTER,
true, false));

        final ToolItem newItemToolItem = new ToolItem(toolBar, SWT.PUSH);
        newItemToolItem.setText("ToolBar Item 11");

        final ToolItem newItemToolItem_3 = new ToolItem(toolBar, SWT.PUSH);
        newItemToolItem_3.setText("12ToolBar Item 1");

        final ToolBar toolBar_1 = new ToolBar(this, SWT.FLAT);
        toolBar_1.setLayoutData(new GridData(GridData.FILL, GridData.CENTER,
true, false));

        final ToolItem newItemToolItem_1 = new ToolItem(toolBar_1, SWT.PUSH);
        newItemToolItem_1.setText("ToolBar Item 21");

        final ToolItem newItemToolItem_2 = new ToolItem(toolBar_1, SWT.PUSH);
        newItemToolItem_2.setText("ToolBar Item 22");

        final Button clickMeToButton = new Button(this, SWT.NONE);
        clickMeToButton.addSelectionListener(new SelectionAdapter() {
            public void widgetSelected(final SelectionEvent e) {
                toolBar_1.dispose();
            }
        });
        clickMeToButton.setLayoutData(new GridData(GridData.FILL,
GridData.FILL, true, true));
        clickMeToButton.setText("Click me to dispose 2nd ToolBar,\n the
GridLayout is useless until you resize the window");
        //
    }

    @Override
    protected void checkSubclass() {
        // Disable the check that prevents subclassing of SWT components
    }

}</code>
      </source_code>
      <source_code type="import">
        <location start="3376" end="3406" />
        <code>import org.eclipse.swt.SWT;</code>
      </source_code>
      <source_code type="import">
        <location start="3407" end="3446" />
        <code>import org.eclipse.swt.layout.GridData;</code>
      </source_code>
      <source_code type="import">
        <location start="3447" end="3488" />
        <code>import org.eclipse.swt.layout.GridLayout;</code>
      </source_code>
      <source_code type="import">
        <location start="3489" end="3528" />
        <code>import org.eclipse.swt.widgets.Display;</code>
      </source_code>
      <source_code type="import">
        <location start="3529" end="3566" />
        <code>import org.eclipse.swt.widgets.Shell;</code>
      </source_code>
      <source_code type="import">
        <location start="3567" end="3606" />
        <code>import org.eclipse.swt.widgets.ToolBar;</code>
      </source_code>
      <source_code type="import">
        <location start="3607" end="3647" />
        <code>import org.eclipse.swt.widgets.ToolItem;</code>
      </source_code>
      <source_code type="class">
        <location start="3649" end="5386" />
        <code>public class TestLayout2 extends Shell {

    /**
     * Launch the application
     * @param args
     */
    public static void main(String args[]) {
        try {
            Display display = Display.getDefault();
            TestLayout2 shell = new TestLayout2(display, SWT.SHELL_TRIM);
            shell.open();
            shell.layout();
            while (!shell.isDisposed()) {
                if (!display.readAndDispatch())
                    display.sleep();
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    /**
     * Create the shell
     * @param display
     * @param style
     */
    public TestLayout2(Display display, int style) {
        super(display, style);
        createContents();
    }
    GridLayout gridLayout ;
    /**
     * Create contents of the window
     */
    protected void createContents() {
        setText("SWT Application");
        setSize(373, 216);
         gridLayout = new GridLayout();
        setLayout(gridLayout);

        final ToolBar toolBar = new ToolBar(this, SWT.FLAT);
        toolBar.setLayoutData(new GridData(GridData.FILL, GridData.CENTER, true, false));

        final ToolItem newItemToolItem = new ToolItem(toolBar, SWT.PUSH);
        newItemToolItem.setText("ToolBar Item 11");

        final ToolItem newItemToolItem_3 = new ToolItem(toolBar, SWT.PUSH);
        newItemToolItem_3.setText("12ToolBar Item 1");

        final ToolBar toolBar_1 = new ToolBar(this, SWT.FLAT);
        toolBar_1.setLayoutData(new GridData(GridData.FILL, GridData.CENTER, true, false));

       //
    }

    @Override
    protected void checkSubclass() {
        // Disable the check that prevents subclassing of SWT components
    }

}</code>
      </source_code>
      <source_code type="functioncall">
        <location start="5931" end="5977" />
        <code>setTabList(new Control[] {clickMeToButton});</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="WONTFIX" />
    <WithStack>Please run the following code. After press "Run" button of eclipse, do not move you mouse,you can see a ToolItem button is in "Up" status, like the button is hovered by mouse.

But when you moved your mouse to the upper toolbar(not the "Up" button), the "ToolBar Item 11" is down.





import org.eclipse.swt.SWT;
import org.eclipse.swt.events.SelectionAdapter;
import org.eclipse.swt.events.SelectionEvent;
import org.eclipse.swt.layout.GridData;
import org.eclipse.swt.layout.GridLayout;
import org.eclipse.swt.widgets.Button;
import org.eclipse.swt.widgets.Display;
import org.eclipse.swt.widgets.Label;
import org.eclipse.swt.widgets.Shell;
import org.eclipse.swt.widgets.ToolBar;
import org.eclipse.swt.widgets.ToolItem;

public class TestLayout2 extends Shell {

    /**
     * Launch the application
     * @param args
     */
    public static void main(String args[]) {
        try {
            Display display = Display.getDefault();
            TestLayout2 shell = new TestLayout2(display, SWT.SHELL_TRIM);
            shell.open();
            shell.layout();
            while (!shell.isDisposed()) {
                if (!display.readAndDispatch())
                    display.sleep();
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    /**
     * Create the shell
     * @param display
     * @param style
     */
    public TestLayout2(Display display, int style) {
        super(display, style);
        createContents();
    }

    /**
     * Create contents of the window
     */
    protected void createContents() {
        setText("SWT Application");
        setSize(728, 486);
        setLayout(new GridLayout());

        final ToolBar toolBar = new ToolBar(this, SWT.FLAT);
        toolBar.setLayoutData(new GridData(GridData.FILL, GridData.CENTER,
true, false));

        final ToolItem newItemToolItem = new ToolItem(toolBar, SWT.PUSH);
        newItemToolItem.setText("ToolBar Item 11");

        final ToolItem newItemToolItem_3 = new ToolItem(toolBar, SWT.PUSH);
        newItemToolItem_3.setText("12ToolBar Item 1");

        final ToolBar toolBar_1 = new ToolBar(this, SWT.FLAT);
        toolBar_1.setLayoutData(new GridData(GridData.FILL, GridData.CENTER,
true, false));

        final ToolItem newItemToolItem_1 = new ToolItem(toolBar_1, SWT.PUSH);
        newItemToolItem_1.setText("ToolBar Item 21");

        final ToolItem newItemToolItem_2 = new ToolItem(toolBar_1, SWT.PUSH);
        newItemToolItem_2.setText("ToolBar Item 22");

        final Button clickMeToButton = new Button(this, SWT.NONE);
        clickMeToButton.addSelectionListener(new SelectionAdapter() {
            public void widgetSelected(final SelectionEvent e) {
                toolBar_1.dispose();
            }
        });
        clickMeToButton.setLayoutData(new GridData(GridData.FILL,
GridData.FILL, true, true));
        clickMeToButton.setText("Click me to dispose 2nd ToolBar,\n the
GridLayout is useless until you resize the window");
        //
    }

    @Override
    protected void checkSubclass() {
        // Disable the check that prevents subclassing of SWT components
    }

}
Created attachment 34155
The "ToolBar Item 11" should not be in "Up" state

The bug is red-circled: ToolBar Item is by default up, but it should be down.
To make the case simple and clear, please use the following code:



import org.eclipse.swt.SWT;
import org.eclipse.swt.layout.GridData;
import org.eclipse.swt.layout.GridLayout;
import org.eclipse.swt.widgets.Display;
import org.eclipse.swt.widgets.Shell;
import org.eclipse.swt.widgets.ToolBar;
import org.eclipse.swt.widgets.ToolItem;

public class TestLayout2 extends Shell {

    /**
     * Launch the application
     * @param args
     */
    public static void main(String args[]) {
        try {
            Display display = Display.getDefault();
            TestLayout2 shell = new TestLayout2(display, SWT.SHELL_TRIM);
            shell.open();
            shell.layout();
            while (!shell.isDisposed()) {
                if (!display.readAndDispatch())
                    display.sleep();
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    /**
     * Create the shell
     * @param display
     * @param style
     */
    public TestLayout2(Display display, int style) {
        super(display, style);
        createContents();
    }
    GridLayout gridLayout ;
    /**
     * Create contents of the window
     */
    protected void createContents() {
        setText("SWT Application");
        setSize(373, 216);
         gridLayout = new GridLayout();
        setLayout(gridLayout);

        final ToolBar toolBar = new ToolBar(this, SWT.FLAT);
        toolBar.setLayoutData(new GridData(GridData.FILL, GridData.CENTER, true, false));

        final ToolItem newItemToolItem = new ToolItem(toolBar, SWT.PUSH);
        newItemToolItem.setText("ToolBar Item 11");

        final ToolItem newItemToolItem_3 = new ToolItem(toolBar, SWT.PUSH);
        newItemToolItem_3.setText("12ToolBar Item 1");

        final ToolBar toolBar_1 = new ToolBar(this, SWT.FLAT);
        toolBar_1.setLayoutData(new GridData(GridData.FILL, GridData.CENTER, true, false));

       //
    }

    @Override
    protected void checkSubclass() {
        // Disable the check that prevents subclassing of SWT components
    }

}
Created attachment 34156
ToolBar Item should not be "Up" by default
When you start your application, the first focusable child/descendant of the
shell will receive the focus. In your case, that's the tool bar, resulting
in the visible button outline (the "up" state) on the first tool bar item.
You can then use the arrow keys to move to the other tool bar items.

If you want the focus to skip the tool bars and go straight to your
main control (in your first example, that would be the button), try
modifying the tabbing order of the shell:

  setTabList(new Control[] {clickMeToButton});
Florian right again.
Nothing to fix.</WithStack>
    <WithOutStack>Please run the following code. After press "Run" button of eclipse, do not move you mouse,you can see a ToolItem button is in "Up" status, like the button is hovered by mouse.

But when you moved your mouse to the upper toolbar(not the "Up" button), the "ToolBar Item 11" is down.





import org.eclipse.swt.SWT;
import org.eclipse.swt.events.SelectionAdapter;
import org.eclipse.swt.events.SelectionEvent;
import org.eclipse.swt.layout.GridData;
import org.eclipse.swt.layout.GridLayout;
import org.eclipse.swt.widgets.Button;
import org.eclipse.swt.widgets.Display;
import org.eclipse.swt.widgets.Label;
import org.eclipse.swt.widgets.Shell;
import org.eclipse.swt.widgets.ToolBar;
import org.eclipse.swt.widgets.ToolItem;

public class TestLayout2 extends Shell {

    /**
     * Launch the application
     * @param args
     */
    public static void main(String args[]) {
        try {
            Display display = Display.getDefault();
            TestLayout2 shell = new TestLayout2(display, SWT.SHELL_TRIM);
            shell.open();
            shell.layout();
            while (!shell.isDisposed()) {
                if (!display.readAndDispatch())
                    display.sleep();
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    /**
     * Create the shell
     * @param display
     * @param style
     */
    public TestLayout2(Display display, int style) {
        super(display, style);
        createContents();
    }

    /**
     * Create contents of the window
     */
    protected void createContents() {
        setText("SWT Application");
        setSize(728, 486);
        setLayout(new GridLayout());

        final ToolBar toolBar = new ToolBar(this, SWT.FLAT);
        toolBar.setLayoutData(new GridData(GridData.FILL, GridData.CENTER,
true, false));

        final ToolItem newItemToolItem = new ToolItem(toolBar, SWT.PUSH);
        newItemToolItem.setText("ToolBar Item 11");

        final ToolItem newItemToolItem_3 = new ToolItem(toolBar, SWT.PUSH);
        newItemToolItem_3.setText("12ToolBar Item 1");

        final ToolBar toolBar_1 = new ToolBar(this, SWT.FLAT);
        toolBar_1.setLayoutData(new GridData(GridData.FILL, GridData.CENTER,
true, false));

        final ToolItem newItemToolItem_1 = new ToolItem(toolBar_1, SWT.PUSH);
        newItemToolItem_1.setText("ToolBar Item 21");

        final ToolItem newItemToolItem_2 = new ToolItem(toolBar_1, SWT.PUSH);
        newItemToolItem_2.setText("ToolBar Item 22");

        final Button clickMeToButton = new Button(this, SWT.NONE);
        clickMeToButton.addSelectionListener(new SelectionAdapter() {
            public void widgetSelected(final SelectionEvent e) {
                toolBar_1.dispose();
            }
        });
        clickMeToButton.setLayoutData(new GridData(GridData.FILL,
GridData.FILL, true, true));
        clickMeToButton.setText("Click me to dispose 2nd ToolBar,\n the
GridLayout is useless until you resize the window");
        //
    }

    @Override
    protected void checkSubclass() {
        // Disable the check that prevents subclassing of SWT components
    }

}
Created attachment 34155
The "ToolBar Item 11" should not be in "Up" state

The bug is red-circled: ToolBar Item is by default up, but it should be down.
To make the case simple and clear, please use the following code:



import org.eclipse.swt.SWT;
import org.eclipse.swt.layout.GridData;
import org.eclipse.swt.layout.GridLayout;
import org.eclipse.swt.widgets.Display;
import org.eclipse.swt.widgets.Shell;
import org.eclipse.swt.widgets.ToolBar;
import org.eclipse.swt.widgets.ToolItem;

public class TestLayout2 extends Shell {

    /**
     * Launch the application
     * @param args
     */
    public static void main(String args[]) {
        try {
            Display display = Display.getDefault();
            TestLayout2 shell = new TestLayout2(display, SWT.SHELL_TRIM);
            shell.open();
            shell.layout();
            while (!shell.isDisposed()) {
                if (!display.readAndDispatch())
                    display.sleep();
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    /**
     * Create the shell
     * @param display
     * @param style
     */
    public TestLayout2(Display display, int style) {
        super(display, style);
        createContents();
    }
    GridLayout gridLayout ;
    /**
     * Create contents of the window
     */
    protected void createContents() {
        setText("SWT Application");
        setSize(373, 216);
         gridLayout = new GridLayout();
        setLayout(gridLayout);

        final ToolBar toolBar = new ToolBar(this, SWT.FLAT);
        toolBar.setLayoutData(new GridData(GridData.FILL, GridData.CENTER, true, false));

        final ToolItem newItemToolItem = new ToolItem(toolBar, SWT.PUSH);
        newItemToolItem.setText("ToolBar Item 11");

        final ToolItem newItemToolItem_3 = new ToolItem(toolBar, SWT.PUSH);
        newItemToolItem_3.setText("12ToolBar Item 1");

        final ToolBar toolBar_1 = new ToolBar(this, SWT.FLAT);
        toolBar_1.setLayoutData(new GridData(GridData.FILL, GridData.CENTER, true, false));

       //
    }

    @Override
    protected void checkSubclass() {
        // Disable the check that prevents subclassing of SWT components
    }

}
Created attachment 34156
ToolBar Item should not be "Up" by default
When you start your application, the first focusable child/descendant of the
shell will receive the focus. In your case, that's the tool bar, resulting
in the visible button outline (the "up" state) on the first tool bar item.
You can then use the arrow keys to move to the other tool bar items.

If you want the focus to skip the tool bars and go straight to your
main control (in your first example, that would be the button), try
modifying the tabbing order of the shell:

  setTabList(new Control[] {clickMeToButton});
Florian right again.
Nothing to fix.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="126476" />
    <CreationDate amount="2006-02-05 01:21:00 -0500" />
    <DupId amount="" />
    <classification amount="BIRT" />
    <Product amount="BIRT" />
    <component amount="Report Engine" />
    <Version amount="2.0.0" />
    <rep_platform amount="PC" />
    <op_sys amount="All" />
    <priority amount="P3" />
    <bug_severity amount="blocker" />
    <Summery>org.eclipse.birt.core compilation failed in building with Eclipse3.2 M4</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>org.eclipse.birt.core compilation failed in building with Eclipse3.2 M4.

Error log:
compileSource:
    [javac] Compiling 80 source files to E:\NewBuild\eclipse\plugins\org.eclipse.birt.core\bin
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.core\src\org\eclipse\birt\core\framework\eclipse\EclipseConfigurationElement.java:17: cannot resolve symbol
    [javac] symbol  : class CoreException 
    [javac] location: package runtime
    [javac] import org.eclipse.core.runtime.CoreException;
    [javac]                                 ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.core\src\org\eclipse\birt\core\framework\eclipse\EclipsePath.java:10: cannot resolve symbol
    [javac] symbol  : class IPath 
    [javac] location: package runtime
    [javac] import org.eclipse.core.runtime.IPath;
    [javac]                                 ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.core\src\org\eclipse\birt\core\framework\eclipse\EclipsePath.java:18: cannot resolve symbol
    [javac] symbol  : class IPath 
    [javac] location: class org.eclipse.birt.core.framework.eclipse.EclipsePath
    [javac] 	protected IPath path;
    [javac]                   ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.core\src\org\eclipse\birt\core\framework\eclipse\EclipsePath.java:19: cannot resolve symbol
    [javac] symbol  : class IPath 
    [javac] location: class org.eclipse.birt.core.framework.eclipse.EclipsePath
    [javac] 	public EclipsePath(IPath path)
    [javac]                            ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.core\src\org\eclipse\birt\core\framework\eclipse\EclipseConfigurationElement.java:37: cannot resolve symbol
    [javac] symbol  : class CoreException 
    [javac] location: class org.eclipse.birt.core.framework.eclipse.EclipseConfigurationElement
    [javac] 		catch(CoreException ex)
    [javac]                       ^
    [javac] 5 errors
Due to platform change. Class CoreException was moved to org.eclipse.equinox.common_1.0.0.v20051205.jar in Eclipse3.2M4.
Fixed.
Verified in daily build 20060207.</WithStack>
    <WithOutStack>org.eclipse.birt.core compilation failed in building with Eclipse3.2 M4.

Error log:
compileSource:
    [javac] Compiling 80 source files to E:\NewBuild\eclipse\plugins\org.eclipse.birt.core\bin
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.core\src\org\eclipse\birt\core\framework\eclipse\EclipseConfigurationElement.java:17: cannot resolve symbol
    [javac] symbol  : class CoreException 
    [javac] location: package runtime
    [javac] import org.eclipse.core.runtime.CoreException;
    [javac]                                 ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.core\src\org\eclipse\birt\core\framework\eclipse\EclipsePath.java:10: cannot resolve symbol
    [javac] symbol  : class IPath 
    [javac] location: package runtime
    [javac] import org.eclipse.core.runtime.IPath;
    [javac]                                 ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.core\src\org\eclipse\birt\core\framework\eclipse\EclipsePath.java:18: cannot resolve symbol
    [javac] symbol  : class IPath 
    [javac] location: class org.eclipse.birt.core.framework.eclipse.EclipsePath
    [javac] 	protected IPath path;
    [javac]                   ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.core\src\org\eclipse\birt\core\framework\eclipse\EclipsePath.java:19: cannot resolve symbol
    [javac] symbol  : class IPath 
    [javac] location: class org.eclipse.birt.core.framework.eclipse.EclipsePath
    [javac] 	public EclipsePath(IPath path)
    [javac]                            ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.core\src\org\eclipse\birt\core\framework\eclipse\EclipseConfigurationElement.java:37: cannot resolve symbol
    [javac] symbol  : class CoreException 
    [javac] location: class org.eclipse.birt.core.framework.eclipse.EclipseConfigurationElement
    [javac] 		catch(CoreException ex)
    [javac]                       ^
    [javac] 5 errors
Due to platform change. Class CoreException was moved to org.eclipse.equinox.common_1.0.0.v20051205.jar in Eclipse3.2M4.
Fixed.
Verified in daily build 20060207.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="126477" />
    <CreationDate amount="2006-02-05 02:41:00 -0500" />
    <DupId amount="123188" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="SWT" />
    <Version amount="3.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows Server 2003" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>StyledText bug in windows 2003 server!</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="2">
      <source_code type="assignment">
        <location start="591" end="665" />
        <code>in the 30 line:style.metrics = new GlyphMetrics(rect.height,0,rect.width);</code>
      </source_code>
      <source_code type="assignment">
        <location start="734" end="787" />
        <code>style.metrics = new GlyphMetrics(rect.height,0,5000);</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="DUPLICATE" />
    <WithStack>hello ,frist please excuse my pool english ,i'm a chinese .
you can visit http://www.eclipse.org/swt/R3_2/new_and_noteworthy.html
there the "Embedded Objects in StyledText" and it's SWT snippet in
http://dev.eclipse.org/viewcvs/index.cgi/org.eclipse.swt.snippets/src/org/eclipse/swt/snippets/Snippet212.java?rev=HEAD&amp;content-type=text/vnd.viewcvs-markup
in my win 2003 server ,i use eclipse 3.2 m4 to run this snippet ,there's a bug
in it. the StyledText display the image over the word ,and the caret can across
the image by mouse.
but this snippet in suse linux 10.0 gnome runs well~~~~.

in the 30 line:style.metrics = new GlyphMetrics(rect.height,0,rect.width);
when i replace the "rect.width" to any other number like:
---------
style.metrics = new GlyphMetrics(rect.height,0,5000);
---------
the bug in it !!! in win 2003 ,when i replace the "rect.width" to any other number,it all like replace to "0",and the StyledText display the image over the word .
Created attachment 34157
this is the image.

this is the image.


*** This bug has been marked as a duplicate of 123188 ***</WithStack>
    <WithOutStack>hello ,frist please excuse my pool english ,i'm a chinese .
you can visit http://www.eclipse.org/swt/R3_2/new_and_noteworthy.html
there the "Embedded Objects in StyledText" and it's SWT snippet in
http://dev.eclipse.org/viewcvs/index.cgi/org.eclipse.swt.snippets/src/org/eclipse/swt/snippets/Snippet212.java?rev=HEAD&amp;content-type=text/vnd.viewcvs-markup
in my win 2003 server ,i use eclipse 3.2 m4 to run this snippet ,there's a bug
in it. the StyledText display the image over the word ,and the caret can across
the image by mouse.
but this snippet in suse linux 10.0 gnome runs well~~~~.

in the 30 line:style.metrics = new GlyphMetrics(rect.height,0,rect.width);
when i replace the "rect.width" to any other number like:
---------
style.metrics = new GlyphMetrics(rect.height,0,5000);
---------
the bug in it !!! in win 2003 ,when i replace the "rect.width" to any other number,it all like replace to "0",and the StyledText display the image over the word .
Created attachment 34157
this is the image.

this is the image.


*** This bug has been marked as a duplicate of 123188 ***</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="126478" />
    <CreationDate amount="2006-02-05 03:01:00 -0500" />
    <DupId amount="" />
    <classification amount="BIRT" />
    <Product amount="BIRT" />
    <component amount="Chart" />
    <Version amount="2.0.0" />
    <rep_platform amount="PC" />
    <op_sys amount="All" />
    <priority amount="P3" />
    <bug_severity amount="blocker" />
    <Summery>org.eclipse.birt.chart.ui and org.eclipse.birt.chart.ui.extension compilation failed in building with Eclipse3.2 M4</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="1">
      <source_code type="functioncall">
        <location start="1749" end="1798" />
        <code>[javac] 			return new CategoryXAxisAction( );</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>org.eclipse.birt.chart.ui compilation failed in building with Eclipse3.2 M4.

Error log:
compileSource:
    [javac] Compiling 45 source files to E:\NewBuild\eclipse\plugins\org.eclipse.birt.chart.ui\bin
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.chart.ui\src\org\eclipse\birt\chart\ui\swt\ChartDlg.java:439: cannot access org.eclipse.core.runtime.IAdaptable
    [javac] file org\eclipse\core\runtime\IAdaptable.class not found
    [javac] 				shell = new Shell( PlatformUI.getWorkbench( )
    [javac]                                                                           ^
    [javac] 1 error
Due to platform change. Class IAdaptable was moved to
org.eclipse.equinox.common_1.0.0.v20051205.jar in Eclipse3.2M4.

Error log for org.eclipse.birt.chart.ui.extension:
compileSource:
    [mkdir] Created dir: E:\NewBuild\eclipse\plugins\org.eclipse.birt.chart.ui.extension\bin
     [copy] Copying 7 files to E:\NewBuild\eclipse\plugins\org.eclipse.birt.chart.ui.extension\bin
    [javac] Compiling 135 source files to E:\NewBuild\eclipse\plugins\org.eclipse.birt.chart.ui.extension\bin
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.chart.ui.extension\src\org\eclipse\birt\chart\ui\swt\wizard\TaskSelectData.java:649: cannot access org.eclipse.core.commands.common.EventManager
    [javac] file org\eclipse\core\commands\common\EventManager.class not found
    [javac] 	class CategoryXAxisAction extends Action
    [javac]         ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.chart.ui.extension\src\org\eclipse\birt\chart\ui\swt\wizard\TaskSelectData.java:768: incompatible types
    [javac] found   : org.eclipse.birt.chart.ui.swt.wizard.TaskSelectData.CategoryXAxisAction
    [javac] required: java.lang.Object
    [javac] 			return new CategoryXAxisAction( );
    [javac]                                ^
    [javac] Note: Some input files use or override a deprecated API.
    [javac] Note: Recompile with -deprecation for details.
    [javac] 2 errors

Fixed. Modify the build script of these plugins, add needed plugins into class path.
Change bug status to FIXED.
Verified in daily build 20060207.</WithStack>
    <WithOutStack>org.eclipse.birt.chart.ui compilation failed in building with Eclipse3.2 M4.

Error log:
compileSource:
    [javac] Compiling 45 source files to E:\NewBuild\eclipse\plugins\org.eclipse.birt.chart.ui\bin
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.chart.ui\src\org\eclipse\birt\chart\ui\swt\ChartDlg.java:439: cannot access org.eclipse.core.runtime.IAdaptable
    [javac] file org\eclipse\core\runtime\IAdaptable.class not found
    [javac] 				shell = new Shell( PlatformUI.getWorkbench( )
    [javac]                                                                           ^
    [javac] 1 error
Due to platform change. Class IAdaptable was moved to
org.eclipse.equinox.common_1.0.0.v20051205.jar in Eclipse3.2M4.

Error log for org.eclipse.birt.chart.ui.extension:
compileSource:
    [mkdir] Created dir: E:\NewBuild\eclipse\plugins\org.eclipse.birt.chart.ui.extension\bin
     [copy] Copying 7 files to E:\NewBuild\eclipse\plugins\org.eclipse.birt.chart.ui.extension\bin
    [javac] Compiling 135 source files to E:\NewBuild\eclipse\plugins\org.eclipse.birt.chart.ui.extension\bin
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.chart.ui.extension\src\org\eclipse\birt\chart\ui\swt\wizard\TaskSelectData.java:649: cannot access org.eclipse.core.commands.common.EventManager
    [javac] file org\eclipse\core\commands\common\EventManager.class not found
    [javac] 	class CategoryXAxisAction extends Action
    [javac]         ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.chart.ui.extension\src\org\eclipse\birt\chart\ui\swt\wizard\TaskSelectData.java:768: incompatible types
    [javac] found   : org.eclipse.birt.chart.ui.swt.wizard.TaskSelectData.CategoryXAxisAction
    [javac] required: java.lang.Object
    [javac] 			return new CategoryXAxisAction( );
    [javac]                                ^
    [javac] Note: Some input files use or override a deprecated API.
    [javac] Note: Recompile with -deprecation for details.
    [javac] 2 errors

Fixed. Modify the build script of these plugins, add needed plugins into class path.
Change bug status to FIXED.
Verified in daily build 20060207.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="126479" />
    <CreationDate amount="2006-02-05 03:18:00 -0500" />
    <DupId amount="124023" />
    <classification amount="WebTools" />
    <Product amount="WTP ServerTools" />
    <component amount="wst.server" />
    <Version amount="1.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows 2000" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>close a web project and reopen it , will lost server runtime information.</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="1">
      <source_code type="functiondef">
        <location start="164" end="196" />
        <code>public IModule[] getModules() {}</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="1">
      <Enumeration lines="2">
        <Lines>
          <Line>1. close a web project.</Line>
          <Line>2. reopen it. then go to server properties page. will no server information</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="CLOSED" />
    <resolution amount="DUPLICATE" />
    <WithStack>1. close a web project.
2. reopen it. then go to server properties page. will no server information

Reason:
in org.eclipse.wst.server.core.internal.ModuleFactory 
public IModule[] getModules() {} have a cashe for modules.
when close a project. then reopen it . the cashe will not have the new open module.
This is a duplicate of a facets updating problem that is supposed to be fixed in current 1.0.1 builds. Have you tried this on a recent 1.0.1 or 1.5 build?

Searching for duplicate bug...


*** This bug has been marked as a duplicate of 124023 ***
This bug was moved to 'closed' state, since it is so old is is assumed its dup, invalid, or worksforme resolution is no longer in qustion and the bugzilla needs no further attention. Feel free to re-open, or open a new bug, if this semi-automatic processing was done in error in this case.</WithStack>
    <WithOutStack>1. close a web project.
2. reopen it. then go to server properties page. will no server information

Reason:
in org.eclipse.wst.server.core.internal.ModuleFactory 
public IModule[] getModules() {} have a cashe for modules.
when close a project. then reopen it . the cashe will not have the new open module.
This is a duplicate of a facets updating problem that is supposed to be fixed in current 1.0.1 builds. Have you tried this on a recent 1.0.1 or 1.5 build?

Searching for duplicate bug...


*** This bug has been marked as a duplicate of 124023 ***
This bug was moved to 'closed' state, since it is so old is is assumed its dup, invalid, or worksforme resolution is no longer in qustion and the bugzilla needs no further attention. Feel free to re-open, or open a new bug, if this semi-automatic processing was done in error in this case.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="126480" />
    <CreationDate amount="2006-02-05 04:04:00 -0500" />
    <DupId amount="" />
    <classification amount="Tools" />
    <Product amount="CDT" />
    <component amount="cdt-core" />
    <Version amount="3.1" />
    <rep_platform amount="PC" />
    <op_sys amount="Linux-GTK" />
    <priority amount="P3" />
    <bug_severity amount="enhancement" />
    <Summery>Indexer should cache its result</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>Indexer should cache its result to increase performance.
Could you please specify, which kind of cache do you mean ?

Currently, situation looks like follows:
- full indexing is performed (for all files in  project) when project is opened or its indexing mode is changed (ctags-&gt;full). 
All results are stored in binary index file (&lt;workspace&gt;\.metadata\.plugins\org.eclipse.cdt.core\*.index). 
Each translation unit (c/c++ file &amp; its includes) forms its own part of this file. 
Since index size is huge (in general), we don't keep it all in memory: only last-referenced parts are stored, remaining data is read from file when needed (normal caching process). 
When some source file is changed, corresponding index part will be rebuilt after source was saved. In this case, all included headers will be rescanned again.
When header file itself was changed, indexes for all dependent sources should be rebuilt. Really, it frequently raises almost whole project reindexing.

Doug's PDOM proposal allows to store most of parsing results in database, to avoid re-index again, in most cases.

So, which kind of index should be added ?

Sorry I didn't make it clear. What I meant was the results of searching for definitions/declarations/references and also the lists of "content assist". Maybe I'm wrong about this and it's already cached?
It seems like this data is cached already.

When we refer some part of index, it's loaded
from index file to memory. When we repeat the
same operation (go to definition, etc) on the
same source fragment, it's very probable that
it's already in memory, unless later requests
(to another elements) have replaced it.

Really, there's a visible difference between
1st search for some method, and the successive
searches: 1st is greatly longer.



Content Assist works differently now and is a lot faster.</WithStack>
    <WithOutStack>Indexer should cache its result to increase performance.
Could you please specify, which kind of cache do you mean ?

Currently, situation looks like follows:
- full indexing is performed (for all files in  project) when project is opened or its indexing mode is changed (ctags-&gt;full). 
All results are stored in binary index file (&lt;workspace&gt;\.metadata\.plugins\org.eclipse.cdt.core\*.index). 
Each translation unit (c/c++ file &amp; its includes) forms its own part of this file. 
Since index size is huge (in general), we don't keep it all in memory: only last-referenced parts are stored, remaining data is read from file when needed (normal caching process). 
When some source file is changed, corresponding index part will be rebuilt after source was saved. In this case, all included headers will be rescanned again.
When header file itself was changed, indexes for all dependent sources should be rebuilt. Really, it frequently raises almost whole project reindexing.

Doug's PDOM proposal allows to store most of parsing results in database, to avoid re-index again, in most cases.

So, which kind of index should be added ?

Sorry I didn't make it clear. What I meant was the results of searching for definitions/declarations/references and also the lists of "content assist". Maybe I'm wrong about this and it's already cached?
It seems like this data is cached already.

When we refer some part of index, it's loaded
from index file to memory. When we repeat the
same operation (go to definition, etc) on the
same source fragment, it's very probable that
it's already in memory, unless later requests
(to another elements) have replaced it.

Really, there's a visible difference between
1st search for some method, and the successive
searches: 1st is greatly longer.



Content Assist works differently now and is a lot faster.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="126481" />
    <CreationDate amount="2006-02-05 04:04:00 -0500" />
    <DupId amount="" />
    <classification amount="BIRT" />
    <Product amount="BIRT" />
    <component amount="Report Viewer" />
    <Version amount="2.0.0" />
    <rep_platform amount="PC" />
    <op_sys amount="All" />
    <priority amount="P3" />
    <bug_severity amount="blocker" />
    <Summery>org.eclipse.birt.report.viewer compilation failed in building with Eclipse3.2 M4</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="7">
      <source_code type="assignment">
        <location start="8706" end="8805" />
        <code>[javac] 		Status errorStatus = new Status( IStatus.ERROR, PLUGIN_ID, IStatus.OK, message, ex );</code>
      </source_code>
      <source_code type="assignment">
        <location start="9095" end="9194" />
        <code>[javac] 		Status errorStatus = new Status( IStatus.ERROR, PLUGIN_ID, IStatus.OK, message, ex );</code>
      </source_code>
      <source_code type="assignment">
        <location start="9513" end="9612" />
        <code>[javac] 		Status errorStatus = new Status( IStatus.ERROR, PLUGIN_ID, IStatus.OK, message, ex );</code>
      </source_code>
      <source_code type="assignment">
        <location start="9939" end="10038" />
        <code>[javac] 		Status errorStatus = new Status( IStatus.ERROR, PLUGIN_ID, IStatus.OK, message, ex );</code>
      </source_code>
      <source_code type="functioncall">
        <location start="10803" end="10858" />
        <code>[javac] 									new Path( productImageURLs[i] ) );</code>
      </source_code>
      <source_code type="assignment">
        <location start="14062" end="14128" />
        <code>[javac] 			IPath webappPath = getWebappPath( pluginId, path );</code>
      </source_code>
      <source_code type="functioncall">
        <location start="18543" end="18592" />
        <code>[javac] 			return new Path( webappLocation );</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>org.eclipse.birt.report.viewer compilation failed in building with Eclipse3.2 M4.

Error log:
Jar:
    [mkdir] Created dir: E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\temp.folder\viewer.jar.bin
    [javac] Compiling 22 source files to E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\temp.folder\viewer.jar.bin
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\src\org\eclipse\birt\report\viewer\ViewerPlugin.java:20: cannot resolve symbol
    [javac] symbol  : class IStatus 
    [javac] location: package runtime
    [javac] import org.eclipse.core.runtime.IStatus;
    [javac]                                 ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\src\org\eclipse\birt\report\viewer\ViewerPlugin.java:22: cannot resolve symbol
    [javac] symbol  : class Status 
    [javac] location: package runtime
    [javac] import org.eclipse.core.runtime.Status;
    [javac]                                 ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\src\org\eclipse\birt\report\viewer\browsers\BrowserManager.java:19: cannot resolve symbol
    [javac] symbol  : class CoreException 
    [javac] location: package runtime
    [javac] import org.eclipse.core.runtime.CoreException;
    [javac]                                 ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\src\org\eclipse\birt\report\viewer\browsers\embedded\EmbeddedBrowser.java:20: cannot resolve symbol
    [javac] symbol  : class Path 
    [javac] location: package runtime
    [javac] import org.eclipse.core.runtime.Path;
    [javac]                                 ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\src\org\eclipse\birt\report\viewer\browsers\embedded\EmbeddedBrowser.java:22: cannot resolve symbol
    [javac] symbol  : class Preferences 
    [javac] location: package runtime
    [javac] import org.eclipse.core.runtime.Preferences;
    [javac]                                 ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\src\org\eclipse\birt\report\viewer\browsers\embedded\EmbeddedBrowser.java:63: cannot resolve symbol
    [javac] symbol  : class Preferences 
    [javac] location: class org.eclipse.birt.report.viewer.browsers.embedded.EmbeddedBrowser
    [javac] 	private Preferences store;
    [javac]                 ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\src\org\eclipse\birt\report\viewer\utilities\AppServerWrapper.java:17: cannot resolve symbol
    [javac] symbol  : class IStatus 
    [javac] location: package runtime
    [javac] import org.eclipse.core.runtime.IStatus;
    [javac]                                 ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\src\org\eclipse\birt\report\viewer\utilities\AppServerWrapper.java:19: cannot resolve symbol
    [javac] symbol  : class Status 
    [javac] location: package runtime
    [javac] import org.eclipse.core.runtime.Status;
    [javac]                                 ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\src\org\eclipse\birt\report\viewer\utilities\AppServerWrapper.java:86: cannot resolve symbol
    [javac] symbol  : class CoreException 
    [javac] location: class org.eclipse.birt.report.viewer.utilities.AppServerWrapper
    [javac] 	public synchronized IWebappServer getAppServer( ) throws CoreException
    [javac]                                                                  ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\src\org\eclipse\birt\report\viewer\utilities\AppServerWrapper.java:105: cannot resolve symbol
    [javac] symbol  : class CoreException 
    [javac] location: class org.eclipse.birt.report.viewer.utilities.AppServerWrapper
    [javac] 	private void createWebappServer( ) throws CoreException
    [javac]                                                   ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\src\org\eclipse\birt\report\viewer\utilities\AppServerWrapper.java:159: cannot resolve symbol
    [javac] symbol  : class CoreException 
    [javac] location: class org.eclipse.birt.report.viewer.utilities.AppServerWrapper
    [javac] 	private void startWebappServer( ) throws CoreException
    [javac]                                                  ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\src\org\eclipse\birt\report\viewer\utilities\WebViewer.java:22: cannot resolve symbol
    [javac] symbol  : class Path 
    [javac] location: package runtime
    [javac] import org.eclipse.core.runtime.Path;
    [javac]                                 ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\src\org\eclipse\birt\report\viewer\utilities\WebappAccessor.java:19: cannot resolve symbol
    [javac] symbol  : class IPath 
    [javac] location: package runtime
    [javac] import org.eclipse.core.runtime.IPath;
    [javac]                                 ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\src\org\eclipse\birt\report\viewer\utilities\WebappAccessor.java:20: cannot resolve symbol
    [javac] symbol  : class IStatus 
    [javac] location: package runtime
    [javac] import org.eclipse.core.runtime.IStatus;
    [javac]                                 ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\src\org\eclipse\birt\report\viewer\utilities\WebappAccessor.java:21: cannot resolve symbol
    [javac] symbol  : class Path 
    [javac] location: package runtime
    [javac] import org.eclipse.core.runtime.Path;
    [javac]                                 ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\src\org\eclipse\birt\report\viewer\utilities\WebappAccessor.java:23: cannot resolve symbol
    [javac] symbol  : class Status 
    [javac] location: package runtime
    [javac] import org.eclipse.core.runtime.Status;
    [javac]                                 ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\src\org\eclipse\birt\report\viewer\utilities\WebappAccessor.java:63: cannot resolve symbol
    [javac] symbol  : class IPath 
    [javac] location: class org.eclipse.birt.report.viewer.utilities.WebappAccessor
    [javac] 			IPath path ) throws CoreException
    [javac]                         ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\src\org\eclipse\birt\report\viewer\utilities\WebappAccessor.java:63: cannot resolve symbol
    [javac] symbol  : class CoreException 
    [javac] location: class org.eclipse.birt.report.viewer.utilities.WebappAccessor
    [javac] 			IPath path ) throws CoreException
    [javac]                                             ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\src\org\eclipse\birt\report\viewer\utilities\WebappAccessor.java:96: cannot resolve symbol
    [javac] symbol  : class CoreException 
    [javac] location: class org.eclipse.birt.report.viewer.utilities.WebappAccessor
    [javac] 	public static void stop( String webappName ) throws CoreException
    [javac]                                                             ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\src\org\eclipse\birt\report\viewer\utilities\WebappAccessor.java:150: cannot resolve symbol
    [javac] symbol  : class IPath 
    [javac] location: class org.eclipse.birt.report.viewer.utilities.WebappAccessor
    [javac] 	private static IPath getWebappPath( String pluginId, IPath path )
    [javac]                                                              ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\src\org\eclipse\birt\report\viewer\utilities\WebappAccessor.java:150: cannot resolve symbol
    [javac] symbol  : class IPath 
    [javac] location: class org.eclipse.birt.report.viewer.utilities.WebappAccessor
    [javac] 	private static IPath getWebappPath( String pluginId, IPath path )
    [javac]                        ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\src\org\eclipse\birt\report\viewer\utilities\WebappAccessor.java:151: cannot resolve symbol
    [javac] symbol  : class CoreException 
    [javac] location: class org.eclipse.birt.report.viewer.utilities.WebappAccessor
    [javac] 			throws CoreException
    [javac]                                ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\src\org\eclipse\birt\report\viewer\ViewerPlugin.java:144: cannot resolve symbol
    [javac] symbol  : class Status 
    [javac] location: class org.eclipse.birt.report.viewer.ViewerPlugin
    [javac] 		Status errorStatus = new Status( IStatus.ERROR, PLUGIN_ID, IStatus.OK, message, ex );
    [javac]                 ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\src\org\eclipse\birt\report\viewer\ViewerPlugin.java:144: cannot resolve symbol
    [javac] symbol  : class Status 
    [javac] location: class org.eclipse.birt.report.viewer.ViewerPlugin
    [javac] 		Status errorStatus = new Status( IStatus.ERROR, PLUGIN_ID, IStatus.OK, message, ex );
    [javac]                                          ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\src\org\eclipse\birt\report\viewer\ViewerPlugin.java:144: cannot resolve symbol
    [javac] symbol  : variable IStatus 
    [javac] location: class org.eclipse.birt.report.viewer.ViewerPlugin
    [javac] 		Status errorStatus = new Status( IStatus.ERROR, PLUGIN_ID, IStatus.OK, message, ex );
    [javac]                                                  ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\src\org\eclipse\birt\report\viewer\ViewerPlugin.java:144: cannot resolve symbol
    [javac] symbol  : variable IStatus 
    [javac] location: class org.eclipse.birt.report.viewer.ViewerPlugin
    [javac] 		Status errorStatus = new Status( IStatus.ERROR, PLUGIN_ID, IStatus.OK, message, ex );
    [javac]                                                                            ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\src\org\eclipse\birt\report\viewer\browsers\BrowserManager.java:253: cannot resolve symbol
    [javac] symbol  : class CoreException 
    [javac] location: class org.eclipse.birt.report.viewer.browsers.BrowserManager
    [javac] 			catch ( CoreException ce )
    [javac]                                 ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\src\org\eclipse\birt\report\viewer\browsers\embedded\EmbeddedBrowser.java:420: cannot resolve symbol
    [javac] symbol  : class Path 
    [javac] location: class org.eclipse.birt.report.viewer.browsers.embedded.EmbeddedBrowser
    [javac] 									new Path( productImageURLs[i] ) );
    [javac]                                                                             ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\src\org\eclipse\birt\report\viewer\utilities\AppServerWrapper.java:149: cannot resolve symbol
    [javac] symbol  : class CoreException 
    [javac] location: class org.eclipse.birt.report.viewer.utilities.AppServerWrapper
    [javac] 				catch ( CoreException e )
    [javac]                                         ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\src\org\eclipse\birt\report\viewer\utilities\AppServerWrapper.java:210: cannot resolve symbol
    [javac] symbol  : class CoreException 
    [javac] location: class org.eclipse.birt.report.viewer.utilities.AppServerWrapper
    [javac] 			throw new CoreException( new Status( IStatus.ERROR,
    [javac]                                   ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\src\org\eclipse\birt\report\viewer\utilities\AppServerWrapper.java:210: cannot resolve symbol
    [javac] symbol  : class Status 
    [javac] location: class org.eclipse.birt.report.viewer.utilities.AppServerWrapper
    [javac] 			throw new CoreException( new Status( IStatus.ERROR,
    [javac]                                                      ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\src\org\eclipse\birt\report\viewer\utilities\AppServerWrapper.java:210: cannot resolve symbol
    [javac] symbol  : variable IStatus 
    [javac] location: class org.eclipse.birt.report.viewer.utilities.AppServerWrapper
    [javac] 			throw new CoreException( new Status( IStatus.ERROR,
    [javac]                                                              ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\src\org\eclipse\birt\report\viewer\utilities\AppServerWrapper.java:212: cannot resolve symbol
    [javac] symbol  : variable IStatus 
    [javac] location: class org.eclipse.birt.report.viewer.utilities.AppServerWrapper
    [javac] 					IStatus.OK,
    [javac]                                         ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\src\org\eclipse\birt\report\viewer\utilities\WebViewer.java:158: cannot resolve symbol
    [javac] symbol  : variable Path 
    [javac] location: class org.eclipse.birt.report.viewer.utilities.WebViewer
    [javac] 			WebappAccessor.start( "viewer", WebAppPlugin, Path.EMPTY ); //$NON-NLS-1$
    [javac]                                                                       ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\src\org\eclipse\birt\report\viewer\utilities\WebViewer.java:160: cannot resolve symbol
    [javac] symbol  : class CoreException 
    [javac] location: class org.eclipse.birt.report.viewer.utilities.WebViewer
    [javac] 		catch ( CoreException e )
    [javac]                         ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\src\org\eclipse\birt\report\viewer\utilities\WebappAccessor.java:77: cannot resolve symbol
    [javac] symbol  : class IPath 
    [javac] location: class org.eclipse.birt.report.viewer.utilities.WebappAccessor
    [javac] 			IPath webappPath = getWebappPath( pluginId, path );
    [javac]                         ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\src\org\eclipse\birt\report\viewer\utilities\WebappAccessor.java:117: cannot resolve symbol
    [javac] symbol  : class CoreException 
    [javac] location: class org.eclipse.birt.report.viewer.utilities.WebappAccessor
    [javac] 		} catch ( CoreException e )
    [javac]                           ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\src\org\eclipse\birt\report\viewer\utilities\WebappAccessor.java:134: cannot resolve symbol
    [javac] symbol  : class CoreException 
    [javac] location: class org.eclipse.birt.report.viewer.utilities.WebappAccessor
    [javac] 		} catch ( CoreException e )
    [javac]                           ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\src\org\eclipse\birt\report\viewer\utilities\WebappAccessor.java:157: cannot resolve symbol
    [javac] symbol  : class CoreException 
    [javac] location: class org.eclipse.birt.report.viewer.utilities.WebappAccessor
    [javac] 			throw new CoreException( new Status( IStatus.ERROR,
    [javac]                                   ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\src\org\eclipse\birt\report\viewer\utilities\WebappAccessor.java:157: cannot resolve symbol
    [javac] symbol  : class Status 
    [javac] location: class org.eclipse.birt.report.viewer.utilities.WebappAccessor
    [javac] 			throw new CoreException( new Status( IStatus.ERROR,
    [javac]                                                      ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\src\org\eclipse\birt\report\viewer\utilities\WebappAccessor.java:157: cannot resolve symbol
    [javac] symbol  : variable IStatus 
    [javac] location: class org.eclipse.birt.report.viewer.utilities.WebappAccessor
    [javac] 			throw new CoreException( new Status( IStatus.ERROR,
    [javac]                                                              ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\src\org\eclipse\birt\report\viewer\utilities\WebappAccessor.java:158: cannot resolve symbol
    [javac] symbol  : variable IStatus 
    [javac] location: class org.eclipse.birt.report.viewer.utilities.WebappAccessor
    [javac] 					ViewerPlugin.PLUGIN_ID, IStatus.OK, ViewerPlugin
    [javac]                                                                 ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\src\org\eclipse\birt\report\viewer\utilities\WebappAccessor.java:170: cannot resolve symbol
    [javac] symbol  : class CoreException 
    [javac] location: class org.eclipse.birt.report.viewer.utilities.WebappAccessor
    [javac] 			throw new CoreException( new Status( IStatus.ERROR,
    [javac]                                   ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\src\org\eclipse\birt\report\viewer\utilities\WebappAccessor.java:170: cannot resolve symbol
    [javac] symbol  : class Status 
    [javac] location: class org.eclipse.birt.report.viewer.utilities.WebappAccessor
    [javac] 			throw new CoreException( new Status( IStatus.ERROR,
    [javac]                                                      ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\src\org\eclipse\birt\report\viewer\utilities\WebappAccessor.java:170: cannot resolve symbol
    [javac] symbol  : variable IStatus 
    [javac] location: class org.eclipse.birt.report.viewer.utilities.WebappAccessor
    [javac] 			throw new CoreException( new Status( IStatus.ERROR,
    [javac]                                                              ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\src\org\eclipse\birt\report\viewer\utilities\WebappAccessor.java:171: cannot resolve symbol
    [javac] symbol  : variable IStatus 
    [javac] location: class org.eclipse.birt.report.viewer.utilities.WebappAccessor
    [javac] 					ViewerPlugin.PLUGIN_ID, IStatus.OK,
    [javac]                                                                 ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\src\org\eclipse\birt\report\viewer\utilities\WebappAccessor.java:183: cannot resolve symbol
    [javac] symbol  : class Path 
    [javac] location: class org.eclipse.birt.report.viewer.utilities.WebappAccessor
    [javac] 			return new Path( webappLocation );
    [javac]                                    ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\src\org\eclipse\birt\report\viewer\utilities\WebappAccessor.java:186: cannot resolve symbol
    [javac] symbol  : class CoreException 
    [javac] location: class org.eclipse.birt.report.viewer.utilities.WebappAccessor
    [javac] 			throw new CoreException( new Status( IStatus.ERROR,
    [javac]                                   ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\src\org\eclipse\birt\report\viewer\utilities\WebappAccessor.java:186: cannot resolve symbol
    [javac] symbol  : class Status 
    [javac] location: class org.eclipse.birt.report.viewer.utilities.WebappAccessor
    [javac] 			throw new CoreException( new Status( IStatus.ERROR,
    [javac]                                                      ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\src\org\eclipse\birt\report\viewer\utilities\WebappAccessor.java:186: cannot resolve symbol
    [javac] symbol  : variable IStatus 
    [javac] location: class org.eclipse.birt.report.viewer.utilities.WebappAccessor
    [javac] 			throw new CoreException( new Status( IStatus.ERROR,
    [javac]                                                              ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\src\org\eclipse\birt\report\viewer\utilities\WebappAccessor.java:187: cannot resolve symbol
    [javac] symbol  : variable IStatus 
    [javac] location: class org.eclipse.birt.report.viewer.utilities.WebappAccessor
    [javac] 					ViewerPlugin.PLUGIN_ID, IStatus.OK,
    [javac]                                                                 ^
    [javac] 51 errors
Due to platform change. Some class were moved to
org.eclipse.equinox.common_1.0.0.v20051205.jar in Eclipse3.2M4.

Wei Yan fixed this bug yesterday.
Verified in daily build 20060207.</WithStack>
    <WithOutStack>org.eclipse.birt.report.viewer compilation failed in building with Eclipse3.2 M4.

Error log:
Jar:
    [mkdir] Created dir: E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\temp.folder\viewer.jar.bin
    [javac] Compiling 22 source files to E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\temp.folder\viewer.jar.bin
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\src\org\eclipse\birt\report\viewer\ViewerPlugin.java:20: cannot resolve symbol
    [javac] symbol  : class IStatus 
    [javac] location: package runtime
    [javac] import org.eclipse.core.runtime.IStatus;
    [javac]                                 ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\src\org\eclipse\birt\report\viewer\ViewerPlugin.java:22: cannot resolve symbol
    [javac] symbol  : class Status 
    [javac] location: package runtime
    [javac] import org.eclipse.core.runtime.Status;
    [javac]                                 ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\src\org\eclipse\birt\report\viewer\browsers\BrowserManager.java:19: cannot resolve symbol
    [javac] symbol  : class CoreException 
    [javac] location: package runtime
    [javac] import org.eclipse.core.runtime.CoreException;
    [javac]                                 ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\src\org\eclipse\birt\report\viewer\browsers\embedded\EmbeddedBrowser.java:20: cannot resolve symbol
    [javac] symbol  : class Path 
    [javac] location: package runtime
    [javac] import org.eclipse.core.runtime.Path;
    [javac]                                 ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\src\org\eclipse\birt\report\viewer\browsers\embedded\EmbeddedBrowser.java:22: cannot resolve symbol
    [javac] symbol  : class Preferences 
    [javac] location: package runtime
    [javac] import org.eclipse.core.runtime.Preferences;
    [javac]                                 ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\src\org\eclipse\birt\report\viewer\browsers\embedded\EmbeddedBrowser.java:63: cannot resolve symbol
    [javac] symbol  : class Preferences 
    [javac] location: class org.eclipse.birt.report.viewer.browsers.embedded.EmbeddedBrowser
    [javac] 	private Preferences store;
    [javac]                 ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\src\org\eclipse\birt\report\viewer\utilities\AppServerWrapper.java:17: cannot resolve symbol
    [javac] symbol  : class IStatus 
    [javac] location: package runtime
    [javac] import org.eclipse.core.runtime.IStatus;
    [javac]                                 ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\src\org\eclipse\birt\report\viewer\utilities\AppServerWrapper.java:19: cannot resolve symbol
    [javac] symbol  : class Status 
    [javac] location: package runtime
    [javac] import org.eclipse.core.runtime.Status;
    [javac]                                 ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\src\org\eclipse\birt\report\viewer\utilities\AppServerWrapper.java:86: cannot resolve symbol
    [javac] symbol  : class CoreException 
    [javac] location: class org.eclipse.birt.report.viewer.utilities.AppServerWrapper
    [javac] 	public synchronized IWebappServer getAppServer( ) throws CoreException
    [javac]                                                                  ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\src\org\eclipse\birt\report\viewer\utilities\AppServerWrapper.java:105: cannot resolve symbol
    [javac] symbol  : class CoreException 
    [javac] location: class org.eclipse.birt.report.viewer.utilities.AppServerWrapper
    [javac] 	private void createWebappServer( ) throws CoreException
    [javac]                                                   ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\src\org\eclipse\birt\report\viewer\utilities\AppServerWrapper.java:159: cannot resolve symbol
    [javac] symbol  : class CoreException 
    [javac] location: class org.eclipse.birt.report.viewer.utilities.AppServerWrapper
    [javac] 	private void startWebappServer( ) throws CoreException
    [javac]                                                  ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\src\org\eclipse\birt\report\viewer\utilities\WebViewer.java:22: cannot resolve symbol
    [javac] symbol  : class Path 
    [javac] location: package runtime
    [javac] import org.eclipse.core.runtime.Path;
    [javac]                                 ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\src\org\eclipse\birt\report\viewer\utilities\WebappAccessor.java:19: cannot resolve symbol
    [javac] symbol  : class IPath 
    [javac] location: package runtime
    [javac] import org.eclipse.core.runtime.IPath;
    [javac]                                 ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\src\org\eclipse\birt\report\viewer\utilities\WebappAccessor.java:20: cannot resolve symbol
    [javac] symbol  : class IStatus 
    [javac] location: package runtime
    [javac] import org.eclipse.core.runtime.IStatus;
    [javac]                                 ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\src\org\eclipse\birt\report\viewer\utilities\WebappAccessor.java:21: cannot resolve symbol
    [javac] symbol  : class Path 
    [javac] location: package runtime
    [javac] import org.eclipse.core.runtime.Path;
    [javac]                                 ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\src\org\eclipse\birt\report\viewer\utilities\WebappAccessor.java:23: cannot resolve symbol
    [javac] symbol  : class Status 
    [javac] location: package runtime
    [javac] import org.eclipse.core.runtime.Status;
    [javac]                                 ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\src\org\eclipse\birt\report\viewer\utilities\WebappAccessor.java:63: cannot resolve symbol
    [javac] symbol  : class IPath 
    [javac] location: class org.eclipse.birt.report.viewer.utilities.WebappAccessor
    [javac] 			IPath path ) throws CoreException
    [javac]                         ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\src\org\eclipse\birt\report\viewer\utilities\WebappAccessor.java:63: cannot resolve symbol
    [javac] symbol  : class CoreException 
    [javac] location: class org.eclipse.birt.report.viewer.utilities.WebappAccessor
    [javac] 			IPath path ) throws CoreException
    [javac]                                             ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\src\org\eclipse\birt\report\viewer\utilities\WebappAccessor.java:96: cannot resolve symbol
    [javac] symbol  : class CoreException 
    [javac] location: class org.eclipse.birt.report.viewer.utilities.WebappAccessor
    [javac] 	public static void stop( String webappName ) throws CoreException
    [javac]                                                             ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\src\org\eclipse\birt\report\viewer\utilities\WebappAccessor.java:150: cannot resolve symbol
    [javac] symbol  : class IPath 
    [javac] location: class org.eclipse.birt.report.viewer.utilities.WebappAccessor
    [javac] 	private static IPath getWebappPath( String pluginId, IPath path )
    [javac]                                                              ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\src\org\eclipse\birt\report\viewer\utilities\WebappAccessor.java:150: cannot resolve symbol
    [javac] symbol  : class IPath 
    [javac] location: class org.eclipse.birt.report.viewer.utilities.WebappAccessor
    [javac] 	private static IPath getWebappPath( String pluginId, IPath path )
    [javac]                        ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\src\org\eclipse\birt\report\viewer\utilities\WebappAccessor.java:151: cannot resolve symbol
    [javac] symbol  : class CoreException 
    [javac] location: class org.eclipse.birt.report.viewer.utilities.WebappAccessor
    [javac] 			throws CoreException
    [javac]                                ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\src\org\eclipse\birt\report\viewer\ViewerPlugin.java:144: cannot resolve symbol
    [javac] symbol  : class Status 
    [javac] location: class org.eclipse.birt.report.viewer.ViewerPlugin
    [javac] 		Status errorStatus = new Status( IStatus.ERROR, PLUGIN_ID, IStatus.OK, message, ex );
    [javac]                 ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\src\org\eclipse\birt\report\viewer\ViewerPlugin.java:144: cannot resolve symbol
    [javac] symbol  : class Status 
    [javac] location: class org.eclipse.birt.report.viewer.ViewerPlugin
    [javac] 		Status errorStatus = new Status( IStatus.ERROR, PLUGIN_ID, IStatus.OK, message, ex );
    [javac]                                          ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\src\org\eclipse\birt\report\viewer\ViewerPlugin.java:144: cannot resolve symbol
    [javac] symbol  : variable IStatus 
    [javac] location: class org.eclipse.birt.report.viewer.ViewerPlugin
    [javac] 		Status errorStatus = new Status( IStatus.ERROR, PLUGIN_ID, IStatus.OK, message, ex );
    [javac]                                                  ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\src\org\eclipse\birt\report\viewer\ViewerPlugin.java:144: cannot resolve symbol
    [javac] symbol  : variable IStatus 
    [javac] location: class org.eclipse.birt.report.viewer.ViewerPlugin
    [javac] 		Status errorStatus = new Status( IStatus.ERROR, PLUGIN_ID, IStatus.OK, message, ex );
    [javac]                                                                            ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\src\org\eclipse\birt\report\viewer\browsers\BrowserManager.java:253: cannot resolve symbol
    [javac] symbol  : class CoreException 
    [javac] location: class org.eclipse.birt.report.viewer.browsers.BrowserManager
    [javac] 			catch ( CoreException ce )
    [javac]                                 ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\src\org\eclipse\birt\report\viewer\browsers\embedded\EmbeddedBrowser.java:420: cannot resolve symbol
    [javac] symbol  : class Path 
    [javac] location: class org.eclipse.birt.report.viewer.browsers.embedded.EmbeddedBrowser
    [javac] 									new Path( productImageURLs[i] ) );
    [javac]                                                                             ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\src\org\eclipse\birt\report\viewer\utilities\AppServerWrapper.java:149: cannot resolve symbol
    [javac] symbol  : class CoreException 
    [javac] location: class org.eclipse.birt.report.viewer.utilities.AppServerWrapper
    [javac] 				catch ( CoreException e )
    [javac]                                         ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\src\org\eclipse\birt\report\viewer\utilities\AppServerWrapper.java:210: cannot resolve symbol
    [javac] symbol  : class CoreException 
    [javac] location: class org.eclipse.birt.report.viewer.utilities.AppServerWrapper
    [javac] 			throw new CoreException( new Status( IStatus.ERROR,
    [javac]                                   ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\src\org\eclipse\birt\report\viewer\utilities\AppServerWrapper.java:210: cannot resolve symbol
    [javac] symbol  : class Status 
    [javac] location: class org.eclipse.birt.report.viewer.utilities.AppServerWrapper
    [javac] 			throw new CoreException( new Status( IStatus.ERROR,
    [javac]                                                      ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\src\org\eclipse\birt\report\viewer\utilities\AppServerWrapper.java:210: cannot resolve symbol
    [javac] symbol  : variable IStatus 
    [javac] location: class org.eclipse.birt.report.viewer.utilities.AppServerWrapper
    [javac] 			throw new CoreException( new Status( IStatus.ERROR,
    [javac]                                                              ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\src\org\eclipse\birt\report\viewer\utilities\AppServerWrapper.java:212: cannot resolve symbol
    [javac] symbol  : variable IStatus 
    [javac] location: class org.eclipse.birt.report.viewer.utilities.AppServerWrapper
    [javac] 					IStatus.OK,
    [javac]                                         ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\src\org\eclipse\birt\report\viewer\utilities\WebViewer.java:158: cannot resolve symbol
    [javac] symbol  : variable Path 
    [javac] location: class org.eclipse.birt.report.viewer.utilities.WebViewer
    [javac] 			WebappAccessor.start( "viewer", WebAppPlugin, Path.EMPTY ); //$NON-NLS-1$
    [javac]                                                                       ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\src\org\eclipse\birt\report\viewer\utilities\WebViewer.java:160: cannot resolve symbol
    [javac] symbol  : class CoreException 
    [javac] location: class org.eclipse.birt.report.viewer.utilities.WebViewer
    [javac] 		catch ( CoreException e )
    [javac]                         ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\src\org\eclipse\birt\report\viewer\utilities\WebappAccessor.java:77: cannot resolve symbol
    [javac] symbol  : class IPath 
    [javac] location: class org.eclipse.birt.report.viewer.utilities.WebappAccessor
    [javac] 			IPath webappPath = getWebappPath( pluginId, path );
    [javac]                         ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\src\org\eclipse\birt\report\viewer\utilities\WebappAccessor.java:117: cannot resolve symbol
    [javac] symbol  : class CoreException 
    [javac] location: class org.eclipse.birt.report.viewer.utilities.WebappAccessor
    [javac] 		} catch ( CoreException e )
    [javac]                           ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\src\org\eclipse\birt\report\viewer\utilities\WebappAccessor.java:134: cannot resolve symbol
    [javac] symbol  : class CoreException 
    [javac] location: class org.eclipse.birt.report.viewer.utilities.WebappAccessor
    [javac] 		} catch ( CoreException e )
    [javac]                           ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\src\org\eclipse\birt\report\viewer\utilities\WebappAccessor.java:157: cannot resolve symbol
    [javac] symbol  : class CoreException 
    [javac] location: class org.eclipse.birt.report.viewer.utilities.WebappAccessor
    [javac] 			throw new CoreException( new Status( IStatus.ERROR,
    [javac]                                   ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\src\org\eclipse\birt\report\viewer\utilities\WebappAccessor.java:157: cannot resolve symbol
    [javac] symbol  : class Status 
    [javac] location: class org.eclipse.birt.report.viewer.utilities.WebappAccessor
    [javac] 			throw new CoreException( new Status( IStatus.ERROR,
    [javac]                                                      ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\src\org\eclipse\birt\report\viewer\utilities\WebappAccessor.java:157: cannot resolve symbol
    [javac] symbol  : variable IStatus 
    [javac] location: class org.eclipse.birt.report.viewer.utilities.WebappAccessor
    [javac] 			throw new CoreException( new Status( IStatus.ERROR,
    [javac]                                                              ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\src\org\eclipse\birt\report\viewer\utilities\WebappAccessor.java:158: cannot resolve symbol
    [javac] symbol  : variable IStatus 
    [javac] location: class org.eclipse.birt.report.viewer.utilities.WebappAccessor
    [javac] 					ViewerPlugin.PLUGIN_ID, IStatus.OK, ViewerPlugin
    [javac]                                                                 ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\src\org\eclipse\birt\report\viewer\utilities\WebappAccessor.java:170: cannot resolve symbol
    [javac] symbol  : class CoreException 
    [javac] location: class org.eclipse.birt.report.viewer.utilities.WebappAccessor
    [javac] 			throw new CoreException( new Status( IStatus.ERROR,
    [javac]                                   ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\src\org\eclipse\birt\report\viewer\utilities\WebappAccessor.java:170: cannot resolve symbol
    [javac] symbol  : class Status 
    [javac] location: class org.eclipse.birt.report.viewer.utilities.WebappAccessor
    [javac] 			throw new CoreException( new Status( IStatus.ERROR,
    [javac]                                                      ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\src\org\eclipse\birt\report\viewer\utilities\WebappAccessor.java:170: cannot resolve symbol
    [javac] symbol  : variable IStatus 
    [javac] location: class org.eclipse.birt.report.viewer.utilities.WebappAccessor
    [javac] 			throw new CoreException( new Status( IStatus.ERROR,
    [javac]                                                              ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\src\org\eclipse\birt\report\viewer\utilities\WebappAccessor.java:171: cannot resolve symbol
    [javac] symbol  : variable IStatus 
    [javac] location: class org.eclipse.birt.report.viewer.utilities.WebappAccessor
    [javac] 					ViewerPlugin.PLUGIN_ID, IStatus.OK,
    [javac]                                                                 ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\src\org\eclipse\birt\report\viewer\utilities\WebappAccessor.java:183: cannot resolve symbol
    [javac] symbol  : class Path 
    [javac] location: class org.eclipse.birt.report.viewer.utilities.WebappAccessor
    [javac] 			return new Path( webappLocation );
    [javac]                                    ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\src\org\eclipse\birt\report\viewer\utilities\WebappAccessor.java:186: cannot resolve symbol
    [javac] symbol  : class CoreException 
    [javac] location: class org.eclipse.birt.report.viewer.utilities.WebappAccessor
    [javac] 			throw new CoreException( new Status( IStatus.ERROR,
    [javac]                                   ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\src\org\eclipse\birt\report\viewer\utilities\WebappAccessor.java:186: cannot resolve symbol
    [javac] symbol  : class Status 
    [javac] location: class org.eclipse.birt.report.viewer.utilities.WebappAccessor
    [javac] 			throw new CoreException( new Status( IStatus.ERROR,
    [javac]                                                      ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\src\org\eclipse\birt\report\viewer\utilities\WebappAccessor.java:186: cannot resolve symbol
    [javac] symbol  : variable IStatus 
    [javac] location: class org.eclipse.birt.report.viewer.utilities.WebappAccessor
    [javac] 			throw new CoreException( new Status( IStatus.ERROR,
    [javac]                                                              ^
    [javac] E:\NewBuild\eclipse\plugins\org.eclipse.birt.report.viewer\src\org\eclipse\birt\report\viewer\utilities\WebappAccessor.java:187: cannot resolve symbol
    [javac] symbol  : variable IStatus 
    [javac] location: class org.eclipse.birt.report.viewer.utilities.WebappAccessor
    [javac] 					ViewerPlugin.PLUGIN_ID, IStatus.OK,
    [javac]                                                                 ^
    [javac] 51 errors
Due to platform change. Some class were moved to
org.eclipse.equinox.common_1.0.0.v20051205.jar in Eclipse3.2M4.

Wei Yan fixed this bug yesterday.
Verified in daily build 20060207.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="126482" />
    <CreationDate amount="2006-02-05 04:20:00 -0500" />
    <DupId amount="" />
    <classification amount="BIRT" />
    <Product amount="BIRT" />
    <component amount="Report Viewer" />
    <Version amount="2.0.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="critical" />
    <Summery>BIRT Report Viewer don't work, use firefox 1.5 browser.</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>deploy birt.war into linux tomcat-5.0.27, client on Windows XP sp2, or use Eclipse IDE open extra browser firefox 1.5,
BIRT Report Viewer don't work, no report display.

use IE 6.0.2900.2180.xpsp_sp2_gdr browser is ok.
This issue has been fixed in 2.1 tip.  
thanks Wenfeng Li, waiting 2.1 release...
Could not this be fixed in a antecipated 2.0.1 release? Or, at least, a patch, because this is a really very important support feature.
Here is the schedule
http://www.eclipse.org/birt/phoenix/project/plan.php
Verify
Fixed, Thinks.</WithStack>
    <WithOutStack>deploy birt.war into linux tomcat-5.0.27, client on Windows XP sp2, or use Eclipse IDE open extra browser firefox 1.5,
BIRT Report Viewer don't work, no report display.

use IE 6.0.2900.2180.xpsp_sp2_gdr browser is ok.
This issue has been fixed in 2.1 tip.  
thanks Wenfeng Li, waiting 2.1 release...
Could not this be fixed in a antecipated 2.0.1 release? Or, at least, a patch, because this is a really very important support feature.
Here is the schedule
http://www.eclipse.org/birt/phoenix/project/plan.php
Verify
Fixed, Thinks.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="126483" />
    <CreationDate amount="2006-02-05 04:33:00 -0500" />
    <DupId amount="" />
    <classification amount="BIRT" />
    <Product amount="BIRT" />
    <component amount="Data" />
    <Version amount="2.0.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="enhancement" />
    <Summery>Make the preview-ability of xml data set customizable</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="2">
        <Lines>
          <Line>a)define data sets from data sources that only contain xml schemas, without report errors.</Line>
          <Line>b)disable the preview-ability of the data set when doing column mapping.</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>In current implementation of xml data set, user cannot 
a)define data sets from data sources that only contain xml schemas, without report errors.
b)disable the preview-ability of the data set when doing column mapping.

Two bugs have been reported, which more or less related to the above problem. They are bug 126467 and bug 126469.

We may need to improve xml data set editor to accommodate the listed requirements.
The ui is changed so that xml data set can be created using a data source without an input xml source file.Under that circumstance both the preview in ColumnMapping page and ResultSet Preview page would be not available. Now the preview in ColumnMapping page would be disabled and if user switch to  ResultSet Preview page an warning dialog would pop-up.</WithStack>
    <WithOutStack>In current implementation of xml data set, user cannot 
a)define data sets from data sources that only contain xml schemas, without report errors.
b)disable the preview-ability of the data set when doing column mapping.

Two bugs have been reported, which more or less related to the above problem. They are bug 126467 and bug 126469.

We may need to improve xml data set editor to accommodate the listed requirements.
The ui is changed so that xml data set can be created using a data source without an input xml source file.Under that circumstance both the preview in ColumnMapping page and ResultSet Preview page would be not available. Now the preview in ColumnMapping page would be disabled and if user switch to  ResultSet Preview page an warning dialog would pop-up.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="126484" />
    <CreationDate amount="2006-02-05 06:41:00 -0500" />
    <DupId amount="78393" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="Text" />
    <Version amount="3.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Text background Color is wrong</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="DUPLICATE" />
    <WithStack>some text background is wrong.

I found these happened sometimes when:
1: Use Ctrl+Shift+G to find the current word at cursor.
2: When "Toggle Mark Occurrences" is pressed, you select some variable
Created attachment 34159
Blue text background color do not start and end in the correct position
Created attachment 34160
Blue text background color do not start and end in the correct position


*** This bug has been marked as a duplicate of 78393 ***</WithStack>
    <WithOutStack>some text background is wrong.

I found these happened sometimes when:
1: Use Ctrl+Shift+G to find the current word at cursor.
2: When "Toggle Mark Occurrences" is pressed, you select some variable
Created attachment 34159
Blue text background color do not start and end in the correct position
Created attachment 34160
Blue text background color do not start and end in the correct position


*** This bug has been marked as a duplicate of 78393 ***</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="126485" />
    <CreationDate amount="2006-02-05 07:43:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="Team" />
    <Version amount="3.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>[Mapping API] Changes to ISynchronizationScopeManager API</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>We should remove the initialize and refresh(IProgressMonitor) from the ISynchronizationScopeManager interface. Operations should take in the class and the interface should be used for participants. This will make the separation between what a participant is expected to do and what an operation can do clearer.
I changed the code so that the participants can do everything they need using the ISynchronizationScope interface. The manager interface is still used by operations.</WithStack>
    <WithOutStack>We should remove the initialize and refresh(IProgressMonitor) from the ISynchronizationScopeManager interface. Operations should take in the class and the interface should be used for participants. This will make the separation between what a participant is expected to do and what an operation can do clearer.
I changed the code so that the participants can do everything they need using the ISynchronizationScope interface. The manager interface is still used by operations.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="126486" />
    <CreationDate amount="2006-02-05 08:03:00 -0500" />
    <DupId amount="126473" />
    <classification amount="Eclipse" />
    <Product amount="JDT" />
    <component amount="UI" />
    <Version amount="3.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>[Team Sync] React to rename of API in Team</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="DUPLICATE" />
    <WithStack>Leading up to the API freeze, I have renamed the following classes/interfaces:

IResourceMappingScope renamed to ISynchronizationScope
ICompareAdapter rename to ISynchronizationCompareAdapter
AbstractCompareAdapter renamed to SynchronizationCompareAdapter

Stubs are in place for the old classes so this change will not cause any compile errors.


*** This bug has been marked as a duplicate of 126473 ***</WithStack>
    <WithOutStack>Leading up to the API freeze, I have renamed the following classes/interfaces:

IResourceMappingScope renamed to ISynchronizationScope
ICompareAdapter rename to ISynchronizationCompareAdapter
AbstractCompareAdapter renamed to SynchronizationCompareAdapter

Stubs are in place for the old classes so this change will not cause any compile errors.


*** This bug has been marked as a duplicate of 126473 ***</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="126487" />
    <CreationDate amount="2006-02-05 08:06:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="Team" />
    <Version amount="3.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>[Model API] Remove or rename package</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>The org.eclipse.team.ui.operations doesn't make sense. Either we need to find a better name or place the classes elsewhere and remove the package
I moved the classes and removed the package</WithStack>
    <WithOutStack>The org.eclipse.team.ui.operations doesn't make sense. Either we need to find a better name or place the classes elsewhere and remove the package
I moved the classes and removed the package</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="126488" />
    <CreationDate amount="2006-02-05 09:12:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="JDT" />
    <component amount="UI" />
    <Version amount="3.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>[quick fix] NPE while quick fix</Summery>
    <Patches amount="0" />
    <Stacktraces amount="1">
      <Stacktrace timestamp="1437330656019">
        <Exception>java.lang.NullPointerException</Exception>
        <Reason />
        <Frames>
          <Frame depth="0">org.eclipse.jdt.internal.ui.text.correction.TypeMismatchSubProcessor.addChangeSenderTypeProposals(TypeMismatchSubProcessor.java:216)</Frame>
          <Frame depth="1">org.eclipse.jdt.internal.ui.text.correction.TypeMismatchSubProcessor.addTypeMismatchProposals(TypeMismatchSubProcessor.java:179)</Frame>
          <Frame depth="2">org.eclipse.jdt.internal.ui.text.correction.QuickFixProcessor.process(QuickFixProcessor.java:279)</Frame>
          <Frame depth="3">org.eclipse.jdt.internal.ui.text.correction.QuickFixProcessor.getCorrections(QuickFixProcessor.java:218)</Frame>
          <Frame depth="4">org.eclipse.jdt.internal.ui.text.correction.JavaCorrectionProcessor$SafeCorrectionCollector.safeRun(JavaCorrectionProcessor.java:310)</Frame>
          <Frame depth="5">org.eclipse.jdt.internal.ui.text.correction.JavaCorrectionProcessor$SafeCorrectionProcessorAccess.run(JavaCorrectionProcessor.java:275)</Frame>
          <Frame depth="6">org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:37)</Frame>
          <Frame depth="7">org.eclipse.core.runtime.Platform.run(Platform.java:785)</Frame>
          <Frame depth="8">org.eclipse.jdt.internal.ui.text.correction.JavaCorrectionProcessor$SafeCorrectionProcessorAccess.process(JavaCorrectionProcessor.java:265)</Frame>
          <Frame depth="9">org.eclipse.jdt.internal.ui.text.correction.JavaCorrectionProcessor.collectCorrections(JavaCorrectionProcessor.java:392)</Frame>
          <Frame depth="10">org.eclipse.jdt.internal.ui.text.correction.JavaCorrectionProcessor.collectProposals(JavaCorrectionProcessor.java:216)</Frame>
          <Frame depth="11">org.eclipse.jdt.internal.ui.text.correction.JavaCorrectionProcessor.computeCompletionProposals(JavaCorrectionProcessor.java:179)</Frame>
          <Frame depth="12">org.eclipse.jface.text.contentassist.ContentAssistant.computeCompletionProposals(ContentAssistant.java:1566)</Frame>
          <Frame depth="13">org.eclipse.jface.text.contentassist.CompletionProposalPopup.computeProposals(CompletionProposalPopup.java:447)</Frame>
          <Frame depth="14">org.eclipse.jface.text.contentassist.CompletionProposalPopup.access$15(CompletionProposalPopup.java:444)</Frame>
          <Frame depth="15">org.eclipse.jface.text.contentassist.CompletionProposalPopup$2.run(CompletionProposalPopup.java:379)</Frame>
          <Frame depth="16">org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:69)</Frame>
          <Frame depth="17">org.eclipse.jface.text.contentassist.CompletionProposalPopup.showProposals(CompletionProposalPopup.java:373)</Frame>
          <Frame depth="18">org.eclipse.jface.text.contentassist.ContentAssistant.showPossibleCompletions(ContentAssistant.java:1414)</Frame>
          <Frame depth="19">org.eclipse.jdt.internal.ui.text.correction.JavaCorrectionAssistant.showPossibleCompletions(JavaCorrectionAssistant.java:173)</Frame>
          <Frame depth="20">org.eclipse.jdt.internal.ui.javaeditor.CompilationUnitEditor$AdaptedSourceViewer.doOperation(CompilationUnitEditor.java:198)</Frame>
          <Frame depth="21">org.eclipse.ui.texteditor.TextOperationAction$1.run(TextOperationAction.java:122)</Frame>
          <Frame depth="22">org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:69)</Frame>
          <Frame depth="23">org.eclipse.ui.texteditor.TextOperationAction.run(TextOperationAction.java:120)</Frame>
          <Frame depth="24">org.eclipse.jface.action.Action.runWithEvent(Action.java:492)</Frame>
          <Frame depth="25">org.eclipse.ui.commands.ActionHandler.execute(ActionHandler.java:182)</Frame>
          <Frame depth="26">org.eclipse.ui.internal.handlers.LegacyHandlerWrapper.execute(LegacyHandlerWrapper.java:108)</Frame>
          <Frame depth="27">org.eclipse.core.commands.Command.execute(Command.java:306)</Frame>
          <Frame depth="28">org.eclipse.core.commands.ParameterizedCommand.execute(ParameterizedCommand.java:401)</Frame>
          <Frame depth="29">org.eclipse.ui.internal.keys.WorkbenchKeyboard.executeCommand(WorkbenchKeyboard.java:461)</Frame>
          <Frame depth="30">org.eclipse.ui.internal.keys.WorkbenchKeyboard.press(WorkbenchKeyboard.java:786)</Frame>
          <Frame depth="31">org.eclipse.ui.internal.keys.WorkbenchKeyboard.processKeyEvent(WorkbenchKeyboard.java:833)</Frame>
          <Frame depth="32">org.eclipse.ui.internal.keys.WorkbenchKeyboard.filterKeySequenceBindings(WorkbenchKeyboard.java:555)</Frame>
          <Frame depth="33">org.eclipse.ui.internal.keys.WorkbenchKeyboard.access$3(WorkbenchKeyboard.java:498)</Frame>
          <Frame depth="34">org.eclipse.ui.internal.keys.WorkbenchKeyboard$KeyDownFilter.handleEvent(WorkbenchKeyboard.java:118)</Frame>
          <Frame depth="35">org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)</Frame>
          <Frame depth="36">org.eclipse.swt.widgets.Display.filterEvent(Display.java:978)</Frame>
          <Frame depth="37">org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:913)</Frame>
          <Frame depth="38">org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:938)</Frame>
          <Frame depth="39">org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:923)</Frame>
          <Frame depth="40">org.eclipse.swt.widgets.Widget.sendKeyEvent(Widget.java:951)</Frame>
          <Frame depth="41">org.eclipse.swt.widgets.Widget.sendKeyEvent(Widget.java:947)</Frame>
          <Frame depth="42">org.eclipse.swt.widgets.Widget.wmKeyDown(Widget.java:1546)</Frame>
          <Frame depth="43">org.eclipse.swt.widgets.Control.WM_KEYDOWN(Control.java:3532)</Frame>
          <Frame depth="44">org.eclipse.swt.widgets.Control.windowProc(Control.java:3241)</Frame>
          <Frame depth="45">org.eclipse.swt.widgets.Display.windowProc(Display.java:3963)</Frame>
          <Frame depth="46">org.eclipse.swt.internal.win32.OS.DispatchMessageW(Native Method)</Frame>
          <Frame depth="47">org.eclipse.swt.internal.win32.OS.DispatchMessage(OS.java:1705)</Frame>
          <Frame depth="48">org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2903)</Frame>
          <Frame depth="49">org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1762)</Frame>
          <Frame depth="50">org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1726)</Frame>
          <Frame depth="51">org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:397)</Frame>
          <Frame depth="52">org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:143)</Frame>
          <Frame depth="53">org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:106)</Frame>
          <Frame depth="54">org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:109)</Frame>
          <Frame depth="55">org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:92)</Frame>
          <Frame depth="56">org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:68)</Frame>
          <Frame depth="57">org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:379)</Frame>
          <Frame depth="58">org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:177)</Frame>
          <Frame depth="59">sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)</Frame>
          <Frame depth="60">sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)</Frame>
          <Frame depth="61">sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)</Frame>
          <Frame depth="62">java.lang.reflect.Method.invoke(Unknown Source)</Frame>
          <Frame depth="63">org.eclipse.core.launcher.Main.invokeFramework(Main.java:338)</Frame>
          <Frame depth="64">org.eclipse.core.launcher.Main.basicRun(Main.java:282)</Frame>
          <Frame depth="65">org.eclipse.core.launcher.Main.run(Main.java:977)</Frame>
          <Frame depth="66">org.eclipse.core.launcher.Main.main(Main.java:952)</Frame>
        </Frames>
      </Stacktrace>
    </Stacktraces>
    <SourceCodeRegions amount="1">
      <source_code type="class">
        <location start="85" end="182" />
        <code>public class TestShort {
	public static void main(String[] args) {
		short test=args.length;
	}
}</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>Hi,
When using quickfix on the following code, I got the exception mentioned below.

public class TestShort {
	public static void main(String[] args) {
		short test=args.length;
	}
}

java.lang.NullPointerException
	at org.eclipse.jdt.internal.ui.text.correction.TypeMismatchSubProcessor.addChangeSenderTypeProposals(TypeMismatchSubProcessor.java:216)
	at org.eclipse.jdt.internal.ui.text.correction.TypeMismatchSubProcessor.addTypeMismatchProposals(TypeMismatchSubProcessor.java:179)
	at org.eclipse.jdt.internal.ui.text.correction.QuickFixProcessor.process(QuickFixProcessor.java:279)
	at org.eclipse.jdt.internal.ui.text.correction.QuickFixProcessor.getCorrections(QuickFixProcessor.java:218)
	at org.eclipse.jdt.internal.ui.text.correction.JavaCorrectionProcessor$SafeCorrectionCollector.safeRun(JavaCorrectionProcessor.java:310)
	at org.eclipse.jdt.internal.ui.text.correction.JavaCorrectionProcessor$SafeCorrectionProcessorAccess.run(JavaCorrectionProcessor.java:275)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:37)
	at org.eclipse.core.runtime.Platform.run(Platform.java:785)
	at org.eclipse.jdt.internal.ui.text.correction.JavaCorrectionProcessor$SafeCorrectionProcessorAccess.process(JavaCorrectionProcessor.java:265)
	at org.eclipse.jdt.internal.ui.text.correction.JavaCorrectionProcessor.collectCorrections(JavaCorrectionProcessor.java:392)
	at org.eclipse.jdt.internal.ui.text.correction.JavaCorrectionProcessor.collectProposals(JavaCorrectionProcessor.java:216)
	at org.eclipse.jdt.internal.ui.text.correction.JavaCorrectionProcessor.computeCompletionProposals(JavaCorrectionProcessor.java:179)
	at org.eclipse.jface.text.contentassist.ContentAssistant.computeCompletionProposals(ContentAssistant.java:1566)
	at org.eclipse.jface.text.contentassist.CompletionProposalPopup.computeProposals(CompletionProposalPopup.java:447)
	at org.eclipse.jface.text.contentassist.CompletionProposalPopup.access$15(CompletionProposalPopup.java:444)
	at org.eclipse.jface.text.contentassist.CompletionProposalPopup$2.run(CompletionProposalPopup.java:379)
	at org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:69)
	at org.eclipse.jface.text.contentassist.CompletionProposalPopup.showProposals(CompletionProposalPopup.java:373)
	at org.eclipse.jface.text.contentassist.ContentAssistant.showPossibleCompletions(ContentAssistant.java:1414)
	at org.eclipse.jdt.internal.ui.text.correction.JavaCorrectionAssistant.showPossibleCompletions(JavaCorrectionAssistant.java:173)
	at org.eclipse.jdt.internal.ui.javaeditor.CompilationUnitEditor$AdaptedSourceViewer.doOperation(CompilationUnitEditor.java:198)
	at org.eclipse.ui.texteditor.TextOperationAction$1.run(TextOperationAction.java:122)
	at org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:69)
	at org.eclipse.ui.texteditor.TextOperationAction.run(TextOperationAction.java:120)
	at org.eclipse.jface.action.Action.runWithEvent(Action.java:492)
	at org.eclipse.ui.commands.ActionHandler.execute(ActionHandler.java:182)
	at org.eclipse.ui.internal.handlers.LegacyHandlerWrapper.execute(LegacyHandlerWrapper.java:108)
	at org.eclipse.core.commands.Command.execute(Command.java:306)
	at org.eclipse.core.commands.ParameterizedCommand.execute(ParameterizedCommand.java:401)
	at org.eclipse.ui.internal.keys.WorkbenchKeyboard.executeCommand(WorkbenchKeyboard.java:461)
	at org.eclipse.ui.internal.keys.WorkbenchKeyboard.press(WorkbenchKeyboard.java:786)
	at org.eclipse.ui.internal.keys.WorkbenchKeyboard.processKeyEvent(WorkbenchKeyboard.java:833)
	at org.eclipse.ui.internal.keys.WorkbenchKeyboard.filterKeySequenceBindings(WorkbenchKeyboard.java:555)
	at org.eclipse.ui.internal.keys.WorkbenchKeyboard.access$3(WorkbenchKeyboard.java:498)
	at org.eclipse.ui.internal.keys.WorkbenchKeyboard$KeyDownFilter.handleEvent(WorkbenchKeyboard.java:118)
	at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)
	at org.eclipse.swt.widgets.Display.filterEvent(Display.java:978)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:913)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:938)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:923)
	at org.eclipse.swt.widgets.Widget.sendKeyEvent(Widget.java:951)
	at org.eclipse.swt.widgets.Widget.sendKeyEvent(Widget.java:947)
	at org.eclipse.swt.widgets.Widget.wmKeyDown(Widget.java:1546)
	at org.eclipse.swt.widgets.Control.WM_KEYDOWN(Control.java:3532)
	at org.eclipse.swt.widgets.Control.windowProc(Control.java:3241)
	at org.eclipse.swt.widgets.Display.windowProc(Display.java:3963)
	at org.eclipse.swt.internal.win32.OS.DispatchMessageW(Native Method)
	at org.eclipse.swt.internal.win32.OS.DispatchMessage(OS.java:1705)
	at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2903)
	at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1762)
	at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1726)
	at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:397)
	at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:143)
	at org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:106)
	at org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:109)
	at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:92)
	at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:68)
	at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:379)
	at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:177)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
	at java.lang.reflect.Method.invoke(Unknown Source)
	at org.eclipse.core.launcher.Main.invokeFramework(Main.java:338)
	at org.eclipse.core.launcher.Main.basicRun(Main.java:282)
	at org.eclipse.core.launcher.Main.run(Main.java:977)
	at org.eclipse.core.launcher.Main.main(Main.java:952)
fixed &gt; 20060206</WithStack>
    <WithOutStack>Hi,
When using quickfix on the following code, I got the exception mentioned below.

public class TestShort {
	public static void main(String[] args) {
		short test=args.length;
	}
}


fixed &gt; 20060206</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="126489" />
    <CreationDate amount="2006-02-05 09:37:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="JDT" />
    <component amount="Text" />
    <Version amount="3.1" />
    <rep_platform amount="PC" />
    <op_sys amount="Linux" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>shortcut keys behaviour</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="INVALID" />
    <WithStack>When i'm running eclipse on linux, the code format command is assigned by default a weird esc + ctrl + F (which doesn't work).
I tried to change it to the common shift + ctrl + F, but everytime i use this, i only get an upper F with an underscore below it, at the insertion point....
&gt;i only get an upper F with an underscore below it, at the insertion point....
That's the native behavior which Eclipse can't control. That's why we've chosen a  key binding different form Ctrl+F.
.</WithStack>
    <WithOutStack>When i'm running eclipse on linux, the code format command is assigned by default a weird esc + ctrl + F (which doesn't work).
I tried to change it to the common shift + ctrl + F, but everytime i use this, i only get an upper F with an underscore below it, at the insertion point....
&gt;i only get an upper F with an underscore below it, at the insertion point....
That's the native behavior which Eclipse can't control. That's why we've chosen a  key binding different form Ctrl+F.
.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="126490" />
    <CreationDate amount="2006-02-05 10:54:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="Ant" />
    <Version amount="3.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>[refactoring] rename does not update Ant buildfile reference</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="VERIFIED" />
    <resolution amount="FIXED" />
    <WithStack>I have a project called "Group-ProjectName". After I changed the name to "Group.ProjectName" the Ant script inside this project could not be run anymore because the reference in the "External Tools" menu was not updated to reflect the new name.
I believe I have project and buildfile rename participants for 3.2
Released an early cut.
Changes to MANIFEST.MF for the dependency on ltk
plugin.xml to added the refactoring participants
new classes in org.eclipse.ant.internal.ui.refactoring:
  RefactoringMessages.properties
  LaunchConfigurationBuildfileChange.java
  LaunchConfigurationBuildfileRenameParticipant.java
  LaunchConfigurationIProjectRenameParticipant.java
  RefactoringMessages.java
Tweaked some more.
Please verify Kevin.
verified</WithStack>
    <WithOutStack>I have a project called "Group-ProjectName". After I changed the name to "Group.ProjectName" the Ant script inside this project could not be run anymore because the reference in the "External Tools" menu was not updated to reflect the new name.
I believe I have project and buildfile rename participants for 3.2
Released an early cut.
Changes to MANIFEST.MF for the dependency on ltk
plugin.xml to added the refactoring participants
new classes in org.eclipse.ant.internal.ui.refactoring:
  RefactoringMessages.properties
  LaunchConfigurationBuildfileChange.java
  LaunchConfigurationBuildfileRenameParticipant.java
  LaunchConfigurationIProjectRenameParticipant.java
  RefactoringMessages.java
Tweaked some more.
Please verify Kevin.
verified</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="126491" />
    <CreationDate amount="2006-02-05 11:05:00 -0500" />
    <DupId amount="67652" />
    <classification amount="Tools" />
    <Product amount="GEF" />
    <component amount="Draw2d [GEF 3.x / Zest 1.x]" />
    <Version amount="3.1" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Text truncated in TextFlow with Right to Left layout</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="DUPLICATE" />
    <WithStack>Create a SWT shell with the SWT.RIGHT_TO_LEFT style
Create a TextFlow in this shell
Fill this TextFlow with some text (setText method)

The leftmost side of the text is truncated.
Created attachment 34163
Java code for the TextFlow sample
Created attachment 34164
Java code for FlowText sample


*** This bug has been marked as a duplicate of 67652 ***
Please change the status of this bug to "closed".
(In reply to comment #4)
&gt; Please change the status of this bug to "closed".
&gt;</WithStack>
    <WithOutStack>Create a SWT shell with the SWT.RIGHT_TO_LEFT style
Create a TextFlow in this shell
Fill this TextFlow with some text (setText method)

The leftmost side of the text is truncated.
Created attachment 34163
Java code for the TextFlow sample
Created attachment 34164
Java code for FlowText sample


*** This bug has been marked as a duplicate of 67652 ***
Please change the status of this bug to "closed".
(In reply to comment #4)
&gt; Please change the status of this bug to "closed".
&gt;</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="126492" />
    <CreationDate amount="2006-02-05 13:04:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="PDE" />
    <component amount="UI" />
    <Version amount="3.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="enhancement" />
    <Summery>[product] add "Add Required Features" function</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="NEW" />
    <resolution amount="" />
    <WithStack>I've been trying to create products with features. One of the biggest pains is the  configuration editor when features are used to create the configuration. The primary problem with this is that it is missing the "Add Required Features" button like the plugin configuration editor has for plugins. When working with hundreds of interelated features this one would be a life saver.</WithStack>
    <WithOutStack>I've been trying to create products with features. One of the biggest pains is the  configuration editor when features are used to create the configuration. The primary problem with this is that it is missing the "Add Required Features" button like the plugin configuration editor has for plugins. When working with hundreds of interelated features this one would be a life saver.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="126493" />
    <CreationDate amount="2006-02-05 13:38:00 -0500" />
    <DupId amount="" />
    <classification amount="WebTools" />
    <Product amount="WTP Java EE Tools" />
    <component amount="jst.j2ee" />
    <Version amount="1.0.1" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P2" />
    <bug_severity amount="major" />
    <Summery>[project creation] Usability issue with facets and project creation</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="5">
      <Enumeration lines="5">
        <Lines>
          <Line>1. Instead of filtering the list of ears based on the exact currently-selected J2EE version of the module project, filter it based on the set of all possible J2EE versions as constrained by the runtime capabilities. For instance, if the runtime X is selected for the web project and runtime X supports web 2.2 and 2.3, but not 2.4, the EARs list should show all EARs that are of version 1.2 and 1.3, but not 1.4.</Line>
          <Line />
          <Line>2. The runtime selection determines the default facet selection. That doesn't change. However, when an EAR is selected the web facet version is automatically tweaked to line up the version of the EAR.</Line>
          <Line>1.  This  could cause an  1.2 EAR  having  2.3 Web leading to an invalid EAR.</Line>
          <Line>Right now we allow you to select  1.3 and  1.4 EAR for  1.3  web</Line>
        </Lines>
      </Enumeration>
      <Enumeration lines="5">
        <Lines>
          <Line>1.  This  could cause an  1.2 EAR  having  2.3 Web leading to an invalid EAR.</Line>
          <Line>Right now we allow you to select  1.3 and  1.4 EAR for  1.3  web</Line>
          <Line />
          <Line>2.  This seems feasible,  probably  get  feedback from  the users if thats the way they want the project creation to behave.</Line>
          <Line>1 and 2 are meant to be two parts of the same solution. 1 is necessary for 2 in order to fix this usecase.</Line>
        </Lines>
      </Enumeration>
      <Enumeration lines="6">
        <Lines>
          <Line>1. Create a 1.3 EAR.</Line>
          <Line>2. Open the web project wizard.</Line>
          <Line>3. Verify that the web facet version is set higher than 1.3.</Line>
          <Line>4. Pick the EAR from step 1 on the first page.</Line>
          <Line>3. Go to the second page. The web facet version should now be 1.3.</Line>
          <Line>4. Change the web facet version to 1.4.</Line>
        </Lines>
      </Enumeration>
      <Enumeration lines="2">
        <Lines>
          <Line>3. Go to the second page. The web facet version should now be 1.3.</Line>
          <Line>4. Change the web facet version to 1.4.</Line>
        </Lines>
      </Enumeration>
      <Enumeration lines="3">
        <Lines>
          <Line>1. The validator itself that would check for the version mismatch.</Line>
          <Line>2. Version change delegates for web and ear facets. This is the biggest chunk of work as it requires descriptor munging, but it would be a valuable tool for users in other contexts.</Line>
          <Line>3. Quick fix implementations tied to errors generated by #1. The quick fixes would take advantage of #2.</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="RESOLVED" />
    <resolution amount="WORKSFORME" />
    <WithStack>When I create a Dynamic Web or EJB project in WTP, page 1 of the wizard allows
me to associate a runtime and add the module to an EAR. However, the defaults
in use by the wizard appear to be J2EE 1.4. Since my EARs are all J2EE 1.3, they don't show up in the drop down list. I have to go to page 2 to modify the
facets and then go back to page 1 in order to choose my EAR. This doesn't feel
natural in terms of wizard progression.
The highest version supported by the server is set on the second page,
this is by design.

What are  your expectations?
My concern is with having to go forward one page and back to use my pre-existing EAR. This does not feel natural in terms of wizard progression where
things usually move forward.
Perhaps the ear association drop-down should not filter based on J2EE version. Is there any actual problem associating a web app that's using 1.4 spec level with ear that's using 1.3 spec level as long as both spec levels are supported by the runtime?
Even if  server supports both J2EE  1.4  and  J2EE  1.3, configuring 1.3 EAR to have 1.4 Web may lead to undeployable EAR, not supported by the App Server.
Could this be handled via validation after the project is created? Do we only enforce it during project creation or do we do the same enforcement via the property page that sets up the references?

An alternative would be to let ear selection on the first page tweak the web facet version. I have to agree with Yen that the current behavior is unintuitive. As a general rule, we should strive to eliminate any case where second page input is driving first page.
Yes, we enforce the policy to not allow EAR of lower version to add modules of  higher version via the property page that sets up the references.

We had  Module version in the first page of the UI before migration was done to used facets.

In this case i  dont see a easy solution, may be  moving  Add to Ear in the facet  page  itself ?
This should work, is a fairly easy solution, requires no additional ui, and should give a very intuitive user experience since the user is never left wondering why their EAR is not showing up:

1. Instead of filtering the list of ears based on the exact currently-selected J2EE version of the module project, filter it based on the set of all possible J2EE versions as constrained by the runtime capabilities. For instance, if the runtime X is selected for the web project and runtime X supports web 2.2 and 2.3, but not 2.4, the EARs list should show all EARs that are of version 1.2 and 1.3, but not 1.4. 

2. The runtime selection determines the default facet selection. That doesn't change. However, when an EAR is selected the web facet version is automatically tweaked to line up the version of the EAR.
1.  This  could cause an  1.2 EAR  having  2.3 Web leading to an invalid EAR.
Right now we allow you to select  1.3 and  1.4 EAR for  1.3  web

2.  This seems feasible,  probably  get  feedback from  the users if thats the way they want the project creation to behave.
1 and 2 are meant to be two parts of the same solution. 1 is necessary for 2 in order to fix this usecase.

The only part that could be a problem is this series of steps:

1. Create a 1.3 EAR.
2. Open the web project wizard.
3. Verify that the web facet version is set higher than 1.3.
4. Pick the EAR from step 1 on the first page.
3. Go to the second page. The web facet version should now be 1.3.
4. Change the web facet version to 1.4.

What should happen in this case? Note that the same situation can be reproduced with the existing wizard (takes more steps). Not sure how it's currently handled. Perhaps the EAR association is removed?

Note that we are never going to be able to correctly handle all cases where ear and module version mismatch can occurr. There are too many ways to cause that. At some point, we will have to write a validator for this. Here is what's needed to make a validator-based solution:

1. The validator itself that would check for the version mismatch.
2. Version change delegates for web and ear facets. This is the biggest chunk of work as it requires descriptor munging, but it would be a valuable tool for users in other contexts.
3. Quick fix implementations tied to errors generated by #1. The quick fixes would take advantage of #2.

If we go ahead and implement the validator, than we don't need to do implement #2 from my proposed solution. The change described in #1 will allow the users to get into a version-mismatch situation (but at least they can create the project in a straight-forward fashion). The problem is then detected by the validator and the users utilizes the quick-fixes to either change the ear or the web module version.
I think that page 2 should restrict choices to so that only valid combinations can occur.
Another facet :-) of the complete solution might be a workspace level user preference that says "I want all the apps I create in this workspace to be J2EE 1.3 compilant".

That would be taken into account by the wizards as they do defaulting, by the facet version change delegates, by validators, etc.
*** Bug 120391 has been marked as a duplicate of this bug. ***
I also ran into this during smoke testing....   I'm upping the sev to major, and cc'ing Janet for her opinion...


Also

https://bugs.eclipse.org/bugs/show_bug.cgi?id=132237 

I am more inclined in putting Add to Ear in the facet install page for other project type
It would seem easier to have the user define which version of EAR is their default in the first panel, yet still show all ear's with their version number. Allowing the user to select only those ears whose versions don't clash with the version numbers of the facets. 

If the user selects a version of facet that doesn't align with the ear, then a warning decorator should show on the facet.

Wizards should show progression, and reduce the amount of backward movement.

I've also asked May Zhu (Usability) to comment in this bug.
When I select a runtime, I think the ear combo should be populated with *all* valid ears for that runtime.  Agree with the suggestion that if an ear is then selected, it's version should be used in combination with the runtime selection to default the module facet's version number.

If the spec prohibits a higher version module being used in a lower version ear, WTP should constrain the module version numbers accordingly.  If the spec doesn't prohibit it, then it's a a server-specific validation issue.

I don't support removing Add to EAR from the first panel.

I don't support putting a version number field/combo in the first panel.

Since the application.xml has changed from  J2EE versions,  for  e.g. in J2EE  1.3  connector module was introduced which could be added to application.xml of J2EE 1.3 but not to  1.2 so  we  should keep the validation for not allowing higher module versions to be added to lower versions of EAR.

I could  go ahead and implement the functionality to default highest version of module to  line up with the version of the EAR.

The other change needed would be in the second page of the project creation, the facet page, to add  validation if the user switches the module version to be incompatible with the  EAR. I request BEA to contribute this part since i am not familiar with that  code of second page.



wouldn't the contraints diagrams (that are invoked on R-clicking a Facet) show EAR dependancies as well?
Facet constraints do not go across projects. The fact than an EAR project refers a module project and that there is a relationship between facets in these separate projects is not handled by the facets framework.
Targetting to 2.0, once 138074 is fixed it would be easier to fix this one.
I do not agree that this funciton should be deferred to 2.0.  I don't think anyone would argue that this is not the correct behavior and any customer that has a need to use 1.3 EARs (possibly mixed with 1.4 EARs to they cannot set their preference level to 1.3) will not see them in the module project creation wizards on the first page.  They need to change the facet version on the second page to see the necessary EAR on the first page.

I've also heard the idea of filtering the EARs based on the selected runtime on the first page.  I don't like this either because selecting an EAR for the module project will drive the runtime (it will match the EAR's).  Plus the user may not see the EAR they want to add the new module to and they will not know why.  They will need to fumble around the wizard to figure out how to show the EAR they want.  Not a good practice.

The only real solution is to show all EARs.  When the user selects an EAR for the module to be added the runtime will be set to the same runtime selected for the EAR (and disabled).  This shouldn't be hard.

The part that needs some work is the facet page.  This page should only show valid facet versions based on the EAR version.  This means that the facet page must respect an upper J2EE version limit.  Changes on the facet page should not affect the first page.  There is no reason the user should have to go forward and back multiple times to accomplish a simple task.  This would be simple if the facet page used the data models like all of the other pages.  But since it does not there needs to be a mechanism put in place (maybe temporary) that allows for the setting or detecting of the maximum J2EE version.
Dan,

"The only real solution is to show all EARs.  When the user selects an EAR for
the module to be added the runtime will be set to the same runtime selected for
the EAR (and disabled).  This shouldn't be hard."  This is the way it is working in the latest builds.

And as  you pointed out, yes the facet page needs work, this page should only show valid facet versions based on the EAR version

Thanks Neeraj.

I didn't realize that the change had been made to show all EARs.  This is a good start.

What is the plan to put in a fix for the facet versions in 1.5.1?
This may be a tactical solution until 2.0 but we need a solution in 1.5.1 for this problem.
Daniel,

I disagree with you on two points:

1. We will be creating a circular relationship between the runtime and ear fields (the ear field is disabled/enabled based on the runtime selected), so we have to tread very carefully. Otherwise we risk confusing a novice user and trapping an advanced user. The runtime field should never be disabled. Disabling will not leave user with any recourse other than to cancel the wizard. Also, since user would have typically selected runtime firt prior to selecting the ear, we need user's permission in order to modify the runtime. So... I am fine with a solution where if the user selects an ear whose runtime does not match the runtime currently selected for the web project we prompt the user explaining the problem and asking for permission to modify the currently-selected runtime (user can say no). In either case the runtime field would not get disabled.

2. Defaulting the web facet version based on ear facet version is fine, however we should not attempt to constrain upper limit on the web facet. The J2EE spec says nothing about this and I would not be surprised if there are servers out there which support 1.3 ear with a 1.4 web app. Defaulting the version is fine, but wtp as a framework should not be making a more general assumption that mis-aligned versions are always wrong.

Regarding the reasons for why this was deferred... Neeraj and I had a conversation about implementation strategies. Currently, in order to influence the selected facets, one has to utilize the internal api exposed on the facets selection page itself. Since that api is internal, it has never been hardenned, so the caller has to be very careful or risk crashing the wizard. In 2.0, there will be a public data model api (no relation to IDataModel) exposed that will make these interractions easy and safe. I believe Neeraj chose to defer this because the implementation costs of using the existing facilities placed this outside the scope of a service pack release.
I am fine with prompting the user when they select an EAR which has a different runtime than the one selected.

For your second point it is true that the J2EE spec doesn't really state that a 1.3 EAR couldn't contain a 1.4 WAR.  However this should not be the default setup that we create.  We should put the developer on the preferred path which would be create a 1.3 WAR when adding to a 1.3 EAR.  If on the facet page the user (advanced) wants to create a 1.4 WAR in this case they should be able but we should simply warn the user of this case.  The important point is that we guide the users towards best practices.  Make the simple simple and the advanced possible.  Don't lead users down the advanced path under normal situations.

I still want to see a fix for 1.5.1 for this problem.
targetting to 3.0  will be addressing further...
This has been fixed due to rework on Facet Project creation UI</WithStack>
    <WithOutStack>When I create a Dynamic Web or EJB project in WTP, page 1 of the wizard allows
me to associate a runtime and add the module to an EAR. However, the defaults
in use by the wizard appear to be J2EE 1.4. Since my EARs are all J2EE 1.3, they don't show up in the drop down list. I have to go to page 2 to modify the
facets and then go back to page 1 in order to choose my EAR. This doesn't feel
natural in terms of wizard progression.
The highest version supported by the server is set on the second page,
this is by design.

What are  your expectations?
My concern is with having to go forward one page and back to use my pre-existing EAR. This does not feel natural in terms of wizard progression where
things usually move forward.
Perhaps the ear association drop-down should not filter based on J2EE version. Is there any actual problem associating a web app that's using 1.4 spec level with ear that's using 1.3 spec level as long as both spec levels are supported by the runtime?
Even if  server supports both J2EE  1.4  and  J2EE  1.3, configuring 1.3 EAR to have 1.4 Web may lead to undeployable EAR, not supported by the App Server.
Could this be handled via validation after the project is created? Do we only enforce it during project creation or do we do the same enforcement via the property page that sets up the references?

An alternative would be to let ear selection on the first page tweak the web facet version. I have to agree with Yen that the current behavior is unintuitive. As a general rule, we should strive to eliminate any case where second page input is driving first page.
Yes, we enforce the policy to not allow EAR of lower version to add modules of  higher version via the property page that sets up the references.

We had  Module version in the first page of the UI before migration was done to used facets.

In this case i  dont see a easy solution, may be  moving  Add to Ear in the facet  page  itself ?
This should work, is a fairly easy solution, requires no additional ui, and should give a very intuitive user experience since the user is never left wondering why their EAR is not showing up:

1. Instead of filtering the list of ears based on the exact currently-selected J2EE version of the module project, filter it based on the set of all possible J2EE versions as constrained by the runtime capabilities. For instance, if the runtime X is selected for the web project and runtime X supports web 2.2 and 2.3, but not 2.4, the EARs list should show all EARs that are of version 1.2 and 1.3, but not 1.4. 

2. The runtime selection determines the default facet selection. That doesn't change. However, when an EAR is selected the web facet version is automatically tweaked to line up the version of the EAR.
1.  This  could cause an  1.2 EAR  having  2.3 Web leading to an invalid EAR.
Right now we allow you to select  1.3 and  1.4 EAR for  1.3  web

2.  This seems feasible,  probably  get  feedback from  the users if thats the way they want the project creation to behave.
1 and 2 are meant to be two parts of the same solution. 1 is necessary for 2 in order to fix this usecase.

The only part that could be a problem is this series of steps:

1. Create a 1.3 EAR.
2. Open the web project wizard.
3. Verify that the web facet version is set higher than 1.3.
4. Pick the EAR from step 1 on the first page.
3. Go to the second page. The web facet version should now be 1.3.
4. Change the web facet version to 1.4.

What should happen in this case? Note that the same situation can be reproduced with the existing wizard (takes more steps). Not sure how it's currently handled. Perhaps the EAR association is removed?

Note that we are never going to be able to correctly handle all cases where ear and module version mismatch can occurr. There are too many ways to cause that. At some point, we will have to write a validator for this. Here is what's needed to make a validator-based solution:

1. The validator itself that would check for the version mismatch.
2. Version change delegates for web and ear facets. This is the biggest chunk of work as it requires descriptor munging, but it would be a valuable tool for users in other contexts.
3. Quick fix implementations tied to errors generated by #1. The quick fixes would take advantage of #2.

If we go ahead and implement the validator, than we don't need to do implement #2 from my proposed solution. The change described in #1 will allow the users to get into a version-mismatch situation (but at least they can create the project in a straight-forward fashion). The problem is then detected by the validator and the users utilizes the quick-fixes to either change the ear or the web module version.
I think that page 2 should restrict choices to so that only valid combinations can occur.
Another facet :-) of the complete solution might be a workspace level user preference that says "I want all the apps I create in this workspace to be J2EE 1.3 compilant".

That would be taken into account by the wizards as they do defaulting, by the facet version change delegates, by validators, etc.
*** Bug 120391 has been marked as a duplicate of this bug. ***
I also ran into this during smoke testing....   I'm upping the sev to major, and cc'ing Janet for her opinion...


Also

https://bugs.eclipse.org/bugs/show_bug.cgi?id=132237 

I am more inclined in putting Add to Ear in the facet install page for other project type
It would seem easier to have the user define which version of EAR is their default in the first panel, yet still show all ear's with their version number. Allowing the user to select only those ears whose versions don't clash with the version numbers of the facets. 

If the user selects a version of facet that doesn't align with the ear, then a warning decorator should show on the facet.

Wizards should show progression, and reduce the amount of backward movement.

I've also asked May Zhu (Usability) to comment in this bug.
When I select a runtime, I think the ear combo should be populated with *all* valid ears for that runtime.  Agree with the suggestion that if an ear is then selected, it's version should be used in combination with the runtime selection to default the module facet's version number.

If the spec prohibits a higher version module being used in a lower version ear, WTP should constrain the module version numbers accordingly.  If the spec doesn't prohibit it, then it's a a server-specific validation issue.

I don't support removing Add to EAR from the first panel.

I don't support putting a version number field/combo in the first panel.

Since the application.xml has changed from  J2EE versions,  for  e.g. in J2EE  1.3  connector module was introduced which could be added to application.xml of J2EE 1.3 but not to  1.2 so  we  should keep the validation for not allowing higher module versions to be added to lower versions of EAR.

I could  go ahead and implement the functionality to default highest version of module to  line up with the version of the EAR.

The other change needed would be in the second page of the project creation, the facet page, to add  validation if the user switches the module version to be incompatible with the  EAR. I request BEA to contribute this part since i am not familiar with that  code of second page.



wouldn't the contraints diagrams (that are invoked on R-clicking a Facet) show EAR dependancies as well?
Facet constraints do not go across projects. The fact than an EAR project refers a module project and that there is a relationship between facets in these separate projects is not handled by the facets framework.
Targetting to 2.0, once 138074 is fixed it would be easier to fix this one.
I do not agree that this funciton should be deferred to 2.0.  I don't think anyone would argue that this is not the correct behavior and any customer that has a need to use 1.3 EARs (possibly mixed with 1.4 EARs to they cannot set their preference level to 1.3) will not see them in the module project creation wizards on the first page.  They need to change the facet version on the second page to see the necessary EAR on the first page.

I've also heard the idea of filtering the EARs based on the selected runtime on the first page.  I don't like this either because selecting an EAR for the module project will drive the runtime (it will match the EAR's).  Plus the user may not see the EAR they want to add the new module to and they will not know why.  They will need to fumble around the wizard to figure out how to show the EAR they want.  Not a good practice.

The only real solution is to show all EARs.  When the user selects an EAR for the module to be added the runtime will be set to the same runtime selected for the EAR (and disabled).  This shouldn't be hard.

The part that needs some work is the facet page.  This page should only show valid facet versions based on the EAR version.  This means that the facet page must respect an upper J2EE version limit.  Changes on the facet page should not affect the first page.  There is no reason the user should have to go forward and back multiple times to accomplish a simple task.  This would be simple if the facet page used the data models like all of the other pages.  But since it does not there needs to be a mechanism put in place (maybe temporary) that allows for the setting or detecting of the maximum J2EE version.
Dan,

"The only real solution is to show all EARs.  When the user selects an EAR for
the module to be added the runtime will be set to the same runtime selected for
the EAR (and disabled).  This shouldn't be hard."  This is the way it is working in the latest builds.

And as  you pointed out, yes the facet page needs work, this page should only show valid facet versions based on the EAR version

Thanks Neeraj.

I didn't realize that the change had been made to show all EARs.  This is a good start.

What is the plan to put in a fix for the facet versions in 1.5.1?
This may be a tactical solution until 2.0 but we need a solution in 1.5.1 for this problem.
Daniel,

I disagree with you on two points:

1. We will be creating a circular relationship between the runtime and ear fields (the ear field is disabled/enabled based on the runtime selected), so we have to tread very carefully. Otherwise we risk confusing a novice user and trapping an advanced user. The runtime field should never be disabled. Disabling will not leave user with any recourse other than to cancel the wizard. Also, since user would have typically selected runtime firt prior to selecting the ear, we need user's permission in order to modify the runtime. So... I am fine with a solution where if the user selects an ear whose runtime does not match the runtime currently selected for the web project we prompt the user explaining the problem and asking for permission to modify the currently-selected runtime (user can say no). In either case the runtime field would not get disabled.

2. Defaulting the web facet version based on ear facet version is fine, however we should not attempt to constrain upper limit on the web facet. The J2EE spec says nothing about this and I would not be surprised if there are servers out there which support 1.3 ear with a 1.4 web app. Defaulting the version is fine, but wtp as a framework should not be making a more general assumption that mis-aligned versions are always wrong.

Regarding the reasons for why this was deferred... Neeraj and I had a conversation about implementation strategies. Currently, in order to influence the selected facets, one has to utilize the internal api exposed on the facets selection page itself. Since that api is internal, it has never been hardenned, so the caller has to be very careful or risk crashing the wizard. In 2.0, there will be a public data model api (no relation to IDataModel) exposed that will make these interractions easy and safe. I believe Neeraj chose to defer this because the implementation costs of using the existing facilities placed this outside the scope of a service pack release.
I am fine with prompting the user when they select an EAR which has a different runtime than the one selected.

For your second point it is true that the J2EE spec doesn't really state that a 1.3 EAR couldn't contain a 1.4 WAR.  However this should not be the default setup that we create.  We should put the developer on the preferred path which would be create a 1.3 WAR when adding to a 1.3 EAR.  If on the facet page the user (advanced) wants to create a 1.4 WAR in this case they should be able but we should simply warn the user of this case.  The important point is that we guide the users towards best practices.  Make the simple simple and the advanced possible.  Don't lead users down the advanced path under normal situations.

I still want to see a fix for 1.5.1 for this problem.
targetting to 3.0  will be addressing further...
This has been fixed due to rework on Facet Project creation UI</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="126494" />
    <CreationDate amount="2006-02-05 13:47:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="JDT" />
    <component amount="UI" />
    <Version amount="3.1.1" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="enhancement" />
    <Summery>Need a way to control the naming of getters and setters</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="3">
      <source_code type="assignment">
        <location start="240" end="276" />
        <code>private String mPotatoString = null;</code>
      </source_code>
      <source_code type="assignment">
        <location start="277" end="341" />
        <code>private static String sPhraseStringArray[] = {"hello", "there"};</code>
      </source_code>
      <source_code type="functiondef">
        <location start="805" end="861" />
        <code>public String getPotatoString() { return mPotatoString;}</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="INVALID" />
    <WithStack>The code template appears to offer only control over the contents of the getter/setter but no control over the name.

We have a coding standard that requires a prefix of the scope and a suffix naming the type if the type is an object.
E.g.
private String mPotatoString = null;
private static String sPhraseStringArray[] = {"hello", "there"};

Kinda like the way the JVM describes signature encoding ("[Ljava/lang/String;I)V" for instance) but for humans to understand the type and intent of the variable or member on site (whiffs of Hungarian notation waft upwards...) Anyways, code completion in Eclipse makes this pretty darn nice and you never have to figure out capitalization rules for properties.

However, to expose them through getters and setters, I would let the signature encoding do the work.
public String getPotatoString() { return mPotatoString;} // helps disabiguate when new types are added like a Potato type being added later to the same project but with different semantics.

So mine is clearly a more verbose convention but works well for us. Others have more concise member namings and use the getter/setter to expose a cleaned up name for the property.

Ideally, I'd love a little mini-macro language where I could get the shortname of the class being defined, a regex to extract the kernel of what I want get/set affixed to. A way to access captured groups and put them down in the method name would be great. Easiest would be a list of prefixes to strip off before forming the property name.

When JavaScript becomes available either as a platform scripting language or part of the JVM (Dolphin), script to generate names
Note that you can define a prefix and suffix list for fields, local variables and parameters (see Java &gt; Code Style preference page). Thise will be removed when computing the method names.
As Dani writes in comment 1, I think you just have to set up you name prefixes/suffixes correctly and everything should work fine.
Did I misunderstand something?
My mistake and apologies. This seems to have come a long way from when I last tried this. Nice!</WithStack>
    <WithOutStack>The code template appears to offer only control over the contents of the getter/setter but no control over the name.

We have a coding standard that requires a prefix of the scope and a suffix naming the type if the type is an object.
E.g.
private String mPotatoString = null;
private static String sPhraseStringArray[] = {"hello", "there"};

Kinda like the way the JVM describes signature encoding ("[Ljava/lang/String;I)V" for instance) but for humans to understand the type and intent of the variable or member on site (whiffs of Hungarian notation waft upwards...) Anyways, code completion in Eclipse makes this pretty darn nice and you never have to figure out capitalization rules for properties.

However, to expose them through getters and setters, I would let the signature encoding do the work.
public String getPotatoString() { return mPotatoString;} // helps disabiguate when new types are added like a Potato type being added later to the same project but with different semantics.

So mine is clearly a more verbose convention but works well for us. Others have more concise member namings and use the getter/setter to expose a cleaned up name for the property.

Ideally, I'd love a little mini-macro language where I could get the shortname of the class being defined, a regex to extract the kernel of what I want get/set affixed to. A way to access captured groups and put them down in the method name would be great. Easiest would be a list of prefixes to strip off before forming the property name.

When JavaScript becomes available either as a platform scripting language or part of the JVM (Dolphin), script to generate names
Note that you can define a prefix and suffix list for fields, local variables and parameters (see Java &gt; Code Style preference page). Thise will be removed when computing the method names.
As Dani writes in comment 1, I think you just have to set up you name prefixes/suffixes correctly and everything should work fine.
Did I misunderstand something?
My mistake and apologies. This seems to have come a long way from when I last tried this. Nice!</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="126495" />
    <CreationDate amount="2006-02-05 14:25:00 -0500" />
    <DupId amount="" />
    <classification amount="Tools" />
    <Product amount="TPTP Release Engineering" />
    <component amount="Build" />
    <Version amount="4.2" />
    <rep_platform amount="All" />
    <op_sys amount="All" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Add EMF tags as customized tags when generating TPTP JavaDocs.</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>Add EMF tags as customized tags when generating TPTP JavaDocs.

The following EMF tags are valid and should not cuase warnings when generating TPTP JavaDocs:

@generated
@ordered
@model

As such, they should be added as customized tags when generating TPTP JavaDocs.  They may be omitted from the generated JavaDocs -or- they may be printed (e.g. "@generated") in the generated JavaDocs.
Also, filter (e.g. remove) the following EMF comments:

&lt;!-- begin-user-doc --&gt;
&lt;!-- end-user-doc --&gt;
For example, -tag generated:a:"[EMF] Generated" -tag model:a:"[EMF] Model" -tag ordered:a:"[EMF] Ordered"
Also:

@extends (-tag extends:a:"[EMF] Extends")
Also:

@implements (-tag implements:a:"[EMF] Implements")

fixed
Verified in the build logs for the TPTP-4.2.0-200603060100 driver.</WithStack>
    <WithOutStack>Add EMF tags as customized tags when generating TPTP JavaDocs.

The following EMF tags are valid and should not cuase warnings when generating TPTP JavaDocs:

@generated
@ordered
@model

As such, they should be added as customized tags when generating TPTP JavaDocs.  They may be omitted from the generated JavaDocs -or- they may be printed (e.g. "@generated") in the generated JavaDocs.
Also, filter (e.g. remove) the following EMF comments:

&lt;!-- begin-user-doc --&gt;
&lt;!-- end-user-doc --&gt;
For example, -tag generated:a:"[EMF] Generated" -tag model:a:"[EMF] Model" -tag ordered:a:"[EMF] Ordered"
Also:

@extends (-tag extends:a:"[EMF] Extends")
Also:

@implements (-tag implements:a:"[EMF] Implements")

fixed
Verified in the build logs for the TPTP-4.2.0-200603060100 driver.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="126496" />
    <CreationDate amount="2006-02-05 15:10:00 -0500" />
    <DupId amount="" />
    <classification amount="Tools" />
    <Product amount="AspectJ" />
    <component amount="Compiler" />
    <Version amount="DEVELOPMENT" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Required cast marked as unnecessary.</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="1">
      <source_code type="assignment">
        <location start="278" end="353" />
        <code>PositionReservedQuantity reserve = (PositionReservedQuantity) position;</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>- I have a project with the aspectj nature. 

- The compiler is set to /not/ weave (I am using load-time weaving).

- There exists an .aj aspect with:

    declare parents: Position implements PositionReservedQuantityparent

- In a .java test, I have the following expression:

    PositionReservedQuantity reserve = (PositionReservedQuantity) position;


The cast is marked as unnecessary. However if I remove the cast the .java test is marked with the error:

     "Type mismatch: cannot convert from Position to PositionReservedQuantity"

Of course, if weaving was not disabled then the cast would indeed not be necessary. But with weaving disable the cast is required in the IDE.
This looks like a bug with the noWeave option.
noweave has now been removed from the compiler.  it is not necessary when load time weaving to specify noweave.
Confirmed: I have removed noweave from my projects and the unnecessary cast message is no longer issued. Cool!</WithStack>
    <WithOutStack>- I have a project with the aspectj nature. 

- The compiler is set to /not/ weave (I am using load-time weaving).

- There exists an .aj aspect with:

    declare parents: Position implements PositionReservedQuantityparent

- In a .java test, I have the following expression:

    PositionReservedQuantity reserve = (PositionReservedQuantity) position;


The cast is marked as unnecessary. However if I remove the cast the .java test is marked with the error:

     "Type mismatch: cannot convert from Position to PositionReservedQuantity"

Of course, if weaving was not disabled then the cast would indeed not be necessary. But with weaving disable the cast is required in the IDE.
This looks like a bug with the noWeave option.
noweave has now been removed from the compiler.  it is not necessary when load time weaving to specify noweave.
Confirmed: I have removed noweave from my projects and the unnecessary cast message is no longer issued. Cool!</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="126497" />
    <CreationDate amount="2006-02-05 15:16:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="Team" />
    <Version amount="3.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>[Model Sync] Access properties through page configuration</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>It would be good if we could if we could access all the properties of a model sync through the ISynchronizePageConfiguration.
Fixed</WithStack>
    <WithOutStack>It would be good if we could if we could access all the properties of a model sync through the ISynchronizePageConfiguration.
Fixed</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="126498" />
    <CreationDate amount="2006-02-05 15:19:00 -0500" />
    <DupId amount="" />
    <classification amount="Tools" />
    <Product amount="AJDT" />
    <component amount="Core" />
    <Version amount="1.3.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>.xml files are not copied to the output path</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="WORKSFORME" />
    <WithStack>(Maybe this belongs in aspectj...)

With the java nature .xml files are copied to the output path.

With the aspectj nature, .xml files are /not/ copied to the output path.

For me, this is breaking all my spring tests which require the .xml files to be in the same directory as the .class files.
Just as a note (which possibly might help when investigating this bug) there have in the past been various bugs raised dealing with copying resources over to the output directory. In particular bug 78579 (AJDT build does not handle resource files automatically). The tests for this bug are in the BuilderTest class.
Hi Barry,  
I'm not seeing this problem.  If I have a .xml file in my source directory it is copied over to the output directory when it is created and every time it is saved on both Eclipse 3.1 and Eclipse 3.2.  Do you have a test case for this, or can you explain a bit more about what I could do to reproduce your problem?
Thanks.
Well, it is working correctly for me (now) in 3.1. I ashamed to say that I don't recall when it went from broke to not-broke in my environment. Which means I don't have any clues as to why I was seeing the problem. 

I have since rebuilt my workspace a dozen times to keep WTP working. (Various WTP features will cease to operation. Rebuilding the workspace, especially resetting my workspace preferences, always seems to clear it up). Maybe this has something to do with it.

In any case, I'm sorry to have used some of your time testing this. I will install a process by which I review my submitted bugs every few days to see if they remain valid.
Thanks Barry - that's not a problem.</WithStack>
    <WithOutStack>(Maybe this belongs in aspectj...)

With the java nature .xml files are copied to the output path.

With the aspectj nature, .xml files are /not/ copied to the output path.

For me, this is breaking all my spring tests which require the .xml files to be in the same directory as the .class files.
Just as a note (which possibly might help when investigating this bug) there have in the past been various bugs raised dealing with copying resources over to the output directory. In particular bug 78579 (AJDT build does not handle resource files automatically). The tests for this bug are in the BuilderTest class.
Hi Barry,  
I'm not seeing this problem.  If I have a .xml file in my source directory it is copied over to the output directory when it is created and every time it is saved on both Eclipse 3.1 and Eclipse 3.2.  Do you have a test case for this, or can you explain a bit more about what I could do to reproduce your problem?
Thanks.
Well, it is working correctly for me (now) in 3.1. I ashamed to say that I don't recall when it went from broke to not-broke in my environment. Which means I don't have any clues as to why I was seeing the problem. 

I have since rebuilt my workspace a dozen times to keep WTP working. (Various WTP features will cease to operation. Rebuilding the workspace, especially resetting my workspace preferences, always seems to clear it up). Maybe this has something to do with it.

In any case, I'm sorry to have used some of your time testing this. I will install a process by which I review my submitted bugs every few days to see if they remain valid.
Thanks Barry - that's not a problem.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="126499" />
    <CreationDate amount="2006-02-05 15:55:00 -0500" />
    <DupId amount="" />
    <classification amount="RT" />
    <Product amount="Equinox" />
    <component amount="Framework" />
    <Version amount="unspecified" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>launcher strips classpath</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="5">
      <source_code type="singlecomment">
        <location start="203" end="228" />
        <code>// Get Properties</code>
      </source_code>
      <source_code type="assignment">
        <location start="228" end="251" />
        <code>String info = "";</code>
      </source_code>
      <source_code type="assignment">
        <location start="252" end="293" />
        <code>info += "\nProperty Information\n";</code>
      </source_code>
      <source_code type="functiondef">
        <location start="384" end="561" />
        <code>for(int i=0; i &lt; name.length; i++) {
        String value = System.getProperty(name[i]);
        String line = name[i] + ": " + value + "\n";
        info += line;
      }</code>
      </source_code>
      <source_code type="functioncall">
        <location start="562" end="591" />
        <code>System.out.print(info);</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="2">
      <Enumeration lines="13">
        <Lines>
          <Line>1. Make a Hello World RCP application via the New Project wizard.</Line>
          <Line />
          <Line>2. Add the following lines to Application.java in the run method:</Line>
          <Line />
          <Line />
          <Line>String [] name = {</Line>
          <Line>"java.library.path",</Line>
          <Line>"java.class.path",</Line>
          <Line>};</Line>
          <Line />
          <Line />
          <Line />
          <Line>3. Make a Run configuration and put the following in the VM arguments:</Line>
        </Lines>
      </Enumeration>
      <Enumeration lines="10">
        <Lines>
          <Line>1. Program Executable: c:\deploy\jprobe swt rcp jni test\JPROBE SWT RCP.EXE</Line>
          <Line>Program Arguments:</Line>
          <Line>Starting Directory: C:\Deploy\JProbe SWT RCP JNI Test\</Line>
          <Line />
          <Line>2. Program Executable: c:\windows\system32\JAVAW.EXE</Line>
          <Line>Program Arguments: -Xms40m -Xmx256m -classpath "C:\Deploy\JProbe SWT RCP JNI Test\plugins\gov.anl.xrays.epics.jca_1.0.0\jca-2.1.6.jar" -jar "c:\deploy\jprobe swt rcp jni test\startup.jar" -os win32 -ws win32 -arch x86 -launcher "c:\deploy\jprobe swt rcp jni test\JPROBE SWT RCP.EXE" -name "Test Case" -showsplash 600 -exitdata ffc_4c -vm C:\Windows\system32\javaw.exe -vmargs -Xms40m -Xmx256m -classpath "C:\Deploy\JProbe SWT RCP JNI Test\plugins\gov.anl.xrays.epics.jca_1.0.0\jca-2.1.6.jar" -jar "c:\deploy\jprobe swt rcp jni test\startup.jar"</Line>
          <Line />
          <Line>3. Program Executable: c:\deploy\jprobe swt rcp jni test\JPROBE SWT RCP.EXE</Line>
          <Line>Program Arguments: -name "Test Case" -showsplash 600 "c:\Deploy\JProbe SWT RCP JNI Test\configuration\org.eclipse.osgi\splash.bmp"</Line>
          <Line>Starting Directory: C:\Deploy\JProbe SWT RCP JNI Test\</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="RESOLVED" />
    <resolution amount="WONTFIX" />
    <WithStack>from bug 125250c12

To demonstrate the overwriting of the classpath:

1. Make a Hello World RCP application via the New Project wizard.

2. Add the following lines to Application.java in the run method:

      // Get Properties
      String info = "";
      info += "\nProperty Information\n";
      String [] name = {
        "java.library.path",
        "java.class.path",
      };
      for(int i=0; i &lt; name.length; i++) {
        String value = System.getProperty(name[i]);
        String line = name[i] + ": " + value + "\n";
        info += line;
      }
      System.out.print(info);

3. Make a Run configuration and put the following in the VM arguments:

-cp junk1 -Djava.library.path=junk2 -Djava.class.path=junk3

I get:

Property Information
java.library.path: junk2
java.class.path: c:\eclipse\startup.jar

It ignores the classpath. You can also try to specify the classpath
in your own way.  The classpath is ignored in any way I have tried.

If this is not sufficient, I can send the project, but it doesn't
seem necessary.  The above is the only change.  The problem is easy
to demonstrate.
This isn't a bug. The classpath doesn't get 'overwritten'. The startup.jar launches its own VM, which has these properties set, and then it fires up a *second* VM that handle the OSGI launching. The classpath is simply not part of this process, whether specified as an environment variable or a command line parameter. The fact is that you're specifying a classpath for VM1, and expecting it to get through to VM2.

You should also note that 'java.class.path' is not a settable property, so -Djava.class.path is not going to set any information. 

The launcher is almost certainly configured not to set the classpath in this way, and it's a misunderstanding of how the launcher VM and Eclipse VM work.

As an observation, this is why when Eclipse crashes, you get a dialog box up explaining that it's crashed. VM2 goes down, VM1 notices, and displays the box. It's also how when you restart Eclipse (say, after an update manager run) Eclipse can shutdown and reopen. It returns a code to VM1 saying 'please re-launch me' and VM1 obliges.

This should be closed 'not a bug'.
Thank you for your response.

I don't understand VM1 and VM2.  This is what I see using Dependency
Walker on Windows:

The program in question is JProbe SWT RCP.exe

The test .ini file is JProbe SWT RCP.ini:
-name
Test Case
-vmargs
-Xms40m
-Xmx256m
-classpath
C:\Deploy\JProbe SWT RCP JNI Test\plugins\gov.anl.xrays.epics.jca_1.0.0\jca-2.1.6.jar

There are three processes:

1. Program Executable: c:\deploy\jprobe swt rcp jni test\JPROBE SWT RCP.EXE
Program Arguments: 
Starting Directory: C:\Deploy\JProbe SWT RCP JNI Test\

2. Program Executable: c:\windows\system32\JAVAW.EXE
Program Arguments: -Xms40m -Xmx256m -classpath "C:\Deploy\JProbe SWT RCP JNI Test\plugins\gov.anl.xrays.epics.jca_1.0.0\jca-2.1.6.jar" -jar "c:\deploy\jprobe swt rcp jni test\startup.jar" -os win32 -ws win32 -arch x86 -launcher "c:\deploy\jprobe swt rcp jni test\JPROBE SWT RCP.EXE" -name "Test Case" -showsplash 600 -exitdata ffc_4c -vm C:\Windows\system32\javaw.exe -vmargs -Xms40m -Xmx256m -classpath "C:\Deploy\JProbe SWT RCP JNI Test\plugins\gov.anl.xrays.epics.jca_1.0.0\jca-2.1.6.jar" -jar "c:\deploy\jprobe swt rcp jni test\startup.jar" 

3. Program Executable: c:\deploy\jprobe swt rcp jni test\JPROBE SWT RCP.EXE
Program Arguments: -name "Test Case" -showsplash 600 "c:\Deploy\JProbe SWT RCP JNI Test\configuration\org.eclipse.osgi\splash.bmp"
Starting Directory: C:\Deploy\JProbe SWT RCP JNI Test\

(These lines were copied from the Dependency Walker output.)  Process
3. is the splash screen and would not be there if the .ini file had
-nosplash.  It is not part of the issue and can be ignored.

Notice that the classpath from the .ini file did get passed to Javaw.
Thus it *does* get overwritten (by startup.jar).  I see no other
virtual machine being started.  It is all happening in javaw, as far
as I can see.

&gt;&gt; You should also note that 'java.class.path' is not a settable
&gt;&gt; property, so -Djava.class.path is not going to set any information.

I know that.  It is irrelevant.  -classpath is not.

This issue was discussed in depth in Bug #125250 and a solution for
the real problem was found that did not require mofifying Eclipse for
that problem.  The reason this Bug was started is only that it is user
unfriendly to overwite something the user specifies in -vmargs.  If
the user specifies it, it should be included in whatever Eclipse sets
for the classpath.  It is the user's responsibility to do something
reasonable.

The issue in Bug #125250 is resolved, and this issue does not need to
be continued there.  I believe the purpose of this bug was to isolate
this relatively small issue.

Thanks again.

(In reply to comment #1)

Eclipse does not start two VM's to launch.  The native launcher (eclispe.exe) is native c code which is responsible for finding a VM and the startup.jar and the proceeds to run java with the -jar startup.jar.  That is the one and only VM which launches eclipse.

I think the problem is what the vm does when the -jar is used.  We have a similar issue in bug 95733.  It seems that -classpath and the environment var $CLASSPATH is ignored with -jar is used with some VMs.
yes, absolutely.  if you use -jar, the -classpath or -cp stuff is ignored.  


*** This bug has been marked as a duplicate of 95733 ***
I've been a bit too loose here. Reopening.
*** Bug 95733 has been marked as a duplicate of this bug. ***
Standard manifest has a basic support for expressing dependencies. It might be a way to go.
Closing as wontfix again.  It is by design that we ignore the classpath variable.  Eclipse does not want to expose extra stuff through the application classloader by default.  This leads to a poor modularity system.  If you need to do something fancy with extra classpaths then you must either launch with a different launcher jar and use pascal's suggestion in comment 8 or better yet use a real bundle that allows you to define proper modular dependencies on.
Please note that bug 95733 was marked as a dup of this one HOWEVER its complaint is exactly the opposite - the classpath is NOT ignored in all circumstances.  See comment #21 in 95733: "I finally am able to reproduce this.  This happens when an IBM 1.4.2 JRE is used.  When using the -jar option the Sun JRE will ignore the CLASSPATH env.  But the IBM 1.4.2 JRE appears to use the CLASSPATH variable even when using the -jar option."
Note that with the new launcher, bug 126499 would no longer occur when the vm is loaded using JNI invocation (since we are completely bypassing the java.exe), which it would be when starting as described in bug 126499 comment #18
OK.  I submitted the bug, looks like about a year ago.  I have learned to deal with it, and don't have any problem with your closing it as WONTFIX.  I wrote a simple class loader that will load things from anywhere I want, though I haven't had to use it yet.  One could even use the URLClassLoader to do that.

The problem that initiated this bug was that JNI implementations that get callbacks from threads not started by the VM use a FindClass routine to find the Java class to handle the callback.  This supplied C routine uses the standard class loader, which uses the classpath, and I have found no way to avoid that.  It can be worked around as in Bug #125250 and there is a blurb in the release notes as to how to do that.  Unfortunately, it involves rewriting the JNI code, which is not always possible.

The problem, as with much of Eclipse, is that it is difficult to find these things out, and it uses a great deal of my time as well as that of others.

In particular, I guess I need to find out about the "new launcher".

The participants in this bug have been really friendly and helpful, and I appreciate that.  Unfortunately, my mileage in that regard varies for other bug report.  Consequently, I thank all of you for the information and feel the effort was not wasted, as others will also find the information here.
A bug needs to be opened against the IBM vm.  I will look open a bug.
(In reply to comment #11)
&gt; Note that with the new launcher, bug 126499 would no longer occur when the vm
&gt; is loaded using JNI invocation (since we are completely bypassing the
&gt; java.exe), which it would be when starting as described in bug 126499 comment
&gt; #18

Andrew, I'm not following.  Are you saying that this bug 126499 does not happen with the new launcher?  or that the duplicated bug 95733 will no longer occur with the new launcher?

This bug 126499 was opened because the classpath variable is ignored when launching with the -jar option.  Is that no longer the case with the new launcher?


I think I got confused by the duplication. I meant bug 95733: with the new launcher, when using JNI invocation to start the vm, the CLASSPATH variable would not be read.  (Though when we fork java in a separate process, it may be read by the java launcher).  So I</WithStack>
    <WithOutStack>from bug 125250c12

To demonstrate the overwriting of the classpath:

1. Make a Hello World RCP application via the New Project wizard.

2. Add the following lines to Application.java in the run method:

      // Get Properties
      String info = "";
      info += "\nProperty Information\n";
      String [] name = {
        "java.library.path",
        "java.class.path",
      };
      for(int i=0; i &lt; name.length; i++) {
        String value = System.getProperty(name[i]);
        String line = name[i] + ": " + value + "\n";
        info += line;
      }
      System.out.print(info);

3. Make a Run configuration and put the following in the VM arguments:

-cp junk1 -Djava.library.path=junk2 -Djava.class.path=junk3

I get:

Property Information
java.library.path: junk2
java.class.path: c:\eclipse\startup.jar

It ignores the classpath. You can also try to specify the classpath
in your own way.  The classpath is ignored in any way I have tried.

If this is not sufficient, I can send the project, but it doesn't
seem necessary.  The above is the only change.  The problem is easy
to demonstrate.
This isn't a bug. The classpath doesn't get 'overwritten'. The startup.jar launches its own VM, which has these properties set, and then it fires up a *second* VM that handle the OSGI launching. The classpath is simply not part of this process, whether specified as an environment variable or a command line parameter. The fact is that you're specifying a classpath for VM1, and expecting it to get through to VM2.

You should also note that 'java.class.path' is not a settable property, so -Djava.class.path is not going to set any information. 

The launcher is almost certainly configured not to set the classpath in this way, and it's a misunderstanding of how the launcher VM and Eclipse VM work.

As an observation, this is why when Eclipse crashes, you get a dialog box up explaining that it's crashed. VM2 goes down, VM1 notices, and displays the box. It's also how when you restart Eclipse (say, after an update manager run) Eclipse can shutdown and reopen. It returns a code to VM1 saying 'please re-launch me' and VM1 obliges.

This should be closed 'not a bug'.
Thank you for your response.

I don't understand VM1 and VM2.  This is what I see using Dependency
Walker on Windows:

The program in question is JProbe SWT RCP.exe

The test .ini file is JProbe SWT RCP.ini:
-name
Test Case
-vmargs
-Xms40m
-Xmx256m
-classpath
C:\Deploy\JProbe SWT RCP JNI Test\plugins\gov.anl.xrays.epics.jca_1.0.0\jca-2.1.6.jar

There are three processes:

1. Program Executable: c:\deploy\jprobe swt rcp jni test\JPROBE SWT RCP.EXE
Program Arguments: 
Starting Directory: C:\Deploy\JProbe SWT RCP JNI Test\

2. Program Executable: c:\windows\system32\JAVAW.EXE
Program Arguments: -Xms40m -Xmx256m -classpath "C:\Deploy\JProbe SWT RCP JNI Test\plugins\gov.anl.xrays.epics.jca_1.0.0\jca-2.1.6.jar" -jar "c:\deploy\jprobe swt rcp jni test\startup.jar" -os win32 -ws win32 -arch x86 -launcher "c:\deploy\jprobe swt rcp jni test\JPROBE SWT RCP.EXE" -name "Test Case" -showsplash 600 -exitdata ffc_4c -vm C:\Windows\system32\javaw.exe -vmargs -Xms40m -Xmx256m -classpath "C:\Deploy\JProbe SWT RCP JNI Test\plugins\gov.anl.xrays.epics.jca_1.0.0\jca-2.1.6.jar" -jar "c:\deploy\jprobe swt rcp jni test\startup.jar" 

3. Program Executable: c:\deploy\jprobe swt rcp jni test\JPROBE SWT RCP.EXE
Program Arguments: -name "Test Case" -showsplash 600 "c:\Deploy\JProbe SWT RCP JNI Test\configuration\org.eclipse.osgi\splash.bmp"
Starting Directory: C:\Deploy\JProbe SWT RCP JNI Test\

(These lines were copied from the Dependency Walker output.)  Process
3. is the splash screen and would not be there if the .ini file had
-nosplash.  It is not part of the issue and can be ignored.

Notice that the classpath from the .ini file did get passed to Javaw.
Thus it *does* get overwritten (by startup.jar).  I see no other
virtual machine being started.  It is all happening in javaw, as far
as I can see.

&gt;&gt; You should also note that 'java.class.path' is not a settable
&gt;&gt; property, so -Djava.class.path is not going to set any information.

I know that.  It is irrelevant.  -classpath is not.

This issue was discussed in depth in Bug #125250 and a solution for
the real problem was found that did not require mofifying Eclipse for
that problem.  The reason this Bug was started is only that it is user
unfriendly to overwite something the user specifies in -vmargs.  If
the user specifies it, it should be included in whatever Eclipse sets
for the classpath.  It is the user's responsibility to do something
reasonable.

The issue in Bug #125250 is resolved, and this issue does not need to
be continued there.  I believe the purpose of this bug was to isolate
this relatively small issue.

Thanks again.

(In reply to comment #1)

Eclipse does not start two VM's to launch.  The native launcher (eclispe.exe) is native c code which is responsible for finding a VM and the startup.jar and the proceeds to run java with the -jar startup.jar.  That is the one and only VM which launches eclipse.

I think the problem is what the vm does when the -jar is used.  We have a similar issue in bug 95733.  It seems that -classpath and the environment var $CLASSPATH is ignored with -jar is used with some VMs.
yes, absolutely.  if you use -jar, the -classpath or -cp stuff is ignored.  


*** This bug has been marked as a duplicate of 95733 ***
I've been a bit too loose here. Reopening.
*** Bug 95733 has been marked as a duplicate of this bug. ***
Standard manifest has a basic support for expressing dependencies. It might be a way to go.
Closing as wontfix again.  It is by design that we ignore the classpath variable.  Eclipse does not want to expose extra stuff through the application classloader by default.  This leads to a poor modularity system.  If you need to do something fancy with extra classpaths then you must either launch with a different launcher jar and use pascal's suggestion in comment 8 or better yet use a real bundle that allows you to define proper modular dependencies on.
Please note that bug 95733 was marked as a dup of this one HOWEVER its complaint is exactly the opposite - the classpath is NOT ignored in all circumstances.  See comment #21 in 95733: "I finally am able to reproduce this.  This happens when an IBM 1.4.2 JRE is used.  When using the -jar option the Sun JRE will ignore the CLASSPATH env.  But the IBM 1.4.2 JRE appears to use the CLASSPATH variable even when using the -jar option."
Note that with the new launcher, bug 126499 would no longer occur when the vm is loaded using JNI invocation (since we are completely bypassing the java.exe), which it would be when starting as described in bug 126499 comment #18
OK.  I submitted the bug, looks like about a year ago.  I have learned to deal with it, and don't have any problem with your closing it as WONTFIX.  I wrote a simple class loader that will load things from anywhere I want, though I haven't had to use it yet.  One could even use the URLClassLoader to do that.

The problem that initiated this bug was that JNI implementations that get callbacks from threads not started by the VM use a FindClass routine to find the Java class to handle the callback.  This supplied C routine uses the standard class loader, which uses the classpath, and I have found no way to avoid that.  It can be worked around as in Bug #125250 and there is a blurb in the release notes as to how to do that.  Unfortunately, it involves rewriting the JNI code, which is not always possible.

The problem, as with much of Eclipse, is that it is difficult to find these things out, and it uses a great deal of my time as well as that of others.

In particular, I guess I need to find out about the "new launcher".

The participants in this bug have been really friendly and helpful, and I appreciate that.  Unfortunately, my mileage in that regard varies for other bug report.  Consequently, I thank all of you for the information and feel the effort was not wasted, as others will also find the information here.
A bug needs to be opened against the IBM vm.  I will look open a bug.
(In reply to comment #11)
&gt; Note that with the new launcher, bug 126499 would no longer occur when the vm
&gt; is loaded using JNI invocation (since we are completely bypassing the
&gt; java.exe), which it would be when starting as described in bug 126499 comment
&gt; #18

Andrew, I'm not following.  Are you saying that this bug 126499 does not happen with the new launcher?  or that the duplicated bug 95733 will no longer occur with the new launcher?

This bug 126499 was opened because the classpath variable is ignored when launching with the -jar option.  Is that no longer the case with the new launcher?


I think I got confused by the duplication. I meant bug 95733: with the new launcher, when using JNI invocation to start the vm, the CLASSPATH variable would not be read.  (Though when we fork java in a separate process, it may be read by the java launcher).  So I</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="126500" />
    <CreationDate amount="2006-02-05 16:36:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="Team" />
    <Version amount="3.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>[Model Sync] Scope management background handler</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="WONTFIX" />
    <WithStack>We should ensure that all scope initialization/refresh is handler by the scope manager background handler. Currently, the context handler does the scope initialization. What should happen is the init should happen in the scope manager job and then a scope change should trigger the context update.

We should somehow get this all done in a single progress group.
It is OK to do the initialization in another thread since participants are registered during the initialize.</WithStack>
    <WithOutStack>We should ensure that all scope initialization/refresh is handler by the scope manager background handler. Currently, the context handler does the scope initialization. What should happen is the init should happen in the scope manager job and then a scope change should trigger the context update.

We should somehow get this all done in a single progress group.
It is OK to do the initialization in another thread since participants are registered during the initialize.</WithOutStack>
  </Bug>
</infozilla-output>

