<?xml version="1.0" encoding="UTF-8"?>
<infozilla-output>
  <Bug>
    <BugId amount="129501" />
    <CreationDate amount="2006-02-26 16:30:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="SWT" />
    <Version amount="3.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Tree FULL_SELECTION doesn't redraw item background in selection color</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="1">
      <source_code type="functiondef">
        <location start="434" end="1760" />
        <code>public static void main(String[] args) {

    final Display display = new Display();
    final Shell shell = new Shell(display);
    shell.setLayout(new FillLayout());
   
    final Tree tree = new Tree(shell, SWT.H_SCROLL | SWT.V_SCROLL | SWT.VIRTUAL | SWT.BORDER | SWT.MULTI
        | SWT.FULL_SELECTION);
    
    final int columns = 20;

    for (int i = 0; i &lt; columns; i++)
      new TreeColumn(tree, SWT.LEFT).setWidth(150);

    tree.setHeaderVisible(true);
    tree.setLinesVisible(true);
    
    tree.addListener(SWT.SetData, new Listener() {
      public void handleEvent(Event event) {
        TreeItem item = (TreeItem) event.item;
        TreeItem parentItem = item.getParentItem();
        String text = null;
        if (parentItem == null) {
          text = "node " + tree.indexOf(item);
        } else {
          text = parentItem.getText() + " - " + parentItem.indexOf(item);
        }
        //System.err.println("Update: " + text);
        item.setText(text);
        for (int i = 0; i &lt;= columns; i++) {
          item.setText(i, text);
        }

        item.setItemCount(40);
      }
    });
    tree.setItemCount(60);

    shell.setSize(400, 300);
    shell.open();

    while (!shell.isDisposed()) {
      if (!display.readAndDispatch())
        display.sleep();
    }
    display.dispose();
  }</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>SWT win32 CVS.

Since this patch:

"implement FULL_SELECTION for tree with background image"

http://dev.eclipse.org/viewcvs/index.cgi/org.eclipse.swt/Eclipse%20SWT/win32/org/eclipse/swt/widgets/Tree.java.diff?r1=1.245&amp;r2=1.246&amp;cvsroot=Eclipse_Project&amp;sortby=date


FULL_SELECTION background color doesn't redraw on TREE columns properly when horizontally scrolling.

Example:
Select some items and horizontally scroll to the right.

public static void main(String[] args) {

    final Display display = new Display();
    final Shell shell = new Shell(display);
    shell.setLayout(new FillLayout());
   
    final Tree tree = new Tree(shell, SWT.H_SCROLL | SWT.V_SCROLL | SWT.VIRTUAL | SWT.BORDER | SWT.MULTI
        | SWT.FULL_SELECTION);
    
    final int columns = 20;

    for (int i = 0; i &lt; columns; i++)
      new TreeColumn(tree, SWT.LEFT).setWidth(150);

    tree.setHeaderVisible(true);
    tree.setLinesVisible(true);
    
    tree.addListener(SWT.SetData, new Listener() {
      public void handleEvent(Event event) {
        TreeItem item = (TreeItem) event.item;
        TreeItem parentItem = item.getParentItem();
        String text = null;
        if (parentItem == null) {
          text = "node " + tree.indexOf(item);
        } else {
          text = parentItem.getText() + " - " + parentItem.indexOf(item);
        }
        //System.err.println("Update: " + text);
        item.setText(text);
        for (int i = 0; i &lt;= columns; i++) {
          item.setText(i, text);
        }

        item.setItemCount(40);
      }
    });
    tree.setItemCount(60);

    shell.setSize(400, 300);
    shell.open();

    while (!shell.isDisposed()) {
      if (!display.readAndDispatch())
        display.sleep();
    }
    display.dispose();
  }
Fixed &gt; 20060227

Thanks Rutger.  Note that table and tree are undergoing and have undergone massive internal changes for M6.  Thanks for finding and reporting bugs like this one.
Re-verified by Z for M6 (20060331).</WithStack>
    <WithOutStack>SWT win32 CVS.

Since this patch:

"implement FULL_SELECTION for tree with background image"

http://dev.eclipse.org/viewcvs/index.cgi/org.eclipse.swt/Eclipse%20SWT/win32/org/eclipse/swt/widgets/Tree.java.diff?r1=1.245&amp;r2=1.246&amp;cvsroot=Eclipse_Project&amp;sortby=date


FULL_SELECTION background color doesn't redraw on TREE columns properly when horizontally scrolling.

Example:
Select some items and horizontally scroll to the right.

public static void main(String[] args) {

    final Display display = new Display();
    final Shell shell = new Shell(display);
    shell.setLayout(new FillLayout());
   
    final Tree tree = new Tree(shell, SWT.H_SCROLL | SWT.V_SCROLL | SWT.VIRTUAL | SWT.BORDER | SWT.MULTI
        | SWT.FULL_SELECTION);
    
    final int columns = 20;

    for (int i = 0; i &lt; columns; i++)
      new TreeColumn(tree, SWT.LEFT).setWidth(150);

    tree.setHeaderVisible(true);
    tree.setLinesVisible(true);
    
    tree.addListener(SWT.SetData, new Listener() {
      public void handleEvent(Event event) {
        TreeItem item = (TreeItem) event.item;
        TreeItem parentItem = item.getParentItem();
        String text = null;
        if (parentItem == null) {
          text = "node " + tree.indexOf(item);
        } else {
          text = parentItem.getText() + " - " + parentItem.indexOf(item);
        }
        //System.err.println("Update: " + text);
        item.setText(text);
        for (int i = 0; i &lt;= columns; i++) {
          item.setText(i, text);
        }

        item.setItemCount(40);
      }
    });
    tree.setItemCount(60);

    shell.setSize(400, 300);
    shell.open();

    while (!shell.isDisposed()) {
      if (!display.readAndDispatch())
        display.sleep();
    }
    display.dispose();
  }
Fixed &gt; 20060227

Thanks Rutger.  Note that table and tree are undergoing and have undergone massive internal changes for M6.  Thanks for finding and reporting bugs like this one.
Re-verified by Z for M6 (20060331).</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="129502" />
    <CreationDate amount="2006-02-26 16:32:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse Foundation" />
    <Product amount="z_Archived" />
    <component amount="TPTP.monitoring" />
    <Version amount="unspecified" />
    <rep_platform amount="All" />
    <op_sys amount="All" />
    <priority amount="P3" />
    <bug_severity amount="critical" />
    <Summery>gla scripts need to change due to emf jar name changes</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>The names of the EMF jars included with the Standalone GLA have changed.  These names are currently hardcoded in the gla.bat and gla.sh sample script files for executing GLA.  These script files need to change in order to work.

The old names are:

emf.common_2.2.0.jar
emf.ecore_2.2.0.jar

The new names are:

emf.common_2.2.0.qualifier.jar
emf.ecore_2.2.0.qualifier.jar
Committed fixes to gla.bat and gla.sh to TPTP Head CVS

gla.bat - changed jar file names as indicated
gla.sh - added code to get the names of the jars from the lib directory and set them in the classpath accordingly.  For example:

EMF_COMMON=`ls $GLA_HOME/lib/emf.common*`
EMF_ECORE=`ls $GLA_HOME/lib/emf.ecore*`
Fixed in 4.2 i1
As of TPTP 4.6.0, TPTP is in maintenance mode and focusing on improving quality by resolving relevant enhancements/defects and increasing test coverage through test creation, automation, Build Verification Tests (BVTs), and expanded run-time execution. As part of the TPTP Bugzilla housecleaning process (see http://wiki.eclipse.org/Bugzilla_Housecleaning_Processes), this enhancement/defect is verified/closed by the Project Lead since this enhancement/defect has been resolved and unverified for more than 1 year and considered to be fixed. If this enhancement/defect is still unresolved and reproducible in the latest TPTP release (http://www.eclipse.org/tptp/home/downloads/), please re-open.</WithStack>
    <WithOutStack>The names of the EMF jars included with the Standalone GLA have changed.  These names are currently hardcoded in the gla.bat and gla.sh sample script files for executing GLA.  These script files need to change in order to work.

The old names are:

emf.common_2.2.0.jar
emf.ecore_2.2.0.jar

The new names are:

emf.common_2.2.0.qualifier.jar
emf.ecore_2.2.0.qualifier.jar
Committed fixes to gla.bat and gla.sh to TPTP Head CVS

gla.bat - changed jar file names as indicated
gla.sh - added code to get the names of the jars from the lib directory and set them in the classpath accordingly.  For example:

EMF_COMMON=`ls $GLA_HOME/lib/emf.common*`
EMF_ECORE=`ls $GLA_HOME/lib/emf.ecore*`
Fixed in 4.2 i1
As of TPTP 4.6.0, TPTP is in maintenance mode and focusing on improving quality by resolving relevant enhancements/defects and increasing test coverage through test creation, automation, Build Verification Tests (BVTs), and expanded run-time execution. As part of the TPTP Bugzilla housecleaning process (see http://wiki.eclipse.org/Bugzilla_Housecleaning_Processes), this enhancement/defect is verified/closed by the Project Lead since this enhancement/defect has been resolved and unverified for more than 1 year and considered to be fixed. If this enhancement/defect is still unresolved and reproducible in the latest TPTP release (http://www.eclipse.org/tptp/home/downloads/), please re-open.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="129503" />
    <CreationDate amount="2006-02-26 16:56:00 -0500" />
    <DupId amount="" />
    <classification amount="Mylyn" />
    <Product amount="Mylyn" />
    <component amount="Jira" />
    <Version amount="0.4" />
    <rep_platform amount="Macintosh" />
    <op_sys amount="Mac OS X - Carbon (unsup.)" />
    <priority amount="P3" />
    <bug_severity amount="major" />
    <Summery>Mylar 0.4.9 can't initialize</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="4">
        <Lines>
          <Line>- clear your .metadata/.log file</Line>
          <Line>- uninstall all versions of Mylar (see http://www.eclipse.org/mylar/doc/faq.php#install-failure)</Line>
          <Line>- install Mylar 0.4.9 including the JIRA support, and make sure that there are no errors reported in the install process</Line>
          <Line>- if there are any problems installing this time around please attach the entire .log file</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="RESOLVED" />
    <resolution amount="INVALID" />
    <WithStack>After using the update manager to go from 0.4.8-&gt;0.4.9 my Mylar install seemed to get into a knot and not start at all.

I couldn't see the Mylar preferences stuff, and in the "Manage Configuration" there appeared to be red X's saying quite a few of the plugins couldn't start because the JIRA dashboard plugn wasn't there.

I deleted all the mylar plugin folders, and removed what appeared to be a half-installed version of the JIRA dashboard plugin, and tried to reinstalled.  Same thing happened.

Noticed this error in the .metadata/.log file:

!ENTRY org.eclipse.osgi 4 0 2006-02-27 08:51:32.318
!MESSAGE While loading class "org.tigris.subversion.subclipse.ui.console.ConsoleDocument$ConsoleLine", thread "main" timed out waiting (5000ms) for thread "Worker-2" to finish starting bundle "org.tigris.subversion.subclipse.ui". To avoid deadlock, thread "main" is proceeding but "org.tigris.subversion.subclipse.ui.console.ConsoleDocument$ConsoleLine" may not be fully initialized.
!STACK 0
java.lang.Exception: Generated exception.
        at org.eclipse.core.runtime.internal.adaptor.EclipseLazyStarter.preFindLocalClass(EclipseLazyStarter.java:75)
        at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findLocalClass(ClasspathManager.java:402)
        at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.findLocalClass(DefaultClassLoader.java:186)
        at org.eclipse.osgi.framework.internal.core.BundleLoader.findLocalClass(BundleLoader.java:338)
        at org.eclipse.osgi.framework.internal.core.BundleLoader.findClass(BundleLoader.java:390)
        at org.eclipse.osgi.framework.internal.core.BundleLoader.findClass(BundleLoader.java:351)
        at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:81)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:251)
        at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:319)
        at org.tigris.subversion.subclipse.ui.console.ConsoleDocument.getLines(ConsoleDocument.java:79)
        at org.tigris.subversion.subclipse.ui.console.SVNOutputConsole.dump(SVNOutputConsole.java:202)
        at org.tigris.subversion.subclipse.ui.console.SVNOutputConsole.access$1(SVNOutputConsole.java:199)
        at org.tigris.subversion.subclipse.ui.console.SVNOutputConsole$1.run(SVNOutputConsole.java:124)
        at org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35)
        at org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:123)
        at org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:3128)
        at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2892)
        at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1899)
        at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1863)
        at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:417)
        at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:143)
        at org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:106)
        at org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:99)
        at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:92)
        at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:68)
        at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:374)
        at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:169)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:585)
        at org.eclipse.core.launcher.Main.invokeFramework(Main.java:338)
        at org.eclipse.core.launcher.Main.basicRun(Main.java:282)
        at org.eclipse.core.launcher.Main.run(Main.java:977)
        at org.eclipse.core.launcher.Main.main(Main.java:952)


I have the Subclipse plugin as well, which I need (as I work on Apache projects).

Bummer, was really looking forward to trying out teh JIRA stuff.

Let me know if I can grab any more info or try anything else out.
Paul: I use Mylar with Subclipse too, and there shouldn't be a problem so we need to figure out what's going wrong here.  Let's assume for the time being that it's not Mac related.  Unfortunately that log trace isn't saying much, so please try the following: 
- clear your .metadata/.log file
- uninstall all versions of Mylar (see http://www.eclipse.org/mylar/doc/faq.php#install-failure)
- install Mylar 0.4.9 including the JIRA support, and make sure that there are no errors reported in the install process
- if there are any problems installing this time around please attach the entire .log file

Also ensure that you are using Eclipse 3.1.x or 3.2M5 (no other 3.2 version will work).  Let me know how it goes.
Ok, removed all non-eclipse plugins (on M5), then installed the JIRA dashboard plugin first, then mylar 0.4.9, then subclipse, and now sanity appears to be restored.

Odd, but happy.  Of course i'm having a touch of bother with our JIRA service with 0.4.9 but I think that's because the certificate on the jira server is invalid(i'll fix that and see if that clears it up).

Do you wanna mark this as invalid?

Thanks,

Paul
Good to hear.  Let me know if there's anything that could be made more clear in the FAQ in case your problem is experienced by others.
Changing OS from Mac OS to Mac OS X as per bug 185991</WithStack>
    <WithOutStack>After using the update manager to go from 0.4.8-&gt;0.4.9 my Mylar install seemed to get into a knot and not start at all.

I couldn't see the Mylar preferences stuff, and in the "Manage Configuration" there appeared to be red X's saying quite a few of the plugins couldn't start because the JIRA dashboard plugn wasn't there.

I deleted all the mylar plugin folders, and removed what appeared to be a half-installed version of the JIRA dashboard plugin, and tried to reinstalled.  Same thing happened.

Noticed this error in the .metadata/.log file:

!ENTRY org.eclipse.osgi 4 0 2006-02-27 08:51:32.318
!MESSAGE While loading class "org.tigris.subversion.subclipse.ui.console.ConsoleDocument$ConsoleLine", thread "main" timed out waiting (5000ms) for thread "Worker-2" to finish starting bundle "org.tigris.subversion.subclipse.ui". To avoid deadlock, thread "main" is proceeding but "org.tigris.subversion.subclipse.ui.console.ConsoleDocument$ConsoleLine" may not be fully initialized.
!STACK 0
java.lang.Exception: Generated exception.
        at org.eclipse.core.runtime.internal.adaptor.EclipseLazyStarter.preFindLocalClass(EclipseLazyStarter.java:75)
        at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findLocalClass(ClasspathManager.java:402)
        at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.findLocalClass(DefaultClassLoader.java:186)
        at org.eclipse.osgi.framework.internal.core.BundleLoader.findLocalClass(BundleLoader.java:338)
        at org.eclipse.osgi.framework.internal.core.BundleLoader.findClass(BundleLoader.java:390)
        at org.eclipse.osgi.framework.internal.core.BundleLoader.findClass(BundleLoader.java:351)
        at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:81)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:251)
        at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:319)
        at org.tigris.subversion.subclipse.ui.console.ConsoleDocument.getLines(ConsoleDocument.java:79)
        at org.tigris.subversion.subclipse.ui.console.SVNOutputConsole.dump(SVNOutputConsole.java:202)
        at org.tigris.subversion.subclipse.ui.console.SVNOutputConsole.access$1(SVNOutputConsole.java:199)
        at org.tigris.subversion.subclipse.ui.console.SVNOutputConsole$1.run(SVNOutputConsole.java:124)
        at org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35)
        at org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:123)
        at org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:3128)
        at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2892)
        at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1899)
        at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1863)
        at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:417)
        at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:143)
        at org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:106)
        at org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:99)
        at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:92)
        at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:68)
        at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:374)
        at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:169)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:585)
        at org.eclipse.core.launcher.Main.invokeFramework(Main.java:338)
        at org.eclipse.core.launcher.Main.basicRun(Main.java:282)
        at org.eclipse.core.launcher.Main.run(Main.java:977)
        at org.eclipse.core.launcher.Main.main(Main.java:952)


I have the Subclipse plugin as well, which I need (as I work on Apache projects).

Bummer, was really looking forward to trying out teh JIRA stuff.

Let me know if I can grab any more info or try anything else out.
Paul: I use Mylar with Subclipse too, and there shouldn't be a problem so we need to figure out what's going wrong here.  Let's assume for the time being that it's not Mac related.  Unfortunately that log trace isn't saying much, so please try the following: 
- clear your .metadata/.log file
- uninstall all versions of Mylar (see http://www.eclipse.org/mylar/doc/faq.php#install-failure)
- install Mylar 0.4.9 including the JIRA support, and make sure that there are no errors reported in the install process
- if there are any problems installing this time around please attach the entire .log file

Also ensure that you are using Eclipse 3.1.x or 3.2M5 (no other 3.2 version will work).  Let me know how it goes.
Ok, removed all non-eclipse plugins (on M5), then installed the JIRA dashboard plugin first, then mylar 0.4.9, then subclipse, and now sanity appears to be restored.

Odd, but happy.  Of course i'm having a touch of bother with our JIRA service with 0.4.9 but I think that's because the certificate on the jira server is invalid(i'll fix that and see if that clears it up).

Do you wanna mark this as invalid?

Thanks,

Paul
Good to hear.  Let me know if there's anything that could be made more clear in the FAQ in case your problem is experienced by others.
Changing OS from Mac OS to Mac OS X as per bug 185991</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="129504" />
    <CreationDate amount="2006-02-26 17:08:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="JDT" />
    <component amount="UI" />
    <Version amount="3.1" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>convert to enhanced for loop breaks on wildcards</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="2">
      <source_code type="class">
        <location start="7" end="194" />
        <code>public class A {
  void f(List&lt;? extends Number&gt; x){
    for (Iterator&lt;? extends Number&gt; iter = x.iterator(); iter.hasNext();) {
      Number num = iter.next();
      //do stuff	
    }}
}</code>
      </source_code>
      <source_code type="functiondef">
        <location start="299" end="376" />
        <code>for (Number number:x){
      Number num = number;
      //do stuff	
    }</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>3.2M5

public class A {
  void f(List&lt;? extends Number&gt; x){
    for (Iterator&lt;? extends Number&gt; iter = x.iterator(); iter.hasNext();) {
      Number num = iter.next();
      //do stuff	
    }}
}

This gets converted to something that does not compile.

Expected:
  void f(List&lt;? extends Number&gt; x){
    for (Number number:x){
      Number num = number;
      //do stuff	
    }}

cleanup has the same problem
fixed &gt; 20060227</WithStack>
    <WithOutStack>3.2M5

public class A {
  void f(List&lt;? extends Number&gt; x){
    for (Iterator&lt;? extends Number&gt; iter = x.iterator(); iter.hasNext();) {
      Number num = iter.next();
      //do stuff	
    }}
}

This gets converted to something that does not compile.

Expected:
  void f(List&lt;? extends Number&gt; x){
    for (Number number:x){
      Number num = number;
      //do stuff	
    }}

cleanup has the same problem
fixed &gt; 20060227</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="129505" />
    <CreationDate amount="2006-02-26 18:24:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="Debug" />
    <Version amount="3.1.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>[string variables] ${file_prompt} returns unquoted filename when absolute path contains blanks</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="1">
      <source_code type="class">
        <location start="147" end="287" />
        <code>public class Whatever
{
    public static void main (String []args)
    {
        System.err.println(java.util.Arrays.asList(args));
    }
}</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="2">
      <Enumeration lines="9">
        <Lines>
          <Line>1) Create a small program that prints all of the arguments:</Line>
          <Line />
          <Line />
          <Line />
          <Line>2) Create a Java Application Run configuration (Run As...)</Line>
          <Line />
          <Line>3) In the "arguments" tab, enter ${file_prompt}.</Line>
          <Line />
          <Line>4) Run it. At the file prompt, choose a filename such that the absolute path will contain blanks in it (for example, choose a file D:\testfiles\filename with blank.zip).</Line>
        </Lines>
      </Enumeration>
      <Enumeration lines="3">
        <Lines>
          <Line>1) D:\testfiles\my</Line>
          <Line>2) test</Line>
          <Line>3) file.zip</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="RESOLVED" />
    <resolution amount="WONTFIX" />
    <WithStack>(Not sure I chose the right component... Sorry, BugZilla forced me to. Chose "Core")

1) Create a small program that prints all of the arguments:

public class Whatever
{
    public static void main (String []args)
    {
        System.err.println(java.util.Arrays.asList(args));
    }
}

2) Create a Java Application Run configuration (Run As...)

3) In the "arguments" tab, enter ${file_prompt}.

4) Run it. At the file prompt, choose a filename such that the absolute path will contain blanks in it (for example, choose a file D:\testfiles\filename with blank.zip).

Result: Instead of one argument being passed to the program, 'n' arguments are passed, when 'n' is the number of blank-delimited tokens in the filename. For example, if you chose the file:

D:\testfiles\my test file.zip

Then three arguments will pass to your program:

1) D:\testfiles\my
2) test
3) file.zip

Needs to fix such that the ${file_prompt} token will return a quote-delimited string on Windows platforms.
Move to JDT/Debug
Deferre
As of now 'LATER' and 'REMIND' resolutions are no longer supported.
Please reopen this bug if it is still valid for you.</WithStack>
    <WithOutStack>(Not sure I chose the right component... Sorry, BugZilla forced me to. Chose "Core")

1) Create a small program that prints all of the arguments:

public class Whatever
{
    public static void main (String []args)
    {
        System.err.println(java.util.Arrays.asList(args));
    }
}

2) Create a Java Application Run configuration (Run As...)

3) In the "arguments" tab, enter ${file_prompt}.

4) Run it. At the file prompt, choose a filename such that the absolute path will contain blanks in it (for example, choose a file D:\testfiles\filename with blank.zip).

Result: Instead of one argument being passed to the program, 'n' arguments are passed, when 'n' is the number of blank-delimited tokens in the filename. For example, if you chose the file:

D:\testfiles\my test file.zip

Then three arguments will pass to your program:

1) D:\testfiles\my
2) test
3) file.zip

Needs to fix such that the ${file_prompt} token will return a quote-delimited string on Windows platforms.
Move to JDT/Debug
Deferre
As of now 'LATER' and 'REMIND' resolutions are no longer supported.
Please reopen this bug if it is still valid for you.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="129506" />
    <CreationDate amount="2006-02-26 18:36:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="SWT" />
    <Version amount="3.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>TreeItem unnecessarily redraws all columns on setItemCount / win32</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="3">
      <source_code type="functiondef">
        <location start="463" end="538" />
        <code>void createItem (TreeItem item, int hParent, int hInsertAfter, int hItem) {</code>
      </source_code>
      <source_code type="ifstatement">
        <location start="545" end="1360" />
        <code>if (hItem == 0) {
		/*
		* Bug in Windows.  When a child item is added to a parent item
		* that has no children outside of WM_NOTIFY with control code
		* TVN_ITEMEXPANDED, the tree widget does not redraw the +/-
		* indicator.  The fix is to detect the case when the first
		* child is added to a visible parent item and redraw the parent.
		*/
		if (drawCount == 0 &amp;&amp; OS.IsWindowVisible (handle)) {
			int hChild = OS.SendMessage (handle, OS.TVM_GETNEXTITEM, OS.TVGN_CHILD, hParent);
			if (hChild != 0 &amp;&amp; OS.SendMessage (handle, OS.TVM_GETNEXTITEM, OS.TVGN_NEXT, hChild) == 0) {
				RECT rect = new RECT ();
				rect.left = hParent;
				if (OS.SendMessage (handle, OS.TVM_GETITEMRECT, 0, rect) != 0) {
					OS.InvalidateRect (handle, rect, true);
// this rect is too big.
				}
			}
		}
		updateScrollBar ();
	}</code>
      </source_code>
      <source_code type="functioncall">
        <location start="1469" end="1509" />
        <code>OS.InvalidateRect (handle, rect, false);</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="0" />
    <bug_status amount="NEW" />
    <resolution amount="" />
    <WithStack>When a TreeItem did not previously have a [+/-], the entire row is invalidated and redrawn to reflect this change, causing the entire row to flash.

I would like to request that only the first column of a multi column tree be invalidated (if not more precise).  The [+/-] can not be in any other column, and this change would prevent a lot of redraws/flashing of entire rows in a Tree with many columns that regularly updated child counts.


---
From Tree.java:

void createItem (TreeItem item, int hParent, int hInsertAfter, int hItem) {
...


if (hItem == 0) {
		/*
		* Bug in Windows.  When a child item is added to a parent item
		* that has no children outside of WM_NOTIFY with control code
		* TVN_ITEMEXPANDED, the tree widget does not redraw the +/-
		* indicator.  The fix is to detect the case when the first
		* child is added to a visible parent item and redraw the parent.
		*/
		if (drawCount == 0 &amp;&amp; OS.IsWindowVisible (handle)) {
			int hChild = OS.SendMessage (handle, OS.TVM_GETNEXTITEM, OS.TVGN_CHILD, hParent);
			if (hChild != 0 &amp;&amp; OS.SendMessage (handle, OS.TVM_GETNEXTITEM, OS.TVGN_NEXT, hChild) == 0) {
				RECT rect = new RECT ();
				rect.left = hParent;
				if (OS.SendMessage (handle, OS.TVM_GETITEMRECT, 0, rect) != 0) {
					OS.InvalidateRect (handle, rect, true);
// this rect is too big.
				}
			}
		}
		updateScrollBar ();
	}
Setting bErase to false also prevents the flicker, and the [+/-] seems to still be added/removed properly.

OS.InvalidateRect (handle, rect, false);
                                 ^^^^^
If you write the test case that shows the flash, I will fix it.  Also, the bug may no longer exist in Windows XP, so we might not need the code.  The comment says that the +/- is not redrawn when a child is added outside of the expand listener.

NOTE: Recent changes to fix flashing in clearAll() may hide the redraw, hiding this bug.
I could get it to flash with M5, but not with CVS.  The repainting must be better now.
It will still flash in the non-virtual case.  Please let me know if you are going to write a test case so I don't start doing it.
I only use virtual trees now, so I won't be doing a testcase.
Ok.</WithStack>
    <WithOutStack>When a TreeItem did not previously have a [+/-], the entire row is invalidated and redrawn to reflect this change, causing the entire row to flash.

I would like to request that only the first column of a multi column tree be invalidated (if not more precise).  The [+/-] can not be in any other column, and this change would prevent a lot of redraws/flashing of entire rows in a Tree with many columns that regularly updated child counts.


---
From Tree.java:

void createItem (TreeItem item, int hParent, int hInsertAfter, int hItem) {
...


if (hItem == 0) {
		/*
		* Bug in Windows.  When a child item is added to a parent item
		* that has no children outside of WM_NOTIFY with control code
		* TVN_ITEMEXPANDED, the tree widget does not redraw the +/-
		* indicator.  The fix is to detect the case when the first
		* child is added to a visible parent item and redraw the parent.
		*/
		if (drawCount == 0 &amp;&amp; OS.IsWindowVisible (handle)) {
			int hChild = OS.SendMessage (handle, OS.TVM_GETNEXTITEM, OS.TVGN_CHILD, hParent);
			if (hChild != 0 &amp;&amp; OS.SendMessage (handle, OS.TVM_GETNEXTITEM, OS.TVGN_NEXT, hChild) == 0) {
				RECT rect = new RECT ();
				rect.left = hParent;
				if (OS.SendMessage (handle, OS.TVM_GETITEMRECT, 0, rect) != 0) {
					OS.InvalidateRect (handle, rect, true);
// this rect is too big.
				}
			}
		}
		updateScrollBar ();
	}
Setting bErase to false also prevents the flicker, and the [+/-] seems to still be added/removed properly.

OS.InvalidateRect (handle, rect, false);
                                 ^^^^^
If you write the test case that shows the flash, I will fix it.  Also, the bug may no longer exist in Windows XP, so we might not need the code.  The comment says that the +/- is not redrawn when a child is added outside of the expand listener.

NOTE: Recent changes to fix flashing in clearAll() may hide the redraw, hiding this bug.
I could get it to flash with M5, but not with CVS.  The repainting must be better now.
It will still flash in the non-virtual case.  Please let me know if you are going to write a test case so I don't start doing it.
I only use virtual trees now, so I won't be doing a testcase.
Ok.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="129507" />
    <CreationDate amount="2006-02-26 18:51:00 -0500" />
    <DupId amount="" />
    <classification amount="Tools" />
    <Product amount="CDT" />
    <component amount="cdt-core" />
    <Version amount="4.0.1" />
    <rep_platform amount="PC" />
    <op_sys amount="All" />
    <priority amount="P3" />
    <bug_severity amount="major" />
    <Summery>Build variables of type Path List not handled by indexer if used to specify include dirs</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="1">
      <source_code type="functiondef">
        <location start="0" end="343" />
        <code>The full C/C++ scanner does not understand entries in the include directories list that are themselves calls to macros of type "List of directories". That is, if you add a "List of directories"-type macro named MYINCDIRS on the project's macros tab, add three entries to it (/my/path/1, /my/path/2, /my/path/3) and then if you add ${MYINCDIRS}</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="2">
      <Enumeration lines="9">
        <Lines>
          <Line>1. Window, Preferences, select "[C/C++]/[CDT build variables]"</Line>
          <Line>2. Press [Add], type a name, let it by mypaths for reference</Line>
          <Line>3. Select "Path List" from the Type dropdown</Line>
          <Line>3. Enter two or more paths, confirm dialogs</Line>
          <Line>4. Create a C++ project and open its preferences</Line>
          <Line>5. Select [C/C++ Build]/[Settings]</Line>
          <Line>6. In the inner treebook select [GCC C++ Compiler]/[Directories]</Line>
          <Line>7. Press [Add], type ${mypaths}, confirm the add dialog only</Line>
          <Line>8. Edit the entry you just added and remove auto-inserted quotes</Line>
        </Lines>
      </Enumeration>
      <Enumeration lines="6">
        <Lines>
          <Line>3. Enter two or more paths, confirm dialogs</Line>
          <Line>4. Create a C++ project and open its preferences</Line>
          <Line>5. Select [C/C++ Build]/[Settings]</Line>
          <Line>6. In the inner treebook select [GCC C++ Compiler]/[Directories]</Line>
          <Line>7. Press [Add], type ${mypaths}, confirm the add dialog only</Line>
          <Line>8. Edit the entry you just added and remove auto-inserted quotes</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>The full C/C++ scanner does not understand entries in the include directories list that are themselves calls to macros of type "List of directories". That is, if you add a "List of directories"-type macro named MYINCDIRS on the project's macros tab, add three entries to it (/my/path/1, /my/path/2, /my/path/3) and then if you add ${MYINCDIRS} to the include directories, the scanner will expand ${MYINCDIRS} to a single string consisting space separated paths that comprise MYINCDIRS. This results in warnings like:

Invalid project path: Include path not found (/my/path/1 /my/path/2 /my/path/3)

and the scanner cannot find include files in those locations.

Any workarounds?
(In reply to comment #0)
Does anyone else care? Hard to believe I'm the only one biten by this...

What was perhaps missing in my original report was a detailed instruction how to reproduce the problem. Here it is:

1. Window, Preferences, select "[C/C++]/[CDT build variables]"
2. Press [Add], type a name, let it by mypaths for reference
3. Select "Path List" from the Type dropdown
3. Enter two or more paths, confirm dialogs
4. Create a C++ project and open its preferences
5. Select [C/C++ Build]/[Settings]
6. In the inner treebook select [GCC C++ Compiler]/[Directories]
7. Press [Add], type ${mypaths}, confirm the add dialog only
8. Edit the entry you just added and remove auto-inserted quotes

Now if you select [GCC C++ Compiler] you will see that the command line is generated correctly, i.e. it contains a separate -I switch for each path in mypaths. HOWEVER read carefully: it DOESN'T work correctly for the INDEXER! That's way this bug is assigned to CDT-parser and not to CDT-core.

I am reasssigning this to 4.0.1 because the problem is still present. I am also raising severity to major, as this forces the user to choose between fully working code completion and the more clever project configuration facilities.


I believe this is the New Project Model-related problem rather than a parser one. The problem seems to be that include path entries with string-list variables do not get resolved properly.
I'll have a look.. 

&gt; I believe this is the New Project Model-related problem
&gt; rather than a parser one.

Does this mean that the wrong code is the common code, and the builder uses its own smarter code to enumerate items for the purpose of constructing commands?

&gt; The problem seems to be that include path entries with
&gt; string-list variables do not get resolved properly.

... and neither do the -D entries.


reassigning to Oleg..

Fixed.</WithStack>
    <WithOutStack>The full C/C++ scanner does not understand entries in the include directories list that are themselves calls to macros of type "List of directories". That is, if you add a "List of directories"-type macro named MYINCDIRS on the project's macros tab, add three entries to it (/my/path/1, /my/path/2, /my/path/3) and then if you add ${MYINCDIRS} to the include directories, the scanner will expand ${MYINCDIRS} to a single string consisting space separated paths that comprise MYINCDIRS. This results in warnings like:

Invalid project path: Include path not found (/my/path/1 /my/path/2 /my/path/3)

and the scanner cannot find include files in those locations.

Any workarounds?
(In reply to comment #0)
Does anyone else care? Hard to believe I'm the only one biten by this...

What was perhaps missing in my original report was a detailed instruction how to reproduce the problem. Here it is:

1. Window, Preferences, select "[C/C++]/[CDT build variables]"
2. Press [Add], type a name, let it by mypaths for reference
3. Select "Path List" from the Type dropdown
3. Enter two or more paths, confirm dialogs
4. Create a C++ project and open its preferences
5. Select [C/C++ Build]/[Settings]
6. In the inner treebook select [GCC C++ Compiler]/[Directories]
7. Press [Add], type ${mypaths}, confirm the add dialog only
8. Edit the entry you just added and remove auto-inserted quotes

Now if you select [GCC C++ Compiler] you will see that the command line is generated correctly, i.e. it contains a separate -I switch for each path in mypaths. HOWEVER read carefully: it DOESN'T work correctly for the INDEXER! That's way this bug is assigned to CDT-parser and not to CDT-core.

I am reasssigning this to 4.0.1 because the problem is still present. I am also raising severity to major, as this forces the user to choose between fully working code completion and the more clever project configuration facilities.


I believe this is the New Project Model-related problem rather than a parser one. The problem seems to be that include path entries with string-list variables do not get resolved properly.
I'll have a look.. 

&gt; I believe this is the New Project Model-related problem
&gt; rather than a parser one.

Does this mean that the wrong code is the common code, and the builder uses its own smarter code to enumerate items for the purpose of constructing commands?

&gt; The problem seems to be that include path entries with
&gt; string-list variables do not get resolved properly.

... and neither do the -D entries.


reassigning to Oleg..

Fixed.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="129508" />
    <CreationDate amount="2006-02-26 18:54:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="JDT" />
    <component amount="UI" />
    <Version amount="3.1" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>[quick assist] convert to enhanced for should not be applicable sometimes</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="3">
      <source_code type="functiondef">
        <location start="46" end="229" />
        <code>for (Iterator&lt;Integer&gt; iter = removed.iterator(); iter.hasNext();) {
        Integer id = iter.next();
        //do stuff
        iter.remove(); //after convert this is broken
   }</code>
      </source_code>
      <source_code type="functiondef">
        <location start="241" end="436" />
        <code>for (Iterator&lt;Integer&gt; iter = removed.iterator(); iter.hasNext();) {
        Integer id = iter.next();
        //do stuff
        boolean x= iter.hasNext(); //after convert this is broken
   }</code>
      </source_code>
      <source_code type="functiondef">
        <location start="697" end="841" />
        <code>for (Iterator&lt;Integer&gt; iter = removed.iterator(); iter.hasNext();) {
        Integer id = iter.next();
        Integer id2= iter.next();
   }</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>3.2M5

convert should not be applicable here

   for (Iterator&lt;Integer&gt; iter = removed.iterator(); iter.hasNext();) {
        Integer id = iter.next();
        //do stuff
        iter.remove(); //after convert this is broken
   } 

or here

   for (Iterator&lt;Integer&gt; iter = removed.iterator(); iter.hasNext();) {
        Integer id = iter.next();
        //do stuff
        boolean x= iter.hasNext(); //after convert this is broken
   } 

in general, whenever the iterator is used for anything else than the next() call, the conversion should be disabled.

It's quite annoying to have to go back and fix those problems (revert to old code) after I just did clean up.
fixed &gt; I20060301-0800

Also:
   for (Iterator&lt;Integer&gt; iter = removed.iterator(); iter.hasNext();) {
        Integer id = iter.next();
        Integer id2= iter.next();
   }</WithStack>
    <WithOutStack>3.2M5

convert should not be applicable here

   for (Iterator&lt;Integer&gt; iter = removed.iterator(); iter.hasNext();) {
        Integer id = iter.next();
        //do stuff
        iter.remove(); //after convert this is broken
   } 

or here

   for (Iterator&lt;Integer&gt; iter = removed.iterator(); iter.hasNext();) {
        Integer id = iter.next();
        //do stuff
        boolean x= iter.hasNext(); //after convert this is broken
   } 

in general, whenever the iterator is used for anything else than the next() call, the conversion should be disabled.

It's quite annoying to have to go back and fix those problems (revert to old code) after I just did clean up.
fixed &gt; I20060301-0800

Also:
   for (Iterator&lt;Integer&gt; iter = removed.iterator(); iter.hasNext();) {
        Integer id = iter.next();
        Integer id2= iter.next();
   }</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="129509" />
    <CreationDate amount="2006-02-26 19:02:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="SWT" />
    <Version amount="3.1.1" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="trivial" />
    <Summery>EventTable.sendEvent minor performance note</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="6">
      <source_code type="assignment">
        <location start="177" end="206" />
        <code>if (types == null) return;</code>
      </source_code>
      <source_code type="functiondef">
        <location start="214" end="227" />
        <code>for( n ) {</code>
      </source_code>
      <source_code type="assignment">
        <location start="228" end="269" />
        <code>if (event.type == SWT.None) return;</code>
      </source_code>
      <source_code type="assignment">
        <location start="277" end="349" />
        <code>if (types == null || event == null || event.type == SWT.None) return;</code>
      </source_code>
      <source_code type="assignment">
        <location start="424" end="479" />
        <code>if (listener != null ) listener.handleEvent (event);</code>
      </source_code>
      <source_code type="ifstatement">
        <location start="507" end="565" />
        <code>if (nullHits &gt; 0) { run level sensitive compact logic }</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="WONTFIX" />
    <WithStack>org.eclipse.widgets.EventTable (org.eclipse.swt.win32.x86_3.1.1.jar)
  public void EventTable.sendEvent (Event event)

Move SWT.None test to head of function; e.g., instead of

   if (types == null) return;
   ...
   for( n ) {
      if (event.type == SWT.None) return;

test

   if (types == null || event == null || event.type == SWT.None) return;

Also, maybe a hit counter would be useful for compaction; e.g., 

   ...
   if (listener != null ) listener.handleEvent (event);
   else nullHits++;
   ...
   if (nullHits &gt; 0) { run level sensitive compact logic }

The compiler may optimize existing logic - not sure.
Can't do it.  Application code can change the event type field to SWT.None during the processing of the events.</WithStack>
    <WithOutStack>org.eclipse.widgets.EventTable (org.eclipse.swt.win32.x86_3.1.1.jar)
  public void EventTable.sendEvent (Event event)

Move SWT.None test to head of function; e.g., instead of

   if (types == null) return;
   ...
   for( n ) {
      if (event.type == SWT.None) return;

test

   if (types == null || event == null || event.type == SWT.None) return;

Also, maybe a hit counter would be useful for compaction; e.g., 

   ...
   if (listener != null ) listener.handleEvent (event);
   else nullHits++;
   ...
   if (nullHits &gt; 0) { run level sensitive compact logic }

The compiler may optimize existing logic - not sure.
Can't do it.  Application code can change the event type field to SWT.None during the processing of the events.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="129510" />
    <CreationDate amount="2006-02-26 19:11:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="JDT" />
    <component amount="UI" />
    <Version amount="3.1" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>[preferences] autoboxing is a style issue, not a "potential programming error"</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="WONTFIX" />
    <WithStack>3.2M5

Boxing and unboxing conversions are not potential programming errors.
They're legitimate language features and their usage should be treated so in the ui. Please move the option to "code style".

I'd like to be able to select everything in the "potential errors" to "error".

(BTW, if anything, "parameter assignment" should be moved to "potential errors" - but there are also others in the code style tab - e.g., who'd treat method with constructor name as a question of style? It's a plain bug smell)
Philippe, do you have an opinion here? If we do changes, we have to coordinate it so that the marker attribute is in sync with the UI.

The line between 'potential programming errors' and 'code style' is thin and also  a personal preference.
I don't really see a potential problem on parameter assignment. Except if you're a Java novice, but I think that's not our main audience here.
Method with constructor name is clearly a style issue, nothing else.

I guess the unboxing could be go to style, but I was more thinking about the cases where you wouldn't expect boxing to happen, e.g. when you're using == and you're not aware that boxing occurred. See bug 82209 for this; in fact I would rather prefer a new option for this.
I guess a 'performance' section would be better suited for this option.
I would agree with Adam. To me, this is the same sort of notice as inner-emulation to non visible enclosing constructs (which isn't a bug per se, but a useful indication in case you care about performance).
I am flexible here, even on other ones mentionned by Adam. Please enter a defect in JDT/Core once decided, so that problem categories are aligned as well.

We should refrain from changing everything, since users have developped some expectations over time about where to locate some diagnostic (and it would be misleading for them to need to look elsewhere).
no changes planed</WithStack>
    <WithOutStack>3.2M5

Boxing and unboxing conversions are not potential programming errors.
They're legitimate language features and their usage should be treated so in the ui. Please move the option to "code style".

I'd like to be able to select everything in the "potential errors" to "error".

(BTW, if anything, "parameter assignment" should be moved to "potential errors" - but there are also others in the code style tab - e.g., who'd treat method with constructor name as a question of style? It's a plain bug smell)
Philippe, do you have an opinion here? If we do changes, we have to coordinate it so that the marker attribute is in sync with the UI.

The line between 'potential programming errors' and 'code style' is thin and also  a personal preference.
I don't really see a potential problem on parameter assignment. Except if you're a Java novice, but I think that's not our main audience here.
Method with constructor name is clearly a style issue, nothing else.

I guess the unboxing could be go to style, but I was more thinking about the cases where you wouldn't expect boxing to happen, e.g. when you're using == and you're not aware that boxing occurred. See bug 82209 for this; in fact I would rather prefer a new option for this.
I guess a 'performance' section would be better suited for this option.
I would agree with Adam. To me, this is the same sort of notice as inner-emulation to non visible enclosing constructs (which isn't a bug per se, but a useful indication in case you care about performance).
I am flexible here, even on other ones mentionned by Adam. Please enter a defect in JDT/Core once decided, so that problem categories are aligned as well.

We should refrain from changing everything, since users have developped some expectations over time about where to locate some diagnostic (and it would be misleading for them to need to look elsewhere).
no changes planed</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="129511" />
    <CreationDate amount="2006-02-26 21:35:00 -0500" />
    <DupId amount="" />
    <classification amount="Mylyn" />
    <Product amount="Mylyn" />
    <component amount="UI" />
    <Version amount="0.4" />
    <rep_platform amount="All" />
    <op_sys amount="All" />
    <priority amount="P1" />
    <bug_severity amount="enhancement" />
    <Summery>Smarter sorting by task description</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="1">
      <source_code type="functiondef">
        <location start="1324" end="1484" />
        <code>Also, I think that precaution on m.find() in TaskKeyComparator.split() method should never happend. In worst case pattern suppose to return {null, null, string}</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>When clicking on description column Mylar sorts tasks alphabetically, which does not reflect real task order in case of bugzilla or jira reports since issue keys/ids aren't sorted alphabetically. Eg. bugzilla issue "8" is placed afeter issue "1000". It would be nice if issues are sorted by their ids numerically.
Created attachment 35383
Smart comarator for description column
Created attachment 35384
Test case for smart comparator
That's a useful fix Eugene, thanks for contributing it!  And especiall for the test.  The class is now: org.eclipse.mylar.internal.tasklist.ui.views.TaskKeyComparator (formatting and name change only)

Note that I restructured the test (now TaskKeyComparatorTest) so that it made all the assertions that you put in rather than making each a new instance of a test.  This made it easier to integrate into our suite, shortened the code, and those checks were more in line with assertions, although your code for making them tests was neat.  Check it out to ensure it's not missing anything you wanted there.
Thanks Mik. Glad you find that useful.

The reason I did testing that way is to see all the failures rather then fail on first one like it is now and it wouldn't be a problem to integrate my original test because you could just use:

  suite.addTest(TaskKeyComparatorTest.suite()); 

Also, I think that precaution on m.find() in TaskKeyComparator.split() method should never happend. In worst case pattern suppose to return {null, null, string}, but I can't find such a test case. However if it ever happend then it would be better to have there:

  return new String[] { null, null, s };

to meet expectations of the compare() method. Please fix this just in case.

I also noticed that you made pattern field non static. Any reason why it can't be static?
Ah, that is an interesting way of ensuring that you don't fail on the first assertion, I've wondered if that should be a JUnit option.  But when this is part of out suite I prefer the simplicity of just using the assertions.

I added the fix to split().

Regarding pattern being non-static, thanks for catching that, I had removed static when it was nested in a static inner class and neglected to re-add it when I pulled it out.  Since we currently don't support changing patterns I now changed it to final for now as well.
(In reply to comment #5)
&gt; Ah, that is an interesting way of ensuring that you don't fail on the first
&gt; assertion, I've wondered if that should be a JUnit option.  But when this is
&gt; part of out suite I prefer the simplicity of just using the assertions.

  It IS junit feature. You not suppose to have multiple assertions per test method. At least not assertions on different test cases (test data).

  Well, they could of collect all the assertions bfore method end (and that could be fixed with simple AspectJ advice), but then you would need a way t fail (e.g. on precautions / preconditions checking). So, I guess for simplicity reasons and also to structurize tests better. 
  
  There is anoher option to implement data-driven tests, maybe less verbose...

Btw, do you know of any reasonable style guide for writing JUnit tests?  I've been writing many assertions per test for ages, but yes, typically each test with it's own set of data.
Wrong assignment (btw Eugene, if you ever take on fixing something assign the report to yourself).
I thought we have done with this while ago... or you just trying to collect some stats for committers votings? :)
Good guess, no, I'm getting the Team page up and am experimenting with including the contributors' resolved reports in order to help promote contribution and meritocracy, check it out:

http://www.eclipse.org/mylar/sandbox/team.php</WithStack>
    <WithOutStack>When clicking on description column Mylar sorts tasks alphabetically, which does not reflect real task order in case of bugzilla or jira reports since issue keys/ids aren't sorted alphabetically. Eg. bugzilla issue "8" is placed afeter issue "1000". It would be nice if issues are sorted by their ids numerically.
Created attachment 35383
Smart comarator for description column
Created attachment 35384
Test case for smart comparator
That's a useful fix Eugene, thanks for contributing it!  And especiall for the test.  The class is now: org.eclipse.mylar.internal.tasklist.ui.views.TaskKeyComparator (formatting and name change only)

Note that I restructured the test (now TaskKeyComparatorTest) so that it made all the assertions that you put in rather than making each a new instance of a test.  This made it easier to integrate into our suite, shortened the code, and those checks were more in line with assertions, although your code for making them tests was neat.  Check it out to ensure it's not missing anything you wanted there.
Thanks Mik. Glad you find that useful.

The reason I did testing that way is to see all the failures rather then fail on first one like it is now and it wouldn't be a problem to integrate my original test because you could just use:

  suite.addTest(TaskKeyComparatorTest.suite()); 

Also, I think that precaution on m.find() in TaskKeyComparator.split() method should never happend. In worst case pattern suppose to return {null, null, string}, but I can't find such a test case. However if it ever happend then it would be better to have there:

  return new String[] { null, null, s };

to meet expectations of the compare() method. Please fix this just in case.

I also noticed that you made pattern field non static. Any reason why it can't be static?
Ah, that is an interesting way of ensuring that you don't fail on the first assertion, I've wondered if that should be a JUnit option.  But when this is part of out suite I prefer the simplicity of just using the assertions.

I added the fix to split().

Regarding pattern being non-static, thanks for catching that, I had removed static when it was nested in a static inner class and neglected to re-add it when I pulled it out.  Since we currently don't support changing patterns I now changed it to final for now as well.
(In reply to comment #5)
&gt; Ah, that is an interesting way of ensuring that you don't fail on the first
&gt; assertion, I've wondered if that should be a JUnit option.  But when this is
&gt; part of out suite I prefer the simplicity of just using the assertions.

  It IS junit feature. You not suppose to have multiple assertions per test method. At least not assertions on different test cases (test data).

  Well, they could of collect all the assertions bfore method end (and that could be fixed with simple AspectJ advice), but then you would need a way t fail (e.g. on precautions / preconditions checking). So, I guess for simplicity reasons and also to structurize tests better. 
  
  There is anoher option to implement data-driven tests, maybe less verbose...

Btw, do you know of any reasonable style guide for writing JUnit tests?  I've been writing many assertions per test for ages, but yes, typically each test with it's own set of data.
Wrong assignment (btw Eugene, if you ever take on fixing something assign the report to yourself).
I thought we have done with this while ago... or you just trying to collect some stats for committers votings? :)
Good guess, no, I'm getting the Team page up and am experimenting with including the contributors' resolved reports in order to help promote contribution and meritocracy, check it out:

http://www.eclipse.org/mylar/sandbox/team.php</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="129512" />
    <CreationDate amount="2006-02-26 21:47:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="User Assistance" />
    <Version amount="3.0.1" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>[Webapp] Search Scope window can not be resized</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>When I'm going to creat a search scope, "Select Search Scope" window and "New Search List" window pop up. The UI is not good in some scenario, but I find that all of this secondary window are not resizable!
The two dialogs used to set the search scope are now resizeable.</WithStack>
    <WithOutStack>When I'm going to creat a search scope, "Select Search Scope" window and "New Search List" window pop up. The UI is not good in some scenario, but I find that all of this secondary window are not resizable!
The two dialogs used to set the search scope are now resizeable.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="129513" />
    <CreationDate amount="2006-02-26 22:29:00 -0500" />
    <DupId amount="90971" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="UI" />
    <Version amount="3.2" />
    <rep_platform amount="Macintosh" />
    <op_sys amount="Mac OS X - Carbon (unsup.)" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Key Assist column too narrow to display key sequence</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="DUPLICATE" />
    <WithStack>From the menu, select Help/Key Assist...

In the popup that appears in the lower right, the second column is too narrow to display the key sequence for the command.  I see about one half of the first character (see screenshot).

With 3.1.0, the "key sequence" column is completely visible.

Test performed with 3.2 M5 on Mac OS X 10.4.4.
Created attachment 35387
too-narrow column


*** This bug has been marked as a duplicate of 90971 ***
Changing OS from Mac OS to Mac OS X as per bug 185991</WithStack>
    <WithOutStack>From the menu, select Help/Key Assist...

In the popup that appears in the lower right, the second column is too narrow to display the key sequence for the command.  I see about one half of the first character (see screenshot).

With 3.1.0, the "key sequence" column is completely visible.

Test performed with 3.2 M5 on Mac OS X 10.4.4.
Created attachment 35387
too-narrow column


*** This bug has been marked as a duplicate of 90971 ***
Changing OS from Mac OS to Mac OS X as per bug 185991</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="129514" />
    <CreationDate amount="2006-02-26 22:32:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="Releng" />
    <Version amount="3.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="enhancement" />
    <Summery>Unpack org.eclipse.ui.intro.universal</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>The new plug-in 'org.eclipse.ui.intro.universal' contains graphics that Intro needs to access unpacked. Unless we deliver it unpacked to begin with, it will cause initial performance hit and double the footprint (because we will have useless images in the JAR and copies in the unpacked area).

Let me know when you make this change so that I can make modifications in build.properties in time for the Tuesday I build.
The change has been made.
See - now I gave you an entire day more than before :-).</WithStack>
    <WithOutStack>The new plug-in 'org.eclipse.ui.intro.universal' contains graphics that Intro needs to access unpacked. Unless we deliver it unpacked to begin with, it will cause initial performance hit and double the footprint (because we will have useless images in the JAR and copies in the unpacked area).

Let me know when you make this change so that I can make modifications in build.properties in time for the Tuesday I build.
The change has been made.
See - now I gave you an entire day more than before :-).</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="129515" />
    <CreationDate amount="2006-02-26 23:38:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="JDT" />
    <component amount="Text" />
    <Version amount="3.2" />
    <rep_platform amount="All" />
    <op_sys amount="All" />
    <priority amount="P3" />
    <bug_severity amount="enhancement" />
    <Summery>Identation of arrays</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="3">
      <Enumeration lines="6">
        <Lines>
          <Line>a. while entering the array</Line>
          <Line>int[] i= {|press enter here</Line>
          <Line>b. when using format</Line>
          <Line>select range and use 'Source &gt; Format'</Line>
          <Line>c. when using 'correct indendation'</Line>
          <Line>select range and use 'Source &gt; Correct Indendation'</Line>
        </Lines>
      </Enumeration>
      <Enumeration lines="4">
        <Lines>
          <Line>1. I start the array, String[] strs = {| press enter at the pipe</Line>
          <Line>2. Cursor moves down one line and indents with 8 spaces.</Line>
          <Line>3. Eclipse places a closing brace below the cursor line.</Line>
          <Line>4. If I add a string and press enter, it adds a line and starts at 8 spaces again.</Line>
        </Lines>
      </Enumeration>
      <Enumeration lines="2">
        <Lines>
          <Line>- Source-&gt; Format - places the string constants on the same line.</Line>
          <Line>- Source-&gt; Correct Indentation - does nothing correctly by default or configuration.</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="RESOLVED" />
    <resolution amount="INVALID" />
    <WithStack>For convenience, when defining an array with constants,
it would be nice to have the block indent each item correctly and independently.  

for instance:
String[] strs = { 
    "Eclipse is so awesome",
    "(and so is Java!)",           
    "I watch too much law and order" 		
};

Thanks!

Punting to the JDT team since this is a code formatting issue. Feel free to punt back if there's a more appropriate location (I'm new to the triage work...;-).


This should already work:

a. while entering the array
     int[] i= {|press enter here
b. when using format
     select range and use 'Source &gt; Format'
c. when using 'correct indendation'
     select range and use 'Source &gt; Correct Indendation'

Did you find a bug or do you want a different feature?

Moving to jdt.text
Works for me using I20060228-1207. Please provide more detailed steps if it does not work for you using said build.
Nope, it's still not working for me.
I'm using M20060118-1600 version 3.1.2

1. I start the array, String[] strs = {| press enter at the pipe
2. Cursor moves down one line and indents with 8 spaces.
3. Eclipse places a closing brace below the cursor line.
4. If I add a string and press enter, it adds a line and starts at 8 spaces again.

It should be at 4 spaces in.

- Source-&gt; Format - places the string constants on the same line.
- Source-&gt; Correct Indentation - does nothing correctly by default or configuration.

Basically I want the text inside an "array initializer" to be treated as a "blocked code".  That way, we can have multi-line array initializers that are either comma'ed on one line, all on one line, or line by line.

Here is an image that shows how it indents on my build.  Notice the array init is at 8 spaces in (2 tabs), instead of the code block example (the for loop), which correctly uses 4 spaces (1 tab).

http://www.ivanlazarte.com/offsite/array-inits-not-blocked.gif

Let me know if I misunderstood your directions!  Thanks for looking at this.
Is your formatter correctly setup? Plase attach your formater preferences.
If I understand correctly, your problem is that arrays are double indented and you want just a single indent.

This can be configured on the "Line Wrapping" tab of the formatter profile: Set the value of "Default indentation for array initializers" to 1. AFAIR, the Java conventions state that a double indent should be used for initializers and continued lines.
Chalk this one up to user error.

Sorry guys, you were absolutely right, I just wasn't aware of that setting.
After changing the setting, it worked beautifully.

Thanks for all the help!
Get rid of deprecated state.
.</WithStack>
    <WithOutStack>For convenience, when defining an array with constants,
it would be nice to have the block indent each item correctly and independently.  

for instance:
String[] strs = { 
    "Eclipse is so awesome",
    "(and so is Java!)",           
    "I watch too much law and order" 		
};

Thanks!

Punting to the JDT team since this is a code formatting issue. Feel free to punt back if there's a more appropriate location (I'm new to the triage work...;-).


This should already work:

a. while entering the array
     int[] i= {|press enter here
b. when using format
     select range and use 'Source &gt; Format'
c. when using 'correct indendation'
     select range and use 'Source &gt; Correct Indendation'

Did you find a bug or do you want a different feature?

Moving to jdt.text
Works for me using I20060228-1207. Please provide more detailed steps if it does not work for you using said build.
Nope, it's still not working for me.
I'm using M20060118-1600 version 3.1.2

1. I start the array, String[] strs = {| press enter at the pipe
2. Cursor moves down one line and indents with 8 spaces.
3. Eclipse places a closing brace below the cursor line.
4. If I add a string and press enter, it adds a line and starts at 8 spaces again.

It should be at 4 spaces in.

- Source-&gt; Format - places the string constants on the same line.
- Source-&gt; Correct Indentation - does nothing correctly by default or configuration.

Basically I want the text inside an "array initializer" to be treated as a "blocked code".  That way, we can have multi-line array initializers that are either comma'ed on one line, all on one line, or line by line.

Here is an image that shows how it indents on my build.  Notice the array init is at 8 spaces in (2 tabs), instead of the code block example (the for loop), which correctly uses 4 spaces (1 tab).

http://www.ivanlazarte.com/offsite/array-inits-not-blocked.gif

Let me know if I misunderstood your directions!  Thanks for looking at this.
Is your formatter correctly setup? Plase attach your formater preferences.
If I understand correctly, your problem is that arrays are double indented and you want just a single indent.

This can be configured on the "Line Wrapping" tab of the formatter profile: Set the value of "Default indentation for array initializers" to 1. AFAIR, the Java conventions state that a double indent should be used for initializers and continued lines.
Chalk this one up to user error.

Sorry guys, you were absolutely right, I just wasn't aware of that setting.
After changing the setting, it worked beautifully.

Thanks for all the help!
Get rid of deprecated state.
.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="129516" />
    <CreationDate amount="2006-02-26 23:52:00 -0500" />
    <DupId amount="" />
    <classification amount="BIRT" />
    <Product amount="BIRT" />
    <component amount="Report Designer" />
    <Version amount="2.0.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P1" />
    <bug_severity amount="blocker" />
    <Summery>org.eclipse.birt.report.designer.ui.lib and org.eclipse.birt.report.designer.ui.lib.explorer compile failed in daily build 20060226</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>org.eclipse.birt.report.designer.ui.lib and org.eclipse.birt.report.designer.ui.lib.explorer compile failed in daily build 20060226. Please see attached.
Created attachment 35388
log of ui.lib
Created attachment 35389
log of ui.lib.explorer
Fix 20060226 daily build
Fixed. Verified in daily build 20060228.</WithStack>
    <WithOutStack>org.eclipse.birt.report.designer.ui.lib and org.eclipse.birt.report.designer.ui.lib.explorer compile failed in daily build 20060226. Please see attached.
Created attachment 35388
log of ui.lib
Created attachment 35389
log of ui.lib.explorer
Fix 20060226 daily build
Fixed. Verified in daily build 20060228.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="129517" />
    <CreationDate amount="2006-02-27 00:04:00 -0500" />
    <DupId amount="95634" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="UI" />
    <Version amount="3.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>[Markers] Broken mouse rollover in Problems view</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="DUPLICATE" />
    <WithStack>Since Problems view got groupping feature mouse rollover is not being shown in any cell of its table and it is actually huge inconvenience and regression from the old functionality.

Actually description column (thich I suppose is a tree widget now) shows rollover popup in case if description is wider then th whole view width, but it should be shown if it is wider then cell width.
Sounds like a dup of bug 95634.

Interesting observation that tooltip shows up for the first column if tree is narrower than column.

Tod, FYI I don't see any ToolTips at all (even when not 'grouping' problems).

This is because we have switched to a Tree in 3.2.

*** This bug has been marked as a duplicate of 95634 ***</WithStack>
    <WithOutStack>Since Problems view got groupping feature mouse rollover is not being shown in any cell of its table and it is actually huge inconvenience and regression from the old functionality.

Actually description column (thich I suppose is a tree widget now) shows rollover popup in case if description is wider then th whole view width, but it should be shown if it is wider then cell width.
Sounds like a dup of bug 95634.

Interesting observation that tooltip shows up for the first column if tree is narrower than column.

Tod, FYI I don't see any ToolTips at all (even when not 'grouping' problems).

This is because we have switched to a Tree in 3.2.

*** This bug has been marked as a duplicate of 95634 ***</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="129518" />
    <CreationDate amount="2006-02-27 00:12:00 -0500" />
    <DupId amount="" />
    <classification amount="BIRT" />
    <Product amount="BIRT" />
    <component amount="Data" />
    <Version amount="2.0.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="major" />
    <Summery>The cost time of retrieving the data is unacceptable when set the URL as xml source</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="3">
        <Lines>
          <Line>1. new a report</Line>
          <Line>2. new a datasource base on XML file, and use the URL to locate the XML file</Line>
          <Line>3. set the related table mapping and column mapping, and preview the data.</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="CLOSED" />
    <resolution amount="INVALID" />
    <WithStack>Description:
  The time for retrieving the data is unacceptable when set the URL as xml source。

steps to reproduce:
   1. new a report
   2. new a datasource base on XML file, and use the URL to locate the XML file
   3. set the related table mapping and column mapping, and preview the data.

Actual result:
  It will take two more than minutes to retrieve the data.

Expect result:
  It will take less time. 

Note:
  When the XML file has larger data, the cost and efficiency of retrieving data should be considered.
Created attachment 35459
the XML file- Data source file
Cannot reproduce the bug.I've tried retrieve several xml files from internet and all of them work properly.

It seems that the source of problem is the http server the bug reporter used. It sometimes block a http request.

Closed</WithStack>
    <WithOutStack>Description:
  The time for retrieving the data is unacceptable when set the URL as xml source。

steps to reproduce:
   1. new a report
   2. new a datasource base on XML file, and use the URL to locate the XML file
   3. set the related table mapping and column mapping, and preview the data.

Actual result:
  It will take two more than minutes to retrieve the data.

Expect result:
  It will take less time. 

Note:
  When the XML file has larger data, the cost and efficiency of retrieving data should be considered.
Created attachment 35459
the XML file- Data source file
Cannot reproduce the bug.I've tried retrieve several xml files from internet and all of them work properly.

It seems that the source of problem is the http server the bug reporter used. It sometimes block a http request.

Closed</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="129519" />
    <CreationDate amount="2006-02-27 00:28:00 -0500" />
    <DupId amount="" />
    <classification amount="Tools" />
    <Product amount="TPTP Profiling" />
    <component amount="Platform.UI" />
    <Version amount="4.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="critical" />
    <Summery>Missing UI Examples</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="INVALID" />
    <WithStack>Build:  TPTP-4.2.0-200602262249

The UI examples that would normally be displayed under File &gt; New &gt; Example are missing.
The UI examples are all moved and packaged in SDK build only as they are intended for ISV and not user.
As of TPTP 4.6.0, TPTP is in maintenance mode and focusing on improving quality by resolving relevant enhancements/defects and increasing test coverage through test creation, automation, Build Verification Tests (BVTs), and expanded run-time execution. As part of the TPTP Bugzilla housecleaning process (see http://wiki.eclipse.org/Bugzilla_Housecleaning_Processes), this enhancement/defect is verified/closed by the Project Lead since this enhancement/defect has been resolved and unverified for more than 1 year and considered to be fixed. If this enhancement/defect is still unresolved and reproducible in the latest TPTP release (http://www.eclipse.org/tptp/home/downloads/), please re-open.
As of TPTP 4.6.0, TPTP is in maintenance mode and focusing on improving quality by resolving relevant enhancements/defects and increasing test coverage through test creation, automation, Build Verification Tests (BVTs), and expanded run-time execution. As part of the TPTP Bugzilla housecleaning process (see http://wiki.eclipse.org/Bugzilla_Housecleaning_Processes), this enhancement/defect is verified/closed by the Project Lead since this enhancement/defect has been resolved and unverified for more than 1 year and considered to be fixed. If this enhancement/defect is still unresolved and reproducible in the latest TPTP release (http://www.eclipse.org/tptp/home/downloads/), please re-open.</WithStack>
    <WithOutStack>Build:  TPTP-4.2.0-200602262249

The UI examples that would normally be displayed under File &gt; New &gt; Example are missing.
The UI examples are all moved and packaged in SDK build only as they are intended for ISV and not user.
As of TPTP 4.6.0, TPTP is in maintenance mode and focusing on improving quality by resolving relevant enhancements/defects and increasing test coverage through test creation, automation, Build Verification Tests (BVTs), and expanded run-time execution. As part of the TPTP Bugzilla housecleaning process (see http://wiki.eclipse.org/Bugzilla_Housecleaning_Processes), this enhancement/defect is verified/closed by the Project Lead since this enhancement/defect has been resolved and unverified for more than 1 year and considered to be fixed. If this enhancement/defect is still unresolved and reproducible in the latest TPTP release (http://www.eclipse.org/tptp/home/downloads/), please re-open.
As of TPTP 4.6.0, TPTP is in maintenance mode and focusing on improving quality by resolving relevant enhancements/defects and increasing test coverage through test creation, automation, Build Verification Tests (BVTs), and expanded run-time execution. As part of the TPTP Bugzilla housecleaning process (see http://wiki.eclipse.org/Bugzilla_Housecleaning_Processes), this enhancement/defect is verified/closed by the Project Lead since this enhancement/defect has been resolved and unverified for more than 1 year and considered to be fixed. If this enhancement/defect is still unresolved and reproducible in the latest TPTP release (http://www.eclipse.org/tptp/home/downloads/), please re-open.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="129520" />
    <CreationDate amount="2006-02-27 00:37:00 -0500" />
    <DupId amount="106458" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="SWT" />
    <Version amount="3.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Linux" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>org.eclipse.swt.dnd.Clipboard.getContents hangs</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="2">
      <Enumeration lines="10">
        <Lines>
          <Line>- org.eclipse.swt.internal.gtk.OS._gtk_clipboard_wait_for_contents(int, int)</Line>
          <Line>(Interpreted frame)</Line>
          <Line>- org.eclipse.swt.internal.gtk.OS.gtk_clipboard_wait_for_contents(int, int)</Line>
          <Line>@bci=9, line=3695 (Interpreted frame)</Line>
          <Line>- org.eclipse.swt.dnd.Clipboard.gtk_clipboard_wait_for_contents(int, int)</Line>
          <Line>@bci=41, line=613 (Interpreted frame)</Line>
          <Line>- org.eclipse.swt.dnd.Clipboard.getContents(org.eclipse.swt.dnd.Transfer, int)</Line>
          <Line>@bci=41, line=289 (Interpreted frame)</Line>
          <Line>- org.eclipse.swt.dnd.Clipboard.getContents(org.eclipse.swt.dnd.Transfer)</Line>
          <Line>@bci=3, line=236 (Interpreted frame)</Line>
        </Lines>
      </Enumeration>
      <Enumeration lines="44">
        <Lines>
          <Line>- org.eclipse.swt.internal.gtk.OS._gtk_clipboard_wait_for_contents(int, int) (Interpreted frame)</Line>
          <Line>- org.eclipse.swt.internal.gtk.OS.gtk_clipboard_wait_for_contents(int, int) @bci=9, line=3785 (Interpreted frame)</Line>
          <Line>- org.eclipse.swt.dnd.Clipboard.gtk_clipboard_wait_for_contents(int, int) @bci=41, line=613 (Interpreted frame)</Line>
          <Line>- org.eclipse.swt.dnd.Clipboard.getContents(org.eclipse.swt.dnd.Transfer, int) @bci=41, line=289 (Interpreted frame)</Line>
          <Line>- org.eclipse.swt.dnd.Clipboard.getContents(org.eclipse.swt.dnd.Transfer) @bci=3, line=236 (Interpreted frame)</Line>
          <Line>- org.eclipse.ui.views.navigator.PasteAction$1.run() @bci=17, line=186 (Interpreted frame)</Line>
          <Line>- org.eclipse.swt.widgets.Synchronizer.syncExec(java.lang.Runnable) @bci=15, line=152 (Interpreted frame)</Line>
          <Line>- org.eclipse.ui.internal.UISynchronizer.syncExec(java.lang.Runnable) @bci=26, line=28 (Compiled frame)</Line>
          <Line>- org.eclipse.swt.widgets.Display.syncExec(java.lang.Runnable) @bci=18, line=3714 (Compiled frame)</Line>
          <Line>- org.eclipse.ui.actions.BaseSelectionListenerAction.selectionChanged(org.eclipse.jface.viewers.IStructuredSelection) @bci=25, line=124 (Interpreted frame)</Line>
          <Line>- org.eclipse.ui.views.navigator.RefactorActionGroup.updateActionBars() @bci=24, line=154 (Interpreted frame)</Line>
          <Line>- org.eclipse.ui.views.navigator.MainActionGroup.updateActionBars() @bci=67, line=316 (Interpreted frame)</Line>
          <Line>- org.eclipse.ui.views.navigator.ResourceNavigator.updateActionBars(org.eclipse.jface.viewers.IStructuredSelection) @bci=22, line=1253 (Interpreted frame)</Line>
          <Line>- org.eclipse.ui.views.navigator.ResourceNavigator.handleSelectionChanged(org.eclipse.jface.viewers.SelectionChangedEvent) @bci=15, line=707 (Interpreted frame)</Line>
          <Line>- org.eclipse.ui.views.navigator.ResourceNavigator$4.selectionChanged(org.eclipse.jface.viewers.SelectionChangedEvent) @bci=5, line=422 (Interpreted frame)</Line>
          <Line>- org.eclipse.jface.viewers.Viewer$2.run() @bci=8, line=162 (Compiled frame)</Line>
          <Line>- org.eclipse.core.runtime.SafeRunner.run(org.eclipse.core.runtime.ISafeRunnable) @bci=5, line=37 (Compiled frame)</Line>
          <Line>- org.eclipse.core.runtime.Platform.run(org.eclipse.core.runtime.ISafeRunnable) @bci=1, line=816 (Compiled frame)</Line>
          <Line>- org.eclipse.jface.viewers.StructuredViewer.updateSelection(org.eclipse.jface.viewers.ISelection) @bci=12, line=1882 (Interpreted frame)</Line>
          <Line>- org.eclipse.jface.viewers.StructuredViewer.handleSelect(org.eclipse.swt.events.SelectionEvent) @bci=21, line=1068 (Interpreted frame)</Line>
          <Line>- org.eclipse.jface.viewers.StructuredViewer$4.widgetSelected(org.eclipse.swt.events.SelectionEvent) @bci=5, line=1094 (Interpreted frame)</Line>
          <Line>- org.eclipse.jface.util.OpenStrategy.fireSelectionEvent(org.eclipse.swt.events.SelectionEvent) @bci=38, line=210 (Compiled frame)</Line>
          <Line>- org.eclipse.jface.util.OpenStrategy.access$3(org.eclipse.jface.util.OpenStrategy, org.eclipse.swt.events.SelectionEvent) @bci=2, line=205 (Compiled frame)</Line>
          <Line>- org.eclipse.swt.widgets.EventTable.sendEvent(org.eclipse.swt.widgets.Event) @bci=71, line=66 (Compiled frame)</Line>
          <Line>- org.eclipse.swt.widgets.Widget.sendEvent(org.eclipse.swt.widgets.Event) @bci=25, line=1074 (Compiled frame)</Line>
          <Line>- org.eclipse.swt.widgets.Display.readAndDispatch() @bci=33, line=2838 (Compiled frame)</Line>
          <Line>- org.eclipse.ui.internal.Workbench.runEventLoop(org.eclipse.jface.window.Window$IExceptionHandler, org.eclipse.swt.widgets.Display) @bci=9, line=1899 (Compiled frame)</Line>
          <Line>- org.eclipse.ui.internal.Workbench.runUI() @bci=226, line=1863 (Interpreted frame)</Line>
          <Line>- org.eclipse.ui.internal.Workbench.createAndRunWorkbench(org.eclipse.swt.widgets.Display, org.eclipse.ui.application.WorkbenchAdvisor) @bci=11, line=417 (Interpreted frame)</Line>
          <Line>- org.eclipse.ui.PlatformUI.createAndRunWorkbench(org.eclipse.swt.widgets.Display, org.eclipse.ui.application.WorkbenchAdvisor) @bci=2, line=143 (Interpreted frame)</Line>
          <Line>- org.eclipse.ui.internal.ide.IDEApplication.run(java.lang.Object) @bci=98, line=106 (Interpreted frame)</Line>
          <Line>- org.eclipse.core.internal.runtime.PlatformActivator$1.run(java.lang.Object) @bci=219, line=99 (Interpreted frame)</Line>
          <Line>- org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(java.lang.Object) @bci=103, line=92 (Interpreted frame)</Line>
          <Line>- org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(java.lang.Object) @bci=29, line=68 (Interpreted frame)</Line>
          <Line>- org.eclipse.core.runtime.adaptor.EclipseStarter.run(java.lang.Object) @bci=135, line=374 (Interpreted frame)</Line>
          <Line>- org.eclipse.core.runtime.adaptor.EclipseStarter.run(java.lang.String[], java.lang.Runnable) @bci=64, line=169 (Interpreted frame)</Line>
          <Line>- sun.reflect.NativeMethodAccessorImpl.invoke0(java.lang.reflect.Method, java.lang.Object, java.lang.Object[]) (Interpreted frame)</Line>
          <Line>- sun.reflect.NativeMethodAccessorImpl.invoke(java.lang.Object, java.lang.Object[]) @bci=87, line=39 (Interpreted frame)</Line>
          <Line>- sun.reflect.DelegatingMethodAccessorImpl.invoke(java.lang.Object, java.lang.Object[]) @bci=6, line=25 (Interpreted frame)</Line>
          <Line>- java.lang.reflect.Method.invoke(java.lang.Object, java.lang.Object[]) @bci=111, line=585 (Interpreted frame)</Line>
          <Line>- org.eclipse.core.launcher.Main.invokeFramework(java.lang.String[], java.net.URL[]) @bci=181, line=338 (Interpreted frame)</Line>
          <Line>- org.eclipse.core.launcher.Main.basicRun(java.lang.String[]) @bci=107, line=282 (Interpreted frame)</Line>
          <Line>- org.eclipse.core.launcher.Main.run(java.lang.String[]) @bci=4, line=977 (Interpreted frame)</Line>
          <Line>- org.eclipse.core.launcher.Main.main(java.lang.String[]) @bci=10, line=952 (Interpreted frame)</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="RESOLVED" />
    <resolution amount="DUPLICATE" />
    <WithStack>Hi,

I have experienced a very similar problem with GTK under Ubuntu.

While using Eclipse (any version from 3.0 upwards), I have a random problem,
where the entire Eclipse freezes for many many minutes... 

The stack from jstack:

Thread 23104: (state = IN_NATIVE)
 - org.eclipse.swt.internal.gtk.OS._gtk_clipboard_wait_for_contents(int, int)
(Interpreted frame)
 - org.eclipse.swt.internal.gtk.OS.gtk_clipboard_wait_for_contents(int, int)
@bci=9, line=3695 (Interpreted frame)
 - org.eclipse.swt.dnd.Clipboard.gtk_clipboard_wait_for_contents(int, int)
@bci=41, line=613 (Interpreted frame)
 - org.eclipse.swt.dnd.Clipboard.getContents(org.eclipse.swt.dnd.Transfer, int)
@bci=41, line=289 (Interpreted frame)
 - org.eclipse.swt.dnd.Clipboard.getContents(org.eclipse.swt.dnd.Transfer)
@bci=3, line=236 (Interpreted frame)

&lt;snip/&gt;

Is there anything I can do to work out how or why this section of code is
freezing up?

This stack trace is from a 3.2M4 instance.

This is quite important for usability in Linux, and doesn't affect the running
of eclipse under windows at all.

Damien
Created attachment 35390
jstack trace while eclipse is "hung"
As per Billy Biggs request, here is a ps -aef | grep &lt;user&gt;:

tusker@packrat:~/dev/eclipse.workspace/00005107_UA/build$ ps -aef | grep tusker
tusker   10191  9735  0 11:57 ?        00:00:00 /bin/sh /etc/xdg/xfce4/xinitrc
tusker   10252 10191  0 11:57 ?        00:00:00 /usr/bin/ssh-agent /usr/bin/dbus-launch --exit-with-session startxfce4
tusker   10255     1  0 11:57 ?        00:00:00 /usr/bin/dbus-launch --exit-with-session startxfce4
tusker   10256     1  0 11:57 ?        00:00:00 dbus-daemon --fork --print-pid 8 --print-address 6 --session
tusker   10261 10191  0 11:57 ?        00:00:00 /bin/sh /etc/xdg/xfce4/xinitrc
tusker   10262 10261  0 11:57 ?        00:00:00 xscreensaver -no-splash
tusker   10264 10191  0 11:57 ?        00:00:00 esd -nobeeps
tusker   10266 10191  0 11:57 ?        00:00:01 /usr/bin/xfce4-session
tusker   10324     1  0 11:57 ?        00:00:01 xfce-mcs-manager
tusker   10327     1  0 11:57 ?        00:00:02 xfwm4 --sm-client-id 117f000001000112322723400000195950000 --display :0.0
tusker   10329     1  0 11:57 ?        00:00:06 xftaskbar4 --sm-client-id 117f000001000112322723500000195950002 --display :0.0
tusker   10331     1  0 11:57 ?        00:00:04 xfdesktop --sm-client-id 117f000001000112322723500000195950003 --display :0.0
tusker   10333     1  0 11:57 ?        00:00:13 xfce4-panel --sm-client-id 117f000001000112322723500000195950001 --display :0.0
tusker   10997     1  0 12:02 ?        00:00:00 /bin/sh /usr/bin/firefox
tusker   11008 10997  0 12:02 ?        00:00:00 /bin/sh /opt/firefox/run-mozilla.sh /opt/firefox/firefox-bin
tusker   11025 11008  2 12:02 ?        00:02:54 /opt/firefox/firefox-bin
tusker   11029     1  0 12:02 ?        00:00:00 /usr/lib/gconf2/gconfd-2 10
tusker   11037     1  0 12:02 ?        00:00:10 gnome-terminal -t Terminal
tusker   11039     1  0 12:02 ?        00:00:00 /usr/lib/bonobo-activation/bonobo-activation-server --ac-activate --ior-output-fd=16
tusker   11040 11037  0 12:02 ?        00:00:00 gnome-pty-helper
tusker   11041 11037  0 12:02 pts/0    00:00:00 bash
tusker   11057     1  0 12:03 ?        00:00:15 gaim
tusker   11065 11037  0 12:04 pts/1    00:00:00 bash
tusker   11429     1  0 12:57 ?        00:00:00 /bin/sh /usr/bin/mozilla-thunderbird
tusker   11440 11429  0 12:57 ?        00:00:00 /bin/sh /opt/thunderbird/run-mozilla.sh /opt/thunderbird/mozilla-thunderbird-bin
tusker   11457 11440  1 12:57 ?        00:00:46 /opt/thunderbird/mozilla-thunderbird-bin
tusker   11696 11037  0 13:22 pts/2    00:00:00 bash
tusker   12277 11041  0 13:38 pts/0    00:00:00 vi /home/tusker/stuck.eclipse.1
tusker   12305     1  0 13:40 ?        00:00:00 /usr/eclipse/eclipse/eclipse -data /home/tusker/dev/eclipse.workspace -vm /usr/lib/j2sdk1.5-sun/bin/java -vmargs -Xverify:none -Xms40m -Xmx96m -XX:PermSize=20m -XX:+UseParallelGC -XX:CompileThreshold=100
tusker   12306 12305 99 13:40 ?        00:00:30 /usr/lib/j2sdk1.5-sun/bin/java -Xverify:none -Xms40m -Xmx96m -XX:PermSize=20m -XX:+UseParallelGC -XX:CompileThreshold=100 -jar /usr/eclipse/eclipse/startup.jar -os linux -ws gtk -arch x86 -launcher /usr/eclipse/eclipse/eclipse -name Eclipse -showsplash 600 -exitdata 2a800a -data /home/tusker/dev/eclipse.workspace -vm /usr/lib/j2sdk1.5-sun/bin/java -vmargs -Xverify:none -Xms40m -Xmx96m -XX:PermSize=20m -XX:+UseParallelGC -XX:CompileThreshold=100 -jar /usr/eclipse/eclipse/startup.jar
tusker   12337 11065  0 13:40 pts/1    00:00:00 ps -aef
tusker   12338 11065  0 13:40 pts/1    00:00:00 grep tusker

We need to figure out which application owns the clipboard
when the hang occurs.

Here is an app I wrote to help debug these problems:

  http://vektor.ca/eclipse/xclipowner.c

The compile line is at the top of the file.  Run this app the
next time Eclipse hangs.
After a few days of randomness, it strikes again:

$ xclipowner 
PRIMARY owner is 0x1a0168b (Terminal)
SECONDARY has no owner.
CLIPBOARD owner is 0x2a00002 (192.168.1.8 - Terminal Server Client)

Where Terminal is:
tusker   15931     1  0 09:46 ?        00:00:17 gnome-terminal -t Terminal
Where Terminal Server Client is:
tusker   20131 20130  0 17:08 ?        00:00:00 rdesktop -T192.168.1.8 - Terminal Server Client -utusker -g1024x768 -a16 -rsound 192.168.1.8

Jstack thread is:
Thread 15979: (state = IN_NATIVE)
 - org.eclipse.swt.internal.gtk.OS._gtk_clipboard_wait_for_contents(int, int) (Interpreted frame)
 - org.eclipse.swt.internal.gtk.OS.gtk_clipboard_wait_for_contents(int, int) @bci=9, line=3785 (Interpreted frame)
 - org.eclipse.swt.dnd.Clipboard.gtk_clipboard_wait_for_contents(int, int) @bci=41, line=613 (Interpreted frame)
 - org.eclipse.swt.dnd.Clipboard.getContents(org.eclipse.swt.dnd.Transfer, int) @bci=41, line=289 (Interpreted frame)
 - org.eclipse.swt.dnd.Clipboard.getContents(org.eclipse.swt.dnd.Transfer) @bci=3, line=236 (Interpreted frame)
 - org.eclipse.ui.views.navigator.PasteAction$1.run() @bci=17, line=186 (Interpreted frame)
 - org.eclipse.swt.widgets.Synchronizer.syncExec(java.lang.Runnable) @bci=15, line=152 (Interpreted frame)
 - org.eclipse.ui.internal.UISynchronizer.syncExec(java.lang.Runnable) @bci=26, line=28 (Compiled frame)
 - org.eclipse.swt.widgets.Display.syncExec(java.lang.Runnable) @bci=18, line=3714 (Compiled frame)
 - org.eclipse.ui.actions.BaseSelectionListenerAction.selectionChanged(org.eclipse.jface.viewers.IStructuredSelection) @bci=25, line=124 (Interpreted frame)
 - org.eclipse.ui.views.navigator.RefactorActionGroup.updateActionBars() @bci=24, line=154 (Interpreted frame)
 - org.eclipse.ui.views.navigator.MainActionGroup.updateActionBars() @bci=67, line=316 (Interpreted frame)
 - org.eclipse.ui.views.navigator.ResourceNavigator.updateActionBars(org.eclipse.jface.viewers.IStructuredSelection) @bci=22, line=1253 (Interpreted frame)
 - org.eclipse.ui.views.navigator.ResourceNavigator.handleSelectionChanged(org.eclipse.jface.viewers.SelectionChangedEvent) @bci=15, line=707 (Interpreted frame)
 - org.eclipse.ui.views.navigator.ResourceNavigator$4.selectionChanged(org.eclipse.jface.viewers.SelectionChangedEvent) @bci=5, line=422 (Interpreted frame)
 - org.eclipse.jface.viewers.Viewer$2.run() @bci=8, line=162 (Compiled frame)
 - org.eclipse.core.runtime.SafeRunner.run(org.eclipse.core.runtime.ISafeRunnable) @bci=5, line=37 (Compiled frame)
 - org.eclipse.core.runtime.Platform.run(org.eclipse.core.runtime.ISafeRunnable) @bci=1, line=816 (Compiled frame)
 - org.eclipse.jface.viewers.StructuredViewer.updateSelection(org.eclipse.jface.viewers.ISelection) @bci=12, line=1882 (Interpreted frame)
 - org.eclipse.jface.viewers.StructuredViewer.handleSelect(org.eclipse.swt.events.SelectionEvent) @bci=21, line=1068 (Interpreted frame)
 - org.eclipse.jface.viewers.StructuredViewer$4.widgetSelected(org.eclipse.swt.events.SelectionEvent) @bci=5, line=1094 (Interpreted frame)
 - org.eclipse.jface.util.OpenStrategy.fireSelectionEvent(org.eclipse.swt.events.SelectionEvent) @bci=38, line=210 (Compiled frame)
 - org.eclipse.jface.util.OpenStrategy.access$3(org.eclipse.jface.util.OpenStrategy, org.eclipse.swt.events.SelectionEvent) @bci=2, line=205 (Compiled frame)
 - org.eclipse.swt.widgets.EventTable.sendEvent(org.eclipse.swt.widgets.Event) @bci=71, line=66 (Compiled frame)
 - org.eclipse.swt.widgets.Widget.sendEvent(org.eclipse.swt.widgets.Event) @bci=25, line=1074 (Compiled frame)
 - org.eclipse.swt.widgets.Display.readAndDispatch() @bci=33, line=2838 (Compiled frame)
 - org.eclipse.ui.internal.Workbench.runEventLoop(org.eclipse.jface.window.Window$IExceptionHandler, org.eclipse.swt.widgets.Display) @bci=9, line=1899 (Compiled frame)
 - org.eclipse.ui.internal.Workbench.runUI() @bci=226, line=1863 (Interpreted frame)
 - org.eclipse.ui.internal.Workbench.createAndRunWorkbench(org.eclipse.swt.widgets.Display, org.eclipse.ui.application.WorkbenchAdvisor) @bci=11, line=417 (Interpreted frame)
 - org.eclipse.ui.PlatformUI.createAndRunWorkbench(org.eclipse.swt.widgets.Display, org.eclipse.ui.application.WorkbenchAdvisor) @bci=2, line=143 (Interpreted frame)
 - org.eclipse.ui.internal.ide.IDEApplication.run(java.lang.Object) @bci=98, line=106 (Interpreted frame)
 - org.eclipse.core.internal.runtime.PlatformActivator$1.run(java.lang.Object) @bci=219, line=99 (Interpreted frame)
 - org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(java.lang.Object) @bci=103, line=92 (Interpreted frame)
 - org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(java.lang.Object) @bci=29, line=68 (Interpreted frame)
 - org.eclipse.core.runtime.adaptor.EclipseStarter.run(java.lang.Object) @bci=135, line=374 (Interpreted frame)
 - org.eclipse.core.runtime.adaptor.EclipseStarter.run(java.lang.String[], java.lang.Runnable) @bci=64, line=169 (Interpreted frame)
 - sun.reflect.NativeMethodAccessorImpl.invoke0(java.lang.reflect.Method, java.lang.Object, java.lang.Object[]) (Interpreted frame)
 - sun.reflect.NativeMethodAccessorImpl.invoke(java.lang.Object, java.lang.Object[]) @bci=87, line=39 (Interpreted frame)
 - sun.reflect.DelegatingMethodAccessorImpl.invoke(java.lang.Object, java.lang.Object[]) @bci=6, line=25 (Interpreted frame)
 - java.lang.reflect.Method.invoke(java.lang.Object, java.lang.Object[]) @bci=111, line=585 (Interpreted frame)
 - org.eclipse.core.launcher.Main.invokeFramework(java.lang.String[], java.net.URL[]) @bci=181, line=338 (Interpreted frame)
 - org.eclipse.core.launcher.Main.basicRun(java.lang.String[]) @bci=107, line=282 (Interpreted frame)
 - org.eclipse.core.launcher.Main.run(java.lang.String[]) @bci=4, line=977 (Interpreted frame)
 - org.eclipse.core.launcher.Main.main(java.lang.String[]) @bci=10, line=952 (Interpreted frame)

During this time, I can still copy/paste normally using PRIMARY or CLIPBOARD:
tusker@packrat:~/dev/eclipse.workspace/00005052_UA/build$ ~/xclipowner
PRIMARY owner is 0x18003db (Firefox)
SECONDARY has no owner.
CLIPBOARD owner is 0x18003db (Firefox)

Anything else you would like next time this happens ?




This should be marked as a duplicate of bug 106458, see the
discussion there.  The conclusion is that it seems like it is a
bug in rdesktop's X clipboard handling.
Thanks Billy!

*** This bug has been marked as a duplicate of 106458 ***</WithStack>
    <WithOutStack>Hi,

I have experienced a very similar problem with GTK under Ubuntu.

While using Eclipse (any version from 3.0 upwards), I have a random problem,
where the entire Eclipse freezes for many many minutes... 

The stack from jstack:

Thread 23104: (state = IN_NATIVE)
 - org.eclipse.swt.internal.gtk.OS._gtk_clipboard_wait_for_contents(int, int)
(Interpreted frame)
 - org.eclipse.swt.internal.gtk.OS.gtk_clipboard_wait_for_contents(int, int)
@bci=9, line=3695 (Interpreted frame)
 - org.eclipse.swt.dnd.Clipboard.gtk_clipboard_wait_for_contents(int, int)
@bci=41, line=613 (Interpreted frame)
 - org.eclipse.swt.dnd.Clipboard.getContents(org.eclipse.swt.dnd.Transfer, int)
@bci=41, line=289 (Interpreted frame)
 - org.eclipse.swt.dnd.Clipboard.getContents(org.eclipse.swt.dnd.Transfer)
@bci=3, line=236 (Interpreted frame)

&lt;snip/&gt;

Is there anything I can do to work out how or why this section of code is
freezing up?

This stack trace is from a 3.2M4 instance.

This is quite important for usability in Linux, and doesn't affect the running
of eclipse under windows at all.

Damien
Created attachment 35390
jstack trace while eclipse is "hung"
As per Billy Biggs request, here is a ps -aef | grep &lt;user&gt;:

tusker@packrat:~/dev/eclipse.workspace/00005107_UA/build$ ps -aef | grep tusker
tusker   10191  9735  0 11:57 ?        00:00:00 /bin/sh /etc/xdg/xfce4/xinitrc
tusker   10252 10191  0 11:57 ?        00:00:00 /usr/bin/ssh-agent /usr/bin/dbus-launch --exit-with-session startxfce4
tusker   10255     1  0 11:57 ?        00:00:00 /usr/bin/dbus-launch --exit-with-session startxfce4
tusker   10256     1  0 11:57 ?        00:00:00 dbus-daemon --fork --print-pid 8 --print-address 6 --session
tusker   10261 10191  0 11:57 ?        00:00:00 /bin/sh /etc/xdg/xfce4/xinitrc
tusker   10262 10261  0 11:57 ?        00:00:00 xscreensaver -no-splash
tusker   10264 10191  0 11:57 ?        00:00:00 esd -nobeeps
tusker   10266 10191  0 11:57 ?        00:00:01 /usr/bin/xfce4-session
tusker   10324     1  0 11:57 ?        00:00:01 xfce-mcs-manager
tusker   10327     1  0 11:57 ?        00:00:02 xfwm4 --sm-client-id 117f000001000112322723400000195950000 --display :0.0
tusker   10329     1  0 11:57 ?        00:00:06 xftaskbar4 --sm-client-id 117f000001000112322723500000195950002 --display :0.0
tusker   10331     1  0 11:57 ?        00:00:04 xfdesktop --sm-client-id 117f000001000112322723500000195950003 --display :0.0
tusker   10333     1  0 11:57 ?        00:00:13 xfce4-panel --sm-client-id 117f000001000112322723500000195950001 --display :0.0
tusker   10997     1  0 12:02 ?        00:00:00 /bin/sh /usr/bin/firefox
tusker   11008 10997  0 12:02 ?        00:00:00 /bin/sh /opt/firefox/run-mozilla.sh /opt/firefox/firefox-bin
tusker   11025 11008  2 12:02 ?        00:02:54 /opt/firefox/firefox-bin
tusker   11029     1  0 12:02 ?        00:00:00 /usr/lib/gconf2/gconfd-2 10
tusker   11037     1  0 12:02 ?        00:00:10 gnome-terminal -t Terminal
tusker   11039     1  0 12:02 ?        00:00:00 /usr/lib/bonobo-activation/bonobo-activation-server --ac-activate --ior-output-fd=16
tusker   11040 11037  0 12:02 ?        00:00:00 gnome-pty-helper
tusker   11041 11037  0 12:02 pts/0    00:00:00 bash
tusker   11057     1  0 12:03 ?        00:00:15 gaim
tusker   11065 11037  0 12:04 pts/1    00:00:00 bash
tusker   11429     1  0 12:57 ?        00:00:00 /bin/sh /usr/bin/mozilla-thunderbird
tusker   11440 11429  0 12:57 ?        00:00:00 /bin/sh /opt/thunderbird/run-mozilla.sh /opt/thunderbird/mozilla-thunderbird-bin
tusker   11457 11440  1 12:57 ?        00:00:46 /opt/thunderbird/mozilla-thunderbird-bin
tusker   11696 11037  0 13:22 pts/2    00:00:00 bash
tusker   12277 11041  0 13:38 pts/0    00:00:00 vi /home/tusker/stuck.eclipse.1
tusker   12305     1  0 13:40 ?        00:00:00 /usr/eclipse/eclipse/eclipse -data /home/tusker/dev/eclipse.workspace -vm /usr/lib/j2sdk1.5-sun/bin/java -vmargs -Xverify:none -Xms40m -Xmx96m -XX:PermSize=20m -XX:+UseParallelGC -XX:CompileThreshold=100
tusker   12306 12305 99 13:40 ?        00:00:30 /usr/lib/j2sdk1.5-sun/bin/java -Xverify:none -Xms40m -Xmx96m -XX:PermSize=20m -XX:+UseParallelGC -XX:CompileThreshold=100 -jar /usr/eclipse/eclipse/startup.jar -os linux -ws gtk -arch x86 -launcher /usr/eclipse/eclipse/eclipse -name Eclipse -showsplash 600 -exitdata 2a800a -data /home/tusker/dev/eclipse.workspace -vm /usr/lib/j2sdk1.5-sun/bin/java -vmargs -Xverify:none -Xms40m -Xmx96m -XX:PermSize=20m -XX:+UseParallelGC -XX:CompileThreshold=100 -jar /usr/eclipse/eclipse/startup.jar
tusker   12337 11065  0 13:40 pts/1    00:00:00 ps -aef
tusker   12338 11065  0 13:40 pts/1    00:00:00 grep tusker

We need to figure out which application owns the clipboard
when the hang occurs.

Here is an app I wrote to help debug these problems:

  http://vektor.ca/eclipse/xclipowner.c

The compile line is at the top of the file.  Run this app the
next time Eclipse hangs.
After a few days of randomness, it strikes again:

$ xclipowner 
PRIMARY owner is 0x1a0168b (Terminal)
SECONDARY has no owner.
CLIPBOARD owner is 0x2a00002 (192.168.1.8 - Terminal Server Client)

Where Terminal is:
tusker   15931     1  0 09:46 ?        00:00:17 gnome-terminal -t Terminal
Where Terminal Server Client is:
tusker   20131 20130  0 17:08 ?        00:00:00 rdesktop -T192.168.1.8 - Terminal Server Client -utusker -g1024x768 -a16 -rsound 192.168.1.8

Jstack thread is:
Thread 15979: (state = IN_NATIVE)
 - org.eclipse.swt.internal.gtk.OS._gtk_clipboard_wait_for_contents(int, int) (Interpreted frame)
 - org.eclipse.swt.internal.gtk.OS.gtk_clipboard_wait_for_contents(int, int) @bci=9, line=3785 (Interpreted frame)
 - org.eclipse.swt.dnd.Clipboard.gtk_clipboard_wait_for_contents(int, int) @bci=41, line=613 (Interpreted frame)
 - org.eclipse.swt.dnd.Clipboard.getContents(org.eclipse.swt.dnd.Transfer, int) @bci=41, line=289 (Interpreted frame)
 - org.eclipse.swt.dnd.Clipboard.getContents(org.eclipse.swt.dnd.Transfer) @bci=3, line=236 (Interpreted frame)
 - org.eclipse.ui.views.navigator.PasteAction$1.run() @bci=17, line=186 (Interpreted frame)
 - org.eclipse.swt.widgets.Synchronizer.syncExec(java.lang.Runnable) @bci=15, line=152 (Interpreted frame)
 - org.eclipse.ui.internal.UISynchronizer.syncExec(java.lang.Runnable) @bci=26, line=28 (Compiled frame)
 - org.eclipse.swt.widgets.Display.syncExec(java.lang.Runnable) @bci=18, line=3714 (Compiled frame)
 - org.eclipse.ui.actions.BaseSelectionListenerAction.selectionChanged(org.eclipse.jface.viewers.IStructuredSelection) @bci=25, line=124 (Interpreted frame)
 - org.eclipse.ui.views.navigator.RefactorActionGroup.updateActionBars() @bci=24, line=154 (Interpreted frame)
 - org.eclipse.ui.views.navigator.MainActionGroup.updateActionBars() @bci=67, line=316 (Interpreted frame)
 - org.eclipse.ui.views.navigator.ResourceNavigator.updateActionBars(org.eclipse.jface.viewers.IStructuredSelection) @bci=22, line=1253 (Interpreted frame)
 - org.eclipse.ui.views.navigator.ResourceNavigator.handleSelectionChanged(org.eclipse.jface.viewers.SelectionChangedEvent) @bci=15, line=707 (Interpreted frame)
 - org.eclipse.ui.views.navigator.ResourceNavigator$4.selectionChanged(org.eclipse.jface.viewers.SelectionChangedEvent) @bci=5, line=422 (Interpreted frame)
 - org.eclipse.jface.viewers.Viewer$2.run() @bci=8, line=162 (Compiled frame)
 - org.eclipse.core.runtime.SafeRunner.run(org.eclipse.core.runtime.ISafeRunnable) @bci=5, line=37 (Compiled frame)
 - org.eclipse.core.runtime.Platform.run(org.eclipse.core.runtime.ISafeRunnable) @bci=1, line=816 (Compiled frame)
 - org.eclipse.jface.viewers.StructuredViewer.updateSelection(org.eclipse.jface.viewers.ISelection) @bci=12, line=1882 (Interpreted frame)
 - org.eclipse.jface.viewers.StructuredViewer.handleSelect(org.eclipse.swt.events.SelectionEvent) @bci=21, line=1068 (Interpreted frame)
 - org.eclipse.jface.viewers.StructuredViewer$4.widgetSelected(org.eclipse.swt.events.SelectionEvent) @bci=5, line=1094 (Interpreted frame)
 - org.eclipse.jface.util.OpenStrategy.fireSelectionEvent(org.eclipse.swt.events.SelectionEvent) @bci=38, line=210 (Compiled frame)
 - org.eclipse.jface.util.OpenStrategy.access$3(org.eclipse.jface.util.OpenStrategy, org.eclipse.swt.events.SelectionEvent) @bci=2, line=205 (Compiled frame)
 - org.eclipse.swt.widgets.EventTable.sendEvent(org.eclipse.swt.widgets.Event) @bci=71, line=66 (Compiled frame)
 - org.eclipse.swt.widgets.Widget.sendEvent(org.eclipse.swt.widgets.Event) @bci=25, line=1074 (Compiled frame)
 - org.eclipse.swt.widgets.Display.readAndDispatch() @bci=33, line=2838 (Compiled frame)
 - org.eclipse.ui.internal.Workbench.runEventLoop(org.eclipse.jface.window.Window$IExceptionHandler, org.eclipse.swt.widgets.Display) @bci=9, line=1899 (Compiled frame)
 - org.eclipse.ui.internal.Workbench.runUI() @bci=226, line=1863 (Interpreted frame)
 - org.eclipse.ui.internal.Workbench.createAndRunWorkbench(org.eclipse.swt.widgets.Display, org.eclipse.ui.application.WorkbenchAdvisor) @bci=11, line=417 (Interpreted frame)
 - org.eclipse.ui.PlatformUI.createAndRunWorkbench(org.eclipse.swt.widgets.Display, org.eclipse.ui.application.WorkbenchAdvisor) @bci=2, line=143 (Interpreted frame)
 - org.eclipse.ui.internal.ide.IDEApplication.run(java.lang.Object) @bci=98, line=106 (Interpreted frame)
 - org.eclipse.core.internal.runtime.PlatformActivator$1.run(java.lang.Object) @bci=219, line=99 (Interpreted frame)
 - org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(java.lang.Object) @bci=103, line=92 (Interpreted frame)
 - org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(java.lang.Object) @bci=29, line=68 (Interpreted frame)
 - org.eclipse.core.runtime.adaptor.EclipseStarter.run(java.lang.Object) @bci=135, line=374 (Interpreted frame)
 - org.eclipse.core.runtime.adaptor.EclipseStarter.run(java.lang.String[], java.lang.Runnable) @bci=64, line=169 (Interpreted frame)
 - sun.reflect.NativeMethodAccessorImpl.invoke0(java.lang.reflect.Method, java.lang.Object, java.lang.Object[]) (Interpreted frame)
 - sun.reflect.NativeMethodAccessorImpl.invoke(java.lang.Object, java.lang.Object[]) @bci=87, line=39 (Interpreted frame)
 - sun.reflect.DelegatingMethodAccessorImpl.invoke(java.lang.Object, java.lang.Object[]) @bci=6, line=25 (Interpreted frame)
 - java.lang.reflect.Method.invoke(java.lang.Object, java.lang.Object[]) @bci=111, line=585 (Interpreted frame)
 - org.eclipse.core.launcher.Main.invokeFramework(java.lang.String[], java.net.URL[]) @bci=181, line=338 (Interpreted frame)
 - org.eclipse.core.launcher.Main.basicRun(java.lang.String[]) @bci=107, line=282 (Interpreted frame)
 - org.eclipse.core.launcher.Main.run(java.lang.String[]) @bci=4, line=977 (Interpreted frame)
 - org.eclipse.core.launcher.Main.main(java.lang.String[]) @bci=10, line=952 (Interpreted frame)

During this time, I can still copy/paste normally using PRIMARY or CLIPBOARD:
tusker@packrat:~/dev/eclipse.workspace/00005052_UA/build$ ~/xclipowner
PRIMARY owner is 0x18003db (Firefox)
SECONDARY has no owner.
CLIPBOARD owner is 0x18003db (Firefox)

Anything else you would like next time this happens ?




This should be marked as a duplicate of bug 106458, see the
discussion there.  The conclusion is that it seems like it is a
bug in rdesktop's X clipboard handling.
Thanks Billy!

*** This bug has been marked as a duplicate of 106458 ***</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="129521" />
    <CreationDate amount="2006-02-27 00:37:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="SWT" />
    <Version amount="3.1" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows Server 2003" />
    <priority amount="P3" />
    <bug_severity amount="major" />
    <Summery>[OLE] SWT &amp; OCX problem</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="NEW" />
    <resolution amount="" />
    <WithStack>When run the pdfviewer example,it works fine.
But when click one button on the toolbar which in the pdf control,the pdf ocx control will popup a window.when close the popup window,the problem appears,the pdf control doesn't paint untill you trigger the refreshment handly,for example,switch window or switch Tab.
And when use my own ocx control,the same problem appears.

thanks.
Your bug has been moved to triage, visit http://www.eclipse.org/swt/triage.php for more info.</WithStack>
    <WithOutStack>When run the pdfviewer example,it works fine.
But when click one button on the toolbar which in the pdf control,the pdf ocx control will popup a window.when close the popup window,the problem appears,the pdf control doesn't paint untill you trigger the refreshment handly,for example,switch window or switch Tab.
And when use my own ocx control,the same problem appears.

thanks.
Your bug has been moved to triage, visit http://www.eclipse.org/swt/triage.php for more info.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="129522" />
    <CreationDate amount="2006-02-27 01:59:00 -0500" />
    <DupId amount="" />
    <classification amount="WebTools" />
    <Product amount="Web Tools" />
    <component amount="documentation" />
    <Version amount="unspecified" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>org.eclipse.jst.doc.isv has "compile" errors in plugin.xml</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="INVALID" />
    <WithStack>It seems to me that jst.doc.isv is missing a manifest.mf file? 
It would surprise me this works .... but maybe does due to its 
"custom build" that is done for it. 
But, even if does work, I think this compile errors should be fixed and 
made to "look more normal". 



Severity	Path	Resource	Description	Location	Creation Time	Id
Error	org.eclipse.jst.doc.isv	plugin.xml	Attribute 'id' of element 'plugin' must be defined.	line 3	February 27, 2006 1:25:44 AM	3039915
Error	org.eclipse.jst.doc.isv	plugin.xml	Attribute 'name' of element 'plugin' must be defined.	line 3	February 27, 2006 1:25:44 AM	3039917
Error	org.eclipse.jst.doc.isv	plugin.xml	Attribute 'version' of element 'plugin' must be defined.	line 3	February 27, 2006 1:25:44 AM	3039916
Created attachment 35538
WTP jst.doc.isv error

Is the error I saw in Product Configuration for M200602141429 maintenance build related to this?
Kit, the errors you saw on the 0214 driver are likely due to a problem encountered when .qualifier was added to the WTP builds. This should already be corrected in 1.0.1.

David, I can't reproduce on the 1.5 driver from 0301. Everything looks fine. Please reopen if you encounter the problem again.

I still see the problem in dev. env. There is no plugin id, etc., in plugin.xml file. 

I believe the project as a whole needs a manifest.mf file. 

I'm assuming some of this is "built by hand" in the custom ant build script? 
But .. I think should be loadable from CVS without errors. 


David, there must be some difference in the way I'm checking out the plug-in. The manifest.mf file does exist. See http://dev.eclipse.org/viewcvs/index.cgi/jst/components/doc/plugins/org.eclipse.jst.doc.isv/META-INF/?cvsroot=WebTools_Project
The file also exists when I checkout the plug-in project into a workspace. Take a look at the attached screenshot.

Are you checking out the plug-in from jst/components/doc/plugins/org.eclipse.jst.doc.isv? An older version of the plug-in that contains no data is archived at jst/components/doc/org.eclipse.jst.doc.isv.

I'm going to leave this bug in the reopened state until I understand why you're having this problem.
Created attachment 36111
Screenshot of plug-in structure.

This screenshot shows the org.eclipse.jst.doc.isv plug-in checked out into a workspace.
Lawrence, I must have had some "mixed" version from the old archived version. 
I deleted what I had, and check it out afresh and all was well. Thanks. 

we could delete those "archived" ones, right? 


Yes. The archive versions are from 0.7 and the content has been moved to the plugins dir. I'll e-mail the webmaster and make a request to remove the two WST and two JST plug-ins.
I've opened bug 131488 requesting that the archived doc plug-ins be removed from CVS.</WithStack>
    <WithOutStack>It seems to me that jst.doc.isv is missing a manifest.mf file? 
It would surprise me this works .... but maybe does due to its 
"custom build" that is done for it. 
But, even if does work, I think this compile errors should be fixed and 
made to "look more normal". 



Severity	Path	Resource	Description	Location	Creation Time	Id
Error	org.eclipse.jst.doc.isv	plugin.xml	Attribute 'id' of element 'plugin' must be defined.	line 3	February 27, 2006 1:25:44 AM	3039915
Error	org.eclipse.jst.doc.isv	plugin.xml	Attribute 'name' of element 'plugin' must be defined.	line 3	February 27, 2006 1:25:44 AM	3039917
Error	org.eclipse.jst.doc.isv	plugin.xml	Attribute 'version' of element 'plugin' must be defined.	line 3	February 27, 2006 1:25:44 AM	3039916
Created attachment 35538
WTP jst.doc.isv error

Is the error I saw in Product Configuration for M200602141429 maintenance build related to this?
Kit, the errors you saw on the 0214 driver are likely due to a problem encountered when .qualifier was added to the WTP builds. This should already be corrected in 1.0.1.

David, I can't reproduce on the 1.5 driver from 0301. Everything looks fine. Please reopen if you encounter the problem again.

I still see the problem in dev. env. There is no plugin id, etc., in plugin.xml file. 

I believe the project as a whole needs a manifest.mf file. 

I'm assuming some of this is "built by hand" in the custom ant build script? 
But .. I think should be loadable from CVS without errors. 


David, there must be some difference in the way I'm checking out the plug-in. The manifest.mf file does exist. See http://dev.eclipse.org/viewcvs/index.cgi/jst/components/doc/plugins/org.eclipse.jst.doc.isv/META-INF/?cvsroot=WebTools_Project
The file also exists when I checkout the plug-in project into a workspace. Take a look at the attached screenshot.

Are you checking out the plug-in from jst/components/doc/plugins/org.eclipse.jst.doc.isv? An older version of the plug-in that contains no data is archived at jst/components/doc/org.eclipse.jst.doc.isv.

I'm going to leave this bug in the reopened state until I understand why you're having this problem.
Created attachment 36111
Screenshot of plug-in structure.

This screenshot shows the org.eclipse.jst.doc.isv plug-in checked out into a workspace.
Lawrence, I must have had some "mixed" version from the old archived version. 
I deleted what I had, and check it out afresh and all was well. Thanks. 

we could delete those "archived" ones, right? 


Yes. The archive versions are from 0.7 and the content has been moved to the plugins dir. I'll e-mail the webmaster and make a request to remove the two WST and two JST plug-ins.
I've opened bug 131488 requesting that the archived doc plug-ins be removed from CVS.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="129523" />
    <CreationDate amount="2006-02-27 02:17:00 -0500" />
    <DupId amount="" />
    <classification amount="BIRT" />
    <Product amount="BIRT" />
    <component amount="Report Engine" />
    <Version amount="unspecified" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P2" />
    <bug_severity amount="major" />
    <Summery>ULocal unsupported</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="VERIFIED" />
    <resolution amount="FIXED" />
    <WithStack>When I fix bug 127013, I found that some engine APIs did support ULocal, but some didn't.
e.g.
Class ReportParameterConverter, only has 
  ReportParameterConverter( String format, Locale locale )
no 
  ReportParameterConverter( String format, ULocale ulocale )

Class StringFormatter not only has
 public StringFormatter( Locale locale )
but also
 public StringFormatter( ULocale ulocale )

We GUI can't fix bug 127013 until Engine absolutely support ICU4J.
add ULocale interface to:
org.eclipse.birt.report.engine.api.ReportParameterConverter
org.eclipse.birt.report.engine.api.IEngineTask
org.eclipse.birt.report.engine.api.impl.EngineTask</WithStack>
    <WithOutStack>When I fix bug 127013, I found that some engine APIs did support ULocal, but some didn't.
e.g.
Class ReportParameterConverter, only has 
  ReportParameterConverter( String format, Locale locale )
no 
  ReportParameterConverter( String format, ULocale ulocale )

Class StringFormatter not only has
 public StringFormatter( Locale locale )
but also
 public StringFormatter( ULocale ulocale )

We GUI can't fix bug 127013 until Engine absolutely support ICU4J.
add ULocale interface to:
org.eclipse.birt.report.engine.api.ReportParameterConverter
org.eclipse.birt.report.engine.api.IEngineTask
org.eclipse.birt.report.engine.api.impl.EngineTask</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="129524" />
    <CreationDate amount="2006-02-27 02:25:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="JDT" />
    <component amount="Debug" />
    <Version amount="3.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Inconsistent terminology for derived types in pop-up menus</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="VERIFIED" />
    <resolution amount="FIXED" />
    <WithStack>In the Stack View the pop-up offers a choice of
    Open Declaring Type
    Open Receiving Type
In the Variables View the pop-up offers a choice of
    Open Declared Type
    Open Concrete Type
These are inconsistent and unhelpful. Is the receiving type
the type that actually receives or the type with the method
that is receiving.

More conventional terminology is Static/Dynamic or Compile-time/Run-time or Declared/Actual. Please use one of these consistently.
The receiving type is the type of the object that is receiving the message being sent (i.e. the atual runtime type of the object on which a method was invoked). A method can be decalred by class X, and the message can be received by any subtype of X.
We should be consistent in the menus in the terms and tense.
Fixed in jdt debug ui plug-in properties. Used Declared/Actual.
Please verify, Kevin.
verified</WithStack>
    <WithOutStack>In the Stack View the pop-up offers a choice of
    Open Declaring Type
    Open Receiving Type
In the Variables View the pop-up offers a choice of
    Open Declared Type
    Open Concrete Type
These are inconsistent and unhelpful. Is the receiving type
the type that actually receives or the type with the method
that is receiving.

More conventional terminology is Static/Dynamic or Compile-time/Run-time or Declared/Actual. Please use one of these consistently.
The receiving type is the type of the object that is receiving the message being sent (i.e. the atual runtime type of the object on which a method was invoked). A method can be decalred by class X, and the message can be received by any subtype of X.
We should be consistent in the menus in the terms and tense.
Fixed in jdt debug ui plug-in properties. Used Declared/Actual.
Please verify, Kevin.
verified</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="129525" />
    <CreationDate amount="2006-02-27 03:18:00 -0500" />
    <DupId amount="" />
    <classification amount="Tools" />
    <Product amount="AspectJ" />
    <component amount="Compiler" />
    <Version amount="DEVELOPMENT" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="enhancement" />
    <Summery>Don't Dump Bytecodes to Syserr in LTW</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="3">
        <Lines>
          <Line>1) try to write an ajcore file</Line>
          <Line>2) failing that, try to use java.util.logging to log the information at an error level</Line>
          <Line>3) failing that, writing to System.error</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>The load-time weaving system can produce truly massive quantities of output when there's a weaving error, since the system dumps the bytecode to syserr. It would be much better to produce an ajcore file and just point to it, or use some other log.
I agree we should make better use of ajcore files. However they will be times when, due to a SecurityManager, the weaver does not have access to the disk and all data will still need to be sent to stderr.

What other log do you suggest?
I would suggest:
1) try to write an ajcore file
2) failing that, try to use java.util.logging to log the information at an error level
3) failing that, writing to System.error

I have changed the LTW message handler so that it no longer causes an AbortException when an error is issued. My original intention was to fail the loading of the class concerned but this doesn't happen because the exception is caught somewhere else in weaver/loadtime and it may not be desirable anyway. This should result in fewer "trouble in: ..." type messages where there is actually no problem with weaving.

I have opened Bug 155033 "Use ajcore for LTW problems" to look at a more appropriate method of information capture.
I ran into a case where the new code still dumps a spectacular amount of data to the console by dumping bytecode for each class, this with a very recent dev build. I reran with stdout and stderr redirected and have 2 megs of output from startup. This is the kind of scenario that would be greatly improved with ajcore files!

In this case, it was a circularity error from some test advice (which was obscured badly by the obscure message and the volumes of bytecode dumped):
[PolicyClassLoader@13631582] error at glassbox\monitor\AbstractMonitor.aj:115::0
 can't determine precedence between two or more pieces of advice that apply to t
he same join point: method-execution...
[PolicyClassLoader@13631582] abort trouble in:
...

Fix available in aspectj-DEVELOPMENT-20060824191234.jar.</WithStack>
    <WithOutStack>The load-time weaving system can produce truly massive quantities of output when there's a weaving error, since the system dumps the bytecode to syserr. It would be much better to produce an ajcore file and just point to it, or use some other log.
I agree we should make better use of ajcore files. However they will be times when, due to a SecurityManager, the weaver does not have access to the disk and all data will still need to be sent to stderr.

What other log do you suggest?
I would suggest:
1) try to write an ajcore file
2) failing that, try to use java.util.logging to log the information at an error level
3) failing that, writing to System.error

I have changed the LTW message handler so that it no longer causes an AbortException when an error is issued. My original intention was to fail the loading of the class concerned but this doesn't happen because the exception is caught somewhere else in weaver/loadtime and it may not be desirable anyway. This should result in fewer "trouble in: ..." type messages where there is actually no problem with weaving.

I have opened Bug 155033 "Use ajcore for LTW problems" to look at a more appropriate method of information capture.
I ran into a case where the new code still dumps a spectacular amount of data to the console by dumping bytecode for each class, this with a very recent dev build. I reran with stdout and stderr redirected and have 2 megs of output from startup. This is the kind of scenario that would be greatly improved with ajcore files!

In this case, it was a circularity error from some test advice (which was obscured badly by the obscure message and the volumes of bytecode dumped):
[PolicyClassLoader@13631582] error at glassbox\monitor\AbstractMonitor.aj:115::0
 can't determine precedence between two or more pieces of advice that apply to t
he same join point: method-execution...
[PolicyClassLoader@13631582] abort trouble in:
...

Fix available in aspectj-DEVELOPMENT-20060824191234.jar.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="129526" />
    <CreationDate amount="2006-02-27 03:25:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="SWT" />
    <Version amount="3.2" />
    <rep_platform amount="All" />
    <op_sys amount="All" />
    <priority amount="P3" />
    <bug_severity amount="enhancement" />
    <Summery>Proposal for new snippet : Non-rectangular Shell using transparent images</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="18">
      <source_code type="import">
        <location start="544" end="575" />
        <code>import org.eclipse.swt.SWT;</code>
      </source_code>
      <source_code type="import">
        <location start="576" end="617" />
        <code>import org.eclipse.swt.events.KeyAdapter;</code>
      </source_code>
      <source_code type="import">
        <location start="618" end="657" />
        <code>import org.eclipse.swt.events.KeyEvent;</code>
      </source_code>
      <source_code type="import">
        <location start="658" end="699" />
        <code>import org.eclipse.swt.events.PaintEvent;</code>
      </source_code>
      <source_code type="import">
        <location start="700" end="744" />
        <code>import org.eclipse.swt.events.PaintListener;</code>
      </source_code>
      <source_code type="import">
        <location start="745" end="783" />
        <code>import org.eclipse.swt.graphics.Image;</code>
      </source_code>
      <source_code type="import">
        <location start="784" end="826" />
        <code>import org.eclipse.swt.graphics.ImageData;</code>
      </source_code>
      <source_code type="import">
        <location start="827" end="865" />
        <code>import org.eclipse.swt.graphics.Point;</code>
      </source_code>
      <source_code type="import">
        <location start="866" end="908" />
        <code>import org.eclipse.swt.graphics.Rectangle;</code>
      </source_code>
      <source_code type="import">
        <location start="909" end="948" />
        <code>import org.eclipse.swt.graphics.Region;</code>
      </source_code>
      <source_code type="import">
        <location start="949" end="990" />
        <code>import org.eclipse.swt.layout.FillLayout;</code>
      </source_code>
      <source_code type="import">
        <location start="991" end="1029" />
        <code>import org.eclipse.swt.widgets.Canvas;</code>
      </source_code>
      <source_code type="import">
        <location start="1030" end="1069" />
        <code>import org.eclipse.swt.widgets.Display;</code>
      </source_code>
      <source_code type="import">
        <location start="1070" end="1107" />
        <code>import org.eclipse.swt.widgets.Event;</code>
      </source_code>
      <source_code type="import">
        <location start="1108" end="1148" />
        <code>import org.eclipse.swt.widgets.Listener;</code>
      </source_code>
      <source_code type="import">
        <location start="1149" end="1186" />
        <code>import org.eclipse.swt.widgets.Shell;</code>
      </source_code>
      <source_code type="multicomment">
        <location start="1187" end="1403" />
        <code>/**
 * Class TransparentImageShell
 * Extension of Snippet134 allowing transparent images to be used in
 * the creation of non-rectangular shells.
 * 
 * @version 1.0 - 25/08/2005
 * @author S.Caunt - H.Ortiz
 *
 */</code>
      </source_code>
      <source_code type="class">
        <location start="1404" end="3941" />
        <code>public class TransparentImageShell {
    
    public static void main(String[] args) {
        
        final Display display = new Display ();
        final Image image = new Image(display, "img/demo.png");
        
        final Shell shell = new Shell (display, SWT.NO_TRIM);
        shell.setLayout (new FillLayout ());
        Canvas canvas = new Canvas (shell, SWT.NONE);
        canvas.addPaintListener (new PaintListener () {
            public void paintControl (PaintEvent e) {
                e.gc.drawImage (image, 0, 0);
            }
        });
        
        Region region = new Region();
        region.add(image.getBounds());
        
        ImageData imagedata = image.getImageData();
        
        for (int y= 0; y &lt; imagedata.height; y++) {
            for (int x= 0; x &lt; imagedata.width; x++) {
                // Transparent pixel ?
                if (imagedata.getAlpha(x, y) &lt; 255) {
                    region.subtract(new Rectangle(x, y, 1, 1));
                } 
            }
        }
        // define the shape of the shell using setRegion
        shell.setRegion(region);
        
        // add ability to move shell around
        Listener l = new Listener() {
            Point origin;
            public void handleEvent(Event e)  {
                switch (e.type) {
                case SWT.MouseDown :
                    origin= new Point(e.x, e.y);
                    break;
                case SWT.MouseUp :
                    origin= null;
                    break;
                case SWT.MouseMove :
                    if (origin != null) {
                        Point p= display.map(shell, null, e.x, e.y);
                        shell.setLocation(p.x - origin.x, p.y - origin.y);
                    }
                    break;
                }
            }
        };
        canvas.addListener(SWT.MouseDown, l);
        canvas.addListener(SWT.MouseUp, l);
        canvas.addListener(SWT.MouseMove, l);

        canvas.addKeyListener(new KeyAdapter() {
            public void keyPressed(KeyEvent event) {
                if (event.keyCode == SWT.ESC) { // hit escape
                    shell.close();
                }
            }
        });
        
        shell.setSize(image.getBounds().width, image.getBounds().height);
        region.dispose();
        shell.open ();
        while (!shell.isDisposed ()) {
            if (!display.readAndDispatch ())
                display.sleep ();
        }
        image.dispose ();
        display.dispose ();
    }
}</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>Following a request from Stefan Langer to add this to the SWT Snippets page http://www.eclipse.org/newsportal/article.php?id=27143&amp;group=eclipse.platform.swt#27143
the following snippet (based on Snippet134) allows shells to be created in the form of a given transparent image. Given an image file, all pixels that are transparent are removed (using region.subtract) leaving a non-rectangular shell (or a shell of any form desired). This is useful, for example, for attractive splash-screens or fixed-sized non-rectangular application windows.




import org.eclipse.swt.SWT;
import org.eclipse.swt.events.KeyAdapter;
import org.eclipse.swt.events.KeyEvent;
import org.eclipse.swt.events.PaintEvent;
import org.eclipse.swt.events.PaintListener;
import org.eclipse.swt.graphics.Image;
import org.eclipse.swt.graphics.ImageData;
import org.eclipse.swt.graphics.Point;
import org.eclipse.swt.graphics.Rectangle;
import org.eclipse.swt.graphics.Region;
import org.eclipse.swt.layout.FillLayout;
import org.eclipse.swt.widgets.Canvas;
import org.eclipse.swt.widgets.Display;
import org.eclipse.swt.widgets.Event;
import org.eclipse.swt.widgets.Listener;
import org.eclipse.swt.widgets.Shell;

/**
 * Class TransparentImageShell
 * Extension of Snippet134 allowing transparent images to be used in
 * the creation of non-rectangular shells.
 * 
 * @version 1.0 - 25/08/2005
 * @author S.Caunt - H.Ortiz
 *
 */
public class TransparentImageShell {
    
    public static void main(String[] args) {
        
        final Display display = new Display ();
        final Image image = new Image(display, "img/demo.png");
        
        final Shell shell = new Shell (display, SWT.NO_TRIM);
        shell.setLayout (new FillLayout ());
        Canvas canvas = new Canvas (shell, SWT.NONE);
        canvas.addPaintListener (new PaintListener () {
            public void paintControl (PaintEvent e) {
                e.gc.drawImage (image, 0, 0);
            }
        });
        
        Region region = new Region();
        region.add(image.getBounds());
        
        ImageData imagedata = image.getImageData();
        
        for (int y= 0; y &lt; imagedata.height; y++) {
            for (int x= 0; x &lt; imagedata.width; x++) {
                // Transparent pixel ?
                if (imagedata.getAlpha(x, y) &lt; 255) {
                    region.subtract(new Rectangle(x, y, 1, 1));
                } 
            }
        }
        // define the shape of the shell using setRegion
        shell.setRegion(region);
        
        // add ability to move shell around
        Listener l = new Listener() {
            Point origin;
            public void handleEvent(Event e)  {
                switch (e.type) {
                case SWT.MouseDown :
                    origin= new Point(e.x, e.y);
                    break;
                case SWT.MouseUp :
                    origin= null;
                    break;
                case SWT.MouseMove :
                    if (origin != null) {
                        Point p= display.map(shell, null, e.x, e.y);
                        shell.setLocation(p.x - origin.x, p.y - origin.y);
                    }
                    break;
                }
            }
        };
        canvas.addListener(SWT.MouseDown, l);
        canvas.addListener(SWT.MouseUp, l);
        canvas.addListener(SWT.MouseMove, l);

        canvas.addKeyListener(new KeyAdapter() {
            public void keyPressed(KeyEvent event) {
                if (event.keyCode == SWT.ESC) { // hit escape
                    shell.close();
                }
            }
        });
        
        shell.setSize(image.getBounds().width, image.getBounds().height);
        region.dispose();
        shell.open ();
        while (!shell.isDisposed ()) {
            if (!display.readAndDispatch ())
                display.sleep ();
        }
        image.dispose ();
        display.dispose ();
    }
}
Released Snippet219.

Modified snippet to support images with a mask (e.g. GIFs).</WithStack>
    <WithOutStack>Following a request from Stefan Langer to add this to the SWT Snippets page http://www.eclipse.org/newsportal/article.php?id=27143&amp;group=eclipse.platform.swt#27143
the following snippet (based on Snippet134) allows shells to be created in the form of a given transparent image. Given an image file, all pixels that are transparent are removed (using region.subtract) leaving a non-rectangular shell (or a shell of any form desired). This is useful, for example, for attractive splash-screens or fixed-sized non-rectangular application windows.




import org.eclipse.swt.SWT;
import org.eclipse.swt.events.KeyAdapter;
import org.eclipse.swt.events.KeyEvent;
import org.eclipse.swt.events.PaintEvent;
import org.eclipse.swt.events.PaintListener;
import org.eclipse.swt.graphics.Image;
import org.eclipse.swt.graphics.ImageData;
import org.eclipse.swt.graphics.Point;
import org.eclipse.swt.graphics.Rectangle;
import org.eclipse.swt.graphics.Region;
import org.eclipse.swt.layout.FillLayout;
import org.eclipse.swt.widgets.Canvas;
import org.eclipse.swt.widgets.Display;
import org.eclipse.swt.widgets.Event;
import org.eclipse.swt.widgets.Listener;
import org.eclipse.swt.widgets.Shell;

/**
 * Class TransparentImageShell
 * Extension of Snippet134 allowing transparent images to be used in
 * the creation of non-rectangular shells.
 * 
 * @version 1.0 - 25/08/2005
 * @author S.Caunt - H.Ortiz
 *
 */
public class TransparentImageShell {
    
    public static void main(String[] args) {
        
        final Display display = new Display ();
        final Image image = new Image(display, "img/demo.png");
        
        final Shell shell = new Shell (display, SWT.NO_TRIM);
        shell.setLayout (new FillLayout ());
        Canvas canvas = new Canvas (shell, SWT.NONE);
        canvas.addPaintListener (new PaintListener () {
            public void paintControl (PaintEvent e) {
                e.gc.drawImage (image, 0, 0);
            }
        });
        
        Region region = new Region();
        region.add(image.getBounds());
        
        ImageData imagedata = image.getImageData();
        
        for (int y= 0; y &lt; imagedata.height; y++) {
            for (int x= 0; x &lt; imagedata.width; x++) {
                // Transparent pixel ?
                if (imagedata.getAlpha(x, y) &lt; 255) {
                    region.subtract(new Rectangle(x, y, 1, 1));
                } 
            }
        }
        // define the shape of the shell using setRegion
        shell.setRegion(region);
        
        // add ability to move shell around
        Listener l = new Listener() {
            Point origin;
            public void handleEvent(Event e)  {
                switch (e.type) {
                case SWT.MouseDown :
                    origin= new Point(e.x, e.y);
                    break;
                case SWT.MouseUp :
                    origin= null;
                    break;
                case SWT.MouseMove :
                    if (origin != null) {
                        Point p= display.map(shell, null, e.x, e.y);
                        shell.setLocation(p.x - origin.x, p.y - origin.y);
                    }
                    break;
                }
            }
        };
        canvas.addListener(SWT.MouseDown, l);
        canvas.addListener(SWT.MouseUp, l);
        canvas.addListener(SWT.MouseMove, l);

        canvas.addKeyListener(new KeyAdapter() {
            public void keyPressed(KeyEvent event) {
                if (event.keyCode == SWT.ESC) { // hit escape
                    shell.close();
                }
            }
        });
        
        shell.setSize(image.getBounds().width, image.getBounds().height);
        region.dispose();
        shell.open ();
        while (!shell.isDisposed ()) {
            if (!display.readAndDispatch ())
                display.sleep ();
        }
        image.dispose ();
        display.dispose ();
    }
}
Released Snippet219.

Modified snippet to support images with a mask (e.g. GIFs).</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="129527" />
    <CreationDate amount="2006-02-27 03:38:00 -0500" />
    <DupId amount="137693" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="CVS" />
    <Version amount="3.1.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Linux" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>cvs-compare: info-dialog to big</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="4">
        <Lines>
          <Line>1. Checked out the team platform.</Line>
          <Line>2. Dirtied 5 files and selected those files plus 10 other files.</Line>
          <Line>3. Selected those and did a "compare with latest from head" -&gt; prompted me to change to sync view, i accepted</Line>
          <Line>4. Normal progress bar.</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="RESOLVED" />
    <resolution amount="DUPLICATE" />
    <WithStack>i selected a bunch of files and chose "compare with latest form head", the perspective switched to "team" and an info-popup came up saying "Processing ..." and below a progressbar. the buttons (probably "cancel" and "run in background") are not visible nor helps resizing -- the progressbar disappears.
seems there's a null-layout in it.
Created attachment 35393
screenshot showing the oversized dialog (#129527)
I've tried reproducing this with no success (I useed the 3.1.2 buid (id M20060118-1600) on Linux). Here's what I did:

1. Checked out the team platform.
2. Dirtied 5 files and selected those files plus 10 other files.
3. Selected those and did a "compare with latest from head" -&gt; prompted me to change to sync view, i accepted
4. Normal progress bar.

Can you give me some more detailed repro steps? Thanks.
my files where from the search-view (i e result of a search) and i selected "compare with -&gt; another branch or version". the eclipse-build is the same, i use it with cdt 3.0.2.


*** This bug has been marked as a duplicate of 137693 ***</WithStack>
    <WithOutStack>i selected a bunch of files and chose "compare with latest form head", the perspective switched to "team" and an info-popup came up saying "Processing ..." and below a progressbar. the buttons (probably "cancel" and "run in background") are not visible nor helps resizing -- the progressbar disappears.
seems there's a null-layout in it.
Created attachment 35393
screenshot showing the oversized dialog (#129527)
I've tried reproducing this with no success (I useed the 3.1.2 buid (id M20060118-1600) on Linux). Here's what I did:

1. Checked out the team platform.
2. Dirtied 5 files and selected those files plus 10 other files.
3. Selected those and did a "compare with latest from head" -&gt; prompted me to change to sync view, i accepted
4. Normal progress bar.

Can you give me some more detailed repro steps? Thanks.
my files where from the search-view (i e result of a search) and i selected "compare with -&gt; another branch or version". the eclipse-build is the same, i use it with cdt 3.0.2.


*** This bug has been marked as a duplicate of 137693 ***</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="129528" />
    <CreationDate amount="2006-02-27 03:50:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="JDT" />
    <component amount="Debug" />
    <Version amount="3.1.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Linux" />
    <priority amount="P4" />
    <bug_severity amount="normal" />
    <Summery>[hcr] org.eclipse.debug.core.DebugException: Invalid stack frame</Summery>
    <Patches amount="0" />
    <Stacktraces amount="3">
      <Stacktrace timestamp="1437330672091">
        <Exception>org.eclipse.debug.core.DebugException</Exception>
        <Reason>Breakpoint does not have an associated marker.</Reason>
        <Frames>
          <Frame depth="0">org.eclipse.debug.core.model.Breakpoint.ensureMarker(Breakpoint.java:268)</Frame>
          <Frame depth="1">org.eclipse.jdt.internal.debug.core.breakpoints.JavaBreakpoint.getTypeName(JavaBreakpoint.java:773)</Frame>
          <Frame depth="2">org.eclipse.jdt.internal.debug.core.model.JDIDebugTarget.reinstallBreakpointsIn(JDIDebugTarget.java:777)</Frame>
          <Frame depth="3">org.eclipse.jdt.internal.debug.core.hcr.JavaHotCodeReplaceManager.redefineTypesJDK(JavaHotCodeReplaceManager.java:591)</Frame>
          <Frame depth="4">org.eclipse.jdt.internal.debug.core.hcr.JavaHotCodeReplaceManager.doHotCodeReplace(JavaHotCodeReplaceManager.java:456)</Frame>
          <Frame depth="5">org.eclipse.jdt.internal.debug.core.hcr.JavaHotCodeReplaceManager.access$0(JavaHotCodeReplaceManager.java:416)</Frame>
          <Frame depth="6">org.eclipse.jdt.internal.debug.core.hcr.JavaHotCodeReplaceManager$1.run(JavaHotCodeReplaceManager.java:305)</Frame>
          <Frame depth="7">org.eclipse.debug.core.DebugPlugin$AsynchJob.run(DebugPlugin.java:1027)</Frame>
          <Frame depth="8">org.eclipse.core.internal.jobs.Worker.run(Worker.java:76)</Frame>
        </Frames>
      </Stacktrace>
      <Stacktrace timestamp="1437330672091">
        <Exception>org.eclipse.debug.core.DebugException</Exception>
        <Reason>Invalid stack frame</Reason>
        <Frames>
          <Frame depth="0">org.eclipse.jdt.internal.debug.core.model.JDIStackFrame.getUnderlyingStackFrame(JDIStackFrame.java:980)</Frame>
          <Frame depth="1">org.eclipse.jdt.internal.debug.core.model.JDIStackFrame.getUnderlyingThisObject(JDIStackFrame.java:696)</Frame>
          <Frame depth="2">org.eclipse.jdt.internal.debug.core.model.JDIStackFrame.updateVariables(JDIStackFrame.java:454)</Frame>
          <Frame depth="3">org.eclipse.jdt.internal.debug.core.model.JDIStackFrame.getVariables0(JDIStackFrame.java:311)</Frame>
          <Frame depth="4">org.eclipse.jdt.internal.debug.core.model.JDIStackFrame.getVariables(JDIStackFrame.java:247)</Frame>
          <Frame depth="5">org.eclipse.jdt.internal.debug.core.model.JDIStackFrame.findVariable(JDIStackFrame.java:636)</Frame>
          <Frame depth="6">org.eclipse.jdt.internal.debug.ui.JavaDebugHover.generateHoverForLocal(JavaDebugHover.java:198)</Frame>
          <Frame depth="7">org.eclipse.jdt.internal.debug.ui.JavaDebugHover.getHoverInfo(JavaDebugHover.java:165)</Frame>
          <Frame depth="8">org.eclipse.jdt.internal.ui.text.java.hover.BestMatchHover.getHoverInfo(BestMatchHover.java:102)</Frame>
          <Frame depth="9">org.eclipse.jdt.internal.ui.text.java.hover.JavaEditorTextHoverProxy.getHoverInfo(JavaEditorTextHoverProxy.java:69)</Frame>
          <Frame depth="10">org.eclipse.jface.text.TextViewerHoverManager$4.run(TextViewerHoverManager.java:160)</Frame>
        </Frames>
      </Stacktrace>
      <Stacktrace timestamp="1437330672091">
        <Exception>org.eclipse.debug.core.DebugException</Exception>
        <Reason>Invalid stack frame</Reason>
        <Frames>
          <Frame depth="0">org.eclipse.jdt.internal.debug.core.model.JDIStackFrame.getUnderlyingStackFrame(JDIStackFrame.java:980)</Frame>
          <Frame depth="1">org.eclipse.jdt.internal.debug.core.model.JDIStackFrame.getUnderlyingThisObject(JDIStackFrame.java:696)</Frame>
          <Frame depth="2">org.eclipse.jdt.internal.debug.core.model.JDIStackFrame.getThis(JDIStackFrame.java:1038)</Frame>
          <Frame depth="3">org.eclipse.jdt.internal.debug.ui.JavaDebugHover.getHoverInfo(JavaDebugHover.java:193)</Frame>
          <Frame depth="4">org.eclipse.jdt.internal.ui.text.java.hover.BestMatchHover.getHoverInfo(BestMatchHover.java:102)</Frame>
          <Frame depth="5">org.eclipse.jdt.internal.ui.text.java.hover.JavaEditorTextHoverProxy.getHoverInfo(JavaEditorTextHoverProxy.java:69)</Frame>
          <Frame depth="6">org.eclipse.jface.text.TextViewerHoverManager$4.run(TextViewerHoverManager.java:160)</Frame>
        </Frames>
      </Stacktrace>
    </Stacktraces>
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="WONTFIX" />
    <WithStack>While doing some refactoring in a debug session (extract local variable), i got the last exception in the session log. The first exception happened before the week-end, and i don't remember how i got it.

I can't reproduce it.

!SESSION 2006-02-24 16:30:48.463 -----------------------------------------------
eclipse.buildId=M20060118-1600
java.version=1.5.0_06
java.vendor=Sun Microsystems Inc.
BootLoader constants: OS=linux, ARCH=x86, WS=gtk, NL=fr_FR
Command-line arguments:  -os linux -ws gtk -arch x86

!ENTRY org.eclipse.core.resources 2 10035 2006-02-24 16:30:53.134
!MESSAGE A workspace crash was detected. The previous session did not exit normally.

!ENTRY org.eclipse.jdt.debug 4 120 2006-02-24 16:52:02.288
!MESSAGE Internal error logged from JDI Debug: 
!STACK 1
org.eclipse.debug.core.DebugException: Breakpoint does not have an associated marker.
	at org.eclipse.debug.core.model.Breakpoint.ensureMarker(Breakpoint.java:268)
	at org.eclipse.jdt.internal.debug.core.breakpoints.JavaBreakpoint.getTypeName(JavaBreakpoint.java:773)
	at org.eclipse.jdt.internal.debug.core.model.JDIDebugTarget.reinstallBreakpointsIn(JDIDebugTarget.java:777)
	at org.eclipse.jdt.internal.debug.core.hcr.JavaHotCodeReplaceManager.redefineTypesJDK(JavaHotCodeReplaceManager.java:591)
	at org.eclipse.jdt.internal.debug.core.hcr.JavaHotCodeReplaceManager.doHotCodeReplace(JavaHotCodeReplaceManager.java:456)
	at org.eclipse.jdt.internal.debug.core.hcr.JavaHotCodeReplaceManager.access$0(JavaHotCodeReplaceManager.java:416)
	at org.eclipse.jdt.internal.debug.core.hcr.JavaHotCodeReplaceManager$1.run(JavaHotCodeReplaceManager.java:305)
	at org.eclipse.debug.core.DebugPlugin$AsynchJob.run(DebugPlugin.java:1027)
	at org.eclipse.core.internal.jobs.Worker.run(Worker.java:76)
!SUBENTRY 1 org.eclipse.debug.core 4 5012 2006-02-24 16:52:02.304
!MESSAGE Breakpoint does not have an associated marker.


!ENTRY org.eclipse.jdt.debug.ui 4 150 2006-02-27 09:43:11.261
!MESSAGE Internal Error
!STACK 1
org.eclipse.debug.core.DebugException: Invalid stack frame
	at org.eclipse.jdt.internal.debug.core.model.JDIStackFrame.getUnderlyingStackFrame(JDIStackFrame.java:980)
	at org.eclipse.jdt.internal.debug.core.model.JDIStackFrame.getUnderlyingThisObject(JDIStackFrame.java:696)
	at org.eclipse.jdt.internal.debug.core.model.JDIStackFrame.updateVariables(JDIStackFrame.java:454)
	at org.eclipse.jdt.internal.debug.core.model.JDIStackFrame.getVariables0(JDIStackFrame.java:311)
	at org.eclipse.jdt.internal.debug.core.model.JDIStackFrame.getVariables(JDIStackFrame.java:247)
	at org.eclipse.jdt.internal.debug.core.model.JDIStackFrame.findVariable(JDIStackFrame.java:636)
	at org.eclipse.jdt.internal.debug.ui.JavaDebugHover.generateHoverForLocal(JavaDebugHover.java:198)
	at org.eclipse.jdt.internal.debug.ui.JavaDebugHover.getHoverInfo(JavaDebugHover.java:165)
	at org.eclipse.jdt.internal.ui.text.java.hover.BestMatchHover.getHoverInfo(BestMatchHover.java:102)
	at org.eclipse.jdt.internal.ui.text.java.hover.JavaEditorTextHoverProxy.getHoverInfo(JavaEditorTextHoverProxy.java:69)
	at org.eclipse.jface.text.TextViewerHoverManager$4.run(TextViewerHoverManager.java:160)
!SUBENTRY 1 org.eclipse.jdt.debug 4 130 2006-02-27 09:43:11.266
!MESSAGE Invalid stack frame
A breakpoint could be removed during an HCR to cause the "Breakpoint does not have an associated marker" problem.
I got several of the second exception (but not the first one) in N20060405-0010. This variant also showed up:

org.eclipse.debug.core.DebugException: Invalid stack frame
at org.eclipse.jdt.internal.debug.core.model.JDIStackFrame.getUnderlyingStackFrame(JDIStackFrame.java:980)
at org.eclipse.jdt.internal.debug.core.model.JDIStackFrame.getUnderlyingThisObject(JDIStackFrame.java:696)
at org.eclipse.jdt.internal.debug.core.model.JDIStackFrame.getThis(JDIStackFrame.java:1038)
at org.eclipse.jdt.internal.debug.ui.JavaDebugHover.getHoverInfo(JavaDebugHover.java:193)
at org.eclipse.jdt.internal.ui.text.java.hover.BestMatchHover.getHoverInfo(BestMatchHover.java:102)
at org.eclipse.jdt.internal.ui.text.java.hover.JavaEditorTextHoverProxy.getHoverInfo(JavaEditorTextHoverProxy.java:69)
at org.eclipse.jface.text.TextViewerHoverManager$4.run(TextViewerHoverManager.java:160)

Deferred
As of now 'LATER' and 'REMIND' resolutions are no longer supported.
Please reopen this bug if it is still valid for you.</WithStack>
    <WithOutStack>While doing some refactoring in a debug session (extract local variable), i got the last exception in the session log. The first exception happened before the week-end, and i don't remember how i got it.

I can't reproduce it.

!SESSION 2006-02-24 16:30:48.463 -----------------------------------------------
eclipse.buildId=M20060118-1600
java.version=1.5.0_06
java.vendor=Sun Microsystems Inc.
BootLoader constants: OS=linux, ARCH=x86, WS=gtk, NL=fr_FR
Command-line arguments:  -os linux -ws gtk -arch x86

!ENTRY org.eclipse.core.resources 2 10035 2006-02-24 16:30:53.134
!MESSAGE A workspace crash was detected. The previous session did not exit normally.

!ENTRY org.eclipse.jdt.debug 4 120 2006-02-24 16:52:02.288
!MESSAGE Internal error logged from JDI Debug: 
!STACK 1
!SUBENTRY 1 org.eclipse.debug.core 4 5012 2006-02-24 16:52:02.304
!MESSAGE Breakpoint does not have an associated marker.


!ENTRY org.eclipse.jdt.debug.ui 4 150 2006-02-27 09:43:11.261
!MESSAGE Internal Error
!STACK 1
!SUBENTRY 1 org.eclipse.jdt.debug 4 130 2006-02-27 09:43:11.266
!MESSAGE Invalid stack frame
A breakpoint could be removed during an HCR to cause the "Breakpoint does not have an associated marker" problem.
I got several of the second exception (but not the first one) in N20060405-0010. This variant also showed up:



Deferred
As of now 'LATER' and 'REMIND' resolutions are no longer supported.
Please reopen this bug if it is still valid for you.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="129529" />
    <CreationDate amount="2006-02-27 03:52:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="UI" />
    <Version amount="3.1.1" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows 2000" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>[Progress] Eclipse is waiting for unspecified background operation</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="3">
        <Lines>
          <Line>1. Have a large workspace (you need many thousands of source files)</Line>
          <Line>2. Import a new project. You get the refreshing workspace progress message.</Line>
          <Line>3. When the workspeace is seemingly refreshed, try and import another project.</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="NEW" />
    <resolution amount="" />
    <WithStack>I think this is related to Refresh Workspace activities, but is certainly caused by importing a new project. Eclipse is doing something in the background but you have no idea what. Many other operations are blocked (Build, Import, etc).

Steps to reproduce:
1. Have a large workspace (you need many thousands of source files)
2. Import a new project. You get the refreshing workspace progress message.
3. When the workspeace is seemingly refreshed, try and import another project.

You get the "Waiting" message, but you have no idea why. Meanwhile, javaw.exe is consuming 90% of the CPU.
Moving to platform/ui as a starting point, since this operation is owned by the platform.

Karice, my bet is that it's recompiling but I'll get it to you to check 'cause it's import related...

Just FYI - it also happens after a large refresh (I have just done one). Same problem - no progress or busy indicators, but I cannot do a build (it just says "Waiting").

Note: Build Automatically is *not* set for this workspace.
This is because an operation with no name is locking the workspace - it is not possible to tell you the name of the culprit as we don't have it.

Could you do a stack dump when this happens and attack it to this bug please?
Can you tell me how to "do a stack dump" please.

Thanks
Created attachment 35603
Batch file

Run eclipse using the batch file. You will get 2 command windows after it starts. On one of them (the one with all of the text) if you hit control - break you will get a dump of the threads currently running.
Created attachment 35666
The DOS console output after ctrl-Break

I hope this helps.

I did a refresh of multiple projects. The progress completes. Then I try and build a project, and I get the Waiting dialog. That is when I did this thread dump.
Thanks Ian - that is a great help. Quick question - is Eclipse still repainting (i.e. do the menu bars go blank) as your trace looks like contention between two background threads.
As far as I can tell, everything is fine. Certainly, the menu &amp; toolbar &amp; the package explorer and structure pane are all painted OK.


As per http://wiki.eclipse.org/Platform_UI/Bug_Triage_Change_2009</WithStack>
    <WithOutStack>I think this is related to Refresh Workspace activities, but is certainly caused by importing a new project. Eclipse is doing something in the background but you have no idea what. Many other operations are blocked (Build, Import, etc).

Steps to reproduce:
1. Have a large workspace (you need many thousands of source files)
2. Import a new project. You get the refreshing workspace progress message.
3. When the workspeace is seemingly refreshed, try and import another project.

You get the "Waiting" message, but you have no idea why. Meanwhile, javaw.exe is consuming 90% of the CPU.
Moving to platform/ui as a starting point, since this operation is owned by the platform.

Karice, my bet is that it's recompiling but I'll get it to you to check 'cause it's import related...

Just FYI - it also happens after a large refresh (I have just done one). Same problem - no progress or busy indicators, but I cannot do a build (it just says "Waiting").

Note: Build Automatically is *not* set for this workspace.
This is because an operation with no name is locking the workspace - it is not possible to tell you the name of the culprit as we don't have it.

Could you do a stack dump when this happens and attack it to this bug please?
Can you tell me how to "do a stack dump" please.

Thanks
Created attachment 35603
Batch file

Run eclipse using the batch file. You will get 2 command windows after it starts. On one of them (the one with all of the text) if you hit control - break you will get a dump of the threads currently running.
Created attachment 35666
The DOS console output after ctrl-Break

I hope this helps.

I did a refresh of multiple projects. The progress completes. Then I try and build a project, and I get the Waiting dialog. That is when I did this thread dump.
Thanks Ian - that is a great help. Quick question - is Eclipse still repainting (i.e. do the menu bars go blank) as your trace looks like contention between two background threads.
As far as I can tell, everything is fine. Certainly, the menu &amp; toolbar &amp; the package explorer and structure pane are all painted OK.


As per http://wiki.eclipse.org/Platform_UI/Bug_Triage_Change_2009</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="129530" />
    <CreationDate amount="2006-02-27 03:55:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="JDT" />
    <component amount="UI" />
    <Version amount="3.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>[quick fix] remove curly brackets should have least relevance</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="1">
      <source_code type="class">
        <location start="42" end="236" />
        <code>public class A {
  void f(List&lt;? extends Number&gt; x){
    for (Iterator&lt;? extends Number&gt; iter = x.iterator(); iter.hasNext();) {
      Number num = iter.next();
      //do stuff        
    }}
}</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>20060227

Using quick fix on the 'for' of
public class A {
  void f(List&lt;? extends Number&gt; x){
    for (Iterator&lt;? extends Number&gt; iter = x.iterator(); iter.hasNext();) {
      Number num = iter.next();
      //do stuff        
    }}
}

has 'remove curly brackets' as first option. It should always be last (or second last in this example)
fixed &gt; I20060221-1300</WithStack>
    <WithOutStack>20060227

Using quick fix on the 'for' of
public class A {
  void f(List&lt;? extends Number&gt; x){
    for (Iterator&lt;? extends Number&gt; iter = x.iterator(); iter.hasNext();) {
      Number num = iter.next();
      //do stuff        
    }}
}

has 'remove curly brackets' as first option. It should always be last (or second last in this example)
fixed &gt; I20060221-1300</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="129531" />
    <CreationDate amount="2006-02-27 04:05:00 -0500" />
    <DupId amount="" />
    <classification amount="WebTools" />
    <Product amount="WTP Source Editing" />
    <component amount="wst.sse" />
    <Version amount="1.5" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Need to spec 'internals', 'friends', and "organize manifests".</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>for all our plugins. 
This bugzilla will be used for all SEE/Editing related ones.
Fixed initial sets. 


This change is a bulk update of all _un_targeted, fixed, resolved bugs upon release of M5. This particular bug _might_ have been fixed earlier than M5. (Feel free to correct). 


This is part of a mass update to close out all stale WTP defects already verified by the reporter but awaiting closure by the assignee.  If you feel this defect was closed inappropriately, please reopen.

Thanks, John Lanuti</WithStack>
    <WithOutStack>for all our plugins. 
This bugzilla will be used for all SEE/Editing related ones.
Fixed initial sets. 


This change is a bulk update of all _un_targeted, fixed, resolved bugs upon release of M5. This particular bug _might_ have been fixed earlier than M5. (Feel free to correct). 


This is part of a mass update to close out all stale WTP defects already verified by the reporter but awaiting closure by the assignee.  If you feel this defect was closed inappropriately, please reopen.

Thanks, John Lanuti</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="129532" />
    <CreationDate amount="2006-02-27 04:19:00 -0500" />
    <DupId amount="" />
    <classification amount="WebTools" />
    <Product amount="WTP Releng" />
    <component amount="releng" />
    <Version amount="1.5" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="major" />
    <Summery>Package wtp-all-in-one-sdk for WTP 1.0.1</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>Please make wtp-all-in-one-sdk for WTP 1.0.1 because update manager is not working (related to https://bugs.eclipse.org/bugs/show_bug.cgi?id=108436) and manual instalation is very hard (after downloading requirements WTP is not visible).
+1

We should continue to produce all-in-one zips until Update Manager works well enough.
all-in-one zip is ready to download, thanks
This change is a bulk update of all _un_targeted, fixed, resolved bugs upon release of M5. This particular bug _might_ have been fixed earlier than M5. (Feel free to correct). 


For me this is ok.</WithStack>
    <WithOutStack>Please make wtp-all-in-one-sdk for WTP 1.0.1 because update manager is not working (related to https://bugs.eclipse.org/bugs/show_bug.cgi?id=108436) and manual instalation is very hard (after downloading requirements WTP is not visible).
+1

We should continue to produce all-in-one zips until Update Manager works well enough.
all-in-one zip is ready to download, thanks
This change is a bulk update of all _un_targeted, fixed, resolved bugs upon release of M5. This particular bug _might_ have been fixed earlier than M5. (Feel free to correct). 


For me this is ok.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="129533" />
    <CreationDate amount="2006-02-27 04:20:00 -0500" />
    <DupId amount="" />
    <classification amount="Modeling" />
    <Product amount="GMF-Runtime" />
    <component amount="General" />
    <Version amount="1.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P2" />
    <bug_severity amount="enhancement" />
    <Summery>Fully supporting abitrary resource factory</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="2">
        <Lines>
          <Line>- Copy/paste https://bugs.eclipse.org/bugs/show_bug.cgi?id=125562</Line>
          <Line>- Other model refactorings (see http://www.eclipse.org/newsportal/article.php?id=1485&amp;group=eclipse.technology.gmf#1485 for details)</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="NEW" />
    <resolution amount="" />
    <WithStack>Currently a number of runtime features works only with the resources loaded using GMFResourceFactory (GMFResource) in particular:
- Copy/paste https://bugs.eclipse.org/bugs/show_bug.cgi?id=125562
- Other model refactorings (see http://www.eclipse.org/newsportal/article.php?id=1485&amp;group=eclipse.technology.gmf#1485 for details)

As we agree, runtime code should work with any resources loaded by any resource factories.
This will be addressed in the next release. 
Comment from bug #125562:

Copy / paste does not work on generated editors because the semantic elements
are not referenced using GUIDS, but rather relative hrefs.

Looks like this is a reason of disfunctions in generated editors.

*** Bug 164334 has been marked as a duplicate of this bug. ***
Not yet assigned to a release (assigned to a milestone with the Plan keyword).

Moving to the next release, GMF 2.1. 
I've also got copy and paste problems- and I'm working on uml2 models.
[GMF Restructure] Bug 319140 : product GMF and component
Runtime was the original product and component for this bug
I use GMF 2.3.0, and my model is stored in a separated file, still the copy and paste could not work...

How can I fix it?
(In reply to comment #7)
&gt; I use GMF 2.3.0, and my model is stored in a separated file, still the copy and
&gt; paste could not work...
&gt; 
&gt; How can I fix it?

Only the graphics is copied, but the model element do not.</WithStack>
    <WithOutStack>Currently a number of runtime features works only with the resources loaded using GMFResourceFactory (GMFResource) in particular:
- Copy/paste https://bugs.eclipse.org/bugs/show_bug.cgi?id=125562
- Other model refactorings (see http://www.eclipse.org/newsportal/article.php?id=1485&amp;group=eclipse.technology.gmf#1485 for details)

As we agree, runtime code should work with any resources loaded by any resource factories.
This will be addressed in the next release. 
Comment from bug #125562:

Copy / paste does not work on generated editors because the semantic elements
are not referenced using GUIDS, but rather relative hrefs.

Looks like this is a reason of disfunctions in generated editors.

*** Bug 164334 has been marked as a duplicate of this bug. ***
Not yet assigned to a release (assigned to a milestone with the Plan keyword).

Moving to the next release, GMF 2.1. 
I've also got copy and paste problems- and I'm working on uml2 models.
[GMF Restructure] Bug 319140 : product GMF and component
Runtime was the original product and component for this bug
I use GMF 2.3.0, and my model is stored in a separated file, still the copy and paste could not work...

How can I fix it?
(In reply to comment #7)
&gt; I use GMF 2.3.0, and my model is stored in a separated file, still the copy and
&gt; paste could not work...
&gt; 
&gt; How can I fix it?

Only the graphics is copied, but the model element do not.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="129534" />
    <CreationDate amount="2006-02-27 04:21:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="CVS" />
    <Version amount="3.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Internal error when checking out CVS dir into an existing project (M5[a])</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="6">
        <Lines>
          <Line>1) Create a new General/Project and call it 'Buckminster WWW'</Line>
          <Line>2) Open the CVS repositories view</Line>
          <Line>3) Navigate into www, and select 'buckminster' and 'images'.</Line>
          <Line>4) Use 'Check out as...'</Line>
          <Line>5) Choose 'Check out into an existing project'</Line>
          <Line>6) Choose 'Buckminster WWW'</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>The below described use case hits the error 'Attempted to beginRule: R/, does not match outer scope rule: P/Buckminster WWW', which is AFAICT the same problem talked about in bug #128709. Whether this report simply ends up as a dup, or is dependent on that, or should be dealt solely within the CVS stuff I don't know - I thought it useful to point out anyway as it impacts a use case I need. Mark up as needed, I guess...

Since I sometimes work with the Buckminster eclipse site I want the stuff in my workspace. The site lies in ...@dev.eclipse.org:/cvsroot/org.eclipse, in the 'www' module together with all others. In principle, all we need is the 'buckminster' subdir, but in practice we also need the 'images' subdir' as common stuff resides there.

Unfortunately, checking out the full www module is a no-go since many projects have settings that makes them possible to checkout by me - and it is a lot. Takes a long time and space for no reason.

Instead, I have so far successfully used the following approach:
1) Create a new General/Project and call it 'Buckminster WWW'
2) Open the CVS repositories view
3) Navigate into www, and select 'buckminster' and 'images'.
4) Use 'Check out as...'
5) Choose 'Check out into an existing project'
6) Choose 'Buckminster WWW'

These steps used to give me exact what I wanted and CVS enabled the project so I could simply use 'update' etc on it.

Now, however, the last step of CVS enabling the project fails. Not unlikely, given the current description in bug #128709.

I'm not aware of a good workaround.
I'm going to try to put in a fix for tomorrow's integration build. Could you possible send me the full stack trace for your error case?
Fixed in HEAD. Will show up in tomorrow's integration build (I20060228).</WithStack>
    <WithOutStack>The below described use case hits the error 'Attempted to beginRule: R/, does not match outer scope rule: P/Buckminster WWW', which is AFAICT the same problem talked about in bug #128709. Whether this report simply ends up as a dup, or is dependent on that, or should be dealt solely within the CVS stuff I don't know - I thought it useful to point out anyway as it impacts a use case I need. Mark up as needed, I guess...

Since I sometimes work with the Buckminster eclipse site I want the stuff in my workspace. The site lies in ...@dev.eclipse.org:/cvsroot/org.eclipse, in the 'www' module together with all others. In principle, all we need is the 'buckminster' subdir, but in practice we also need the 'images' subdir' as common stuff resides there.

Unfortunately, checking out the full www module is a no-go since many projects have settings that makes them possible to checkout by me - and it is a lot. Takes a long time and space for no reason.

Instead, I have so far successfully used the following approach:
1) Create a new General/Project and call it 'Buckminster WWW'
2) Open the CVS repositories view
3) Navigate into www, and select 'buckminster' and 'images'.
4) Use 'Check out as...'
5) Choose 'Check out into an existing project'
6) Choose 'Buckminster WWW'

These steps used to give me exact what I wanted and CVS enabled the project so I could simply use 'update' etc on it.

Now, however, the last step of CVS enabling the project fails. Not unlikely, given the current description in bug #128709.

I'm not aware of a good workaround.
I'm going to try to put in a fix for tomorrow's integration build. Could you possible send me the full stack trace for your error case?
Fixed in HEAD. Will show up in tomorrow's integration build (I20060228).</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="129535" />
    <CreationDate amount="2006-02-27 04:28:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="SWT" />
    <Version amount="3.1" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>GridData/GridLayout is showing abnormal layout</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="7">
      <source_code type="assignment">
        <location start="732" end="778" />
        <code>Combo combo = new Combo(shell, SWT.DROP_DOWN);</code>
      </source_code>
      <source_code type="functiondef">
        <location start="779" end="834" />
        <code>for(int i = 0; i &lt; 4; i++) {
	combo.add("asdadadad");
}</code>
      </source_code>
      <source_code type="functioncall">
        <location start="835" end="899" />
        <code>System.out.println(combo.computeSize(SWT.DEFAULT, SWT.DEFAULT));</code>
      </source_code>
      <source_code type="assignment">
        <location start="900" end="964" />
        <code>Combo combo2 = new Combo(shell, SWT.DROP_DOWN | SWT.HORIZONTAL);</code>
      </source_code>
      <source_code type="functiondef">
        <location start="965" end="1021" />
        <code>for(int i = 0; i &lt; 4; i++) {
	combo2.add("asdadadad");
}</code>
      </source_code>
      <source_code type="functioncall">
        <location start="1022" end="1087" />
        <code>System.out.println(combo2.computeSize(SWT.DEFAULT, SWT.DEFAULT));</code>
      </source_code>
      <source_code type="assignment">
        <location start="1408" end="1489" />
        <code>if ((style &amp; SWT.H_SCROLL) != 0) height += OS.GetSystemMetrics (OS.SM_CYHSCROLL);</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="1">
      <Enumeration lines="5">
        <Lines>
          <Line>1. File &gt; new &gt; Other...&gt; Plug-in Development &gt; Target Definition</Line>
          <Line />
          <Line>2. In the wizard, enter any name.  Accept Defaults.  Finish.  The file will open in a form-based editor.</Line>
          <Line />
          <Line>3. Go to the second page of the editor.  Observe how the Environment section are not properly aligned.</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>I20060221-1300

1. File &gt; new &gt; Other...&gt; Plug-in Development &gt; Target Definition

2. In the wizard, enter any name.  Accept Defaults.  Finish.  The file will open in a form-based editor.

3. Go to the second page of the editor.  Observe how the Environment section are not properly aligned.  


Note that if I run the exact same PDE code against SWT v3221 restores good layout.  so something must have happened to GridLayout/GridData recently to break it.
Created attachment 35394
screenshot
The Combo for "Locale" is created with the style SWT.DROP_DOWN | SWT.HORIZONTAL  the other combos are created with the style SWT.DROP_DOWN.  The SWT.HORIZONTAL style is causing the height for the comupte size of Combo to be wrong.

test:

Combo combo = new Combo(shell, SWT.DROP_DOWN);
for(int i = 0; i &lt; 4; i++) {
	combo.add("asdadadad");
}
System.out.println(combo.computeSize(SWT.DEFAULT, SWT.DEFAULT));
Combo combo2 = new Combo(shell, SWT.DROP_DOWN | SWT.HORIZONTAL);
for(int i = 0; i &lt; 4; i++) {
	combo2.add("asdadadad");
}
System.out.println(combo2.computeSize(SWT.DEFAULT, SWT.DEFAULT));

result:

Point {82, 21}
Point {85, 38}

Support for horizontal scrollbars in drop down list was added to Combo by Steve in 3223 (see bug 98265).  However, it should not be affecting the computeSize result for Combo.


Moving to Steve to fix computeSize() for Combo.
In Combo.computeSize() we should definitely remove:

if ((style &amp; SWT.H_SCROLL) != 0) height += OS.GetSystemMetrics (OS.SM_CYHSCROLL);

because the scrollbar is not in the Combo but in the drop down list.

Also, I am not sure if we should be calling CB_GETHORIZONTALEXTENT.  This gives a different width than a Combo created without SWT.H_SCROLL and since all we are doing is adding a horizontal scrollbar to the drop down, there should be no difference in width.

You are right.  I am fixing it.
&gt; am not sure if we should be calling CB_GETHORIZONTALEXTENT

We do this in List.  Since we are computing the scroll bar width on the fly and it should always be up to date, we should be able to return it from computeSize().
Confirmed that height problem is resolved with changes to Combo.
Fixed &gt; 20060227</WithStack>
    <WithOutStack>I20060221-1300

1. File &gt; new &gt; Other...&gt; Plug-in Development &gt; Target Definition

2. In the wizard, enter any name.  Accept Defaults.  Finish.  The file will open in a form-based editor.

3. Go to the second page of the editor.  Observe how the Environment section are not properly aligned.  


Note that if I run the exact same PDE code against SWT v3221 restores good layout.  so something must have happened to GridLayout/GridData recently to break it.
Created attachment 35394
screenshot
The Combo for "Locale" is created with the style SWT.DROP_DOWN | SWT.HORIZONTAL  the other combos are created with the style SWT.DROP_DOWN.  The SWT.HORIZONTAL style is causing the height for the comupte size of Combo to be wrong.

test:

Combo combo = new Combo(shell, SWT.DROP_DOWN);
for(int i = 0; i &lt; 4; i++) {
	combo.add("asdadadad");
}
System.out.println(combo.computeSize(SWT.DEFAULT, SWT.DEFAULT));
Combo combo2 = new Combo(shell, SWT.DROP_DOWN | SWT.HORIZONTAL);
for(int i = 0; i &lt; 4; i++) {
	combo2.add("asdadadad");
}
System.out.println(combo2.computeSize(SWT.DEFAULT, SWT.DEFAULT));

result:

Point {82, 21}
Point {85, 38}

Support for horizontal scrollbars in drop down list was added to Combo by Steve in 3223 (see bug 98265).  However, it should not be affecting the computeSize result for Combo.


Moving to Steve to fix computeSize() for Combo.
In Combo.computeSize() we should definitely remove:

if ((style &amp; SWT.H_SCROLL) != 0) height += OS.GetSystemMetrics (OS.SM_CYHSCROLL);

because the scrollbar is not in the Combo but in the drop down list.

Also, I am not sure if we should be calling CB_GETHORIZONTALEXTENT.  This gives a different width than a Combo created without SWT.H_SCROLL and since all we are doing is adding a horizontal scrollbar to the drop down, there should be no difference in width.

You are right.  I am fixing it.
&gt; am not sure if we should be calling CB_GETHORIZONTALEXTENT

We do this in List.  Since we are computing the scroll bar width on the fly and it should always be up to date, we should be able to return it from computeSize().
Confirmed that height problem is resolved with changes to Combo.
Fixed &gt; 20060227</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="129536" />
    <CreationDate amount="2006-02-27 04:38:00 -0500" />
    <DupId amount="" />
    <classification amount="Tools" />
    <Product amount="CDT" />
    <component amount="cdt-doc" />
    <Version amount="3.1" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows 2000" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Dead Link to Cygwin in CDT FAQ</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>The link to the Cygwin Toolkit in the answer to the question "What tools do I need to run CDT?" leads to a "Page not found" message.
You are quite correct.   

I have updated the cygwin link to point at www.cygwin.com</WithStack>
    <WithOutStack>The link to the Cygwin Toolkit in the answer to the question "What tools do I need to run CDT?" leads to a "Page not found" message.
You are quite correct.   

I have updated the cygwin link to point at www.cygwin.com</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="129537" />
    <CreationDate amount="2006-02-27 04:58:00 -0500" />
    <DupId amount="102822" />
    <classification amount="WebTools" />
    <Product amount="WTP Source Editing" />
    <component amount="wst.xml" />
    <Version amount="1.5" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows 2000" />
    <priority amount="P3" />
    <bug_severity amount="critical" />
    <Summery>Reformating large XSD file brings Eclipse to a stand-still</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="DUPLICATE" />
    <WithStack>W2k SP4
JDK 1.6.0-b73
Eclipse 3.2M5a (-Xms256m -Xmx256m)
EMF 2.2M5
GEF 3.2M5
VE 1.2M1
WTP 1.5M4

Reformating large XSD files (large XML files in general I assume) brings Eclipse to a stand-still. In this particular case I tried to reformat OTA_TravelItinerary.xsd (801 kB) from the Netbeans 5.5 Preview. The Java process took 100% of my system resources for at least 3 minutes. (After 3 minutes I killed the Eclipse application.)

BTW: Opening this file took also very long.
Doing a Search &amp; Replace brings Eclipse to a stand-still, too. 


*** This bug has been marked as a duplicate of 102822 ***
verifying this is a duplicate and closing</WithStack>
    <WithOutStack>W2k SP4
JDK 1.6.0-b73
Eclipse 3.2M5a (-Xms256m -Xmx256m)
EMF 2.2M5
GEF 3.2M5
VE 1.2M1
WTP 1.5M4

Reformating large XSD files (large XML files in general I assume) brings Eclipse to a stand-still. In this particular case I tried to reformat OTA_TravelItinerary.xsd (801 kB) from the Netbeans 5.5 Preview. The Java process took 100% of my system resources for at least 3 minutes. (After 3 minutes I killed the Eclipse application.)

BTW: Opening this file took also very long.
Doing a Search &amp; Replace brings Eclipse to a stand-still, too. 


*** This bug has been marked as a duplicate of 102822 ***
verifying this is a duplicate and closing</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="129538" />
    <CreationDate amount="2006-02-27 05:00:00 -0500" />
    <DupId amount="" />
    <classification amount="DataTools" />
    <Product amount="Data Tools" />
    <component amount="SQLDevTools" />
    <Version amount="0.7" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows 2000" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Unable to remember the connection info for SQL editor</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>Fixed.
closed
*** Bug 150377 has been marked as a duplicate of this bug. ***</WithStack>
    <WithOutStack>Fixed.
closed
*** Bug 150377 has been marked as a duplicate of this bug. ***</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="129539" />
    <CreationDate amount="2006-02-27 05:03:00 -0500" />
    <DupId amount="" />
    <classification amount="DataTools" />
    <Product amount="Data Tools" />
    <component amount="SQLDevTools" />
    <Version amount="0.7" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows 2000" />
    <priority amount="P3" />
    <bug_severity amount="critical" />
    <Summery>Run as "SQL Routine" does not work</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>Select a stored procedure in DSE, choose "Run as" -&gt; "SQL Routine", an error dialog will popup saying "The selection is not a stored procedure".
This is fixed. Now the launch shortcut works both for all procedural objects. Context menu "Run..." both in DSE and Routine Editor is added too.
verified</WithStack>
    <WithOutStack>Select a stored procedure in DSE, choose "Run as" -&gt; "SQL Routine", an error dialog will popup saying "The selection is not a stored procedure".
This is fixed. Now the launch shortcut works both for all procedural objects. Context menu "Run..." both in DSE and Routine Editor is added too.
verified</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="129540" />
    <CreationDate amount="2006-02-27 05:09:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="Compare" />
    <Version amount="3.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows All" />
    <priority amount="P3" />
    <bug_severity amount="major" />
    <Summery>BIDI: direction of code in "compare with" window is RTL</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="4">
        <Lines>
          <Line>1. Run Eclipse using -rtl attribute.</Line>
          <Line>2. Create a Java class.</Line>
          <Line>3. Verify it opens in editor in LTR dir.</Line>
          <Line>4. Right click on the class name and select "Compare with -&gt; Local history"</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>Description:
When launching Eclipse with RTL dir, a java file stays in LTR direction (which is good). However, when using the "Compare with" function, the source code file is shown in RTL direction. It should be also displayed in LTR direction since it contains source code.

Scenario:
1. Run Eclipse using -rtl attribute.
2. Create a Java class.
3. Verify it opens in editor in LTR dir.
4. Right click on the class name and select "Compare with -&gt; Local history"

Result: The compare wizard is displayed the file in RTL orientation in both sides.

Note: There is another problem regarding this wizard:
If the file contains long lines thus the java source compare windows have horizontal scroolbar, the text is being curropted once one drag the scrollbar to the left and back to the right. Sometimes it should be done several times in order to see the curruption text.
An attachment is to be attached.
Created attachment 35397
Screenshot describes the curroption occured in text when using the scrollbar
Okay, not sure UI is the right component.
The editor in the view is not being created with the right flags.

Amir, when the first problem is fixed you probably won't see the pixel corruption anymore. But I think you should open separated problem report to make sure the problem gets looked at.


I suspect that this is a compare issue...feel free to punt back if you disagree.

The editor needs to override WorkbenchPart.getOrientation() to return SWT.LEFT_TO_RIGHT if the editor is java code or xml - otherwise the locale's default orientation (in this case RTL) will be used.  
Can this be resolved for 3.2?  This bug is on the list of sev 1 defects from
IES.
This is a pretty easy fix.  All you need to do is override
IWorkbenchPartOrientation#getOrientation() 
to 
return SWT.LEFT_TO_RIGHT 
for the editor part class the implements the compare editor (is it the
CompareEditor class).  Can someone please look at this bug?
No, I don't think this is an easy fix.
The problem is that the CompareEditor doesn't know whether its showing Java or XML.
It is a Viewer inside the editor that knows this, but this Viewer is switched dynamically.

But this viewer uses a SourceViewer which is based on a StyledText.
So what is the mechanism to control BIDI direction for a SourceViewer or a StyledText?
Eek, so it is complicated.  You can create a StyledText with the SWT#LEFT_TO_RIGHT style bit.  I don't know of a way to hard code the orientation of a Viewer.  Felipe, do you have any suggestions?
I don't know anything about viewer, sorry.

In StyledText you can change the orientation on the fly using StyledText#setOrientation(int). Does that help ?

Imporant question for the BIDI experts:
Is it correct that the two sides of a compare editor are flipped in Right-to-Left mode?

If yes, this means that the direction of "incoming" (blue arrow pointing to the left) and "outgoing" (black arrow point to right) would have to be flipped too.

fixed for &gt; 20060410
In RTL mode indeed the two sides of a compare editor are flipped.
For the arrows, I don't really know which arrows you intend to.
With my fix the sides of Compare are no longer flipped.
This means that arrow icon directions don't have to change.
verifying...
verified that the compare viewer shows Java code always LTR.
Works at build I20060505</WithStack>
    <WithOutStack>Description:
When launching Eclipse with RTL dir, a java file stays in LTR direction (which is good). However, when using the "Compare with" function, the source code file is shown in RTL direction. It should be also displayed in LTR direction since it contains source code.

Scenario:
1. Run Eclipse using -rtl attribute.
2. Create a Java class.
3. Verify it opens in editor in LTR dir.
4. Right click on the class name and select "Compare with -&gt; Local history"

Result: The compare wizard is displayed the file in RTL orientation in both sides.

Note: There is another problem regarding this wizard:
If the file contains long lines thus the java source compare windows have horizontal scroolbar, the text is being curropted once one drag the scrollbar to the left and back to the right. Sometimes it should be done several times in order to see the curruption text.
An attachment is to be attached.
Created attachment 35397
Screenshot describes the curroption occured in text when using the scrollbar
Okay, not sure UI is the right component.
The editor in the view is not being created with the right flags.

Amir, when the first problem is fixed you probably won't see the pixel corruption anymore. But I think you should open separated problem report to make sure the problem gets looked at.


I suspect that this is a compare issue...feel free to punt back if you disagree.

The editor needs to override WorkbenchPart.getOrientation() to return SWT.LEFT_TO_RIGHT if the editor is java code or xml - otherwise the locale's default orientation (in this case RTL) will be used.  
Can this be resolved for 3.2?  This bug is on the list of sev 1 defects from
IES.
This is a pretty easy fix.  All you need to do is override
IWorkbenchPartOrientation#getOrientation() 
to 
return SWT.LEFT_TO_RIGHT 
for the editor part class the implements the compare editor (is it the
CompareEditor class).  Can someone please look at this bug?
No, I don't think this is an easy fix.
The problem is that the CompareEditor doesn't know whether its showing Java or XML.
It is a Viewer inside the editor that knows this, but this Viewer is switched dynamically.

But this viewer uses a SourceViewer which is based on a StyledText.
So what is the mechanism to control BIDI direction for a SourceViewer or a StyledText?
Eek, so it is complicated.  You can create a StyledText with the SWT#LEFT_TO_RIGHT style bit.  I don't know of a way to hard code the orientation of a Viewer.  Felipe, do you have any suggestions?
I don't know anything about viewer, sorry.

In StyledText you can change the orientation on the fly using StyledText#setOrientation(int). Does that help ?

Imporant question for the BIDI experts:
Is it correct that the two sides of a compare editor are flipped in Right-to-Left mode?

If yes, this means that the direction of "incoming" (blue arrow pointing to the left) and "outgoing" (black arrow point to right) would have to be flipped too.

fixed for &gt; 20060410
In RTL mode indeed the two sides of a compare editor are flipped.
For the arrows, I don't really know which arrows you intend to.
With my fix the sides of Compare are no longer flipped.
This means that arrow icon directions don't have to change.
verifying...
verified that the compare viewer shows Java code always LTR.
Works at build I20060505</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="129541" />
    <CreationDate amount="2006-02-27 05:11:00 -0500" />
    <DupId amount="" />
    <classification amount="SOA" />
    <Product amount="BPEL" />
    <component amount="UI" />
    <Version amount="1.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Allow ordering of palette Categories</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>Adding a new palette category using org.eclipse.bpel.ui.actions - category EP lets the category appear after the Zoom In/Zoom Out tools. This should only be the default. There should be a way of specifiying the order of categories, e.g. specifiying after which category the new category should appear. Or at least have the Zoom tools at the bottom of the palette and insert additional categories above.
I have a fix for this ... should be checked in at some point. 
This has been checked in. The altered extension point allows to specify categories, and place them in some relative order. There is a plugin 
org.eclipse.bpel.examples.extensionPoints which shows this.</WithStack>
    <WithOutStack>Adding a new palette category using org.eclipse.bpel.ui.actions - category EP lets the category appear after the Zoom In/Zoom Out tools. This should only be the default. There should be a way of specifiying the order of categories, e.g. specifiying after which category the new category should appear. Or at least have the Zoom tools at the bottom of the palette and insert additional categories above.
I have a fix for this ... should be checked in at some point. 
This has been checked in. The altered extension point allows to specify categories, and place them in some relative order. There is a plugin 
org.eclipse.bpel.examples.extensionPoints which shows this.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="129542" />
    <CreationDate amount="2006-02-27 05:15:00 -0500" />
    <DupId amount="" />
    <classification amount="SOA" />
    <Product amount="BPEL" />
    <component amount="UI" />
    <Version amount="1.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="minor" />
    <Summery>Enable category name for additional categories</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>When creating a category from an extension the name is currently set to be blank (""). 

GraphicalEditorWithPalette.class
method createPaletteAdditions()

Line 192
I have a fix for this that is not checked in yet. It involves a change to the paletteAddtion extension point that hopefully does not break anything.
Created attachment 69577
Palette with named categories

This the screen shot of the palette with categories that are not empty.
Added this today to the tip</WithStack>
    <WithOutStack>When creating a category from an extension the name is currently set to be blank (""). 

GraphicalEditorWithPalette.class
method createPaletteAdditions()

Line 192
I have a fix for this that is not checked in yet. It involves a change to the paletteAddtion extension point that hopefully does not break anything.
Created attachment 69577
Palette with named categories

This the screen shot of the palette with categories that are not empty.
Added this today to the tip</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="129543" />
    <CreationDate amount="2006-02-27 05:29:00 -0500" />
    <DupId amount="" />
    <classification amount="WebTools" />
    <Product amount="WTP Source Editing" />
    <component amount="wst.xsd" />
    <Version amount="1.5" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows 2000" />
    <priority amount="P3" />
    <bug_severity amount="enhancement" />
    <Summery>Nice Netbeans 5.5 preview features</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="NEW" />
    <resolution amount="" />
    <WithStack>I like the way XML schema handling is done in the Netbeans 5.5 preview. Most notably the multi-column view, the analysis view, the schema documentation feature, and the wizards for adding new elements / new types.

Are similar features planed for a forthcoming WST version?
Reviewed for WTP 1.5.  Marc, this is not in plan for 1.5.
There are no plans to implement any of this, but we would accept high quality patches.</WithStack>
    <WithOutStack>I like the way XML schema handling is done in the Netbeans 5.5 preview. Most notably the multi-column view, the analysis view, the schema documentation feature, and the wizards for adding new elements / new types.

Are similar features planed for a forthcoming WST version?
Reviewed for WTP 1.5.  Marc, this is not in plan for 1.5.
There are no plans to implement any of this, but we would accept high quality patches.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="129544" />
    <CreationDate amount="2006-02-27 05:32:00 -0500" />
    <DupId amount="" />
    <classification amount="BIRT" />
    <Product amount="BIRT" />
    <component amount="Report Designer" />
    <Version amount="2.0.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P1" />
    <bug_severity amount="normal" />
    <Summery>Move preview preference from ui plugin to preview plugin</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>With new plugin structure, the preview are in seperate plug-in. Need move preview preference related classed from ui plug-in to new preview plug-in.
Remove preview preference to preview plug-in, fixed.</WithStack>
    <WithOutStack>With new plugin structure, the preview are in seperate plug-in. Need move preview preference related classed from ui plug-in to new preview plug-in.
Remove preview preference to preview plug-in, fixed.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="129545" />
    <CreationDate amount="2006-02-27 05:51:00 -0500" />
    <DupId amount="" />
    <classification amount="BIRT" />
    <Product amount="BIRT" />
    <component amount="Data" />
    <Version amount="2.0.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows All" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>HCG_BIDI: NLS chars are not processed with ODBC access</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="10">
        <Lines>
          <Line>1. Create MS Access database file in path including NLS chars with filename including NLS chars</Line>
          <Line>2. Create 2 ODBC. One with Latin name pointing to the file in step 1. Another one with NLS name pointing to the file in step 1</Line>
          <Line>3. Start creating new Data Source in BIRT. Select Sun ODBC-JDBC bridge driver.</Line>
          <Line>4. Specify Latin ODBC name (from step 2) in the Database URL</Line>
          <Line>5. Test the connection.</Line>
          <Line />
          <Line>Result: The connection is successful</Line>
          <Line />
          <Line>6. Specify NLS ODBC name (from step 2) in the Database URL</Line>
          <Line>7. Test the connection</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="RESOLVED" />
    <resolution amount="INVALID" />
    <WithStack>This is not BiDi specific but general NL problem.

1. Create MS Access database file in path including NLS chars with filename including NLS chars
2. Create 2 ODBC. One with Latin name pointing to the file in step 1. Another one with NLS name pointing to the file in step 1
3. Start creating new Data Source in BIRT. Select Sun ODBC-JDBC bridge driver.
4. Specify Latin ODBC name (from step 2) in the Database URL
5. Test the connection.

Result: The connection is successful

6. Specify NLS ODBC name (from step 2) in the Database URL
7. Test the connection

Result: The connection fails.

The problem is probably with code page conversion inside Sun ODBC-JDBC bridge driver since MS Windows does allow creation of ODBC with NLS name.
ODBC data base is not recommended to be used, since there are some potential issue in ODBC-JDBC bridge.
The problem turns to be not only with ODBC name but with every piece of NLS data including following levels:
   Database NLS name
   Table NLS Name
   Table Column NLS Name
   Run time NLS data from any column
 NLS data either causes run time exception or appears as question marks in BIRT.

  Since in the TC provided by BIRT team here: ftp://rtpgsa.raleigh.ibm.com/projects/w/wswb/anonymous/in/IES_3.2_EnablementTestCases/ NLS data is used and demonstrated using ODBC driver I understand that this is a real problem.
The Sun JDBC-ODBC bridge is known not to be able to access Unicode/NLS data. For this reason this driver is specifically not supported by BIRT. It is meant to be used as a quick prototyping tool for demo purposes (when it works). We do not investigate problems that arise from the use of this driver.</WithStack>
    <WithOutStack>This is not BiDi specific but general NL problem.

1. Create MS Access database file in path including NLS chars with filename including NLS chars
2. Create 2 ODBC. One with Latin name pointing to the file in step 1. Another one with NLS name pointing to the file in step 1
3. Start creating new Data Source in BIRT. Select Sun ODBC-JDBC bridge driver.
4. Specify Latin ODBC name (from step 2) in the Database URL
5. Test the connection.

Result: The connection is successful

6. Specify NLS ODBC name (from step 2) in the Database URL
7. Test the connection

Result: The connection fails.

The problem is probably with code page conversion inside Sun ODBC-JDBC bridge driver since MS Windows does allow creation of ODBC with NLS name.
ODBC data base is not recommended to be used, since there are some potential issue in ODBC-JDBC bridge.
The problem turns to be not only with ODBC name but with every piece of NLS data including following levels:
   Database NLS name
   Table NLS Name
   Table Column NLS Name
   Run time NLS data from any column
 NLS data either causes run time exception or appears as question marks in BIRT.

  Since in the TC provided by BIRT team here: ftp://rtpgsa.raleigh.ibm.com/projects/w/wswb/anonymous/in/IES_3.2_EnablementTestCases/ NLS data is used and demonstrated using ODBC driver I understand that this is a real problem.
The Sun JDBC-ODBC bridge is known not to be able to access Unicode/NLS data. For this reason this driver is specifically not supported by BIRT. It is meant to be used as a quick prototyping tool for demo purposes (when it works). We do not investigate problems that arise from the use of this driver.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="129546" />
    <CreationDate amount="2006-02-27 05:56:00 -0500" />
    <DupId amount="" />
    <classification amount="WebTools" />
    <Product amount="WTP Source Editing" />
    <component amount="wst.sse" />
    <Version amount="1.5" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows 2000" />
    <priority amount="P3" />
    <bug_severity amount="enhancement" />
    <Summery>Tighter integration with "standard" editor</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="INVALID" />
    <WithStack>I would like to see a tighter integration with the "standard" editor. E.g. a global undo/redo for all WST artifacts, centralized formating properties (line width, indentation, ...)
Especially for XSD editing I would like to see a formating option to keep additional line breaks between global elements / global types.
Marc, could you separate this into different requests?  Participation in global undo sounds very different from centralized formatting--what is centralized formatting and which editor are you referring to as the "standard" editor?
reassigning to inbox
this has not been touched in 3 years and originator did not respond to developer question in comment #1, .  My vote is to resolve.
resolving</WithStack>
    <WithOutStack>I would like to see a tighter integration with the "standard" editor. E.g. a global undo/redo for all WST artifacts, centralized formating properties (line width, indentation, ...)
Especially for XSD editing I would like to see a formating option to keep additional line breaks between global elements / global types.
Marc, could you separate this into different requests?  Participation in global undo sounds very different from centralized formatting--what is centralized formatting and which editor are you referring to as the "standard" editor?
reassigning to inbox
this has not been touched in 3 years and originator did not respond to developer question in comment #1, .  My vote is to resolve.
resolving</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="129547" />
    <CreationDate amount="2006-02-27 06:03:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="JDT" />
    <component amount="UI" />
    <Version amount="3.1.2" />
    <rep_platform amount="All" />
    <op_sys amount="All" />
    <priority amount="P3" />
    <bug_severity amount="enhancement" />
    <Summery>[hashcode/equals] add preference for instanceof [code generation]</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="1">
      <source_code type="class">
        <location start="1313" end="1661" />
        <code>public class MyDefinitionOfEqual implements Comparator {
  public int compareTo(Object one, Object two) {
    e1 = (MyEjb)one;
    e2 = (MyEjb)two;
    if (e1.getA().equals(e2.getA()) &amp;&amp; e1.getB().equals(e2.getB()) ...
       return 0;
    else
       if (one.hashCode() &gt; two.hashCode()) 
          return 1;
       else
          return -1;
  }
}</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="0" />
    <bug_status amount="VERIFIED" />
    <resolution amount="FIXED" />
    <WithStack>Hibernate can load a POJO from a DB. However, it instanciates a proxy class instead of the real POJO class. This allows it to lazily load the attributes when a getter is invoked. However, if equals() or hashCode() is called before any of these getters is called, then the attribute values are null or 0.

If there was an option (yes, I hate these as much as the next person) to use getter methods instead of direct access to the data members, that would be great.

There is still a problem for these Hibernate/EJB3 pojos. The equals() code uses getClass() == other.getClass(). Because other is a proxy, this always fails. I have read all the discussion about this in JavaLobby, and I understand the reasons for doing this, but for my hibernate objects, I must change it to using instanceof. Again, I would be happy with an option in the generate dialog.
Using instanceof is invalid in an .equals method, since it's asymmetric, and the equals() clearly states that it must be symmetric.

That said, it's possible to use a Comparator if you want to define another relation on top of two objects to determine if they return the same values returned by accessors. This is very useful when the type is defined by an interface (as opposed to an implementation) and there may be many concurrent providers of this code.

public class MyDefinitionOfEqual implements Comparator {
  public int compareTo(Object one, Object two) {
    e1 = (MyEjb)one;
    e2 = (MyEjb)two;
    if (e1.getA().equals(e2.getA()) &amp;&amp; e1.getB().equals(e2.getB()) ...
       return 0;
    else
       if (one.hashCode() &gt; two.hashCode()) 
          return 1;
       else
          return -1;
  }
}
That said, it would be nice if there was a way of generating comparators automatically based on the getXxxx properties that were present in an object's type. It'd be useful for any classes where you deal by interface instead of by class, not just in the EJB3/hibernate world.
Moving to JDT UI
The problem of computing a perfect hashCode()/equals() for every type cannot be solved. The generated code is designed to solve the most frequent cases, such as simple agreggation or delegation. More efficient implementations are usually possible depending on the domain elements, but cannot be automatically generated. Introducing a preference would allow to handle lazily created object state.
Not for 3.2
Since I opened this bug, I have discovered that it is better to place the EJB3 annotations on the data members (please excuse the C++ jargon - you can't teach an old dog new tricks!) instead of on the getters. So, now I only need to support for using instanceof instead of getClass() == obj.getClass(). I'm quite happy to wait until Eclipse 3.3 comes out.
Added preference to generate instanceof comparison (which ultimately is wrong, but very useful if the domain elements have different implementations)

Fixed in HEAD &gt; 20060614
verified in I20060807-2000.from20060809_1627
I haven't seen 3.3, yet. Is this something I have to set in the prefs or something which I can quickly change in the generate dialog?

Background: I have hibernate and "normal" projects, so I would prefer a solution which is either attached to the project or to the dialog itself. A global option would be very clumsy for me.
Arguably, this should not have been put in.

NB Screenshot is at http://www.eclipsezone.com/eclipse/forums/t92613.html if you're interested.
Re "instanceof is wrong":
The version with "instanceof" would be correct if the equals method was made final (since this would force the same equality contract on all subclasses).

Jonathan, would that still work for Hibernate's proxy objects?</WithStack>
    <WithOutStack>Hibernate can load a POJO from a DB. However, it instanciates a proxy class instead of the real POJO class. This allows it to lazily load the attributes when a getter is invoked. However, if equals() or hashCode() is called before any of these getters is called, then the attribute values are null or 0.

If there was an option (yes, I hate these as much as the next person) to use getter methods instead of direct access to the data members, that would be great.

There is still a problem for these Hibernate/EJB3 pojos. The equals() code uses getClass() == other.getClass(). Because other is a proxy, this always fails. I have read all the discussion about this in JavaLobby, and I understand the reasons for doing this, but for my hibernate objects, I must change it to using instanceof. Again, I would be happy with an option in the generate dialog.
Using instanceof is invalid in an .equals method, since it's asymmetric, and the equals() clearly states that it must be symmetric.

That said, it's possible to use a Comparator if you want to define another relation on top of two objects to determine if they return the same values returned by accessors. This is very useful when the type is defined by an interface (as opposed to an implementation) and there may be many concurrent providers of this code.

public class MyDefinitionOfEqual implements Comparator {
  public int compareTo(Object one, Object two) {
    e1 = (MyEjb)one;
    e2 = (MyEjb)two;
    if (e1.getA().equals(e2.getA()) &amp;&amp; e1.getB().equals(e2.getB()) ...
       return 0;
    else
       if (one.hashCode() &gt; two.hashCode()) 
          return 1;
       else
          return -1;
  }
}
That said, it would be nice if there was a way of generating comparators automatically based on the getXxxx properties that were present in an object's type. It'd be useful for any classes where you deal by interface instead of by class, not just in the EJB3/hibernate world.
Moving to JDT UI
The problem of computing a perfect hashCode()/equals() for every type cannot be solved. The generated code is designed to solve the most frequent cases, such as simple agreggation or delegation. More efficient implementations are usually possible depending on the domain elements, but cannot be automatically generated. Introducing a preference would allow to handle lazily created object state.
Not for 3.2
Since I opened this bug, I have discovered that it is better to place the EJB3 annotations on the data members (please excuse the C++ jargon - you can't teach an old dog new tricks!) instead of on the getters. So, now I only need to support for using instanceof instead of getClass() == obj.getClass(). I'm quite happy to wait until Eclipse 3.3 comes out.
Added preference to generate instanceof comparison (which ultimately is wrong, but very useful if the domain elements have different implementations)

Fixed in HEAD &gt; 20060614
verified in I20060807-2000.from20060809_1627
I haven't seen 3.3, yet. Is this something I have to set in the prefs or something which I can quickly change in the generate dialog?

Background: I have hibernate and "normal" projects, so I would prefer a solution which is either attached to the project or to the dialog itself. A global option would be very clumsy for me.
Arguably, this should not have been put in.

NB Screenshot is at http://www.eclipsezone.com/eclipse/forums/t92613.html if you're interested.
Re "instanceof is wrong":
The version with "instanceof" would be correct if the equals method was made final (since this would force the same equality contract on all subclasses).

Jonathan, would that still work for Hibernate's proxy objects?</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="129548" />
    <CreationDate amount="2006-02-27 06:19:00 -0500" />
    <DupId amount="206169" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="User Assistance" />
    <Version amount="3.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>[Forms] Want to subclasss FormPage but don't want to have a scrolled composite</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="1">
      <source_code type="functiondef">
        <location start="887" end="1041" />
        <code>public Point computeSize(int wHint, int hHint, boolean changed) {
	return new Point(wHint == SWT.DEFAULT ? 1 : wHint, hHint == SWT.DEFAULT ? 1 : hHint);
}</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="DUPLICATE" />
    <WithStack>I have a form page which has a child which manages its own scroll bars. However when resizing the page I get into states where I temporarily see to scroll bars.  I would like to tell the FromPage to not create a scrolled from.
Normally it should not happen. You still want to have the outer scroll bars in extreme cases where the sum of the child and the form title is larger than the viewport. Try setting the layout information for the client such that the form is not confused to think the client is larger than it needs to be.

A test case would help to go into details here.
It doesn't end up in a state with two scroll bars. So no easy test case. What happens is if you make the editor smaller and this very fast then during the resizing you temporarily see an additional vertical scroll bar added by the scrolled composite.

The compute size method of my widget looks like this:

public Point computeSize(int wHint, int hHint, boolean changed) {
	return new Point(wHint == SWT.DEFAULT ? 1 : wHint, hHint == SWT.DEFAULT ? 1 : hHint);
}
	

So I think it will never be to big unless the form editor passes in a bogus wHint or hHint.



Dejan, puntng to you since Nick says you're the UA dude...

Dirk, I just want to confirm that the only problem here is that scroll bars are showing in intermediate states while resizing your editor.

If so, can you confirm that this is a duplicate of bug 206169?
Closing as DUPLICATE. Dirk, please reopen if this is not correct.

*** This bug has been marked as a duplicate of bug 206169 ***</WithStack>
    <WithOutStack>I have a form page which has a child which manages its own scroll bars. However when resizing the page I get into states where I temporarily see to scroll bars.  I would like to tell the FromPage to not create a scrolled from.
Normally it should not happen. You still want to have the outer scroll bars in extreme cases where the sum of the child and the form title is larger than the viewport. Try setting the layout information for the client such that the form is not confused to think the client is larger than it needs to be.

A test case would help to go into details here.
It doesn't end up in a state with two scroll bars. So no easy test case. What happens is if you make the editor smaller and this very fast then during the resizing you temporarily see an additional vertical scroll bar added by the scrolled composite.

The compute size method of my widget looks like this:

public Point computeSize(int wHint, int hHint, boolean changed) {
	return new Point(wHint == SWT.DEFAULT ? 1 : wHint, hHint == SWT.DEFAULT ? 1 : hHint);
}
	

So I think it will never be to big unless the form editor passes in a bogus wHint or hHint.



Dejan, puntng to you since Nick says you're the UA dude...

Dirk, I just want to confirm that the only problem here is that scroll bars are showing in intermediate states while resizing your editor.

If so, can you confirm that this is a duplicate of bug 206169?
Closing as DUPLICATE. Dirk, please reopen if this is not correct.

*** This bug has been marked as a duplicate of bug 206169 ***</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="129549" />
    <CreationDate amount="2006-02-27 06:26:00 -0500" />
    <DupId amount="" />
    <classification amount="Tools" />
    <Product amount="CDT" />
    <component amount="cdt-parser" />
    <Version amount="3.0.1" />
    <rep_platform amount="PC" />
    <op_sys amount="Linux-Motif" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>NullPointerException during indexing</Summery>
    <Patches amount="0" />
    <Stacktraces amount="1">
      <Stacktrace timestamp="1437330672122">
        <Exception>java.lang.NullPointerException</Exception>
        <Reason />
        <Frames>
          <Frame depth="0">org.eclipse.cdt.internal.core.dom.parser.c.CVisitor.createBinding(CVisitor.java:530)</Frame>
          <Frame depth="1">org.eclipse.cdt.internal.core.dom.parser.c.CVisitor.createBinding(CVisitor.java:468)</Frame>
          <Frame depth="2">org.eclipse.cdt.internal.core.dom.parser.c.CASTName.resolveBinding(CASTName.java:52)</Frame>
          <Frame depth="3">org.eclipse.cdt.internal.core.dom.parser.c.CFunctionScope.getLabels(CFunctionScope.java:61)</Frame>
          <Frame depth="4">org.eclipse.cdt.internal.core.dom.parser.c.CVisitor.createBinding(CVisitor.java:516)</Frame>
          <Frame depth="5">org.eclipse.cdt.internal.core.dom.parser.c.CVisitor.createBinding(CVisitor.java:468)</Frame>
          <Frame depth="6">org.eclipse.cdt.internal.core.dom.parser.c.CASTName.resolveBinding(CASTName.java:52)</Frame>
          <Frame depth="7">org.eclipse.cdt.internal.core.index.domsourceindexer.CGenerateIndexVisitor.processName(CGenerateIndexVisitor.java:116)</Frame>
          <Frame depth="8">org.eclipse.cdt.internal.core.index.domsourceindexer.CGenerateIndexVisitor.visit(CGenerateIndexVisitor.java:80)</Frame>
          <Frame depth="9">org.eclipse.cdt.internal.core.dom.parser.c.CASTName.accept(CASTName.java:86)</Frame>
          <Frame depth="10">org.eclipse.cdt.internal.core.dom.parser.c.CASTGotoStatement.accept(CASTGotoStatement.java:46)</Frame>
          <Frame depth="11">org.eclipse.cdt.internal.core.dom.parser.c.CASTCompoundStatement.accept(CASTCompoundStatement.java:67)</Frame>
          <Frame depth="12">org.eclipse.cdt.internal.core.dom.parser.c.CASTWhileStatement.accept(CASTWhileStatement.java:65)</Frame>
          <Frame depth="13">org.eclipse.cdt.internal.core.dom.parser.c.CASTCompoundStatement.accept(CASTCompoundStatement.java:67)</Frame>
          <Frame depth="14">org.eclipse.cdt.internal.core.dom.parser.c.CASTFunctionDefinition.accept(CASTFunctionDefinition.java:96)</Frame>
          <Frame depth="15">org.eclipse.cdt.internal.core.dom.parser.c.CASTTranslationUnit.accept(CASTTranslationUnit.java:481)</Frame>
          <Frame depth="16">org.eclipse.cdt.internal.core.index.domsourceindexer.DOMSourceIndexerRunner.indexFile(DOMSourceIndexerRunner.java:133)</Frame>
          <Frame depth="17">org.eclipse.cdt.internal.core.index.domsourceindexer.AbstractIndexerRunner.index(AbstractIndexerRunner.java:76)</Frame>
          <Frame depth="18">org.eclipse.cdt.internal.core.index.cindexstorage.Index.add(Index.java:110)</Frame>
          <Frame depth="19">org.eclipse.cdt.internal.core.index.domsourceindexer.DOMAddCompilationUnitToIndex.indexDocument(DOMAddCompilationUnitToIndex.java:29)</Frame>
          <Frame depth="20">org.eclipse.cdt.internal.core.index.domsourceindexer.DOMAddFileToIndex.execute(DOMAddFileToIndex.java:60)</Frame>
          <Frame depth="21">org.eclipse.cdt.internal.core.search.processing.JobManager.run(JobManager.java:466)</Frame>
          <Frame depth="22">java.lang.Thread.run(Thread.java:534)</Frame>
        </Frames>
      </Stacktrace>
    </Stacktraces>
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>I started indexing a large project (~62000 c/h/cc/hh files in hundreds of directories). After 2 or 3 % completed I got:

java.lang.NullPointerException
        at org.eclipse.cdt.internal.core.dom.parser.c.CVisitor.createBinding(CVisitor.java:530)
        at org.eclipse.cdt.internal.core.dom.parser.c.CVisitor.createBinding(CVisitor.java:468)
        at org.eclipse.cdt.internal.core.dom.parser.c.CASTName.resolveBinding(CASTName.java:52)
        at org.eclipse.cdt.internal.core.dom.parser.c.CFunctionScope.getLabels(CFunctionScope.java:61)
        at org.eclipse.cdt.internal.core.dom.parser.c.CVisitor.createBinding(CVisitor.java:516)
        at org.eclipse.cdt.internal.core.dom.parser.c.CVisitor.createBinding(CVisitor.java:468)
        at org.eclipse.cdt.internal.core.dom.parser.c.CASTName.resolveBinding(CASTName.java:52)
        at org.eclipse.cdt.internal.core.index.domsourceindexer.CGenerateIndexVisitor.processName(CGenerateIndexVisitor.java:116)
        at org.eclipse.cdt.internal.core.index.domsourceindexer.CGenerateIndexVisitor.visit(CGenerateIndexVisitor.java:80)
        at org.eclipse.cdt.internal.core.dom.parser.c.CASTName.accept(CASTName.java:86)
        at org.eclipse.cdt.internal.core.dom.parser.c.CASTGotoStatement.accept(CASTGotoStatement.java:46)
        at org.eclipse.cdt.internal.core.dom.parser.c.CASTCompoundStatement.accept(CASTCompoundStatement.java:67)
        at org.eclipse.cdt.internal.core.dom.parser.c.CASTWhileStatement.accept(CASTWhileStatement.java:65)
        at org.eclipse.cdt.internal.core.dom.parser.c.CASTCompoundStatement.accept(CASTCompoundStatement.java:67)
        at org.eclipse.cdt.internal.core.dom.parser.c.CASTFunctionDefinition.accept(CASTFunctionDefinition.java:96)
        at org.eclipse.cdt.internal.core.dom.parser.c.CASTTranslationUnit.accept(CASTTranslationUnit.java:481)
        at org.eclipse.cdt.internal.core.index.domsourceindexer.DOMSourceIndexerRunner.indexFile(DOMSourceIndexerRunner.java:133)
        at org.eclipse.cdt.internal.core.index.domsourceindexer.AbstractIndexerRunner.index(AbstractIndexerRunner.java:76)
        at org.eclipse.cdt.internal.core.index.cindexstorage.Index.add(Index.java:110)
        at org.eclipse.cdt.internal.core.index.domsourceindexer.DOMAddCompilationUnitToIndex.indexDocument(DOMAddCompilationUnitToIndex.java:29)
        at org.eclipse.cdt.internal.core.index.domsourceindexer.DOMAddFileToIndex.execute(DOMAddFileToIndex.java:60)
        at org.eclipse.cdt.internal.core.search.processing.JobManager.run(JobManager.java:466)
        at java.lang.Thread.run(Thread.java:534)


The indexing never proceeds further after getting this exceptions.
I wrote a question about this :
http://www.eclipse.org/newsportal/article.php?id=9763&amp;group=eclipse.tools.cdt#9763 

The 127969 bug may be connected.
Looks like the exception was already fixed in 3.1. It is gone in 4.0, for sure.</WithStack>
    <WithOutStack>I started indexing a large project (~62000 c/h/cc/hh files in hundreds of directories). After 2 or 3 % completed I got:




The indexing never proceeds further after getting this exceptions.
I wrote a question about this :
http://www.eclipse.org/newsportal/article.php?id=9763&amp;group=eclipse.tools.cdt#9763 

The 127969 bug may be connected.
Looks like the exception was already fixed in 3.1. It is gone in 4.0, for sure.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="129550" />
    <CreationDate amount="2006-02-27 06:26:00 -0500" />
    <DupId amount="76455" />
    <classification amount="RT" />
    <Product amount="Equinox" />
    <component amount="Framework" />
    <Version amount="3.1.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Linux" />
    <priority amount="P3" />
    <bug_severity amount="critical" />
    <Summery>BundleLoader not correctly loads array classes from required sources</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="3">
      <source_code type="assignment">
        <location start="346" end="400" />
        <code>ClassLoader classLoader = getClass().getClassLoader();</code>
      </source_code>
      <source_code type="functioncall">
        <location start="407" end="455" />
        <code>classLoader.loadClass("[Lcom.sample.MyClass;");</code>
      </source_code>
      <source_code type="functiondef">
        <location start="458" end="516" />
        <code>catch (ClassNotFoundException e) {
	e.printStackTrace();
}</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="DUPLICATE" />
    <WithStack>The referenced class from the bug summary is:
org.eclipse.osgi.framework.internal.core.BundleLoader


Brief description of the situation, where the bugs occurs:

Let's have two plugins UI and COMMON.
UI is dependent on COMMON.
Let COMMON plugin contains a class "com.sample.MyClass".

Let UI plugin needs to load MyClass[] in the following way:

ClassLoader classLoader = getClass().getClassLoader();
try {
	classLoader.loadClass("[Lcom.sample.MyClass;");
}
catch (ClassNotFoundException e) {
	e.printStackTrace();
}


ClassNotFoundException will occur.

By means of code inspection in the BundleLoader class, I came
to the following conclusion:

the relevant method

BundleLoader#findClass(String name, boolean checkParent)

calls
getPackageName(name)

and this returns (in our sample case):
"[Lcom.sample"


Then the code in the method #findRequiredSource fails,
since the package name is not correct.


*** This bug has been marked as a duplicate of 76455 ***</WithStack>
    <WithOutStack>The referenced class from the bug summary is:
org.eclipse.osgi.framework.internal.core.BundleLoader


Brief description of the situation, where the bugs occurs:

Let's have two plugins UI and COMMON.
UI is dependent on COMMON.
Let COMMON plugin contains a class "com.sample.MyClass".

Let UI plugin needs to load MyClass[] in the following way:

ClassLoader classLoader = getClass().getClassLoader();
try {
	classLoader.loadClass("[Lcom.sample.MyClass;");
}
catch (ClassNotFoundException e) {
	e.printStackTrace();
}


ClassNotFoundException will occur.

By means of code inspection in the BundleLoader class, I came
to the following conclusion:

the relevant method

BundleLoader#findClass(String name, boolean checkParent)

calls
getPackageName(name)

and this returns (in our sample case):
"[Lcom.sample"


Then the code in the method #findRequiredSource fails,
since the package name is not correct.


*** This bug has been marked as a duplicate of 76455 ***</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="129551" />
    <CreationDate amount="2006-02-27 06:32:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="Runtime" />
    <Version amount="3.2" />
    <rep_platform amount="All" />
    <op_sys amount="All" />
    <priority amount="P2" />
    <bug_severity amount="major" />
    <Summery>[jobs] Test failures in refactoring tests: "Error changing from state: 16"</Summery>
    <Patches amount="0" />
    <Stacktraces amount="1">
      <Stacktrace timestamp="1437330672122">
        <Exception>java.lang.RuntimeException</Exception>
        <Reason>Error changing from state: 16</Reason>
        <Frames>
          <Frame depth="0">org.eclipse.core.internal.jobs.JobManager.changeState(JobManager.java:310)</Frame>
          <Frame depth="1">org.eclipse.core.internal.jobs.JobManager.sleep(JobManager.java:1058)</Frame>
          <Frame depth="2">org.eclipse.core.internal.jobs.InternalJob.sleep(InternalJob.java:497)</Frame>
          <Frame depth="3">org.eclipse.core.runtime.jobs.Job.sleep(Job.java:624)</Frame>
          <Frame depth="4">org.eclipse.core.internal.events.AutoBuildJob.interrupt(AutoBuildJob.java:116)</Frame>
          <Frame depth="5">org.eclipse.core.internal.events.BuildManager.interrupt(BuildManager.java:761)</Frame>
          <Frame depth="6">org.eclipse.core.internal.resources.Workspace.prepareOperation(Workspace.java:1681)</Frame>
          <Frame depth="7">org.eclipse.core.internal.resources.Resource.refreshLocal(Resource.java:1396)</Frame>
          <Frame depth="8">org.eclipse.jdt.ui.tests.refactoring.RefactoringTest.refreshFromLocal(RefactoringTest.java:130)</Frame>
          <Frame depth="9">org.eclipse.jdt.ui.tests.refactoring.RefactoringTest.tearDown(RefactoringTest.java:102)</Frame>
          <Frame depth="10">junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)</Frame>
          <Frame depth="11">junit.extensions.TestSetup$1.protect(TestSetup.java:19)</Frame>
          <Frame depth="12">junit.extensions.TestSetup.run(TestSetup.java:23)</Frame>
          <Frame depth="13">junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)</Frame>
          <Frame depth="14">junit.extensions.TestSetup$1.protect(TestSetup.java:19)</Frame>
          <Frame depth="15">junit.extensions.TestSetup.run(TestSetup.java:23)</Frame>
          <Frame depth="16">org.eclipse.test.EclipseTestRunner.run(EclipseTestRunner.java:330)</Frame>
          <Frame depth="17">org.eclipse.test.EclipseTestRunner.run(EclipseTestRunner.java:204)</Frame>
          <Frame depth="18">org.eclipse.test.UITestApplication$3.run(UITestApplication.java:188)</Frame>
          <Frame depth="19">org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35)</Frame>
          <Frame depth="20">org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:123)</Frame>
          <Frame depth="21">org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:3128)</Frame>
          <Frame depth="22">org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2892)</Frame>
          <Frame depth="23">org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1927)</Frame>
          <Frame depth="24">org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1891)</Frame>
          <Frame depth="25">org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:423)</Frame>
          <Frame depth="26">org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:143)</Frame>
          <Frame depth="27">org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:107)</Frame>
          <Frame depth="28">org.eclipse.test.UITestApplication.runApplication(UITestApplication.java:131)</Frame>
          <Frame depth="29">org.eclipse.test.UITestApplication.run(UITestApplication.java:58)</Frame>
          <Frame depth="30">org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:99)</Frame>
          <Frame depth="31">org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:92)</Frame>
          <Frame depth="32">org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:68)</Frame>
          <Frame depth="33">org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:374)</Frame>
          <Frame depth="34">org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:169)</Frame>
          <Frame depth="35">org.eclipse.core.launcher.Main.invokeFramework(Main.java:338)</Frame>
          <Frame depth="36">org.eclipse.core.launcher.Main.basicRun(Main.java:282)</Frame>
          <Frame depth="37">org.eclipse.core.launcher.Main.run(Main.java:977)</Frame>
          <Frame depth="38">org.eclipse.core.launcher.Main.main(Main.java:952)</Frame>
        </Frames>
      </Stacktrace>
    </Stacktraces>
    <SourceCodeRegions amount="2">
      <source_code type="functioncall">
        <location start="329" end="352" />
        <code>sleeping.enqueue(job);</code>
      </source_code>
      <source_code type="functiondef">
        <location start="353" end="456" />
        <code>} catch (RuntimeException e) {
	throw new RuntimeException("Error changing from state: " + oldState);
}</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="2">
      <Enumeration lines="5">
        <Lines>
          <Line>1) Job1 and Job2 are created and given the same scheduling rule</Line>
          <Line>2) Job1 is scheduled, followed by Job2</Line>
          <Line>3) Job1 is pulled from the wait queue by a worker thread and moved to the ABOUT_TO_RUN state.</Line>
          <Line>4) Another worker thread dequeues Job2, notices that it conflicts with Job1, and adds it to Job1's queue of blocked jobs.</Line>
          <Line>5) Job1 is put to sleep before it starts to run.  The sleep queue uses the same next and previous fields used to maintain the list of blocked jobs, so it causes an assertion error.</Line>
        </Lines>
      </Enumeration>
      <Enumeration lines="3">
        <Lines>
          <Line>- Are you using -Xj9 VM argument? If not, does it still fail with that arg?</Line>
          <Line>- Is your machine a dual processor?</Line>
          <Line>&gt;Are you using -Xj9 VM argument? If not, does it still fail with that arg?</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>N20060226-0010

We had test failures in jdt.ui.tests.refactoring and jdt.ui.tests on MacOS X:
http://download.eclipse.org/eclipse/downloads/drops/N20060226-0010/testresults/html/org.eclipse.jdt.ui.tests.refactoring_macosx.carbon.ppc.html

I have no idea why this happened. The code in JobManager that threw the exception:

try {
	sleeping.enqueue(job);
} catch (RuntimeException e) {
	throw new RuntimeException("Error changing from state: " + oldState);
}


Error changing from state: 16

java.lang.RuntimeException: Error changing from state: 16
at org.eclipse.core.internal.jobs.JobManager.changeState(JobManager.java:310)
at org.eclipse.core.internal.jobs.JobManager.sleep(JobManager.java:1058)
at org.eclipse.core.internal.jobs.InternalJob.sleep(InternalJob.java:497)
at org.eclipse.core.runtime.jobs.Job.sleep(Job.java:624)
at org.eclipse.core.internal.events.AutoBuildJob.interrupt(AutoBuildJob.java:116)
at org.eclipse.core.internal.events.BuildManager.interrupt(BuildManager.java:761)
at org.eclipse.core.internal.resources.Workspace.prepareOperation(Workspace.java:1681)
at org.eclipse.core.internal.resources.Resource.refreshLocal(Resource.java:1396)
at org.eclipse.jdt.ui.tests.refactoring.RefactoringTest.refreshFromLocal(RefactoringTest.java:130)
at org.eclipse.jdt.ui.tests.refactoring.RefactoringTest.tearDown(RefactoringTest.java:102)
at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)
at junit.extensions.TestSetup$1.protect(TestSetup.java:19)
at junit.extensions.TestSetup.run(TestSetup.java:23)
at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)
at junit.extensions.TestSetup$1.protect(TestSetup.java:19)
at junit.extensions.TestSetup.run(TestSetup.java:23)
at org.eclipse.test.EclipseTestRunner.run(EclipseTestRunner.java:330)
at org.eclipse.test.EclipseTestRunner.run(EclipseTestRunner.java:204)
at org.eclipse.test.UITestApplication$3.run(UITestApplication.java:188)
at org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35)
at org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:123)
at org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:3128)
at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2892)
at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1927)
at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1891)
at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:423)
at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:143)
at org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:107)
at org.eclipse.test.UITestApplication.runApplication(UITestApplication.java:131)
at org.eclipse.test.UITestApplication.run(UITestApplication.java:58)
at org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:99)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:92)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:68)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:374)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:169)
at org.eclipse.core.launcher.Main.invokeFramework(Main.java:338)
at org.eclipse.core.launcher.Main.basicRun(Main.java:282)
at org.eclipse.core.launcher.Main.run(Main.java:977)
at org.eclipse.core.launcher.Main.main(Main.java:952)
This happens a lot on my machine, and it's an XP SP2 running on Intel P4...

JRE: j9n142-20050609
no VM args
Interesting ... there haven't been more than cosmetic changes in the jobs implementation in 3.2, so something new in the tests or the code being tested must be inducing this.  I won't be able to investigate until Monday.
Benno, can you give me hints on how you easily reproduce this? Is there a particular test that you run that can reproduce?  I have run AllRefactoringTests a couple of times without getting the failure, but it takes so long to run that it's very hard to track it down.

I think this is a bug that I've been tracking for months but have never been able to reproduce myself. I added the extra error checking to help track it down, but if I could reproduce it locally I'm sure I could make better progress.
With:
Version: 3.2.0
Build id: I20060301-0800

And JRE (other vms seam to work fine):
C:\java\j9n142-20050609\bin&gt;java -version
java version "1.4.2"
Java(TM) 2 Runtime Environment, Standard Edition (build 1.4.2)
Classic VM (build 1.4.2, J2RE 1.4.2 IBM Windows 32 build cn142-20050609 (JIT ena
bled: jitc))

And running:
org.eclipse.jdt.ui.tests.core.CallHierarchyTest

I get at least one of the above exception in about 80% of the runs.

Hope that helps...
Thanks Benno. I found that VM, but still no luck reproducing.  Two more questions:

 - Are you using -Xj9 VM argument? If not, does it still fail with that arg?
 - Is your machine a dual processor?
&gt;Are you using -Xj9 VM argument? If not, does it still fail with that arg?

I don't use the argument. But it also fails with the arg.

&gt;Is your machine a dual processor?

Yes, it is a dual processor machine.
I have created a JUnit test that reproduces the problem:

org.eclipse.core.tests.runtime.jobs.Bug_129551

Here is what happens in this test:

1) Job1 and Job2 are created and given the same scheduling rule
2) Job1 is scheduled, followed by Job2
3) Job1 is pulled from the wait queue by a worker thread and moved to the ABOUT_TO_RUN state.
4) Another worker thread dequeues Job2, notices that it conflicts with Job1, and adds it to Job1's queue of blocked jobs.
5) Job1 is put to sleep before it starts to run.  The sleep queue uses the same next and previous fields used to maintain the list of blocked jobs, so it causes an assertion error.

It is a very small timing hole in the time between the job enters the ABOUT_TO_RUN state and when it actually runs.  If the job is put to sleep in this small period of time, and another job is blocked on it, it will cause the failure.  It seems on a multi-processor machine with a particular VM, this timing hole is big enough for the failure to happen.

I have sent Benno a patch to verify my fix.
Looks like you fixed it! I can't reproduce it any longer with patch you did send me. Even after 10 runs I did not get any exception.
Excellent!  Thank you very much Benno for your help in tracking this down and verifying the fix.  I have been trying to figure this one out for several months (the bug likely existed since 3.0).  The fix and automated test have been released.</WithStack>
    <WithOutStack>N20060226-0010

We had test failures in jdt.ui.tests.refactoring and jdt.ui.tests on MacOS X:
http://download.eclipse.org/eclipse/downloads/drops/N20060226-0010/testresults/html/org.eclipse.jdt.ui.tests.refactoring_macosx.carbon.ppc.html

I have no idea why this happened. The code in JobManager that threw the exception:

try {
	sleeping.enqueue(job);
} catch (RuntimeException e) {
	throw new RuntimeException("Error changing from state: " + oldState);
}


Error changing from state: 16


This happens a lot on my machine, and it's an XP SP2 running on Intel P4...

JRE: j9n142-20050609
no VM args
Interesting ... there haven't been more than cosmetic changes in the jobs implementation in 3.2, so something new in the tests or the code being tested must be inducing this.  I won't be able to investigate until Monday.
Benno, can you give me hints on how you easily reproduce this? Is there a particular test that you run that can reproduce?  I have run AllRefactoringTests a couple of times without getting the failure, but it takes so long to run that it's very hard to track it down.

I think this is a bug that I've been tracking for months but have never been able to reproduce myself. I added the extra error checking to help track it down, but if I could reproduce it locally I'm sure I could make better progress.
With:
Version: 3.2.0
Build id: I20060301-0800

And JRE (other vms seam to work fine):
C:\java\j9n142-20050609\bin&gt;java -version
java version "1.4.2"
Java(TM) 2 Runtime Environment, Standard Edition (build 1.4.2)
Classic VM (build 1.4.2, J2RE 1.4.2 IBM Windows 32 build cn142-20050609 (JIT ena
bled: jitc))

And running:
org.eclipse.jdt.ui.tests.core.CallHierarchyTest

I get at least one of the above exception in about 80% of the runs.

Hope that helps...
Thanks Benno. I found that VM, but still no luck reproducing.  Two more questions:

 - Are you using -Xj9 VM argument? If not, does it still fail with that arg?
 - Is your machine a dual processor?
&gt;Are you using -Xj9 VM argument? If not, does it still fail with that arg?

I don't use the argument. But it also fails with the arg.

&gt;Is your machine a dual processor?

Yes, it is a dual processor machine.
I have created a JUnit test that reproduces the problem:

org.eclipse.core.tests.runtime.jobs.Bug_129551

Here is what happens in this test:

1) Job1 and Job2 are created and given the same scheduling rule
2) Job1 is scheduled, followed by Job2
3) Job1 is pulled from the wait queue by a worker thread and moved to the ABOUT_TO_RUN state.
4) Another worker thread dequeues Job2, notices that it conflicts with Job1, and adds it to Job1's queue of blocked jobs.
5) Job1 is put to sleep before it starts to run.  The sleep queue uses the same next and previous fields used to maintain the list of blocked jobs, so it causes an assertion error.

It is a very small timing hole in the time between the job enters the ABOUT_TO_RUN state and when it actually runs.  If the job is put to sleep in this small period of time, and another job is blocked on it, it will cause the failure.  It seems on a multi-processor machine with a particular VM, this timing hole is big enough for the failure to happen.

I have sent Benno a patch to verify my fix.
Looks like you fixed it! I can't reproduce it any longer with patch you did send me. Even after 10 runs I did not get any exception.
Excellent!  Thank you very much Benno for your help in tracking this down and verifying the fix.  I have been trying to figure this one out for several months (the bug likely existed since 3.0).  The fix and automated test have been released.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="129552" />
    <CreationDate amount="2006-02-27 07:00:00 -0500" />
    <DupId amount="" />
    <classification amount="Modeling" />
    <Product amount="GMF-Tooling" />
    <component amount="Core" />
    <Version amount="unspecified" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Produce correct genmodel from mapping if same Node Mapping was referenced from the different ChildReferences</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="3">
        <Lines>
          <Line>- ChildReference1 (ContainmentFeature = cf1)</Line>
          <Line>- NodeMapping2</Line>
          <Line>- ChildReference2 (ContaimentFeature = cf2, ReferencedChild = NodeMapping2)</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>Create the following mapping model:
NodeMapping1
- ChildReference1 (ContainmentFeature = cf1)
  - NodeMapping2
    - ChildReference2 (ContaimentFeature = cf2, ReferencedChild = NodeMapping2)

For this mapping incorrect genmodel will be generated - only one GenChildNode will be generated for (cf1 + NodeMapping2) and this node will include itself.

Two nodes (cf1 + NodeMapping2) and (cf2 + NodeMapping2) should e generated and the last one should include itself.
Both containment and children meta-features from ChildReference are taken into account when reusing GenChildNodes now.

https://bugs.eclipse.org/bugs/show_bug.cgi?id=136701 was submitted to respect few potential GenChildNodes emerging from single NodeMapping.

[GMF Restructure] Bug 319140 : product GMF and component
Generation was the original product and component for this bug</WithStack>
    <WithOutStack>Create the following mapping model:
NodeMapping1
- ChildReference1 (ContainmentFeature = cf1)
  - NodeMapping2
    - ChildReference2 (ContaimentFeature = cf2, ReferencedChild = NodeMapping2)

For this mapping incorrect genmodel will be generated - only one GenChildNode will be generated for (cf1 + NodeMapping2) and this node will include itself.

Two nodes (cf1 + NodeMapping2) and (cf2 + NodeMapping2) should e generated and the last one should include itself.
Both containment and children meta-features from ChildReference are taken into account when reusing GenChildNodes now.

https://bugs.eclipse.org/bugs/show_bug.cgi?id=136701 was submitted to respect few potential GenChildNodes emerging from single NodeMapping.

[GMF Restructure] Bug 319140 : product GMF and component
Generation was the original product and component for this bug</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="129553" />
    <CreationDate amount="2006-02-27 07:18:00 -0500" />
    <DupId amount="" />
    <classification amount="Tools" />
    <Product amount="AJDT" />
    <component amount="UI" />
    <Version amount="unspecified" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows 2000" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Can not compile java project (not aspectj project) with aspectj files (*.aj)</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>I can not compile a java project (not aspectj project) with aspectj files (*.aj).

If I compile the follow source:
*****
public aspect testAspect {

}
*****
Eclipse get me a error. The message is:
Syntax error on token "aspect", interface expected

In the past we worked with Eclipse 3.2M4. With this Milestone, it worked correctly. But not with the Eclipse 3.2M5.
This indicates that a Java file syntax is expected. "aspect" is not a Java keyword.
The current behavior is thus expected. Forwarding to AspectJ component.
and over the fence to AJDT for comment.
Yes, the change has occurred in 3.2M5, because we have defined a "AspectJ source file" content type associated with .aj files, derived from the Java source file content type. The new JDT support in 3.2M5 allows for compilation units with non-.java extensions, so in this case the Java project is trying to interpret the .aj files as containing Java source code. So this is a change in behaviour, but it is no more or less correct than the previous behaviour. It is working as per the current design. Bug 36939 discusses further possible enhancements towards supporting Java-like source files.

Why do you want to store AspectJ source in a Java project anyway? What is the use-case here? Could you not just exclude the files from the build path, or
move them to somewhere outside of a source folder?
The behaviour of Milestone 4 was very useful for us. We are new in the Aspect Oriented Programming. At time we only use the aspects to make the quality oft the code better. We use it for example in Unittests or add additional asserts to the code. With the M4 we have the possibility to compile the code without Aspect and run it on product runtime without aspects.
An other case is: Compiling with AspectJ is very slow. So we decided that not all developer have to change the Project to AspectJ. It was in the past no Problem, because we use AspectJ at this time only for the code quality.
It is possible to add the aj files in a separately source folder. But I would prefer it to have the same things together, in the same source package. 

Thanks for your work

Especially on larger projects (and until we release all the memory improvements in 1.5.1 etc.), for certain classes of aspects it's reasonably common to switch forwards and backwards between the java and aspectj project nature (we have to do it when we build shadows in AspectJ for example, because of the requirements of our swizzling ant script). Also, consider a team scenario where the majority of developers work with the JDT, but a few "aspect-aware" ones work with and check-in .aj files (these might be just decws for example). Some built in support when in Java nature to easily say "exclude all .aj files" would be a big help here.
Performance improvements to the compiler should help with the one use-case, but I agree we should do what we can for the adoption scenario. There were many advantages to making the changes that caused this issue, and one of those was to make JDT's build path exclusion work for .aj files, which I think we can make use of here. I propose that when you remove the AspectJ capability from a project, we automatically exclude all .aj files from the build path. That will result in behaviour as close as possible to previously. Going the other way is a little tricky - if we automatically include all .aj files, we may be including something that was excluded last time the project was an AspectJ project. So when converting to an AspectJ project if we detect any excluded .aj files, we could prompt the user to ask them whether to include all .aj files. How does that sound?
That's the kind of thing I was thinking of. An auto-exclude on conversion to a .java project seems entirely reasonable as I can't think of a scenario where you would legitimately want the JDT compiler to try and compile .aj files (perhaps @AspectJ aspects in files with a .aj extension, but that's a real corner case). 
Prompting on conversion back to an AspectJ project also seems perfectly reasonable, so all-in-all this looks to be a good solution. thks.
Implemented as described above. Tests added.

AJDT1.4 build.59 Build Fixed
BUILD COMPLETE -  build.59
Date of build:	03/05/2006 05:52:24
Time to build:	18 minutes 17 seconds
Last changed:	03/05/2006 05:37:02
Last log entry:	129553: Can not compile java project (not aspectj project) with aspectj file</WithStack>
    <WithOutStack>I can not compile a java project (not aspectj project) with aspectj files (*.aj).

If I compile the follow source:
*****
public aspect testAspect {

}
*****
Eclipse get me a error. The message is:
Syntax error on token "aspect", interface expected

In the past we worked with Eclipse 3.2M4. With this Milestone, it worked correctly. But not with the Eclipse 3.2M5.
This indicates that a Java file syntax is expected. "aspect" is not a Java keyword.
The current behavior is thus expected. Forwarding to AspectJ component.
and over the fence to AJDT for comment.
Yes, the change has occurred in 3.2M5, because we have defined a "AspectJ source file" content type associated with .aj files, derived from the Java source file content type. The new JDT support in 3.2M5 allows for compilation units with non-.java extensions, so in this case the Java project is trying to interpret the .aj files as containing Java source code. So this is a change in behaviour, but it is no more or less correct than the previous behaviour. It is working as per the current design. Bug 36939 discusses further possible enhancements towards supporting Java-like source files.

Why do you want to store AspectJ source in a Java project anyway? What is the use-case here? Could you not just exclude the files from the build path, or
move them to somewhere outside of a source folder?
The behaviour of Milestone 4 was very useful for us. We are new in the Aspect Oriented Programming. At time we only use the aspects to make the quality oft the code better. We use it for example in Unittests or add additional asserts to the code. With the M4 we have the possibility to compile the code without Aspect and run it on product runtime without aspects.
An other case is: Compiling with AspectJ is very slow. So we decided that not all developer have to change the Project to AspectJ. It was in the past no Problem, because we use AspectJ at this time only for the code quality.
It is possible to add the aj files in a separately source folder. But I would prefer it to have the same things together, in the same source package. 

Thanks for your work

Especially on larger projects (and until we release all the memory improvements in 1.5.1 etc.), for certain classes of aspects it's reasonably common to switch forwards and backwards between the java and aspectj project nature (we have to do it when we build shadows in AspectJ for example, because of the requirements of our swizzling ant script). Also, consider a team scenario where the majority of developers work with the JDT, but a few "aspect-aware" ones work with and check-in .aj files (these might be just decws for example). Some built in support when in Java nature to easily say "exclude all .aj files" would be a big help here.
Performance improvements to the compiler should help with the one use-case, but I agree we should do what we can for the adoption scenario. There were many advantages to making the changes that caused this issue, and one of those was to make JDT's build path exclusion work for .aj files, which I think we can make use of here. I propose that when you remove the AspectJ capability from a project, we automatically exclude all .aj files from the build path. That will result in behaviour as close as possible to previously. Going the other way is a little tricky - if we automatically include all .aj files, we may be including something that was excluded last time the project was an AspectJ project. So when converting to an AspectJ project if we detect any excluded .aj files, we could prompt the user to ask them whether to include all .aj files. How does that sound?
That's the kind of thing I was thinking of. An auto-exclude on conversion to a .java project seems entirely reasonable as I can't think of a scenario where you would legitimately want the JDT compiler to try and compile .aj files (perhaps @AspectJ aspects in files with a .aj extension, but that's a real corner case). 
Prompting on conversion back to an AspectJ project also seems perfectly reasonable, so all-in-all this looks to be a good solution. thks.
Implemented as described above. Tests added.

AJDT1.4 build.59 Build Fixed
BUILD COMPLETE -  build.59
Date of build:	03/05/2006 05:52:24
Time to build:	18 minutes 17 seconds
Last changed:	03/05/2006 05:37:02
Last log entry:	129553: Can not compile java project (not aspectj project) with aspectj file</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="129554" />
    <CreationDate amount="2006-02-27 07:22:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="Text" />
    <Version amount="3.2" />
    <rep_platform amount="All" />
    <op_sys amount="All" />
    <priority amount="P5" />
    <bug_severity amount="minor" />
    <Summery>[preferences] Edit Template: Rename Yes/No buttons and dialog text</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="ASSIGNED" />
    <resolution amount="" />
    <WithStack>The Edit Template dialog box is a textbook example of bad options. It says:

"The name of the template has been changed. Click 'Yes' to create an additional template with the new name or 'No' to rename the existing one."
Options: Yes/No

If 2/3 of the description is explanations what the options are supposed to be it's quite obvious that the options are bad. I suggest relabeling 'Yes' -&gt; 'Create new' and 'No' -&gt; 'Rename existing'.

This is one of the first dialogs I've seen in Eclipse, so I suppose there are a lot more like this. In general it's better to avoid Yes/No options, because they almost always require the user to spend unnecessarily much time and effort in understanding the exact wording of the question. Instead the action should be more or less obvious based on the options. (E.g. instead of "Do you want to quit without saving? Options: Yes/No" or "Do you want to save before you quit? Options: Yes/No" you should always prefer something like "There are modifications. Options: Save and quit/Discard and quit".)
This dialog shouldn't appear in the first place: either we should silently rename the template or not allow to change the name.

Whether to use 'Yes', 'OK' and 'No' or put the concrete action itself onto the button is a style question. Currently most Eclipse confirm dialogs follow the 'Yes'/'No' pattern. If you think another dialog is wrong you'll have to file a concrete bug for that dialog.</WithStack>
    <WithOutStack>The Edit Template dialog box is a textbook example of bad options. It says:

"The name of the template has been changed. Click 'Yes' to create an additional template with the new name or 'No' to rename the existing one."
Options: Yes/No

If 2/3 of the description is explanations what the options are supposed to be it's quite obvious that the options are bad. I suggest relabeling 'Yes' -&gt; 'Create new' and 'No' -&gt; 'Rename existing'.

This is one of the first dialogs I've seen in Eclipse, so I suppose there are a lot more like this. In general it's better to avoid Yes/No options, because they almost always require the user to spend unnecessarily much time and effort in understanding the exact wording of the question. Instead the action should be more or less obvious based on the options. (E.g. instead of "Do you want to quit without saving? Options: Yes/No" or "Do you want to save before you quit? Options: Yes/No" you should always prefer something like "There are modifications. Options: Save and quit/Discard and quit".)
This dialog shouldn't appear in the first place: either we should silently rename the template or not allow to change the name.

Whether to use 'Yes', 'OK' and 'No' or put the concrete action itself onto the button is a style question. Currently most Eclipse confirm dialogs follow the 'Yes'/'No' pattern. If you think another dialog is wrong you'll have to file a concrete bug for that dialog.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="129555" />
    <CreationDate amount="2006-02-27 07:26:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="JDT" />
    <component amount="Core" />
    <Version amount="3.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>[dom] The length of a recovered fake SimpleName should be 0</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="4">
      <source_code type="functiondef">
        <location start="0" end="35" />
        <code>public void foo(int[] a) {
  a[0]
}</code>
      </source_code>
      <source_code type="functiondef">
        <location start="86" end="141" />
        <code>public void foo(int[] a) {
  a[0] = 'fake SimpleName'
}</code>
      </source_code>
      <source_code type="assignment">
        <location start="345" end="394" />
        <code>this.startPosition = this.currentPosition - 1;</code>
      </source_code>
      <source_code type="assignment">
        <location start="415" end="460" />
        <code>this.startPosition = this.currentPosition;</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="0" />
    <bug_status amount="VERIFIED" />
    <resolution amount="FIXED" />
    <WithStack>public void foo(int[] a) {
  a[0]
}

The statments recovery create the following ast

public void foo(int[] a) {
  a[0] = 'fake SimpleName'
}

The length of the fake SimpleName is 1 and should be 0 because the source doesn't really contain this node.
Fixed and test added
  ASTConverterRecoveryTest#test0013()

In RecoveryScanner#getNextToken()
   this.startPosition = this.currentPosition - 1;
must be replaced by
   this.startPosition = this.currentPosition;
for inserted tokens.
					
					
Verified using I20060328-0010 for 3.2M6</WithStack>
    <WithOutStack>public void foo(int[] a) {
  a[0]
}

The statments recovery create the following ast

public void foo(int[] a) {
  a[0] = 'fake SimpleName'
}

The length of the fake SimpleName is 1 and should be 0 because the source doesn't really contain this node.
Fixed and test added
  ASTConverterRecoveryTest#test0013()

In RecoveryScanner#getNextToken()
   this.startPosition = this.currentPosition - 1;
must be replaced by
   this.startPosition = this.currentPosition;
for inserted tokens.
					
					
Verified using I20060328-0010 for 3.2M6</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="129556" />
    <CreationDate amount="2006-02-27 07:43:00 -0500" />
    <DupId amount="167551" />
    <classification amount="Tools" />
    <Product amount="CDT" />
    <component amount="cdt-parser" />
    <Version amount="3.0.1" />
    <rep_platform amount="PC" />
    <op_sys amount="Linux-Motif" />
    <priority amount="P3" />
    <bug_severity amount="enhancement" />
    <Summery>share, preserve index</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="5">
        <Lines>
          <Line>1. Indexing a large project may last long, so the generated index files should be preserved somehow.</Line>
          <Line />
          <Line>2. After any change in source fiels, only the fraction of the index should be regenerated.</Line>
          <Line />
          <Line>3. It would be useful to share the generated index among different users. We would use CDT just to browse a large code base, so one index would be enough.</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="RESOLVED" />
    <resolution amount="DUPLICATE" />
    <WithStack>1. Indexing a large project may last long, so the generated index files should be preserved somehow. 

2. After any change in source fiels, only the fraction of the index should be regenerated.

3. It would be useful to share the generated index among different users. We would use CDT just to browse a large code base, so one index would be enough.

Plese see 126001 as well.


*** This bug has been marked as a duplicate of bug 167551 ***</WithStack>
    <WithOutStack>1. Indexing a large project may last long, so the generated index files should be preserved somehow. 

2. After any change in source fiels, only the fraction of the index should be regenerated.

3. It would be useful to share the generated index among different users. We would use CDT just to browse a large code base, so one index would be enough.

Plese see 126001 as well.


*** This bug has been marked as a duplicate of bug 167551 ***</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="129557" />
    <CreationDate amount="2006-02-27 08:06:00 -0500" />
    <DupId amount="" />
    <classification amount="BIRT" />
    <Product amount="BIRT" />
    <component amount="Report Designer" />
    <Version amount="2.0.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows 2000" />
    <priority amount="P2" />
    <bug_severity amount="major" />
    <Summery>Bidi3.2: [HCG] NL chars appear in Exp. Builder as question marks</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="5">
        <Lines>
          <Line>1. Define Data Source (does not matter with which RDBMS)</Line>
          <Line>2. Define Data Set based on this Data Source</Line>
          <Line>3. Switch to Filters screen</Line>
          <Line>4. Add new filter and specify in the "Expression" column - column name, in "Operator" column - like, and in "Value 1" column - some free text including NLS chars</Line>
          <Line>5. Select drop down box under "Value 1" column and select &lt;Build expression ...&gt;</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>This is not BiDI specific but general NLS defect.

1. Define Data Source (does not matter with which RDBMS)
2. Define Data Set based on this Data Source
3. Switch to Filters screen
4. Add new filter and specify in the "Expression" column - column name, in "Operator" column - like, and in "Value 1" column - some free text including NLS chars
5. Select drop down box under "Value 1" column and select &lt;Build expression ...&gt;

Result: In the Expression Builder dialog NLS char appear as question marks (e.g. '???')
Created attachment 37658
Tested with Japanese, but it works
I have tested this with Japanese charcaters and it works.
Is your OS locale is the same as the languages you use ?

Also tested with Arabic characters with Arabic OS locale and ot slaos works.
So, OS locale must be set to the target locale.

Please let me know if you still see the problem after setting OS locale(both current and default) to the target languages.

The scenario you are describing is not valid for this defect. Default locale should always remain English. This should not stop the program from correctly processing NL chars. Alternatively, regardless of your default locale, try to use characters from several non Latin languages. For example try to use both Japanese and Arabic or Arabic and Hebrew characters. Regardless of your default locale at least one language characters will appear as question marks.
Created attachment 38380
Using both Hebrew and Russian characters

I even don't get the Build Expression Dialog this time.
Created attachment 38381
Using both Hebrew and Russian characters

I even don't get the Build Expression Dialog this time.
Synch up with Callisto schedule to rename RC1 as RC2 targeted 5/5/2006.
The 2.1 RC2 build is already on the download site, but this entry is in the NEW state.  When would be the target milestone to have this issue resolved now?

What do you mean that you don't get the dialog?
Do you see any error log?
We're still researching on character issue.

(In reply to comment #7)
&gt; Created an attachment (id=38381) [edit]
&gt; Using both Hebrew and Russian characters
&gt; 
&gt; I even don't get the Build Expression Dialog this time.
&gt; 


I see error message issued as illustrated on the attached earlier image.
set to P2 for the error message box when bringing up expression builder.
No error message dialog popup in current version, eclipse 3.2rc3.
Text input with Hebrew.
Please update to RC3 code. The exception problem fixed
The character problems will be fixed next milestone.
The problem can be recreated if the machine's locale is not set up properly.  In this case, the Operating System and Eclipse do not expect the same character encoding, which will result in question marks being displayed in the Expression Builder window. 
We have run the same scenario on the Hebrew machine and it is working fine. Please verify that your locale is set to Hebrew. See screen capture attached.
Created attachment 42621
Hebrew_BIRT.JPG
I think this is what happened, the characters in the "Value" cell is first saved, and then retrieved into the Build Expression dialog. If the locale for your machine is English, the Hewbrew characters are saved in the English locale. When they are retrieved back, they are displayed as unreadable characters (question marks). If your locale were set to Hebrew, after the round trip, the characters are still displayed correctly, as we've seen in comment #16 https://bugs.eclipse.org/bugs/show_bug.cgi?id=129557#c16

The exception problem in comment #6 has been fixed.

We are going to mark this bug as "working as designed".
I think it is caused by haven't set the document encoding for the Expression Builder. So, it can correctly display Hebrew chars in Hebrew locale, but in English locale, the Hebrew chars became to ??. I have fixed it to set the document encoding with the report file encoding because the expression is part from report file. Currently the report encoding is UTF-8, so, it can display any type chars in Expression Builder correctly now.
Code had been submitted to CVS repository, mark this bug fixed.
I tried to verify the defect using latest available stable build (2.1RC3a from May 22) and I still see the question marks insted of NL chars. I attach the screen shot illustrating the case.
Created attachment 42812
Hebrew and Russian chars in Expr. Builder dialog
Please verify in RC4 build.
The fixing milestone is RC4 instead of RC3a.
Works fine in RC4 build.</WithStack>
    <WithOutStack>This is not BiDI specific but general NLS defect.

1. Define Data Source (does not matter with which RDBMS)
2. Define Data Set based on this Data Source
3. Switch to Filters screen
4. Add new filter and specify in the "Expression" column - column name, in "Operator" column - like, and in "Value 1" column - some free text including NLS chars
5. Select drop down box under "Value 1" column and select &lt;Build expression ...&gt;

Result: In the Expression Builder dialog NLS char appear as question marks (e.g. '???')
Created attachment 37658
Tested with Japanese, but it works
I have tested this with Japanese charcaters and it works.
Is your OS locale is the same as the languages you use ?

Also tested with Arabic characters with Arabic OS locale and ot slaos works.
So, OS locale must be set to the target locale.

Please let me know if you still see the problem after setting OS locale(both current and default) to the target languages.

The scenario you are describing is not valid for this defect. Default locale should always remain English. This should not stop the program from correctly processing NL chars. Alternatively, regardless of your default locale, try to use characters from several non Latin languages. For example try to use both Japanese and Arabic or Arabic and Hebrew characters. Regardless of your default locale at least one language characters will appear as question marks.
Created attachment 38380
Using both Hebrew and Russian characters

I even don't get the Build Expression Dialog this time.
Created attachment 38381
Using both Hebrew and Russian characters

I even don't get the Build Expression Dialog this time.
Synch up with Callisto schedule to rename RC1 as RC2 targeted 5/5/2006.
The 2.1 RC2 build is already on the download site, but this entry is in the NEW state.  When would be the target milestone to have this issue resolved now?

What do you mean that you don't get the dialog?
Do you see any error log?
We're still researching on character issue.

(In reply to comment #7)
&gt; Created an attachment (id=38381) [edit]
&gt; Using both Hebrew and Russian characters
&gt; 
&gt; I even don't get the Build Expression Dialog this time.
&gt; 


I see error message issued as illustrated on the attached earlier image.
set to P2 for the error message box when bringing up expression builder.
No error message dialog popup in current version, eclipse 3.2rc3.
Text input with Hebrew.
Please update to RC3 code. The exception problem fixed
The character problems will be fixed next milestone.
The problem can be recreated if the machine's locale is not set up properly.  In this case, the Operating System and Eclipse do not expect the same character encoding, which will result in question marks being displayed in the Expression Builder window. 
We have run the same scenario on the Hebrew machine and it is working fine. Please verify that your locale is set to Hebrew. See screen capture attached.
Created attachment 42621
Hebrew_BIRT.JPG
I think this is what happened, the characters in the "Value" cell is first saved, and then retrieved into the Build Expression dialog. If the locale for your machine is English, the Hewbrew characters are saved in the English locale. When they are retrieved back, they are displayed as unreadable characters (question marks). If your locale were set to Hebrew, after the round trip, the characters are still displayed correctly, as we've seen in comment #16 https://bugs.eclipse.org/bugs/show_bug.cgi?id=129557#c16

The exception problem in comment #6 has been fixed.

We are going to mark this bug as "working as designed".
I think it is caused by haven't set the document encoding for the Expression Builder. So, it can correctly display Hebrew chars in Hebrew locale, but in English locale, the Hebrew chars became to ??. I have fixed it to set the document encoding with the report file encoding because the expression is part from report file. Currently the report encoding is UTF-8, so, it can display any type chars in Expression Builder correctly now.
Code had been submitted to CVS repository, mark this bug fixed.
I tried to verify the defect using latest available stable build (2.1RC3a from May 22) and I still see the question marks insted of NL chars. I attach the screen shot illustrating the case.
Created attachment 42812
Hebrew and Russian chars in Expr. Builder dialog
Please verify in RC4 build.
The fixing milestone is RC4 instead of RC3a.
Works fine in RC4 build.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="129558" />
    <CreationDate amount="2006-02-27 08:16:00 -0500" />
    <DupId amount="" />
    <classification amount="BIRT" />
    <Product amount="BIRT" />
    <component amount="Report Designer" />
    <Version amount="2.0.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows All" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>HCG_BIDI: Undesirable order of BiDi char in Expr. Builder</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="7">
        <Lines>
          <Line>1. Define DB in DB2</Line>
          <Line>2. Define Table in this db. Make sure at least one column has bidi name like DI</Line>
          <Line>3. Define Data Source based on the DB created in 1</Line>
          <Line>4. Define Data Set based on the table created in 2</Line>
          <Line>5. Switch to Filter screen</Line>
          <Line>6. Add new filter. Set "Expression" column to some column. Select drop down box in "Value 1" column and select &lt;Build Expression ...&gt; option</Line>
          <Line>7. In the opened "Expression Builder" dialog add column name with Bidi char (from step 2) . Add "!=" operator". Add constant including both Latin and BiDi chars.</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>This is indeed BiDI specific defect. Capital characters are used in the examples below refer to BiDi (Hebrew or Arabic) characters

1. Define DB in DB2
2. Define Table in this db. Make sure at least one column has bidi name like DI
3. Define Data Source based on the DB created in 1
4. Define Data Set based on the table created in 2
5. Switch to Filter screen
6. Add new filter. Set "Expression" column to some column. Select drop down box in "Value 1" column and select &lt;Build Expression ...&gt; option
7. In the opened "Expression Builder" dialog add column name with Bidi char (from step 2) . Add "!=" operator". Add constant including both Latin and BiDi chars. 

Expected results: row["DI"]!="OLLEH world"
Actual results: row["OLLEH"=!["DI world"

As you can see the order of characters is incorrect.
What's the format in memory, is 'row["ID"]!="HELLO world"'?

Add BidiSegmentListener, if the neutral char is part of language function words, the orginal order will be kept.
Fixed.
I am not sure what have been fixed, but I still see the same results as before. Please see the attached screen shot. I tested with latest available stable driver (2.1RC3a from May 22).
Created attachment 42813
Incorrect order of mixed BiDi + Latin text
Please verify in RC4 build.
The fixing milestone is RC4 instead of RC3a.
Works fine in RC4</WithStack>
    <WithOutStack>This is indeed BiDI specific defect. Capital characters are used in the examples below refer to BiDi (Hebrew or Arabic) characters

1. Define DB in DB2
2. Define Table in this db. Make sure at least one column has bidi name like DI
3. Define Data Source based on the DB created in 1
4. Define Data Set based on the table created in 2
5. Switch to Filter screen
6. Add new filter. Set "Expression" column to some column. Select drop down box in "Value 1" column and select &lt;Build Expression ...&gt; option
7. In the opened "Expression Builder" dialog add column name with Bidi char (from step 2) . Add "!=" operator". Add constant including both Latin and BiDi chars. 

Expected results: row["DI"]!="OLLEH world"
Actual results: row["OLLEH"=!["DI world"

As you can see the order of characters is incorrect.
What's the format in memory, is 'row["ID"]!="HELLO world"'?

Add BidiSegmentListener, if the neutral char is part of language function words, the orginal order will be kept.
Fixed.
I am not sure what have been fixed, but I still see the same results as before. Please see the attached screen shot. I tested with latest available stable driver (2.1RC3a from May 22).
Created attachment 42813
Incorrect order of mixed BiDi + Latin text
Please verify in RC4 build.
The fixing milestone is RC4 instead of RC3a.
Works fine in RC4</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="129559" />
    <CreationDate amount="2006-02-27 08:19:00 -0500" />
    <DupId amount="" />
    <classification amount="WebTools" />
    <Product amount="WTP Source Editing" />
    <component amount="jst.jsp" />
    <Version amount="1.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P2" />
    <bug_severity amount="normal" />
    <Summery>[validation] Local variable is never used when used by EL</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="ASSIGNED" />
    <resolution amount="" />
    <WithStack>Eclipse gives a warning that "The local variable 'settings' is never used", when the variable is used by EL expressions.

&lt;%@taglib prefix="c" uri="jstl-c" %&gt;
&lt;jsp:useBean id="settings" class="ro.zapp.Settings" scope="request" /&gt;
&lt;c:forEach var="reason" items="${settings.temporaryDeactivationReasons}"&gt;
	&lt;option value="${reason['element_id']}"&gt;
		${reason['description_text']}
	&lt;/option&gt;
&lt;/c:forEach&gt;

The warning is highlighted in the editor (id="settings" is underlined in the &lt;jsp:useBean&gt; tag), but it doesn't appear in the "Problems" list, and it doesn't have a warning icon at the begining of the &lt;jsp:useBean&gt; row.
Phil, please take a look, and reassign if appropriate. 
I'm guessing this is the same problem as:

   https://bugs.eclipse.org/bugs/show_bug.cgi?id=116687

EL isn't getting included in the JSP translation in certain cases (fCanGenerate flag is being set false in the ELTranslator?).  Maybe the JSP EL translation shouldn't be so strict?
Mass transfer from pa to dw. Needs more triage. 

This issue is also discused in 93885 which is broader because covers also JSP scripts &lt;%= =&gt;.
raising priority of this defect since adopters of complained of this issue as well.
Created attachment 138821
Fix Patch

This patch consist of:
* remove validation option for unused variables for JSP pages
  - also removes all associated constants and strings
* useBeans are now added to the pageContext using the appropriate scope
* useBean scope is now validated
Created attachment 138822
JUnits Patch

This patch adds 2 new JUnit tests related to the previous fix patch

* test_129559 - tests that variable not used warnings are no longer given for useBeans 

* test_scopeValidation - tests that the scope validation on useBeans is being done correctly
Created attachment 139287
Fix Patch Update

While fixing Bug 104668 I ran across the scenario where the validator would report that some of our internal generated variables such as pageContext were not being used on the EL code that caused it to be generated.  To fix this I put the case for IProblem.LocalVariableIsNeverUsed back into the JSPJavaValidator and have the severity always set to ignore.  Other then that this patch is the same as the previous one.
I think the patch may be a little over-complicated for translation generation and I think we need to keep the preference to ignore or validate unused local variables. Thanks for taking a look and for the unit tests, Ian.
So should attachment 139287 be obsoleted until we have something better?</WithStack>
    <WithOutStack>Eclipse gives a warning that "The local variable 'settings' is never used", when the variable is used by EL expressions.

&lt;%@taglib prefix="c" uri="jstl-c" %&gt;
&lt;jsp:useBean id="settings" class="ro.zapp.Settings" scope="request" /&gt;
&lt;c:forEach var="reason" items="${settings.temporaryDeactivationReasons}"&gt;
	&lt;option value="${reason['element_id']}"&gt;
		${reason['description_text']}
	&lt;/option&gt;
&lt;/c:forEach&gt;

The warning is highlighted in the editor (id="settings" is underlined in the &lt;jsp:useBean&gt; tag), but it doesn't appear in the "Problems" list, and it doesn't have a warning icon at the begining of the &lt;jsp:useBean&gt; row.
Phil, please take a look, and reassign if appropriate. 
I'm guessing this is the same problem as:

   https://bugs.eclipse.org/bugs/show_bug.cgi?id=116687

EL isn't getting included in the JSP translation in certain cases (fCanGenerate flag is being set false in the ELTranslator?).  Maybe the JSP EL translation shouldn't be so strict?
Mass transfer from pa to dw. Needs more triage. 

This issue is also discused in 93885 which is broader because covers also JSP scripts &lt;%= =&gt;.
raising priority of this defect since adopters of complained of this issue as well.
Created attachment 138821
Fix Patch

This patch consist of:
* remove validation option for unused variables for JSP pages
  - also removes all associated constants and strings
* useBeans are now added to the pageContext using the appropriate scope
* useBean scope is now validated
Created attachment 138822
JUnits Patch

This patch adds 2 new JUnit tests related to the previous fix patch

* test_129559 - tests that variable not used warnings are no longer given for useBeans 

* test_scopeValidation - tests that the scope validation on useBeans is being done correctly
Created attachment 139287
Fix Patch Update

While fixing Bug 104668 I ran across the scenario where the validator would report that some of our internal generated variables such as pageContext were not being used on the EL code that caused it to be generated.  To fix this I put the case for IProblem.LocalVariableIsNeverUsed back into the JSPJavaValidator and have the severity always set to ignore.  Other then that this patch is the same as the previous one.
I think the patch may be a little over-complicated for translation generation and I think we need to keep the preference to ignore or validate unused local variables. Thanks for taking a look and for the unit tests, Ian.
So should attachment 139287 be obsoleted until we have something better?</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="129560" />
    <CreationDate amount="2006-02-27 08:31:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="JDT" />
    <component amount="Core" />
    <Version amount="3.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="trivial" />
    <Summery>[spec] Questionable javadoc for IJavaElement#isStructureKnown()</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="1">
      <source_code type="class">
        <location start="517" end="561" />
        <code>class Test {
		void m() {
			int err
		}
	}</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="0" />
    <bug_status amount="VERIFIED" />
    <resolution amount="FIXED" />
    <WithStack>I20060223-1656

The javadoc of IJavaElement#isStructureKnown() seems to be somewhat outdated. According to bug 106603 comment 3, isStructureKnown() only seems to be implemented for ICompilationUnits and returns true for all other cases. AFAICS, it returns false iff a syntax error was detected while parsing.

It also says: "If the structure of an element is unknown, navigations will return reasonable defaults. For example, &lt;code&gt;getChildren&lt;/code&gt; will return an empty collection." But if you e.g. take the CU ...
	class Test {
		void m() {
			int err
		}
	}
... then ICompilationUnit#isStructureKnown() is false, but #getChildren() is not empty.

The javadoc should tell that it just checks for syntax errors in a CU and it should not repudiate the existence of the CU's children.
Created attachment 72956
Proposed fix
Fix released for 3.4M1 in HEAD.
Verified for 3.4M1 using build I20070802-0800.</WithStack>
    <WithOutStack>I20060223-1656

The javadoc of IJavaElement#isStructureKnown() seems to be somewhat outdated. According to bug 106603 comment 3, isStructureKnown() only seems to be implemented for ICompilationUnits and returns true for all other cases. AFAICS, it returns false iff a syntax error was detected while parsing.

It also says: "If the structure of an element is unknown, navigations will return reasonable defaults. For example, &lt;code&gt;getChildren&lt;/code&gt; will return an empty collection." But if you e.g. take the CU ...
	class Test {
		void m() {
			int err
		}
	}
... then ICompilationUnit#isStructureKnown() is false, but #getChildren() is not empty.

The javadoc should tell that it just checks for syntax errors in a CU and it should not repudiate the existence of the CU's children.
Created attachment 72956
Proposed fix
Fix released for 3.4M1 in HEAD.
Verified for 3.4M1 using build I20070802-0800.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="129561" />
    <CreationDate amount="2006-02-27 08:34:00 -0500" />
    <DupId amount="" />
    <classification amount="BIRT" />
    <Product amount="BIRT" />
    <component amount="Data" />
    <Version amount="2.0.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows All" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>HCG_BIDI: Undesirable generation of SQL query elements</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="11">
        <Lines>
          <Line>1. Create DB2 database</Line>
          <Line>2. Create table with name including blank in this database. Make sure it has column with name including blank as well.</Line>
          <Line>3. Create Data Source based on the DB from step 1</Line>
          <Line>4. Create Data Set based on the table from Step 2</Line>
          <Line>5. On the Query screen drag and drop the column name from step 2 into select portion of the clause. You should get something like  - select USER.Table Name.Column Name</Line>
          <Line>6. Select "Preview Results"</Line>
          <Line />
          <Line>Result: Exception is fired.</Line>
          <Line />
          <Line>7. Change manualy the SQL query as follows: select USER."Table Name"."Column Name"</Line>
          <Line>8. Select "Preview Results"</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>This is not even NLS specific defect. It happens with English as well.
The problem is that on the Query screen in the Edit Data Set dialog the drag/drop of columns into the Query screen must enclose every entity name including blank in the quotation marks. Otherwise the query will fail.

1. Create DB2 database
2. Create table with name including blank in this database. Make sure it has column with name including blank as well.
3. Create Data Source based on the DB from step 1
4. Create Data Set based on the table from Step 2
5. On the Query screen drag and drop the column name from step 2 into select portion of the clause. You should get something like  - select USER.Table Name.Column Name
6. Select "Preview Results"

Result: Exception is fired.

7. Change manualy the SQL query as follows: select USER."Table Name"."Column Name"
8. Select "Preview Results"

Result: No exception is issued.
When there is space in the table/column name, the DnD of them to query shall add quote around the names.
I am not sure what DnD is but if you don't add quotation marks around them manually the query does not produce any results. It seems that the quotation marks should be added automatically when you drag and drop RDBMS entities from Tree widget into SQL Query widget.
It is nice that the quotation mark can be added automatically, but not all data base use the same quotation mark. So before adding it, we need to know what the quotation mark is, which is not available for some data base yet. We will enhance it as much as possible.
Due to the diversity of the drivers users might be dealing with, a checkbox has now been added to the page for the users to choose whether or not to activate identifier quoting when Drag&amp;Drop
Can you please provide a snapshot which will explain how to use this option ? I don't see any checkbox.
Created attachment 38388
in the bottom middle
This bug is fixed.
Works fine with April 28 driver.
Closing the bug.</WithStack>
    <WithOutStack>This is not even NLS specific defect. It happens with English as well.
The problem is that on the Query screen in the Edit Data Set dialog the drag/drop of columns into the Query screen must enclose every entity name including blank in the quotation marks. Otherwise the query will fail.

1. Create DB2 database
2. Create table with name including blank in this database. Make sure it has column with name including blank as well.
3. Create Data Source based on the DB from step 1
4. Create Data Set based on the table from Step 2
5. On the Query screen drag and drop the column name from step 2 into select portion of the clause. You should get something like  - select USER.Table Name.Column Name
6. Select "Preview Results"

Result: Exception is fired.

7. Change manualy the SQL query as follows: select USER."Table Name"."Column Name"
8. Select "Preview Results"

Result: No exception is issued.
When there is space in the table/column name, the DnD of them to query shall add quote around the names.
I am not sure what DnD is but if you don't add quotation marks around them manually the query does not produce any results. It seems that the quotation marks should be added automatically when you drag and drop RDBMS entities from Tree widget into SQL Query widget.
It is nice that the quotation mark can be added automatically, but not all data base use the same quotation mark. So before adding it, we need to know what the quotation mark is, which is not available for some data base yet. We will enhance it as much as possible.
Due to the diversity of the drivers users might be dealing with, a checkbox has now been added to the page for the users to choose whether or not to activate identifier quoting when Drag&amp;Drop
Can you please provide a snapshot which will explain how to use this option ? I don't see any checkbox.
Created attachment 38388
in the bottom middle
This bug is fixed.
Works fine with April 28 driver.
Closing the bug.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="129562" />
    <CreationDate amount="2006-02-27 08:37:00 -0500" />
    <DupId amount="91689" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="UI" />
    <Version amount="3.1.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Linux" />
    <priority amount="P3" />
    <bug_severity amount="enhancement" />
    <Summery>Button order on GNOME</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="DUPLICATE" />
    <WithStack>Ecplipse mimics the appearance of GNOME applications but fails to present dialog buttons in the order requested by the GNOME Human Interface Guidelines (http://developer.gnome.org/projects/gup/hig/2.0/). This is confusing and can result in harm, when users trainied to use the GNOME interface accidently press buttons expressing "Cancel", "Abort", "Close", ... because accordingly the HIG a confirmation button whould have to be placed in the bottom-left corner of a dialog. Examples for such situations, are dialogs for saving files or for adding external libraries to some project.

By crawling through this bug database I learned, that a similiar issue has been solved for MacOS X. As the interface guidelines of GNOME and MacOS X are quite similiar regarding placement of confirmation buttons/default actions, it might be sufficient, to activate the GUI tweaking code paths choosen for MacOS X also, when running within GNOME.
I believe this is a duplicate of Bug 91689.

*** This bug has been marked as a duplicate of 91689 ***</WithStack>
    <WithOutStack>Ecplipse mimics the appearance of GNOME applications but fails to present dialog buttons in the order requested by the GNOME Human Interface Guidelines (http://developer.gnome.org/projects/gup/hig/2.0/). This is confusing and can result in harm, when users trainied to use the GNOME interface accidently press buttons expressing "Cancel", "Abort", "Close", ... because accordingly the HIG a confirmation button whould have to be placed in the bottom-left corner of a dialog. Examples for such situations, are dialogs for saving files or for adding external libraries to some project.

By crawling through this bug database I learned, that a similiar issue has been solved for MacOS X. As the interface guidelines of GNOME and MacOS X are quite similiar regarding placement of confirmation buttons/default actions, it might be sufficient, to activate the GUI tweaking code paths choosen for MacOS X also, when running within GNOME.
I believe this is a duplicate of Bug 91689.

*** This bug has been marked as a duplicate of 91689 ***</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="129563" />
    <CreationDate amount="2006-02-27 08:40:00 -0500" />
    <DupId amount="" />
    <classification amount="BIRT" />
    <Product amount="BIRT" />
    <component amount="Report Viewer" />
    <Version amount="2.0.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows 2000" />
    <priority amount="P2" />
    <bug_severity amount="normal" />
    <Summery>Bidi3.2: [HCG] NL chars of workspace don't appear as glyphs in HTML/PDF viewers</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="3">
        <Lines>
          <Line>1. Create workspace in the path including NLS chars</Line>
          <Line>2. Create report</Line>
          <Line>3. Preview it in either HTML or PDF viewers.</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>This is not BiDi specific but general to all languages defect.

1. Create workspace in the path including NLS chars
2. Create report
3. Preview it in either HTML or PDF viewers.

Result: The workplace path in the caption of opened widow shows NLS chars as hieroglyphs instead or real glyphs.
I could reproduce the problem with Japanese, but the problem is the URL displayed on the Winodws title of the HTML viewer.
I have attached the screen shot of the problem.

I think this is not a major probelm.

Could you please let us know if the symptom I described is correct and
how important it is ?

Created attachment 37702
Screenshot  for this problem
 This is only one context in which problem is realized. Another one is PDF previewer.
  I think this is serious problem especially taking into account the fact that it is common to all languages and is not specific to BiDi.
   It is up to you to decide whether or not the issue can be handled give available resources and other consideration you might have.
I do not agree that this is a major problem. Mati, could you give us your opinion, please?
I agree that this is not a life-and-death issue.  On the other hand, it is ugly.
Another consideration: if one copies the URL in the address field and pastes it to another browser window, will it go to the proper Web page?  If not, we have a functionality issue, not only a cosmetic one.
(In reply to comment #5)

The URL copy-and-paste scenario is a good question.  However, it does not quite apply in this case.  Since it is shown on the title of the window, there is no user gesture for copying from there to a browser.  So, I don't think it is a functionality issue.


Fixed.
  From the tests I run I see that for a split of second incorrect title is displayed and immediately replaced by something standard - "Birt Report Viewer". Does this mean that the functionality has changed ? 
 In any case if some kind of error happens and I guess the overrite of the title does not take place I still see incorrectly encoded chars in the title. I attach an image illustrating both cases.
Created attachment 42815
Title with fixed value 

This title appears if not issues with report generation occur.
Created attachment 42816
Title with dynamic value

If errors occur during report generation, still dynamic title is used with incorrectly encoded NL chars in it.
Fixed. 

Now if error appears using run servlet path, the page displayed with a defined title of 'Error' -- support externalization; otherwise, title will display what defined in design file first, if it is not set, then use a default title birt defined -- support externalization, too.
 First of all I would like to get a clarification I asked for last time. Was there any change in the design which caused the title to be predefined (not including workspace value).
 In any case if error occurs (with PDF preview) the title still shows the workspace path and NL chars appear in it corrupted.

   Tested driver: RC4.
(In reply to comment #12)
&gt;  First of all I would like to get a clarification I asked for last time. Was
&gt; there any change in the design which caused the title to be predefined (not
&gt; including workspace value).
&gt;  In any case if error occurs (with PDF preview) the title still shows the
&gt; workspace path and NL chars appear in it corrupted.
&gt;    Tested driver: RC4

You can set the report title from designer property editor for the predefined report title. 
After the change, if error occurs, the "error" will be used to replace the workspace path to avoid the garbage chars.
 I am not sure I understand this explanation: "You can set the report title from designer property editor for the predefined report title. " So, what happens if I don't do that ? The error is still present !!! The defect was opened exactly on this issue. So you are providing a workaround, which is fine. However the defect is not resolved. 
   I think the defect should remain open untill it is fully resolved.
What do you mean the error is still there? What we should do is to avoid the browser to display the title with garbage character. If the the report does not have a title, that you didn't set the title from the designer, then we will use the default title to instead of the workspace path. If there is error occurs when running report, we display "error" in browser title. 

So, there is no case there will be display a workspace path which could contain the garbage character. I also tried none english report names, they all can be displayed well. So, what is your expectation?
 Well, at least now I understand what you are saying. You are saying that there is no scenario in which title might inlcude NL chars.
  You are saying that "If there is error occurs when running report, we display "error" in browser title." This is not what I see when using RC4 build. As illustrated on the last attached image ("Title with dynamic value") in case error happens the page includes "Error happened while running the report" text, while the title still includes something like http:/127.0.0.1:513334/viewer/run? report=&lt;workspace path&gt;&lt;report name&gt; ...
If workspace include NL chars they are incorrectly displayed in the title.
   May be I am using the wrong build ? Or may be the problem was not fixed for all scenarios ending up with errors ? 
   In my case the error is not a result of incorrect data or access since the same report is perfectly previwed using HTML. I think the error stems from something that went wrong with PDF initialization.
What the build date that you are using? The error case should be changed on 05/31, when Xuelan add the comments to fix the bug. I test in my enviornment for the error case, the NL title in your attachment could not be reproduced. Please try the latest build and see if you still have the problem. 

Go back to the display title of the report, actually there should be a default value to show in the browser header if user didn't set title to the report,but not to display the workspace path. That is currently what we do.

Please try the latest build to see if you still have the problem.

Fixed.
Works fine in N20060607 build</WithStack>
    <WithOutStack>This is not BiDi specific but general to all languages defect.

1. Create workspace in the path including NLS chars
2. Create report
3. Preview it in either HTML or PDF viewers.

Result: The workplace path in the caption of opened widow shows NLS chars as hieroglyphs instead or real glyphs.
I could reproduce the problem with Japanese, but the problem is the URL displayed on the Winodws title of the HTML viewer.
I have attached the screen shot of the problem.

I think this is not a major probelm.

Could you please let us know if the symptom I described is correct and
how important it is ?

Created attachment 37702
Screenshot  for this problem
 This is only one context in which problem is realized. Another one is PDF previewer.
  I think this is serious problem especially taking into account the fact that it is common to all languages and is not specific to BiDi.
   It is up to you to decide whether or not the issue can be handled give available resources and other consideration you might have.
I do not agree that this is a major problem. Mati, could you give us your opinion, please?
I agree that this is not a life-and-death issue.  On the other hand, it is ugly.
Another consideration: if one copies the URL in the address field and pastes it to another browser window, will it go to the proper Web page?  If not, we have a functionality issue, not only a cosmetic one.
(In reply to comment #5)

The URL copy-and-paste scenario is a good question.  However, it does not quite apply in this case.  Since it is shown on the title of the window, there is no user gesture for copying from there to a browser.  So, I don't think it is a functionality issue.


Fixed.
  From the tests I run I see that for a split of second incorrect title is displayed and immediately replaced by something standard - "Birt Report Viewer". Does this mean that the functionality has changed ? 
 In any case if some kind of error happens and I guess the overrite of the title does not take place I still see incorrectly encoded chars in the title. I attach an image illustrating both cases.
Created attachment 42815
Title with fixed value 

This title appears if not issues with report generation occur.
Created attachment 42816
Title with dynamic value

If errors occur during report generation, still dynamic title is used with incorrectly encoded NL chars in it.
Fixed. 

Now if error appears using run servlet path, the page displayed with a defined title of 'Error' -- support externalization; otherwise, title will display what defined in design file first, if it is not set, then use a default title birt defined -- support externalization, too.
 First of all I would like to get a clarification I asked for last time. Was there any change in the design which caused the title to be predefined (not including workspace value).
 In any case if error occurs (with PDF preview) the title still shows the workspace path and NL chars appear in it corrupted.

   Tested driver: RC4.
(In reply to comment #12)
&gt;  First of all I would like to get a clarification I asked for last time. Was
&gt; there any change in the design which caused the title to be predefined (not
&gt; including workspace value).
&gt;  In any case if error occurs (with PDF preview) the title still shows the
&gt; workspace path and NL chars appear in it corrupted.
&gt;    Tested driver: RC4

You can set the report title from designer property editor for the predefined report title. 
After the change, if error occurs, the "error" will be used to replace the workspace path to avoid the garbage chars.
 I am not sure I understand this explanation: "You can set the report title from designer property editor for the predefined report title. " So, what happens if I don't do that ? The error is still present !!! The defect was opened exactly on this issue. So you are providing a workaround, which is fine. However the defect is not resolved. 
   I think the defect should remain open untill it is fully resolved.
What do you mean the error is still there? What we should do is to avoid the browser to display the title with garbage character. If the the report does not have a title, that you didn't set the title from the designer, then we will use the default title to instead of the workspace path. If there is error occurs when running report, we display "error" in browser title. 

So, there is no case there will be display a workspace path which could contain the garbage character. I also tried none english report names, they all can be displayed well. So, what is your expectation?
 Well, at least now I understand what you are saying. You are saying that there is no scenario in which title might inlcude NL chars.
  You are saying that "If there is error occurs when running report, we display "error" in browser title." This is not what I see when using RC4 build. As illustrated on the last attached image ("Title with dynamic value") in case error happens the page includes "Error happened while running the report" text, while the title still includes something like http:/127.0.0.1:513334/viewer/run? report=&lt;workspace path&gt;&lt;report name&gt; ...
If workspace include NL chars they are incorrectly displayed in the title.
   May be I am using the wrong build ? Or may be the problem was not fixed for all scenarios ending up with errors ? 
   In my case the error is not a result of incorrect data or access since the same report is perfectly previwed using HTML. I think the error stems from something that went wrong with PDF initialization.
What the build date that you are using? The error case should be changed on 05/31, when Xuelan add the comments to fix the bug. I test in my enviornment for the error case, the NL title in your attachment could not be reproduced. Please try the latest build and see if you still have the problem. 

Go back to the display title of the report, actually there should be a default value to show in the browser header if user didn't set title to the report,but not to display the workspace path. That is currently what we do.

Please try the latest build to see if you still have the problem.

Fixed.
Works fine in N20060607 build</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="129564" />
    <CreationDate amount="2006-02-27 08:41:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="SWT" />
    <Version amount="3.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>StyledText should render tabs exactly 4 spaces wide</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="VERIFIED" />
    <resolution amount="FIXED" />
    <WithStack>I20060223-1656

StyledText should render tabs exactly 4 spaces wide. In latest builds, indents of 4 spaces don't align with indents of 1 tab in some fonts (e.g. Lucida Console Regular 8). See screenshot.

This works as expected in 3.1.2 as well as in notepad.
Created attachment 35402
Screenshot
Not sure why this is broken.
fixed in HEAD &gt; 20060421

Verified in 3.2 N20060425-0010</WithStack>
    <WithOutStack>I20060223-1656

StyledText should render tabs exactly 4 spaces wide. In latest builds, indents of 4 spaces don't align with indents of 1 tab in some fonts (e.g. Lucida Console Regular 8). See screenshot.

This works as expected in 3.1.2 as well as in notepad.
Created attachment 35402
Screenshot
Not sure why this is broken.
fixed in HEAD &gt; 20060421

Verified in 3.2 N20060425-0010</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="129565" />
    <CreationDate amount="2006-02-27 08:43:00 -0500" />
    <DupId amount="99294" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="Text" />
    <Version amount="3.1.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Linux" />
    <priority amount="P3" />
    <bug_severity amount="enhancement" />
    <Summery>Incremental search bar</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="DUPLICATE" />
    <WithStack>Eclipse supports incremental search via Ctrl+J. This feature is useful, as Eclipse's search dialog appearing, when pressing Ctrl+F is utterly cluttered and therefore confusing. Infortunatly incremental search via Ctrl+J doesn't provide good visual feedback. Lacking a text entry field, it's impossible, to use it together with copy and paste. It requires some amount of curiosity to learn reversing incremental search order by pressing Shift+Ctrl+J.

As solution for that problem I'd suggest introduction of a search toolbar as introduced by Firefox (and vim).

Moving to the 'Text' group for review...



*** This bug has been marked as a duplicate of 99294 ***</WithStack>
    <WithOutStack>Eclipse supports incremental search via Ctrl+J. This feature is useful, as Eclipse's search dialog appearing, when pressing Ctrl+F is utterly cluttered and therefore confusing. Infortunatly incremental search via Ctrl+J doesn't provide good visual feedback. Lacking a text entry field, it's impossible, to use it together with copy and paste. It requires some amount of curiosity to learn reversing incremental search order by pressing Shift+Ctrl+J.

As solution for that problem I'd suggest introduction of a search toolbar as introduced by Firefox (and vim).

Moving to the 'Text' group for review...



*** This bug has been marked as a duplicate of 99294 ***</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="129566" />
    <CreationDate amount="2006-02-27 08:43:00 -0500" />
    <DupId amount="" />
    <classification amount="Tools" />
    <Product amount="AspectJ" />
    <component amount="Compiler" />
    <Version amount="DEVELOPMENT" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>ArrayIndexOutOfBoundsException with regular Java class</Summery>
    <Patches amount="0" />
    <Stacktraces amount="2">
      <Stacktrace timestamp="1437330672137">
        <Exception>java.lang.ArrayIndexOutOfBoundsException</Exception>
        <Reason />
        <Frames>
          <Frame depth="0">org.aspectj.weaver.ReferenceType.determineThoseTypesToUse(ReferenceType.java:465)</Frame>
          <Frame depth="1">org.aspectj.weaver.ReferenceType.getDeclaredInterfaces(ReferenceType.java:411)</Frame>
          <Frame depth="2">org.aspectj.weaver.bcel.BcelWeaver.weaveParentsFor(BcelWeaver.java:1199)</Frame>
          <Frame depth="3">org.aspectj.weaver.bcel.BcelWeaver.weave(BcelWeaver.java:1047)</Frame>
          <Frame depth="4">org.aspectj.ajdt.internal.compiler.AjCompilerAdapter.weave(AjCompilerAdapter.java:300)</Frame>
          <Frame depth="5">org.aspectj.ajdt.internal.compiler.AjCompilerAdapter.afterCompiling(AjCompilerAdapter.java:178)</Frame>
          <Frame depth="6">org.aspectj.ajdt.internal.compiler.CompilerAdapter.ajc$afterReturning$org_aspectj_ajdt_internal_compiler_CompilerAdapter$2$f9cc9ca0(CompilerAdapter.aj:70)</Frame>
          <Frame depth="7">org.aspectj.org.eclipse.jdt.internal.compiler.Compiler.compile(Compiler.java:367)</Frame>
          <Frame depth="8">org.aspectj.ajdt.internal.core.builder.AjBuildManager.performCompilation(AjBuildManager.java:824)</Frame>
          <Frame depth="9">org.aspectj.ajdt.internal.core.builder.AjBuildManager.doBuild(AjBuildManager.java:234)</Frame>
          <Frame depth="10">org.aspectj.ajdt.internal.core.builder.AjBuildManager.batchBuild(AjBuildManager.java:157)</Frame>
          <Frame depth="11">org.aspectj.ajde.internal.CompilerAdapter.compile(CompilerAdapter.java:122)</Frame>
          <Frame depth="12">org.aspectj.ajde.internal.AspectJBuildManager$CompilerThread.run(AspectJBuildManager.java:191)</Frame>
        </Frames>
      </Stacktrace>
      <Stacktrace timestamp="1437330672137">
        <Exception>java.lang.ArrayIndexOutOfBoundsException</Exception>
        <Reason>-1</Reason>
        <Frames>
          <Frame depth="0">org.aspectj.weaver.ReferenceType.determineThoseTypesToUse(ReferenceType.java:473)</Frame>
          <Frame depth="1">org.aspectj.weaver.ReferenceType.getDeclaredInterfaces(ReferenceType.java:419)</Frame>
          <Frame depth="2">org.aspectj.weaver.bcel.BcelWeaver.weaveParentsFor(BcelWeaver.java:1215)</Frame>
          <Frame depth="3">org.aspectj.weaver.bcel.BcelWeaver.weave(BcelWeaver.java:1058)</Frame>
          <Frame depth="4">org.aspectj.ajdt.internal.compiler.AjCompilerAdapter.weave(AjCompilerAdapter.java:312)</Frame>
          <Frame depth="5">org.aspectj.ajdt.internal.compiler.AjCompilerAdapter.afterCompiling(AjCompilerAdapter.java:184)</Frame>
          <Frame depth="6">org.aspectj.ajdt.internal.compiler.CompilerAdapter.ajc$afterReturning$org_aspectj_ajdt_internal_compiler_CompilerAdapter$2$f9cc9ca0(CompilerAdapter.aj:70)</Frame>
          <Frame depth="7">org.aspectj.org.eclipse.jdt.internal.compiler.Compiler.compile(Compiler.java:367)</Frame>
          <Frame depth="8">org.aspectj.ajdt.internal.core.builder.AjBuildManager.performCompilation(AjBuildManager.java:843)</Frame>
          <Frame depth="9">org.aspectj.ajdt.internal.core.builder.AjBuildManager.doBuild(AjBuildManager.java:243)</Frame>
          <Frame depth="10">org.aspectj.ajdt.internal.core.builder.AjBuildManager.batchBuild(AjBuildManager.java:163)</Frame>
          <Frame depth="11">org.aspectj.ajdt.ajc.AjdtCommand.doCommand(AjdtCommand.java:112)</Frame>
          <Frame depth="12">org.aspectj.ajdt.ajc.AjdtCommand.runCommand(AjdtCommand.java:60)</Frame>
          <Frame depth="13">org.aspectj.tools.ajc.Main.run(Main.java:356)</Frame>
          <Frame depth="14">org.aspectj.tools.ajc.Main.runMain(Main.java:246)</Frame>
          <Frame depth="15">org.aspectj.tools.ajc.Main.main(Main.java:86)</Frame>
        </Frames>
      </Stacktrace>
    </Stacktraces>
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>After "upgrading" to eclipse 3.2M5a and AJDT 20060224163227 I repeatedly get the following stack trace on a regular Java class:

java.lang.ArrayIndexOutOfBoundsException
at org.aspectj.weaver.ReferenceType.determineThoseTypesToUse(ReferenceType.java:465)
at org.aspectj.weaver.ReferenceType.getDeclaredInterfaces(ReferenceType.java:411)
at org.aspectj.weaver.bcel.BcelWeaver.weaveParentsFor(BcelWeaver.java:1199)
at org.aspectj.weaver.bcel.BcelWeaver.weave(BcelWeaver.java:1047)
at org.aspectj.ajdt.internal.compiler.AjCompilerAdapter.weave(AjCompilerAdapter.java:300)
at org.aspectj.ajdt.internal.compiler.AjCompilerAdapter.afterCompiling(AjCompilerAdapter.java:178)
at org.aspectj.ajdt.internal.compiler.CompilerAdapter.ajc$afterReturning$org_aspectj_ajdt_internal_compiler_CompilerAdapter$2$f9cc9ca0(CompilerAdapter.aj:70)
at org.aspectj.org.eclipse.jdt.internal.compiler.Compiler.compile(Compiler.java:367)
at org.aspectj.ajdt.internal.core.builder.AjBuildManager.performCompilation(AjBuildManager.java:824)
at org.aspectj.ajdt.internal.core.builder.AjBuildManager.doBuild(AjBuildManager.java:234)
at org.aspectj.ajdt.internal.core.builder.AjBuildManager.batchBuild(AjBuildManager.java:157)
at org.aspectj.ajde.internal.CompilerAdapter.compile(CompilerAdapter.java:122)
at org.aspectj.ajde.internal.AspectJBuildManager$CompilerThread.run(AspectJBuildManager.java:191)

ArrayIndexOutOfBoundsException thrown: -1

This happens even when the class is the only file in a fresh project (without any aspects!); existing AJ projects work fine as soon as this class is excluded from the build path. When the class is moved into a different project and referenced as dependency everything works as expected.
This used to work fine with previous versions of AJDT up to the last release for eclipse 3.1.
Created attachment 35403
eclipse project demonstrating the AIOOB

small eclipse project with a single Java class that causes AJDT to hiccup. The class works fine otherwise.
Reproduced on the command line:
ajc -1.5 common/SkipList.java
ABORT

Exception thrown from AspectJ DEVELOPMENT

This might be logged as a bug already -- find current bugs at
  http://bugs.eclipse.org/bugs/buglist.cgi?product=AspectJ&amp;component=Compiler

Bugs for exceptions thrown have titles File:line from the top stack,
e.g., "SomeFile.java:243"

If you don't find the exception below in a bug, please add a new bug
at http://bugs.eclipse.org/bugs/enter_bug.cgi?product=AspectJ
To make the bug a priority, please include a test program
that can reproduce this exception.
-1

when processing type mungers
when weaving
when batch building BuildConfig[null] #Files=1
-1
java.lang.ArrayIndexOutOfBoundsException: -1
        at org.aspectj.weaver.ReferenceType.determineThoseTypesToUse(ReferenceTy
pe.java:473)
        at org.aspectj.weaver.ReferenceType.getDeclaredInterfaces(ReferenceType.
java:419)
        at org.aspectj.weaver.bcel.BcelWeaver.weaveParentsFor(BcelWeaver.java:12
15)
        at org.aspectj.weaver.bcel.BcelWeaver.weave(BcelWeaver.java:1058)
        at org.aspectj.ajdt.internal.compiler.AjCompilerAdapter.weave(AjCompiler
Adapter.java:312)
        at org.aspectj.ajdt.internal.compiler.AjCompilerAdapter.afterCompiling(A
jCompilerAdapter.java:184)
        at org.aspectj.ajdt.internal.compiler.CompilerAdapter.ajc$afterReturning
$org_aspectj_ajdt_internal_compiler_CompilerAdapter$2$f9cc9ca0(CompilerAdapter.a
j:70)
        at org.aspectj.org.eclipse.jdt.internal.compiler.Compiler.compile(Compil
er.java:367)
        at org.aspectj.ajdt.internal.core.builder.AjBuildManager.performCompilat
ion(AjBuildManager.java:843)
        at org.aspectj.ajdt.internal.core.builder.AjBuildManager.doBuild(AjBuild
Manager.java:243)
        at org.aspectj.ajdt.internal.core.builder.AjBuildManager.batchBuild(AjBu
ildManager.java:163)
        at org.aspectj.ajdt.ajc.AjdtCommand.doCommand(AjdtCommand.java:112)
        at org.aspectj.ajdt.ajc.AjdtCommand.runCommand(AjdtCommand.java:60)
        at org.aspectj.tools.ajc.Main.run(Main.java:356)
        at org.aspectj.tools.ajc.Main.runMain(Main.java:246)
        at org.aspectj.tools.ajc.Main.main(Main.java:86)


1 fail|abort

ajc -version:
AspectJ Compiler DEVELOPMENT built on Friday Feb 24, 2006 at 17:44:57 GMT
I think it used to work 'by accident' - and improvements to generics handling are now causing the attached source code to expose a bug.  The problem is with the reference to T.

We have the generic type:

public class SkipList&lt;T extends Comparable&gt; extends Object implements Set&lt;T&gt;, Iterable&lt;T&gt;

with an inner class:

protected class SkipListIterator&lt;E&gt; implements Iterator&lt;T&gt;

we just get confused with the 'T' reference as it isnt a type variable in the subtype, it is from the enclosing type.

fix about to be committed if it passes all the tests.
fix committed.
This fix is now available in the latest AJDT (both for Eclipse 3.1 and Eclipse 3.2M5a).
Been running it since Friday ;-) and everything seems to work as expected; the class in question compiles fine again. Thanks!

Closing as fixed since fix is available in latest builds.</WithStack>
    <WithOutStack>After "upgrading" to eclipse 3.2M5a and AJDT 20060224163227 I repeatedly get the following stack trace on a regular Java class:


ArrayIndexOutOfBoundsException thrown: -1

This happens even when the class is the only file in a fresh project (without any aspects!); existing AJ projects work fine as soon as this class is excluded from the build path. When the class is moved into a different project and referenced as dependency everything works as expected.
This used to work fine with previous versions of AJDT up to the last release for eclipse 3.1.
Created attachment 35403
eclipse project demonstrating the AIOOB

small eclipse project with a single Java class that causes AJDT to hiccup. The class works fine otherwise.
Reproduced on the command line:
ajc -1.5 common/SkipList.java
ABORT

Exception thrown from AspectJ DEVELOPMENT

This might be logged as a bug already -- find current bugs at
  http://bugs.eclipse.org/bugs/buglist.cgi?product=AspectJ&amp;component=Compiler

Bugs for exceptions thrown have titles File:line from the top stack,
e.g., "SomeFile.java:243"

If you don't find the exception below in a bug, please add a new bug
at http://bugs.eclipse.org/bugs/enter_bug.cgi?product=AspectJ
To make the bug a priority, please include a test program
that can reproduce this exception.
-1

when processing type mungers
when weaving
when batch building BuildConfig[null] #Files=1
-1



1 fail|abort

ajc -version:
AspectJ Compiler DEVELOPMENT built on Friday Feb 24, 2006 at 17:44:57 GMT
I think it used to work 'by accident' - and improvements to generics handling are now causing the attached source code to expose a bug.  The problem is with the reference to T.

We have the generic type:

public class SkipList&lt;T extends Comparable&gt; extends Object implements Set&lt;T&gt;, Iterable&lt;T&gt;

with an inner class:

protected class SkipListIterator&lt;E&gt; implements Iterator&lt;T&gt;

we just get confused with the 'T' reference as it isnt a type variable in the subtype, it is from the enclosing type.

fix about to be committed if it passes all the tests.
fix committed.
This fix is now available in the latest AJDT (both for Eclipse 3.1 and Eclipse 3.2M5a).
Been running it since Friday ;-) and everything seems to work as expected; the class in question compiles fine again. Thanks!

Closing as fixed since fix is available in latest builds.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="129567" />
    <CreationDate amount="2006-02-27 08:45:00 -0500" />
    <DupId amount="" />
    <classification amount="BIRT" />
    <Product amount="BIRT" />
    <component amount="Report Engine" />
    <Version amount="2.0.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows 2000" />
    <priority amount="P3" />
    <bug_severity amount="major" />
    <Summery>BIDI3.2: [HCG] BiDi chars are not reordered in PDF report</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="2">
      <Enumeration lines="2">
        <Lines>
          <Line>1. Create report including BiDI text</Line>
          <Line>2. Preview it in PDF reader</Line>
        </Lines>
      </Enumeration>
      <Enumeration lines="3">
        <Lines>
          <Line>- bug 129567 (this one)</Line>
          <Line>- bug 181909</Line>
          <Line>- bug 228244.</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="VERIFIED" />
    <resolution amount="FIXED" />
    <WithStack>This is BiDi specific defect.

The problem stems from the fact that Acrobat reader does not invoke BiDi transformation on the document buffer before displaying it. As compared to it MS Word, Notepad do that. Consequently BiDi characters appear in it in the same order in which they are stored in the buffer, which is identical to the typing order. As you know BiDi characters should appear in the reversed order. For example if you type HELLO you expect to see OLLEH on the screen.
  To resolve this BIRT must invoke explicitly BiDI engine on the text before generating the PDF report. This can be done using IBM JDK 1.4.1 (and higher) BiDi engine.

1. Create report including BiDI text 
2. Preview it in PDF reader


Result. Pay your attention that BiDI data appears in the BIRT Eclipse reordered while in PDF report it is not reordered.

Similar problem was resolved in ITIM and WID IBM products exactly as I described above (by explicit invocation of BiDi engine on the relevant portion of text used for PDF reports generation).
fixed
It seems that something indeed changed in the behavior but the defect has not been resolved.
  First of all a couple of new issues appeared. itext..jar file supplied with installation is invalid and can not be opened with zip. I replaced it.
  Second, NL chars appear as question marks in PDF report probably due to incorrect font.
  Finally and most importantly the reordering of BiDi string is not correct. I attach the image illustrating the case. However there are 2 cases which are apparent from the image:
  1. In the mixed BiDi string including numbers the latter are reversed (e.g. 123 appear as 321)
  2. If BiDI string include underscore (e.g. fword_sword) it is displaced in the rendered string (e.g. fword_sword is displayed as fwordsword_)


Created attachment 39920
Display of BiDi text in PDF format

Notice the difference in the relative order of bidi words in the Preview and PDF. Notice that numbers (e.g. 123) are reversed in PDF (e.g. 123 appears as 321).
support BiDi layout of report in PDF involved more than just reversing the order of each word. We also need to look at chart, grid, padding and alignment etc...

Will need to research iText API's to leverage its support of BIDI.
CHange to severity to be enhancement as to support BiDi in PDF output completely.
This is by all means not an enhancement. You simply can not read BiDi data in PDF report if characters are not ordered correctly. The report is simply unreadable. It is not any more a matter of convenience but a usability issue. Thus I don't think you can call it enhancement.
  You should use IBM JDK BiDi engine which produce correct results. It was used for handling similar issues with PDF in ITIM and WID IBM products.


 "Reversing the order of each word" is not correct approach here. The correct approach is to convert the text from Logical LTR to Visual LTR BiDi format before passing it to the converter. For this conversion BiDi engine should be used. This engine is available from IBM JDK. 

Need to find out if the BiDi engine is in IBM JDK 1.4.1 only, or is it in other JDK as well.  We need to support commonly used JDKs.

Reason for setting this entry as enhamcenet is that supporting BiDi in PDF is a new feature to BIRT that is not planned in 2.1.0.


I believe this bug was fixed in 2.3.0.
Can anyone resolve and verify this bug please?

It should be fixed by a patch added to bug 228244.

In sum, there are 3 bugs supposed to be covered by this patch:

- bug 129567 (this one) 
- bug 181909 
- bug 228244.

(I would not duplicate at this point though...)
verified.
Verified in build (2.5.0.v20081209-0630).</WithStack>
    <WithOutStack>This is BiDi specific defect.

The problem stems from the fact that Acrobat reader does not invoke BiDi transformation on the document buffer before displaying it. As compared to it MS Word, Notepad do that. Consequently BiDi characters appear in it in the same order in which they are stored in the buffer, which is identical to the typing order. As you know BiDi characters should appear in the reversed order. For example if you type HELLO you expect to see OLLEH on the screen.
  To resolve this BIRT must invoke explicitly BiDI engine on the text before generating the PDF report. This can be done using IBM JDK 1.4.1 (and higher) BiDi engine.

1. Create report including BiDI text 
2. Preview it in PDF reader


Result. Pay your attention that BiDI data appears in the BIRT Eclipse reordered while in PDF report it is not reordered.

Similar problem was resolved in ITIM and WID IBM products exactly as I described above (by explicit invocation of BiDi engine on the relevant portion of text used for PDF reports generation).
fixed
It seems that something indeed changed in the behavior but the defect has not been resolved.
  First of all a couple of new issues appeared. itext..jar file supplied with installation is invalid and can not be opened with zip. I replaced it.
  Second, NL chars appear as question marks in PDF report probably due to incorrect font.
  Finally and most importantly the reordering of BiDi string is not correct. I attach the image illustrating the case. However there are 2 cases which are apparent from the image:
  1. In the mixed BiDi string including numbers the latter are reversed (e.g. 123 appear as 321)
  2. If BiDI string include underscore (e.g. fword_sword) it is displaced in the rendered string (e.g. fword_sword is displayed as fwordsword_)


Created attachment 39920
Display of BiDi text in PDF format

Notice the difference in the relative order of bidi words in the Preview and PDF. Notice that numbers (e.g. 123) are reversed in PDF (e.g. 123 appears as 321).
support BiDi layout of report in PDF involved more than just reversing the order of each word. We also need to look at chart, grid, padding and alignment etc...

Will need to research iText API's to leverage its support of BIDI.
CHange to severity to be enhancement as to support BiDi in PDF output completely.
This is by all means not an enhancement. You simply can not read BiDi data in PDF report if characters are not ordered correctly. The report is simply unreadable. It is not any more a matter of convenience but a usability issue. Thus I don't think you can call it enhancement.
  You should use IBM JDK BiDi engine which produce correct results. It was used for handling similar issues with PDF in ITIM and WID IBM products.


 "Reversing the order of each word" is not correct approach here. The correct approach is to convert the text from Logical LTR to Visual LTR BiDi format before passing it to the converter. For this conversion BiDi engine should be used. This engine is available from IBM JDK. 

Need to find out if the BiDi engine is in IBM JDK 1.4.1 only, or is it in other JDK as well.  We need to support commonly used JDKs.

Reason for setting this entry as enhamcenet is that supporting BiDi in PDF is a new feature to BIRT that is not planned in 2.1.0.


I believe this bug was fixed in 2.3.0.
Can anyone resolve and verify this bug please?

It should be fixed by a patch added to bug 228244.

In sum, there are 3 bugs supposed to be covered by this patch:

- bug 129567 (this one) 
- bug 181909 
- bug 228244.

(I would not duplicate at this point though...)
verified.
Verified in build (2.5.0.v20081209-0630).</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="129568" />
    <CreationDate amount="2006-02-27 08:53:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse Foundation" />
    <Product amount="Community" />
    <component amount="Website" />
    <Version amount="unspecified" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Download stats for WTP and eclipse 3.1.x releases</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="4">
        <Lines>
          <Line>- WTP 1.0 (and 1.0.1)</Line>
          <Line>- Eclipse 3.1</Line>
          <Line>- Eclipse 3.1.x</Line>
          <Line>I'm not sure why you need to understand the load on the servers... Isn't that what we're here for?  ;)</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="RESOLVED" />
    <resolution amount="WORKSFORME" />
    <WithStack>In order to understand the load that servers will face when Callisto will be released, I would like to understand how many downlods occurred after the first few weeks that followed the release of those eclipse projects:
 - WTP 1.0 (and 1.0.1)
 - Eclipse 3.1
 - Eclipse 3.1.x
I'm not sure why you need to understand the load on the servers... Isn't that what we're here for?  ;)

You have everything you need to do this yourself - https://dev.eclipse.org/committers/ -&gt; Live Download Stats

Stats only go back to Jan 1/06 so your sampling will be limited.

D.
The main reason for asking this data is to understand if it is reasonnable to use update manager to download callisto.
(In reply to comment #2)
&gt; The main reason for asking this data is to understand if it is reasonnable to
&gt; use update manager to download callisto.

That's a good point, and after discussing this in great detail on bug 127290, I really wonder if Update Manager is suitable for this task.

D.
Closing as worksforme... Download stats are self-serve in Committer Tools.

D.</WithStack>
    <WithOutStack>In order to understand the load that servers will face when Callisto will be released, I would like to understand how many downlods occurred after the first few weeks that followed the release of those eclipse projects:
 - WTP 1.0 (and 1.0.1)
 - Eclipse 3.1
 - Eclipse 3.1.x
I'm not sure why you need to understand the load on the servers... Isn't that what we're here for?  ;)

You have everything you need to do this yourself - https://dev.eclipse.org/committers/ -&gt; Live Download Stats

Stats only go back to Jan 1/06 so your sampling will be limited.

D.
The main reason for asking this data is to understand if it is reasonnable to use update manager to download callisto.
(In reply to comment #2)
&gt; The main reason for asking this data is to understand if it is reasonnable to
&gt; use update manager to download callisto.

That's a good point, and after discussing this in great detail on bug 127290, I really wonder if Update Manager is suitable for this task.

D.
Closing as worksforme... Download stats are self-serve in Committer Tools.

D.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="129569" />
    <CreationDate amount="2006-02-27 09:06:00 -0500" />
    <DupId amount="" />
    <classification amount="BIRT" />
    <Product amount="BIRT" />
    <component amount="Data" />
    <Version amount="2.0.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows All" />
    <priority amount="P2" />
    <bug_severity amount="normal" />
    <Summery>HCG_BIDI: Undesirable order of BiDI chars in Query window</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="5">
      <Enumeration lines="10">
        <Lines>
          <Line>1. Create DB2 data base</Line>
          <Line>2. Create user with Latin name (e.g. tomer)</Line>
          <Line>3. Create table under this user with mixed Latin and BiDI name (e.g. tomerREMOT)</Line>
          <Line>4. Make sure that this table has columns with BiDi name (e.g. "EMAN_NMULOC")</Line>
          <Line>5. Create Data Source based on the DB from 1</Line>
          <Line>6. Create Data Set based on the table from 3</Line>
          <Line>7. Add column name from 4 to the select portion of the SQL query</Line>
          <Line>8. Add table name from 3 to the from portion of SQL query</Line>
          <Line>9. Add following condition to the where portion of SQL query:</Line>
          <Line>tomer.tomerREMOT.EMAN_NMULOC != 'OLLEH world'</Line>
        </Lines>
      </Enumeration>
      <Enumeration lines="3">
        <Lines>
          <Line>1. select tomer.tomerREMOT.EMAN_NMULOC</Line>
          <Line>2. from tomer.tomerREMOT</Line>
          <Line>3. where tomer.tomerREMOT.EMAN_NMULOC != 'OLLEH world'</Line>
        </Lines>
      </Enumeration>
      <Enumeration lines="3">
        <Lines>
          <Line>1. select tomer.tomerEMAN_NMULOC.REMOT</Line>
          <Line>2. from tomer.tomerREMOT</Line>
          <Line>3. where tomer.tomerOLLEH' =! EMAN_NMULOC.REMOT world'</Line>
        </Lines>
      </Enumeration>
      <Enumeration lines="3">
        <Lines>
          <Line>1. select tomer.tomerREMOT.EMAN_NMULOC</Line>
          <Line>2. from tomer.tomerREMOT</Line>
          <Line>3. where tomer.tomerREMOT.EMAN_NMULOC != 'OLLEH world'</Line>
        </Lines>
      </Enumeration>
      <Enumeration lines="3">
        <Lines>
          <Line>1. select tomer.tomerREMOT.EMAN_NMULOC</Line>
          <Line>2. from tomer.tomerREMOT</Line>
          <Line>3. where tomer.tomerREMOT.ELLOH' =! EMAN_NMULOC world'</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>This is BiDI specific defect. It is similar to another defect in which similar problem is reported for Expression Builder dialog. However in this defect we are talking about context of Query screen in the Edit Data Set dialog.
  Capital characters used in the examples below stay for BiDi (Hebrew or Arabic) characters.

1. Create DB2 data base
2. Create user with Latin name (e.g. tomer)
3. Create table under this user with mixed Latin and BiDI name (e.g. tomerREMOT)
4. Make sure that this table has columns with BiDi name (e.g. "EMAN_NMULOC")
5. Create Data Source based on the DB from 1
6. Create Data Set based on the table from 3
7. Add column name from 4 to the select portion of the SQL query
8. Add table name from 3 to the from portion of SQL query 
9. Add following condition to the where portion of SQL query:
    tomer.tomerREMOT.EMAN_NMULOC != 'OLLEH world'

Expected results: 
   1. select tomer.tomerREMOT.EMAN_NMULOC
   2. from tomer.tomerREMOT
   3. where tomer.tomerREMOT.EMAN_NMULOC != 'OLLEH world'

Actual results:
   1. select tomer.tomerEMAN_NMULOC.REMOT
   2. from tomer.tomerREMOT
   3. where tomer.tomerOLLEH' =! EMAN_NMULOC.REMOT world'

As you can see in the 1st and 3rd rows the order of characters is completely ruined such that it is impossible to read the query. In the 1st row the name of column and part of table name are switched. In the 3rd row part of the constant , table name and column name are mixed.
Not familiar with BiDi, but I did try to step through what you reported, it looked fine.
Would you mind attaching the report design file so that I can run some tests to understand what exactly you are talking about


 I am talking about undesirable display of SQL Query including Hebrew characters in the Edit Data Set dialog. It can not look fine as you explain or we have different perceptions of what "fine" is. Please make sure you use Arabic/Hebrew characters instead of capital English letters in the sample I provided. 
  I also attach a snapshot of the Edit Data Set dialog. Incorrect display of SQL query is encircled with red line.
You got the point and I didn't think the test I ran could cover whatever you said about the undesirable order bug. I used some characters which for my understanding are Hebrew though.

And that's why I asked for an attached file to figure out where the problem is. 


Created attachment 36222
Snapshot of SQL query with Heb. chars in Edit Data Set dialog
Please look at the snapshot and let me know if you need any additional information.
Tomer,
I had a look at the snapshot attached,and did notice the sequence of the string looked wierd compared to the normal "table.column" pattern

However,it turned out what has seemly been displayed incorrectly may should be displayed that way.It's just we shouldn't see the sql as a "normal" select clause cuz the sting will be parsed differntly from English when it comes to Hebrew and if you keep pressing Right-Arrow key,you'll find cursor go exactly the way it should be going.  

Most importantly, I was wondering if you can get the expected results from "preview results" page using the sql of "Undesirable order" cuz I did and not only on DB2.

Having said that, I gotta say I don't speak Hebrew
So there might still be some misunderstanding here, let me know that's the case

Regards
  The problem is not with the cursor movement and not with the run time (since you and I do get the correct results on the "preview results" page when run the query), the problem is with display of SQL query.
  SQL query has well defined syntax and thus has well defined expected layout. This layout should not depend on the characters used in the query. The relative order of tokens (e.g. table, column, constants) should remain the same regardless the NL chars used. This is not the case.
  As a result of incorrect layout it is actually impossible to read the query. On the image you see realtively very simple example. Even in this example it is not very clear what are the names of the tables, schema and columns. 
  

Tomer, thanks for the inspirational comments.
Been fixed.
  The defect was fixed for only "from" portion of the sample. "where" portion still has incorrect layout.
  Here are updated results:
Expected results: 
   1. select tomer.tomerREMOT.EMAN_NMULOC
   2. from tomer.tomerREMOT
   3. where tomer.tomerREMOT.EMAN_NMULOC != 'OLLEH world'

Actual results:
   1. select tomer.tomerREMOT.EMAN_NMULOC
   2. from tomer.tomerREMOT
   3. where tomer.tomerREMOT.ELLOH' =! EMAN_NMULOC world'

  In addition when draging/droping table columns you can notice unexpected cursor movement. For example if you drop table name into select row and before droping the cursor was positioned on the right side of the word "select", when you start draging the column the cursor jumps several characters to the left (sometimes to the beginning of the row).
Oops, didn't notice the where clause.
Should be working now.

The weird cursor movement is a bug on SWT
Please refer to bug 136963 for more info. 
Regards
Verified in daily build 20060517. Fixed.
Works fine with 2.1RC3a</WithStack>
    <WithOutStack>This is BiDI specific defect. It is similar to another defect in which similar problem is reported for Expression Builder dialog. However in this defect we are talking about context of Query screen in the Edit Data Set dialog.
  Capital characters used in the examples below stay for BiDi (Hebrew or Arabic) characters.

1. Create DB2 data base
2. Create user with Latin name (e.g. tomer)
3. Create table under this user with mixed Latin and BiDI name (e.g. tomerREMOT)
4. Make sure that this table has columns with BiDi name (e.g. "EMAN_NMULOC")
5. Create Data Source based on the DB from 1
6. Create Data Set based on the table from 3
7. Add column name from 4 to the select portion of the SQL query
8. Add table name from 3 to the from portion of SQL query 
9. Add following condition to the where portion of SQL query:
    tomer.tomerREMOT.EMAN_NMULOC != 'OLLEH world'

Expected results: 
   1. select tomer.tomerREMOT.EMAN_NMULOC
   2. from tomer.tomerREMOT
   3. where tomer.tomerREMOT.EMAN_NMULOC != 'OLLEH world'

Actual results:
   1. select tomer.tomerEMAN_NMULOC.REMOT
   2. from tomer.tomerREMOT
   3. where tomer.tomerOLLEH' =! EMAN_NMULOC.REMOT world'

As you can see in the 1st and 3rd rows the order of characters is completely ruined such that it is impossible to read the query. In the 1st row the name of column and part of table name are switched. In the 3rd row part of the constant , table name and column name are mixed.
Not familiar with BiDi, but I did try to step through what you reported, it looked fine.
Would you mind attaching the report design file so that I can run some tests to understand what exactly you are talking about


 I am talking about undesirable display of SQL Query including Hebrew characters in the Edit Data Set dialog. It can not look fine as you explain or we have different perceptions of what "fine" is. Please make sure you use Arabic/Hebrew characters instead of capital English letters in the sample I provided. 
  I also attach a snapshot of the Edit Data Set dialog. Incorrect display of SQL query is encircled with red line.
You got the point and I didn't think the test I ran could cover whatever you said about the undesirable order bug. I used some characters which for my understanding are Hebrew though.

And that's why I asked for an attached file to figure out where the problem is. 


Created attachment 36222
Snapshot of SQL query with Heb. chars in Edit Data Set dialog
Please look at the snapshot and let me know if you need any additional information.
Tomer,
I had a look at the snapshot attached,and did notice the sequence of the string looked wierd compared to the normal "table.column" pattern

However,it turned out what has seemly been displayed incorrectly may should be displayed that way.It's just we shouldn't see the sql as a "normal" select clause cuz the sting will be parsed differntly from English when it comes to Hebrew and if you keep pressing Right-Arrow key,you'll find cursor go exactly the way it should be going.  

Most importantly, I was wondering if you can get the expected results from "preview results" page using the sql of "Undesirable order" cuz I did and not only on DB2.

Having said that, I gotta say I don't speak Hebrew
So there might still be some misunderstanding here, let me know that's the case

Regards
  The problem is not with the cursor movement and not with the run time (since you and I do get the correct results on the "preview results" page when run the query), the problem is with display of SQL query.
  SQL query has well defined syntax and thus has well defined expected layout. This layout should not depend on the characters used in the query. The relative order of tokens (e.g. table, column, constants) should remain the same regardless the NL chars used. This is not the case.
  As a result of incorrect layout it is actually impossible to read the query. On the image you see realtively very simple example. Even in this example it is not very clear what are the names of the tables, schema and columns. 
  

Tomer, thanks for the inspirational comments.
Been fixed.
  The defect was fixed for only "from" portion of the sample. "where" portion still has incorrect layout.
  Here are updated results:
Expected results: 
   1. select tomer.tomerREMOT.EMAN_NMULOC
   2. from tomer.tomerREMOT
   3. where tomer.tomerREMOT.EMAN_NMULOC != 'OLLEH world'

Actual results:
   1. select tomer.tomerREMOT.EMAN_NMULOC
   2. from tomer.tomerREMOT
   3. where tomer.tomerREMOT.ELLOH' =! EMAN_NMULOC world'

  In addition when draging/droping table columns you can notice unexpected cursor movement. For example if you drop table name into select row and before droping the cursor was positioned on the right side of the word "select", when you start draging the column the cursor jumps several characters to the left (sometimes to the beginning of the row).
Oops, didn't notice the where clause.
Should be working now.

The weird cursor movement is a bug on SWT
Please refer to bug 136963 for more info. 
Regards
Verified in daily build 20060517. Fixed.
Works fine with 2.1RC3a</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="129570" />
    <CreationDate amount="2006-02-27 09:14:00 -0500" />
    <DupId amount="129571" />
    <classification amount="Eclipse" />
    <Product amount="PDE" />
    <component amount="Doc" />
    <Version amount="3.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>NPE if extension of org.eclipse.pde.ui.pluginContent point does not contain _optional_ "description" sub-element</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="DUPLICATE" />
    <WithStack>In the PDE help system, topic for "org.eclipse.pde.ui.pluginContent" extension point, the &lt;description&gt; subelement of the &lt;wizard&gt; configuration element is marked as optional: 
&lt;!ELEMENT wizard (description?)&gt;

However, if this element is skipped, attempt to invoke the plugin wizard fails with attached NPE just after user selects contributed template in the "Available Templates:" list


*** This bug has been marked as a duplicate of 129571 ***</WithStack>
    <WithOutStack>In the PDE help system, topic for "org.eclipse.pde.ui.pluginContent" extension point, the &lt;description&gt; subelement of the &lt;wizard&gt; configuration element is marked as optional: 
&lt;!ELEMENT wizard (description?)&gt;

However, if this element is skipped, attempt to invoke the plugin wizard fails with attached NPE just after user selects contributed template in the "Available Templates:" list


*** This bug has been marked as a duplicate of 129571 ***</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="129571" />
    <CreationDate amount="2006-02-27 09:16:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="PDE" />
    <component amount="UI" />
    <Version amount="3.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>NPE if extension of org.eclipse.pde.ui.pluginContent point does not contain _optional_ "description" sub-element</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>In the PDE help system, topic for "org.eclipse.pde.ui.pluginContent" extension point, the &lt;description&gt; subelement of the &lt;wizard&gt; configuration element is marked as optional: 
&lt;!ELEMENT wizard (description?)&gt;

However, if this element is skipped, attempt to invoke the plugin wizard fails with attached NPE just after user selects contributed template in the "Available Templates:" list
Created attachment 35404
NPE log

This is logged NPE
*** Bug 129570 has been marked as a duplicate of this bug. ***
JLB, make sure we don't choke on an empty or missing description.

We could either leave the pane empty, or say 'No description is available'.
Fixed</WithStack>
    <WithOutStack>In the PDE help system, topic for "org.eclipse.pde.ui.pluginContent" extension point, the &lt;description&gt; subelement of the &lt;wizard&gt; configuration element is marked as optional: 
&lt;!ELEMENT wizard (description?)&gt;

However, if this element is skipped, attempt to invoke the plugin wizard fails with attached NPE just after user selects contributed template in the "Available Templates:" list
Created attachment 35404
NPE log

This is logged NPE
*** Bug 129570 has been marked as a duplicate of this bug. ***
JLB, make sure we don't choke on an empty or missing description.

We could either leave the pane empty, or say 'No description is available'.
Fixed</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="129572" />
    <CreationDate amount="2006-02-27 09:29:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="JDT" />
    <component amount="Core" />
    <Version amount="3.1.1" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows 2000" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Build Path Errors are not processed sanely</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="NEW" />
    <resolution amount="" />
    <WithStack>The way build path errors are treated by the compiler seems wrong. I manually refactored a class (doing automatically was simply to difficult given the number of source files). The class was a.b.MyClass, and changed to x.y.MyClass. I then wanted the conpiler to tell me all of the source files that need to be changed. However, if any source file referenced a.b.MyClass explicitly, including "import a.b.MyClass;", the compiler just reported 2 errors - 1 telling me that there was a build path error as it could not find a.b.MyClass, and another in some Java file that indirectly relies on one of the files that did not compile! Not even the file that caued the error!

Furthermore, whilst compiling the source (there are several thousand source files), the compiler does report other errors - thge Problems tab is populated and the little failure icon starts being added to lots of source files and packages. But as soon as this build path error is encountered, these other errors are removed from the package explorer and the Problems tab. This is very frustrating!

The Windows/Preferences/Java/Compiler/Building dialog has a secion titled Build Path Errors. The checkbox "Abort build when path errors occur" and the dropdown list controlling behavior for "incomplete build path" have no effect on this behavior - at least none I could find. 

In the end, I defined both a.b.MyClass and x.y.MyClass. This enabled the compiler to at least report that it could not resolve the type MyClass. I could not work out when it decided to say the definition was ambiguous, or when it just said it could not be resolved, even though in all cases it was ambiguous (i.e. most of the source files import a.b.* and import x.y.*).</WithStack>
    <WithOutStack>The way build path errors are treated by the compiler seems wrong. I manually refactored a class (doing automatically was simply to difficult given the number of source files). The class was a.b.MyClass, and changed to x.y.MyClass. I then wanted the conpiler to tell me all of the source files that need to be changed. However, if any source file referenced a.b.MyClass explicitly, including "import a.b.MyClass;", the compiler just reported 2 errors - 1 telling me that there was a build path error as it could not find a.b.MyClass, and another in some Java file that indirectly relies on one of the files that did not compile! Not even the file that caued the error!

Furthermore, whilst compiling the source (there are several thousand source files), the compiler does report other errors - thge Problems tab is populated and the little failure icon starts being added to lots of source files and packages. But as soon as this build path error is encountered, these other errors are removed from the package explorer and the Problems tab. This is very frustrating!

The Windows/Preferences/Java/Compiler/Building dialog has a secion titled Build Path Errors. The checkbox "Abort build when path errors occur" and the dropdown list controlling behavior for "incomplete build path" have no effect on this behavior - at least none I could find. 

In the end, I defined both a.b.MyClass and x.y.MyClass. This enabled the compiler to at least report that it could not resolve the type MyClass. I could not work out when it decided to say the definition was ambiguous, or when it just said it could not be resolved, even though in all cases it was ambiguous (i.e. most of the source files import a.b.* and import x.y.*).</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="129573" />
    <CreationDate amount="2006-02-27 09:34:00 -0500" />
    <DupId amount="" />
    <classification amount="BIRT" />
    <Product amount="BIRT" />
    <component amount="Report Designer" />
    <Version amount="2.0.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows 2000" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>HCG_BIDI: Undesirable order of BiDi chars in Query field in Properties view</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="2">
        <Lines>
          <Line>1. Follow the steps from defect 129569 to create Data Source and Data Set</Line>
          <Line>2. Select the Data Set and look at the Query field in the Properties view</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="NEW" />
    <resolution amount="" />
    <WithStack>This is BiDi specific problem.

1. Follow the steps from defect 129569 to create Data Source and Data Set
2. Select the Data Set and look at the Query field in the Properties view

Actual Result: The SQL Query is corrupted due to incorrect order of BiDi chars in it. The result is similar to the one reported in defect 129569. However it occurs in different context and in different widget. In this case the widget is single line text while in 129569 defect it was multi line text.
Synch up with Callisto schedule to rename RC1 as RC2 targeted 5/5/2006.
We use SWT componet to show the text.
We think BiDI should be supported at SWT level instead of BIRT.
Need discuss with SWT/JFace team.
Looks at SWT text level, we can't find way to control the BiDi things.
Need more discussion with SWT before we know the solution.
See comments #3.
Defer for more investigation.</WithStack>
    <WithOutStack>This is BiDi specific problem.

1. Follow the steps from defect 129569 to create Data Source and Data Set
2. Select the Data Set and look at the Query field in the Properties view

Actual Result: The SQL Query is corrupted due to incorrect order of BiDi chars in it. The result is similar to the one reported in defect 129569. However it occurs in different context and in different widget. In this case the widget is single line text while in 129569 defect it was multi line text.
Synch up with Callisto schedule to rename RC1 as RC2 targeted 5/5/2006.
We use SWT componet to show the text.
We think BiDI should be supported at SWT level instead of BIRT.
Need discuss with SWT/JFace team.
Looks at SWT text level, we can't find way to control the BiDi things.
Need more discussion with SWT before we know the solution.
See comments #3.
Defer for more investigation.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="129574" />
    <CreationDate amount="2006-02-27 09:34:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="Resources" />
    <Version amount="3.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="critical" />
    <Summery>IBM JRE 5.0 core dump with NL pack</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="2">
        <Lines>
          <Line>1. install NL pack</Line>
          <Line>2. launch Eclipse, and some operation (no specific scnario)</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="CLOSED" />
    <resolution amount="INVALID" />
    <WithStack>Platform: WindowsXP Japanese sp2 and RedHat Enterprise Linux WS U2
Driver: M5a, IBM JRE 1.5.0 GA
NL pack early build with 3.1 resource level

Steps
1. install NL pack
2. launch Eclipse, and some operation (no specific scnario)

Result
IDE will be freezed soon on Windows. Freeze at starting up on RedHat
This error doesn't occure on Sun Jave 1.5_06.
Created attachment 35405
java core log file
Move to Platform/Runtime
I'll take this - it looks like the freeze is happening in resources code.

I'm confused about what is happening.  In the bug title it says "core dump", but in the description it says "freeze".  Does it actually crash, or is it just not responding?  If not responding, is CPU usage high or low (from Windows Task List)?

To confirm, do you get the same freeze on RedHat Linux?  If so, can you attach a stack dump for Linux as well?  To do this, do "kill -3 &lt;pid&gt;" where &lt;pid&gt; is the process id of the Java process.
There are various behaviors. When I encountered IDE freeze, CPU was low usage and got zero size JVM core dump file and sometimes I got log file attached earlier. Another case, I got crash at launching up Eclipse and I got no JVM log.

On RedHat, I got freeze when showing Eclipse splash. CPU usage was low. I was unable to kill the java process. dump file was not created. 
This bug has been reported to the JRE provider, and it appears to be a bug in the JRE. (tracking number: 24341,001,866)
ok. closing.</WithStack>
    <WithOutStack>Platform: WindowsXP Japanese sp2 and RedHat Enterprise Linux WS U2
Driver: M5a, IBM JRE 1.5.0 GA
NL pack early build with 3.1 resource level

Steps
1. install NL pack
2. launch Eclipse, and some operation (no specific scnario)

Result
IDE will be freezed soon on Windows. Freeze at starting up on RedHat
This error doesn't occure on Sun Jave 1.5_06.
Created attachment 35405
java core log file
Move to Platform/Runtime
I'll take this - it looks like the freeze is happening in resources code.

I'm confused about what is happening.  In the bug title it says "core dump", but in the description it says "freeze".  Does it actually crash, or is it just not responding?  If not responding, is CPU usage high or low (from Windows Task List)?

To confirm, do you get the same freeze on RedHat Linux?  If so, can you attach a stack dump for Linux as well?  To do this, do "kill -3 &lt;pid&gt;" where &lt;pid&gt; is the process id of the Java process.
There are various behaviors. When I encountered IDE freeze, CPU was low usage and got zero size JVM core dump file and sometimes I got log file attached earlier. Another case, I got crash at launching up Eclipse and I got no JVM log.

On RedHat, I got freeze when showing Eclipse splash. CPU usage was low. I was unable to kill the java process. dump file was not created. 
This bug has been reported to the JRE provider, and it appears to be a bug in the JRE. (tracking number: 24341,001,866)
ok. closing.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="129575" />
    <CreationDate amount="2006-02-27 09:34:00 -0500" />
    <DupId amount="" />
    <classification amount="WebTools" />
    <Product amount="WTP ServerTools" />
    <component amount="jst.server" />
    <Version amount="1.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="major" />
    <Summery>Generic server launch configuration source lookup omits libraries</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="WONTFIX" />
    <WithStack>When adding a project from generic server launch configuration source tab that contains libraries only source folders are included to source lookup path.

When adding (user) libraries everything seems to be all right, but when expanding the library it seems to be empty even though there are archives with source attached to them.

This makes debugging extremely tedious when every .jar has to be first resolved from .class reference and then manually placed to the source lookup path.

For reference see the java application configuration.
I can not completely understand what you are trying to do here. Are you adding a project as a source container on launch config and have problems with source files that are part of this added project?
What about user libraries are you adding them to the project or directly to the launch configuration.
Closing since I can not repro. Please reopen with more information for reproducing it.
This bug is being moved to the 'closed' state since it has been in the 'remind' state for a so long it is assume it is no longer a problem or otherwise not a useful bugzilla entry. 

If this semi-automatic processing is in error, please re-open, or open another bug. 


Reopening, in order to put into a valid closed state as remind is now deprecated, and closed, remind, does not make much sense.
Resolving as won't fix, as these had previously been closed out, if this is incorrect, please provide more data and reopen.

Thanks,
Re-closing appropriately with valid state.</WithStack>
    <WithOutStack>When adding a project from generic server launch configuration source tab that contains libraries only source folders are included to source lookup path.

When adding (user) libraries everything seems to be all right, but when expanding the library it seems to be empty even though there are archives with source attached to them.

This makes debugging extremely tedious when every .jar has to be first resolved from .class reference and then manually placed to the source lookup path.

For reference see the java application configuration.
I can not completely understand what you are trying to do here. Are you adding a project as a source container on launch config and have problems with source files that are part of this added project?
What about user libraries are you adding them to the project or directly to the launch configuration.
Closing since I can not repro. Please reopen with more information for reproducing it.
This bug is being moved to the 'closed' state since it has been in the 'remind' state for a so long it is assume it is no longer a problem or otherwise not a useful bugzilla entry. 

If this semi-automatic processing is in error, please re-open, or open another bug. 


Reopening, in order to put into a valid closed state as remind is now deprecated, and closed, remind, does not make much sense.
Resolving as won't fix, as these had previously been closed out, if this is incorrect, please provide more data and reopen.

Thanks,
Re-closing appropriately with valid state.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="129576" />
    <CreationDate amount="2006-02-27 09:39:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="JDT" />
    <component amount="Core" />
    <Version amount="3.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="enhancement" />
    <Summery>List unreferenced classes for a project.</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="NEW" />
    <resolution amount="" />
    <WithStack>Keeping an old source base clean and clutter free may become a daunting task. If I could get a list of classes not referenced by any other class for a given (self contained) project, then I could clean up the mess.

Current workaround is: For each class, check references for project - if any then continue, otherwise check manually if class could be instantiated by reflection in the project.

It's the set of the latter I'd be interested in. A solution could be to either list them all, mark them as possibly deprecated, or move them to another folder, e.g. /deprecated.

Of course, the functionality need not be project only - it could as well be on the entire workspace, but it's primarily a per project evaluation.

Actually it's much like the "Close Unrelated Projects" of 3.2M5 - to remove clutter and enhance performance.

Per Holst</WithStack>
    <WithOutStack>Keeping an old source base clean and clutter free may become a daunting task. If I could get a list of classes not referenced by any other class for a given (self contained) project, then I could clean up the mess.

Current workaround is: For each class, check references for project - if any then continue, otherwise check manually if class could be instantiated by reflection in the project.

It's the set of the latter I'd be interested in. A solution could be to either list them all, mark them as possibly deprecated, or move them to another folder, e.g. /deprecated.

Of course, the functionality need not be project only - it could as well be on the entire workspace, but it's primarily a per project evaluation.

Actually it's much like the "Close Unrelated Projects" of 3.2M5 - to remove clutter and enhance performance.

Per Holst</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="129577" />
    <CreationDate amount="2006-02-27 09:48:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="Debug" />
    <Version amount="3.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>separate viewer model and widgets</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="VERIFIED" />
    <resolution amount="FIXED" />
    <WithStack>Currently, the async model (and tree model) contain pointers to widgets from the model nodes. Instead, the viewer should maintain the widget mapping for model nodes.
Fixed. Removed the widget field from model nodes and the widget cache from the model. The viewer now uses the structured viewer element map to maintain element (node) to widget mapping. Had to modify the viewers to use an element map.

Changes to the following:

AsynchronousModel.java
AsynchronousModelViewer.java
AsynchronousTreeModelViewer.java
ModelLabelRequestMonitor.java
ModelNode.java
VariablesView.java
VariablesViewer.java
Please verify, Kevin.
verified</WithStack>
    <WithOutStack>Currently, the async model (and tree model) contain pointers to widgets from the model nodes. Instead, the viewer should maintain the widget mapping for model nodes.
Fixed. Removed the widget field from model nodes and the widget cache from the model. The viewer now uses the structured viewer element map to maintain element (node) to widget mapping. Had to modify the viewers to use an element map.

Changes to the following:

AsynchronousModel.java
AsynchronousModelViewer.java
AsynchronousTreeModelViewer.java
ModelLabelRequestMonitor.java
ModelNode.java
VariablesView.java
VariablesViewer.java
Please verify, Kevin.
verified</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="129578" />
    <CreationDate amount="2006-02-27 09:58:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="JDT" />
    <component amount="APT" />
    <Version amount="3.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>APT plug-in version incorrect</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="WONTFIX" />
    <WithStack>As new plug-ins APT plug-ins should be versionned 1.0.
Sorry, we've already released a version 3.1.x for Eclipse 3.1, and don't want to version backwards.</WithStack>
    <WithOutStack>As new plug-ins APT plug-ins should be versionned 1.0.
Sorry, we've already released a version 3.1.x for Eclipse 3.1, and don't want to version backwards.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="129579" />
    <CreationDate amount="2006-02-27 09:58:00 -0500" />
    <DupId amount="121054" />
    <classification amount="WebTools" />
    <Product amount="WTP Java EE Tools" />
    <component amount="jst.j2ee" />
    <Version amount="1.0.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="major" />
    <Summery>[import/export] Importing EAR duplicates Web module</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="DUPLICATE" />
    <WithStack>This is probably related to the bug that's already open for importing EARs with modules that have the same name as the EAR. If a Web module has the same name as the EAR, the application.xml has a second copy of the web module after import, presumably because it did an add instead of modifying the existing web module's uri:

&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;application id="Application_ID" version="1.4" ...&gt;
	&lt;display-name&gt;PlantsByWebSphere&lt;/display-name&gt;
	&lt;module id="WebModule_1"&gt;
		&lt;web&gt;
			&lt;web-uri&gt;PlantsByWebSphere.war&lt;/web-uri&gt;
			&lt;context-root&gt;/PlantsByWebSphere&lt;/context-root&gt;
		&lt;/web&gt;
	&lt;/module&gt;
	&lt;module id="WebModule_1140662769410"&gt;
		&lt;web&gt;
			&lt;web-uri&gt;PlantsByWebSphere_WEB.war&lt;/web-uri&gt;
			&lt;context-root&gt;/PlantsByWebSphere&lt;/context-root&gt;
		&lt;/web&gt;
	&lt;/module&gt;
        ...
&lt;/application&gt;
There is no difference to the dupped defect....

*** This bug has been marked as a duplicate of 121054 ***
Closing.</WithStack>
    <WithOutStack>This is probably related to the bug that's already open for importing EARs with modules that have the same name as the EAR. If a Web module has the same name as the EAR, the application.xml has a second copy of the web module after import, presumably because it did an add instead of modifying the existing web module's uri:

&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;application id="Application_ID" version="1.4" ...&gt;
	&lt;display-name&gt;PlantsByWebSphere&lt;/display-name&gt;
	&lt;module id="WebModule_1"&gt;
		&lt;web&gt;
			&lt;web-uri&gt;PlantsByWebSphere.war&lt;/web-uri&gt;
			&lt;context-root&gt;/PlantsByWebSphere&lt;/context-root&gt;
		&lt;/web&gt;
	&lt;/module&gt;
	&lt;module id="WebModule_1140662769410"&gt;
		&lt;web&gt;
			&lt;web-uri&gt;PlantsByWebSphere_WEB.war&lt;/web-uri&gt;
			&lt;context-root&gt;/PlantsByWebSphere&lt;/context-root&gt;
		&lt;/web&gt;
	&lt;/module&gt;
        ...
&lt;/application&gt;
There is no difference to the dupped defect....

*** This bug has been marked as a duplicate of 121054 ***
Closing.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="129580" />
    <CreationDate amount="2006-02-27 10:16:00 -0500" />
    <DupId amount="" />
    <classification amount="BIRT" />
    <Product amount="BIRT" />
    <component amount="Report Designer" />
    <Version amount="2.0.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows All" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>HCG_BIDI: Undesirable order of BiDi chars in Edit Text Item dialog</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="6">
        <Lines>
          <Line>1. Create report</Line>
          <Line>2. Add text item from the palette</Line>
          <Line>3. Define it as HTML/Dynamic Text</Line>
          <Line>4. Add &lt;CODE&gt; section</Line>
          <Line>5. Type inside some logical expression using BiDi characters.</Line>
          <Line>if ABC != "OLLEH world" then ABC = "ELLOH"</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>This is BiDi specific defect. Capital characters refer to BiDi (Hebrew/Arabic) characters.

1. Create report
2. Add text item from the palette
3. Define it as HTML/Dynamic Text
4. Add &lt;CODE&gt; section 
5. Type inside some logical expression using BiDi characters.
         if ABC != "OLLEH world" then ABC = "ELLOH"

Actual result: if OLLEH" =! ABC world" then ELLOH" = ABC"

The order of characters is corrupted. The content of comment and variables names is mixed.
The same incorrect layout has the text (previously assigned to the text item) displayed in a tooltip when mouse is passed over the text item in the report in Layout view.
It is right, if you type this text in notepad or wordpad you will get exactly the same result.
If you want your bidi text to have custom reordering you need to use bidi control characters. If your editor is using StyledText you can use bidi segments, see BidiSegmentEvent.

  Notepad or Wordpad are not intended to creation of text having known syntax. That is why you can not expect from it to display them with the correct layout.
  You suggest that user uses bidi control characters ? User is not expected to be aware of limitations of the algorithm or architecture you are using. If standard Unicode BiDi algorithm is not smart ehough to correctly reorder text having internal complex syntax, it is in responsibility of the software to add those bidi control characters to make the layout consistent with user's expectations. 
  SO it is expected the the widget handling the editing of the code will handle all necessary adjustments automatically.
  
Need more time to research.  More likely, we will try to integrate the HTML/text editor from the WTP project so that we do not have duplicate effort in supporting BiDi. 
Add BidiSegmentListener to TextItemEditDialog, if the neutral char is part of language function words, the orginal order will be kept.
Fixed.
Does not work for me in RC4. Attached is a snapshot.
Created attachment 43460
Incorrect layout
Didn't consider the case of variable is Hebrew chars, refactor the bidi segments arithmetic.
Code have been committed into CVS.
 The defect is not resolved in RC4 as specified in the record. In general since the stable builds (e.g. RC3, RC4) are made available several weeks after the code fix is checked in, I would like to either have an exact name of daily build in which defect is resolved, or target date for avaialability of stable build including the fix.
  In any case, untill the build including the fix is not available, I don't think it makes sense to mark the defect as resolved, since there is no way to verify it.
We made some changes in today.
Be default, we make the bug as resolve after we check in the code. You can assume you can get the next sucessful daily build for verify. You need wait for tomorrow's build to verify this bug.

It's difficult to let developer to wati until the daily build. We don't know when the daily build is ready after code changes.


Works fine in build N20060607</WithStack>
    <WithOutStack>This is BiDi specific defect. Capital characters refer to BiDi (Hebrew/Arabic) characters.

1. Create report
2. Add text item from the palette
3. Define it as HTML/Dynamic Text
4. Add &lt;CODE&gt; section 
5. Type inside some logical expression using BiDi characters.
         if ABC != "OLLEH world" then ABC = "ELLOH"

Actual result: if OLLEH" =! ABC world" then ELLOH" = ABC"

The order of characters is corrupted. The content of comment and variables names is mixed.
The same incorrect layout has the text (previously assigned to the text item) displayed in a tooltip when mouse is passed over the text item in the report in Layout view.
It is right, if you type this text in notepad or wordpad you will get exactly the same result.
If you want your bidi text to have custom reordering you need to use bidi control characters. If your editor is using StyledText you can use bidi segments, see BidiSegmentEvent.

  Notepad or Wordpad are not intended to creation of text having known syntax. That is why you can not expect from it to display them with the correct layout.
  You suggest that user uses bidi control characters ? User is not expected to be aware of limitations of the algorithm or architecture you are using. If standard Unicode BiDi algorithm is not smart ehough to correctly reorder text having internal complex syntax, it is in responsibility of the software to add those bidi control characters to make the layout consistent with user's expectations. 
  SO it is expected the the widget handling the editing of the code will handle all necessary adjustments automatically.
  
Need more time to research.  More likely, we will try to integrate the HTML/text editor from the WTP project so that we do not have duplicate effort in supporting BiDi. 
Add BidiSegmentListener to TextItemEditDialog, if the neutral char is part of language function words, the orginal order will be kept.
Fixed.
Does not work for me in RC4. Attached is a snapshot.
Created attachment 43460
Incorrect layout
Didn't consider the case of variable is Hebrew chars, refactor the bidi segments arithmetic.
Code have been committed into CVS.
 The defect is not resolved in RC4 as specified in the record. In general since the stable builds (e.g. RC3, RC4) are made available several weeks after the code fix is checked in, I would like to either have an exact name of daily build in which defect is resolved, or target date for avaialability of stable build including the fix.
  In any case, untill the build including the fix is not available, I don't think it makes sense to mark the defect as resolved, since there is no way to verify it.
We made some changes in today.
Be default, we make the bug as resolve after we check in the code. You can assume you can get the next sucessful daily build for verify. You need wait for tomorrow's build to verify this bug.

It's difficult to let developer to wati until the daily build. We don't know when the daily build is ready after code changes.


Works fine in build N20060607</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="129581" />
    <CreationDate amount="2006-02-27 10:21:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="JDT" />
    <component amount="Core" />
    <Version amount="3.2" />
    <rep_platform amount="PC" />
    <op_sys amount="All" />
    <priority amount="P5" />
    <bug_severity amount="normal" />
    <Summery>[compiler][null][recode] redundant check involving double protection</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="3">
      <source_code type="class">
        <location start="153" end="326" />
        <code>public class X {
  void foo(Object o) {
    if (o != null) {
      if (o != null) {
        o.toString();
      }
      o.toString(); // should not complain here
    }
  }
}</code>
      </source_code>
      <source_code type="functiondef">
        <location start="1280" end="1434" />
        <code>&gt; void foo(Object o) {
&gt;   if (o != null) {
&gt;     if (o != null) {
&gt;       o.toString();
&gt;     }
&gt;     o.toString(); // should not complain here
&gt;   }
&gt; }</code>
      </source_code>
      <source_code type="functiondef">
        <location start="1536" end="1726" />
        <code>void foo2(Object o) {
    o = new Object();
    if (o != null) {
      if (o != null) {
        o.toString();
      }
      o.toString(); // should not and DOES NOT complain here
    }
  }</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="1">
      <Enumeration lines="3">
        <Lines>
          <Line>- we do not want to iterate more than once on any piece of code; the rationale for this is to get null analysis as a side effect of the standard analyseCode walk on the AST, at as low a cost as possible; this demands that nuances be found to characterize what can happen at a given variable, upstream, downstream, and 'updownstream' if you will when a piece of code gets analyze before code that precedes it in the file, or when loops strike;</Line>
          <Line>- we do limit the number of bits we use to code those nuances; this one is a bit arbitrary, but gets some legitimacy from the following truism: the less bits you need for each atom of information, the less total memory you'll consume; the number of bits we currently use is already not enough to cope with the situations reported as [recode] in Bugzilla; I won't change anything to them without the green light from Philippe...</Line>
          <Line>The combination of those two constraints leads us to fine-tune behaviors for the sake of performance and to the detriment of other desirable attributes, like consistency. In the present case, what we sacrifice is the consistency of sequel messages, which is acceptable to a certain extent IMHO.</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="VERIFIED" />
    <resolution amount="FIXED" />
    <WithStack>This is a fup of bug 128014. While the fix for 128014 is relatively easy, the following test case is not covered and would involve more radical changes:
public class X {
  void foo(Object o) {
    if (o != null) {
      if (o != null) {
        o.toString();
      }
      o.toString(); // should not complain here
    }
  }
}
Added NullReferenceTest test #335.
This one and and a few others suggest that conditions be applied a three way merge (upstream, whenTrue, whenFalse) instead of a two way merge (whenTrue, whenFalse), at least as far as null analysis is concerned.
In the considered case above, the protection of the first if should not be damaged by the (empty) else of the second if. Yet there is no way to carry that information with the flowInfo, because the former is recursive while the latter is flat (no stack).
Moreover, when coming out of the second if, we must make a difference between tainted null (the variable has been tested against null, hence there are doubts about its null status) and potential null (at least one possible path assigns null to it). This is needed because the former would not clear the outmost protection, while the latter would. This would in turn call for an encoding change.
Post 3.2.
See also bug 190623.
(In reply to comment #0)
&gt; void foo(Object o) {
&gt;   if (o != null) {
&gt;     if (o != null) {
&gt;       o.toString();
&gt;     }
&gt;     o.toString(); // should not complain here
&gt;   }
&gt; }

Consider foo2() which is like foo() except that the first statement assigns a non-null value to o.

  void foo2(Object o) {
    o = new Object();
    if (o != null) {
      if (o != null) {
        o.toString();
      }
      o.toString(); // should not and DOES NOT complain here
    }
  }

As a result, the complain goes away.

This difference in behavior is a result of the distinction being made in the JDT between variables being non-null (or null) because of an assignment vs. being non-null (or null) following a comparison.

Don't we want the compiler to complain about the second dereference in foo() if and only if it complains about it in foo2()? I.e. don't we want the behavior to be the same regardless of the manner in which we determine that o is non-null (or null)? If not, why would we want it to be different?
The truth is: we don't want, we happen to.

The design of null references analysis in JDT is constrained by (at least) the two following items:
- we do not want to iterate more than once on any piece of code; the rationale for this is to get null analysis as a side effect of the standard analyseCode walk on the AST, at as low a cost as possible; this demands that nuances be found to characterize what can happen at a given variable, upstream, downstream, and 'updownstream' if you will when a piece of code gets analyze before code that precedes it in the file, or when loops strike;
- we do limit the number of bits we use to code those nuances; this one is a bit arbitrary, but gets some legitimacy from the following truism: the less bits you need for each atom of information, the less total memory you'll consume; the number of bits we currently use is already not enough to cope with the situations reported as [recode] in Bugzilla; I won't change anything to them without the green light from Philippe...
The combination of those two constraints leads us to fine-tune behaviors for the sake of performance and to the detriment of other desirable attributes, like consistency. In the present case, what we sacrifice is the consistency of sequel messages, which is acceptable to a certain extent IMHO.

Having said that, assignment is stronger than protection in the current state of our implementation. I could not tell you which from memory, but a few test cases about first level errors (as opposed to sequel errors) would break if we did otherwise (that's what motivated the introduction of the protection scenario in the first place). This is in part due to the fact that, whereas protection tells something certain to its enclosed scope, it is also our mechanism to tell the outside about the variable being tainted. As opposed to it, assignment stands valid for its scope (more to say when the source of the assignment has an unknown null status).

Last but not least, thanks for your comments. Since consistency must always be considered as a high priority goal, I'll watch it if/when we rework this item, including for sequel errors.
Reopening as P5 (since RESOLVED LATER is deprecated).
Patch provided in bug 293917.
Activated regression test NullReferenceTest#test0335_if_else().
Verified for 3.6M5 using I20100125-0800</WithStack>
    <WithOutStack>This is a fup of bug 128014. While the fix for 128014 is relatively easy, the following test case is not covered and would involve more radical changes:
public class X {
  void foo(Object o) {
    if (o != null) {
      if (o != null) {
        o.toString();
      }
      o.toString(); // should not complain here
    }
  }
}
Added NullReferenceTest test #335.
This one and and a few others suggest that conditions be applied a three way merge (upstream, whenTrue, whenFalse) instead of a two way merge (whenTrue, whenFalse), at least as far as null analysis is concerned.
In the considered case above, the protection of the first if should not be damaged by the (empty) else of the second if. Yet there is no way to carry that information with the flowInfo, because the former is recursive while the latter is flat (no stack).
Moreover, when coming out of the second if, we must make a difference between tainted null (the variable has been tested against null, hence there are doubts about its null status) and potential null (at least one possible path assigns null to it). This is needed because the former would not clear the outmost protection, while the latter would. This would in turn call for an encoding change.
Post 3.2.
See also bug 190623.
(In reply to comment #0)
&gt; void foo(Object o) {
&gt;   if (o != null) {
&gt;     if (o != null) {
&gt;       o.toString();
&gt;     }
&gt;     o.toString(); // should not complain here
&gt;   }
&gt; }

Consider foo2() which is like foo() except that the first statement assigns a non-null value to o.

  void foo2(Object o) {
    o = new Object();
    if (o != null) {
      if (o != null) {
        o.toString();
      }
      o.toString(); // should not and DOES NOT complain here
    }
  }

As a result, the complain goes away.

This difference in behavior is a result of the distinction being made in the JDT between variables being non-null (or null) because of an assignment vs. being non-null (or null) following a comparison.

Don't we want the compiler to complain about the second dereference in foo() if and only if it complains about it in foo2()? I.e. don't we want the behavior to be the same regardless of the manner in which we determine that o is non-null (or null)? If not, why would we want it to be different?
The truth is: we don't want, we happen to.

The design of null references analysis in JDT is constrained by (at least) the two following items:
- we do not want to iterate more than once on any piece of code; the rationale for this is to get null analysis as a side effect of the standard analyseCode walk on the AST, at as low a cost as possible; this demands that nuances be found to characterize what can happen at a given variable, upstream, downstream, and 'updownstream' if you will when a piece of code gets analyze before code that precedes it in the file, or when loops strike;
- we do limit the number of bits we use to code those nuances; this one is a bit arbitrary, but gets some legitimacy from the following truism: the less bits you need for each atom of information, the less total memory you'll consume; the number of bits we currently use is already not enough to cope with the situations reported as [recode] in Bugzilla; I won't change anything to them without the green light from Philippe...
The combination of those two constraints leads us to fine-tune behaviors for the sake of performance and to the detriment of other desirable attributes, like consistency. In the present case, what we sacrifice is the consistency of sequel messages, which is acceptable to a certain extent IMHO.

Having said that, assignment is stronger than protection in the current state of our implementation. I could not tell you which from memory, but a few test cases about first level errors (as opposed to sequel errors) would break if we did otherwise (that's what motivated the introduction of the protection scenario in the first place). This is in part due to the fact that, whereas protection tells something certain to its enclosed scope, it is also our mechanism to tell the outside about the variable being tainted. As opposed to it, assignment stands valid for its scope (more to say when the source of the assignment has an unknown null status).

Last but not least, thanks for your comments. Since consistency must always be considered as a high priority goal, I'll watch it if/when we rework this item, including for sequel errors.
Reopening as P5 (since RESOLVED LATER is deprecated).
Patch provided in bug 293917.
Activated regression test NullReferenceTest#test0335_if_else().
Verified for 3.6M5 using I20100125-0800</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="129582" />
    <CreationDate amount="2006-02-27 10:21:00 -0500" />
    <DupId amount="" />
    <classification amount="Modeling" />
    <Product amount="GMF-Runtime" />
    <component amount="General" />
    <Version amount="unspecified" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows 2000" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Edit helpers  second pass over getCreationEditContext() causes errors</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>The first pass is done to create a command, the second to test it for executability. The problem is that edit hepler caches some values (such as contanment feature) during the first pass and the second time this method returns a different value because of that. There is no need to do a second pass since the creation context element (the owner) has alrady being calculated during the first pass, and of cause it is costly. The problems manifest themselves in those cases when the context element is not an owner of the new element, but just a refencer. In those case the feature passed down to the edit helper is null. In the second pass however it is no longer. The second pass should not be done through this method.
Fixed.  Setting the container or containment feature of a CreateElementRequest during the request to obtain the edit helper context for the creation no longer causes the edit context request and command to be invalidated. This was causing the same request to be made several times, unnecessarily.

New unit test in org.eclipse.gmf.tests.runtime.emf.type.core to test this scenario.
[target cleanup] 1.0 M6 was the original target milestone for this bug
[GMF Restructure] Bug 319140 : product GMF and component
Runtime Common was the original product and component for this bug</WithStack>
    <WithOutStack>The first pass is done to create a command, the second to test it for executability. The problem is that edit hepler caches some values (such as contanment feature) during the first pass and the second time this method returns a different value because of that. There is no need to do a second pass since the creation context element (the owner) has alrady being calculated during the first pass, and of cause it is costly. The problems manifest themselves in those cases when the context element is not an owner of the new element, but just a refencer. In those case the feature passed down to the edit helper is null. In the second pass however it is no longer. The second pass should not be done through this method.
Fixed.  Setting the container or containment feature of a CreateElementRequest during the request to obtain the edit helper context for the creation no longer causes the edit context request and command to be invalidated. This was causing the same request to be made several times, unnecessarily.

New unit test in org.eclipse.gmf.tests.runtime.emf.type.core to test this scenario.
[target cleanup] 1.0 M6 was the original target milestone for this bug
[GMF Restructure] Bug 319140 : product GMF and component
Runtime Common was the original product and component for this bug</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="129583" />
    <CreationDate amount="2006-02-27 10:21:00 -0500" />
    <DupId amount="" />
    <classification amount="Modeling" />
    <Product amount="EMFT" />
    <component amount="Website" />
    <Version amount="1.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Linux" />
    <priority amount="P3" />
    <bug_severity amount="major" />
    <Summery>1.0.0M5 SDK Features Not Installable via Update Manager</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="VERIFIED" />
    <resolution amount="FIXED" />
    <WithStack>The 1.0.0M5 versions of the EMFT SDK features are not installable via update manager.  All other features (those that are grouped together by the SDK) are.

The problem is not that the .qualifier component was not replaced in the JAR names (though it should be), but that the version number replacements in the feature manifests did.  Instead of:

  - 0.0.0.qualifier

the SDK features have:

  - 0.0.0.S200602241417

So, the UM client is trying to find the S-string instead of 'qualifier'.

At least, given my limited understanding of UM, I think this is what's happening.
Still unsure why some features after being built contain .qualifer instead of the actual build timestamp, but I've managed a hack to prevent it from happening in the UM jars, even if they persist (for now) in the zips. 

I'll re-upload the 5 EMFT M5 projects again shortly and post here when it's done.
In related news... bug 129868.
This has been fixed for 1.0.0M5a.
Move to verified as per bug 206558.</WithStack>
    <WithOutStack>The 1.0.0M5 versions of the EMFT SDK features are not installable via update manager.  All other features (those that are grouped together by the SDK) are.

The problem is not that the .qualifier component was not replaced in the JAR names (though it should be), but that the version number replacements in the feature manifests did.  Instead of:

  - 0.0.0.qualifier

the SDK features have:

  - 0.0.0.S200602241417

So, the UM client is trying to find the S-string instead of 'qualifier'.

At least, given my limited understanding of UM, I think this is what's happening.
Still unsure why some features after being built contain .qualifer instead of the actual build timestamp, but I've managed a hack to prevent it from happening in the UM jars, even if they persist (for now) in the zips. 

I'll re-upload the 5 EMFT M5 projects again shortly and post here when it's done.
In related news... bug 129868.
This has been fixed for 1.0.0M5a.
Move to verified as per bug 206558.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="129584" />
    <CreationDate amount="2006-02-27 10:23:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="JDT" />
    <component amount="Core" />
    <Version amount="3.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Java model gives different results</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="2">
      <source_code type="package">
        <location start="73" end="86" />
        <code>package test;</code>
      </source_code>
      <source_code type="class">
        <location start="88" end="211" />
        <code>public class Test {
    public void testMethod() {
        class NamedInnerClass {
        }
        NamedInnerClas
    }
}</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="1">
      <Enumeration lines="14">
        <Lines>
          <Line>1. add the following source (which has a compile error):</Line>
          <Line />
          <Line />
          <Line />
          <Line />
          <Line>2. close the editor</Line>
          <Line>==&gt; inner class is not shown in testMethod() in Package Explorer</Line>
          <Line>3. open the editor</Line>
          <Line>==&gt; inner class is not shown in testMethod() in Package Explorer and Outline</Line>
          <Line>view</Line>
          <Line>4. type into the editor</Line>
          <Line>==&gt; inner class appears in Package Explorer and Outline view</Line>
          <Line>5. close editor</Line>
          <Line>==&gt; class again gone</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="VERIFIED" />
    <resolution amount="FIXED" />
    <WithStack>I20060221-0800

1. add the following source (which has a compile error):
package test;

public class Test {
    public void testMethod() {
        class NamedInnerClass {
        }
        NamedInnerClas
    }
}

2. close the editor
   ==&gt; inner class is not shown in testMethod() in Package Explorer 
3. open the editor
   ==&gt; inner class is not shown in testMethod() in Package Explorer and Outline 
       view
4. type into the editor
   ==&gt; inner class appears in Package Explorer and Outline view
5. close editor
   ==&gt; class again gone

I assume the reason for this is that on the first reconcile the model thinks it is consistent and hence only reports the problems since force problem detection is true. Once the cu is changed the inner class is reported. In the end the difference is probably caused because statements recovery is enabled on reconcile.
That's correct, the statement recovery is enabled in the reconciler thread (see JavaReconcilingStategy#reconcile(...)) and it is not when opening a regular ICompilationUnit (through either openWhenClosed(...) or becomeWorkingCopy(...)).

David any idea why statement recovery is not enabled in the latter case ?
Or should we not report local elements during reconcile during recovery ?
Talking with David, it appears that even with statement recovery off, it is possible to add an internal option to the SourceElementParser that will recover headers.

Reassigning to David to make the change.
Created attachment 46369
Proposed fix

Add an internal option to the parser to enable the recovery of all headers in methods body.
Released for 3.3M1

Test added
  LocalElementTests#testLocalType5()
*** Bug 149853 has been marked as a duplicate of this bug. ***
Verified for 3.3 M1 using build I20060804-0010.
*** Bug 208013 has been marked as a duplicate of this bug. ***</WithStack>
    <WithOutStack>I20060221-0800

1. add the following source (which has a compile error):
package test;

public class Test {
    public void testMethod() {
        class NamedInnerClass {
        }
        NamedInnerClas
    }
}

2. close the editor
   ==&gt; inner class is not shown in testMethod() in Package Explorer 
3. open the editor
   ==&gt; inner class is not shown in testMethod() in Package Explorer and Outline 
       view
4. type into the editor
   ==&gt; inner class appears in Package Explorer and Outline view
5. close editor
   ==&gt; class again gone

I assume the reason for this is that on the first reconcile the model thinks it is consistent and hence only reports the problems since force problem detection is true. Once the cu is changed the inner class is reported. In the end the difference is probably caused because statements recovery is enabled on reconcile.
That's correct, the statement recovery is enabled in the reconciler thread (see JavaReconcilingStategy#reconcile(...)) and it is not when opening a regular ICompilationUnit (through either openWhenClosed(...) or becomeWorkingCopy(...)).

David any idea why statement recovery is not enabled in the latter case ?
Or should we not report local elements during reconcile during recovery ?
Talking with David, it appears that even with statement recovery off, it is possible to add an internal option to the SourceElementParser that will recover headers.

Reassigning to David to make the change.
Created attachment 46369
Proposed fix

Add an internal option to the parser to enable the recovery of all headers in methods body.
Released for 3.3M1

Test added
  LocalElementTests#testLocalType5()
*** Bug 149853 has been marked as a duplicate of this bug. ***
Verified for 3.3 M1 using build I20060804-0010.
*** Bug 208013 has been marked as a duplicate of this bug. ***</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="129585" />
    <CreationDate amount="2006-02-27 10:40:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse Foundation" />
    <Product amount="z_Archived" />
    <component amount="TPTP.monitoring" />
    <Version amount="unspecified" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="blocker" />
    <Summery>Abnormal context menu of log files</Summery>
    <Patches amount="0" />
    <Stacktraces amount="2">
      <Stacktrace timestamp="1437330672153">
        <Exception>java.lang.NullPointerException</Exception>
        <Reason />
        <Frames>
          <Frame depth="0">org.eclipse.team.internal.ui.actions.TeamAction.getSelectedProjects(TeamAction.java:128)</Frame>
          <Frame depth="1">org.eclipse.team.internal.ui.actions.ConfigureProjectAction.isEnabled(ConfigureProjectAction.java:66)</Frame>
          <Frame depth="2">org.eclipse.team.internal.ui.actions.TeamAction.setActionEnablement(TeamAction.java:285)</Frame>
          <Frame depth="3">org.eclipse.team.internal.ui.actions.TeamAction.selectionChanged(TeamAction.java:269)</Frame>
          <Frame depth="4">org.eclipse.ui.internal.PluginAction.refreshEnablement(PluginAction.java:205)</Frame>
          <Frame depth="5">org.eclipse.ui.internal.PluginAction.selectionChanged(PluginAction.java:276)</Frame>
          <Frame depth="6">org.eclipse.ui.internal.ObjectActionContributor.contributeObjectActions(ObjectActionContributor.java:138)</Frame>
          <Frame depth="7">org.eclipse.ui.internal.ObjectActionContributorManager.contributeObjectActions(ObjectActionContributorManager.java:89)</Frame>
          <Frame depth="8">org.eclipse.ui.internal.PopupMenuExtender.addObjectActions(PopupMenuExtender.java:253)</Frame>
          <Frame depth="9">org.eclipse.ui.internal.PopupMenuExtender.menuAboutToShow(PopupMenuExtender.java:315)</Frame>
          <Frame depth="10">org.eclipse.jface.action.MenuManager.fireAboutToShow(MenuManager.java:285)</Frame>
          <Frame depth="11">org.eclipse.jface.action.MenuManager.handleAboutToShow(MenuManager.java:390)</Frame>
          <Frame depth="12">org.eclipse.jface.action.MenuManager.access$1(MenuManager.java:387)</Frame>
          <Frame depth="13">org.eclipse.jface.action.MenuManager$2.menuShown(MenuManager.java:412)</Frame>
          <Frame depth="14">org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:117)</Frame>
          <Frame depth="15">org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)</Frame>
          <Frame depth="16">org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:925)</Frame>
          <Frame depth="17">org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:949)</Frame>
          <Frame depth="18">org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:930)</Frame>
          <Frame depth="19">org.eclipse.swt.widgets.Control.WM_INITMENUPOPUP(Control.java:3546)</Frame>
          <Frame depth="20">org.eclipse.swt.widgets.Control.windowProc(Control.java:3262)</Frame>
          <Frame depth="21">org.eclipse.swt.widgets.Decorations.windowProc(Decorations.java:1538)</Frame>
          <Frame depth="22">org.eclipse.swt.widgets.Display.windowProc(Display.java:3965)</Frame>
          <Frame depth="23">org.eclipse.swt.internal.win32.OS.TrackPopupMenu(Native Method)</Frame>
          <Frame depth="24">org.eclipse.swt.widgets.Menu._setVisible(Menu.java:225)</Frame>
          <Frame depth="25">org.eclipse.swt.widgets.Display.runPopups(Display.java:3313)</Frame>
          <Frame depth="26">org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2901)</Frame>
          <Frame depth="27">org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1899)</Frame>
          <Frame depth="28">org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1863)</Frame>
          <Frame depth="29">org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:417)</Frame>
          <Frame depth="30">org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:143)</Frame>
          <Frame depth="31">org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:106)</Frame>
          <Frame depth="32">org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:99)</Frame>
          <Frame depth="33">org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:92)</Frame>
          <Frame depth="34">org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:68)</Frame>
          <Frame depth="35">org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:374)</Frame>
          <Frame depth="36">org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:169)</Frame>
          <Frame depth="37">sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)</Frame>
          <Frame depth="38">sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)</Frame>
          <Frame depth="39">sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)</Frame>
          <Frame depth="40">java.lang.reflect.Method.invoke(Unknown Source)</Frame>
          <Frame depth="41">org.eclipse.core.launcher.Main.invokeFramework(Main.java:338)</Frame>
          <Frame depth="42">org.eclipse.core.launcher.Main.basicRun(Main.java:282)</Frame>
          <Frame depth="43">org.eclipse.core.launcher.Main.run(Main.java:977)</Frame>
          <Frame depth="44">org.eclipse.core.launcher.Main.main(Main.java:952)</Frame>
        </Frames>
      </Stacktrace>
      <Stacktrace timestamp="1437330672153">
        <Exception>java.lang.ArrayIndexOutOfBoundsException</Exception>
        <Reason>1</Reason>
        <Frames>
          <Frame depth="0">org.eclipse.emf.common.util.URI.segment(URI.java:1593)</Frame>
          <Frame depth="1">org.eclipse.hyades.models.hierarchy.util.HierarchyAdaptersFactory$HierarchyResourceMapping.getProject(HierarchyAdaptersFactory.java:50)</Frame>
          <Frame depth="2">org.eclipse.hyades.models.hierarchy.util.HierarchyAdaptersFactory$HierarchyResourceMapping.getProjects(HierarchyAdaptersFactory.java:45)</Frame>
          <Frame depth="3">org.eclipse.ui.internal.ide.actions.BuildUtilities.extractProjects(BuildUtilities.java:57)</Frame>
          <Frame depth="4">org.eclipse.ui.internal.ide.actions.BuildUtilities.findSelectedProjects(BuildUtilities.java:79)</Frame>
          <Frame depth="5">org.eclipse.ui.actions.BuildAction.isEnabled(BuildAction.java:200)</Frame>
          <Frame depth="6">org.eclipse.ui.actions.RetargetAction.setActionHandler(RetargetAction.java:263)</Frame>
          <Frame depth="7">org.eclipse.ui.internal.ide.actions.RetargetActionWithDefault.setActionHandler(RetargetActionWithDefault.java:47)</Frame>
          <Frame depth="8">org.eclipse.ui.actions.RetargetAction.partActivated(RetargetAction.java:151)</Frame>
          <Frame depth="9">org.eclipse.ui.internal.PartListenerList$1.run(PartListenerList.java:71)</Frame>
          <Frame depth="10">org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java(Inlined Compiled Code))</Frame>
          <Frame depth="11">org.eclipse.core.runtime.Platform.run(Platform.java(Compiled Code))</Frame>
          <Frame depth="12">org.eclipse.ui.internal.PartListenerList.fireEvent(PartListenerList.java:57)</Frame>
          <Frame depth="13">org.eclipse.ui.internal.PartListenerList.firePartActivated(PartListenerList.java:69)</Frame>
          <Frame depth="14">org.eclipse.ui.internal.PartService.firePartActivated(PartService.java:73)</Frame>
          <Frame depth="15">org.eclipse.ui.internal.PartService.setActivePart(PartService.java:171)</Frame>
          <Frame depth="16">org.eclipse.ui.internal.WWinPartService.updateActivePart(WWinPartService.java:124)</Frame>
          <Frame depth="17">org.eclipse.ui.internal.WWinPartService.access$0(WWinPartService.java:115)</Frame>
          <Frame depth="18">org.eclipse.ui.internal.WWinPartService$1.partDeactivated(WWinPartService.java:48)</Frame>
          <Frame depth="19">org.eclipse.ui.internal.PartListenerList2$4.run(PartListenerList2.java:112)</Frame>
          <Frame depth="20">org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java(Inlined Compiled Code))</Frame>
          <Frame depth="21">org.eclipse.core.runtime.Platform.run(Platform.java(Compiled Code))</Frame>
          <Frame depth="22">org.eclipse.ui.internal.PartListenerList2.fireEvent(PartListenerList2.java:53)</Frame>
          <Frame depth="23">org.eclipse.ui.internal.PartListenerList2.firePartDeactivated(PartListenerList2.java:110)</Frame>
          <Frame depth="24">org.eclipse.ui.internal.PartService.firePartDeactivated(PartService.java:116)</Frame>
          <Frame depth="25">org.eclipse.ui.internal.PartService.setActivePart(PartService.java:165)</Frame>
          <Frame depth="26">org.eclipse.ui.internal.WorkbenchPagePartList.fireActivePartChanged(WorkbenchPagePartList.java:56)</Frame>
          <Frame depth="27">org.eclipse.ui.internal.PartList.setActivePart(PartList.java:117)</Frame>
          <Frame depth="28">org.eclipse.ui.internal.WorkbenchPage.setActivePart(WorkbenchPage.java:2975)</Frame>
          <Frame depth="29">org.eclipse.ui.internal.WorkbenchPage.requestActivation(WorkbenchPage.java:2543)</Frame>
          <Frame depth="30">org.eclipse.ui.internal.PartPane.requestActivation(PartPane.java:251)</Frame>
          <Frame depth="31">org.eclipse.ui.internal.PartPane.handleEvent(PartPane.java:216)</Frame>
          <Frame depth="32">org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java(Compiled Code))</Frame>
          <Frame depth="33">org.eclipse.swt.widgets.Widget.sendEvent(Widget.java(Inlined Compiled Code))</Frame>
          <Frame depth="34">org.eclipse.swt.widgets.Widget.sendEvent(Widget.java(Compiled Code))</Frame>
          <Frame depth="35">org.eclipse.swt.widgets.Widget.sendEvent(Widget.java(Compiled Code))</Frame>
          <Frame depth="36">org.eclipse.swt.widgets.Shell.setActiveControl(Shell.java:1049)</Frame>
          <Frame depth="37">org.eclipse.swt.widgets.Shell.WM_MOUSEACTIVATE(Shell.java:1686)</Frame>
          <Frame depth="38">org.eclipse.swt.widgets.Control.windowProc(Control.java(Compiled Code))</Frame>
          <Frame depth="39">org.eclipse.swt.widgets.Decorations.windowProc(Decorations.java(Compiled Code))</Frame>
          <Frame depth="40">org.eclipse.swt.widgets.Display.windowProc(Display.java(Compiled Code))</Frame>
          <Frame depth="41">org.eclipse.swt.internal.win32.OS.DefWindowProcW(Native Method)</Frame>
          <Frame depth="42">org.eclipse.swt.internal.win32.OS.DefWindowProc(OS.java(Inlined Compiled Code))</Frame>
          <Frame depth="43">org.eclipse.swt.widgets.Scrollable.callWindowProc(Scrollable.java(Compiled Code))</Frame>
          <Frame depth="44">org.eclipse.swt.widgets.Control.windowProc(Control.java(Compiled Code))</Frame>
          <Frame depth="45">org.eclipse.swt.widgets.Display.windowProc(Display.java(Compiled Code))</Frame>
          <Frame depth="46">org.eclipse.swt.internal.win32.OS.DefWindowProcW(Native Method)</Frame>
          <Frame depth="47">org.eclipse.swt.internal.win32.OS.DefWindowProc(OS.java(Inlined Compiled Code))</Frame>
          <Frame depth="48">org.eclipse.swt.widgets.Scrollable.callWindowProc(Scrollable.java(Compiled Code))</Frame>
          <Frame depth="49">org.eclipse.swt.widgets.Control.windowProc(Control.java(Compiled Code))</Frame>
          <Frame depth="50">org.eclipse.swt.widgets.Display.windowProc(Display.java(Compiled Code))</Frame>
          <Frame depth="51">org.eclipse.swt.internal.win32.OS.DefWindowProcW(Native Method)</Frame>
          <Frame depth="52">org.eclipse.swt.internal.win32.OS.DefWindowProc(OS.java(Inlined Compiled Code))</Frame>
          <Frame depth="53">org.eclipse.swt.widgets.Scrollable.callWindowProc(Scrollable.java(Compiled Code))</Frame>
          <Frame depth="54">org.eclipse.swt.widgets.Control.windowProc(Control.java(Compiled Code))</Frame>
          <Frame depth="55">org.eclipse.swt.widgets.Display.windowProc(Display.java(Compiled Code))</Frame>
          <Frame depth="56">org.eclipse.swt.internal.win32.OS.DefWindowProcW(Native Method)</Frame>
          <Frame depth="57">org.eclipse.swt.internal.win32.OS.DefWindowProc(OS.java(Inlined Compiled Code))</Frame>
          <Frame depth="58">org.eclipse.swt.widgets.Scrollable.callWindowProc(Scrollable.java(Compiled Code))</Frame>
          <Frame depth="59">org.eclipse.swt.widgets.Control.windowProc(Control.java(Compiled Code))</Frame>
          <Frame depth="60">org.eclipse.swt.widgets.Display.windowProc(Display.java(Compiled Code))</Frame>
          <Frame depth="61">org.eclipse.swt.internal.win32.OS.DefWindowProcW(Native Method)</Frame>
          <Frame depth="62">org.eclipse.swt.internal.win32.OS.DefWindowProc(OS.java(Inlined Compiled Code))</Frame>
          <Frame depth="63">org.eclipse.swt.widgets.Scrollable.callWindowProc(Scrollable.java(Compiled Code))</Frame>
          <Frame depth="64">org.eclipse.swt.widgets.Control.windowProc(Control.java(Compiled Code))</Frame>
          <Frame depth="65">org.eclipse.swt.widgets.Display.windowProc(Display.java(Compiled Code))</Frame>
          <Frame depth="66">org.eclipse.swt.internal.win32.OS.DefWindowProcW(Native Method)</Frame>
          <Frame depth="67">org.eclipse.swt.internal.win32.OS.DefWindowProc(OS.java(Inlined Compiled Code))</Frame>
          <Frame depth="68">org.eclipse.swt.widgets.Scrollable.callWindowProc(Scrollable.java(Compiled Code))</Frame>
          <Frame depth="69">org.eclipse.swt.widgets.Control.windowProc(Control.java(Compiled Code))</Frame>
          <Frame depth="70">org.eclipse.swt.widgets.Display.windowProc(Display.java(Compiled Code))</Frame>
          <Frame depth="71">org.eclipse.swt.internal.win32.OS.DefWindowProcW(Native Method)</Frame>
          <Frame depth="72">org.eclipse.swt.internal.win32.OS.DefWindowProc(OS.java(Inlined Compiled Code))</Frame>
          <Frame depth="73">org.eclipse.swt.widgets.Scrollable.callWindowProc(Scrollable.java(Compiled Code))</Frame>
          <Frame depth="74">org.eclipse.swt.widgets.Control.windowProc(Control.java(Compiled Code))</Frame>
          <Frame depth="75">org.eclipse.swt.widgets.Display.windowProc(Display.java(Compiled Code))</Frame>
          <Frame depth="76">org.eclipse.swt.internal.win32.OS.DefWindowProcW(Native Method)</Frame>
          <Frame depth="77">org.eclipse.swt.internal.win32.OS.DefWindowProc(OS.java(Inlined Compiled Code))</Frame>
          <Frame depth="78">org.eclipse.swt.widgets.Scrollable.callWindowProc(Scrollable.java(Compiled Code))</Frame>
          <Frame depth="79">org.eclipse.swt.widgets.Control.windowProc(Control.java(Compiled Code))</Frame>
          <Frame depth="80">org.eclipse.swt.widgets.Display.windowProc(Display.java(Compiled Code))</Frame>
          <Frame depth="81">org.eclipse.swt.internal.win32.OS.DefWindowProcW(Native Method)</Frame>
          <Frame depth="82">org.eclipse.swt.internal.win32.OS.DefWindowProc(OS.java(Inlined Compiled Code))</Frame>
          <Frame depth="83">org.eclipse.swt.widgets.Scrollable.callWindowProc(Scrollable.java(Compiled Code))</Frame>
          <Frame depth="84">org.eclipse.swt.widgets.Control.windowProc(Control.java(Compiled Code))</Frame>
          <Frame depth="85">org.eclipse.swt.widgets.Display.windowProc(Display.java(Compiled Code))</Frame>
          <Frame depth="86">org.eclipse.swt.internal.win32.OS.DefWindowProcW(Native Method)</Frame>
          <Frame depth="87">org.eclipse.swt.internal.win32.OS.DefWindowProc(OS.java(Inlined Compiled Code))</Frame>
          <Frame depth="88">org.eclipse.swt.widgets.Scrollable.callWindowProc(Scrollable.java(Compiled Code))</Frame>
          <Frame depth="89">org.eclipse.swt.widgets.Control.windowProc(Control.java(Compiled Code))</Frame>
          <Frame depth="90">org.eclipse.swt.widgets.Display.windowProc(Display.java(Compiled Code))</Frame>
          <Frame depth="91">org.eclipse.swt.internal.win32.OS.DefWindowProcW(Native Method)</Frame>
          <Frame depth="92">org.eclipse.swt.internal.win32.OS.DefWindowProc(OS.java(Inlined Compiled Code))</Frame>
          <Frame depth="93">org.eclipse.swt.widgets.Scrollable.callWindowProc(Scrollable.java(Compiled Code))</Frame>
          <Frame depth="94">org.eclipse.swt.widgets.Control.windowProc(Control.java(Compiled Code))</Frame>
          <Frame depth="95">org.eclipse.swt.widgets.Display.windowProc(Display.java(Compiled Code))</Frame>
          <Frame depth="96">org.eclipse.swt.internal.win32.OS.PeekMessageW(Native Method)</Frame>
          <Frame depth="97">org.eclipse.swt.internal.win32.OS.PeekMessage(OS.java(Inlined Compiled Code))</Frame>
          <Frame depth="98">org.eclipse.swt.widgets.Display.readAndDispatch(Display.java(Compiled Code))</Frame>
          <Frame depth="99">org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java(Compiled Code))</Frame>
          <Frame depth="100">org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1863)</Frame>
          <Frame depth="101">org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:417)</Frame>
          <Frame depth="102">org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:143)</Frame>
          <Frame depth="103">org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:106)</Frame>
          <Frame depth="104">org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:99)</Frame>
          <Frame depth="105">org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:92)</Frame>
          <Frame depth="106">org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:68)</Frame>
          <Frame depth="107">org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:374)</Frame>
          <Frame depth="108">org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:169)</Frame>
          <Frame depth="109">sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)</Frame>
          <Frame depth="110">sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:85)</Frame>
          <Frame depth="111">sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:58)</Frame>
          <Frame depth="112">sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:60)</Frame>
          <Frame depth="113">java.lang.reflect.Method.invoke(Method.java:391)</Frame>
          <Frame depth="114">org.eclipse.core.launcher.Main.invokeFramework(Main.java:338)</Frame>
          <Frame depth="115">org.eclipse.core.launcher.Main.basicRun(Main.java:282)</Frame>
          <Frame depth="116">org.eclipse.core.launcher.Main.run(Main.java:977)</Frame>
          <Frame depth="117">org.eclipse.core.launcher.Main.main(Main.java:952)</Frame>
        </Frames>
      </Stacktrace>
    </Stacktraces>
    <SourceCodeRegions amount="2">
      <source_code type="functiondef">
        <location start="2141" end="2493" />
        <code>public IResource[] getNonoverlappingSelectedResources() {
        IResource[] resources = (IResource[])get(NONOVERLAPPING_SELECTED_RESOURCES);
        if (resources == null) {
            resources = getNonOverlapping(getAllSelectedResources());
            put (NONOVERLAPPING_SELECTED_RESOURCES, resources);
        }
        return resources;
    }</code>
      </source_code>
      <source_code type="assignment">
        <location start="2503" end="2580" />
        <code>IResource[] resources = (IResource[])get(NONOVERLAPPING_SELECTED_RESOURCES);</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="2">
      <Enumeration lines="8">
        <Lines>
          <Line>1. launch with a clean workspace</Line>
          <Line>2. switch to cvs repository exploring perspective</Line>
          <Line>3. new &gt; repository location...</Line>
          <Line>4. setup a repository of TPTP cvs</Line>
          <Line>5. check out test-result/monitoring/org.eclipse.tptp.monitoring.tests</Line>
          <Line>6. switch to profiling and logging perspective</Line>
          <Line>7. import...&gt;log file</Line>
          <Line>8. as soon as log agent is created in log navigator view, select the logging agent, right click and try open pop up menu.</Line>
        </Lines>
      </Enumeration>
      <Enumeration lines="4">
        <Lines>
          <Line>- Switch to the profiling and logging perspective and activate the log navigator view</Line>
          <Line>- Import an Apache access and error log file</Line>
          <Line>- *Ensure* that the log files are selected.</Line>
          <Line>- Right click the log files</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>Build: TPTP-4.2.0-200602262249

- Switch to the profiling and logging perspective and activate the log navigator view
- Import an Apache access and error log file
- *Ensure* that the log files are selected.
- Right click the log files 

Sometimes the context menu doesn't show up.  Other times, if I right click the second time, I get a context menu without any icons (see attachment)
Created attachment 35409
context menu of log files
Marking this as major because the context menu has missing options such as "delete".
Here's the stack trace I get every other time that I right click the log files:

!ENTRY org.eclipse.ui 4 0 2006-02-27 10:36:44.343
!MESSAGE java.lang.NullPointerException
!STACK 0
java.lang.NullPointerException
	at org.eclipse.team.internal.ui.actions.TeamAction.getSelectedProjects(TeamAction.java:128)
	at org.eclipse.team.internal.ui.actions.ConfigureProjectAction.isEnabled(ConfigureProjectAction.java:66)
	at org.eclipse.team.internal.ui.actions.TeamAction.setActionEnablement(TeamAction.java:285)
	at org.eclipse.team.internal.ui.actions.TeamAction.selectionChanged(TeamAction.java:269)
	at org.eclipse.ui.internal.PluginAction.refreshEnablement(PluginAction.java:205)
	at org.eclipse.ui.internal.PluginAction.selectionChanged(PluginAction.java:276)
	at org.eclipse.ui.internal.ObjectActionContributor.contributeObjectActions(ObjectActionContributor.java:138)
	at org.eclipse.ui.internal.ObjectActionContributorManager.contributeObjectActions(ObjectActionContributorManager.java:89)
	at org.eclipse.ui.internal.PopupMenuExtender.addObjectActions(PopupMenuExtender.java:253)
	at org.eclipse.ui.internal.PopupMenuExtender.menuAboutToShow(PopupMenuExtender.java:315)
	at org.eclipse.jface.action.MenuManager.fireAboutToShow(MenuManager.java:285)
	at org.eclipse.jface.action.MenuManager.handleAboutToShow(MenuManager.java:390)
	at org.eclipse.jface.action.MenuManager.access$1(MenuManager.java:387)
	at org.eclipse.jface.action.MenuManager$2.menuShown(MenuManager.java:412)
	at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:117)
	at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:925)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:949)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:930)
	at org.eclipse.swt.widgets.Control.WM_INITMENUPOPUP(Control.java:3546)
	at org.eclipse.swt.widgets.Control.windowProc(Control.java:3262)
	at org.eclipse.swt.widgets.Decorations.windowProc(Decorations.java:1538)
	at org.eclipse.swt.widgets.Display.windowProc(Display.java:3965)
	at org.eclipse.swt.internal.win32.OS.TrackPopupMenu(Native Method)
	at org.eclipse.swt.widgets.Menu._setVisible(Menu.java:225)
	at org.eclipse.swt.widgets.Display.runPopups(Display.java:3313)
	at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2901)
	at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1899)
	at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1863)
	at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:417)
	at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:143)
	at org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:106)
	at org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:99)
	at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:92)
	at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:68)
	at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:374)
	at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:169)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
	at java.lang.reflect.Method.invoke(Unknown Source)
	at org.eclipse.core.launcher.Main.invokeFramework(Main.java:338)
	at org.eclipse.core.launcher.Main.basicRun(Main.java:282)
	at org.eclipse.core.launcher.Main.run(Main.java:977)
	at org.eclipse.core.launcher.Main.main(Main.java:952)
This only happened with TPTP's runtime package.
It seems to work fine with TPTP's SDK package
Actually, I was able to reproduce with the SDK package too.
I had to import the log file twice to be able to reproduce it.
Ali, I cannot reproduce the problem at all with the following i1 TP2 M5A builds:

eclipse-SDK-3.2M5a-win32.zip
emf-sdo-xsd-SDK-2.2.0M5.zip
tptp.runtime-TPTP-4.2.0-200602262249.zip
tptpdc.win_ia32-TPTP-4.2.0-200602262249.zip

and I don't see your NPE shown in my .log file.
reopen it as it can be reproduce in both logging and profiling scenarios,

i am also rasing the severity of this defect.
*** Bug 129638 has been marked as a duplicate of this bug. ***
Created attachment 35442
log with execption throw from hyades plugin
The problem can be reproduced with the following steps: (Thanks Ali for finding this out)

1. launch with a clean workspace
2. switch to cvs repository exploring perspective
3. new &gt; repository location...
4. setup a repository of TPTP cvs
5. check out test-result/monitoring/org.eclipse.tptp.monitoring.tests
6. switch to profiling and logging perspective
7. import...&gt;log file
8. as soon as log agent is created in log navigator view, select the logging agent, right click and try open pop up menu.


This is related to an early bug fix (Marius, please link the bug number here). the fix results in a single null element array return on selection change query.

In CVSActionSelectionProperties:
 public IResource[] getNonoverlappingSelectedResources() {
        IResource[] resources = (IResource[])get(NONOVERLAPPING_SELECTED_RESOURCES);
        if (resources == null) {
            resources = getNonOverlapping(getAllSelectedResources());
            put (NONOVERLAPPING_SELECTED_RESOURCES, resources);
        }
        return resources;
    }

In line
 IResource[] resources = (IResource[])get(NONOVERLAPPING_SELECTED_RESOURCES);
resources returned is always a single null element array, instead of null.
 "resources"= IResource[1]  (id=970)
	[0]= null

Below is a stack of where problem happens:
Thread [main] (Suspended)
	CVSActionSelectionProperties.getNonoverlappingSelectedResources() line: 81
	IgnoreAction(CVSAction).getSelectedResources() line: 608
	IgnoreAction(WorkspaceAction).setActionEnablement(IAction) line: 205
	IgnoreAction(TeamAction).selectionChanged(IAction, ISelection) line: 269
	IgnoreAction(CVSAction).selectionChanged(IAction, ISelection) line: 178
	WWinPluginAction(PluginAction).refreshEnablement() line: 205
	WWinPluginAction(PluginAction).selectionChanged(ISelection) line: 276
	WWinPluginAction(PluginAction).selectionChanged(IWorkbenchPart, ISelection) line: 297
	WindowSelectionService(AbstractSelectionService).fireSelection(IWorkbenchPart, ISelection) line: 156
	AbstractSelectionService$1.selectionChanged(SelectionChangedEvent) line: 62
	Viewer$2.run() line: 162
	SafeRunner.run(ISafeRunnable) line: 37
	Platform.run(ISafeRunnable) line: 816
	JFaceUtil$1.run(ISafeRunnable) line: 44

Mairus, I am passing this to you as discussed.
Created attachment 35458
Patch with the fix

Waiting for Sri's approval to apply the patch.
Not sure if this is related but while doing a log import with the 200602262249 build, an error dialog popped up saying an error occured and to check the log.  The log import succeeded though.  Here is the exception that was in the eclipse log file:

java.lang.ArrayIndexOutOfBoundsException: 1
	at org.eclipse.emf.common.util.URI.segment(URI.java:1593)
	at org.eclipse.hyades.models.hierarchy.util.HierarchyAdaptersFactory$HierarchyResourceMapping.getProject(HierarchyAdaptersFactory.java:50)
	at org.eclipse.hyades.models.hierarchy.util.HierarchyAdaptersFactory$HierarchyResourceMapping.getProjects(HierarchyAdaptersFactory.java:45)
	at org.eclipse.ui.internal.ide.actions.BuildUtilities.extractProjects(BuildUtilities.java:57)
	at org.eclipse.ui.internal.ide.actions.BuildUtilities.findSelectedProjects(BuildUtilities.java:79)
	at org.eclipse.ui.actions.BuildAction.isEnabled(BuildAction.java:200)
	at org.eclipse.ui.actions.RetargetAction.setActionHandler(RetargetAction.java:263)
	at org.eclipse.ui.internal.ide.actions.RetargetActionWithDefault.setActionHandler(RetargetActionWithDefault.java:47)
	at org.eclipse.ui.actions.RetargetAction.partActivated(RetargetAction.java:151)
	at org.eclipse.ui.internal.PartListenerList$1.run(PartListenerList.java:71)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java(Inlined Compiled Code))
	at org.eclipse.core.runtime.Platform.run(Platform.java(Compiled Code))
	at org.eclipse.ui.internal.PartListenerList.fireEvent(PartListenerList.java:57)
	at org.eclipse.ui.internal.PartListenerList.firePartActivated(PartListenerList.java:69)
	at org.eclipse.ui.internal.PartService.firePartActivated(PartService.java:73)
	at org.eclipse.ui.internal.PartService.setActivePart(PartService.java:171)
	at org.eclipse.ui.internal.WWinPartService.updateActivePart(WWinPartService.java:124)
	at org.eclipse.ui.internal.WWinPartService.access$0(WWinPartService.java:115)
	at org.eclipse.ui.internal.WWinPartService$1.partDeactivated(WWinPartService.java:48)
	at org.eclipse.ui.internal.PartListenerList2$4.run(PartListenerList2.java:112)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java(Inlined Compiled Code))
	at org.eclipse.core.runtime.Platform.run(Platform.java(Compiled Code))
	at org.eclipse.ui.internal.PartListenerList2.fireEvent(PartListenerList2.java:53)
	at org.eclipse.ui.internal.PartListenerList2.firePartDeactivated(PartListenerList2.java:110)
	at org.eclipse.ui.internal.PartService.firePartDeactivated(PartService.java:116)
	at org.eclipse.ui.internal.PartService.setActivePart(PartService.java:165)
	at org.eclipse.ui.internal.WorkbenchPagePartList.fireActivePartChanged(WorkbenchPagePartList.java:56)
	at org.eclipse.ui.internal.PartList.setActivePart(PartList.java:117)
	at org.eclipse.ui.internal.WorkbenchPage.setActivePart(WorkbenchPage.java:2975)
	at org.eclipse.ui.internal.WorkbenchPage.requestActivation(WorkbenchPage.java:2543)
	at org.eclipse.ui.internal.PartPane.requestActivation(PartPane.java:251)
	at org.eclipse.ui.internal.PartPane.handleEvent(PartPane.java:216)
	at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java(Compiled Code))
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java(Inlined Compiled Code))
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java(Compiled Code))
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java(Compiled Code))
	at org.eclipse.swt.widgets.Shell.setActiveControl(Shell.java:1049)
	at org.eclipse.swt.widgets.Shell.WM_MOUSEACTIVATE(Shell.java:1686)
	at org.eclipse.swt.widgets.Control.windowProc(Control.java(Compiled Code))
	at org.eclipse.swt.widgets.Decorations.windowProc(Decorations.java(Compiled Code))
	at org.eclipse.swt.widgets.Display.windowProc(Display.java(Compiled Code))
	at org.eclipse.swt.internal.win32.OS.DefWindowProcW(Native Method)
	at org.eclipse.swt.internal.win32.OS.DefWindowProc(OS.java(Inlined Compiled Code))
	at org.eclipse.swt.widgets.Scrollable.callWindowProc(Scrollable.java(Compiled Code))
	at org.eclipse.swt.widgets.Control.windowProc(Control.java(Compiled Code))
	at org.eclipse.swt.widgets.Display.windowProc(Display.java(Compiled Code))
	at org.eclipse.swt.internal.win32.OS.DefWindowProcW(Native Method)
	at org.eclipse.swt.internal.win32.OS.DefWindowProc(OS.java(Inlined Compiled Code))
	at org.eclipse.swt.widgets.Scrollable.callWindowProc(Scrollable.java(Compiled Code))
	at org.eclipse.swt.widgets.Control.windowProc(Control.java(Compiled Code))
	at org.eclipse.swt.widgets.Display.windowProc(Display.java(Compiled Code))
	at org.eclipse.swt.internal.win32.OS.DefWindowProcW(Native Method)
	at org.eclipse.swt.internal.win32.OS.DefWindowProc(OS.java(Inlined Compiled Code))
	at org.eclipse.swt.widgets.Scrollable.callWindowProc(Scrollable.java(Compiled Code))
	at org.eclipse.swt.widgets.Control.windowProc(Control.java(Compiled Code))
	at org.eclipse.swt.widgets.Display.windowProc(Display.java(Compiled Code))
	at org.eclipse.swt.internal.win32.OS.DefWindowProcW(Native Method)
	at org.eclipse.swt.internal.win32.OS.DefWindowProc(OS.java(Inlined Compiled Code))
	at org.eclipse.swt.widgets.Scrollable.callWindowProc(Scrollable.java(Compiled Code))
	at org.eclipse.swt.widgets.Control.windowProc(Control.java(Compiled Code))
	at org.eclipse.swt.widgets.Display.windowProc(Display.java(Compiled Code))
	at org.eclipse.swt.internal.win32.OS.DefWindowProcW(Native Method)
	at org.eclipse.swt.internal.win32.OS.DefWindowProc(OS.java(Inlined Compiled Code))
	at org.eclipse.swt.widgets.Scrollable.callWindowProc(Scrollable.java(Compiled Code))
	at org.eclipse.swt.widgets.Control.windowProc(Control.java(Compiled Code))
	at org.eclipse.swt.widgets.Display.windowProc(Display.java(Compiled Code))
	at org.eclipse.swt.internal.win32.OS.DefWindowProcW(Native Method)
	at org.eclipse.swt.internal.win32.OS.DefWindowProc(OS.java(Inlined Compiled Code))
	at org.eclipse.swt.widgets.Scrollable.callWindowProc(Scrollable.java(Compiled Code))
	at org.eclipse.swt.widgets.Control.windowProc(Control.java(Compiled Code))
	at org.eclipse.swt.widgets.Display.windowProc(Display.java(Compiled Code))
	at org.eclipse.swt.internal.win32.OS.DefWindowProcW(Native Method)
	at org.eclipse.swt.internal.win32.OS.DefWindowProc(OS.java(Inlined Compiled Code))
	at org.eclipse.swt.widgets.Scrollable.callWindowProc(Scrollable.java(Compiled Code))
	at org.eclipse.swt.widgets.Control.windowProc(Control.java(Compiled Code))
	at org.eclipse.swt.widgets.Display.windowProc(Display.java(Compiled Code))
	at org.eclipse.swt.internal.win32.OS.DefWindowProcW(Native Method)
	at org.eclipse.swt.internal.win32.OS.DefWindowProc(OS.java(Inlined Compiled Code))
	at org.eclipse.swt.widgets.Scrollable.callWindowProc(Scrollable.java(Compiled Code))
	at org.eclipse.swt.widgets.Control.windowProc(Control.java(Compiled Code))
	at org.eclipse.swt.widgets.Display.windowProc(Display.java(Compiled Code))
	at org.eclipse.swt.internal.win32.OS.DefWindowProcW(Native Method)
	at org.eclipse.swt.internal.win32.OS.DefWindowProc(OS.java(Inlined Compiled Code))
	at org.eclipse.swt.widgets.Scrollable.callWindowProc(Scrollable.java(Compiled Code))
	at org.eclipse.swt.widgets.Control.windowProc(Control.java(Compiled Code))
	at org.eclipse.swt.widgets.Display.windowProc(Display.java(Compiled Code))
	at org.eclipse.swt.internal.win32.OS.DefWindowProcW(Native Method)
	at org.eclipse.swt.internal.win32.OS.DefWindowProc(OS.java(Inlined Compiled Code))
	at org.eclipse.swt.widgets.Scrollable.callWindowProc(Scrollable.java(Compiled Code))
	at org.eclipse.swt.widgets.Control.windowProc(Control.java(Compiled Code))
	at org.eclipse.swt.widgets.Display.windowProc(Display.java(Compiled Code))
	at org.eclipse.swt.internal.win32.OS.DefWindowProcW(Native Method)
	at org.eclipse.swt.internal.win32.OS.DefWindowProc(OS.java(Inlined Compiled Code))
	at org.eclipse.swt.widgets.Scrollable.callWindowProc(Scrollable.java(Compiled Code))
	at org.eclipse.swt.widgets.Control.windowProc(Control.java(Compiled Code))
	at org.eclipse.swt.widgets.Display.windowProc(Display.java(Compiled Code))
	at org.eclipse.swt.internal.win32.OS.PeekMessageW(Native Method)
	at org.eclipse.swt.internal.win32.OS.PeekMessage(OS.java(Inlined Compiled Code))
	at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java(Compiled Code))
	at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java(Compiled Code))
	at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1863)
	at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:417)
	at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:143)
	at org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:106)
	at org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:99)
	at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:92)
	at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:68)
	at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:374)
	at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:169)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:85)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:58)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:60)
	at java.lang.reflect.Method.invoke(Method.java:391)
	at org.eclipse.core.launcher.Main.invokeFramework(Main.java:338)
	at org.eclipse.core.launcher.Main.basicRun(Main.java:282)
	at org.eclipse.core.launcher.Main.run(Main.java:977)
	at org.eclipse.core.launcher.Main.main(Main.java:952)

Note, the exception indicated in comment 12 (https://bugs.eclipse.org/bugs/show_bug.cgi?id=129585#c12) only occurred once for me.  I was running on Windows 2000 with Sun JDK 1.4.2_08
Fix in CVS. 

Regarding comment comment #12, I fixed also that that problem in the adapter
factory, althogh it's not clear how you got into that situation, please try to
save the resource when you see that problem again (in the current driver only,
the in the next driver you won't see it anymore).
As of TPTP 4.6.0, TPTP is in maintenance mode and focusing on improving quality by resolving relevant enhancements/defects and increasing test coverage through test creation, automation, Build Verification Tests (BVTs), and expanded run-time execution. As part of the TPTP Bugzilla housecleaning process (see http://wiki.eclipse.org/Bugzilla_Housecleaning_Processes), this enhancement/defect is verified/closed by the Project Lead since this enhancement/defect has been resolved and unverified for more than 1 year and considered to be fixed. If this enhancement/defect is still unresolved and reproducible in the latest TPTP release (http://www.eclipse.org/tptp/home/downloads/), please re-open.</WithStack>
    <WithOutStack>Build: TPTP-4.2.0-200602262249

- Switch to the profiling and logging perspective and activate the log navigator view
- Import an Apache access and error log file
- *Ensure* that the log files are selected.
- Right click the log files 

Sometimes the context menu doesn't show up.  Other times, if I right click the second time, I get a context menu without any icons (see attachment)
Created attachment 35409
context menu of log files
Marking this as major because the context menu has missing options such as "delete".
Here's the stack trace I get every other time that I right click the log files:

!ENTRY org.eclipse.ui 4 0 2006-02-27 10:36:44.343
!MESSAGE java.lang.NullPointerException
!STACK 0
This only happened with TPTP's runtime package.
It seems to work fine with TPTP's SDK package
Actually, I was able to reproduce with the SDK package too.
I had to import the log file twice to be able to reproduce it.
Ali, I cannot reproduce the problem at all with the following i1 TP2 M5A builds:

eclipse-SDK-3.2M5a-win32.zip
emf-sdo-xsd-SDK-2.2.0M5.zip
tptp.runtime-TPTP-4.2.0-200602262249.zip
tptpdc.win_ia32-TPTP-4.2.0-200602262249.zip

and I don't see your NPE shown in my .log file.
reopen it as it can be reproduce in both logging and profiling scenarios,

i am also rasing the severity of this defect.
*** Bug 129638 has been marked as a duplicate of this bug. ***
Created attachment 35442
log with execption throw from hyades plugin
The problem can be reproduced with the following steps: (Thanks Ali for finding this out)

1. launch with a clean workspace
2. switch to cvs repository exploring perspective
3. new &gt; repository location...
4. setup a repository of TPTP cvs
5. check out test-result/monitoring/org.eclipse.tptp.monitoring.tests
6. switch to profiling and logging perspective
7. import...&gt;log file
8. as soon as log agent is created in log navigator view, select the logging agent, right click and try open pop up menu.


This is related to an early bug fix (Marius, please link the bug number here). the fix results in a single null element array return on selection change query.

In CVSActionSelectionProperties:
 public IResource[] getNonoverlappingSelectedResources() {
        IResource[] resources = (IResource[])get(NONOVERLAPPING_SELECTED_RESOURCES);
        if (resources == null) {
            resources = getNonOverlapping(getAllSelectedResources());
            put (NONOVERLAPPING_SELECTED_RESOURCES, resources);
        }
        return resources;
    }

In line
 IResource[] resources = (IResource[])get(NONOVERLAPPING_SELECTED_RESOURCES);
resources returned is always a single null element array, instead of null.
 "resources"= IResource[1]  (id=970)
	[0]= null

Below is a stack of where problem happens:
Thread [main] (Suspended)
	CVSActionSelectionProperties.getNonoverlappingSelectedResources() line: 81
	IgnoreAction(CVSAction).getSelectedResources() line: 608
	IgnoreAction(WorkspaceAction).setActionEnablement(IAction) line: 205
	IgnoreAction(TeamAction).selectionChanged(IAction, ISelection) line: 269
	IgnoreAction(CVSAction).selectionChanged(IAction, ISelection) line: 178
	WWinPluginAction(PluginAction).refreshEnablement() line: 205
	WWinPluginAction(PluginAction).selectionChanged(ISelection) line: 276
	WWinPluginAction(PluginAction).selectionChanged(IWorkbenchPart, ISelection) line: 297
	WindowSelectionService(AbstractSelectionService).fireSelection(IWorkbenchPart, ISelection) line: 156
	AbstractSelectionService$1.selectionChanged(SelectionChangedEvent) line: 62
	Viewer$2.run() line: 162
	SafeRunner.run(ISafeRunnable) line: 37
	Platform.run(ISafeRunnable) line: 816
	JFaceUtil$1.run(ISafeRunnable) line: 44

Mairus, I am passing this to you as discussed.
Created attachment 35458
Patch with the fix

Waiting for Sri's approval to apply the patch.
Not sure if this is related but while doing a log import with the 200602262249 build, an error dialog popped up saying an error occured and to check the log.  The log import succeeded though.  Here is the exception that was in the eclipse log file:



Note, the exception indicated in comment 12 (https://bugs.eclipse.org/bugs/show_bug.cgi?id=129585#c12) only occurred once for me.  I was running on Windows 2000 with Sun JDK 1.4.2_08
Fix in CVS. 

Regarding comment comment #12, I fixed also that that problem in the adapter
factory, althogh it's not clear how you got into that situation, please try to
save the resource when you see that problem again (in the current driver only,
the in the next driver you won't see it anymore).
As of TPTP 4.6.0, TPTP is in maintenance mode and focusing on improving quality by resolving relevant enhancements/defects and increasing test coverage through test creation, automation, Build Verification Tests (BVTs), and expanded run-time execution. As part of the TPTP Bugzilla housecleaning process (see http://wiki.eclipse.org/Bugzilla_Housecleaning_Processes), this enhancement/defect is verified/closed by the Project Lead since this enhancement/defect has been resolved and unverified for more than 1 year and considered to be fixed. If this enhancement/defect is still unresolved and reproducible in the latest TPTP release (http://www.eclipse.org/tptp/home/downloads/), please re-open.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="129586" />
    <CreationDate amount="2006-02-27 10:42:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="PDE" />
    <component amount="UI" />
    <Version amount="3.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>[product][build] PDE UI should use the Product parser from PDE Build</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="NEW" />
    <resolution amount="" />
    <WithStack>Now that PDE Build knows about products, PDE UI could use the product parser from PDE Build. This would avoid code duplication but more importantly that would avoid problems where the format of the file is changed and PDE Build does not notice.
This won't happen in M7.

However, in 3.5, we need to look at creating some standard parser for product files... we have 3 currently (p2, pde ui, pde build)</WithStack>
    <WithOutStack>Now that PDE Build knows about products, PDE UI could use the product parser from PDE Build. This would avoid code duplication but more importantly that would avoid problems where the format of the file is changed and PDE Build does not notice.
This won't happen in M7.

However, in 3.5, we need to look at creating some standard parser for product files... we have 3 currently (p2, pde ui, pde build)</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="129587" />
    <CreationDate amount="2006-02-27 10:48:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="JDT" />
    <component amount="Debug" />
    <Version amount="3.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>[console] Java SE 6.0: Console.readLine() throws NPE</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="2">
      <source_code type="assignment">
        <location start="103" end="141" />
        <code>Console console = System.console();</code>
      </source_code>
      <source_code type="assignment">
        <location start="142" end="200" />
        <code>final String username = console.readLine("username: ");</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="WONTFIX" />
    <WithStack>When running a console application in the console window a
NullPointerException is thrown when using:

   Console console = System.console();
   final String username = console.readLine("username: ");

The "compiler compliance level" in the "preferences" is configured as "6.0",
and the JDK used is the official beta of Sun Microsystems.
The JDT spec of System.console() says that the result can be null. BTW, this has nothing to do with Eclipse, we just use the standard commands 'java' or 'javaw' to run (configure this in the launch configuration).
Both 'java' and 'javaw' in the launch configuration yield null for System.console().

Using java.exe outside of Eclipse there is no problem.


The spec of the JDK still says that null is a possible result.

Moving to debug to see if they have an idea why the launcher using 'java.exe' is different.
I was unable to get a console to exist when launching a Java app from Eclipse, no matter if I used java or javaw (or launched Eclispe with java/javaw). However, the doc for Console does claim that the existence of a console depends on how the app is launched:

"Whether a virtual machine has a console is dependent upon the underlying platform and also upon the manner in which the virtual machine is invoked. If the virtual machine is started from an interactive command line without redirecting the standard input and output streams then its console will exist and will typically be connected to the keyboard and display from which the virtual machine was launched. If the virtual is started automatically, for example by a background job scheduler, then it will typically not have a console."

Needs more investigation to see if we can support a console for Java apps launched from Eclipse.
Deferred
As of now 'LATER' and 'REMIND' resolutions are no longer supported.
Please reopen this bug if it is still valid for you.</WithStack>
    <WithOutStack>When running a console application in the console window a
NullPointerException is thrown when using:

   Console console = System.console();
   final String username = console.readLine("username: ");

The "compiler compliance level" in the "preferences" is configured as "6.0",
and the JDK used is the official beta of Sun Microsystems.
The JDT spec of System.console() says that the result can be null. BTW, this has nothing to do with Eclipse, we just use the standard commands 'java' or 'javaw' to run (configure this in the launch configuration).
Both 'java' and 'javaw' in the launch configuration yield null for System.console().

Using java.exe outside of Eclipse there is no problem.


The spec of the JDK still says that null is a possible result.

Moving to debug to see if they have an idea why the launcher using 'java.exe' is different.
I was unable to get a console to exist when launching a Java app from Eclipse, no matter if I used java or javaw (or launched Eclispe with java/javaw). However, the doc for Console does claim that the existence of a console depends on how the app is launched:

"Whether a virtual machine has a console is dependent upon the underlying platform and also upon the manner in which the virtual machine is invoked. If the virtual machine is started from an interactive command line without redirecting the standard input and output streams then its console will exist and will typically be connected to the keyboard and display from which the virtual machine was launched. If the virtual is started automatically, for example by a background job scheduler, then it will typically not have a console."

Needs more investigation to see if we can support a console for Java apps launched from Eclipse.
Deferred
As of now 'LATER' and 'REMIND' resolutions are no longer supported.
Please reopen this bug if it is still valid for you.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="129588" />
    <CreationDate amount="2006-02-27 10:54:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="JDT" />
    <component amount="Text" />
    <Version amount="3.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>[rulers] No error icon in editor left ruler</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="1">
      <source_code type="class">
        <location start="148" end="177" />
        <code>public class X {
	{
		(a
	}
}</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="1">
      <Enumeration lines="14">
        <Lines>
          <Line>1. if we would add an icon, people would also want the icon to be</Line>
          <Line>shown on views (Outline, Package Explorer and notably Problems view),</Line>
          <Line>basically everywhere where the normal/build problem icons appear. However,</Line>
          <Line>doing this is be a performance problem.</Line>
          <Line />
          <Line>2. you still see the error in the source and in the overview ruler</Line>
          <Line />
          <Line>3. in order to distinguish temporary problems from build problems (and of course</Line>
          <Line>from quick fixable one, we'd have to invent yet another icon</Line>
          <Line />
          <Line>4. yes, we knew that there would be the inconsistency you see, but we decided</Line>
          <Line>that this is not a big deal and given the fact that since 2.0 where J Core</Line>
          <Line>started to report temporary problems we did not get a single PR up to now</Line>
          <Line>probably proofs us right</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>Build 3.2M5

When typing following code in editor (without building), there is no error indication in left ruler, where one appears when building.

public class X {
	{
		(a
	}
}

Note that if removing the open parenthesis, the error icon appears as expected.
This is by design and in since day one: we only show an icon in the vertical ruler for temporary problems if we think there might be a quick fix and then show the corresponding quick fix icon. Note that we indicate it in the text and the overview ruler though.
What's interesting, though, is that those 2 characters induce 5 syntax errors ;-)
Well, if I am building, then I see an error icon... not if I am reconciling. Isn't this inconsistent ?
The main point behind the current design decision is/was:
1. if we would add an icon, people would also want the icon to be 
   shown on views (Outline, Package Explorer and notably Problems view), 
   basically everywhere where the normal/build problem icons appear. However, 
   doing this is be a performance problem.

2. you still see the error in the source and in the overview ruler

3. in order to distinguish temporary problems from build problems (and of course
   from quick fixable one, we'd have to invent yet another icon

4. yes, we knew that there would be the inconsistency you see, but we decided
   that this is not a big deal and given the fact that since 2.0 where J Core
   started to report temporary problems we did not get a single PR up to now 
   probably proofs us right

Note that another inconsistency causes much more reaction/PRs from the community: they often miss the temporary problems in the Problems view.
Fair enough, if it is a 2.0 behavior. Still inconsistent, but not a regression.
We should address this now that almost all temporary problems have icons due to the fact that they have a quick fix.

Early 3.4 we should just show the normal icons and order artwork for a temporary warning and error.

NOTE: we should probably do the same for the task tag icon.
&gt;NOTE: we should probably do the same for the task tag icon.
Done.

Fixed in HEAD.
Available in builds &gt; N20071108-0010.
*** Bug 39025 has been marked as a duplicate of this bug. ***</WithStack>
    <WithOutStack>Build 3.2M5

When typing following code in editor (without building), there is no error indication in left ruler, where one appears when building.

public class X {
	{
		(a
	}
}

Note that if removing the open parenthesis, the error icon appears as expected.
This is by design and in since day one: we only show an icon in the vertical ruler for temporary problems if we think there might be a quick fix and then show the corresponding quick fix icon. Note that we indicate it in the text and the overview ruler though.
What's interesting, though, is that those 2 characters induce 5 syntax errors ;-)
Well, if I am building, then I see an error icon... not if I am reconciling. Isn't this inconsistent ?
The main point behind the current design decision is/was:
1. if we would add an icon, people would also want the icon to be 
   shown on views (Outline, Package Explorer and notably Problems view), 
   basically everywhere where the normal/build problem icons appear. However, 
   doing this is be a performance problem.

2. you still see the error in the source and in the overview ruler

3. in order to distinguish temporary problems from build problems (and of course
   from quick fixable one, we'd have to invent yet another icon

4. yes, we knew that there would be the inconsistency you see, but we decided
   that this is not a big deal and given the fact that since 2.0 where J Core
   started to report temporary problems we did not get a single PR up to now 
   probably proofs us right

Note that another inconsistency causes much more reaction/PRs from the community: they often miss the temporary problems in the Problems view.
Fair enough, if it is a 2.0 behavior. Still inconsistent, but not a regression.
We should address this now that almost all temporary problems have icons due to the fact that they have a quick fix.

Early 3.4 we should just show the normal icons and order artwork for a temporary warning and error.

NOTE: we should probably do the same for the task tag icon.
&gt;NOTE: we should probably do the same for the task tag icon.
Done.

Fixed in HEAD.
Available in builds &gt; N20071108-0010.
*** Bug 39025 has been marked as a duplicate of this bug. ***</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="129589" />
    <CreationDate amount="2006-02-27 10:55:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="JDT" />
    <component amount="Core" />
    <Version amount="3.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="minor" />
    <Summery>Recovered AST - valid method declaration / block marked as malformed / recovered</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="6">
      <source_code type="package">
        <location start="6" end="16" />
        <code>package p;</code>
      </source_code>
      <source_code type="class">
        <location start="17" end="184" />
        <code>public class A {
    protected void primExecute() {
        String temp= this.toString();
    }
        if (image != null) {
            Object loc = null;
        }
}</code>
      </source_code>
      <source_code type="package">
        <location start="776" end="786" />
        <code>package p;</code>
      </source_code>
      <source_code type="class">
        <location start="787" end="923" />
        <code>public class A {
    protected void primExecute() {
        String temp= this.toString();
    }
    {
        Object loc = null;
    }
}</code>
      </source_code>
      <source_code type="package">
        <location start="971" end="981" />
        <code>package p;</code>
      </source_code>
      <source_code type="class">
        <location start="982" end="1161" />
        <code>public class A {
    protected void primExecute() {
        String temp= this.toString();
    }
    {
        if (image != null) {
            Object loc = null;
        }
    }
}</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="WONTFIX" />
    <WithStack>HEAD

package p;
public class A {
    protected void primExecute() {
        String temp= this.toString();
    }
        if (image != null) {
            Object loc = null;
        }
}

The AST is:
TypeDeclaration [14, 174] (recovered)
	BODY_DECLARATIONS (2)
		MethodDeclaration [36, 76] (malformed)
			BODY
				Block [65, 47] (recovered)
		Initializer [141, 44]

I would expect that the MethodDeclaration and its children are OK, but the Initializer should be recovered (and malformed).
Added regression test in org.eclipse.jdt.core.tests.dom.ASTConverterTestAST3_2.test0640.
The test is disabled for now.
In this case the recovery (the standard recovery not the statement recovery) and the diagnosis are not fully synchronized.

The recovery view this compilation unit as:

package p;
public class A {
    protected void primExecute() {
        String temp= this.toString();
    }
    {
        Object loc = null;
    }
}

The diagnosis view this compilation unit as:

package p;
public class A {
    protected void primExecute() {
        String temp= this.toString();
    }
    {
        if (image != null) {
            Object loc = null;
        }
    }
}


As the structure is build by recovery then the initilaizer is kept and has no syntax error. So cannot be flag as recovered.

Another problem is that the location of a syntax is at the end of the body of primExecute(). As this error location is inside the method method then this method is falsely flag as recovered.

These problems is caused by our dual parse strategy. Find a fix for these problems would require risky changes. So i would defer this bug post 3.2.

Markus - Is it a problem if i defer this bug post 3.2 ?
No problem if you defer (bug is already minor).

I came upon this problem while I was shuffling around code, but I don't think it happens so often that it would justify risky changes.
Deferred post 3.2.
As of now 'LATER' and 'REMIND' resolutions are no longer supported.
Please reopen this bug if it is still valid for you.</WithStack>
    <WithOutStack>HEAD

package p;
public class A {
    protected void primExecute() {
        String temp= this.toString();
    }
        if (image != null) {
            Object loc = null;
        }
}

The AST is:
TypeDeclaration [14, 174] (recovered)
	BODY_DECLARATIONS (2)
		MethodDeclaration [36, 76] (malformed)
			BODY
				Block [65, 47] (recovered)
		Initializer [141, 44]

I would expect that the MethodDeclaration and its children are OK, but the Initializer should be recovered (and malformed).
Added regression test in org.eclipse.jdt.core.tests.dom.ASTConverterTestAST3_2.test0640.
The test is disabled for now.
In this case the recovery (the standard recovery not the statement recovery) and the diagnosis are not fully synchronized.

The recovery view this compilation unit as:

package p;
public class A {
    protected void primExecute() {
        String temp= this.toString();
    }
    {
        Object loc = null;
    }
}

The diagnosis view this compilation unit as:

package p;
public class A {
    protected void primExecute() {
        String temp= this.toString();
    }
    {
        if (image != null) {
            Object loc = null;
        }
    }
}


As the structure is build by recovery then the initilaizer is kept and has no syntax error. So cannot be flag as recovered.

Another problem is that the location of a syntax is at the end of the body of primExecute(). As this error location is inside the method method then this method is falsely flag as recovered.

These problems is caused by our dual parse strategy. Find a fix for these problems would require risky changes. So i would defer this bug post 3.2.

Markus - Is it a problem if i defer this bug post 3.2 ?
No problem if you defer (bug is already minor).

I came upon this problem while I was shuffling around code, but I don't think it happens so often that it would justify risky changes.
Deferred post 3.2.
As of now 'LATER' and 'REMIND' resolutions are no longer supported.
Please reopen this bug if it is still valid for you.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="129590" />
    <CreationDate amount="2006-02-27 11:01:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="SWT" />
    <Version amount="3.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Event.index == 0 all the time</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>The new "index" field (@since 3.2) in Event claims to be the index of the item where the event occurred. When called back for a SWT.SetData event, the index is always zero. I would expect it to be the index of the item that data was requested for.
Yes, you are right.  I was planning to fix this for 3.2.
Fixed on Windows for virtual table and tree.
Z to fix the other platforms.
Fixed for other platforms.
for Z
*** Bug 90141 has been marked as a duplicate of this bug. ***
Re-verified by Z for M6 (20063103).</WithStack>
    <WithOutStack>The new "index" field (@since 3.2) in Event claims to be the index of the item where the event occurred. When called back for a SWT.SetData event, the index is always zero. I would expect it to be the index of the item that data was requested for.
Yes, you are right.  I was planning to fix this for 3.2.
Fixed on Windows for virtual table and tree.
Z to fix the other platforms.
Fixed for other platforms.
for Z
*** Bug 90141 has been marked as a duplicate of this bug. ***
Re-verified by Z for M6 (20063103).</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="129591" />
    <CreationDate amount="2006-02-27 11:14:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="UI" />
    <Version amount="3.2" />
    <rep_platform amount="All" />
    <op_sys amount="All" />
    <priority amount="P4" />
    <bug_severity amount="enhancement" />
    <Summery>[Contributions] Create a two-way proxy for the workbench window menu manager</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="4">
        <Lines>
          <Line>1) WorkbenchActionBuilder</Line>
          <Line>2) EditorActionBarContributor</Line>
          <Line>3) actionSets</Line>
          <Line>4) editorActions</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="CLOSED" />
    <resolution amount="WONTFIX" />
    <WithStack>For 3.2, it would be nice to have a two-way proxy in place of the existing workbench window menu manager.  This proxy would expose data stored in the new IMenuService in terms of the old MenuManager API.  This proxy would also pass along information added to the old MenuManager API to the new IMenuService.  The menus would be rendered simply by calling fill(...) on the proxy.

As it stands right now, there is a tracing option (org.eclipse.ui/experimental/menus) that can be used to activate the work-in-progress proxy (currently crashes).  This proxy is hooked up in WorkbenchWindow.createMenuManager().  The proxy classes (work in progress) are LegacyMenuManager and LegacyContributionItem.

I am aware of several major design issues to work through before such a proxy could work.  One is listed below, the others are dependencies on this bug.
+ IMenuService creates a layout for the Workbench as a whole, while MenuManager is WorkbenchWindow-specific.  This means that the core menu structure doesn't exist until a WorkbenchWindow is opened (e.g., the "File" menu).
SMenuManager contains the menu "metadata".  MenuElements like SMenu, SItem, SGroup, SWidget.

Each MenuElement has an array of SLocations, so they can appear in multiple places in a menu layout.

You can ask the SMenuManager for an SMenuLayout, and use that to get the generated tree of ILayoutNodes ... one ILayoutNode for each MenuElement+SLocation.

We start by providing the LegacyMenuManager in createMenuManager().

Other usecases that must work:
1) WorkbenchActionBuilder
2) EditorActionBarContributor
3) actionSets
4) editorActions

PW

SMenuManager contains the list of MenuElements, like SMenu and SItem.  There needs to be one SMenuManager per workbench window.  On creation, it will re-parse the extensions.

SMenuManager can generate an SMenuLayout, which controls the tree of ILayoutNodes.  This represents a layout.  Each ILayoutNode knows layout specific state like showing or visible.

The LegacyMenuManager then assumes the place of layout renderer.  It generates the hierarchy of Menu and MenuItem.  Any IContributionItem the LegacyMenuManager can understand the LegacyMenuManager can turn into SMenu, SItem, or SGroup.  If the LegacyMenuManager can't, there will be a LegacyContributionItemProxy.  For compatability feedback, any request for an object by ID will return the new menus objects wrapped in a LegacyContributionItem.

The flow of information like command state will be:
ParameterizedCommand -&gt; SMenuManager -&gt; SMenuLayout -&gt; Renderer (LegacyMenuManager)

SItem points to it's ParameterizedCommand.  This can have state of the check box or radio button kind.

PW

Created attachment 35628
cheap menu manager

This is the cheap version of an app level menu manager replacement.  It's not fully functional, but it works in the RCP Mail example by generating menus for the IContributionItems using SMenu/SItem.

PW
Paul - since MenuManager may be subclassed by clients, changing menuExist() from private to protected is an API change. Was this intentional?
It was intentional ... to subclass for a two way proxy replacement ...

What's the cost of getting something like this approved?  I don't want to add a new API, but I don't want to spend 3 days re-implementing functionality just to get around the API freeze either.

I'll remove it for now.

PW

Created attachment 36032
Examples of menu locations disorganized
I was able to put most of the top level menu back together (it contains 8 items as opposed to 48).

The fix includes turning incoming actionSet groups to identified SGroups with an id composed of &lt;menu.id&gt;-&lt;group.id&gt;.  This allows the navigate group1 to be distinct from the search group1.

PW

This will be continued on in 3.3

PW

We took a different path
As of now 'LATER' and 'REMIND' resolutions are no longer supported.
Please reopen this bug if it is still valid for you.</WithStack>
    <WithOutStack>For 3.2, it would be nice to have a two-way proxy in place of the existing workbench window menu manager.  This proxy would expose data stored in the new IMenuService in terms of the old MenuManager API.  This proxy would also pass along information added to the old MenuManager API to the new IMenuService.  The menus would be rendered simply by calling fill(...) on the proxy.

As it stands right now, there is a tracing option (org.eclipse.ui/experimental/menus) that can be used to activate the work-in-progress proxy (currently crashes).  This proxy is hooked up in WorkbenchWindow.createMenuManager().  The proxy classes (work in progress) are LegacyMenuManager and LegacyContributionItem.

I am aware of several major design issues to work through before such a proxy could work.  One is listed below, the others are dependencies on this bug.
+ IMenuService creates a layout for the Workbench as a whole, while MenuManager is WorkbenchWindow-specific.  This means that the core menu structure doesn't exist until a WorkbenchWindow is opened (e.g., the "File" menu).
SMenuManager contains the menu "metadata".  MenuElements like SMenu, SItem, SGroup, SWidget.

Each MenuElement has an array of SLocations, so they can appear in multiple places in a menu layout.

You can ask the SMenuManager for an SMenuLayout, and use that to get the generated tree of ILayoutNodes ... one ILayoutNode for each MenuElement+SLocation.

We start by providing the LegacyMenuManager in createMenuManager().

Other usecases that must work:
1) WorkbenchActionBuilder
2) EditorActionBarContributor
3) actionSets
4) editorActions

PW

SMenuManager contains the list of MenuElements, like SMenu and SItem.  There needs to be one SMenuManager per workbench window.  On creation, it will re-parse the extensions.

SMenuManager can generate an SMenuLayout, which controls the tree of ILayoutNodes.  This represents a layout.  Each ILayoutNode knows layout specific state like showing or visible.

The LegacyMenuManager then assumes the place of layout renderer.  It generates the hierarchy of Menu and MenuItem.  Any IContributionItem the LegacyMenuManager can understand the LegacyMenuManager can turn into SMenu, SItem, or SGroup.  If the LegacyMenuManager can't, there will be a LegacyContributionItemProxy.  For compatability feedback, any request for an object by ID will return the new menus objects wrapped in a LegacyContributionItem.

The flow of information like command state will be:
ParameterizedCommand -&gt; SMenuManager -&gt; SMenuLayout -&gt; Renderer (LegacyMenuManager)

SItem points to it's ParameterizedCommand.  This can have state of the check box or radio button kind.

PW

Created attachment 35628
cheap menu manager

This is the cheap version of an app level menu manager replacement.  It's not fully functional, but it works in the RCP Mail example by generating menus for the IContributionItems using SMenu/SItem.

PW
Paul - since MenuManager may be subclassed by clients, changing menuExist() from private to protected is an API change. Was this intentional?
It was intentional ... to subclass for a two way proxy replacement ...

What's the cost of getting something like this approved?  I don't want to add a new API, but I don't want to spend 3 days re-implementing functionality just to get around the API freeze either.

I'll remove it for now.

PW

Created attachment 36032
Examples of menu locations disorganized
I was able to put most of the top level menu back together (it contains 8 items as opposed to 48).

The fix includes turning incoming actionSet groups to identified SGroups with an id composed of &lt;menu.id&gt;-&lt;group.id&gt;.  This allows the navigate group1 to be distinct from the search group1.

PW

This will be continued on in 3.3

PW

We took a different path
As of now 'LATER' and 'REMIND' resolutions are no longer supported.
Please reopen this bug if it is still valid for you.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="129592" />
    <CreationDate amount="2006-02-27 11:15:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="UI" />
    <Version amount="3.2" />
    <rep_platform amount="All" />
    <op_sys amount="All" />
    <priority amount="P4" />
    <bug_severity amount="enhancement" />
    <Summery>[Commands] handlers: Add state to ActionDelegateHandlerProxy</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="WONTFIX" />
    <WithStack>The ActionDelegateHandlerProxy's implementation for handler state is currently a stub.  This will cause problems when placing check boxes, label retarget actions and radio buttons in the menus.
Moving Dougs bugs
We went in a different direction
PW</WithStack>
    <WithOutStack>The ActionDelegateHandlerProxy's implementation for handler state is currently a stub.  This will cause problems when placing check boxes, label retarget actions and radio buttons in the menus.
Moving Dougs bugs
We went in a different direction
PW</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="129593" />
    <CreationDate amount="2006-02-27 11:15:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="UI" />
    <Version amount="3.2" />
    <rep_platform amount="All" />
    <op_sys amount="All" />
    <priority amount="P4" />
    <bug_severity amount="enhancement" />
    <Summery>[Commands] state: Mechanism to assign a radio group id</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="WONTFIX" />
    <WithStack>A mechanism is required to select a radio group id when generating commands from the legacy action-based extension points.
Moving Dougs bugs
We went in a different direction
PW</WithStack>
    <WithOutStack>A mechanism is required to select a radio group id when generating commands from the legacy action-based extension points.
Moving Dougs bugs
We went in a different direction
PW</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="129594" />
    <CreationDate amount="2006-02-27 11:15:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="UI" />
    <Version amount="3.2" />
    <rep_platform amount="All" />
    <op_sys amount="All" />
    <priority amount="P1" />
    <bug_severity amount="enhancement" />
    <Summery>[Commands] help: Read help context id from legacy extension points</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>The help context identifier needs to be read from legacy action-based extension points.
Fixed in CVS.</WithStack>
    <WithOutStack>The help context identifier needs to be read from legacy action-based extension points.
Fixed in CVS.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="129595" />
    <CreationDate amount="2006-02-27 11:15:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="UI" />
    <Version amount="3.2" />
    <rep_platform amount="All" />
    <op_sys amount="All" />
    <priority amount="P3" />
    <bug_severity amount="enhancement" />
    <Summery>[Commands] handlers: overrideActionId from legacy extensions</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="NEW" />
    <resolution amount="" />
    <WithStack>Need to decide on a policy for handling overrideActionId from legacy action-based extensions.
Moving Dougs bugs
We've pretty well decided that this idea won't be in the new API, and we will just need to make sure our legacy converter can handle it.
PW

These seem like RetargetActions poor cousin for popup menus.  With limited conversion in 3.3 we can look at this in 3.4
PW

Updated as per http://wiki.eclipse.org/Platform_UI/Bug_Triage
PW

I'd like to look at this as a last piece of the legacy object contributions to commands work.

PW</WithStack>
    <WithOutStack>Need to decide on a policy for handling overrideActionId from legacy action-based extensions.
Moving Dougs bugs
We've pretty well decided that this idea won't be in the new API, and we will just need to make sure our legacy converter can handle it.
PW

These seem like RetargetActions poor cousin for popup menus.  With limited conversion in 3.3 we can look at this in 3.4
PW

Updated as per http://wiki.eclipse.org/Platform_UI/Bug_Triage
PW

I'd like to look at this as a last piece of the legacy object contributions to commands work.

PW</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="129596" />
    <CreationDate amount="2006-02-27 11:15:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="UI" />
    <Version amount="3.2" />
    <rep_platform amount="All" />
    <op_sys amount="All" />
    <priority amount="P4" />
    <bug_severity amount="enhancement" />
    <Summery>[Commands] handlers: Add support for the various legacy enablement mechanisms</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="VERIFIED" />
    <resolution amount="FIXED" />
    <WithStack>The various legacy filters for enablement mechanisms.  For example, the "enablement" element.
Moving Dougs bugs
I think they're covered:
objectClass is covered by instanceof and adapt
nameFilter is covered by a core.resources property tester
objectState is also covered by property testers
pluginState is covered by a Platform property tester

PW

Wow, verified in I20070320-1800 with these 2 handy pieces of XML:

   &lt;menuContribution
         locationURI="popup:org.eclipse.ui.popup.any"&gt;
      &lt;command
            commandId="org.eclipse.ui.help.aboutAction"
            label="AntPopup"
            style="push"&gt;
         &lt;visibleWhen
               checkEnabled="false"&gt;
            &lt;reference
                  definitionId="z.ex.about.antFile.objectContribution"&gt;
            &lt;/reference&gt;
         &lt;/visibleWhen&gt;
      &lt;/command&gt;
   &lt;/menuContribution&gt;

&lt;extension
      point="org.eclipse.core.expressions.definitions"&gt;
   &lt;definition
         id="z.ex.about.antFile"&gt;
      &lt;and&gt;
         &lt;count
               value="+"&gt;
         &lt;/count&gt;
         &lt;iterate
               operator="and"&gt;
            &lt;adapt
                  type="org.eclipse.core.resources.IFile"&gt;
               &lt;test
                     property="org.eclipse.core.resources.name"
                     value="*.xml"&gt;
               &lt;/test&gt;
               &lt;test
                     property="org.eclipse.core.resources.contentTypeId"
                     value="org.eclipse.ant.core.antBuildFile"&gt;
               &lt;/test&gt;
            &lt;/adapt&gt;
         &lt;/iterate&gt;
      &lt;/and&gt;
   &lt;/definition&gt;
   &lt;definition
         id="z.ex.about.antFile.objectContribution"&gt;
            &lt;or&gt;
               &lt;with
                     variable="activeMenuSelection"&gt;
                  &lt;reference
                        definitionId="z.ex.about.antFile"&gt;
                  &lt;/reference&gt;
               &lt;/with&gt;
               &lt;with
                     variable="activeMenuEditorInput"&gt;
                  &lt;reference
                        definitionId="z.ex.about.antFile"&gt;
                  &lt;/reference&gt;
               &lt;/with&gt;
            &lt;/or&gt;
   &lt;/definition&gt;
&lt;/extension&gt;</WithStack>
    <WithOutStack>The various legacy filters for enablement mechanisms.  For example, the "enablement" element.
Moving Dougs bugs
I think they're covered:
objectClass is covered by instanceof and adapt
nameFilter is covered by a core.resources property tester
objectState is also covered by property testers
pluginState is covered by a Platform property tester

PW

Wow, verified in I20070320-1800 with these 2 handy pieces of XML:

   &lt;menuContribution
         locationURI="popup:org.eclipse.ui.popup.any"&gt;
      &lt;command
            commandId="org.eclipse.ui.help.aboutAction"
            label="AntPopup"
            style="push"&gt;
         &lt;visibleWhen
               checkEnabled="false"&gt;
            &lt;reference
                  definitionId="z.ex.about.antFile.objectContribution"&gt;
            &lt;/reference&gt;
         &lt;/visibleWhen&gt;
      &lt;/command&gt;
   &lt;/menuContribution&gt;

&lt;extension
      point="org.eclipse.core.expressions.definitions"&gt;
   &lt;definition
         id="z.ex.about.antFile"&gt;
      &lt;and&gt;
         &lt;count
               value="+"&gt;
         &lt;/count&gt;
         &lt;iterate
               operator="and"&gt;
            &lt;adapt
                  type="org.eclipse.core.resources.IFile"&gt;
               &lt;test
                     property="org.eclipse.core.resources.name"
                     value="*.xml"&gt;
               &lt;/test&gt;
               &lt;test
                     property="org.eclipse.core.resources.contentTypeId"
                     value="org.eclipse.ant.core.antBuildFile"&gt;
               &lt;/test&gt;
            &lt;/adapt&gt;
         &lt;/iterate&gt;
      &lt;/and&gt;
   &lt;/definition&gt;
   &lt;definition
         id="z.ex.about.antFile.objectContribution"&gt;
            &lt;or&gt;
               &lt;with
                     variable="activeMenuSelection"&gt;
                  &lt;reference
                        definitionId="z.ex.about.antFile"&gt;
                  &lt;/reference&gt;
               &lt;/with&gt;
               &lt;with
                     variable="activeMenuEditorInput"&gt;
                  &lt;reference
                        definitionId="z.ex.about.antFile"&gt;
                  &lt;/reference&gt;
               &lt;/with&gt;
            &lt;/or&gt;
   &lt;/definition&gt;
&lt;/extension&gt;</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="129597" />
    <CreationDate amount="2006-02-27 11:15:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="UI" />
    <Version amount="3.2" />
    <rep_platform amount="All" />
    <op_sys amount="All" />
    <priority amount="P5" />
    <bug_severity amount="enhancement" />
    <Summery>[Contributions] [Commands] Share the handler when reading a legacy pulldown action</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="ASSIGNED" />
    <resolution amount="" />
    <WithStack>The legacy pulldown action delegates must be converted into an IWidget (to be placed in the menus and tool bars), and into an IHandler (for execution as a command).  These two instances need to be shared.
Moving Dougs bugs
There are currently no plans to work on this feature.

PW

Changes requested on bug 193523</WithStack>
    <WithOutStack>The legacy pulldown action delegates must be converted into an IWidget (to be placed in the menus and tool bars), and into an IHandler (for execution as a command).  These two instances need to be shared.
Moving Dougs bugs
There are currently no plans to work on this feature.

PW

Changes requested on bug 193523</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="129598" />
    <CreationDate amount="2006-02-27 11:15:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="UI" />
    <Version amount="3.2" />
    <rep_platform amount="All" />
    <op_sys amount="All" />
    <priority amount="P3" />
    <bug_severity amount="enhancement" />
    <Summery>[Contributions] [Commands] Legacy visibility criteria should be converted into a visibleWhen expression</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="ASSIGNED" />
    <resolution amount="" />
    <WithStack>When reading legacy action-based extensions, the various visibility criteria should be converted into visibleWhen and activeWhen expressions.  For example:
+ nameFilter
+ adaptable
+ filter
+ objectClass
Moving Dougs bugs
There are currently no plans to work on this feature.

PW

Changes requested on bug 193523</WithStack>
    <WithOutStack>When reading legacy action-based extensions, the various visibility criteria should be converted into visibleWhen and activeWhen expressions.  For example:
+ nameFilter
+ adaptable
+ filter
+ objectClass
Moving Dougs bugs
There are currently no plans to work on this feature.

PW

Changes requested on bug 193523</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="129599" />
    <CreationDate amount="2006-02-27 11:17:00 -0500" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="UI" />
    <Version amount="3.2" />
    <rep_platform amount="All" />
    <op_sys amount="All" />
    <priority amount="P1" />
    <bug_severity amount="normal" />
    <Summery>Mark the org.eclipse.ui.menus extension point as experimental</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="VERIFIED" />
    <resolution amount="FIXED" />
    <WithStack>The org.eclipse.ui.menus extension point will only be partly functional for 3.2.  As such, it should be marked as experimental.

This is related to the work on Bug 36968.
McQ: May I have +1 to mark this extension point as experimental/provisional for 3.2?
MVM: Do you have an opinion on this?

yes, I'd like to see some more background as to why
The extension point does not currently have any effect.  Most of the API is already marked as provisional for 3.2.  At best, I would expect that this extension point will be capable of handling trim contributions and the top-level menus for 3.2.  There is already some confusion in the community as to whether this extension point is expected to to work.  It would be nice to provide a clear message (namely, no).

The only unwanted side effect would be that developers trying to contribute trim would be using a provisional extension point.  The programmatic API for trim would be final, but the extension point would be provisional.  I feel this is acceptable for 3.2.
OK, but I thought there was some discussion happening to see what it would take for this 'not' to be the case, so I feel like we are putting the cart before the horse
Eric can you confirm/follow up to make sure this happened

Mvm, can you clue me as to what  should be looking for; is there a standard mechanism that we use to tag extensions as 'provisional'?

I'll take a look tomorrow...

Also changing the target milestone...


Fix in &gt;20060424.

Removed refereces in the ISV and updated the 'menus.exsd' documentation to reflect eh partial nature of the current implementation.

The only classes in 'org.eclipse.menus' are those necessary for 'trim' contributions.


Verified in 20060425-0010.</WithStack>
    <WithOutStack>The org.eclipse.ui.menus extension point will only be partly functional for 3.2.  As such, it should be marked as experimental.

This is related to the work on Bug 36968.
McQ: May I have +1 to mark this extension point as experimental/provisional for 3.2?
MVM: Do you have an opinion on this?

yes, I'd like to see some more background as to why
The extension point does not currently have any effect.  Most of the API is already marked as provisional for 3.2.  At best, I would expect that this extension point will be capable of handling trim contributions and the top-level menus for 3.2.  There is already some confusion in the community as to whether this extension point is expected to to work.  It would be nice to provide a clear message (namely, no).

The only unwanted side effect would be that developers trying to contribute trim would be using a provisional extension point.  The programmatic API for trim would be final, but the extension point would be provisional.  I feel this is acceptable for 3.2.
OK, but I thought there was some discussion happening to see what it would take for this 'not' to be the case, so I feel like we are putting the cart before the horse
Eric can you confirm/follow up to make sure this happened

Mvm, can you clue me as to what  should be looking for; is there a standard mechanism that we use to tag extensions as 'provisional'?

I'll take a look tomorrow...

Also changing the target milestone...


Fix in &gt;20060424.

Removed refereces in the ISV and updated the 'menus.exsd' documentation to reflect eh partial nature of the current implementation.

The only classes in 'org.eclipse.menus' are those necessary for 'trim' contributions.


Verified in 20060425-0010.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="129600" />
    <CreationDate amount="2006-02-27 11:30:00 -0500" />
    <DupId amount="" />
    <classification amount="Tools" />
    <Product amount="TPTP Release Engineering" />
    <component amount="Build" />
    <Version amount="4.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows 2000" />
    <priority amount="P3" />
    <bug_severity amount="major" />
    <Summery>Error when unzipping TPTP SDK package from 200602262249 build</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>I unzipped the TPTP 4.2 SDK package from the 200602262249 build win WinZip and it generated the following error message:

skipping file:  unable to create a sensible filename out of f:\tptp-4.2-20060226_2249\eclipse\plugins\org.eclipse.tptp.monitoring.report.birt.source_4.2.0.v200602262249\src\org.eclipse.tptp.monitoring.report.birt.ui_4.2.0.v200602262249\src\org\eclipse\tptp\monitoring\report\birt\ui\internal\ReportHTMLLogWizardSelectionPage.java

The remainder of the SDK was unzipped correctly.
The source files should not be included in the build.properties of plugins.  A src.zip is generated in the build to include the source files. The fix for this problem is easy.  I will do it in i2, unless a rebuild is required in i1.  
Used this bug to clean up all build.properties.  Only src.zip will be included in source plugins, which are generated at build time. 
Files changed:
monitoring/org.eclipse.hyades.logging.parsers/build.properties
platform/org.eclipse.hyades.execution/build.properties
platform/org.eclipse.tptp.platform.agentcontroller.doc.isv/build.properties
platform/org.eclipse.tptp.platform.agentcontroller.doc.user/build.properties
platform/org.eclipse.tptp.platform.agentcontroller.new.doc.user/build.properties
platform/org.eclipse.tptp.platform.analysis.codereview.cpp/build.properties
platform/org.eclipse.tptp.platform.analysis.codereview.cpp.rules/build.properties
platform/org.eclipse.tptp.platform.analysis.core/build.properties
platform/org.eclipse.tptp.platform.analysis.examples/build.properties
platform/org.eclipse.tptp.platform.analysis.metrics/build.properties
platform/org.eclipse.tptp.platform.analysis.static.doc.user/build.properties
platform/org.eclipse.tptp.platform.analysis.static.engine/build.properties
platform/org.eclipse.tptp.platform.analysis.static.engine.ui/build.properties
platform/org.eclipse.tptp.platform.analysis.static.util/build.properties
platform/org.eclipse.tptp.platform.analysis.static.util.ui/build.properties
test/org.eclipse.hyades.test.doc.user/build.properties
test/org.eclipse.tptp.test.report.birt.ui/build.properties
trace/org.eclipse.tptp.trace.report.birt.ui/build.properties
*** Bug 132322 has been marked as a duplicate of this bug. ***
As of TPTP 4.6.0, TPTP is in maintenance mode and focusing on improving quality by resolving relevant enhancements/defects and increasing test coverage through test creation, automation, Build Verification Tests (BVTs), and expanded run-time execution. As part of the TPTP Bugzilla housecleaning process (see http://wiki.eclipse.org/Bugzilla_Housecleaning_Processes), this enhancement/defect is verified/closed by the Project Lead since this originator of this enhancement/defect has an inactive Bugzilla account and considered to be fixed. If this enhancement/defect is still unresolved and reproducible in the latest TPTP release (http://www.eclipse.org/tptp/home/downloads/), please re-open.</WithStack>
    <WithOutStack>I unzipped the TPTP 4.2 SDK package from the 200602262249 build win WinZip and it generated the following error message:

skipping file:  unable to create a sensible filename out of f:\tptp-4.2-20060226_2249\eclipse\plugins\org.eclipse.tptp.monitoring.report.birt.source_4.2.0.v200602262249\src\org.eclipse.tptp.monitoring.report.birt.ui_4.2.0.v200602262249\src\org\eclipse\tptp\monitoring\report\birt\ui\internal\ReportHTMLLogWizardSelectionPage.java

The remainder of the SDK was unzipped correctly.
The source files should not be included in the build.properties of plugins.  A src.zip is generated in the build to include the source files. The fix for this problem is easy.  I will do it in i2, unless a rebuild is required in i1.  
Used this bug to clean up all build.properties.  Only src.zip will be included in source plugins, which are generated at build time. 
Files changed:
monitoring/org.eclipse.hyades.logging.parsers/build.properties
platform/org.eclipse.hyades.execution/build.properties
platform/org.eclipse.tptp.platform.agentcontroller.doc.isv/build.properties
platform/org.eclipse.tptp.platform.agentcontroller.doc.user/build.properties
platform/org.eclipse.tptp.platform.agentcontroller.new.doc.user/build.properties
platform/org.eclipse.tptp.platform.analysis.codereview.cpp/build.properties
platform/org.eclipse.tptp.platform.analysis.codereview.cpp.rules/build.properties
platform/org.eclipse.tptp.platform.analysis.core/build.properties
platform/org.eclipse.tptp.platform.analysis.examples/build.properties
platform/org.eclipse.tptp.platform.analysis.metrics/build.properties
platform/org.eclipse.tptp.platform.analysis.static.doc.user/build.properties
platform/org.eclipse.tptp.platform.analysis.static.engine/build.properties
platform/org.eclipse.tptp.platform.analysis.static.engine.ui/build.properties
platform/org.eclipse.tptp.platform.analysis.static.util/build.properties
platform/org.eclipse.tptp.platform.analysis.static.util.ui/build.properties
test/org.eclipse.hyades.test.doc.user/build.properties
test/org.eclipse.tptp.test.report.birt.ui/build.properties
trace/org.eclipse.tptp.trace.report.birt.ui/build.properties
*** Bug 132322 has been marked as a duplicate of this bug. ***
As of TPTP 4.6.0, TPTP is in maintenance mode and focusing on improving quality by resolving relevant enhancements/defects and increasing test coverage through test creation, automation, Build Verification Tests (BVTs), and expanded run-time execution. As part of the TPTP Bugzilla housecleaning process (see http://wiki.eclipse.org/Bugzilla_Housecleaning_Processes), this enhancement/defect is verified/closed by the Project Lead since this originator of this enhancement/defect has an inactive Bugzilla account and considered to be fixed. If this enhancement/defect is still unresolved and reproducible in the latest TPTP release (http://www.eclipse.org/tptp/home/downloads/), please re-open.</WithOutStack>
  </Bug>
</infozilla-output>

