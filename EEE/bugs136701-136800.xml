<?xml version="1.0" encoding="UTF-8"?>
<infozilla-output>
  <Bug>
    <BugId amount="136701" />
    <CreationDate amount="2006-04-13 14:03:00 -0400" />
    <DupId amount="" />
    <classification amount="Modeling" />
    <Product amount="GMF-Tooling" />
    <component amount="Core" />
    <Version amount="unspecified" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>[GMFGen] GenDiagramElementTarget should allow to target more then one element</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>Occasionally, there are few GenChildNodes for single NodeMapping, thus, we should use all of them as target for our audits/metrics.

The reason we may get few GenChildNodes for same mapping is described at:
https://bugs.eclipse.org/bugs/show_bug.cgi?id=129552

Currently, DGMT was updated to use only first GenChildNode. It should work unless we face models described in the aforementioned request. There's FIXME comment in DGMT#createRuleTarget method pointing to the location to fix.
commited
[GMF Restructure] Bug 319140 : product GMF and component
Models was the original product and component for this bug</WithStack>
    <WithOutStack>Occasionally, there are few GenChildNodes for single NodeMapping, thus, we should use all of them as target for our audits/metrics.

The reason we may get few GenChildNodes for same mapping is described at:
https://bugs.eclipse.org/bugs/show_bug.cgi?id=129552

Currently, DGMT was updated to use only first GenChildNode. It should work unless we face models described in the aforementioned request. There's FIXME comment in DGMT#createRuleTarget method pointing to the location to fix.
commited
[GMF Restructure] Bug 319140 : product GMF and component
Models was the original product and component for this bug</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="136702" />
    <CreationDate amount="2006-04-13 14:09:00 -0400" />
    <DupId amount="" />
    <classification amount="Modeling" />
    <Product amount="GMF-Tooling" />
    <component amount="Core" />
    <Version amount="1.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="enhancement" />
    <Summery>Provide code generation targeting pure-GEF (no gmf.runtime) -- Part I</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="10">
        <Lines>
          <Line>- Require no org.eclipse.gmf.runtime.* plugins except org.eclipse.gmf.runtime.notation and org.eclipse.gmf.runtime.notation.edit;</Line>
          <Line>- Use the same .gmfgen as input;</Line>
          <Line>- Be able to create all types of nodes, links as well as delete them;</Line>
          <Line>- Display direct-editable labels;</Line>
          <Line>- Provide property sheet to edit at least the semantic properties of elements;</Line>
          <Line>- Support compartments and be otherwise compatible with gmfgraph.</Line>
          <Line>Created attachment 38538</Line>
          <Line>Fixes the subj</Line>
          <Line>Created attachment 38545</Line>
          <Line>The UI part of the fix</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>In terms of this Part I, the generated editor should:
- Require no org.eclipse.gmf.runtime.* plugins except org.eclipse.gmf.runtime.notation and org.eclipse.gmf.runtime.notation.edit;
- Use the same .gmfgen as input;
- Be able to create all types of nodes, links as well as delete them;
- Display direct-editable labels;
- Provide property sheet to edit at least the semantic properties of elements;
- Support compartments and be otherwise compatible with gmfgraph.
Created attachment 38538
Fixes the subj
Created attachment 38545
The UI part of the fix

A separate plugin that provides an action to generate a pure-GEF diagram plugin from a .gmfgen file of the same format as the one used for runtime-based code generation.
First patch, oeg.codegen.lite plug-in, reviewed and committed.
Second patch, UI, was refactored and committed. We are going to include this functionality as part of gmf.sdk.experimental feature, which *for now* will  include codegen.ui and rest of SDK, thus, we could reuse original ExecuteTemplatesAction instead of copying it.
[GMF Restructure] Bug 319140 : product GMF and component
Generation was the original product and component for this bug</WithStack>
    <WithOutStack>In terms of this Part I, the generated editor should:
- Require no org.eclipse.gmf.runtime.* plugins except org.eclipse.gmf.runtime.notation and org.eclipse.gmf.runtime.notation.edit;
- Use the same .gmfgen as input;
- Be able to create all types of nodes, links as well as delete them;
- Display direct-editable labels;
- Provide property sheet to edit at least the semantic properties of elements;
- Support compartments and be otherwise compatible with gmfgraph.
Created attachment 38538
Fixes the subj
Created attachment 38545
The UI part of the fix

A separate plugin that provides an action to generate a pure-GEF diagram plugin from a .gmfgen file of the same format as the one used for runtime-based code generation.
First patch, oeg.codegen.lite plug-in, reviewed and committed.
Second patch, UI, was refactored and committed. We are going to include this functionality as part of gmf.sdk.experimental feature, which *for now* will  include codegen.ui and rest of SDK, thus, we could reuse original ExecuteTemplatesAction instead of copying it.
[GMF Restructure] Bug 319140 : product GMF and component
Generation was the original product and component for this bug</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="136703" />
    <CreationDate amount="2006-04-13 14:14:00 -0400" />
    <DupId amount="56964" />
    <classification amount="Eclipse" />
    <Product amount="JDT" />
    <component amount="Text" />
    <Version amount="3.2" />
    <rep_platform amount="Macintosh" />
    <op_sys amount="Mac OS X - Carbon (unsup.)" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>[content assist] Content assist will open underneath the Dock on Mac OS X</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="DUPLICATE" />
    <WithStack>On Mac OS X, Content Assist will open partially underneath the Dock:

+-------------------------+
|                         |
|           +----+        |
|           | CA |        |
|  +-------------------+  |
|  |        :....:     |  |
+-------------------------+

My workaround is to set the Dock to hidden, although I prefer it shown at all times. See also related bug 135381.

Environment is as follows:

Eclipse SDK
Version: 3.2.0
Build id: I20060307-1315

java version "1.5.0_05"
Java(TM) 2 Runtime Environment, Standard Edition (build 1.5.0_05-84)
Java HotSpot(TM) Client VM (build 1.5.0_05-51, mixed mode, sharing)

Darwin MacBookPro.local 8.6.1 Darwin Kernel Version 8.6.1: Tue Mar  7 16:55:45
PST 2006; root:xnu-792.9.22.obj~1/RELEASE_I386 i386 i386


*** This bug has been marked as a duplicate of 56964 ***
Changing OS from Mac OS to Mac OS X as per bug 185991</WithStack>
    <WithOutStack>On Mac OS X, Content Assist will open partially underneath the Dock:

+-------------------------+
|                         |
|           +----+        |
|           | CA |        |
|  +-------------------+  |
|  |        :....:     |  |
+-------------------------+

My workaround is to set the Dock to hidden, although I prefer it shown at all times. See also related bug 135381.

Environment is as follows:

Eclipse SDK
Version: 3.2.0
Build id: I20060307-1315

java version "1.5.0_05"
Java(TM) 2 Runtime Environment, Standard Edition (build 1.5.0_05-84)
Java HotSpot(TM) Client VM (build 1.5.0_05-51, mixed mode, sharing)

Darwin MacBookPro.local 8.6.1 Darwin Kernel Version 8.6.1: Tue Mar  7 16:55:45
PST 2006; root:xnu-792.9.22.obj~1/RELEASE_I386 i386 i386


*** This bug has been marked as a duplicate of 56964 ***
Changing OS from Mac OS to Mac OS X as per bug 185991</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="136704" />
    <CreationDate amount="2006-04-13 14:17:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="Text" />
    <Version amount="3.1" />
    <rep_platform amount="PC" />
    <op_sys amount="Linux-GTK" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>CTRL-SHIFT-(digit) on Linux leads to strange temporary quasi-hyperlink</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="INVALID" />
    <WithStack>If I open a file in a Text Editor (using the Navigator's context menu Open With &gt; Text Editor) and subsequently holding down CTRL-SHIFT-1 (or 2,3,4,5,6,7,8,9...but, not 0 initially), up to a 5 digit "hyperlink"-looking string is entered (consisting only of digits I've typed while holding CTRL-SHIFT down).  When I release the CTRL-SHIFT, the "hyperlink" disappears.

I don't know if this is a bug or if I'm somehow using existing functionality?  Is CTRL-SHIFT-(digit) an accelerator already??  Should plugin developers avoid using CTRL-SHIFT-(digit) as accelerators?
What you see is a special UTF-8 input mode on Linux and Unix specified by ISO 14755.</WithStack>
    <WithOutStack>If I open a file in a Text Editor (using the Navigator's context menu Open With &gt; Text Editor) and subsequently holding down CTRL-SHIFT-1 (or 2,3,4,5,6,7,8,9...but, not 0 initially), up to a 5 digit "hyperlink"-looking string is entered (consisting only of digits I've typed while holding CTRL-SHIFT down).  When I release the CTRL-SHIFT, the "hyperlink" disappears.

I don't know if this is a bug or if I'm somehow using existing functionality?  Is CTRL-SHIFT-(digit) an accelerator already??  Should plugin developers avoid using CTRL-SHIFT-(digit) as accelerators?
What you see is a special UTF-8 input mode on Linux and Unix specified by ISO 14755.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="136705" />
    <CreationDate amount="2006-04-13 14:19:00 -0400" />
    <DupId amount="" />
    <classification amount="WebTools" />
    <Product amount="WTP Webservices" />
    <component amount="jst.ws" />
    <Version amount="1.5" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows 2000" />
    <priority amount="P3" />
    <bug_severity amount="major" />
    <Summery>Exception with web service wizards when no server runtime installed</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="6">
        <Lines>
          <Line>1. The default Web service runtime does not require a server</Line>
          <Line>and</Line>
          <Line>2. The default project exists in the workspace.</Line>
          <Line>Rupam, just a guess that this re-emerged with the revamped page 1. If memory serves, you handled this last time, so assigned to you.</Line>
          <Line>Created attachment 39086</Line>
          <Line>Multi-plugin patch for org.eclipse.jst.ws.conusmption.ui and org.eclipse.jst.ws.creation.ui</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>Bug 119111 appears to have re-emerged. Launch the Web service/client wizard with no server runtimes installed. The wizard page comes up blank and Exceptions are thrown in the console. We should be allowing page 1 to appear with an empty server selection (with appropriate warnings) when:
1. The default Web service runtime does not require a server
and
2. The default project exists in the workspace.
Rupam, just a guess that this re-emerged with the revamped page 1. If memory serves, you handled this last time, so assigned to you.
Created attachment 39086
Multi-plugin patch for org.eclipse.jst.ws.conusmption.ui and org.eclipse.jst.ws.creation.ui

Multi-plugin patch 1 of 1. This patch contains fixes for both bug 136705 and bug 136158.
The attached patch is ready to be committed. It contains fixes for both this bug and bug 136158.
Patch reviewed and committed.  Will release later.
Released to WTP 1.5 as v200604202152.
Verified.
Closing.</WithStack>
    <WithOutStack>Bug 119111 appears to have re-emerged. Launch the Web service/client wizard with no server runtimes installed. The wizard page comes up blank and Exceptions are thrown in the console. We should be allowing page 1 to appear with an empty server selection (with appropriate warnings) when:
1. The default Web service runtime does not require a server
and
2. The default project exists in the workspace.
Rupam, just a guess that this re-emerged with the revamped page 1. If memory serves, you handled this last time, so assigned to you.
Created attachment 39086
Multi-plugin patch for org.eclipse.jst.ws.conusmption.ui and org.eclipse.jst.ws.creation.ui

Multi-plugin patch 1 of 1. This patch contains fixes for both bug 136705 and bug 136158.
The attached patch is ready to be committed. It contains fixes for both this bug and bug 136158.
Patch reviewed and committed.  Will release later.
Released to WTP 1.5 as v200604202152.
Verified.
Closing.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="136706" />
    <CreationDate amount="2006-04-13 14:22:00 -0400" />
    <DupId amount="" />
    <classification amount="Modeling" />
    <Product amount="GMF-Runtime" />
    <component amount="General" />
    <Version amount="unspecified" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="critical" />
    <Summery>gmf Element Selection Service - requesting an option that will run service apis without progress monitor dialog</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>-when using the service and calling the method getMatchingObjects(input), a progress monitor is displayed 

-an option to use the service without the progress monitor would allow for a broader usage of the service (for example hooking it up to be used with content assist)
The service should not be displaying a progress monitor dialog. It has been fixed in ElementSelectionList
[target cleanup] 1.0 M6 was the original target milestone for this bug
[GMF Restructure] Bug 319140 : product GMF and component
Runtime Common was the original product and component for this bug</WithStack>
    <WithOutStack>-when using the service and calling the method getMatchingObjects(input), a progress monitor is displayed 

-an option to use the service without the progress monitor would allow for a broader usage of the service (for example hooking it up to be used with content assist)
The service should not be displaying a progress monitor dialog. It has been fixed in ElementSelectionList
[target cleanup] 1.0 M6 was the original target milestone for this bug
[GMF Restructure] Bug 319140 : product GMF and component
Runtime Common was the original product and component for this bug</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="136707" />
    <CreationDate amount="2006-04-13 14:23:00 -0400" />
    <DupId amount="" />
    <classification amount="Tools" />
    <Product amount="AspectJ" />
    <component amount="Ant" />
    <Version amount="unspecified" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="enhancement" />
    <Summery>iajc should print summary like javac</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>The iajc ant task should produce a summary of what it is doing, like the javac task does:

[javac] Compiling 189 source files to C:\project\classes
Thanks for the bug.  iajc will print the full ajc command line when in verbose mode.  The problem with trying to calculate a summary is that the iajc task does not enumerate files the way javac does - there could be any number of arg files, source roots, source files, etc. Reopen this if verbose isn't working for you or you have a proposal for useful info-level output (I thought perhaps when forking...).
How about just printing a count of the number of top level input items (directories, inpath entries, source roots, etc.)? Verbose output is good for debugging, but it's helpful to see some summary of how much is being compiled in a batch build without so much information.
Fixed in AjcTask.java:1.55 with new logCommand option that emits the entire command to INFO (verbose mode does the same, but also adds all other verbose messages).  No summary is correct in the presence of command editors, so the actual command is the best option absent heinous code to parse and summarize the command as edited.  I also left the command elements in [array, mode] to make parsing easier if need be.</WithStack>
    <WithOutStack>The iajc ant task should produce a summary of what it is doing, like the javac task does:

[javac] Compiling 189 source files to C:\project\classes
Thanks for the bug.  iajc will print the full ajc command line when in verbose mode.  The problem with trying to calculate a summary is that the iajc task does not enumerate files the way javac does - there could be any number of arg files, source roots, source files, etc. Reopen this if verbose isn't working for you or you have a proposal for useful info-level output (I thought perhaps when forking...).
How about just printing a count of the number of top level input items (directories, inpath entries, source roots, etc.)? Verbose output is good for debugging, but it's helpful to see some summary of how much is being compiled in a batch build without so much information.
Fixed in AjcTask.java:1.55 with new logCommand option that emits the entire command to INFO (verbose mode does the same, but also adds all other verbose messages).  No summary is correct in the presence of command editors, so the actual command is the best option absent heinous code to parse and summarize the command as edited.  I also left the command elements in [array, mode] to make parsing easier if need be.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="136708" />
    <CreationDate amount="2006-04-13 14:25:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="User Assistance" />
    <Version amount="3.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>[CheatSheet] Need Documentation on parameters for a cheatsheet task in a composite cheat sheet</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>The documentation for a composite cheat sheet needs to be updated to include a description of the parameters which are valid for a cheat sheet task.
This is a documentation only change, it has been committed to the HEAD.</WithStack>
    <WithOutStack>The documentation for a composite cheat sheet needs to be updated to include a description of the parameters which are valid for a cheat sheet task.
This is a documentation only change, it has been committed to the HEAD.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="136709" />
    <CreationDate amount="2006-04-13 14:25:00 -0400" />
    <DupId amount="" />
    <classification amount="Modeling" />
    <Product amount="GMF-Runtime" />
    <component amount="General" />
    <Version amount="unspecified" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>gmf Element Selection Service - add a PRIMITIVES option to ElementSelectionScope</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>-this is a request for an additional option in ElementSelectionScope
-this PRIMITIVES option will allow for further refinement of the elements returned from the service
Added to the list.
[target cleanup] 1.0 M6 was the original target milestone for this bug
[GMF Restructure] Bug 319140 : product GMF and component
Runtime Common was the original product and component for this bug</WithStack>
    <WithOutStack>-this is a request for an additional option in ElementSelectionScope
-this PRIMITIVES option will allow for further refinement of the elements returned from the service
Added to the list.
[target cleanup] 1.0 M6 was the original target milestone for this bug
[GMF Restructure] Bug 319140 : product GMF and component
Runtime Common was the original product and component for this bug</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="136710" />
    <CreationDate amount="2006-04-13 14:26:00 -0400" />
    <DupId amount="73784" />
    <classification amount="Eclipse" />
    <Product amount="JDT" />
    <component amount="Core" />
    <Version amount="3.0.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>An internal error occurred during: "Java Search"</Summery>
    <Patches amount="0" />
    <Stacktraces amount="1">
      <Stacktrace timestamp="1437330716118">
        <Exception>java.lang.StringIndexOutOfBoundsException</Exception>
        <Reason />
        <Frames>
          <Frame depth="0">java.lang.String.substring(String.java:1015)</Frame>
        </Frames>
      </Stacktrace>
    </Stacktraces>
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="5">
        <Lines>
          <Line>- Search &gt; Java...</Line>
          <Line>- search string "system"</Line>
          <Line>- search for "Type"</Line>
          <Line>- Limit to "All Occurrences"</Line>
          <Line>- scope "Workspace"</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="RESOLVED" />
    <resolution amount="DUPLICATE" />
    <WithStack>Getting:
java.lang.StringIndexOutOfBoundsException
	at java.lang.String.substring(String.java:1015)
	at org.eclipse.jdt.internal.core.search.matching.PossibleMatch.getQualifiedName(Unknown Source)
	at org.eclipse.jdt.internal.core.search.matching.PossibleMatch.&lt;init&gt;(Unknown Source)
	at org.eclipse.jdt.internal.core.search.matching.MatchLocator.locateMatches(Unknown Source)
	at org.eclipse.jdt.internal.core.search.JavaSearchParticipant.locateMatches(Unknown Source)
	at org.eclipse.jdt.core.search.SearchEngine.findMatches(Unknown Source)
	at org.eclipse.jdt.core.search.SearchEngine.search(Unknown Source)
	at org.eclipse.jdt.internal.ui.search.JavaSearchQuery.run(Unknown Source)
	at org.eclipse.search2.internal.ui.InternalSearchUI$InternalSearchJob.run(Unknown Source)
	at org.eclipse.core.internal.jobs.Worker.run(Unknown Source)

Instructions:
- Search &gt; Java...          
- search string "system"    
- search for "Type"         
- Limit to "All Occurrences"
- scope "Workspace"         

Testcase available upon request.

This seems to be fixed in Eclipse 3.1 but didn't find any reference of it being fixed.
Please provide test case to help me to reproduce.

In fact I retrieve the bug fixed in 3.1 stream...
Set as duplicate as I think it won't have any new update for 3.0 stream.

*** This bug has been marked as a duplicate of 73784 ***</WithStack>
    <WithOutStack>Getting:

	at org.eclipse.jdt.internal.core.search.matching.PossibleMatch.getQualifiedName(Unknown Source)
	at org.eclipse.jdt.internal.core.search.matching.PossibleMatch.&lt;init&gt;(Unknown Source)
	at org.eclipse.jdt.internal.core.search.matching.MatchLocator.locateMatches(Unknown Source)
	at org.eclipse.jdt.internal.core.search.JavaSearchParticipant.locateMatches(Unknown Source)
	at org.eclipse.jdt.core.search.SearchEngine.findMatches(Unknown Source)
	at org.eclipse.jdt.core.search.SearchEngine.search(Unknown Source)
	at org.eclipse.jdt.internal.ui.search.JavaSearchQuery.run(Unknown Source)
	at org.eclipse.search2.internal.ui.InternalSearchUI$InternalSearchJob.run(Unknown Source)
	at org.eclipse.core.internal.jobs.Worker.run(Unknown Source)

Instructions:
- Search &gt; Java...          
- search string "system"    
- search for "Type"         
- Limit to "All Occurrences"
- scope "Workspace"         

Testcase available upon request.

This seems to be fixed in Eclipse 3.1 but didn't find any reference of it being fixed.
Please provide test case to help me to reproduce.

In fact I retrieve the bug fixed in 3.1 stream...
Set as duplicate as I think it won't have any new update for 3.0 stream.

*** This bug has been marked as a duplicate of 73784 ***</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="136711" />
    <CreationDate amount="2006-04-13 14:33:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="User Assistance" />
    <Version amount="3.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>[CheatSheet] Updated images needed in help page org.eclipse.platform.doc.user/reference/ref-cheatsheets.htm</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>The images in the help page org.eclipse.platform.doc.user/reference/ref-cheatsheets.htm titled "Working with cheat sheets" are outdated and need to be replaced by new and up to date images.
Created attachment 39491
New images

This zip file contains five replacement images which need to go into org.eclipse.platform.doc.user.

This is the first of two attachments, the sencon will be a patch.
Created attachment 39492
Zip file of images

I set the type incorrectly on the last attachment so I'm creating the attachment again. I will also attach a patch.
Created attachment 39493
Patch file

This should be applied together with the images.
Applied both patch and images.</WithStack>
    <WithOutStack>The images in the help page org.eclipse.platform.doc.user/reference/ref-cheatsheets.htm titled "Working with cheat sheets" are outdated and need to be replaced by new and up to date images.
Created attachment 39491
New images

This zip file contains five replacement images which need to go into org.eclipse.platform.doc.user.

This is the first of two attachments, the sencon will be a patch.
Created attachment 39492
Zip file of images

I set the type incorrectly on the last attachment so I'm creating the attachment again. I will also attach a patch.
Created attachment 39493
Patch file

This should be applied together with the images.
Applied both patch and images.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="136712" />
    <CreationDate amount="2006-04-13 14:36:00 -0400" />
    <DupId amount="" />
    <classification amount="WebTools" />
    <Product amount="WTP Webservices" />
    <component amount="jst.ws" />
    <Version amount="1.5" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows 2000" />
    <priority amount="P3" />
    <bug_severity amount="major" />
    <Summery>WSDL selection from WSIL list doesn't work in wizard</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>Entering a WSIL file on the object selection dialog, I see the list of WSDL load but I am unable to select a WSDL from the dialog.  I tried http://www.xmethods.com/inspection.wsil and it loads eventually but I don't seem to be able to choose a WSDL and have it go back to page 1 as my selection.

Kathy thinks this is related to bug 136335 - since the WSDL selection from WSIL relies on the getStatus method in WSDLSelectionWidget.
Regression. Targetted to 1.5 with higher severity.
Created attachment 38830
patch for package: org.eclipse.jst.ws.internal.consumption.ui.widgets

apply patch to package... org.eclipse.jst.ws.internal.consumption.ui.widgets
Kathy - over to you to review/commit
Created attachment 38858
multiple plugin patch - consumption.ui, creation.ui &amp; command.env.ui

applies for 136335, 136712 and 136759
Patch reviewed and committed.  Will release later.
Released to WTP 1.5 as v200604190331.
verified in 0524 build
closing</WithStack>
    <WithOutStack>Entering a WSIL file on the object selection dialog, I see the list of WSDL load but I am unable to select a WSDL from the dialog.  I tried http://www.xmethods.com/inspection.wsil and it loads eventually but I don't seem to be able to choose a WSDL and have it go back to page 1 as my selection.

Kathy thinks this is related to bug 136335 - since the WSDL selection from WSIL relies on the getStatus method in WSDLSelectionWidget.
Regression. Targetted to 1.5 with higher severity.
Created attachment 38830
patch for package: org.eclipse.jst.ws.internal.consumption.ui.widgets

apply patch to package... org.eclipse.jst.ws.internal.consumption.ui.widgets
Kathy - over to you to review/commit
Created attachment 38858
multiple plugin patch - consumption.ui, creation.ui &amp; command.env.ui

applies for 136335, 136712 and 136759
Patch reviewed and committed.  Will release later.
Released to WTP 1.5 as v200604190331.
verified in 0524 build
closing</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="136713" />
    <CreationDate amount="2006-04-13 14:37:00 -0400" />
    <DupId amount="" />
    <classification amount="Tools" />
    <Product amount="CDT" />
    <component amount="cdt-core" />
    <Version amount="3.1" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="enhancement" />
    <Summery>Refactor - Extract local variable</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="3">
      <Enumeration lines="5">
        <Lines>
          <Line>1. Extract Local Variable should not force user to save the file.</Line>
          <Line>2. Selection should be updated after refactoring similar to how it's done in Java.</Line>
          <Line>3. Refactoring of x + y from expression (x + y) / 2 doesn't remove parentheses.</Line>
          <Line>4. Java provides keyboard binding Shift+Alt+L.</Line>
          <Line>5. Java suggests a variable name by default. This is not very important, but nice to have.</Line>
        </Lines>
      </Enumeration>
      <Enumeration lines="19">
        <Lines>
          <Line>1. Extract Local Variable should not force user to save the file.</Line>
          <Line />
          <Line>Agreed, but all C++ refactorings currently do that in RefactoringAction.run().  I filed issue 255092.</Line>
          <Line />
          <Line>2. Selection should be updated after refactoring similar to how it's done in</Line>
          <Line>Java.</Line>
          <Line />
          <Line>That also makes sense, but it appears that the Java support is built into how the Java text editor applies changes.  I filed issue 255093.</Line>
          <Line />
          <Line>3. Refactoring of x + y from expression (x + y) / 2 doesn't remove parentheses.</Line>
          <Line />
          <Line>Fixed.</Line>
          <Line />
          <Line>4. Java provides keyboard binding Shift+Alt+L.</Line>
          <Line />
          <Line>Fixed.</Line>
          <Line />
          <Line>5. Java suggests a variable name by default. This is not very important, but</Line>
          <Line>nice to have.</Line>
        </Lines>
      </Enumeration>
      <Enumeration lines="3">
        <Lines>
          <Line>1.  contains no cryptography;</Line>
          <Line>2.  was developed from scratch, other than working with the other Eclipse code and patterns used in the project being patched; and</Line>
          <Line>3.  is 100% EPL code.</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>I believe that extract local variable is a relatively simple refactoring.

I have seen on the newsgroup questions along the line of how do I use the CDT to do &lt;something&gt;.  I have been thinking of writing an article on the CDT DOM and how to use it.  Extract Local variable can serve as a simple example of how to use the DOM.  I will do this somewhere along the line when I have some time.
I would think that any refactoring beyond rename will require a rewrite engine. We do have a couple of students in the community looking at this.
A rewrite engine would be nice, but I think that the framework we have for rename allows us to specify offset ranges for changing and inserting text into the file directly.  Local variable is restricted to a given method body so it should be doable by text edit.  Some of the larger refactorings may be different.
I just finished an Extract Local Variable refactoring, which is based heavily on the Extract Local Function refactoring in CDT 5.0.  Before I submit it as a patch candidate, which packaging is preferred?

. like the other refactorings, as a org.eclipse.cdt.internal.ui.refactoring.extractlocalvariable package in org.eclipse.cdt.ui, or

. in a separate module.

The code is currently in org.eclipse.cdt.ui, but can be moved out if necessary.

Tom
like the other refactorings is okay.
Created attachment 114863
Proposed implementation for Extract Local Variable

The refactoring code itself is not a big part of this patch, as the rest of it are all the deltas needed to add it as a command, along with unit tests.
(In reply to comment #5)
&gt; Created an attachment (id=114863) [details]
&gt; Proposed implementation for Extract Local Variable
&gt; 
&gt; The refactoring code itself is not a big part of this patch, as the rest of it
&gt; are all the deltas needed to add it as a command, along with unit tests.
&gt; 

The refactoring worked in all cases I tested. Here are few shortcomings that caught my eye:
1. Extract Local Variable should not force user to save the file.
2. Selection should be updated after refactoring similar to how it's done in Java.
3. Refactoring of x + y from expression (x + y) / 2 doesn't remove parentheses.
4. Java provides keyboard binding Shift+Alt+L.
5. Java suggests a variable name by default. This is not very important, but nice to have.

1. Extract Local Variable should not force user to save the file.

Agreed, but all C++ refactorings currently do that in RefactoringAction.run().  I filed issue 255092.

2. Selection should be updated after refactoring similar to how it's done in
Java.

That also makes sense, but it appears that the Java support is built into how the Java text editor applies changes.  I filed issue 255093.

3. Refactoring of x + y from expression (x + y) / 2 doesn't remove parentheses.

Fixed.

4. Java provides keyboard binding Shift+Alt+L.

Fixed.

5. Java suggests a variable name by default. This is not very important, but
nice to have.

Fixed, with new patch file to be posted as soon as testing is complete. 
Created attachment 117807
Proposed Extract Local Variable implementation

Addressed many of Sergey's issues with first implementation.
I've requested an IP review.
This is to confirm that the attached patch being contributed here:

1.  contains no cryptography;
2.  was developed from scratch, other than working with the other Eclipse code and patterns used in the project being patched; and
3.  is 100% EPL code.

Tom
Patch committed.

Fixed in HEAD &gt; 20081123.</WithStack>
    <WithOutStack>I believe that extract local variable is a relatively simple refactoring.

I have seen on the newsgroup questions along the line of how do I use the CDT to do &lt;something&gt;.  I have been thinking of writing an article on the CDT DOM and how to use it.  Extract Local variable can serve as a simple example of how to use the DOM.  I will do this somewhere along the line when I have some time.
I would think that any refactoring beyond rename will require a rewrite engine. We do have a couple of students in the community looking at this.
A rewrite engine would be nice, but I think that the framework we have for rename allows us to specify offset ranges for changing and inserting text into the file directly.  Local variable is restricted to a given method body so it should be doable by text edit.  Some of the larger refactorings may be different.
I just finished an Extract Local Variable refactoring, which is based heavily on the Extract Local Function refactoring in CDT 5.0.  Before I submit it as a patch candidate, which packaging is preferred?

. like the other refactorings, as a org.eclipse.cdt.internal.ui.refactoring.extractlocalvariable package in org.eclipse.cdt.ui, or

. in a separate module.

The code is currently in org.eclipse.cdt.ui, but can be moved out if necessary.

Tom
like the other refactorings is okay.
Created attachment 114863
Proposed implementation for Extract Local Variable

The refactoring code itself is not a big part of this patch, as the rest of it are all the deltas needed to add it as a command, along with unit tests.
(In reply to comment #5)
&gt; Created an attachment (id=114863) [details]
&gt; Proposed implementation for Extract Local Variable
&gt; 
&gt; The refactoring code itself is not a big part of this patch, as the rest of it
&gt; are all the deltas needed to add it as a command, along with unit tests.
&gt; 

The refactoring worked in all cases I tested. Here are few shortcomings that caught my eye:
1. Extract Local Variable should not force user to save the file.
2. Selection should be updated after refactoring similar to how it's done in Java.
3. Refactoring of x + y from expression (x + y) / 2 doesn't remove parentheses.
4. Java provides keyboard binding Shift+Alt+L.
5. Java suggests a variable name by default. This is not very important, but nice to have.

1. Extract Local Variable should not force user to save the file.

Agreed, but all C++ refactorings currently do that in RefactoringAction.run().  I filed issue 255092.

2. Selection should be updated after refactoring similar to how it's done in
Java.

That also makes sense, but it appears that the Java support is built into how the Java text editor applies changes.  I filed issue 255093.

3. Refactoring of x + y from expression (x + y) / 2 doesn't remove parentheses.

Fixed.

4. Java provides keyboard binding Shift+Alt+L.

Fixed.

5. Java suggests a variable name by default. This is not very important, but
nice to have.

Fixed, with new patch file to be posted as soon as testing is complete. 
Created attachment 117807
Proposed Extract Local Variable implementation

Addressed many of Sergey's issues with first implementation.
I've requested an IP review.
This is to confirm that the attached patch being contributed here:

1.  contains no cryptography;
2.  was developed from scratch, other than working with the other Eclipse code and patterns used in the project being patched; and
3.  is 100% EPL code.

Tom
Patch committed.

Fixed in HEAD &gt; 20081123.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="136714" />
    <CreationDate amount="2006-04-13 14:37:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="Doc" />
    <Version amount="3.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>[Intro] Intro content file spec is not complete</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>The intro content file spec does not specify the following for content of inlined HTML text and HEAD element (I found it in the Javadoc of the private method):

Reads the content of the file referred to by the &lt;code&gt;src&lt;/code&gt; parameter and returns the content in the form of a StringBuffer. If the file read contains substitution segments of the form $plugin:plugin_id$ then this method will make the proper substitution (the segment will be replaced with the absolute path to the plugin with id plugin_id).

This is a very important information that makes HEAD and HTML element usable and it should be documented.
Curtis, Richard was having a problem with contributing the HEAD element until we stumbled upon this Javadoc that did the trick. We should have this priminently document in 3.2 to avoid similar situations.
Docs; moving to RC3.
Fixed.</WithStack>
    <WithOutStack>The intro content file spec does not specify the following for content of inlined HTML text and HEAD element (I found it in the Javadoc of the private method):

Reads the content of the file referred to by the &lt;code&gt;src&lt;/code&gt; parameter and returns the content in the form of a StringBuffer. If the file read contains substitution segments of the form $plugin:plugin_id$ then this method will make the proper substitution (the segment will be replaced with the absolute path to the plugin with id plugin_id).

This is a very important information that makes HEAD and HTML element usable and it should be documented.
Curtis, Richard was having a problem with contributing the HEAD element until we stumbled upon this Javadoc that did the trick. We should have this priminently document in 3.2 to avoid similar situations.
Docs; moving to RC3.
Fixed.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="136715" />
    <CreationDate amount="2006-04-13 14:42:00 -0400" />
    <DupId amount="" />
    <classification amount="WebTools" />
    <Product amount="Web Tools" />
    <component amount="documentation" />
    <Version amount="1.5" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>[action] SSE: Review and identify changes in WTP 1.5 that require documentation changes</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="2">
        <Lines>
          <Line>1. Adding the documentation keyword to specific bugs</Line>
          <Line>2. Adding comments to bug 130814</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>Documentation for WTP 1.5 needs to be complete by RC3. In order to assist the writers we need to identify changes in WTP 1.5 that require documentation updates or additions.

Please review changes in your component with your teams and identify changes. Changes can be identified by 
1. Adding the documentation keyword to specific bugs
2. Adding comments to bug 130814

Although everyone is very busy the writers do need adequate time to update the documentation so please hold the review and identify changes as soon as you can.
Amy, I'm sure you've already almost got this done?  :) ... or, if not, please handle. 
Added Documentation keyword to the bugs listed below and added the following text to bug 130814.  I will keep this bug open for a little while longer in case there is anything new (but really, there shouldn't be anything else)

Bug 92480 - JSP Fragments need content properties page
Bug 115031 - Web Content Settings page isn't displayed
 - also includes adding CSS Content Settings page

More details on the 3 new Properties pages:
http://www.eclipse.org/webtools/development/news/1.5M5.html
http://www.eclipse.org/webtools/wst/components/sse/designs/WebContentSettings.html

Bug 128701 - Implement DTD property sheet support
Bug 106087 - new HTML wizard does not handle .HTML extension (capitalized)
 -see comment #2 (added preferences for default extension to be used in new
file wizard)
done.
Thanks Amy. Closing action.</WithStack>
    <WithOutStack>Documentation for WTP 1.5 needs to be complete by RC3. In order to assist the writers we need to identify changes in WTP 1.5 that require documentation updates or additions.

Please review changes in your component with your teams and identify changes. Changes can be identified by 
1. Adding the documentation keyword to specific bugs
2. Adding comments to bug 130814

Although everyone is very busy the writers do need adequate time to update the documentation so please hold the review and identify changes as soon as you can.
Amy, I'm sure you've already almost got this done?  :) ... or, if not, please handle. 
Added Documentation keyword to the bugs listed below and added the following text to bug 130814.  I will keep this bug open for a little while longer in case there is anything new (but really, there shouldn't be anything else)

Bug 92480 - JSP Fragments need content properties page
Bug 115031 - Web Content Settings page isn't displayed
 - also includes adding CSS Content Settings page

More details on the 3 new Properties pages:
http://www.eclipse.org/webtools/development/news/1.5M5.html
http://www.eclipse.org/webtools/wst/components/sse/designs/WebContentSettings.html

Bug 128701 - Implement DTD property sheet support
Bug 106087 - new HTML wizard does not handle .HTML extension (capitalized)
 -see comment #2 (added preferences for default extension to be used in new
file wizard)
done.
Thanks Amy. Closing action.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="136716" />
    <CreationDate amount="2006-04-13 14:43:00 -0400" />
    <DupId amount="" />
    <classification amount="WebTools" />
    <Product amount="Web Tools" />
    <component amount="documentation" />
    <Version amount="1.5" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>[action] XML: Review and identify changes in WTP 1.5 that require documentation changes</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="2">
        <Lines>
          <Line>1. Adding the documentation keyword to specific bugs</Line>
          <Line>2. Adding comments to bug 130814</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>Documentation for WTP 1.5 needs to be complete by RC3. In order to assist the writers we need to identify changes in WTP 1.5 that require documentation updates or additions.

Please review changes in your component with your teams and identify changes. Changes can be identified by 
1. Adding the documentation keyword to specific bugs
2. Adding comments to bug 130814

Although everyone is very busy the writers do need adequate time to update the documentation so please hold the review and identify changes as soon as you can.
04/20 status meeting - Target for next week.
Done.   We've already contacted the writers too.


Thanks Keith. Closing action.
Created attachment 41055
Updates and corrects information for the XML schema editor.
Jahan, this bug has been closed. Please open a new bug for your documentation updates.
To follow up with my comment #5, I spoke with Jahan and Kate Price who confirmed that the patch supplied in comment #4 has already been handled.</WithStack>
    <WithOutStack>Documentation for WTP 1.5 needs to be complete by RC3. In order to assist the writers we need to identify changes in WTP 1.5 that require documentation updates or additions.

Please review changes in your component with your teams and identify changes. Changes can be identified by 
1. Adding the documentation keyword to specific bugs
2. Adding comments to bug 130814

Although everyone is very busy the writers do need adequate time to update the documentation so please hold the review and identify changes as soon as you can.
04/20 status meeting - Target for next week.
Done.   We've already contacted the writers too.


Thanks Keith. Closing action.
Created attachment 41055
Updates and corrects information for the XML schema editor.
Jahan, this bug has been closed. Please open a new bug for your documentation updates.
To follow up with my comment #5, I spoke with Jahan and Kate Price who confirmed that the patch supplied in comment #4 has already been handled.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="136717" />
    <CreationDate amount="2006-04-13 14:44:00 -0400" />
    <DupId amount="" />
    <classification amount="WebTools" />
    <Product amount="Web Tools" />
    <component amount="documentation" />
    <Version amount="1.5" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>[action] WS: Review and identify changes in WTP 1.5 that require documentation changes</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="2">
        <Lines>
          <Line>1. Adding the documentation keyword to specific bugs</Line>
          <Line>2. Adding comments to bug 130814</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>Documentation for WTP 1.5 needs to be complete by RC3. In order to assist the writers we need to identify changes in WTP 1.5 that require documentation updates or additions.

Please review changes in your component with your teams and identify changes. Changes can be identified by 
1. Adding the documentation keyword to specific bugs
2. Adding comments to bug 130814

Although everyone is very busy the writers do need adequate time to update the documentation so please hold the review and identify changes as soon as you can.
Lawrence,
I've scrubbed thru all bugs targetted to a 1.5 milestone, in any state, and of any severity, and set the "Documentation" keyword on those that Kate might need to deal with.
Thanks Chris. I'm going to close this action.
Created attachment 40993
Updates and corrects information for the WSDL editor
Created attachment 40997
Updates and corrects information for the WSDL Editor.
Reopening this to deal with generic WS doc improvements pointed out via documenation keywords.
Chris, can I get your approval to drop more updated docs to RC3
Kate, approved for RC3.
all doc updates pointed out via this defect have been added and released 05/11.
Changes identified and docs updated. Closing this action item.</WithStack>
    <WithOutStack>Documentation for WTP 1.5 needs to be complete by RC3. In order to assist the writers we need to identify changes in WTP 1.5 that require documentation updates or additions.

Please review changes in your component with your teams and identify changes. Changes can be identified by 
1. Adding the documentation keyword to specific bugs
2. Adding comments to bug 130814

Although everyone is very busy the writers do need adequate time to update the documentation so please hold the review and identify changes as soon as you can.
Lawrence,
I've scrubbed thru all bugs targetted to a 1.5 milestone, in any state, and of any severity, and set the "Documentation" keyword on those that Kate might need to deal with.
Thanks Chris. I'm going to close this action.
Created attachment 40993
Updates and corrects information for the WSDL editor
Created attachment 40997
Updates and corrects information for the WSDL Editor.
Reopening this to deal with generic WS doc improvements pointed out via documenation keywords.
Chris, can I get your approval to drop more updated docs to RC3
Kate, approved for RC3.
all doc updates pointed out via this defect have been added and released 05/11.
Changes identified and docs updated. Closing this action item.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="136718" />
    <CreationDate amount="2006-04-13 14:44:00 -0400" />
    <DupId amount="" />
    <classification amount="WebTools" />
    <Product amount="Web Tools" />
    <component amount="documentation" />
    <Version amount="1.5" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>[action] Server: Review and identify changes in WTP 1.5 that require documentation changes</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="2">
        <Lines>
          <Line>1. Adding the documentation keyword to specific bugs</Line>
          <Line>2. Adding comments to bug 130814</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>Documentation for WTP 1.5 needs to be complete by RC3. In order to assist the writers we need to identify changes in WTP 1.5 that require documentation updates or additions.

Please review changes in your component with your teams and identify changes. Changes can be identified by 
1. Adding the documentation keyword to specific bugs
2. Adding comments to bug 130814

Although everyone is very busy the writers do need adequate time to update the documentation so please hold the review and identify changes as soon as you can.
No UI changes planned.
Thanks Tim. Closing bug.</WithStack>
    <WithOutStack>Documentation for WTP 1.5 needs to be complete by RC3. In order to assist the writers we need to identify changes in WTP 1.5 that require documentation updates or additions.

Please review changes in your component with your teams and identify changes. Changes can be identified by 
1. Adding the documentation keyword to specific bugs
2. Adding comments to bug 130814

Although everyone is very busy the writers do need adequate time to update the documentation so please hold the review and identify changes as soon as you can.
No UI changes planned.
Thanks Tim. Closing bug.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="136719" />
    <CreationDate amount="2006-04-13 14:45:00 -0400" />
    <DupId amount="" />
    <classification amount="WebTools" />
    <Product amount="Web Tools" />
    <component amount="documentation" />
    <Version amount="1.5" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>[action] J2EE: Review and identify changes in WTP 1.5 that require documentation changes</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="2">
        <Lines>
          <Line>1. Adding the documentation keyword to specific bugs</Line>
          <Line>2. Adding comments to bug 130814</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>Documentation for WTP 1.5 needs to be complete by RC3. In order to assist the writers we need to identify changes in WTP 1.5 that require documentation updates or additions.

Please review changes in your component with your teams and identify changes. Changes can be identified by 
1. Adding the documentation keyword to specific bugs
2. Adding comments to bug 130814

Although everyone is very busy the writers do need adequate time to update the documentation so please hold the review and identify changes as soon as you can.
04/20 status meeting - Target for next week.
I'm comfortable with the UI changes already listed in the master bug
Chuck, does that mean you can resolve this action as complete?
Yep - closing
Thanks Chuck. Closing bug.</WithStack>
    <WithOutStack>Documentation for WTP 1.5 needs to be complete by RC3. In order to assist the writers we need to identify changes in WTP 1.5 that require documentation updates or additions.

Please review changes in your component with your teams and identify changes. Changes can be identified by 
1. Adding the documentation keyword to specific bugs
2. Adding comments to bug 130814

Although everyone is very busy the writers do need adequate time to update the documentation so please hold the review and identify changes as soon as you can.
04/20 status meeting - Target for next week.
I'm comfortable with the UI changes already listed in the master bug
Chuck, does that mean you can resolve this action as complete?
Yep - closing
Thanks Chuck. Closing bug.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="136720" />
    <CreationDate amount="2006-04-13 14:45:00 -0400" />
    <DupId amount="" />
    <classification amount="WebTools" />
    <Product amount="Web Tools" />
    <component amount="documentation" />
    <Version amount="1.5" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>[action] RDB: Review and identify changes in WTP 1.5 that require documentation changes</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="2">
        <Lines>
          <Line>1. Adding the documentation keyword to specific bugs</Line>
          <Line>2. Adding comments to bug 130814</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>Documentation for WTP 1.5 needs to be complete by RC3. In order to assist the writers we need to identify changes in WTP 1.5 that require documentation updates or additions.

Please review changes in your component with your teams and identify changes. Changes can be identified by 
1. Adding the documentation keyword to specific bugs
2. Adding comments to bug 130814

Although everyone is very busy the writers do need adequate time to update the documentation so please hold the review and identify changes as soon as you can.
04/20 status meeting:

Shelia - Assigned developers to this task. What's the deadline?
Lawrence - RC3 is the writer's deadline, therefore, we will need this info as soon as possible.
There's been no activity for this action item.

Der-Ping - Have you started your investigation into RDB changes that require updates to WTP documentation?
Update 130814 with the defect which require doc.
Thanks Der-Ping. Closing action.</WithStack>
    <WithOutStack>Documentation for WTP 1.5 needs to be complete by RC3. In order to assist the writers we need to identify changes in WTP 1.5 that require documentation updates or additions.

Please review changes in your component with your teams and identify changes. Changes can be identified by 
1. Adding the documentation keyword to specific bugs
2. Adding comments to bug 130814

Although everyone is very busy the writers do need adequate time to update the documentation so please hold the review and identify changes as soon as you can.
04/20 status meeting:

Shelia - Assigned developers to this task. What's the deadline?
Lawrence - RC3 is the writer's deadline, therefore, we will need this info as soon as possible.
There's been no activity for this action item.

Der-Ping - Have you started your investigation into RDB changes that require updates to WTP documentation?
Update 130814 with the defect which require doc.
Thanks Der-Ping. Closing action.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="136721" />
    <CreationDate amount="2006-04-13 14:50:00 -0400" />
    <DupId amount="" />
    <classification amount="Tools" />
    <Product amount="TPTP Profiling" />
    <component amount="Platform.Agents.JVMPI" />
    <Version amount="4.2" />
    <rep_platform amount="PC" />
    <op_sys amount="All" />
    <priority amount="P1" />
    <bug_severity amount="critical" />
    <Summery>Regression: repair Segv from Detach with preAgg by backout of 108646</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>Given that bug 134635 cannot be fixed this afternoon, we will revert the piAgent to the previous behavior for "Show Execution Statistics".  This is low risk and requires no changes from the cooperating components (UI and loader).  It requires a simple change to the piAgent.  The preAggregating path was always a set of "if... else" paths governed by a single test flag to allow support for both Statistics and Full mode.  Prior to preaggregating, the piAgent behaved the same for both.  By forcing the flag, the behavior can be restored without further change and the Detach and related problems will be eliminated.   Marius' fixes from yesterday (bug 136142, bug 136166)  are not impacted and can remain as they are (they are just bonus in that they will not be exercised now but will be in future).
The changes have been made, pre-testsed, and checked into CVS. Affected files were JvmpiWriter.c, options.c, stack.c. 

Note that the preaggregating code has not been backed-out ... it remains in place (in print.c, print.h, options.h, strings.h, hash.h, and piagent.os400.exports as well as the three files above). However, by use of runtime flags and some related changes, the preAggregating code will not execute until changes are made in conjunction with bug 134635 (in 4.2i3).
As of TPTP 4.6.0, TPTP is in maintenance mode and focusing on improving quality by resolving relevant enhancements/defects and increasing test coverage through test creation, automation, Build Verification Tests (BVTs), and expanded run-time execution. As part of the TPTP Bugzilla housecleaning process (see http://wiki.eclipse.org/Bugzilla_Housecleaning_Processes), this enhancement/defect is verified/closed by the Project Lead since this enhancement/defect has been resolved and unverified for more than 1 year and considered to be fixed. If this enhancement/defect is still unresolved and reproducible in the latest TPTP release (http://www.eclipse.org/tptp/home/downloads/), please re-open.</WithStack>
    <WithOutStack>Given that bug 134635 cannot be fixed this afternoon, we will revert the piAgent to the previous behavior for "Show Execution Statistics".  This is low risk and requires no changes from the cooperating components (UI and loader).  It requires a simple change to the piAgent.  The preAggregating path was always a set of "if... else" paths governed by a single test flag to allow support for both Statistics and Full mode.  Prior to preaggregating, the piAgent behaved the same for both.  By forcing the flag, the behavior can be restored without further change and the Detach and related problems will be eliminated.   Marius' fixes from yesterday (bug 136142, bug 136166)  are not impacted and can remain as they are (they are just bonus in that they will not be exercised now but will be in future).
The changes have been made, pre-testsed, and checked into CVS. Affected files were JvmpiWriter.c, options.c, stack.c. 

Note that the preaggregating code has not been backed-out ... it remains in place (in print.c, print.h, options.h, strings.h, hash.h, and piagent.os400.exports as well as the three files above). However, by use of runtime flags and some related changes, the preAggregating code will not execute until changes are made in conjunction with bug 134635 (in 4.2i3).
As of TPTP 4.6.0, TPTP is in maintenance mode and focusing on improving quality by resolving relevant enhancements/defects and increasing test coverage through test creation, automation, Build Verification Tests (BVTs), and expanded run-time execution. As part of the TPTP Bugzilla housecleaning process (see http://wiki.eclipse.org/Bugzilla_Housecleaning_Processes), this enhancement/defect is verified/closed by the Project Lead since this enhancement/defect has been resolved and unverified for more than 1 year and considered to be fixed. If this enhancement/defect is still unresolved and reproducible in the latest TPTP release (http://www.eclipse.org/tptp/home/downloads/), please re-open.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="136722" />
    <CreationDate amount="2006-04-13 14:53:00 -0400" />
    <DupId amount="" />
    <classification amount="Tools" />
    <Product amount="TPTP Log Analyzer" />
    <component amount="Platform.UI.LogView" />
    <Version amount="4.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P2" />
    <bug_severity amount="major" />
    <Summery>Importing symptom database from ftp site with symptom 2.0 formate throws the error .</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>Add following symptom database using following steps.
1&gt;Open the Profiling and Logging prespective
2&gt;Open Window-&gt;Preference
3&gt;Select Profing and Logging-&gt;Symptom Database Location
Add URL
Database name : IBM Portal Server 5.1
ftp://beaver.torolab.ibm.com/wps_5.1.x_GA_nlsprops.xml.

Then import the same database.

Get the following error.
IWAT0038E Error loading symptom database file.
Reason:
IWAT0039E An exception occured during the import.
Please set the priority = P2.
Fixed.
Tested</WithStack>
    <WithOutStack>Add following symptom database using following steps.
1&gt;Open the Profiling and Logging prespective
2&gt;Open Window-&gt;Preference
3&gt;Select Profing and Logging-&gt;Symptom Database Location
Add URL
Database name : IBM Portal Server 5.1
ftp://beaver.torolab.ibm.com/wps_5.1.x_GA_nlsprops.xml.

Then import the same database.

Get the following error.
IWAT0038E Error loading symptom database file.
Reason:
IWAT0039E An exception occured during the import.
Please set the priority = P2.
Fixed.
Tested</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="136723" />
    <CreationDate amount="2006-04-13 14:58:00 -0400" />
    <DupId amount="139067" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="UI" />
    <Version amount="3.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>[Workbench]  Java Build Path Execution Environments need to be set</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="2">
      <source_code type="functioncall">
        <location start="868" end="891" />
        <code>Pattern getPattern();</code>
      </source_code>
      <source_code type="import">
        <location start="910" end="943" />
        <code>import java.util.regex.Pattern;</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="DUPLICATE" />
    <WithStack>3.2 RC1

All RCP apps (jface and the workbench) should be foundation 1.0 and the others should be 1.4 (rather than workbench default).
Do we consider views or core.commands rcp? I think we should.
core.commands needs to be able to compile against Foundation, since it's part of the RCP base (also needed for standalone JFace/SWT apps).

views is less critical as it's an optional RCP component.  It would be nice if it compiled against Foundation, but if it doesn't just work currently, I wouldn't fuss about it for 3.2.

Also, how was o.e.ui.workbench handled?  We want it to compile against Foundation, but there needs to be an exception for the use of regexps.

good point nick.  Adding Jeff to the CC as well.
Where are we using regexps? I went and changed it to Foundation and it has no problem compiling.
IActivityPatternBinding and ActivityPatternBinding have 
  Pattern getPattern();
where Pattern is:
  import java.util.regex.Pattern;

I didn't think this was included in Foundation.



*** This bug has been marked as a duplicate of 139067 ***</WithStack>
    <WithOutStack>3.2 RC1

All RCP apps (jface and the workbench) should be foundation 1.0 and the others should be 1.4 (rather than workbench default).
Do we consider views or core.commands rcp? I think we should.
core.commands needs to be able to compile against Foundation, since it's part of the RCP base (also needed for standalone JFace/SWT apps).

views is less critical as it's an optional RCP component.  It would be nice if it compiled against Foundation, but if it doesn't just work currently, I wouldn't fuss about it for 3.2.

Also, how was o.e.ui.workbench handled?  We want it to compile against Foundation, but there needs to be an exception for the use of regexps.

good point nick.  Adding Jeff to the CC as well.
Where are we using regexps? I went and changed it to Foundation and it has no problem compiling.
IActivityPatternBinding and ActivityPatternBinding have 
  Pattern getPattern();
where Pattern is:
  import java.util.regex.Pattern;

I didn't think this was included in Foundation.



*** This bug has been marked as a duplicate of 139067 ***</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="136724" />
    <CreationDate amount="2006-04-13 15:02:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="JDT" />
    <component amount="UI" />
    <Version amount="3.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>[CommonNavigator] Compile error decorations remain until the element is selected</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="3">
      <source_code type="functioncall">
        <location start="14230" end="14326" />
        <code>+labelProvider.addListener((ILabelProviderListener)contentService.createCommonLabelProvider() );</code>
      </source_code>
      <source_code type="functioncall">
        <location start="14390" end="14488" />
        <code>+labelProvider.removeListener((ILabelProviderListener)contentService.createCommonLabelProvider());</code>
      </source_code>
      <source_code type="functiondef">
        <location start="14689" end="14798" />
        <code>+public void labelProviderChanged(LabelProviderChangedEvent event) { 
+	fireLabelProviderChanged(event);		
+}</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="0" />
    <bug_status amount="VERIFIED" />
    <resolution amount="FIXED" />
    <WithStack>Found in I20060413-0010

Construct a workspace with multiple/related projects that compile without errors (I found this using the org.eclipse.jface.tests.databinding and org.eclipse.jface.examples.databinding projects but any set should do).

Open the Project Explorer
Expand one of the projects ("A") so you can see classes
Close a project that "A" depends on...you should see error decorators as expected
Re-open the project. The error decorators remain until the tree element is selected by clicking on it (multi-select won't do it).
Same error,  but in my case there's no way to clear the decorations: they remain regardless of what I do!  There is no problem with the file in terms of compiler error or other issue, but the error decoration remains.  Editing the file does not remove the red X, nor does closing the workbench nor closing the project.  It is pretty frustrating.  In addition to a bug fix, perhaps a "clear/reset decorations" feature be added?
The decorators should always be consistent. No "clear" operation should be required.

It would be nice to fix this one, if the fix is surgical.
Created attachment 41067
Adds a small resource change listener to keep markers in sync

The attached patch:

+Corrects a bug in NavigatorContentServiceLabelProvider where the overriding descriptor was going to the grandparent before the parent.
+Adds a MarkerResourceChangeListener that looks for changes to markers in resources and generates updates to the viewer for the changed resources and their parents.
+Adds a class to visit the resource delta (modeled after a class of the same name from JDT)
+Integrates the MarkerResourceChangeListener to the lifecycle of the ResourceNavigatorContentProvider

The original problem was that the error markers were relying on the generation events from JDT mechanisms that were not explicit designed/tested for the Common Navigator environment; they were expecting certain pieces of function and behavior from the PackageExplorer. This explicitly manages markers from the CN Layer for resources, and the pipeline converts the marker events to the appropriate model objects in the viewer. 

The change here is fairly safe and I think it's ready for release. 
Jeff, Kevin, and Mike -- can you review this for approval for release in 3.2RC4?
This is a large patch, and I'm only seeing it now. I'll try to review it tomorrow. I'm very nervous about adding new resource listeners this late in the cycle. Adding JohnA as a potential reviewer.
The project explorer already has a resource change listener installed that is processing all resource changes.  This code is in ResourceExtensionContentProvider.processDelta On line 157 it examines which changes it cares about, and explicitly ignores marker changes. I think a simpler fix is to integrate the "isErrorDelta" logic in there rather than add a new listener.  Having duplicate listeners producing independent viewer updates would also cause unnecessary duplicate refreshes of the tree.
The provided patch is for the Navigator/Resources plugin but that plugin does not do any problem marker decoration. The behavior needs to be in the Java content extensions since it is the one that does the problem decoration. If I disable the Resource content extension, the update behavior is lost.
Confirmed that the bug still occurs with this patch applied when the resource content provider is turned off (filters &gt; available content &gt; resources).  

-1 on this patch.
It makes a lot of sense to reuse an existing
ResourceChangeListener and not introduce a new change listener dedicated for
marker changes.  The patch will be updated shortly to remove the new change
listener and to move the logic over to the ResourceExtensionContentProvider
listener to process marker changes.

Yes the bug will still be present if you turn off the resource conent because the fix was applied to this content provider.  As Mike points out it should really be part of the Java content extension.  We are investigating if this will be possible for RC4.  
My initial comment was based on an assumption that the problem marker decoration was being provided by the navigator.resources plugin.  Since it isn't, I don't think my suggestion makes sense.  The updates should be the responsibility of whoever is doing the decoration, which in this case is apparently JDT.
I have discussed this now with MichaelE, MichaelV, and JohnA. I believe the only reasonable way to proceed is to make the fix in the Java content extensions. As this is unlikely to happen for RC4, we should make a concerted effort to get a highest possible quality patch in place, and discuss applying it post RC4.

Assuming we can find a reasonable path through this, I would vote in favour of applying the change even this late in the game, since I know products are built on top of the platform that do use the CN to display java code.

I noticed that in the Project Explorer Java content extension wraps this label provider:

new PackageExplorerLabelProvider(
   AppearanceAwareLabelProvider.DEFAULT_TEXTFLAGS
   | JavaElementLabels.P_COMPRESSED,
   AppearanceAwareLabelProvider.DEFAULT_IMAGEFLAGS
   | JavaElementImageProvider.SMALL_ICONS,
   fContentProvider)

but in the Java synchronization content provider, Tobias used this:

new DecoratingLabelProvider(new JavaModelLabelProvider(
    ModelMessages.JavaModelLabelProvider_project_preferences_label,
    ModelMessages.JavaModelLabelProvider_refactorings_label), 
    new ProblemsLabelDecorator())

Tobias, would the later content provider be more appropriate to use in the Project Explorer since it is not tied to the Packages Explorer (which I understand may be part of the problem)?



Created attachment 41252
Reuses the resource delta listener in ResourceExtensionContentProvider and a Problem Label Decorator for Resources
The updated patch reuses the resource delta listener in ResourceExtensionContentProvider, per John's very astute suggestion. It also adds a lightweight label decorator for resource markers; something the platform doesn't seem to provide by default. Now when the resource extension is enabled, error/warning markers will be kept in sync and properly labeled. 

There is still an issue with the Java extension only generating events for elements displayed in the Package Explorer view; There is no lightweight decorator provided by the JDT, the support is built into the label provider. I think that opening a defect to track the JDT listener/update issue makes sense. However, I think that this patch now properly supports error/warning markers and their updates for resources (and particularly things that adapt to resources), and should be released for 3.2RC4. 

Turning off the Java extension will still render the error/warning ticks and keep them up to date for all resources. Since the Java extension doesn't handle the error/warning ticks in a way not specific to the Package Explorer (or due to the fact that the label provider for the JDT extension is misconfigured, as MichaelV questions -- feedback here is more than welcome), turning off the Resource extension will not generate the right events for the Java extension. However, since there is a label decorator for error/warning ticks for resources in the new patch, I think that it still makes alot of sense for the Resource extension to release this for RC4. 

I also feel that the 90% case will leave the Resource and Java extension enabled together; either in Web/Enterprise Application development or in Modeling environments. I have no hard evidence to back this up; it's an observation from dealing with requirements from various clients. 


John -- with these changes, would you consider reversing your -1?

 
See comment #12. In case it wasn't clear, that was also a -1 for any solution that did not have the work done in the java content provider.
-1 from me too. Adding a new lightweight decorator in RC4 is absolute no-go. This requires performance mesurements and we have to gain experience how it influences other view. E.g. Java view now probably get decoarated twice.

I think it makes sense to look at this issue in 3.3, and to make the Java problem decoaraor a lightweight one and move it to platform. 
Regarding comment 13: This would actually be the preferred way. But there are some differences: The package explorer also has to display JRE containers and PDE containers. This is custom code which is not in the JavaModelLabelProvider.
In regards to Tobias' comment, are JRE containers and PDE containers also displayed in the Project Explorer?

In regards to Martin's comment, are you saying that there is no surgical fix for this that can be applied to 3.2? The reason I ask is that the expectation is that WTP and many other clients will use the Project Explorer. Not having markers update properly is a major problem. It would be good if we could find some solution to this, even if it is something that cliens like WTP need to do.
Java-wise, the Project Explorer has the identical content as the Package Explorer. 

I think the problem is that the PackageExplorerLabelProvider is not wrapped with a DecoratingJavaLabelProvider. I'll attach a patch...
Created attachment 41306
patch

This patch implements the exact same label decoration as in the package explorer, using a PackageExplorerLabelProvider wrapped within a DecoratingJavaLabelProvider.
I'm still trying to figure out where we ended up on fixing this... Martin, in light of Tobias' patch, which looks reasonable to me (since it just aligns the CN decoration with what the package explorer does), is this something that we can put in for R3.2?
Created attachment 41316
simplified patch

simplified patch (avoid some formatting changes).

Using the DecoratingJavaLabelProvider makes sure that the elements it decorated with error ticks are also updated correctly.

The fix is trivial. I would support the patch for 3.2 RC4.
sounds good. +1 from me as well.
In response to comment 16, I interpreted JohnA's response to mean that the
extension which handles the updates should handle the decorations; The last
patch that I contributed adds the lightweight decorator to deal with this. 

The problem scenario here is as follows: 

With three projects, add a dependency from two projects to the first (I was
using simple classes with static methods, where two classes from the two
dependent projects called a third static method in the first project). Then
change the name of the method (just in the source file) to force a compilation
failure in the other two projects. The error decorators should refresh in the
current project and the dependent projects (depending on whether the
modification breaks the first project and the two dependent or just the two
dependent projects). If you can confirm this is fixed with the new patch, I
think it could be sufficient for 3.2.

If the last patch from Martin fixes the problem described above, I'm more than
happy for this to be the solution for 3.2. If the solution will correctly
provide and update markers for the Java extension, that will cover the 90% of
clients (I believe). I would still like to revisit error markers for just
resources (perhaps in 3.2.1 or 3.3?), but I think that the usability will be
fine for 3.2, as long as the markers for Java are managed correctly. 

So will Markus handle the release of this patch for the Java extension?
+1 on Martin's latest patch for RC4.

MichaelE, adding problem decoration for generic resources would be something entirely new that we haven't done before. Note that the Navigator view, for example, does not currently do error marker decoration.  As this would be a new feature, it can be discussed in the 3.3 time frame.
patch released for RC4
verified in I20060512-1600

The fix for this problem has caused at least two regressions (bug 141776 and bug 141646). 

After debugging through this issue with Martin, we found that part of the problem was that the listener was not set up correctly for the JDT ProblemMarkerManager. One solution would be for the JDT extension to handle the label changed events and relay them to the viewer. Another solution is for the NavigatorContentServiceLabelProvider to act as a relay for *all* label providers that it creates. The new patch has implemented this approach, which is a smaller change. It does mean that now all clients will have their label changed events relayed to the viewer automatically. This is more consistent with the standard behavior, and I think a better solution in the long run. However, it would be prudent for the Team Team (MichaelV) to verify that this does not cause any odd behavior in their extensions. 

This patch would also fix the two regressions mentioned above. 
Created attachment 41465
Adds NavigatorContentServiceLabelProvider as a listener for all delegate label providers
I had a look at the patch and there seems to be a lot of formatting changes and some other unrelated changes in the patch so I'm not even sure which part of the patch is supposed to fix the problem. Also, I'm not sure what problem the patch is trying to solve. We have the two regressions that have been mentioned but the patch seems to be addressing the original issue which was fixed by the patch that was applied to RC4. Are you saying that the patch didn't fix the problem entirely or are you suggesting that we back out of that patch in favour of the one in comment 30?

Regardless, my opinion on this is that any patches that are proposed for inclusion into 3.2 need to be as minimal and concise as possible. I think the right answer for 3.2 is to fix any stop ship problems in the Java content extension itself and not try to come up with general behavior in the Common Navigator framework. At this stage in the release, we need to localize the affects of any changes as much as possible. 


Created attachment 41488
Adds NavigatorContentServiceLabelProvider as a listener for all delegate label providers

The first patch picked up changes in NavigatorContentServiceContentProvider that were part of the patch for another bug; those changes are not part of this patch. 

The patch includes changes to NavigatorContentExtension:

In the creation logic in NavigatorContentExtension.getLabelProvider():

+labelProvider.addListener((ILabelProviderListener)contentService.createCommonLabelProvider() );

In the dispose logic in NavigatorContentExtension.dispose():

+labelProvider.removeListener((ILabelProviderListener)contentService.createCommonLabelProvider());

In NavigatorContentServiceLabelProvider: 

+	/* (non-Javadoc)
+ * @see org.eclipse.jface.viewers.ILabelProviderListener#labelProviderChanged(org.eclipse.jface.viewers.LabelProviderChangedEvent)
+ */
+public void labelProviderChanged(LabelProviderChangedEvent event) { 
+	fireLabelProviderChanged(event);		
+}


Martin encouraged fixing the problem this way to avoid letting clients become dependent on the current behavior. I'm inclined to agree with him; I think that this is the best fix given our timeframe. The fix is very isolated, and provides behavior that some label providers depend on (the viewer listening for label changed events). 

Applying this patch would mean rolling back the changes to the JDT extension that were released for this defect.
OK, that patch makes a lot more sense to me. What you are saying is that the Common Navigator wraps each label provider and was delegating the calls to the get&lt;Text/Image/etc&gt; methods from the outer to inner label provider but was not propogating label change events from the inner label provider to the listeners that were registered with the outer label provider. This seems like a bug to me and not new behavior as I though originally. I also think that this is a fairly safe change and should not have a negative impact on Team (i.e. the label providers in team are probably either relying on the propogation of the events or are updating the view directly).
+1
Created attachment 41557
patch for jdt.ui to revert the RC4 change

patch reverts the JavaNavigatorLabelProvider to the version released in RC3 (with the exception of 2 fixes in the Javadoc)
*** Bug 141776 has been marked as a duplicate of this bug. ***
+1
So with the approval of Mike, Michael, and Martin, I'll release this patch today for the next RC spin. 
Released for 3.2RC5. 

Markus or Martin -- can you resolve this defect once you have reverted the JDT change?
Verified that the patch works for the scenario in comment 0
patch from comment 35 released for 20060518-0800
setting to fixed
verified in I20060519-0010</WithStack>
    <WithOutStack>Found in I20060413-0010

Construct a workspace with multiple/related projects that compile without errors (I found this using the org.eclipse.jface.tests.databinding and org.eclipse.jface.examples.databinding projects but any set should do).

Open the Project Explorer
Expand one of the projects ("A") so you can see classes
Close a project that "A" depends on...you should see error decorators as expected
Re-open the project. The error decorators remain until the tree element is selected by clicking on it (multi-select won't do it).
Same error,  but in my case there's no way to clear the decorations: they remain regardless of what I do!  There is no problem with the file in terms of compiler error or other issue, but the error decoration remains.  Editing the file does not remove the red X, nor does closing the workbench nor closing the project.  It is pretty frustrating.  In addition to a bug fix, perhaps a "clear/reset decorations" feature be added?
The decorators should always be consistent. No "clear" operation should be required.

It would be nice to fix this one, if the fix is surgical.
Created attachment 41067
Adds a small resource change listener to keep markers in sync

The attached patch:

+Corrects a bug in NavigatorContentServiceLabelProvider where the overriding descriptor was going to the grandparent before the parent.
+Adds a MarkerResourceChangeListener that looks for changes to markers in resources and generates updates to the viewer for the changed resources and their parents.
+Adds a class to visit the resource delta (modeled after a class of the same name from JDT)
+Integrates the MarkerResourceChangeListener to the lifecycle of the ResourceNavigatorContentProvider

The original problem was that the error markers were relying on the generation events from JDT mechanisms that were not explicit designed/tested for the Common Navigator environment; they were expecting certain pieces of function and behavior from the PackageExplorer. This explicitly manages markers from the CN Layer for resources, and the pipeline converts the marker events to the appropriate model objects in the viewer. 

The change here is fairly safe and I think it's ready for release. 
Jeff, Kevin, and Mike -- can you review this for approval for release in 3.2RC4?
This is a large patch, and I'm only seeing it now. I'll try to review it tomorrow. I'm very nervous about adding new resource listeners this late in the cycle. Adding JohnA as a potential reviewer.
The project explorer already has a resource change listener installed that is processing all resource changes.  This code is in ResourceExtensionContentProvider.processDelta On line 157 it examines which changes it cares about, and explicitly ignores marker changes. I think a simpler fix is to integrate the "isErrorDelta" logic in there rather than add a new listener.  Having duplicate listeners producing independent viewer updates would also cause unnecessary duplicate refreshes of the tree.
The provided patch is for the Navigator/Resources plugin but that plugin does not do any problem marker decoration. The behavior needs to be in the Java content extensions since it is the one that does the problem decoration. If I disable the Resource content extension, the update behavior is lost.
Confirmed that the bug still occurs with this patch applied when the resource content provider is turned off (filters &gt; available content &gt; resources).  

-1 on this patch.
It makes a lot of sense to reuse an existing
ResourceChangeListener and not introduce a new change listener dedicated for
marker changes.  The patch will be updated shortly to remove the new change
listener and to move the logic over to the ResourceExtensionContentProvider
listener to process marker changes.

Yes the bug will still be present if you turn off the resource conent because the fix was applied to this content provider.  As Mike points out it should really be part of the Java content extension.  We are investigating if this will be possible for RC4.  
My initial comment was based on an assumption that the problem marker decoration was being provided by the navigator.resources plugin.  Since it isn't, I don't think my suggestion makes sense.  The updates should be the responsibility of whoever is doing the decoration, which in this case is apparently JDT.
I have discussed this now with MichaelE, MichaelV, and JohnA. I believe the only reasonable way to proceed is to make the fix in the Java content extensions. As this is unlikely to happen for RC4, we should make a concerted effort to get a highest possible quality patch in place, and discuss applying it post RC4.

Assuming we can find a reasonable path through this, I would vote in favour of applying the change even this late in the game, since I know products are built on top of the platform that do use the CN to display java code.

I noticed that in the Project Explorer Java content extension wraps this label provider:

new PackageExplorerLabelProvider(
   AppearanceAwareLabelProvider.DEFAULT_TEXTFLAGS
   | JavaElementLabels.P_COMPRESSED,
   AppearanceAwareLabelProvider.DEFAULT_IMAGEFLAGS
   | JavaElementImageProvider.SMALL_ICONS,
   fContentProvider)

but in the Java synchronization content provider, Tobias used this:

new DecoratingLabelProvider(new JavaModelLabelProvider(
    ModelMessages.JavaModelLabelProvider_project_preferences_label,
    ModelMessages.JavaModelLabelProvider_refactorings_label), 
    new ProblemsLabelDecorator())

Tobias, would the later content provider be more appropriate to use in the Project Explorer since it is not tied to the Packages Explorer (which I understand may be part of the problem)?



Created attachment 41252
Reuses the resource delta listener in ResourceExtensionContentProvider and a Problem Label Decorator for Resources
The updated patch reuses the resource delta listener in ResourceExtensionContentProvider, per John's very astute suggestion. It also adds a lightweight label decorator for resource markers; something the platform doesn't seem to provide by default. Now when the resource extension is enabled, error/warning markers will be kept in sync and properly labeled. 

There is still an issue with the Java extension only generating events for elements displayed in the Package Explorer view; There is no lightweight decorator provided by the JDT, the support is built into the label provider. I think that opening a defect to track the JDT listener/update issue makes sense. However, I think that this patch now properly supports error/warning markers and their updates for resources (and particularly things that adapt to resources), and should be released for 3.2RC4. 

Turning off the Java extension will still render the error/warning ticks and keep them up to date for all resources. Since the Java extension doesn't handle the error/warning ticks in a way not specific to the Package Explorer (or due to the fact that the label provider for the JDT extension is misconfigured, as MichaelV questions -- feedback here is more than welcome), turning off the Resource extension will not generate the right events for the Java extension. However, since there is a label decorator for error/warning ticks for resources in the new patch, I think that it still makes alot of sense for the Resource extension to release this for RC4. 

I also feel that the 90% case will leave the Resource and Java extension enabled together; either in Web/Enterprise Application development or in Modeling environments. I have no hard evidence to back this up; it's an observation from dealing with requirements from various clients. 


John -- with these changes, would you consider reversing your -1?

 
See comment #12. In case it wasn't clear, that was also a -1 for any solution that did not have the work done in the java content provider.
-1 from me too. Adding a new lightweight decorator in RC4 is absolute no-go. This requires performance mesurements and we have to gain experience how it influences other view. E.g. Java view now probably get decoarated twice.

I think it makes sense to look at this issue in 3.3, and to make the Java problem decoaraor a lightweight one and move it to platform. 
Regarding comment 13: This would actually be the preferred way. But there are some differences: The package explorer also has to display JRE containers and PDE containers. This is custom code which is not in the JavaModelLabelProvider.
In regards to Tobias' comment, are JRE containers and PDE containers also displayed in the Project Explorer?

In regards to Martin's comment, are you saying that there is no surgical fix for this that can be applied to 3.2? The reason I ask is that the expectation is that WTP and many other clients will use the Project Explorer. Not having markers update properly is a major problem. It would be good if we could find some solution to this, even if it is something that cliens like WTP need to do.
Java-wise, the Project Explorer has the identical content as the Package Explorer. 

I think the problem is that the PackageExplorerLabelProvider is not wrapped with a DecoratingJavaLabelProvider. I'll attach a patch...
Created attachment 41306
patch

This patch implements the exact same label decoration as in the package explorer, using a PackageExplorerLabelProvider wrapped within a DecoratingJavaLabelProvider.
I'm still trying to figure out where we ended up on fixing this... Martin, in light of Tobias' patch, which looks reasonable to me (since it just aligns the CN decoration with what the package explorer does), is this something that we can put in for R3.2?
Created attachment 41316
simplified patch

simplified patch (avoid some formatting changes).

Using the DecoratingJavaLabelProvider makes sure that the elements it decorated with error ticks are also updated correctly.

The fix is trivial. I would support the patch for 3.2 RC4.
sounds good. +1 from me as well.
In response to comment 16, I interpreted JohnA's response to mean that the
extension which handles the updates should handle the decorations; The last
patch that I contributed adds the lightweight decorator to deal with this. 

The problem scenario here is as follows: 

With three projects, add a dependency from two projects to the first (I was
using simple classes with static methods, where two classes from the two
dependent projects called a third static method in the first project). Then
change the name of the method (just in the source file) to force a compilation
failure in the other two projects. The error decorators should refresh in the
current project and the dependent projects (depending on whether the
modification breaks the first project and the two dependent or just the two
dependent projects). If you can confirm this is fixed with the new patch, I
think it could be sufficient for 3.2.

If the last patch from Martin fixes the problem described above, I'm more than
happy for this to be the solution for 3.2. If the solution will correctly
provide and update markers for the Java extension, that will cover the 90% of
clients (I believe). I would still like to revisit error markers for just
resources (perhaps in 3.2.1 or 3.3?), but I think that the usability will be
fine for 3.2, as long as the markers for Java are managed correctly. 

So will Markus handle the release of this patch for the Java extension?
+1 on Martin's latest patch for RC4.

MichaelE, adding problem decoration for generic resources would be something entirely new that we haven't done before. Note that the Navigator view, for example, does not currently do error marker decoration.  As this would be a new feature, it can be discussed in the 3.3 time frame.
patch released for RC4
verified in I20060512-1600

The fix for this problem has caused at least two regressions (bug 141776 and bug 141646). 

After debugging through this issue with Martin, we found that part of the problem was that the listener was not set up correctly for the JDT ProblemMarkerManager. One solution would be for the JDT extension to handle the label changed events and relay them to the viewer. Another solution is for the NavigatorContentServiceLabelProvider to act as a relay for *all* label providers that it creates. The new patch has implemented this approach, which is a smaller change. It does mean that now all clients will have their label changed events relayed to the viewer automatically. This is more consistent with the standard behavior, and I think a better solution in the long run. However, it would be prudent for the Team Team (MichaelV) to verify that this does not cause any odd behavior in their extensions. 

This patch would also fix the two regressions mentioned above. 
Created attachment 41465
Adds NavigatorContentServiceLabelProvider as a listener for all delegate label providers
I had a look at the patch and there seems to be a lot of formatting changes and some other unrelated changes in the patch so I'm not even sure which part of the patch is supposed to fix the problem. Also, I'm not sure what problem the patch is trying to solve. We have the two regressions that have been mentioned but the patch seems to be addressing the original issue which was fixed by the patch that was applied to RC4. Are you saying that the patch didn't fix the problem entirely or are you suggesting that we back out of that patch in favour of the one in comment 30?

Regardless, my opinion on this is that any patches that are proposed for inclusion into 3.2 need to be as minimal and concise as possible. I think the right answer for 3.2 is to fix any stop ship problems in the Java content extension itself and not try to come up with general behavior in the Common Navigator framework. At this stage in the release, we need to localize the affects of any changes as much as possible. 


Created attachment 41488
Adds NavigatorContentServiceLabelProvider as a listener for all delegate label providers

The first patch picked up changes in NavigatorContentServiceContentProvider that were part of the patch for another bug; those changes are not part of this patch. 

The patch includes changes to NavigatorContentExtension:

In the creation logic in NavigatorContentExtension.getLabelProvider():

+labelProvider.addListener((ILabelProviderListener)contentService.createCommonLabelProvider() );

In the dispose logic in NavigatorContentExtension.dispose():

+labelProvider.removeListener((ILabelProviderListener)contentService.createCommonLabelProvider());

In NavigatorContentServiceLabelProvider: 

+	/* (non-Javadoc)
+ * @see org.eclipse.jface.viewers.ILabelProviderListener#labelProviderChanged(org.eclipse.jface.viewers.LabelProviderChangedEvent)
+ */
+public void labelProviderChanged(LabelProviderChangedEvent event) { 
+	fireLabelProviderChanged(event);		
+}


Martin encouraged fixing the problem this way to avoid letting clients become dependent on the current behavior. I'm inclined to agree with him; I think that this is the best fix given our timeframe. The fix is very isolated, and provides behavior that some label providers depend on (the viewer listening for label changed events). 

Applying this patch would mean rolling back the changes to the JDT extension that were released for this defect.
OK, that patch makes a lot more sense to me. What you are saying is that the Common Navigator wraps each label provider and was delegating the calls to the get&lt;Text/Image/etc&gt; methods from the outer to inner label provider but was not propogating label change events from the inner label provider to the listeners that were registered with the outer label provider. This seems like a bug to me and not new behavior as I though originally. I also think that this is a fairly safe change and should not have a negative impact on Team (i.e. the label providers in team are probably either relying on the propogation of the events or are updating the view directly).
+1
Created attachment 41557
patch for jdt.ui to revert the RC4 change

patch reverts the JavaNavigatorLabelProvider to the version released in RC3 (with the exception of 2 fixes in the Javadoc)
*** Bug 141776 has been marked as a duplicate of this bug. ***
+1
So with the approval of Mike, Michael, and Martin, I'll release this patch today for the next RC spin. 
Released for 3.2RC5. 

Markus or Martin -- can you resolve this defect once you have reverted the JDT change?
Verified that the patch works for the scenario in comment 0
patch from comment 35 released for 20060518-0800
setting to fixed
verified in I20060519-0010</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="136725" />
    <CreationDate amount="2006-04-13 15:03:00 -0400" />
    <DupId amount="" />
    <classification amount="WebTools" />
    <Product amount="Dali JPA Tools" />
    <component amount="General" />
    <Version amount="unspecified" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="enhancement" />
    <Summery>Create persistence.xml with JPA project</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>Add wizard to create JPA project.
Created project will be a java project with META-INF directory containing persistence.xml.
Additional basic information will be captured, including provider, and persistence unit name.

Merge functionality with existing "add persistence ..." functionality.
This seems to have been fixed while I was refactoring the "Add Java Persistence" wizard (and Java Persistence project properties page).  I can no longer reproduce the problem according to the given instructions.
Disregard previous comments.  Bugzilla was barfing on me.
New JPA project wizard that creates persistence.xml has been added.
Closing as verified already.</WithStack>
    <WithOutStack>Add wizard to create JPA project.
Created project will be a java project with META-INF directory containing persistence.xml.
Additional basic information will be captured, including provider, and persistence unit name.

Merge functionality with existing "add persistence ..." functionality.
This seems to have been fixed while I was refactoring the "Add Java Persistence" wizard (and Java Persistence project properties page).  I can no longer reproduce the problem according to the given instructions.
Disregard previous comments.  Bugzilla was barfing on me.
New JPA project wizard that creates persistence.xml has been added.
Closing as verified already.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="136726" />
    <CreationDate amount="2006-04-13 15:05:00 -0400" />
    <DupId amount="" />
    <classification amount="WebTools" />
    <Product amount="Dali JPA Tools" />
    <component amount="General" />
    <Version amount="0.5" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="enhancement" />
    <Summery>Add persistence.xml validation</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>Add basic build validation for persistence.xml files in JPA projects.
Added basic validation.  But there are a lot more validation rules that could be added.
Closing Verified Fixed bugs from 0.5.</WithStack>
    <WithOutStack>Add basic build validation for persistence.xml files in JPA projects.
Added basic validation.  But there are a lot more validation rules that could be added.
Closing Verified Fixed bugs from 0.5.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="136727" />
    <CreationDate amount="2006-04-13 15:11:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="SWT" />
    <Version amount="3.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="enhancement" />
    <Summery>[StyledText] print embedded images and controls</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="NEW" />
    <resolution amount="" />
    <WithStack>3.2 M6

It is now possible to embed images and controls in a StyledText.
Would be nice to be able to print those images and controls to a printer.
We also need to print StyledText embedded images in a commercial application that we plan to reimplementing in rcp/jface/swt in a few months. When is it planned to implement this request? Otherwise, is there a workaround that we can use meantime?
Your bug has been moved to triage, visit http://www.eclipse.org/swt/triage.php for more info.</WithStack>
    <WithOutStack>3.2 M6

It is now possible to embed images and controls in a StyledText.
Would be nice to be able to print those images and controls to a printer.
We also need to print StyledText embedded images in a commercial application that we plan to reimplementing in rcp/jface/swt in a few months. When is it planned to implement this request? Otherwise, is there a workaround that we can use meantime?
Your bug has been moved to triage, visit http://www.eclipse.org/swt/triage.php for more info.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="136728" />
    <CreationDate amount="2006-04-13 15:14:00 -0400" />
    <DupId amount="" />
    <classification amount="Mylyn" />
    <Product amount="Mylyn" />
    <component amount="Java" />
    <Version amount="unspecified" />
    <rep_platform amount="PC" />
    <op_sys amount="All" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>NPE in ActiveFoldingEditorTracker.unregisterEditor(...) at line 51</Summery>
    <Patches amount="0" />
    <Stacktraces amount="1">
      <Stacktrace timestamp="1437330716133">
        <Exception>java.lang.NullPointerException</Exception>
        <Reason />
        <Frames>
          <Frame depth="0">org.eclipse.mylar.internal.java.ActiveFoldingEditorTracker.unregisterEditor(ActiveFoldingEditorTracker.java:51)</Frame>
          <Frame depth="1">org.eclipse.mylar.internal.java.ActiveFoldingEditorTracker.editorClosed(ActiveFoldingEditorTracker.java:37)</Frame>
          <Frame depth="2">org.eclipse.mylar.internal.ide.AbstractEditorTracker.partClosed(AbstractEditorTracker.java:25)</Frame>
          <Frame depth="3">org.eclipse.ui.internal.PartListenerList$3.run(PartListenerList.java:102)</Frame>
        </Frames>
      </Stacktrace>
    </Stacktraces>
    <SourceCodeRegions amount="1">
      <source_code type="functiondef">
        <location start="296" end="483" />
        <code>49	public void unregisterEditor(JavaEditor editor) {
50		ActiveFoldingListener listener = editorListenerMap.get(editor);
51		listener.dispose();
52		editorListenerMap.remove(editor);
53	}</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>Mylar 0.5.0 on Eclipse 3.2M6 under Linux.

Received an NPE when explicitly closing several editors:

!ENTRY org.eclipse.ui.workbench 4 2 2006-04-13 12:01:07.555!MESSAGE Problems occurred when invoking code from plug-in: "org.eclipse.ui.work
bench".
!STACK 0
java.lang.NullPointerException
        at org.eclipse.mylar.internal.java.ActiveFoldingEditorTracker.unregister
Editor(ActiveFoldingEditorTracker.java:51)
        at org.eclipse.mylar.internal.java.ActiveFoldingEditorTracker.editorClos
ed(ActiveFoldingEditorTracker.java:37)
        at org.eclipse.mylar.internal.ide.AbstractEditorTracker.partClosed(Abstr
actEditorTracker.java:25)
        at org.eclipse.ui.internal.PartListenerList$3.run(PartListenerList.java:102)
[elided]

This code corresponds to:

49	public void unregisterEditor(JavaEditor editor) {
50		ActiveFoldingListener listener = editorListenerMap.get(editor);
51		listener.dispose();
52		editorListenerMap.remove(editor);
53	}

Presumably listener should be checked for being non-null.
Fixed as suggested.</WithStack>
    <WithOutStack>Mylar 0.5.0 on Eclipse 3.2M6 under Linux.

Received an NPE when explicitly closing several editors:

!ENTRY org.eclipse.ui.workbench 4 2 2006-04-13 12:01:07.555!MESSAGE Problems occurred when invoking code from plug-in: "org.eclipse.ui.work
bench".
!STACK 0

[elided]

This code corresponds to:

49	public void unregisterEditor(JavaEditor editor) {
50		ActiveFoldingListener listener = editorListenerMap.get(editor);
51		listener.dispose();
52		editorListenerMap.remove(editor);
53	}

Presumably listener should be checked for being non-null.
Fixed as suggested.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="136729" />
    <CreationDate amount="2006-04-13 15:19:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="SWT" />
    <Version amount="3.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>[StyledText] printing makes embedded images disappear</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="1">
      <source_code type="functioncall">
        <location start="135" end="157" />
        <code>styledText.print();</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="1">
      <Enumeration lines="6">
        <Lines>
          <Line>1) Edit Snippet212.java. At the very last line of the "Add Image" button's selection listener, add the following line of code:</Line>
          <Line />
          <Line />
          <Line>2) Run the snippet.</Line>
          <Line />
          <Line>3) Click "Add Image" and find a nice little image file to add to the StyledText. Click Open.</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="NEW" />
    <resolution amount="" />
    <WithStack>3.2 M6

1) Edit Snippet212.java. At the very last line of the "Add Image" button's selection listener, add the following line of code:
   styledText.print();

2) Run the snippet.

3) Click "Add Image" and find a nice little image file to add to the StyledText. Click Open.

Bug: the StyledText being displayed gets "messed up". Now if you cause a repaint, the images all disappear.
Your bug has been moved to triage, visit http://www.eclipse.org/swt/triage.php for more info.</WithStack>
    <WithOutStack>3.2 M6

1) Edit Snippet212.java. At the very last line of the "Add Image" button's selection listener, add the following line of code:
   styledText.print();

2) Run the snippet.

3) Click "Add Image" and find a nice little image file to add to the StyledText. Click Open.

Bug: the StyledText being displayed gets "messed up". Now if you cause a repaint, the images all disappear.
Your bug has been moved to triage, visit http://www.eclipse.org/swt/triage.php for more info.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="136730" />
    <CreationDate amount="2006-04-13 15:21:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="JDT" />
    <component amount="UI" />
    <Version amount="3.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="enhancement" />
    <Summery>Make the JUnit Test Case Generator use the test_method template</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="WONTFIX" />
    <WithStack>It is nice that Eclipse provides a way to generate a JUnit test case from a class. It is also nice that Code Assist provides a template that generates a test_method for you.

It would be VERY nice indeed if Eclipse would generate all those test methods for you by using the test_method template. But, alas, it does not.

Failing that, it would be nice if the wizard would provide an option to generate all test methods in the test class so that they fail by default, which is what I wanted to do with the test_method template. This would only require adding a checkbox to the wizard that says "Make tests fail initially". This is a best practice for unit tests, to ensure you have to implement them.
you're right, it would be good to have a code template here.
will consider after 3.2
http://jub.sourceforge.net/ generates junit test cases from java classes. It is old, but so far it works with eclipse 3.1.2 perhaps a starting point or at least some ideas.

Just my 5re ;-)
/\/
As of now 'LATER' and 'REMIND' resolutions are no longer supported.
Please reopen this bug if it is still valid for you.</WithStack>
    <WithOutStack>It is nice that Eclipse provides a way to generate a JUnit test case from a class. It is also nice that Code Assist provides a template that generates a test_method for you.

It would be VERY nice indeed if Eclipse would generate all those test methods for you by using the test_method template. But, alas, it does not.

Failing that, it would be nice if the wizard would provide an option to generate all test methods in the test class so that they fail by default, which is what I wanted to do with the test_method template. This would only require adding a checkbox to the wizard that says "Make tests fail initially". This is a best practice for unit tests, to ensure you have to implement them.
you're right, it would be good to have a code template here.
will consider after 3.2
http://jub.sourceforge.net/ generates junit test cases from java classes. It is old, but so far it works with eclipse 3.1.2 perhaps a starting point or at least some ideas.

Just my 5re ;-)
/\/
As of now 'LATER' and 'REMIND' resolutions are no longer supported.
Please reopen this bug if it is still valid for you.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="136731" />
    <CreationDate amount="2006-04-13 15:22:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="JDT" />
    <component amount="Debug" />
    <Version amount="3.2" />
    <rep_platform amount="Macintosh" />
    <op_sys amount="Mac OS X - Carbon (unsup.)" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>[VM] VMDisconnectedException while debugging</Summery>
    <Patches amount="0" />
    <Stacktraces amount="4">
      <Stacktrace timestamp="1437330716149">
        <Exception>com.sun.jdi.VMDisconnectedException</Exception>
        <Reason>Got IOException from Virtual Machine</Reason>
        <Frames>
          <Frame depth="0">org.eclipse.jdi.internal.connect.PacketSendManager.sendPacket(PacketSendManager.java:80)</Frame>
          <Frame depth="1">org.eclipse.jdi.internal.MirrorImpl.requestVM(MirrorImpl.java:170)</Frame>
          <Frame depth="2">org.eclipse.jdi.internal.MirrorImpl.requestVM(MirrorImpl.java:192)</Frame>
          <Frame depth="3">org.eclipse.jdi.internal.VirtualMachineImpl.classesBySignature(VirtualMachineImpl.java:536)</Frame>
          <Frame depth="4">org.eclipse.jdi.internal.ReferenceTypeImpl.create(ReferenceTypeImpl.java:1241)</Frame>
          <Frame depth="5">org.eclipse.jdi.internal.TypeImpl.create(TypeImpl.java:64)</Frame>
          <Frame depth="6">org.eclipse.jdi.internal.ArrayTypeImpl.componentType(ArrayTypeImpl.java:91)</Frame>
          <Frame depth="7">org.eclipse.jdt.internal.debug.core.model.JDIReferenceType.getGenericName(JDIReferenceType.java:221)</Frame>
          <Frame depth="8">org.eclipse.jdt.internal.debug.core.model.JDIFieldVariable.getReferenceTypeName(JDIFieldVariable.java:195)</Frame>
          <Frame depth="9">org.eclipse.jdt.internal.debug.ui.JDIModelPresentation.getVariableText(JDIModelPresentation.java:1109)</Frame>
          <Frame depth="10">org.eclipse.jdt.internal.debug.ui.JDIModelPresentation.getText(JDIModelPresentation.java:193)</Frame>
          <Frame depth="11">org.eclipse.debug.internal.ui.LazyModelPresentation.getText(LazyModelPresentation.java:155)</Frame>
          <Frame depth="12">org.eclipse.debug.internal.ui.DelegatingModelPresentation.getText(DelegatingModelPresentation.java:156)</Frame>
          <Frame depth="13">org.eclipse.debug.internal.ui.views.launch.DebugElementHelper.getLabel(DebugElementHelper.java:78)</Frame>
          <Frame depth="14">org.eclipse.debug.internal.ui.elements.adapters.AsynchronousDebugLabelAdapter.getLabels(AsynchronousDebugLabelAdapter.java:79)</Frame>
          <Frame depth="15">org.eclipse.debug.internal.ui.elements.adapters.VariableLabelAdapter.getLabels(VariableLabelAdapter.java:51)</Frame>
          <Frame depth="16">org.eclipse.debug.internal.ui.viewers.provisional.AsynchronousLabelAdapter.computeLabels(AsynchronousLabelAdapter.java:79)</Frame>
          <Frame depth="17">org.eclipse.debug.internal.ui.elements.adapters.AsynchronousDebugLabelAdapter.computeLabels(AsynchronousDebugLabelAdapter.java:66)</Frame>
          <Frame depth="18">org.eclipse.debug.internal.ui.viewers.provisional.AsynchronousLabelAdapter$2.run(AsynchronousLabelAdapter.java:48)</Frame>
          <Frame depth="19">org.eclipse.core.internal.jobs.Worker.run(Worker.java:58)</Frame>
        </Frames>
      </Stacktrace>
      <Stacktrace timestamp="1437330716149">
        <Exception>org.eclipse.debug.core.DebugException</Exception>
        <Reason>com.sun.jdi.VMDisconnectedException: Got IOException from Virtual Machine occurred while retrieving value.</Reason>
        <Frames>
          <Frame depth="0">org.eclipse.jdt.internal.debug.core.model.JDIDebugElement.throwDebugException(JDIDebugElement.java:207)</Frame>
          <Frame depth="1">org.eclipse.jdt.internal.debug.core.model.JDIDebugElement.requestFailed(JDIDebugElement.java:162)</Frame>
          <Frame depth="2">org.eclipse.jdt.internal.debug.core.model.JDIDebugElement.targetRequestFailed(JDIDebugElement.java:147)</Frame>
          <Frame depth="3">org.eclipse.jdt.internal.debug.core.model.JDIVariable.getCurrentValue(JDIVariable.java:69)</Frame>
          <Frame depth="4">org.eclipse.jdt.internal.debug.core.model.JDIVariable.getValue(JDIVariable.java:89)</Frame>
          <Frame depth="5">org.eclipse.pde.internal.ui.launcher.PDESourceLookupQuery.getObject(PDESourceLookupQuery.java:114)</Frame>
          <Frame depth="6">org.eclipse.pde.internal.ui.launcher.PDESourceLookupQuery.findSourceElement(PDESourceLookupQuery.java:99)</Frame>
          <Frame depth="7">org.eclipse.pde.internal.ui.launcher.PDESourceLookupQuery.run(PDESourceLookupQuery.java:77)</Frame>
          <Frame depth="8">org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:37)</Frame>
          <Frame depth="9">org.eclipse.pde.internal.ui.launcher.PDESourceLookupDirector.getSourceElement(PDESourceLookupDirector.java:52)</Frame>
          <Frame depth="10">org.eclipse.debug.internal.ui.sourcelookup.SourceLookupFacility.lookup(SourceLookupFacility.java:147)</Frame>
          <Frame depth="11">org.eclipse.debug.ui.DebugUITools.lookupSource(DebugUITools.java:681)</Frame>
          <Frame depth="12">org.eclipse.debug.internal.ui.elements.adapters.StackFrameSourceDisplayAdapter$SourceLookupJob.run(StackFrameSourceDisplayAdapter.java:100)</Frame>
          <Frame depth="13">org.eclipse.core.internal.jobs.Worker.run(Worker.java:58)</Frame>
        </Frames>
      </Stacktrace>
      <Stacktrace timestamp="1437330716149">
        <Exception>com.sun.jdi.VMDisconnectedException</Exception>
        <Reason>Got IOException from Virtual Machine</Reason>
        <Frames>
          <Frame depth="0">org.eclipse.jdi.internal.connect.PacketSendManager.sendPacket(PacketSendManager.java:80)</Frame>
          <Frame depth="1">org.eclipse.jdi.internal.MirrorImpl.requestVM(MirrorImpl.java:170)</Frame>
          <Frame depth="2">org.eclipse.jdi.internal.MirrorImpl.requestVM(MirrorImpl.java:192)</Frame>
          <Frame depth="3">org.eclipse.jdi.internal.ObjectReferenceImpl.getValues(ObjectReferenceImpl.java:246)</Frame>
          <Frame depth="4">org.eclipse.jdi.internal.ObjectReferenceImpl.getValue(ObjectReferenceImpl.java:190)</Frame>
          <Frame depth="5">org.eclipse.jdt.internal.debug.core.model.JDIFieldVariable.retrieveValue(JDIFieldVariable.java:78)</Frame>
          <Frame depth="6">org.eclipse.jdt.internal.debug.core.model.JDIVariable.getCurrentValue(JDIVariable.java:67)</Frame>
          <Frame depth="7">org.eclipse.jdt.internal.debug.core.model.JDIVariable.getValue(JDIVariable.java:89)</Frame>
          <Frame depth="8">org.eclipse.pde.internal.ui.launcher.PDESourceLookupQuery.getObject(PDESourceLookupQuery.java:114)</Frame>
          <Frame depth="9">org.eclipse.pde.internal.ui.launcher.PDESourceLookupQuery.findSourceElement(PDESourceLookupQuery.java:99)</Frame>
          <Frame depth="10">org.eclipse.pde.internal.ui.launcher.PDESourceLookupQuery.run(PDESourceLookupQuery.java:77)</Frame>
          <Frame depth="11">org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:37)</Frame>
          <Frame depth="12">org.eclipse.pde.internal.ui.launcher.PDESourceLookupDirector.getSourceElement(PDESourceLookupDirector.java:52)</Frame>
          <Frame depth="13">org.eclipse.debug.internal.ui.sourcelookup.SourceLookupFacility.lookup(SourceLookupFacility.java:147)</Frame>
          <Frame depth="14">org.eclipse.debug.ui.DebugUITools.lookupSource(DebugUITools.java:681)</Frame>
          <Frame depth="15">org.eclipse.debug.internal.ui.elements.adapters.StackFrameSourceDisplayAdapter$SourceLookupJob.run(StackFrameSourceDisplayAdapter.java:100)</Frame>
          <Frame depth="16">org.eclipse.core.internal.jobs.Worker.run(Worker.java:58)</Frame>
        </Frames>
      </Stacktrace>
      <Stacktrace timestamp="1437330716149">
        <Exception>com.sun.jdi.VMDisconnectedException</Exception>
        <Reason>Got IOException from Virtual Machine</Reason>
        <Frames>
          <Frame depth="0">org.eclipse.jdi.internal.connect.PacketSendManager.sendPacket(PacketSendManager.java:80)</Frame>
          <Frame depth="1">org.eclipse.jdi.internal.MirrorImpl.requestVM(MirrorImpl.java:170)</Frame>
          <Frame depth="2">org.eclipse.jdi.internal.MirrorImpl.requestVM(MirrorImpl.java:192)</Frame>
          <Frame depth="3">org.eclipse.jdi.internal.ObjectReferenceImpl.getValues(ObjectReferenceImpl.java:246)</Frame>
          <Frame depth="4">org.eclipse.jdi.internal.ObjectReferenceImpl.getValue(ObjectReferenceImpl.java:190)</Frame>
          <Frame depth="5">org.eclipse.jdt.internal.debug.core.model.JDIFieldVariable.retrieveValue(JDIFieldVariable.java:78)</Frame>
          <Frame depth="6">org.eclipse.jdt.internal.debug.core.model.JDIVariable.getCurrentValue(JDIVariable.java:67)</Frame>
          <Frame depth="7">org.eclipse.jdt.internal.debug.core.model.JDIVariable.getValue(JDIVariable.java:89)</Frame>
          <Frame depth="8">org.eclipse.pde.internal.ui.launcher.PDESourceLookupQuery.getObject(PDESourceLookupQuery.java:114)</Frame>
          <Frame depth="9">org.eclipse.pde.internal.ui.launcher.PDESourceLookupQuery.findSourceElement(PDESourceLookupQuery.java:99)</Frame>
          <Frame depth="10">org.eclipse.pde.internal.ui.launcher.PDESourceLookupQuery.run(PDESourceLookupQuery.java:77)</Frame>
          <Frame depth="11">org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:37)</Frame>
          <Frame depth="12">org.eclipse.pde.internal.ui.launcher.PDESourceLookupDirector.getSourceElement(PDESourceLookupDirector.java:52)</Frame>
          <Frame depth="13">org.eclipse.debug.internal.ui.sourcelookup.SourceLookupFacility.lookup(SourceLookupFacility.java:147)</Frame>
          <Frame depth="14">org.eclipse.debug.ui.DebugUITools.lookupSource(DebugUITools.java:681)</Frame>
          <Frame depth="15">org.eclipse.debug.internal.ui.elements.adapters.StackFrameSourceDisplayAdapter$SourceLookupJob.run(StackFrameSourceDisplayAdapter.java:100)</Frame>
          <Frame depth="16">org.eclipse.core.internal.jobs.Worker.run(Worker.java:58)</Frame>
        </Frames>
      </Stacktrace>
    </Stacktraces>
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="WORKSFORME" />
    <WithStack>Running on an Intel Mac OS X 10.4.6 2 GHz Intel Core Duo

eclipse.buildId=I20060413-1330
java.version=1.4.2_09
java.vendor=Apple Computer, Inc.
BootLoader constants: OS=macosx, ARCH=ppc, WS=carbon, NL=en_US
Framework arguments:  -keyring /Users/vikki/.eclipse_keyring -showlocation
Command-line arguments:  -os macosx -ws carbon -arch ppc -keyring /Users/vikki/.eclipse_keyring -consoleLog -showlocation

Import org.eclipse.swt. and org.eclipse.swt.carbon.macosx.ppc as existing plugins.  Place a breakpoint in Snippet191 (org.eclipse.swt.snippets).  Debug snippet using Debug As ... SWT Applicaton.  Hit brakpoint then resume.  Close snippet.  get the following error in log:

com.sun.jdi.VMDisconnectedException: Got IOException from Virtual Machine
at org.eclipse.jdi.internal.connect.PacketSendManager.sendPacket(PacketSendManager.java:80)
at org.eclipse.jdi.internal.MirrorImpl.requestVM(MirrorImpl.java:170)
at org.eclipse.jdi.internal.MirrorImpl.requestVM(MirrorImpl.java:192)
at org.eclipse.jdi.internal.VirtualMachineImpl.classesBySignature(VirtualMachineImpl.java:536)
at org.eclipse.jdi.internal.ReferenceTypeImpl.create(ReferenceTypeImpl.java:1241)
at org.eclipse.jdi.internal.TypeImpl.create(TypeImpl.java:64)
at org.eclipse.jdi.internal.ArrayTypeImpl.componentType(ArrayTypeImpl.java:91)
at org.eclipse.jdt.internal.debug.core.model.JDIReferenceType.getGenericName(JDIReferenceType.java:221)
at org.eclipse.jdt.internal.debug.core.model.JDIFieldVariable.getReferenceTypeName(JDIFieldVariable.java:195)
at org.eclipse.jdt.internal.debug.ui.JDIModelPresentation.getVariableText(JDIModelPresentation.java:1109)
at org.eclipse.jdt.internal.debug.ui.JDIModelPresentation.getText(JDIModelPresentation.java:193)
at org.eclipse.debug.internal.ui.LazyModelPresentation.getText(LazyModelPresentation.java:155)
at org.eclipse.debug.internal.ui.DelegatingModelPresentation.getText(DelegatingModelPresentation.java:156)
at org.eclipse.debug.internal.ui.views.launch.DebugElementHelper.getLabel(DebugElementHelper.java:78)
at org.eclipse.debug.internal.ui.elements.adapters.AsynchronousDebugLabelAdapter.getLabels(AsynchronousDebugLabelAdapter.java:79)
at org.eclipse.debug.internal.ui.elements.adapters.VariableLabelAdapter.getLabels(VariableLabelAdapter.java:51)
at org.eclipse.debug.internal.ui.viewers.provisional.AsynchronousLabelAdapter.computeLabels(AsynchronousLabelAdapter.java:79)
at org.eclipse.debug.internal.ui.elements.adapters.AsynchronousDebugLabelAdapter.computeLabels(AsynchronousDebugLabelAdapter.java:66)
at org.eclipse.debug.internal.ui.viewers.provisional.AsynchronousLabelAdapter$2.run(AsynchronousLabelAdapter.java:48)
at org.eclipse.core.internal.jobs.Worker.run(Worker.java:58)
I am seeing this on Windows XP with Eclipse 3.2 RC2.  If I pause at any breakpoint in code, then terminate the application being debugged in the Debug window, then a blank editor window is opened in the workspace with red text "Source not found" and a button, "Edit Source Lookup Path..."


!ENTRY org.eclipse.pde.ui 4 2 2006-05-01 17:36:23.937
!MESSAGE Problems occurred when invoking code from plug-in: "org.eclipse.pde.ui".
!STACK 1
org.eclipse.debug.core.DebugException: com.sun.jdi.VMDisconnectedException: Got IOException from Virtual Machine occurred while retrieving value.
	at org.eclipse.jdt.internal.debug.core.model.JDIDebugElement.throwDebugException(JDIDebugElement.java:207)
	at org.eclipse.jdt.internal.debug.core.model.JDIDebugElement.requestFailed(JDIDebugElement.java:162)
	at org.eclipse.jdt.internal.debug.core.model.JDIDebugElement.targetRequestFailed(JDIDebugElement.java:147)
	at org.eclipse.jdt.internal.debug.core.model.JDIVariable.getCurrentValue(JDIVariable.java:69)
	at org.eclipse.jdt.internal.debug.core.model.JDIVariable.getValue(JDIVariable.java:89)
	at org.eclipse.pde.internal.ui.launcher.PDESourceLookupQuery.getObject(PDESourceLookupQuery.java:114)
	at org.eclipse.pde.internal.ui.launcher.PDESourceLookupQuery.findSourceElement(PDESourceLookupQuery.java:99)
	at org.eclipse.pde.internal.ui.launcher.PDESourceLookupQuery.run(PDESourceLookupQuery.java:77)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:37)
	at org.eclipse.pde.internal.ui.launcher.PDESourceLookupDirector.getSourceElement(PDESourceLookupDirector.java:52)
	at org.eclipse.debug.internal.ui.sourcelookup.SourceLookupFacility.lookup(SourceLookupFacility.java:147)
	at org.eclipse.debug.ui.DebugUITools.lookupSource(DebugUITools.java:681)
	at org.eclipse.debug.internal.ui.elements.adapters.StackFrameSourceDisplayAdapter$SourceLookupJob.run(StackFrameSourceDisplayAdapter.java:100)
	at org.eclipse.core.internal.jobs.Worker.run(Worker.java:58)
org.eclipse.debug.core.DebugException[5010]: com.sun.jdi.VMDisconnectedException: Got IOException from Virtual Machine
	at org.eclipse.jdi.internal.connect.PacketSendManager.sendPacket(PacketSendManager.java:80)
	at org.eclipse.jdi.internal.MirrorImpl.requestVM(MirrorImpl.java:170)
	at org.eclipse.jdi.internal.MirrorImpl.requestVM(MirrorImpl.java:192)
	at org.eclipse.jdi.internal.ObjectReferenceImpl.getValues(ObjectReferenceImpl.java:246)
	at org.eclipse.jdi.internal.ObjectReferenceImpl.getValue(ObjectReferenceImpl.java:190)
	at org.eclipse.jdt.internal.debug.core.model.JDIFieldVariable.retrieveValue(JDIFieldVariable.java:78)
	at org.eclipse.jdt.internal.debug.core.model.JDIVariable.getCurrentValue(JDIVariable.java:67)
	at org.eclipse.jdt.internal.debug.core.model.JDIVariable.getValue(JDIVariable.java:89)
	at org.eclipse.pde.internal.ui.launcher.PDESourceLookupQuery.getObject(PDESourceLookupQuery.java:114)
	at org.eclipse.pde.internal.ui.launcher.PDESourceLookupQuery.findSourceElement(PDESourceLookupQuery.java:99)
	at org.eclipse.pde.internal.ui.launcher.PDESourceLookupQuery.run(PDESourceLookupQuery.java:77)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:37)
	at org.eclipse.pde.internal.ui.launcher.PDESourceLookupDirector.getSourceElement(PDESourceLookupDirector.java:52)
	at org.eclipse.debug.internal.ui.sourcelookup.SourceLookupFacility.lookup(SourceLookupFacility.java:147)
	at org.eclipse.debug.ui.DebugUITools.lookupSource(DebugUITools.java:681)
	at org.eclipse.debug.internal.ui.elements.adapters.StackFrameSourceDisplayAdapter$SourceLookupJob.run(StackFrameSourceDisplayAdapter.java:100)
	at org.eclipse.core.internal.jobs.Worker.run(Worker.java:58)
!SUBENTRY 1 org.eclipse.jdt.debug 4 5010 2006-05-01 17:36:23.937
!MESSAGE com.sun.jdi.VMDisconnectedException: Got IOException from Virtual Machine occurred while retrieving value.
!STACK 0
com.sun.jdi.VMDisconnectedException: Got IOException from Virtual Machine
	at org.eclipse.jdi.internal.connect.PacketSendManager.sendPacket(PacketSendManager.java:80)
	at org.eclipse.jdi.internal.MirrorImpl.requestVM(MirrorImpl.java:170)
	at org.eclipse.jdi.internal.MirrorImpl.requestVM(MirrorImpl.java:192)
	at org.eclipse.jdi.internal.ObjectReferenceImpl.getValues(ObjectReferenceImpl.java:246)
	at org.eclipse.jdi.internal.ObjectReferenceImpl.getValue(ObjectReferenceImpl.java:190)
	at org.eclipse.jdt.internal.debug.core.model.JDIFieldVariable.retrieveValue(JDIFieldVariable.java:78)
	at org.eclipse.jdt.internal.debug.core.model.JDIVariable.getCurrentValue(JDIVariable.java:67)
	at org.eclipse.jdt.internal.debug.core.model.JDIVariable.getValue(JDIVariable.java:89)
	at org.eclipse.pde.internal.ui.launcher.PDESourceLookupQuery.getObject(PDESourceLookupQuery.java:114)
	at org.eclipse.pde.internal.ui.launcher.PDESourceLookupQuery.findSourceElement(PDESourceLookupQuery.java:99)
	at org.eclipse.pde.internal.ui.launcher.PDESourceLookupQuery.run(PDESourceLookupQuery.java:77)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:37)
	at org.eclipse.pde.internal.ui.launcher.PDESourceLookupDirector.getSourceElement(PDESourceLookupDirector.java:52)
	at org.eclipse.debug.internal.ui.sourcelookup.SourceLookupFacility.lookup(SourceLookupFacility.java:147)
	at org.eclipse.debug.ui.DebugUITools.lookupSource(DebugUITools.java:681)
	at org.eclipse.debug.internal.ui.elements.adapters.StackFrameSourceDisplayAdapter$SourceLookupJob.run(StackFrameSourceDisplayAdapter.java:100)
	at org.eclipse.core.internal.jobs.Worker.run(Worker.java:58)
!SUBENTRY 1 org.eclipse.jdt.debug 4 5010 2006-05-01 17:36:23.937
!MESSAGE com.sun.jdi.VMDisconnectedException: Got IOException from Virtual Machine occurred while retrieving value.
!STACK 0
com.sun.jdi.VMDisconnectedException: Got IOException from Virtual Machine
	at org.eclipse.jdi.internal.connect.PacketSendManager.sendPacket(PacketSendManager.java:80)
	at org.eclipse.jdi.internal.MirrorImpl.requestVM(MirrorImpl.java:170)
	at org.eclipse.jdi.internal.MirrorImpl.requestVM(MirrorImpl.java:192)
	at org.eclipse.jdi.internal.ObjectReferenceImpl.getValues(ObjectReferenceImpl.java:246)
	at org.eclipse.jdi.internal.ObjectReferenceImpl.getValue(ObjectReferenceImpl.java:190)
	at org.eclipse.jdt.internal.debug.core.model.JDIFieldVariable.retrieveValue(JDIFieldVariable.java:78)
	at org.eclipse.jdt.internal.debug.core.model.JDIVariable.getCurrentValue(JDIVariable.java:67)
	at org.eclipse.jdt.internal.debug.core.model.JDIVariable.getValue(JDIVariable.java:89)
	at org.eclipse.pde.internal.ui.launcher.PDESourceLookupQuery.getObject(PDESourceLookupQuery.java:114)
	at org.eclipse.pde.internal.ui.launcher.PDESourceLookupQuery.findSourceElement(PDESourceLookupQuery.java:99)
	at org.eclipse.pde.internal.ui.launcher.PDESourceLookupQuery.run(PDESourceLookupQuery.java:77)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:37)
	at org.eclipse.pde.internal.ui.launcher.PDESourceLookupDirector.getSourceElement(PDESourceLookupDirector.java:52)
	at org.eclipse.debug.internal.ui.sourcelookup.SourceLookupFacility.lookup(SourceLookupFacility.java:147)
	at org.eclipse.debug.ui.DebugUITools.lookupSource(DebugUITools.java:681)
	at org.eclipse.debug.internal.ui.elements.adapters.StackFrameSourceDisplayAdapter$SourceLookupJob.run(StackFrameSourceDisplayAdapter.java:100)
	at org.eclipse.core.internal.jobs.Worker.run(Worker.java:58)

This does not happen in Eclipse 3.1
These are different problems. Will create a new bug for the PDE source lookup issue.
There are no Intel macs available to the debug team.
I haven't been able to reproduce this with a PPC mac. Is this still happening Veronika?
*** Bug 144430 has been marked as a duplicate of this bug. ***
Kevin can you try this on an Intel Mac at your current location?
yes there is. 
The debugger is working as expected for me on the intel mac.
oops... I was using Felipe's machine to test and didn't log him out before submitting comment #6.
Changing OS from Mac OS to Mac OS X as per bug 185991</WithStack>
    <WithOutStack>Running on an Intel Mac OS X 10.4.6 2 GHz Intel Core Duo

eclipse.buildId=I20060413-1330
java.version=1.4.2_09
java.vendor=Apple Computer, Inc.
BootLoader constants: OS=macosx, ARCH=ppc, WS=carbon, NL=en_US
Framework arguments:  -keyring /Users/vikki/.eclipse_keyring -showlocation
Command-line arguments:  -os macosx -ws carbon -arch ppc -keyring /Users/vikki/.eclipse_keyring -consoleLog -showlocation

Import org.eclipse.swt. and org.eclipse.swt.carbon.macosx.ppc as existing plugins.  Place a breakpoint in Snippet191 (org.eclipse.swt.snippets).  Debug snippet using Debug As ... SWT Applicaton.  Hit brakpoint then resume.  Close snippet.  get the following error in log:

I am seeing this on Windows XP with Eclipse 3.2 RC2.  If I pause at any breakpoint in code, then terminate the application being debugged in the Debug window, then a blank editor window is opened in the workspace with red text "Source not found" and a button, "Edit Source Lookup Path..."


!ENTRY org.eclipse.pde.ui 4 2 2006-05-01 17:36:23.937
!MESSAGE Problems occurred when invoking code from plug-in: "org.eclipse.pde.ui".
!STACK 1
org.eclipse.debug.core.DebugException[5010]: !SUBENTRY 1 org.eclipse.jdt.debug 4 5010 2006-05-01 17:36:23.937
!MESSAGE com.sun.jdi.VMDisconnectedException: Got IOException from Virtual Machine occurred while retrieving value.
!STACK 0
com.sun.jdi.VMDisconnectedException: Got IOException from Virtual Machine
	at org.eclipse.jdi.internal.connect.PacketSendManager.sendPacket(PacketSendManager.java:80)
	at org.eclipse.jdi.internal.MirrorImpl.requestVM(MirrorImpl.java:170)
	at org.eclipse.jdi.internal.MirrorImpl.requestVM(MirrorImpl.java:192)
	at org.eclipse.jdi.internal.ObjectReferenceImpl.getValues(ObjectReferenceImpl.java:246)
	at org.eclipse.jdi.internal.ObjectReferenceImpl.getValue(ObjectReferenceImpl.java:190)
	at org.eclipse.jdt.internal.debug.core.model.JDIFieldVariable.retrieveValue(JDIFieldVariable.java:78)
	at org.eclipse.jdt.internal.debug.core.model.JDIVariable.getCurrentValue(JDIVariable.java:67)
	at org.eclipse.jdt.internal.debug.core.model.JDIVariable.getValue(JDIVariable.java:89)
	at org.eclipse.pde.internal.ui.launcher.PDESourceLookupQuery.getObject(PDESourceLookupQuery.java:114)
	at org.eclipse.pde.internal.ui.launcher.PDESourceLookupQuery.findSourceElement(PDESourceLookupQuery.java:99)
	at org.eclipse.pde.internal.ui.launcher.PDESourceLookupQuery.run(PDESourceLookupQuery.java:77)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:37)
	at org.eclipse.pde.internal.ui.launcher.PDESourceLookupDirector.getSourceElement(PDESourceLookupDirector.java:52)
	at org.eclipse.debug.internal.ui.sourcelookup.SourceLookupFacility.lookup(SourceLookupFacility.java:147)
	at org.eclipse.debug.ui.DebugUITools.lookupSource(DebugUITools.java:681)
	at org.eclipse.debug.internal.ui.elements.adapters.StackFrameSourceDisplayAdapter$SourceLookupJob.run(StackFrameSourceDisplayAdapter.java:100)
	at org.eclipse.core.internal.jobs.Worker.run(Worker.java:58)
!SUBENTRY 1 org.eclipse.jdt.debug 4 5010 2006-05-01 17:36:23.937
!MESSAGE com.sun.jdi.VMDisconnectedException: Got IOException from Virtual Machine occurred while retrieving value.
!STACK 0


This does not happen in Eclipse 3.1
These are different problems. Will create a new bug for the PDE source lookup issue.
There are no Intel macs available to the debug team.
I haven't been able to reproduce this with a PPC mac. Is this still happening Veronika?
*** Bug 144430 has been marked as a duplicate of this bug. ***
Kevin can you try this on an Intel Mac at your current location?
yes there is. 
The debugger is working as expected for me on the intel mac.
oops... I was using Felipe's machine to test and didn't log him out before submitting comment #6.
Changing OS from Mac OS to Mac OS X as per bug 185991</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="136732" />
    <CreationDate amount="2006-04-13 15:29:00 -0400" />
    <DupId amount="" />
    <classification amount="WebTools" />
    <Product amount="WTP Common Tools" />
    <component amount="wst.common" />
    <Version amount="1.0.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="blocker" />
    <Summery>Deadlock during autobuild</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>Attempting to adopt a nightly build of WTP 1.0.2 RC2 we are encountering the following dealock.  We suspect that the change introduced for bug 133187 might be causing it.

First are two error messages logged by the eclipse DeadlockDetector.

Next is a dump of the two threads involved.

 
     [exec] !ENTRY org.eclipse.core.runtime 4 2 2006-04-12 20:11:53.71

     [exec] !MESSAGE Deadlock detected. All locks owned by thread Worker-2 will be suspended.

     [exec] !STACK 0

     [exec] java.lang.IllegalStateException

     [exec]       at org.eclipse.core.internal.jobs.DeadlockDetector.reportDeadlock(DeadlockDetector.java:594)

     [exec]       at org.eclipse.core.internal.jobs.DeadlockDetector.lockWaitStart(DeadlockDetector.java:403)

     [exec]       at org.eclipse.core.internal.jobs.LockManager.addLockWaitThread(LockManager.java:141)

     [exec]       at org.eclipse.core.internal.jobs.OrderedLock.doAcquire(OrderedLock.java:165)

     [exec]       at org.eclipse.core.internal.jobs.OrderedLock.acquire(OrderedLock.java:103)

     [exec]       at org.eclipse.core.internal.jobs.OrderedLock.acquire(OrderedLock.java:80)

     [exec]       at org.eclipse.core.internal.resources.WorkManager.checkIn(WorkManager.java:97)

     [exec]       at org.eclipse.core.internal.resources.Workspace.prepareOperation(Workspace.java:1676)

     [exec]       at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1716)

     [exec]       at org.eclipse.jdt.internal.core.JavaModelOperation.runOperation(JavaModelOperation.java:782)

     [exec]       at org.eclipse.jdt.internal.core.PackageFragmentRoot.createPackageFragment(PackageFragmentRoot.java:310)

     [exec]       at org.eclipse.jdt.apt.core.internal.generatedfile.GeneratedFileManager.generateFileDuringBuild(GeneratedFileManager.java:211)

     [exec]       at org.eclipse.jdt.apt.core.internal.env.JavaSourceFilePrintWriter.close(JavaSourceFilePrintWriter.java:57)

     [exec]       at org.apache.beehive.controls.runtime.generator.IndentingWriter.close(IndentingWriter.java:94)

     [exec]       at org.apache.beehive.controls.runtime.generator.VelocityGenerator.generate(VelocityGenerator.java:78)

     [exec]       at org.apache.beehive.controls.runtime.generator.apt.ControlAnnotationProcessor.check(ControlAnnotationProcessor.java:90)

     [exec]       at org.apache.beehive.controls.runtime.generator.apt.TwoPhaseAnnotationProcessor.check(TwoPhaseAnnotationProcessor.java:103)

     [exec]       at org.apache.beehive.controls.runtime.generator.apt.TwoPhaseAnnotationProcessor.process(TwoPhaseAnnotationProcessor.java:85)

     [exec]       at org.eclipse.jdt.apt.core.internal.APTDispatchRunnable.runAPTInFileBasedMode(APTDispatchRunnable.java:311)

     [exec]       at org.eclipse.jdt.apt.core.internal.APTDispatchRunnable.runAPT(APTDispatchRunnable.java:548)

     [exec]       at org.eclipse.jdt.apt.core.internal.APTDispatchRunnable.runAPT(APTDispatchRunnable.java:472)

     [exec]       at org.eclipse.jdt.apt.core.internal.APTDispatchRunnable.run(APTDispatchRunnable.java:210)

     [exec]       at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1721)

     [exec]       at org.eclipse.jdt.apt.core.internal.APTDispatch.runAPT(APTDispatch.java:90)

     [exec]       at org.eclipse.jdt.apt.core.internal.APTDispatch.runAPTDuringBuild(APTDispatch.java:47)

     [exec]       at org.eclipse.jdt.apt.core.internal.AptCompilationParticipant.preBuildNotify(AptCompilationParticipant.java:125)

     [exec]       at org.eclipse.jdt.apt.core.internal.AptCompilationParticipant.notify(AptCompilationParticipant.java:83)

     [exec]       at org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.notifyCompilationParticipants(AbstractImageBuilder.java:271)

     [exec]       at org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.compile(AbstractImageBuilder.java:459)

     [exec]       at org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.compile(AbstractImageBuilder.java:206)

     [exec]       at org.eclipse.jdt.internal.core.builder.IncrementalImageBuilder.build(IncrementalImageBuilder.java:114)

     [exec]       at org.eclipse.jdt.internal.core.builder.JavaBuilder.buildDeltas(JavaBuilder.java:238)

     [exec]       at org.eclipse.jdt.internal.core.builder.JavaBuilder.build(JavaBuilder.java:166)

     [exec]       at org.eclipse.core.internal.events.BuildManager$2.run(BuildManager.java:593)

     [exec]       at org.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java:1044)

     [exec]       at org.eclipse.core.runtime.Platform.run(Platform.java:783)

     [exec]       at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:168)

     [exec]       at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:202)

     [exec]       at org.eclipse.core.internal.events.BuildManager$1.run(BuildManager.java:231)

     [exec]       at org.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java:1044)

     [exec]       at org.eclipse.core.runtime.Platform.run(Platform.java:783)

     [exec]       at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:234)

     [exec]       at org.eclipse.core.internal.events.BuildManager.basicBuildLoop(BuildManager.java:253)

     [exec]       at org.eclipse.core.internal.events.BuildManager.build(BuildManager.java:282)

     [exec]       at org.eclipse.core.internal.events.AutoBuildJob.doBuild(AutoBuildJob.java:139)

     [exec]       at org.eclipse.core.internal.events.AutoBuildJob.run(AutoBuildJob.java:200)

     [exec]       at org.eclipse.core.internal.jobs.Worker.run(Worker.java:76)

     [exec] !SUBENTRY 1 org.eclipse.core.runtime 4 2 2006-04-12 20:11:53.71

     [exec] !MESSAGE Thread Worker-4 has locks: R/, P/DRTEARProject, L/DRTUtilityProject/src/controls/db/EmptyDRTDBControl.java and is waiting for lock OrderedLock (0)

     [exec] !SUBENTRY 1 org.eclipse.core.runtime 4 2 2006-04-12 20:11:53.71

     [exec] !MESSAGE Thread Worker-2 has locks: OrderedLock (0) and is waiting for lock P/DRTEARProject

 

     [exec] !ENTRY org.eclipse.core.runtime 4 2 2006-04-12 20:11:53.86

     [exec] !MESSAGE An internal error occurred during: "{0}".

     [exec] !STACK 0

     [exec] java.lang.IllegalStateException: Deadlock detected. Caused by thread Worker-4.

     [exec]       at org.eclipse.core.internal.jobs.DeadlockDetector.lockWaitStart(DeadlockDetector.java:405)

     [exec]       at org.eclipse.core.internal.jobs.LockManager.addLockWaitThread(LockManager.java:141)

     [exec]       at org.eclipse.core.internal.jobs.OrderedLock.doAcquire(OrderedLock.java:165)

     [exec]       at org.eclipse.core.internal.jobs.OrderedLock.acquire(OrderedLock.java:103)

     [exec]       at org.eclipse.core.internal.jobs.OrderedLock.acquire(OrderedLock.java:80)

     [exec]       at org.eclipse.core.internal.resources.WorkManager.checkIn(WorkManager.java:97)

     [exec]       at org.eclipse.core.internal.resources.Workspace.prepareOperation(Workspace.java:1676)

     [exec]       at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1716)

     [exec]       at org.eclipse.jdt.internal.core.JavaModelOperation.runOperation(JavaModelOperation.java:782)

     [exec]       at org.eclipse.jdt.internal.core.PackageFragmentRoot.createPackageFragment(PackageFragmentRoot.java:310)

     [exec]       at org.eclipse.jdt.apt.core.internal.generatedfile.GeneratedFileManager.generateFileDuringBuild(GeneratedFileManager.java:211)

     [exec]       at org.eclipse.jdt.apt.core.internal.env.JavaSourceFilePrintWriter.close(JavaSourceFilePrintWriter.java:57)

     [exec]       at org.apache.beehive.controls.runtime.generator.IndentingWriter.close(IndentingWriter.java:94)

     [exec]       at org.apache.beehive.controls.runtime.generator.VelocityGenerator.generate(VelocityGenerator.java:78)

     [exec]       at org.apache.beehive.controls.runtime.generator.apt.ControlAnnotationProcessor.check(ControlAnnotationProcessor.java:90)

     [exec]       at org.apache.beehive.controls.runtime.generator.apt.TwoPhaseAnnotationProcessor.check(TwoPhaseAnnotationProcessor.java:103)

     [exec]       at org.apache.beehive.controls.runtime.generator.apt.TwoPhaseAnnotationProcessor.process(TwoPhaseAnnotationProcessor.java:85)

     [exec]       at org.eclipse.jdt.apt.core.internal.APTDispatchRunnable.runAPTInFileBasedMode(APTDispatchRunnable.java:311)

     [exec]       at org.eclipse.jdt.apt.core.internal.APTDispatchRunnable.runAPT(APTDispatchRunnable.java:548)

     [exec]       at org.eclipse.jdt.apt.core.internal.APTDispatchRunnable.runAPT(APTDispatchRunnable.java:472)

     [exec]       at org.eclipse.jdt.apt.core.internal.APTDispatchRunnable.run(APTDispatchRunnable.java:210)

     [exec]       at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1721)

     [exec]       at org.eclipse.jdt.apt.core.internal.APTDispatch.runAPT(APTDispatch.java:90)

     [exec]       at org.eclipse.jdt.apt.core.internal.APTDispatch.runAPTDuringBuild(APTDispatch.java:47)

     [exec]       at org.eclipse.jdt.apt.core.internal.AptCompilationParticipant.preBuildNotify(AptCompilationParticipant.java:125)

     [exec]       at org.eclipse.jdt.apt.core.internal.AptCompilationParticipant.notify(AptCompilationParticipant.java:83)

     [exec]       at org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.notifyCompilationParticipants(AbstractImageBuilder.java:271)

     [exec]       at org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.compile(AbstractImageBuilder.java:459)

     [exec]       at org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.compile(AbstractImageBuilder.java:206)

     [exec]       at org.eclipse.jdt.internal.core.builder.IncrementalImageBuilder.build(IncrementalImageBuilder.java:114)

     [exec]       at org.eclipse.jdt.internal.core.builder.JavaBuilder.buildDeltas(JavaBuilder.java:238)

     [exec]       at org.eclipse.jdt.internal.core.builder.JavaBuilder.build(JavaBuilder.java:166)

     [exec]       at org.eclipse.core.internal.events.BuildManager$2.run(BuildManager.java:593)

     [exec]       at org.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java:1044)

     [exec]       at org.eclipse.core.runtime.Platform.run(Platform.java:783)

     [exec]       at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:168)

     [exec]       at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:202)

     [exec]       at org.eclipse.core.internal.events.BuildManager$1.run(BuildManager.java:231)

     [exec]       at org.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java:1044)

     [exec]       at org.eclipse.core.runtime.Platform.run(Platform.java:783)

     [exec]       at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:234)

     [exec]       at org.eclipse.core.internal.events.BuildManager.basicBuildLoop(BuildManager.java:253)

     [exec]       at org.eclipse.core.internal.events.BuildManager.build(BuildManager.java:282)

     [exec]       at org.eclipse.core.internal.events.AutoBuildJob.doBuild(AutoBuildJob.java:139)

     [exec]       at org.eclipse.core.internal.events.AutoBuildJob.run(AutoBuildJob.java:200)

     [exec]       at org.eclipse.core.internal.jobs.Worker.run(Worker.java:76)

 

     [exec]  :: 

     [exec]  R/, OrderedLock (0), P/DRTEARProject, L/DRTUtilityProject/src/controls/db/EmptyDRTDBControl.java,

     [exec]  Worker-4 :  1, -1, 1, 1,

     [exec]  Worker-2 :  0, 1, -1, 0,

     [exec]  Worker-0 :  0, 0, 0, -1,

     [exec] -------

 

 

     [exec] Thread[Worker-4,5,main]

     [exec]         java.lang.Object.wait(Native Method)

     [exec]      at org.eclipse.core.internal.jobs.Semaphore.acquire(Semaphore.java:38)

     [exec]      at org.eclipse.core.internal.jobs.OrderedLock.doAcquire(OrderedLock.java:167)

     [exec]      at org.eclipse.core.internal.jobs.OrderedLock.acquire(OrderedLock.java:103)

     [exec]      at org.eclipse.core.internal.jobs.OrderedLock.acquire(OrderedLock.java:80)

     [exec]      at org.eclipse.core.internal.resources.WorkManager.checkIn(WorkManager.java:97)

     [exec]      at org.eclipse.core.internal.resources.Workspace.prepareOperation(Workspace.java:1676)

     [exec]      at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1716)

     [exec]      at org.eclipse.jdt.internal.core.JavaModelOperation.runOperation(JavaModelOperation.java:782)

     [exec]      at org.eclipse.jdt.internal.core.PackageFragmentRoot.createPackageFragment(PackageFragmentRoot.java:310)

     [exec]      at org.eclipse.jdt.apt.core.internal.generatedfile.GeneratedFileManager.generateFileDuringBuild(GeneratedFileManager.java:211)

     [exec]      at org.eclipse.jdt.apt.core.internal.env.JavaSourceFilePrintWriter.close(JavaSourceFilePrintWriter.java:57)

     [exec]      at org.apache.beehive.controls.runtime.generator.IndentingWriter.close(IndentingWriter.java:94)

     [exec]      at org.apache.beehive.controls.runtime.generator.VelocityGenerator.generate(VelocityGenerator.java:78)

     [exec]      at org.apache.beehive.controls.runtime.generator.apt.ControlAnnotationProcessor.check(ControlAnnotationProcessor.java:90)

     [exec]      at org.apache.beehive.controls.runtime.generator.apt.TwoPhaseAnnotationProcessor.check(TwoPhaseAnnotationProcessor.java:103)

     [exec]      at org.apache.beehive.controls.runtime.generator.apt.TwoPhaseAnnotationProcessor.process(TwoPhaseAnnotationProcessor.java:85)

     [exec]      at org.eclipse.jdt.apt.core.internal.APTDispatchRunnable.runAPTInFileBasedMode(APTDispatchRunnable.java:311)

     [exec]      at org.eclipse.jdt.apt.core.internal.APTDispatchRunnable.runAPT(APTDispatchRunnable.java:548)

     [exec]      at org.eclipse.jdt.apt.core.internal.APTDispatchRunnable.runAPT(APTDispatchRunnable.java:472)

     [exec]      at org.eclipse.jdt.apt.core.internal.APTDispatchRunnable.run(APTDispatchRunnable.java:210)

     [exec]      at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1721)

     [exec]      at org.eclipse.jdt.apt.core.internal.APTDispatch.runAPT(APTDispatch.java:90)

     [exec]      at org.eclipse.jdt.apt.core.internal.APTDispatch.runAPTDuringBuild(APTDispatch.java:47)

     [exec]      at org.eclipse.jdt.apt.core.internal.AptCompilationParticipant.preBuildNotify(AptCompilationParticipant.java:125)

     [exec]      at org.eclipse.jdt.apt.core.internal.AptCompilationParticipant.notify(AptCompilationParticipant.java:83)

     [exec]      at org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.notifyCompilationParticipants(AbstractImageBuilder.java:271)

     [exec]      at org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.compile(AbstractImageBuilder.java:459)

     [exec]      at org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.compile(AbstractImageBuilder.java:206)

     [exec]      at org.eclipse.jdt.internal.core.builder.IncrementalImageBuilder.build(IncrementalImageBuilder.java:114)

     [exec]      at org.eclipse.jdt.internal.core.builder.JavaBuilder.buildDeltas(JavaBuilder.java:238)

     [exec]      at org.eclipse.jdt.internal.core.builder.JavaBuilder.build(JavaBuilder.java:166)

     [exec]      at org.eclipse.core.internal.events.BuildManager$2.run(BuildManager.java:593)

     [exec]      at org.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java:1044)

     [exec]      at org.eclipse.core.runtime.Platform.run(Platform.java:783)

     [exec]      at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:168)

     [exec]      at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:202)

     [exec]      at org.eclipse.core.internal.events.BuildManager$1.run(BuildManager.java:231)

     [exec]      at org.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java:1044)

     [exec]      at org.eclipse.core.runtime.Platform.run(Platform.java:783)

     [exec]      at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:234)

     [exec]      at org.eclipse.core.internal.events.BuildManager.basicBuildLoop(BuildManager.java:253)

     [exec]      at org.eclipse.core.internal.events.BuildManager.build(BuildManager.java:282)

     [exec]      at org.eclipse.core.internal.events.AutoBuildJob.doBuild(AutoBuildJob.java:139)

     [exec]      at org.eclipse.core.internal.events.AutoBuildJob.run(AutoBuildJob.java:200)

     [exec]      at org.eclipse.core.internal.jobs.Worker.run(Worker.java:76)

 

     [exec] Thread[Worker-2,5,main]

     [exec]         java.lang.Object.wait(Native Method)

     [exec]      at org.eclipse.core.internal.jobs.ThreadJob.joinRun(ThreadJob.java:183)

     [exec]      at org.eclipse.core.internal.jobs.ImplicitJobs.begin(ImplicitJobs.java:88)

     [exec]      at org.eclipse.core.internal.jobs.JobManager.beginRule(JobManager.java:190)

     [exec]      at org.eclipse.wst.common.internal.emfworkbench.integration.ResourceSetWorkbenchEditSynchronizer.acquireResourceRule(ResourceSetWorkbenchEditSynchronizer.java:397)

     [exec]      at org.eclipse.wst.common.internal.emfworkbench.integration.ResourceSetWorkbenchEditSynchronizer.acceptDelta(ResourceSetWorkbenchEditSynchronizer.java:141)

     [exec]      at org.eclipse.wst.common.internal.emfworkbench.integration.ResourceSetWorkbenchEditSynchronizer.resourceChanged(ResourceSetWorkbenchEditSynchronizer.java:93)

     [exec]      at org.eclipse.core.internal.events.NotificationManager$2.run(NotificationManager.java:276)

     [exec]      at org.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java:1044)

     [exec]      at org.eclipse.core.runtime.Platform.run(Platform.java:783)

     [exec]      at org.eclipse.core.internal.events.NotificationManager.notify(NotificationManager.java:270)

     [exec]      at org.eclipse.core.internal.events.NotificationManager.broadcastChanges(NotificationManager.java:144)

     [exec]      at org.eclipse.core.internal.resources.Workspace.broadcastPostChange(Workspace.java:180)

     [exec]      at org.eclipse.core.internal.resources.Workspace.endOperation(Workspace.java:916)

     [exec]      at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1730)

     [exec]      at org.eclipse.core.internal.events.NotificationManager$NotifyJob.run(NotificationManager.java:38)

     [exec]      at org.eclipse.core.internal.jobs.Worker.run(Worker.java:76)
I have backed out the changes that use the call Job scheduling api manually and switched to a "Workspace.run" design that will also only run when the workspace root is not already locked.


Where's the code for this change? I'd like to inspect it. 

I"m not sure what you mean by "run when the workspace
root is not already locked" .. does that mean if your client/caller code is not already in a workspace.run you simply exit? Or, "lock and spin"? 

I'm concerned because in the past, I've seen cases where just moving something to workspace.run just changed the deadlock to occur at some other place -- from what I've seen, we are still in "wack a mole" mode here. What assurances are there this does not just move "the danger" to some other place? 

So, would appreciate you getting some thread experts to review and comment on this code and proposed fix. 
Created attachment 38694
Removed Manual Job Rule invocation patch....
Sorry David, I didn't check anything in....  just wanted to comment on the work that is progressing....

The above attachment removes the manual Job Rule invocation, and simply wraps the method in question with a workspace run if the root lock isn't already set.
I run the method normally if it is, because it should be protected under the current running rule.
I suspect this will fix the deadlock, but may cause the concurrent modification exceptions to occur again.  It is not necessarily true that there are any scheduling rules owned at the time a resource change event is occurring. IWorkspace.isTreeLocked() has nothing to do with scheduling rules - it just says if there is a resource change event occurring in the current thread.  I can't say for sure without seeing all the code involved.  I suggest minimally re-running the tests used to reproduce the bug 133187 with this patch applied to make sure you're not recreating the problem that the code causing this deadlock was trying to fix.
Thanks John - we are doing this... and I agree we may be back where we started here....
So thinking about this more....   If our problem is occuring during a resource change notification, and we are not allowed to use scheduling rules, we are left with using our own locking mechanism correct?
I don't think it's an issue of using scheduling rules versus some other locking primitive.  If you hold some lock while resources are being modified in one thread, and the same lock is acquired from within a resource change event in another, then deadlock will occur no matter what locking mechanism is used.
Dropped to M build.

http://download.eclipse.org/webtools/committers/drops/R-1.0.2RC3-200604190807/
This bug is being moved to the "closed" state since it has been in the fixed state for a so long it is being assumed fixed, without explicit verification from the originator. If there is still a problem, in the most recent 1.5.x builds, please reopen or open another bug.</WithStack>
    <WithOutStack>Attempting to adopt a nightly build of WTP 1.0.2 RC2 we are encountering the following dealock.  We suspect that the change introduced for bug 133187 might be causing it.

First are two error messages logged by the eclipse DeadlockDetector.

Next is a dump of the two threads involved.

 
     [exec] !ENTRY org.eclipse.core.runtime 4 2 2006-04-12 20:11:53.71

     [exec] !MESSAGE Deadlock detected. All locks owned by thread Worker-2 will be suspended.

     [exec] !STACK 0

     [exec] java.lang.IllegalStateException

     [exec]       at org.eclipse.core.internal.jobs.DeadlockDetector.reportDeadlock(DeadlockDetector.java:594)

     [exec]       at org.eclipse.core.internal.jobs.DeadlockDetector.lockWaitStart(DeadlockDetector.java:403)

     [exec]       at org.eclipse.core.internal.jobs.LockManager.addLockWaitThread(LockManager.java:141)

     [exec]       at org.eclipse.core.internal.jobs.OrderedLock.doAcquire(OrderedLock.java:165)

     [exec]       at org.eclipse.core.internal.jobs.OrderedLock.acquire(OrderedLock.java:103)

     [exec]       at org.eclipse.core.internal.jobs.OrderedLock.acquire(OrderedLock.java:80)

     [exec]       at org.eclipse.core.internal.resources.WorkManager.checkIn(WorkManager.java:97)

     [exec]       at org.eclipse.core.internal.resources.Workspace.prepareOperation(Workspace.java:1676)

     [exec]       at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1716)

     [exec]       at org.eclipse.jdt.internal.core.JavaModelOperation.runOperation(JavaModelOperation.java:782)

     [exec]       at org.eclipse.jdt.internal.core.PackageFragmentRoot.createPackageFragment(PackageFragmentRoot.java:310)

     [exec]       at org.eclipse.jdt.apt.core.internal.generatedfile.GeneratedFileManager.generateFileDuringBuild(GeneratedFileManager.java:211)

     [exec]       at org.eclipse.jdt.apt.core.internal.env.JavaSourceFilePrintWriter.close(JavaSourceFilePrintWriter.java:57)

     [exec]       at org.apache.beehive.controls.runtime.generator.IndentingWriter.close(IndentingWriter.java:94)

     [exec]       at org.apache.beehive.controls.runtime.generator.VelocityGenerator.generate(VelocityGenerator.java:78)

     [exec]       at org.apache.beehive.controls.runtime.generator.apt.ControlAnnotationProcessor.check(ControlAnnotationProcessor.java:90)

     [exec]       at org.apache.beehive.controls.runtime.generator.apt.TwoPhaseAnnotationProcessor.check(TwoPhaseAnnotationProcessor.java:103)

     [exec]       at org.apache.beehive.controls.runtime.generator.apt.TwoPhaseAnnotationProcessor.process(TwoPhaseAnnotationProcessor.java:85)

     [exec]       at org.eclipse.jdt.apt.core.internal.APTDispatchRunnable.runAPTInFileBasedMode(APTDispatchRunnable.java:311)

     [exec]       at org.eclipse.jdt.apt.core.internal.APTDispatchRunnable.runAPT(APTDispatchRunnable.java:548)

     [exec]       at org.eclipse.jdt.apt.core.internal.APTDispatchRunnable.runAPT(APTDispatchRunnable.java:472)

     [exec]       at org.eclipse.jdt.apt.core.internal.APTDispatchRunnable.run(APTDispatchRunnable.java:210)

     [exec]       at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1721)

     [exec]       at org.eclipse.jdt.apt.core.internal.APTDispatch.runAPT(APTDispatch.java:90)

     [exec]       at org.eclipse.jdt.apt.core.internal.APTDispatch.runAPTDuringBuild(APTDispatch.java:47)

     [exec]       at org.eclipse.jdt.apt.core.internal.AptCompilationParticipant.preBuildNotify(AptCompilationParticipant.java:125)

     [exec]       at org.eclipse.jdt.apt.core.internal.AptCompilationParticipant.notify(AptCompilationParticipant.java:83)

     [exec]       at org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.notifyCompilationParticipants(AbstractImageBuilder.java:271)

     [exec]       at org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.compile(AbstractImageBuilder.java:459)

     [exec]       at org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.compile(AbstractImageBuilder.java:206)

     [exec]       at org.eclipse.jdt.internal.core.builder.IncrementalImageBuilder.build(IncrementalImageBuilder.java:114)

     [exec]       at org.eclipse.jdt.internal.core.builder.JavaBuilder.buildDeltas(JavaBuilder.java:238)

     [exec]       at org.eclipse.jdt.internal.core.builder.JavaBuilder.build(JavaBuilder.java:166)

     [exec]       at org.eclipse.core.internal.events.BuildManager$2.run(BuildManager.java:593)

     [exec]       at org.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java:1044)

     [exec]       at org.eclipse.core.runtime.Platform.run(Platform.java:783)

     [exec]       at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:168)

     [exec]       at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:202)

     [exec]       at org.eclipse.core.internal.events.BuildManager$1.run(BuildManager.java:231)

     [exec]       at org.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java:1044)

     [exec]       at org.eclipse.core.runtime.Platform.run(Platform.java:783)

     [exec]       at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:234)

     [exec]       at org.eclipse.core.internal.events.BuildManager.basicBuildLoop(BuildManager.java:253)

     [exec]       at org.eclipse.core.internal.events.BuildManager.build(BuildManager.java:282)

     [exec]       at org.eclipse.core.internal.events.AutoBuildJob.doBuild(AutoBuildJob.java:139)

     [exec]       at org.eclipse.core.internal.events.AutoBuildJob.run(AutoBuildJob.java:200)

     [exec]       at org.eclipse.core.internal.jobs.Worker.run(Worker.java:76)

     [exec] !SUBENTRY 1 org.eclipse.core.runtime 4 2 2006-04-12 20:11:53.71

     [exec] !MESSAGE Thread Worker-4 has locks: R/, P/DRTEARProject, L/DRTUtilityProject/src/controls/db/EmptyDRTDBControl.java and is waiting for lock OrderedLock (0)

     [exec] !SUBENTRY 1 org.eclipse.core.runtime 4 2 2006-04-12 20:11:53.71

     [exec] !MESSAGE Thread Worker-2 has locks: OrderedLock (0) and is waiting for lock P/DRTEARProject

 

     [exec] !ENTRY org.eclipse.core.runtime 4 2 2006-04-12 20:11:53.86

     [exec] !MESSAGE An internal error occurred during: "{0}".

     [exec] !STACK 0

     [exec] java.lang.IllegalStateException: Deadlock detected. Caused by thread Worker-4.

     [exec]       at org.eclipse.core.internal.jobs.DeadlockDetector.lockWaitStart(DeadlockDetector.java:405)

     [exec]       at org.eclipse.core.internal.jobs.LockManager.addLockWaitThread(LockManager.java:141)

     [exec]       at org.eclipse.core.internal.jobs.OrderedLock.doAcquire(OrderedLock.java:165)

     [exec]       at org.eclipse.core.internal.jobs.OrderedLock.acquire(OrderedLock.java:103)

     [exec]       at org.eclipse.core.internal.jobs.OrderedLock.acquire(OrderedLock.java:80)

     [exec]       at org.eclipse.core.internal.resources.WorkManager.checkIn(WorkManager.java:97)

     [exec]       at org.eclipse.core.internal.resources.Workspace.prepareOperation(Workspace.java:1676)

     [exec]       at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1716)

     [exec]       at org.eclipse.jdt.internal.core.JavaModelOperation.runOperation(JavaModelOperation.java:782)

     [exec]       at org.eclipse.jdt.internal.core.PackageFragmentRoot.createPackageFragment(PackageFragmentRoot.java:310)

     [exec]       at org.eclipse.jdt.apt.core.internal.generatedfile.GeneratedFileManager.generateFileDuringBuild(GeneratedFileManager.java:211)

     [exec]       at org.eclipse.jdt.apt.core.internal.env.JavaSourceFilePrintWriter.close(JavaSourceFilePrintWriter.java:57)

     [exec]       at org.apache.beehive.controls.runtime.generator.IndentingWriter.close(IndentingWriter.java:94)

     [exec]       at org.apache.beehive.controls.runtime.generator.VelocityGenerator.generate(VelocityGenerator.java:78)

     [exec]       at org.apache.beehive.controls.runtime.generator.apt.ControlAnnotationProcessor.check(ControlAnnotationProcessor.java:90)

     [exec]       at org.apache.beehive.controls.runtime.generator.apt.TwoPhaseAnnotationProcessor.check(TwoPhaseAnnotationProcessor.java:103)

     [exec]       at org.apache.beehive.controls.runtime.generator.apt.TwoPhaseAnnotationProcessor.process(TwoPhaseAnnotationProcessor.java:85)

     [exec]       at org.eclipse.jdt.apt.core.internal.APTDispatchRunnable.runAPTInFileBasedMode(APTDispatchRunnable.java:311)

     [exec]       at org.eclipse.jdt.apt.core.internal.APTDispatchRunnable.runAPT(APTDispatchRunnable.java:548)

     [exec]       at org.eclipse.jdt.apt.core.internal.APTDispatchRunnable.runAPT(APTDispatchRunnable.java:472)

     [exec]       at org.eclipse.jdt.apt.core.internal.APTDispatchRunnable.run(APTDispatchRunnable.java:210)

     [exec]       at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1721)

     [exec]       at org.eclipse.jdt.apt.core.internal.APTDispatch.runAPT(APTDispatch.java:90)

     [exec]       at org.eclipse.jdt.apt.core.internal.APTDispatch.runAPTDuringBuild(APTDispatch.java:47)

     [exec]       at org.eclipse.jdt.apt.core.internal.AptCompilationParticipant.preBuildNotify(AptCompilationParticipant.java:125)

     [exec]       at org.eclipse.jdt.apt.core.internal.AptCompilationParticipant.notify(AptCompilationParticipant.java:83)

     [exec]       at org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.notifyCompilationParticipants(AbstractImageBuilder.java:271)

     [exec]       at org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.compile(AbstractImageBuilder.java:459)

     [exec]       at org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.compile(AbstractImageBuilder.java:206)

     [exec]       at org.eclipse.jdt.internal.core.builder.IncrementalImageBuilder.build(IncrementalImageBuilder.java:114)

     [exec]       at org.eclipse.jdt.internal.core.builder.JavaBuilder.buildDeltas(JavaBuilder.java:238)

     [exec]       at org.eclipse.jdt.internal.core.builder.JavaBuilder.build(JavaBuilder.java:166)

     [exec]       at org.eclipse.core.internal.events.BuildManager$2.run(BuildManager.java:593)

     [exec]       at org.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java:1044)

     [exec]       at org.eclipse.core.runtime.Platform.run(Platform.java:783)

     [exec]       at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:168)

     [exec]       at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:202)

     [exec]       at org.eclipse.core.internal.events.BuildManager$1.run(BuildManager.java:231)

     [exec]       at org.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java:1044)

     [exec]       at org.eclipse.core.runtime.Platform.run(Platform.java:783)

     [exec]       at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:234)

     [exec]       at org.eclipse.core.internal.events.BuildManager.basicBuildLoop(BuildManager.java:253)

     [exec]       at org.eclipse.core.internal.events.BuildManager.build(BuildManager.java:282)

     [exec]       at org.eclipse.core.internal.events.AutoBuildJob.doBuild(AutoBuildJob.java:139)

     [exec]       at org.eclipse.core.internal.events.AutoBuildJob.run(AutoBuildJob.java:200)

     [exec]       at org.eclipse.core.internal.jobs.Worker.run(Worker.java:76)

 

     [exec]  :: 

     [exec]  R/, OrderedLock (0), P/DRTEARProject, L/DRTUtilityProject/src/controls/db/EmptyDRTDBControl.java,

     [exec]  Worker-4 :  1, -1, 1, 1,

     [exec]  Worker-2 :  0, 1, -1, 0,

     [exec]  Worker-0 :  0, 0, 0, -1,

     [exec] -------

 

 

     [exec] Thread[Worker-4,5,main]

     [exec]         java.lang.Object.wait(Native Method)

     [exec]      at org.eclipse.core.internal.jobs.Semaphore.acquire(Semaphore.java:38)

     [exec]      at org.eclipse.core.internal.jobs.OrderedLock.doAcquire(OrderedLock.java:167)

     [exec]      at org.eclipse.core.internal.jobs.OrderedLock.acquire(OrderedLock.java:103)

     [exec]      at org.eclipse.core.internal.jobs.OrderedLock.acquire(OrderedLock.java:80)

     [exec]      at org.eclipse.core.internal.resources.WorkManager.checkIn(WorkManager.java:97)

     [exec]      at org.eclipse.core.internal.resources.Workspace.prepareOperation(Workspace.java:1676)

     [exec]      at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1716)

     [exec]      at org.eclipse.jdt.internal.core.JavaModelOperation.runOperation(JavaModelOperation.java:782)

     [exec]      at org.eclipse.jdt.internal.core.PackageFragmentRoot.createPackageFragment(PackageFragmentRoot.java:310)

     [exec]      at org.eclipse.jdt.apt.core.internal.generatedfile.GeneratedFileManager.generateFileDuringBuild(GeneratedFileManager.java:211)

     [exec]      at org.eclipse.jdt.apt.core.internal.env.JavaSourceFilePrintWriter.close(JavaSourceFilePrintWriter.java:57)

     [exec]      at org.apache.beehive.controls.runtime.generator.IndentingWriter.close(IndentingWriter.java:94)

     [exec]      at org.apache.beehive.controls.runtime.generator.VelocityGenerator.generate(VelocityGenerator.java:78)

     [exec]      at org.apache.beehive.controls.runtime.generator.apt.ControlAnnotationProcessor.check(ControlAnnotationProcessor.java:90)

     [exec]      at org.apache.beehive.controls.runtime.generator.apt.TwoPhaseAnnotationProcessor.check(TwoPhaseAnnotationProcessor.java:103)

     [exec]      at org.apache.beehive.controls.runtime.generator.apt.TwoPhaseAnnotationProcessor.process(TwoPhaseAnnotationProcessor.java:85)

     [exec]      at org.eclipse.jdt.apt.core.internal.APTDispatchRunnable.runAPTInFileBasedMode(APTDispatchRunnable.java:311)

     [exec]      at org.eclipse.jdt.apt.core.internal.APTDispatchRunnable.runAPT(APTDispatchRunnable.java:548)

     [exec]      at org.eclipse.jdt.apt.core.internal.APTDispatchRunnable.runAPT(APTDispatchRunnable.java:472)

     [exec]      at org.eclipse.jdt.apt.core.internal.APTDispatchRunnable.run(APTDispatchRunnable.java:210)

     [exec]      at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1721)

     [exec]      at org.eclipse.jdt.apt.core.internal.APTDispatch.runAPT(APTDispatch.java:90)

     [exec]      at org.eclipse.jdt.apt.core.internal.APTDispatch.runAPTDuringBuild(APTDispatch.java:47)

     [exec]      at org.eclipse.jdt.apt.core.internal.AptCompilationParticipant.preBuildNotify(AptCompilationParticipant.java:125)

     [exec]      at org.eclipse.jdt.apt.core.internal.AptCompilationParticipant.notify(AptCompilationParticipant.java:83)

     [exec]      at org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.notifyCompilationParticipants(AbstractImageBuilder.java:271)

     [exec]      at org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.compile(AbstractImageBuilder.java:459)

     [exec]      at org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.compile(AbstractImageBuilder.java:206)

     [exec]      at org.eclipse.jdt.internal.core.builder.IncrementalImageBuilder.build(IncrementalImageBuilder.java:114)

     [exec]      at org.eclipse.jdt.internal.core.builder.JavaBuilder.buildDeltas(JavaBuilder.java:238)

     [exec]      at org.eclipse.jdt.internal.core.builder.JavaBuilder.build(JavaBuilder.java:166)

     [exec]      at org.eclipse.core.internal.events.BuildManager$2.run(BuildManager.java:593)

     [exec]      at org.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java:1044)

     [exec]      at org.eclipse.core.runtime.Platform.run(Platform.java:783)

     [exec]      at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:168)

     [exec]      at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:202)

     [exec]      at org.eclipse.core.internal.events.BuildManager$1.run(BuildManager.java:231)

     [exec]      at org.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java:1044)

     [exec]      at org.eclipse.core.runtime.Platform.run(Platform.java:783)

     [exec]      at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:234)

     [exec]      at org.eclipse.core.internal.events.BuildManager.basicBuildLoop(BuildManager.java:253)

     [exec]      at org.eclipse.core.internal.events.BuildManager.build(BuildManager.java:282)

     [exec]      at org.eclipse.core.internal.events.AutoBuildJob.doBuild(AutoBuildJob.java:139)

     [exec]      at org.eclipse.core.internal.events.AutoBuildJob.run(AutoBuildJob.java:200)

     [exec]      at org.eclipse.core.internal.jobs.Worker.run(Worker.java:76)

 

     [exec] Thread[Worker-2,5,main]

     [exec]         java.lang.Object.wait(Native Method)

     [exec]      at org.eclipse.core.internal.jobs.ThreadJob.joinRun(ThreadJob.java:183)

     [exec]      at org.eclipse.core.internal.jobs.ImplicitJobs.begin(ImplicitJobs.java:88)

     [exec]      at org.eclipse.core.internal.jobs.JobManager.beginRule(JobManager.java:190)

     [exec]      at org.eclipse.wst.common.internal.emfworkbench.integration.ResourceSetWorkbenchEditSynchronizer.acquireResourceRule(ResourceSetWorkbenchEditSynchronizer.java:397)

     [exec]      at org.eclipse.wst.common.internal.emfworkbench.integration.ResourceSetWorkbenchEditSynchronizer.acceptDelta(ResourceSetWorkbenchEditSynchronizer.java:141)

     [exec]      at org.eclipse.wst.common.internal.emfworkbench.integration.ResourceSetWorkbenchEditSynchronizer.resourceChanged(ResourceSetWorkbenchEditSynchronizer.java:93)

     [exec]      at org.eclipse.core.internal.events.NotificationManager$2.run(NotificationManager.java:276)

     [exec]      at org.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java:1044)

     [exec]      at org.eclipse.core.runtime.Platform.run(Platform.java:783)

     [exec]      at org.eclipse.core.internal.events.NotificationManager.notify(NotificationManager.java:270)

     [exec]      at org.eclipse.core.internal.events.NotificationManager.broadcastChanges(NotificationManager.java:144)

     [exec]      at org.eclipse.core.internal.resources.Workspace.broadcastPostChange(Workspace.java:180)

     [exec]      at org.eclipse.core.internal.resources.Workspace.endOperation(Workspace.java:916)

     [exec]      at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1730)

     [exec]      at org.eclipse.core.internal.events.NotificationManager$NotifyJob.run(NotificationManager.java:38)

     [exec]      at org.eclipse.core.internal.jobs.Worker.run(Worker.java:76)
I have backed out the changes that use the call Job scheduling api manually and switched to a "Workspace.run" design that will also only run when the workspace root is not already locked.


Where's the code for this change? I'd like to inspect it. 

I"m not sure what you mean by "run when the workspace
root is not already locked" .. does that mean if your client/caller code is not already in a workspace.run you simply exit? Or, "lock and spin"? 

I'm concerned because in the past, I've seen cases where just moving something to workspace.run just changed the deadlock to occur at some other place -- from what I've seen, we are still in "wack a mole" mode here. What assurances are there this does not just move "the danger" to some other place? 

So, would appreciate you getting some thread experts to review and comment on this code and proposed fix. 
Created attachment 38694
Removed Manual Job Rule invocation patch....
Sorry David, I didn't check anything in....  just wanted to comment on the work that is progressing....

The above attachment removes the manual Job Rule invocation, and simply wraps the method in question with a workspace run if the root lock isn't already set.
I run the method normally if it is, because it should be protected under the current running rule.
I suspect this will fix the deadlock, but may cause the concurrent modification exceptions to occur again.  It is not necessarily true that there are any scheduling rules owned at the time a resource change event is occurring. IWorkspace.isTreeLocked() has nothing to do with scheduling rules - it just says if there is a resource change event occurring in the current thread.  I can't say for sure without seeing all the code involved.  I suggest minimally re-running the tests used to reproduce the bug 133187 with this patch applied to make sure you're not recreating the problem that the code causing this deadlock was trying to fix.
Thanks John - we are doing this... and I agree we may be back where we started here....
So thinking about this more....   If our problem is occuring during a resource change notification, and we are not allowed to use scheduling rules, we are left with using our own locking mechanism correct?
I don't think it's an issue of using scheduling rules versus some other locking primitive.  If you hold some lock while resources are being modified in one thread, and the same lock is acquired from within a resource change event in another, then deadlock will occur no matter what locking mechanism is used.
Dropped to M build.

http://download.eclipse.org/webtools/committers/drops/R-1.0.2RC3-200604190807/
This bug is being moved to the "closed" state since it has been in the fixed state for a so long it is being assumed fixed, without explicit verification from the originator. If there is still a problem, in the most recent 1.5.x builds, please reopen or open another bug.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="136733" />
    <CreationDate amount="2006-04-13 15:31:00 -0400" />
    <DupId amount="" />
    <classification amount="RT" />
    <Product amount="Equinox" />
    <component amount="Framework" />
    <Version amount="3.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>resolver should account for order of required EE.</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>See bug 136681 for some background information.

In PDE multiple platform properties can be specified for the state, each of which specifies a list of supported execution environments.  The resolver will currently resolve a bundle against the lowest possible platform profile no matter what order the EEs are specified in the bundle.  For example,

Bundle-RequiredExecutionEnvironment: J2SE-1.4, J2SE-1.3

If the state contains two platform profiles, one for J2SE-1.3 and one for J2SE-1.4 then the resolver will always pick the lowest possible profile that can satisfy the bundle.  In this case J2SE-1.3 will always be used.  The state should actually pay attention to order of EEs.  This way it would pick J2SE-1.4 if the profile is available in the state.
Created attachment 38548
patch

possible fix.

Simple solution that moves the inner loop for the bundle's EEs to be the outer loop so that they take the highest priority.
I discussed this with Jeff.  There are some concerns about putting this type of logic into the resolver.

It is confussing for developers to be required to put an "unnecessary" entry into the Bundle-RequiredExecutionEnvironment just for build purposes.  This type of information should be specified in the build.properties.  There is currently an option in the build.properties to specify the jre profile to compile against (jre.compilation.profile).  This is intended to override the one specified in the Bundle-RequiredExcecutionEnvironment header for cases where the bundle needs to compile against "higher" profiles but can run on "lower" profiles.

If this option is specified in the build.properties then PDE-UI and PDE-BUILD should use the value to replace the header specified in the bundle manifest before using it to create BundleDescription objects in the state.  This way the developer only needs to specify the required compilation profile in one spot, the build.properties file.
-1 for the proposal in comment 2 based on the simple premise that the state PDE builds at development time is as close as possible to that at runtime.

The execution environments in a bundle description at runtime are based strictly on what's in the manifest.mf.  Tweaking/mutilating/polluting the state with build.properties info is not kosher.

So my objection is based on principle.

On an implementation level, it's not so easy either to synchronize the build.properties with the creation/updating of a bundle description.  It is undesirable, messy and risky.

Removing the target milestone pending further discussion.
+1 we should fix this for 3.2 by reversing the lookup order
Moving back to equinox.  We will fix the resolver in for 3.2 to address this issue.

I will open a separate bug against PDE to look into a better fix in a post-3.2 release.
Released patch to resolver for RC2.</WithStack>
    <WithOutStack>See bug 136681 for some background information.

In PDE multiple platform properties can be specified for the state, each of which specifies a list of supported execution environments.  The resolver will currently resolve a bundle against the lowest possible platform profile no matter what order the EEs are specified in the bundle.  For example,

Bundle-RequiredExecutionEnvironment: J2SE-1.4, J2SE-1.3

If the state contains two platform profiles, one for J2SE-1.3 and one for J2SE-1.4 then the resolver will always pick the lowest possible profile that can satisfy the bundle.  In this case J2SE-1.3 will always be used.  The state should actually pay attention to order of EEs.  This way it would pick J2SE-1.4 if the profile is available in the state.
Created attachment 38548
patch

possible fix.

Simple solution that moves the inner loop for the bundle's EEs to be the outer loop so that they take the highest priority.
I discussed this with Jeff.  There are some concerns about putting this type of logic into the resolver.

It is confussing for developers to be required to put an "unnecessary" entry into the Bundle-RequiredExecutionEnvironment just for build purposes.  This type of information should be specified in the build.properties.  There is currently an option in the build.properties to specify the jre profile to compile against (jre.compilation.profile).  This is intended to override the one specified in the Bundle-RequiredExcecutionEnvironment header for cases where the bundle needs to compile against "higher" profiles but can run on "lower" profiles.

If this option is specified in the build.properties then PDE-UI and PDE-BUILD should use the value to replace the header specified in the bundle manifest before using it to create BundleDescription objects in the state.  This way the developer only needs to specify the required compilation profile in one spot, the build.properties file.
-1 for the proposal in comment 2 based on the simple premise that the state PDE builds at development time is as close as possible to that at runtime.

The execution environments in a bundle description at runtime are based strictly on what's in the manifest.mf.  Tweaking/mutilating/polluting the state with build.properties info is not kosher.

So my objection is based on principle.

On an implementation level, it's not so easy either to synchronize the build.properties with the creation/updating of a bundle description.  It is undesirable, messy and risky.

Removing the target milestone pending further discussion.
+1 we should fix this for 3.2 by reversing the lookup order
Moving back to equinox.  We will fix the resolver in for 3.2 to address this issue.

I will open a separate bug against PDE to look into a better fix in a post-3.2 release.
Released patch to resolver for RC2.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="136734" />
    <CreationDate amount="2006-04-13 15:36:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="JDT" />
    <component amount="UI" />
    <Version amount="3.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Linux" />
    <priority amount="P3" />
    <bug_severity amount="major" />
    <Summery>java.lang.UnsupportedClassVersionError: junit/textui/TestRunner (Unsupported major.minor version 49.0)</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="1">
      <source_code type="class">
        <location start="4481" end="4545" />
        <code>&lt;java taskname="test-wtp-${testTarget}" classpath="${testRoot}</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="INVALID" />
    <WithStack>= Summary = 

Between 2006/04/10 and 2006/04/12, compilation of junit.textui.TestRunner must have changed from -target 1.4 to -target 1.5. This means that the textui.TestRunner can no longer be used to test JDK 1.4-compiled code! 

The impact of this is that we can no longer run all our automated tests, in order to ensure our standalone jars are working properly with JDK 1.4.

= Details &amp; Steps To Reproduce =

Since moving up to the latest Eclipse I driver (http://download.eclipse.org/eclipse/downloads/drops/I20060412-2041/eclipse-SDK-I20060412-2041-linux-gtk.tar.gz), our EMF Standalone JUnit tests are now failing to run. The Eclipse N driver from two days before, N20060410-0010, did not have this problem.

http://emf.torolab.ibm.com/tools/emf/jdk14tests/2.2.0/N200604130040/200604130053/testlog.txt

If I'm not mistaken (http://www.artima.com/forums/flat.jsp?forum=1&amp;thread=108274, http://forum.java.sun.com/thread.jspa?threadID=667600&amp;messageID=3932387 - see 2nd reply), this means that the latest version of TestRunner is built with JDK1.5, and output as JDK1.5 target, too (http://java.sun.com/j2se/1.5.0/docs/tooldocs/solaris/javac.html - see Cross-Compilation Options), instead of 1.4 as it was a few days ago.

I've been able to reproduce this problem outside out build environment (on my home machine) using these scripts:

http://dev.eclipse.org/viewcvs/indextools.cgi/emf-home/emf-build/scripts/runJDK14Tests.sh
http://dev.eclipse.org/viewcvs/indextools.cgi/emf-home/emf-build/scripts/runJDK14Tests.xml

which, once you get down to it, does this:

&lt;java jvm="${java}" fork="${javaFork}"
      classname="junit.textui.TestRunner" .../&gt;

And yet, curiously, when I run these tests inside Eclipse using the UI (Run As &gt; JUnit Test), everything works fine. Of course within Eclipse the JUnits are running as org.eclipse.jdt.internal.junit.runner.RemoteTestRunner, not junit.textui.TestRunner.

Can junit.textui.TestRunner be recompiled with -target 1.4, or is there some reason why it HAD to move up to 1.5 this week?
Is that junit.jar from org.junit?
TestRunner is part of a JAR that hasn't been changed since November 2002.
So this can't even be a release engineering problem.

I haven't had time to reproduce the problem, but it would be interesting to see the full runtime classpath to see which junit is exactly on the path and if maybe a required JARs (jre?) is 1.5.

When JUnit is built, the javac task needs to explicitely specify the target and the source versions that needs to be used.
Otherwise they are defined according to the VM used to run the ant tasks. If this is a 1.5 VM, then the version/target will be set to 1.5.
Could this be related to the introduction of JUnit4 ?
The addition of JUnit4 should not have an influence on existing clients or plug-in org.junit. So far, there are only 2 new *.junit4* plugins in the build. The original org.junit (which defines TestRunner) has not been touched.

It could be that the wrong version is taken if your test plug-in's manifest.mf uses an
    Import-Package: junit.textui
directive instead of an explicit reference to the plug-in
    Require-Bundle: org.junit
Okay, on further digging, the problem is that I had BOTH org.junit_3.8.1/junit.jar and org.junit4_1.0.0/junit-4.0.jar in the classpath (since Eclipse now includes both of them), and it was finding JUnit4 first.

So, by adding 			

   &lt;exclude name="org.junit4**/*.jar"/&gt;

our tests one again run.

BTW, the modification dates for the two versions of TestRunner.class are below.

=== junit-4.0.jar ===
     5494  02-15-06 15:55   junit/textui/TestRunner.class

=== junit.jar ===
     4810  09-04-02 23:22   junit/textui/TestRunner.class


OK, if I understood that correctly, it was a problem with your ant script building the classpath from all existing eclipse projects (and not taking concrete project dependencies into account).

Setting to 'invalid', please reopen if you think there's something we should do to avoid this problem (however, touching the existing JUnit jars is not an option for us -- we have to take them straight from www.junit.org).
So, Ed, in comment #5, where do you put the exclude? Just during test running, right? (not compile?). 

Is this issue likely to effect org.eclipse.ant.core.antRunner? 
We still use that in WTP, and I'm trying to determine if this same issue 
is related to changed/problems we are having movng to RC1. 


Our "test task" looks like the following ... 


	&lt;target name="runTestEclipse"&gt;
		&lt;java taskname="test-wtp-${testTarget}" classpath="${testRoot}/eclipse/startup.jar" fork="true" classname="org.eclipse.core.launcher.Main" failonerror="true" timeout="7200000" output="${testRoot}/results/consolelogs/wtptestlog.txt" dir="${testRoot}"&gt;
			&lt;jvmarg value="-Dosgi.ws=${basews}" /&gt;
			&lt;jvmarg value="-Dosgi.os=${baseos}" /&gt;
			&lt;jvmarg value="-Dosgi.arch=${basearch}" /&gt;
			&lt;jvmarg value="-Dws=${basews}" /&gt;
			&lt;jvmarg value="-Dos=${baseos}" /&gt;
			&lt;jvmarg value="-Darch=${basearch}" /&gt;
			&lt;jvmarg value="-Dnoclean=true" /&gt;
			&lt;jvmarg value="-DbuildType=${buildType}" /&gt;
			&lt;jvmarg value="-DbuildId=${buildId}" /&gt;
			&lt;jvmarg value="-DbuildLabel=${buildLabel}" /&gt;
			&lt;arg value="-propertyfile" /&gt;
			&lt;arg value="test.properties" /&gt;
			&lt;arg value="-application" /&gt;
			&lt;arg value="org.eclipse.ant.core.antRunner" /&gt;
			&lt;arg value="-file" /&gt;
			&lt;arg value="test.xml" /&gt;
			&lt;arg value="-logger" /&gt;
			&lt;arg value="org.apache.tools.ant.DefaultLogger" /&gt;
			&lt;arg value="${testTarget}" /&gt;
			&lt;sysproperty key="build.home" value="${build.home}" /&gt;
			&lt;sysproperty key="buildDirectory" value="${buildDirectory}" /&gt;
			&lt;sysproperty key="baseLocation" value="${baseLocation}" /&gt;
			&lt;sysproperty key="testDir" value="${testRoot}" /&gt;
			&lt;sysproperty key="perf.buildId" value="${buildType}${date}-${time}" /&gt;
			&lt;sysproperty key="eclipseBuilderDirectory" value="${pde.builder.path}" /&gt;
		&lt;/java&gt;
	&lt;/target&gt;

David:

See details on the fix here:

http://dev.eclipse.org/viewcvs/indextools.cgi/emf-home/emf-build/scripts/runJDK14Tests.xml.diff?r2=1.8&amp;r1=1.7&amp;diff_format=l</WithStack>
    <WithOutStack>= Summary = 

Between 2006/04/10 and 2006/04/12, compilation of junit.textui.TestRunner must have changed from -target 1.4 to -target 1.5. This means that the textui.TestRunner can no longer be used to test JDK 1.4-compiled code! 

The impact of this is that we can no longer run all our automated tests, in order to ensure our standalone jars are working properly with JDK 1.4.

= Details &amp; Steps To Reproduce =

Since moving up to the latest Eclipse I driver (http://download.eclipse.org/eclipse/downloads/drops/I20060412-2041/eclipse-SDK-I20060412-2041-linux-gtk.tar.gz), our EMF Standalone JUnit tests are now failing to run. The Eclipse N driver from two days before, N20060410-0010, did not have this problem.

http://emf.torolab.ibm.com/tools/emf/jdk14tests/2.2.0/N200604130040/200604130053/testlog.txt

If I'm not mistaken (http://www.artima.com/forums/flat.jsp?forum=1&amp;thread=108274, http://forum.java.sun.com/thread.jspa?threadID=667600&amp;messageID=3932387 - see 2nd reply), this means that the latest version of TestRunner is built with JDK1.5, and output as JDK1.5 target, too (http://java.sun.com/j2se/1.5.0/docs/tooldocs/solaris/javac.html - see Cross-Compilation Options), instead of 1.4 as it was a few days ago.

I've been able to reproduce this problem outside out build environment (on my home machine) using these scripts:

http://dev.eclipse.org/viewcvs/indextools.cgi/emf-home/emf-build/scripts/runJDK14Tests.sh
http://dev.eclipse.org/viewcvs/indextools.cgi/emf-home/emf-build/scripts/runJDK14Tests.xml

which, once you get down to it, does this:

&lt;java jvm="${java}" fork="${javaFork}"
      classname="junit.textui.TestRunner" .../&gt;

And yet, curiously, when I run these tests inside Eclipse using the UI (Run As &gt; JUnit Test), everything works fine. Of course within Eclipse the JUnits are running as org.eclipse.jdt.internal.junit.runner.RemoteTestRunner, not junit.textui.TestRunner.

Can junit.textui.TestRunner be recompiled with -target 1.4, or is there some reason why it HAD to move up to 1.5 this week?
Is that junit.jar from org.junit?
TestRunner is part of a JAR that hasn't been changed since November 2002.
So this can't even be a release engineering problem.

I haven't had time to reproduce the problem, but it would be interesting to see the full runtime classpath to see which junit is exactly on the path and if maybe a required JARs (jre?) is 1.5.

When JUnit is built, the javac task needs to explicitely specify the target and the source versions that needs to be used.
Otherwise they are defined according to the VM used to run the ant tasks. If this is a 1.5 VM, then the version/target will be set to 1.5.
Could this be related to the introduction of JUnit4 ?
The addition of JUnit4 should not have an influence on existing clients or plug-in org.junit. So far, there are only 2 new *.junit4* plugins in the build. The original org.junit (which defines TestRunner) has not been touched.

It could be that the wrong version is taken if your test plug-in's manifest.mf uses an
    Import-Package: junit.textui
directive instead of an explicit reference to the plug-in
    Require-Bundle: org.junit
Okay, on further digging, the problem is that I had BOTH org.junit_3.8.1/junit.jar and org.junit4_1.0.0/junit-4.0.jar in the classpath (since Eclipse now includes both of them), and it was finding JUnit4 first.

So, by adding 			

   &lt;exclude name="org.junit4**/*.jar"/&gt;

our tests one again run.

BTW, the modification dates for the two versions of TestRunner.class are below.

=== junit-4.0.jar ===
     5494  02-15-06 15:55   junit/textui/TestRunner.class

=== junit.jar ===
     4810  09-04-02 23:22   junit/textui/TestRunner.class


OK, if I understood that correctly, it was a problem with your ant script building the classpath from all existing eclipse projects (and not taking concrete project dependencies into account).

Setting to 'invalid', please reopen if you think there's something we should do to avoid this problem (however, touching the existing JUnit jars is not an option for us -- we have to take them straight from www.junit.org).
So, Ed, in comment #5, where do you put the exclude? Just during test running, right? (not compile?). 

Is this issue likely to effect org.eclipse.ant.core.antRunner? 
We still use that in WTP, and I'm trying to determine if this same issue 
is related to changed/problems we are having movng to RC1. 


Our "test task" looks like the following ... 


	&lt;target name="runTestEclipse"&gt;
		&lt;java taskname="test-wtp-${testTarget}" classpath="${testRoot}/eclipse/startup.jar" fork="true" classname="org.eclipse.core.launcher.Main" failonerror="true" timeout="7200000" output="${testRoot}/results/consolelogs/wtptestlog.txt" dir="${testRoot}"&gt;
			&lt;jvmarg value="-Dosgi.ws=${basews}" /&gt;
			&lt;jvmarg value="-Dosgi.os=${baseos}" /&gt;
			&lt;jvmarg value="-Dosgi.arch=${basearch}" /&gt;
			&lt;jvmarg value="-Dws=${basews}" /&gt;
			&lt;jvmarg value="-Dos=${baseos}" /&gt;
			&lt;jvmarg value="-Darch=${basearch}" /&gt;
			&lt;jvmarg value="-Dnoclean=true" /&gt;
			&lt;jvmarg value="-DbuildType=${buildType}" /&gt;
			&lt;jvmarg value="-DbuildId=${buildId}" /&gt;
			&lt;jvmarg value="-DbuildLabel=${buildLabel}" /&gt;
			&lt;arg value="-propertyfile" /&gt;
			&lt;arg value="test.properties" /&gt;
			&lt;arg value="-application" /&gt;
			&lt;arg value="org.eclipse.ant.core.antRunner" /&gt;
			&lt;arg value="-file" /&gt;
			&lt;arg value="test.xml" /&gt;
			&lt;arg value="-logger" /&gt;
			&lt;arg value="org.apache.tools.ant.DefaultLogger" /&gt;
			&lt;arg value="${testTarget}" /&gt;
			&lt;sysproperty key="build.home" value="${build.home}" /&gt;
			&lt;sysproperty key="buildDirectory" value="${buildDirectory}" /&gt;
			&lt;sysproperty key="baseLocation" value="${baseLocation}" /&gt;
			&lt;sysproperty key="testDir" value="${testRoot}" /&gt;
			&lt;sysproperty key="perf.buildId" value="${buildType}${date}-${time}" /&gt;
			&lt;sysproperty key="eclipseBuilderDirectory" value="${pde.builder.path}" /&gt;
		&lt;/java&gt;
	&lt;/target&gt;

David:

See details on the fix here:

http://dev.eclipse.org/viewcvs/indextools.cgi/emf-home/emf-build/scripts/runJDK14Tests.xml.diff?r2=1.8&amp;r1=1.7&amp;diff_format=l</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="136735" />
    <CreationDate amount="2006-04-13 15:37:00 -0400" />
    <DupId amount="" />
    <classification amount="Tools" />
    <Product amount="TPTP Profiling" />
    <component amount="Platform.UI.ProfilingPerspective" />
    <Version amount="4.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Incorrect error messages for IAC profiling when RAC is running</Summery>
    <Patches amount="0" />
    <Stacktraces amount="1">
      <Stacktrace timestamp="1437330716164">
        <Exception>java.lang.NullPointerException</Exception>
        <Reason>null
java.lang.NullPointerException</Reason>
        <Frames>
          <Frame depth="0">org.eclipse.tptp.trace.ui.provisional.launcher.AbstractProcessLauncher.configureProcess(AbstractProcessLauncher.java:179)</Frame>
          <Frame depth="1">org.eclipse.tptp.trace.ui.internal.launcher.deleg.application.PIJavaLauncherDelegate.configureProcess(PIJavaLauncherDelegate.java:48)</Frame>
          <Frame depth="2">org.eclipse.tptp.trace.ui.provisional.launcher.PrimaryLaunchDelegate.run(PrimaryLaunchDelegate.java:302)</Frame>
          <Frame depth="3">java.lang.Thread.run(Thread.java:797)</Frame>
        </Frames>
      </Stacktrace>
    </Stacktraces>
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="5">
        <Lines>
          <Line>- Start RAC</Line>
          <Line>- Profile using IAC</Line>
          <Line>- There are two different error messages displayed as indicated by the attached snapshots.</Line>
          <Line>The first error message indicates that there is no agent controller running.  Even though there is.  It indicates that the Agent Controller might not be installed or might not be configured to connect to your computer.</Line>
          <Line>This is obviously an incorrect error message.  UI should indicate that the RAC is currently running and the user should select 'localhost:10002' instead of 'Local Direct Connection'.</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>Steps to reproduce:

- Start RAC
- Profile using IAC
- There are two different error messages displayed as indicated by the attached snapshots.
The first error message indicates that there is no agent controller running.  Even though there is.  It indicates that the Agent Controller might not be installed or might not be configured to connect to your computer.  
This is obviously an incorrect error message.  UI should indicate that the RAC is currently running and the user should select 'localhost:10002' instead of 'Local Direct Connection'.

When user clicks on OK another error message is generated indicating that the launch delegate has failed.  This second error message is redundant and it should be removed.  This error seems to be caused by the following NPE:

java.lang.NullPointerException
null
java.lang.NullPointerException
  at org.eclipse.tptp.trace.ui.provisional.launcher.AbstractProcessLauncher.configureProcess(AbstractProcessLauncher.java:179)
  at org.eclipse.tptp.trace.ui.internal.launcher.deleg.application.PIJavaLauncherDelegate.configureProcess(PIJavaLauncherDelegate.java:48)
  at org.eclipse.tptp.trace.ui.provisional.launcher.PrimaryLaunchDelegate.run(PrimaryLaunchDelegate.java:302)
  at java.lang.Thread.run(Thread.java:797)
Created attachment 38546
Error 1
Created attachment 38547
Error 2
The error message is fixed, there are also bug when an unknown host was selected. 
now the error message are based on selection of RAC/IAC/remote host. Existing error message are modified and reused.

for the second part of the problem, it's a dup of bug 138496
Verified on TPTP-4.2.0-200605100934.
Closing</WithStack>
    <WithOutStack>Steps to reproduce:

- Start RAC
- Profile using IAC
- There are two different error messages displayed as indicated by the attached snapshots.
The first error message indicates that there is no agent controller running.  Even though there is.  It indicates that the Agent Controller might not be installed or might not be configured to connect to your computer.  
This is obviously an incorrect error message.  UI should indicate that the RAC is currently running and the user should select 'localhost:10002' instead of 'Local Direct Connection'.

When user clicks on OK another error message is generated indicating that the launch delegate has failed.  This second error message is redundant and it should be removed.  This error seems to be caused by the following NPE:


Created attachment 38546
Error 1
Created attachment 38547
Error 2
The error message is fixed, there are also bug when an unknown host was selected. 
now the error message are based on selection of RAC/IAC/remote host. Existing error message are modified and reused.

for the second part of the problem, it's a dup of bug 138496
Verified on TPTP-4.2.0-200605100934.
Closing</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="136736" />
    <CreationDate amount="2006-04-13 15:39:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="UI" />
    <Version amount="3.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>[Graphics] [About] Conversion to png images has added an extra entry in the About Dialog</Summery>
    <Patches amount="0" />
    <Stacktraces amount="1">
      <Stacktrace timestamp="1437330716164">
        <Exception>org.eclipse.swt.SWTException</Exception>
        <Reason>Unsupported or unrecognized format</Reason>
        <Frames>
          <Frame depth="0">org.eclipse.swt.SWT.error(SWT.java:3374)</Frame>
          <Frame depth="1">org.eclipse.swt.SWT.error(SWT.java:3297)</Frame>
          <Frame depth="2">org.eclipse.swt.SWT.error(SWT.java:3268)</Frame>
          <Frame depth="3">org.eclipse.swt.internal.image.FileFormat.load(FileFormat.java:73)</Frame>
          <Frame depth="4">org.eclipse.swt.graphics.ImageLoader.load(ImageLoader.java:127)</Frame>
          <Frame depth="5">org.eclipse.swt.graphics.ImageDataLoader.load(ImageDataLoader.java:18)</Frame>
          <Frame depth="6">org.eclipse.swt.graphics.ImageData.&lt;init&gt;(ImageData.java:327)</Frame>
          <Frame depth="7">org.eclipse.jface.resource.URLImageDescriptor.getImageData(URLImageDescriptor.java)</Frame>
          <Frame depth="8">org.eclipse.jface.resource.ImageDescriptor.createImage(ImageDescriptor.java:279)</Frame>
          <Frame depth="9">org.eclipse.jface.resource.ImageDescriptor.createImage(ImageDescriptor.java:233)</Frame>
          <Frame depth="10">org.eclipse.jface.resource.ImageDescriptor.createImage(ImageDescriptor.java:211)</Frame>
          <Frame depth="11">org.eclipse.ui.internal.dialogs.AboutDialog.createFeatureButton(AboutDialog.java:372)</Frame>
          <Frame depth="12">org.eclipse.ui.internal.dialogs.AboutDialog.createFeatureImageButtonRow(AboutDialog.java:357)</Frame>
          <Frame depth="13">org.eclipse.ui.internal.dialogs.AboutDialog.createDialogArea(AboutDialog.java:336)</Frame>
        </Frames>
      </Stacktrace>
    </Stacktraces>
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="VERIFIED" />
    <resolution amount="FIXED" />
    <WithStack>20060412-1300

When we converted the images in 20060412-1300 to png we ended up with 3 instead of 2 entries on of which is still a gif.
That's because there is an image byte comparison happening to decide which images should be combined... so once the PNG is propegated around won't this go away?
My guesses the pngs are not identical.  The about dialog uses image hashes to determine unique images and if the hashes differ (ie: the files are not identical) then multiple images will be shown.
Created attachment 38714
Patch to projects I cannot commit to
Created attachment 38715
png to use to update
Adding Sonia as she will have to commit this
Patch applied, map file updated for:

org.eclipse.jdt
org.eclipse.jdt-feature
org.eclipse.pde
org.eclipse.pde-feature
org.eclipse.rcp (plug-in)
org.eclipse.platform-feature
This is done but we still have platform different than rcp and sdk (even though they use the same image) so we get two entries instead of one.

Kim is the image the only criterea fgor conglomeration?
We create keys based on the provider name (IBM) and image hash.  For each unique provider string and hash code a new image is shown.
see also bug 137559
This is fixed in 20060520
&gt; This is fixed in 20060520

Maybe it will be fixed then ;-), but it's broken in N20060425-0010:

I didn't check the other images, but at least /org.eclipse.jdt-feature/sourceTemplatePlugin/eclipse32.png is unreadable (probably due to bug 67306).

This results in the following exception when I try to open the About dialog in a runtime Eclipse of my development workspace:

!MESSAGE Unsupported or unrecognized format
!STACK 0
org.eclipse.swt.SWTException: Unsupported or unrecognized format
	at org.eclipse.swt.SWT.error(SWT.java:3374)
	at org.eclipse.swt.SWT.error(SWT.java:3297)
	at org.eclipse.swt.SWT.error(SWT.java:3268)
	at org.eclipse.swt.internal.image.FileFormat.load(FileFormat.java:73)
	at org.eclipse.swt.graphics.ImageLoader.load(ImageLoader.java:127)
	at org.eclipse.swt.graphics.ImageDataLoader.load(ImageDataLoader.java:18)
	at org.eclipse.swt.graphics.ImageData.&lt;init&gt;(ImageData.java:327)
	at org.eclipse.jface.resource.URLImageDescriptor.getImageData(URLImageDescriptor.java)
	at org.eclipse.jface.resource.ImageDescriptor.createImage(ImageDescriptor.java:279)
	at org.eclipse.jface.resource.ImageDescriptor.createImage(ImageDescriptor.java:233)
	at org.eclipse.jface.resource.ImageDescriptor.createImage(ImageDescriptor.java:211)
	at org.eclipse.ui.internal.dialogs.AboutDialog.createFeatureButton(AboutDialog.java:372)
	at org.eclipse.ui.internal.dialogs.AboutDialog.createFeatureImageButtonRow(AboutDialog.java:357)
	at org.eclipse.ui.internal.dialogs.AboutDialog.createDialogArea(AboutDialog.java:336)
...

Markus what platform are you on?
I'm on WinXP. Note: the png attached to this bug (attachment 38715) works for me. 

I guess the patch has been applied but the (binary) png is corrupted in patches, so the image from the attachment should be committed.
Note that /org.eclipse.jdt-feature/sourceTemplatePlugin/eclipse32.png is only shipped in the source builds.
This is an issue for the pde and jdt feature. Sonia please update 

/org.eclipse.pde-feature/sourceTemplatePlugin/eclipse32.png

and 

org.eclipse.jdt-feature\sourceTemplatePlugin\eclipse32.png

with this png as I do not have commit rights to them.
I have updated jdt and pde source plug-ins for the next builds.
*** Bug 138957 has been marked as a duplicate of this bug. ***
There were a number of build.properties which needed updating to include the png instead of the gif.  The png in the org.eclipse.platform plug-in was also different from the others.  I have replaced this to be the same as that in org.eclipse.sdk.  Fixes released for the 8 pm build.
The about dialog does not open at all in the 8 pm build.  The log contains the stack trace in comment #11.
The png in org.eclipse.pde was corrupt.  I replaced this for the next build.  I also replaced the ones in org.eclipse.jdt.source and org.eclipse.rcp - these appeared to be different from the others.  
Verified in 20060428-0010
Marking verified</WithStack>
    <WithOutStack>20060412-1300

When we converted the images in 20060412-1300 to png we ended up with 3 instead of 2 entries on of which is still a gif.
That's because there is an image byte comparison happening to decide which images should be combined... so once the PNG is propegated around won't this go away?
My guesses the pngs are not identical.  The about dialog uses image hashes to determine unique images and if the hashes differ (ie: the files are not identical) then multiple images will be shown.
Created attachment 38714
Patch to projects I cannot commit to
Created attachment 38715
png to use to update
Adding Sonia as she will have to commit this
Patch applied, map file updated for:

org.eclipse.jdt
org.eclipse.jdt-feature
org.eclipse.pde
org.eclipse.pde-feature
org.eclipse.rcp (plug-in)
org.eclipse.platform-feature
This is done but we still have platform different than rcp and sdk (even though they use the same image) so we get two entries instead of one.

Kim is the image the only criterea fgor conglomeration?
We create keys based on the provider name (IBM) and image hash.  For each unique provider string and hash code a new image is shown.
see also bug 137559
This is fixed in 20060520
&gt; This is fixed in 20060520

Maybe it will be fixed then ;-), but it's broken in N20060425-0010:

I didn't check the other images, but at least /org.eclipse.jdt-feature/sourceTemplatePlugin/eclipse32.png is unreadable (probably due to bug 67306).

This results in the following exception when I try to open the About dialog in a runtime Eclipse of my development workspace:

!MESSAGE Unsupported or unrecognized format
!STACK 0

...

Markus what platform are you on?
I'm on WinXP. Note: the png attached to this bug (attachment 38715) works for me. 

I guess the patch has been applied but the (binary) png is corrupted in patches, so the image from the attachment should be committed.
Note that /org.eclipse.jdt-feature/sourceTemplatePlugin/eclipse32.png is only shipped in the source builds.
This is an issue for the pde and jdt feature. Sonia please update 

/org.eclipse.pde-feature/sourceTemplatePlugin/eclipse32.png

and 

org.eclipse.jdt-feature\sourceTemplatePlugin\eclipse32.png

with this png as I do not have commit rights to them.
I have updated jdt and pde source plug-ins for the next builds.
*** Bug 138957 has been marked as a duplicate of this bug. ***
There were a number of build.properties which needed updating to include the png instead of the gif.  The png in the org.eclipse.platform plug-in was also different from the others.  I have replaced this to be the same as that in org.eclipse.sdk.  Fixes released for the 8 pm build.
The about dialog does not open at all in the 8 pm build.  The log contains the stack trace in comment #11.
The png in org.eclipse.pde was corrupt.  I replaced this for the next build.  I also replaced the ones in org.eclipse.jdt.source and org.eclipse.rcp - these appeared to be different from the others.  
Verified in 20060428-0010
Marking verified</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="136737" />
    <CreationDate amount="2006-04-13 15:47:00 -0400" />
    <DupId amount="" />
    <classification amount="BIRT" />
    <Product amount="BIRT" />
    <component amount="Report Engine" />
    <Version amount="unspecified" />
    <rep_platform amount="PC" />
    <op_sys amount="All" />
    <priority amount="P2" />
    <bug_severity amount="normal" />
    <Summery>need to specify the refresh to clean up the cached plugin info</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>We found that the OSGi Launcher only specifys -nosplash flag as the startup argument of the eclipse platform, we also need to specify the refresh to clean up the cached plugin info.
Fixed.</WithStack>
    <WithOutStack>We found that the OSGi Launcher only specifys -nosplash flag as the startup argument of the eclipse platform, we also need to specify the refresh to clean up the cached plugin info.
Fixed.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="136738" />
    <CreationDate amount="2006-04-13 15:49:00 -0400" />
    <DupId amount="" />
    <classification amount="Modeling" />
    <Product amount="GMF-Runtime" />
    <component amount="General" />
    <Version amount="1.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Linux" />
    <priority amount="P1" />
    <bug_severity amount="major" />
    <Summery>DeleteElementCommand leaves cross-resource-contained objects</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>The DeleteElementCommand disconnects cross-resource-contained objects from their eContainers but, unfortunately, it does not remove them from the contents of their eResource()s.  This results in the object not really being destroyed, because it is still reachable from some resource.
Created attachment 38702
Fix for the bug

Attached a fix for the bug and a JUnit to test it.
Reviewed and committed the patch.

Activity:
[136738] gmf_head cdamus 060417 DeleteElementCommand leaves cross-resource-contained objects
[GMF Restructure] Bug 319140 : product GMF and component
Runtime EMF was the original product and component for this bug</WithStack>
    <WithOutStack>The DeleteElementCommand disconnects cross-resource-contained objects from their eContainers but, unfortunately, it does not remove them from the contents of their eResource()s.  This results in the object not really being destroyed, because it is still reachable from some resource.
Created attachment 38702
Fix for the bug

Attached a fix for the bug and a JUnit to test it.
Reviewed and committed the patch.

Activity:
[136738] gmf_head cdamus 060417 DeleteElementCommand leaves cross-resource-contained objects
[GMF Restructure] Bug 319140 : product GMF and component
Runtime EMF was the original product and component for this bug</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="136739" />
    <CreationDate amount="2006-04-13 15:50:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="SWT" />
    <Version amount="3.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Linux-GTK" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>SWT Table always has lines visible in GTK</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>In GTK, it appears that setLinesVisible has no visible effect, seemingly always being "visible".  The background always comes through between columns and never comes through between rows.

The behavior seems OK in Windows and OSX.

The getters/setters work though setLinesVisible true will cause getLinesVisible to return true).

The easiest way to see this is to use trusty Snippet 129.  Adding a line that says table.setLinesVisible(true) will produce the same output.
http://dev.eclipse.org/viewcvs/index.cgi/%7Echeckout%7E/org.eclipse.swt.snippets/src/org/eclipse/swt/snippets/Snippet129.java

I am using 3.2M6 on Ubuntu Hoary (gtk 2.6.4).

In an initial investigation, it looks like setLinesVisible delegates to gtk_tree_view_set_rules_hint.  From the gtk docs, it seems that this is for a different purpose than changing the visibility of lines?
http://developer.gimp.org/api/2.0/gtk/GtkTreeView.html#gtk-tree-view-set-rules-hint

Screenshots coming.
Created attachment 38549
Snippet 129 on GTK 2.6.4

Note the grey vertical bars in the second and third columns.  They should not be there.

Contrast that to Win32 and OSX:
https://bugs.eclipse.org/bugs/attachment.cgi?id=36516
(ignore the bottom GTK example, that is from a previous bug report which has been fixed in 3.2M6)

hmmm... it looks like OSX is showing space between rows when it shouldn't be...
Those aren't "lines" between the columns, it's a (bug?) where the cell renderers
aren't filling the space between cells in a row.

The purpose of using setLinesVisible() is to make it easier to distinguish between
rows.  On Windows, this is drawn as visible lines between rows.  For GTK+, it
is up to the theme how it is drawn, but most draw them as alternating colours.
This is the purpose of gtk_tree_view_set_rules_hint().  I believe on MacOS rows
are also distinguished by alternating colours when setLinesVisible() is used.
"Note the grey vertical bars in the second and third columns.  They should not
be there."
I don't have these vetical bars running the test on Fedora Core 5.

Is possible for you to run using lastest SWT and GTK.

Created attachment 40900
snippet 129 on dapper, eclipse 3.1.2 and 3.2RC

Ran snippet 129 on Ubuntu Dapper Drake which uses Gnome 2.14.1.  This was run in Eclipse 3.1.2 (installed from dapper packages) and Eclipse 3.2 RC3 (downloaded from eclipse.org).  The attached picture shows them next to eachother.

The 3.1.2 version looks terrible.
The 3.2RC3 version looks great.

So, presumably this bug is a dup of bug 36516.

As Billy suggests, setLinesVisible is changing whether the background color alternates from white to grey.  This happens in both versions.  

Due to the way the table looked,  I thought setLinesVisible toggled whether those lines were visible -- but in fact it was due to bug 36516.  I suppose that would be setBorders or something.  The SWT docs say: "Marks the receiver's lines as visible if the argument is true, and marks it invisible otherwise."
The lines are some other bug.  SSQ, is this a dup or are the "lines" supposed to be there?
I beliebe this has been fixed for a while. Please reopen if otherwise.</WithStack>
    <WithOutStack>In GTK, it appears that setLinesVisible has no visible effect, seemingly always being "visible".  The background always comes through between columns and never comes through between rows.

The behavior seems OK in Windows and OSX.

The getters/setters work though setLinesVisible true will cause getLinesVisible to return true).

The easiest way to see this is to use trusty Snippet 129.  Adding a line that says table.setLinesVisible(true) will produce the same output.
http://dev.eclipse.org/viewcvs/index.cgi/%7Echeckout%7E/org.eclipse.swt.snippets/src/org/eclipse/swt/snippets/Snippet129.java

I am using 3.2M6 on Ubuntu Hoary (gtk 2.6.4).

In an initial investigation, it looks like setLinesVisible delegates to gtk_tree_view_set_rules_hint.  From the gtk docs, it seems that this is for a different purpose than changing the visibility of lines?
http://developer.gimp.org/api/2.0/gtk/GtkTreeView.html#gtk-tree-view-set-rules-hint

Screenshots coming.
Created attachment 38549
Snippet 129 on GTK 2.6.4

Note the grey vertical bars in the second and third columns.  They should not be there.

Contrast that to Win32 and OSX:
https://bugs.eclipse.org/bugs/attachment.cgi?id=36516
(ignore the bottom GTK example, that is from a previous bug report which has been fixed in 3.2M6)

hmmm... it looks like OSX is showing space between rows when it shouldn't be...
Those aren't "lines" between the columns, it's a (bug?) where the cell renderers
aren't filling the space between cells in a row.

The purpose of using setLinesVisible() is to make it easier to distinguish between
rows.  On Windows, this is drawn as visible lines between rows.  For GTK+, it
is up to the theme how it is drawn, but most draw them as alternating colours.
This is the purpose of gtk_tree_view_set_rules_hint().  I believe on MacOS rows
are also distinguished by alternating colours when setLinesVisible() is used.
"Note the grey vertical bars in the second and third columns.  They should not
be there."
I don't have these vetical bars running the test on Fedora Core 5.

Is possible for you to run using lastest SWT and GTK.

Created attachment 40900
snippet 129 on dapper, eclipse 3.1.2 and 3.2RC

Ran snippet 129 on Ubuntu Dapper Drake which uses Gnome 2.14.1.  This was run in Eclipse 3.1.2 (installed from dapper packages) and Eclipse 3.2 RC3 (downloaded from eclipse.org).  The attached picture shows them next to eachother.

The 3.1.2 version looks terrible.
The 3.2RC3 version looks great.

So, presumably this bug is a dup of bug 36516.

As Billy suggests, setLinesVisible is changing whether the background color alternates from white to grey.  This happens in both versions.  

Due to the way the table looked,  I thought setLinesVisible toggled whether those lines were visible -- but in fact it was due to bug 36516.  I suppose that would be setBorders or something.  The SWT docs say: "Marks the receiver's lines as visible if the argument is true, and marks it invisible otherwise."
The lines are some other bug.  SSQ, is this a dup or are the "lines" supposed to be there?
I beliebe this has been fixed for a while. Please reopen if otherwise.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="136740" />
    <CreationDate amount="2006-04-13 15:50:00 -0400" />
    <DupId amount="" />
    <classification amount="BIRT" />
    <Product amount="BIRT" />
    <component amount="Report Engine" />
    <Version amount="2.0.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows 2000" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Error exporting data from a grouped report.</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>This report has groups defined with conditional highlighting.
When you export, only some html tags are exported, no data is exported.
I think its important to mention here that I also made another report with groups with no conditional highlighting and data is exported correctly from that report.
=================exported data=============================
&lt;html&gt;&lt;body&gt;&lt;font color="red"&gt;&lt;/font&gt;&lt;/body&gt;&lt;/html&gt;

=================rptDesign=================================
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!-- Written by Eclipse BIRT 2.0 --&gt;
&lt;report xmlns="http://www.eclipse.org/birt/2005/design" version="3" id="1"&gt;
    &lt;property name="createdBy"&gt;Eclipse BIRT Designer Version 2.0.1 Build &amp;lt;20060222-1204&gt;&lt;/property&gt;
    &lt;property name="units"&gt;in&lt;/property&gt;
    &lt;property name="includeResource"&gt;a&lt;/property&gt;
    &lt;text-property name="displayName"&gt;Report Template&lt;/text-property&gt;
    &lt;data-sources&gt;
        &lt;oda-data-source extensionID="org.eclipse.birt.report.data.oda.jdbc" name="winccDataSource" id="44"&gt;
            &lt;property name="odaDriverClass"&gt;com.microsoft.jdbc.sqlserver.SQLServerDriver&lt;/property&gt;
            &lt;property name="odaURL"&gt;jdbc:microsoft:sqlserver://SDR7887D\WINCC:1193;SelectMethod=cursor;DatabaseName=CC_TestProj_06_02_17_15_09_53R&lt;/property&gt;
            &lt;property name="odaUser"&gt;user1&lt;/property&gt;
            &lt;encrypted-property name="odaPassword"&gt;dGhl&lt;/encrypted-property&gt;
        &lt;/oda-data-source&gt;
    &lt;/data-sources&gt;
    &lt;data-sets&gt;
        &lt;oda-data-set extensionID="org.eclipse.birt.report.data.oda.jdbc.JdbcSelectDataSet" name="winccDataSet" id="45"&gt;
            &lt;property name="dataSource"&gt;winccDataSource&lt;/property&gt;
            &lt;property name="queryText"&gt; select dbo.AlgDataTmp.msgnr as 'MessageNumber', 
 	dbo.AlgDataTmp.TimeDiff as 'Duration', 
 	dbo.AlgDataTmp.text1 as 'Description' , 
 	dbo.AlgDataTmp.ptext4 as 'Area', 
 	dbo.AlgDataTmp.ptext5 as 'Source' 
 from dbo.AlgDataTmp   &lt;/property&gt;
        &lt;/oda-data-set&gt;
    &lt;/data-sets&gt;
    &lt;page-setup&gt;
        &lt;simple-master-page name="Simple MasterPage" id="2"&gt;
            &lt;page-footer&gt;
                &lt;text id="3"&gt;
                    &lt;property name="contentType"&gt;html&lt;/property&gt;
                    &lt;text-property name="content"&gt;&lt;![CDATA[&lt;value-of&gt;new Date()&lt;/value-of&gt;]]&gt;&lt;/text-property&gt;
                &lt;/text&gt;
            &lt;/page-footer&gt;
        &lt;/simple-master-page&gt;
    &lt;/page-setup&gt;
    &lt;body&gt;
        &lt;grid id="4"&gt;
            &lt;property name="width"&gt;100%&lt;/property&gt;
            &lt;column id="5"/&gt;
            &lt;row id="6"&gt;
                &lt;cell id="7"/&gt;
            &lt;/row&gt;
            &lt;row id="8"&gt;
                &lt;cell id="9"&gt;
                    &lt;text id="96"&gt;
                        &lt;property name="backgroundColor"&gt;#00FFFF&lt;/property&gt;
                        &lt;property name="textAlign"&gt;center&lt;/property&gt;
                        &lt;property name="contentType"&gt;html&lt;/property&gt;
                        &lt;text-property name="content"&gt;&lt;![CDATA[&lt;H3&gt;Messages Grouped By Message Number&lt;/H3&gt;]]&gt;&lt;/text-property&gt;
                    &lt;/text&gt;
                &lt;/cell&gt;
            &lt;/row&gt;
            &lt;row id="10"&gt;
                &lt;cell id="11"/&gt;
            &lt;/row&gt;
        &lt;/grid&gt;
        &lt;grid id="12"&gt;
            &lt;property name="width"&gt;100%&lt;/property&gt;
            &lt;property name="dataSet"&gt;winccDataSet&lt;/property&gt;
            &lt;column id="13"/&gt;
            &lt;row id="16"&gt;
                &lt;cell id="17"&gt;
                    &lt;table id="47"&gt;
                        &lt;property name="width"&gt;100%&lt;/property&gt;
                        &lt;property name="dataSet"&gt;winccDataSet&lt;/property&gt;
                        &lt;column id="60"&gt;
                            &lt;property name="width"&gt;0.864in&lt;/property&gt;
                        &lt;/column&gt;
                        &lt;column id="61"&gt;
                            &lt;property name="width"&gt;1.489in&lt;/property&gt;
                        &lt;/column&gt;
                        &lt;column id="62"/&gt;
                        &lt;column id="84"/&gt;
                        &lt;column id="90"/&gt;
                        &lt;header&gt;
                            &lt;row id="48"&gt;
                                &lt;cell id="49"&gt;
                                    &lt;property name="backgroundColor"&gt;#FFFF00&lt;/property&gt;
                                    &lt;property name="fontWeight"&gt;bold&lt;/property&gt;
                                    &lt;property name="borderBottomColor"&gt;#000000&lt;/property&gt;
                                    &lt;property name="borderBottomStyle"&gt;solid&lt;/property&gt;
                                    &lt;property name="borderBottomWidth"&gt;medium&lt;/property&gt;
                                    &lt;property name="borderLeftColor"&gt;#000000&lt;/property&gt;
                                    &lt;property name="borderLeftStyle"&gt;solid&lt;/property&gt;
                                    &lt;property name="borderLeftWidth"&gt;medium&lt;/property&gt;
                                    &lt;property name="borderRightColor"&gt;#000000&lt;/property&gt;
                                    &lt;property name="borderRightStyle"&gt;solid&lt;/property&gt;
                                    &lt;property name="borderRightWidth"&gt;medium&lt;/property&gt;
                                    &lt;property name="borderTopColor"&gt;#000000&lt;/property&gt;
                                    &lt;property name="borderTopStyle"&gt;solid&lt;/property&gt;
                                    &lt;property name="borderTopWidth"&gt;medium&lt;/property&gt;
                                    &lt;property name="textAlign"&gt;center&lt;/property&gt;
                                    &lt;text id="95"&gt;
                                        &lt;property name="contentType"&gt;plain&lt;/property&gt;
                                        &lt;text-property name="content"&gt;&lt;![CDATA[Message#]]&gt;&lt;/text-property&gt;
                                    &lt;/text&gt;
                                &lt;/cell&gt;
                                &lt;cell id="50"&gt;
                                    &lt;property name="backgroundColor"&gt;#FFFF00&lt;/property&gt;
                                    &lt;property name="fontWeight"&gt;bold&lt;/property&gt;
                                    &lt;property name="borderBottomColor"&gt;#000000&lt;/property&gt;
                                    &lt;property name="borderBottomStyle"&gt;solid&lt;/property&gt;
                                    &lt;property name="borderBottomWidth"&gt;medium&lt;/property&gt;
                                    &lt;property name="borderLeftColor"&gt;#000000&lt;/property&gt;
                                    &lt;property name="borderLeftStyle"&gt;solid&lt;/property&gt;
                                    &lt;property name="borderLeftWidth"&gt;medium&lt;/property&gt;
                                    &lt;property name="borderRightColor"&gt;#000000&lt;/property&gt;
                                    &lt;property name="borderRightStyle"&gt;solid&lt;/property&gt;
                                    &lt;property name="borderRightWidth"&gt;medium&lt;/property&gt;
                                    &lt;property name="borderTopColor"&gt;#000000&lt;/property&gt;
                                    &lt;property name="borderTopStyle"&gt;solid&lt;/property&gt;
                                    &lt;property name="borderTopWidth"&gt;medium&lt;/property&gt;
                                    &lt;property name="textAlign"&gt;center&lt;/property&gt;
                                    &lt;label id="75"&gt;
                                        &lt;text-property name="text" key="Duration"&gt;Duration&lt;/text-property&gt;
                                    &lt;/label&gt;
                                &lt;/cell&gt;
                                &lt;cell id="51"&gt;
                                    &lt;property name="backgroundColor"&gt;#FFFF00&lt;/property&gt;
                                    &lt;property name="fontWeight"&gt;bold&lt;/property&gt;
                                    &lt;property name="borderBottomColor"&gt;#000000&lt;/property&gt;
                                    &lt;property name="borderBottomStyle"&gt;solid&lt;/property&gt;
                                    &lt;property name="borderBottomWidth"&gt;medium&lt;/property&gt;
                                    &lt;property name="borderLeftColor"&gt;#000000&lt;/property&gt;
                                    &lt;property name="borderLeftStyle"&gt;solid&lt;/property&gt;
                                    &lt;property name="borderLeftWidth"&gt;medium&lt;/property&gt;
                                    &lt;property name="borderRightColor"&gt;#000000&lt;/property&gt;
                                    &lt;property name="borderRightStyle"&gt;solid&lt;/property&gt;
                                    &lt;property name="borderRightWidth"&gt;medium&lt;/property&gt;
                                    &lt;property name="borderTopColor"&gt;#000000&lt;/property&gt;
                                    &lt;property name="borderTopStyle"&gt;solid&lt;/property&gt;
                                    &lt;property name="borderTopWidth"&gt;medium&lt;/property&gt;
                                    &lt;property name="textAlign"&gt;center&lt;/property&gt;
                                    &lt;label id="77"&gt;
                                        &lt;text-property name="text"&gt;Description&lt;/text-property&gt;
                                    &lt;/label&gt;
                                &lt;/cell&gt;
                                &lt;cell id="79"&gt;
                                    &lt;property name="backgroundColor"&gt;#FFFF00&lt;/property&gt;
                                    &lt;property name="fontWeight"&gt;bold&lt;/property&gt;
                                    &lt;property name="borderBottomColor"&gt;#000000&lt;/property&gt;
                                    &lt;property name="borderBottomStyle"&gt;solid&lt;/property&gt;
                                    &lt;property name="borderBottomWidth"&gt;medium&lt;/property&gt;
                                    &lt;property name="borderLeftColor"&gt;#000000&lt;/property&gt;
                                    &lt;property name="borderLeftStyle"&gt;solid&lt;/property&gt;
                                    &lt;property name="borderLeftWidth"&gt;medium&lt;/property&gt;
                                    &lt;property name="borderRightColor"&gt;#000000&lt;/property&gt;
                                    &lt;property name="borderRightStyle"&gt;solid&lt;/property&gt;
                                    &lt;property name="borderRightWidth"&gt;medium&lt;/property&gt;
                                    &lt;property name="borderTopColor"&gt;#000000&lt;/property&gt;
                                    &lt;property name="borderTopStyle"&gt;solid&lt;/property&gt;
                                    &lt;property name="borderTopWidth"&gt;medium&lt;/property&gt;
                                    &lt;property name="textAlign"&gt;center&lt;/property&gt;
                                    &lt;label id="91"&gt;
                                        &lt;text-property name="text"&gt;Area&lt;/text-property&gt;
                                    &lt;/label&gt;
                                &lt;/cell&gt;
                                &lt;cell id="85"&gt;
                                    &lt;property name="backgroundColor"&gt;#FFFF00&lt;/property&gt;
                                    &lt;property name="fontWeight"&gt;bold&lt;/property&gt;
                                    &lt;property name="borderBottomColor"&gt;#000000&lt;/property&gt;
                                    &lt;property name="borderBottomStyle"&gt;solid&lt;/property&gt;
                                    &lt;property name="borderBottomWidth"&gt;medium&lt;/property&gt;
                                    &lt;property name="borderLeftColor"&gt;#000000&lt;/property&gt;
                                    &lt;property name="borderLeftStyle"&gt;solid&lt;/property&gt;
                                    &lt;property name="borderLeftWidth"&gt;medium&lt;/property&gt;
                                    &lt;property name="borderRightColor"&gt;#000000&lt;/property&gt;
                                    &lt;property name="borderRightStyle"&gt;solid&lt;/property&gt;
                                    &lt;property name="borderRightWidth"&gt;medium&lt;/property&gt;
                                    &lt;property name="borderTopColor"&gt;#000000&lt;/property&gt;
                                    &lt;property name="borderTopStyle"&gt;solid&lt;/property&gt;
                                    &lt;property name="borderTopWidth"&gt;medium&lt;/property&gt;
                                    &lt;property name="textAlign"&gt;center&lt;/property&gt;
                                    &lt;label id="93"&gt;
                                        &lt;text-property name="text"&gt;Source&lt;/text-property&gt;
                                    &lt;/label&gt;
                                &lt;/cell&gt;
                            &lt;/row&gt;
                        &lt;/header&gt;
                        &lt;group id="64"&gt;
                            &lt;property name="groupName"&gt;groupMsgNr&lt;/property&gt;
                            &lt;property name="interval"&gt;none&lt;/property&gt;
                            &lt;property name="sortDirection"&gt;asc&lt;/property&gt;
                            &lt;expression name="keyExpr"&gt;row["MessageNumber"]&lt;/expression&gt;
                            &lt;header&gt;
                                &lt;row id="65"&gt;
                                    &lt;cell id="66"&gt;
                                        &lt;property name="colSpan"&gt;5&lt;/property&gt;
                                        &lt;property name="rowSpan"&gt;1&lt;/property&gt;
                                        &lt;property name="fontWeight"&gt;bold&lt;/property&gt;
                                        &lt;property name="borderBottomColor"&gt;#000000&lt;/property&gt;
                                        &lt;property name="borderBottomStyle"&gt;solid&lt;/property&gt;
                                        &lt;property name="borderBottomWidth"&gt;medium&lt;/property&gt;
                                        &lt;property name="borderLeftColor"&gt;#000000&lt;/property&gt;
                                        &lt;property name="borderLeftStyle"&gt;solid&lt;/property&gt;
                                        &lt;property name="borderLeftWidth"&gt;medium&lt;/property&gt;
                                        &lt;property name="borderRightColor"&gt;#000000&lt;/property&gt;
                                        &lt;property name="borderRightStyle"&gt;solid&lt;/property&gt;
                                        &lt;property name="borderRightWidth"&gt;medium&lt;/property&gt;
                                        &lt;property name="borderTopColor"&gt;#000000&lt;/property&gt;
                                        &lt;property name="borderTopStyle"&gt;solid&lt;/property&gt;
                                        &lt;property name="borderTopWidth"&gt;medium&lt;/property&gt;
                                        &lt;data id="74"&gt;
                                            &lt;list-property name="highlightRules"&gt;
                                                &lt;structure&gt;
                                                    &lt;property name="operator"&gt;gt&lt;/property&gt;
                                                    &lt;property name="backgroundColor"&gt;#FF0000&lt;/property&gt;
                                                    &lt;property name="color"&gt;#000000&lt;/property&gt;
                                                    &lt;expression name="testExpr"&gt;Total.count()&lt;/expression&gt;
                                                    &lt;expression name="value1"&gt;5&lt;/expression&gt;
                                                &lt;/structure&gt;
                                            &lt;/list-property&gt;
                                            &lt;property name="dataSet"&gt;winccDataSet&lt;/property&gt;
                                            &lt;expression name="valueExpr"&gt;"Message Number : " + row["MessageNumber"] + "      " + " Total Messages : " + Total.count()&lt;/expression&gt;
                                        &lt;/data&gt;
                                    &lt;/cell&gt;
                                &lt;/row&gt;
                            &lt;/header&gt;
                            &lt;footer&gt;
                                &lt;row id="69"&gt;
                                    &lt;cell id="70"/&gt;
                                    &lt;cell id="71"&gt;
                                        &lt;data id="105"&gt;
                                            &lt;list-property name="highlightRules"&gt;
                                                &lt;structure&gt;
                                                    &lt;property name="operator"&gt;gt&lt;/property&gt;
                                                    &lt;property name="backgroundColor"&gt;#FF0000&lt;/property&gt;
                                                    &lt;property name="color"&gt;#000000&lt;/property&gt;
                                                    &lt;expression name="testExpr"&gt;Total.count()&lt;/expression&gt;
                                                    &lt;expression name="value1"&gt;5&lt;/expression&gt;
                                                &lt;/structure&gt;
                                            &lt;/list-property&gt;
                                            &lt;expression name="valueExpr"&gt;"End of message " + row["MessageNumber"]&lt;/expression&gt;
                                        &lt;/data&gt;
                                    &lt;/cell&gt;
                                    &lt;cell id="72"/&gt;
                                    &lt;cell id="82"/&gt;
                                    &lt;cell id="88"/&gt;
                                &lt;/row&gt;
                            &lt;/footer&gt;
                        &lt;/group&gt;
                        &lt;detail&gt;
                            &lt;row id="52"&gt;
                                &lt;cell id="53"&gt;
                                    &lt;property name="borderBottomColor"&gt;#C0C0C0&lt;/property&gt;
                                    &lt;property name="borderBottomStyle"&gt;solid&lt;/property&gt;
                                    &lt;property name="borderBottomWidth"&gt;thin&lt;/property&gt;
                                    &lt;property name="borderLeftColor"&gt;#C0C0C0&lt;/property&gt;
                                    &lt;property name="borderLeftStyle"&gt;solid&lt;/property&gt;
                                    &lt;property name="borderLeftWidth"&gt;thin&lt;/property&gt;
                                    &lt;property name="borderRightColor"&gt;#C0C0C0&lt;/property&gt;
                                    &lt;property name="borderRightStyle"&gt;solid&lt;/property&gt;
                                    &lt;property name="borderRightWidth"&gt;thin&lt;/property&gt;
                                    &lt;property name="borderTopColor"&gt;#C0C0C0&lt;/property&gt;
                                    &lt;property name="borderTopStyle"&gt;solid&lt;/property&gt;
                                    &lt;property name="borderTopWidth"&gt;thin&lt;/property&gt;
                                &lt;/cell&gt;
                                &lt;cell id="54"&gt;
                                    &lt;property name="borderBottomColor"&gt;#C0C0C0&lt;/property&gt;
                                    &lt;property name="borderBottomStyle"&gt;solid&lt;/property&gt;
                                    &lt;property name="borderBottomWidth"&gt;thin&lt;/property&gt;
                                    &lt;property name="borderLeftColor"&gt;#C0C0C0&lt;/property&gt;
                                    &lt;property name="borderLeftStyle"&gt;solid&lt;/property&gt;
                                    &lt;property name="borderLeftWidth"&gt;thin&lt;/property&gt;
                                    &lt;property name="borderRightColor"&gt;#C0C0C0&lt;/property&gt;
                                    &lt;property name="borderRightStyle"&gt;solid&lt;/property&gt;
                                    &lt;property name="borderRightWidth"&gt;thin&lt;/property&gt;
                                    &lt;property name="borderTopColor"&gt;#C0C0C0&lt;/property&gt;
                                    &lt;property name="borderTopStyle"&gt;solid&lt;/property&gt;
                                    &lt;property name="borderTopWidth"&gt;thin&lt;/property&gt;
                                    &lt;data id="76"&gt;
                                        &lt;property name="dataSet"&gt;winccDataSet&lt;/property&gt;
                                        &lt;expression name="valueExpr"&gt;row["Duration"]&lt;/expression&gt;
                                    &lt;/data&gt;
                                &lt;/cell&gt;
                                &lt;cell id="55"&gt;
                                    &lt;property name="borderBottomColor"&gt;#C0C0C0&lt;/property&gt;
                                    &lt;property name="borderBottomStyle"&gt;solid&lt;/property&gt;
                                    &lt;property name="borderBottomWidth"&gt;thin&lt;/property&gt;
                                    &lt;property name="borderLeftColor"&gt;#C0C0C0&lt;/property&gt;
                                    &lt;property name="borderLeftStyle"&gt;solid&lt;/property&gt;
                                    &lt;property name="borderLeftWidth"&gt;thin&lt;/property&gt;
                                    &lt;property name="borderRightColor"&gt;#C0C0C0&lt;/property&gt;
                                    &lt;property name="borderRightStyle"&gt;solid&lt;/property&gt;
                                    &lt;property name="borderRightWidth"&gt;thin&lt;/property&gt;
                                    &lt;property name="borderTopColor"&gt;#C0C0C0&lt;/property&gt;
                                    &lt;property name="borderTopStyle"&gt;solid&lt;/property&gt;
                                    &lt;property name="borderTopWidth"&gt;thin&lt;/property&gt;
                                    &lt;data id="78"&gt;
                                        &lt;property name="dataSet"&gt;winccDataSet&lt;/property&gt;
                                        &lt;expression name="valueExpr"&gt;row["Description"]&lt;/expression&gt;
                                    &lt;/data&gt;
                                &lt;/cell&gt;
                                &lt;cell id="81"&gt;
                                    &lt;property name="borderBottomColor"&gt;#C0C0C0&lt;/property&gt;
                                    &lt;property name="borderBottomStyle"&gt;solid&lt;/property&gt;
                                    &lt;property name="borderBottomWidth"&gt;thin&lt;/property&gt;
                                    &lt;property name="borderLeftColor"&gt;#C0C0C0&lt;/property&gt;
                                    &lt;property name="borderLeftStyle"&gt;solid&lt;/property&gt;
                                    &lt;property name="borderLeftWidth"&gt;thin&lt;/property&gt;
                                    &lt;property name="borderRightColor"&gt;#C0C0C0&lt;/property&gt;
                                    &lt;property name="borderRightStyle"&gt;solid&lt;/property&gt;
                                    &lt;property name="borderRightWidth"&gt;thin&lt;/property&gt;
                                    &lt;property name="borderTopColor"&gt;#C0C0C0&lt;/property&gt;
                                    &lt;property name="borderTopStyle"&gt;solid&lt;/property&gt;
                                    &lt;property name="borderTopWidth"&gt;thin&lt;/property&gt;
                                    &lt;data id="92"&gt;
                                        &lt;property name="dataSet"&gt;winccDataSet&lt;/property&gt;
                                        &lt;expression name="valueExpr"&gt;row["Area"]&lt;/expression&gt;
                                    &lt;/data&gt;
                                &lt;/cell&gt;
                                &lt;cell id="87"&gt;
                                    &lt;property name="borderBottomColor"&gt;#C0C0C0&lt;/property&gt;
                                    &lt;property name="borderBottomStyle"&gt;solid&lt;/property&gt;
                                    &lt;property name="borderBottomWidth"&gt;thin&lt;/property&gt;
                                    &lt;property name="borderLeftColor"&gt;#C0C0C0&lt;/property&gt;
                                    &lt;property name="borderLeftStyle"&gt;solid&lt;/property&gt;
                                    &lt;property name="borderLeftWidth"&gt;thin&lt;/property&gt;
                                    &lt;property name="borderRightColor"&gt;#C0C0C0&lt;/property&gt;
                                    &lt;property name="borderRightStyle"&gt;solid&lt;/property&gt;
                                    &lt;property name="borderRightWidth"&gt;thin&lt;/property&gt;
                                    &lt;property name="borderTopColor"&gt;#C0C0C0&lt;/property&gt;
                                    &lt;property name="borderTopStyle"&gt;solid&lt;/property&gt;
                                    &lt;property name="borderTopWidth"&gt;thin&lt;/property&gt;
                                    &lt;data id="94"&gt;
                                        &lt;property name="dataSet"&gt;winccDataSet&lt;/property&gt;
                                        &lt;expression name="valueExpr"&gt;row["Source"]&lt;/expression&gt;
                                    &lt;/data&gt;
                                &lt;/cell&gt;
                            &lt;/row&gt;
                        &lt;/detail&gt;
                        &lt;footer&gt;
                            &lt;row id="56"&gt;
                                &lt;cell id="57"/&gt;
                                &lt;cell id="58"/&gt;
                                &lt;cell id="59"/&gt;
                                &lt;cell id="83"/&gt;
                                &lt;cell id="89"/&gt;
                            &lt;/row&gt;
                        &lt;/footer&gt;
                    &lt;/table&gt;
&lt;/cell&gt;
            &lt;/row&gt;
            &lt;row id="20"&gt;
                &lt;cell id="21"/&gt;
            &lt;/row&gt;
            &lt;row id="24"&gt;
                &lt;cell id="25"/&gt;
            &lt;/row&gt;
        &lt;/grid&gt;
        &lt;grid id="28"&gt;
            &lt;property name="width"&gt;100%&lt;/property&gt;
            &lt;column id="29"/&gt;
            &lt;row id="32"&gt;
                &lt;cell id="33"/&gt;
            &lt;/row&gt;
            &lt;row id="36"&gt;
                &lt;cell id="37"/&gt;
            &lt;/row&gt;
            &lt;row id="40"&gt;
                &lt;cell id="41"/&gt;
            &lt;/row&gt;
        &lt;/grid&gt;
    &lt;/body&gt;
&lt;/report&gt;
I have changed data set for BIRT sample data set and used 2006.4.18 BIRT to run the design file. It can export the data.
There is another problem that the BIRT can not support total count in highlight. We are solving this problem now.
You can try current version BIRT again. The data can be exported.
Created attachment 38882
Design file. Data set and the expression have been changed.
Created attachment 38884
Screen capture. The data can be exported.
Hi, AJ.

I can not produce the problem you mentioned. 
Can you try current BIRT. Please let me know whether the current BIRT have this problem.

Thanks.
can't reproduce in our desktop.
please try out RC2 build.


The query should be excutable even if there is a error in some of the script expressions of the column bindings.
Data has changed so that one illegal column binding would not prevent other legal column binding from being evaluated and displayed.Reassign to engine team for further investigation.

Fixed!

PS: the expression can not contain carriage return character.</WithStack>
    <WithOutStack>This report has groups defined with conditional highlighting.
When you export, only some html tags are exported, no data is exported.
I think its important to mention here that I also made another report with groups with no conditional highlighting and data is exported correctly from that report.
=================exported data=============================
&lt;html&gt;&lt;body&gt;&lt;font color="red"&gt;&lt;/font&gt;&lt;/body&gt;&lt;/html&gt;

=================rptDesign=================================
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!-- Written by Eclipse BIRT 2.0 --&gt;
&lt;report xmlns="http://www.eclipse.org/birt/2005/design" version="3" id="1"&gt;
    &lt;property name="createdBy"&gt;Eclipse BIRT Designer Version 2.0.1 Build &amp;lt;20060222-1204&gt;&lt;/property&gt;
    &lt;property name="units"&gt;in&lt;/property&gt;
    &lt;property name="includeResource"&gt;a&lt;/property&gt;
    &lt;text-property name="displayName"&gt;Report Template&lt;/text-property&gt;
    &lt;data-sources&gt;
        &lt;oda-data-source extensionID="org.eclipse.birt.report.data.oda.jdbc" name="winccDataSource" id="44"&gt;
            &lt;property name="odaDriverClass"&gt;com.microsoft.jdbc.sqlserver.SQLServerDriver&lt;/property&gt;
            &lt;property name="odaURL"&gt;jdbc:microsoft:sqlserver://SDR7887D\WINCC:1193;SelectMethod=cursor;DatabaseName=CC_TestProj_06_02_17_15_09_53R&lt;/property&gt;
            &lt;property name="odaUser"&gt;user1&lt;/property&gt;
            &lt;encrypted-property name="odaPassword"&gt;dGhl&lt;/encrypted-property&gt;
        &lt;/oda-data-source&gt;
    &lt;/data-sources&gt;
    &lt;data-sets&gt;
        &lt;oda-data-set extensionID="org.eclipse.birt.report.data.oda.jdbc.JdbcSelectDataSet" name="winccDataSet" id="45"&gt;
            &lt;property name="dataSource"&gt;winccDataSource&lt;/property&gt;
            &lt;property name="queryText"&gt; select dbo.AlgDataTmp.msgnr as 'MessageNumber', 
 	dbo.AlgDataTmp.TimeDiff as 'Duration', 
 	dbo.AlgDataTmp.text1 as 'Description' , 
 	dbo.AlgDataTmp.ptext4 as 'Area', 
 	dbo.AlgDataTmp.ptext5 as 'Source' 
 from dbo.AlgDataTmp   &lt;/property&gt;
        &lt;/oda-data-set&gt;
    &lt;/data-sets&gt;
    &lt;page-setup&gt;
        &lt;simple-master-page name="Simple MasterPage" id="2"&gt;
            &lt;page-footer&gt;
                &lt;text id="3"&gt;
                    &lt;property name="contentType"&gt;html&lt;/property&gt;
                    &lt;text-property name="content"&gt;&lt;![CDATA[&lt;value-of&gt;new Date()&lt;/value-of&gt;]]&gt;&lt;/text-property&gt;
                &lt;/text&gt;
            &lt;/page-footer&gt;
        &lt;/simple-master-page&gt;
    &lt;/page-setup&gt;
    &lt;body&gt;
        &lt;grid id="4"&gt;
            &lt;property name="width"&gt;100%&lt;/property&gt;
            &lt;column id="5"/&gt;
            &lt;row id="6"&gt;
                &lt;cell id="7"/&gt;
            &lt;/row&gt;
            &lt;row id="8"&gt;
                &lt;cell id="9"&gt;
                    &lt;text id="96"&gt;
                        &lt;property name="backgroundColor"&gt;#00FFFF&lt;/property&gt;
                        &lt;property name="textAlign"&gt;center&lt;/property&gt;
                        &lt;property name="contentType"&gt;html&lt;/property&gt;
                        &lt;text-property name="content"&gt;&lt;![CDATA[&lt;H3&gt;Messages Grouped By Message Number&lt;/H3&gt;]]&gt;&lt;/text-property&gt;
                    &lt;/text&gt;
                &lt;/cell&gt;
            &lt;/row&gt;
            &lt;row id="10"&gt;
                &lt;cell id="11"/&gt;
            &lt;/row&gt;
        &lt;/grid&gt;
        &lt;grid id="12"&gt;
            &lt;property name="width"&gt;100%&lt;/property&gt;
            &lt;property name="dataSet"&gt;winccDataSet&lt;/property&gt;
            &lt;column id="13"/&gt;
            &lt;row id="16"&gt;
                &lt;cell id="17"&gt;
                    &lt;table id="47"&gt;
                        &lt;property name="width"&gt;100%&lt;/property&gt;
                        &lt;property name="dataSet"&gt;winccDataSet&lt;/property&gt;
                        &lt;column id="60"&gt;
                            &lt;property name="width"&gt;0.864in&lt;/property&gt;
                        &lt;/column&gt;
                        &lt;column id="61"&gt;
                            &lt;property name="width"&gt;1.489in&lt;/property&gt;
                        &lt;/column&gt;
                        &lt;column id="62"/&gt;
                        &lt;column id="84"/&gt;
                        &lt;column id="90"/&gt;
                        &lt;header&gt;
                            &lt;row id="48"&gt;
                                &lt;cell id="49"&gt;
                                    &lt;property name="backgroundColor"&gt;#FFFF00&lt;/property&gt;
                                    &lt;property name="fontWeight"&gt;bold&lt;/property&gt;
                                    &lt;property name="borderBottomColor"&gt;#000000&lt;/property&gt;
                                    &lt;property name="borderBottomStyle"&gt;solid&lt;/property&gt;
                                    &lt;property name="borderBottomWidth"&gt;medium&lt;/property&gt;
                                    &lt;property name="borderLeftColor"&gt;#000000&lt;/property&gt;
                                    &lt;property name="borderLeftStyle"&gt;solid&lt;/property&gt;
                                    &lt;property name="borderLeftWidth"&gt;medium&lt;/property&gt;
                                    &lt;property name="borderRightColor"&gt;#000000&lt;/property&gt;
                                    &lt;property name="borderRightStyle"&gt;solid&lt;/property&gt;
                                    &lt;property name="borderRightWidth"&gt;medium&lt;/property&gt;
                                    &lt;property name="borderTopColor"&gt;#000000&lt;/property&gt;
                                    &lt;property name="borderTopStyle"&gt;solid&lt;/property&gt;
                                    &lt;property name="borderTopWidth"&gt;medium&lt;/property&gt;
                                    &lt;property name="textAlign"&gt;center&lt;/property&gt;
                                    &lt;text id="95"&gt;
                                        &lt;property name="contentType"&gt;plain&lt;/property&gt;
                                        &lt;text-property name="content"&gt;&lt;![CDATA[Message#]]&gt;&lt;/text-property&gt;
                                    &lt;/text&gt;
                                &lt;/cell&gt;
                                &lt;cell id="50"&gt;
                                    &lt;property name="backgroundColor"&gt;#FFFF00&lt;/property&gt;
                                    &lt;property name="fontWeight"&gt;bold&lt;/property&gt;
                                    &lt;property name="borderBottomColor"&gt;#000000&lt;/property&gt;
                                    &lt;property name="borderBottomStyle"&gt;solid&lt;/property&gt;
                                    &lt;property name="borderBottomWidth"&gt;medium&lt;/property&gt;
                                    &lt;property name="borderLeftColor"&gt;#000000&lt;/property&gt;
                                    &lt;property name="borderLeftStyle"&gt;solid&lt;/property&gt;
                                    &lt;property name="borderLeftWidth"&gt;medium&lt;/property&gt;
                                    &lt;property name="borderRightColor"&gt;#000000&lt;/property&gt;
                                    &lt;property name="borderRightStyle"&gt;solid&lt;/property&gt;
                                    &lt;property name="borderRightWidth"&gt;medium&lt;/property&gt;
                                    &lt;property name="borderTopColor"&gt;#000000&lt;/property&gt;
                                    &lt;property name="borderTopStyle"&gt;solid&lt;/property&gt;
                                    &lt;property name="borderTopWidth"&gt;medium&lt;/property&gt;
                                    &lt;property name="textAlign"&gt;center&lt;/property&gt;
                                    &lt;label id="75"&gt;
                                        &lt;text-property name="text" key="Duration"&gt;Duration&lt;/text-property&gt;
                                    &lt;/label&gt;
                                &lt;/cell&gt;
                                &lt;cell id="51"&gt;
                                    &lt;property name="backgroundColor"&gt;#FFFF00&lt;/property&gt;
                                    &lt;property name="fontWeight"&gt;bold&lt;/property&gt;
                                    &lt;property name="borderBottomColor"&gt;#000000&lt;/property&gt;
                                    &lt;property name="borderBottomStyle"&gt;solid&lt;/property&gt;
                                    &lt;property name="borderBottomWidth"&gt;medium&lt;/property&gt;
                                    &lt;property name="borderLeftColor"&gt;#000000&lt;/property&gt;
                                    &lt;property name="borderLeftStyle"&gt;solid&lt;/property&gt;
                                    &lt;property name="borderLeftWidth"&gt;medium&lt;/property&gt;
                                    &lt;property name="borderRightColor"&gt;#000000&lt;/property&gt;
                                    &lt;property name="borderRightStyle"&gt;solid&lt;/property&gt;
                                    &lt;property name="borderRightWidth"&gt;medium&lt;/property&gt;
                                    &lt;property name="borderTopColor"&gt;#000000&lt;/property&gt;
                                    &lt;property name="borderTopStyle"&gt;solid&lt;/property&gt;
                                    &lt;property name="borderTopWidth"&gt;medium&lt;/property&gt;
                                    &lt;property name="textAlign"&gt;center&lt;/property&gt;
                                    &lt;label id="77"&gt;
                                        &lt;text-property name="text"&gt;Description&lt;/text-property&gt;
                                    &lt;/label&gt;
                                &lt;/cell&gt;
                                &lt;cell id="79"&gt;
                                    &lt;property name="backgroundColor"&gt;#FFFF00&lt;/property&gt;
                                    &lt;property name="fontWeight"&gt;bold&lt;/property&gt;
                                    &lt;property name="borderBottomColor"&gt;#000000&lt;/property&gt;
                                    &lt;property name="borderBottomStyle"&gt;solid&lt;/property&gt;
                                    &lt;property name="borderBottomWidth"&gt;medium&lt;/property&gt;
                                    &lt;property name="borderLeftColor"&gt;#000000&lt;/property&gt;
                                    &lt;property name="borderLeftStyle"&gt;solid&lt;/property&gt;
                                    &lt;property name="borderLeftWidth"&gt;medium&lt;/property&gt;
                                    &lt;property name="borderRightColor"&gt;#000000&lt;/property&gt;
                                    &lt;property name="borderRightStyle"&gt;solid&lt;/property&gt;
                                    &lt;property name="borderRightWidth"&gt;medium&lt;/property&gt;
                                    &lt;property name="borderTopColor"&gt;#000000&lt;/property&gt;
                                    &lt;property name="borderTopStyle"&gt;solid&lt;/property&gt;
                                    &lt;property name="borderTopWidth"&gt;medium&lt;/property&gt;
                                    &lt;property name="textAlign"&gt;center&lt;/property&gt;
                                    &lt;label id="91"&gt;
                                        &lt;text-property name="text"&gt;Area&lt;/text-property&gt;
                                    &lt;/label&gt;
                                &lt;/cell&gt;
                                &lt;cell id="85"&gt;
                                    &lt;property name="backgroundColor"&gt;#FFFF00&lt;/property&gt;
                                    &lt;property name="fontWeight"&gt;bold&lt;/property&gt;
                                    &lt;property name="borderBottomColor"&gt;#000000&lt;/property&gt;
                                    &lt;property name="borderBottomStyle"&gt;solid&lt;/property&gt;
                                    &lt;property name="borderBottomWidth"&gt;medium&lt;/property&gt;
                                    &lt;property name="borderLeftColor"&gt;#000000&lt;/property&gt;
                                    &lt;property name="borderLeftStyle"&gt;solid&lt;/property&gt;
                                    &lt;property name="borderLeftWidth"&gt;medium&lt;/property&gt;
                                    &lt;property name="borderRightColor"&gt;#000000&lt;/property&gt;
                                    &lt;property name="borderRightStyle"&gt;solid&lt;/property&gt;
                                    &lt;property name="borderRightWidth"&gt;medium&lt;/property&gt;
                                    &lt;property name="borderTopColor"&gt;#000000&lt;/property&gt;
                                    &lt;property name="borderTopStyle"&gt;solid&lt;/property&gt;
                                    &lt;property name="borderTopWidth"&gt;medium&lt;/property&gt;
                                    &lt;property name="textAlign"&gt;center&lt;/property&gt;
                                    &lt;label id="93"&gt;
                                        &lt;text-property name="text"&gt;Source&lt;/text-property&gt;
                                    &lt;/label&gt;
                                &lt;/cell&gt;
                            &lt;/row&gt;
                        &lt;/header&gt;
                        &lt;group id="64"&gt;
                            &lt;property name="groupName"&gt;groupMsgNr&lt;/property&gt;
                            &lt;property name="interval"&gt;none&lt;/property&gt;
                            &lt;property name="sortDirection"&gt;asc&lt;/property&gt;
                            &lt;expression name="keyExpr"&gt;row["MessageNumber"]&lt;/expression&gt;
                            &lt;header&gt;
                                &lt;row id="65"&gt;
                                    &lt;cell id="66"&gt;
                                        &lt;property name="colSpan"&gt;5&lt;/property&gt;
                                        &lt;property name="rowSpan"&gt;1&lt;/property&gt;
                                        &lt;property name="fontWeight"&gt;bold&lt;/property&gt;
                                        &lt;property name="borderBottomColor"&gt;#000000&lt;/property&gt;
                                        &lt;property name="borderBottomStyle"&gt;solid&lt;/property&gt;
                                        &lt;property name="borderBottomWidth"&gt;medium&lt;/property&gt;
                                        &lt;property name="borderLeftColor"&gt;#000000&lt;/property&gt;
                                        &lt;property name="borderLeftStyle"&gt;solid&lt;/property&gt;
                                        &lt;property name="borderLeftWidth"&gt;medium&lt;/property&gt;
                                        &lt;property name="borderRightColor"&gt;#000000&lt;/property&gt;
                                        &lt;property name="borderRightStyle"&gt;solid&lt;/property&gt;
                                        &lt;property name="borderRightWidth"&gt;medium&lt;/property&gt;
                                        &lt;property name="borderTopColor"&gt;#000000&lt;/property&gt;
                                        &lt;property name="borderTopStyle"&gt;solid&lt;/property&gt;
                                        &lt;property name="borderTopWidth"&gt;medium&lt;/property&gt;
                                        &lt;data id="74"&gt;
                                            &lt;list-property name="highlightRules"&gt;
                                                &lt;structure&gt;
                                                    &lt;property name="operator"&gt;gt&lt;/property&gt;
                                                    &lt;property name="backgroundColor"&gt;#FF0000&lt;/property&gt;
                                                    &lt;property name="color"&gt;#000000&lt;/property&gt;
                                                    &lt;expression name="testExpr"&gt;Total.count()&lt;/expression&gt;
                                                    &lt;expression name="value1"&gt;5&lt;/expression&gt;
                                                &lt;/structure&gt;
                                            &lt;/list-property&gt;
                                            &lt;property name="dataSet"&gt;winccDataSet&lt;/property&gt;
                                            &lt;expression name="valueExpr"&gt;"Message Number : " + row["MessageNumber"] + "      " + " Total Messages : " + Total.count()&lt;/expression&gt;
                                        &lt;/data&gt;
                                    &lt;/cell&gt;
                                &lt;/row&gt;
                            &lt;/header&gt;
                            &lt;footer&gt;
                                &lt;row id="69"&gt;
                                    &lt;cell id="70"/&gt;
                                    &lt;cell id="71"&gt;
                                        &lt;data id="105"&gt;
                                            &lt;list-property name="highlightRules"&gt;
                                                &lt;structure&gt;
                                                    &lt;property name="operator"&gt;gt&lt;/property&gt;
                                                    &lt;property name="backgroundColor"&gt;#FF0000&lt;/property&gt;
                                                    &lt;property name="color"&gt;#000000&lt;/property&gt;
                                                    &lt;expression name="testExpr"&gt;Total.count()&lt;/expression&gt;
                                                    &lt;expression name="value1"&gt;5&lt;/expression&gt;
                                                &lt;/structure&gt;
                                            &lt;/list-property&gt;
                                            &lt;expression name="valueExpr"&gt;"End of message " + row["MessageNumber"]&lt;/expression&gt;
                                        &lt;/data&gt;
                                    &lt;/cell&gt;
                                    &lt;cell id="72"/&gt;
                                    &lt;cell id="82"/&gt;
                                    &lt;cell id="88"/&gt;
                                &lt;/row&gt;
                            &lt;/footer&gt;
                        &lt;/group&gt;
                        &lt;detail&gt;
                            &lt;row id="52"&gt;
                                &lt;cell id="53"&gt;
                                    &lt;property name="borderBottomColor"&gt;#C0C0C0&lt;/property&gt;
                                    &lt;property name="borderBottomStyle"&gt;solid&lt;/property&gt;
                                    &lt;property name="borderBottomWidth"&gt;thin&lt;/property&gt;
                                    &lt;property name="borderLeftColor"&gt;#C0C0C0&lt;/property&gt;
                                    &lt;property name="borderLeftStyle"&gt;solid&lt;/property&gt;
                                    &lt;property name="borderLeftWidth"&gt;thin&lt;/property&gt;
                                    &lt;property name="borderRightColor"&gt;#C0C0C0&lt;/property&gt;
                                    &lt;property name="borderRightStyle"&gt;solid&lt;/property&gt;
                                    &lt;property name="borderRightWidth"&gt;thin&lt;/property&gt;
                                    &lt;property name="borderTopColor"&gt;#C0C0C0&lt;/property&gt;
                                    &lt;property name="borderTopStyle"&gt;solid&lt;/property&gt;
                                    &lt;property name="borderTopWidth"&gt;thin&lt;/property&gt;
                                &lt;/cell&gt;
                                &lt;cell id="54"&gt;
                                    &lt;property name="borderBottomColor"&gt;#C0C0C0&lt;/property&gt;
                                    &lt;property name="borderBottomStyle"&gt;solid&lt;/property&gt;
                                    &lt;property name="borderBottomWidth"&gt;thin&lt;/property&gt;
                                    &lt;property name="borderLeftColor"&gt;#C0C0C0&lt;/property&gt;
                                    &lt;property name="borderLeftStyle"&gt;solid&lt;/property&gt;
                                    &lt;property name="borderLeftWidth"&gt;thin&lt;/property&gt;
                                    &lt;property name="borderRightColor"&gt;#C0C0C0&lt;/property&gt;
                                    &lt;property name="borderRightStyle"&gt;solid&lt;/property&gt;
                                    &lt;property name="borderRightWidth"&gt;thin&lt;/property&gt;
                                    &lt;property name="borderTopColor"&gt;#C0C0C0&lt;/property&gt;
                                    &lt;property name="borderTopStyle"&gt;solid&lt;/property&gt;
                                    &lt;property name="borderTopWidth"&gt;thin&lt;/property&gt;
                                    &lt;data id="76"&gt;
                                        &lt;property name="dataSet"&gt;winccDataSet&lt;/property&gt;
                                        &lt;expression name="valueExpr"&gt;row["Duration"]&lt;/expression&gt;
                                    &lt;/data&gt;
                                &lt;/cell&gt;
                                &lt;cell id="55"&gt;
                                    &lt;property name="borderBottomColor"&gt;#C0C0C0&lt;/property&gt;
                                    &lt;property name="borderBottomStyle"&gt;solid&lt;/property&gt;
                                    &lt;property name="borderBottomWidth"&gt;thin&lt;/property&gt;
                                    &lt;property name="borderLeftColor"&gt;#C0C0C0&lt;/property&gt;
                                    &lt;property name="borderLeftStyle"&gt;solid&lt;/property&gt;
                                    &lt;property name="borderLeftWidth"&gt;thin&lt;/property&gt;
                                    &lt;property name="borderRightColor"&gt;#C0C0C0&lt;/property&gt;
                                    &lt;property name="borderRightStyle"&gt;solid&lt;/property&gt;
                                    &lt;property name="borderRightWidth"&gt;thin&lt;/property&gt;
                                    &lt;property name="borderTopColor"&gt;#C0C0C0&lt;/property&gt;
                                    &lt;property name="borderTopStyle"&gt;solid&lt;/property&gt;
                                    &lt;property name="borderTopWidth"&gt;thin&lt;/property&gt;
                                    &lt;data id="78"&gt;
                                        &lt;property name="dataSet"&gt;winccDataSet&lt;/property&gt;
                                        &lt;expression name="valueExpr"&gt;row["Description"]&lt;/expression&gt;
                                    &lt;/data&gt;
                                &lt;/cell&gt;
                                &lt;cell id="81"&gt;
                                    &lt;property name="borderBottomColor"&gt;#C0C0C0&lt;/property&gt;
                                    &lt;property name="borderBottomStyle"&gt;solid&lt;/property&gt;
                                    &lt;property name="borderBottomWidth"&gt;thin&lt;/property&gt;
                                    &lt;property name="borderLeftColor"&gt;#C0C0C0&lt;/property&gt;
                                    &lt;property name="borderLeftStyle"&gt;solid&lt;/property&gt;
                                    &lt;property name="borderLeftWidth"&gt;thin&lt;/property&gt;
                                    &lt;property name="borderRightColor"&gt;#C0C0C0&lt;/property&gt;
                                    &lt;property name="borderRightStyle"&gt;solid&lt;/property&gt;
                                    &lt;property name="borderRightWidth"&gt;thin&lt;/property&gt;
                                    &lt;property name="borderTopColor"&gt;#C0C0C0&lt;/property&gt;
                                    &lt;property name="borderTopStyle"&gt;solid&lt;/property&gt;
                                    &lt;property name="borderTopWidth"&gt;thin&lt;/property&gt;
                                    &lt;data id="92"&gt;
                                        &lt;property name="dataSet"&gt;winccDataSet&lt;/property&gt;
                                        &lt;expression name="valueExpr"&gt;row["Area"]&lt;/expression&gt;
                                    &lt;/data&gt;
                                &lt;/cell&gt;
                                &lt;cell id="87"&gt;
                                    &lt;property name="borderBottomColor"&gt;#C0C0C0&lt;/property&gt;
                                    &lt;property name="borderBottomStyle"&gt;solid&lt;/property&gt;
                                    &lt;property name="borderBottomWidth"&gt;thin&lt;/property&gt;
                                    &lt;property name="borderLeftColor"&gt;#C0C0C0&lt;/property&gt;
                                    &lt;property name="borderLeftStyle"&gt;solid&lt;/property&gt;
                                    &lt;property name="borderLeftWidth"&gt;thin&lt;/property&gt;
                                    &lt;property name="borderRightColor"&gt;#C0C0C0&lt;/property&gt;
                                    &lt;property name="borderRightStyle"&gt;solid&lt;/property&gt;
                                    &lt;property name="borderRightWidth"&gt;thin&lt;/property&gt;
                                    &lt;property name="borderTopColor"&gt;#C0C0C0&lt;/property&gt;
                                    &lt;property name="borderTopStyle"&gt;solid&lt;/property&gt;
                                    &lt;property name="borderTopWidth"&gt;thin&lt;/property&gt;
                                    &lt;data id="94"&gt;
                                        &lt;property name="dataSet"&gt;winccDataSet&lt;/property&gt;
                                        &lt;expression name="valueExpr"&gt;row["Source"]&lt;/expression&gt;
                                    &lt;/data&gt;
                                &lt;/cell&gt;
                            &lt;/row&gt;
                        &lt;/detail&gt;
                        &lt;footer&gt;
                            &lt;row id="56"&gt;
                                &lt;cell id="57"/&gt;
                                &lt;cell id="58"/&gt;
                                &lt;cell id="59"/&gt;
                                &lt;cell id="83"/&gt;
                                &lt;cell id="89"/&gt;
                            &lt;/row&gt;
                        &lt;/footer&gt;
                    &lt;/table&gt;
&lt;/cell&gt;
            &lt;/row&gt;
            &lt;row id="20"&gt;
                &lt;cell id="21"/&gt;
            &lt;/row&gt;
            &lt;row id="24"&gt;
                &lt;cell id="25"/&gt;
            &lt;/row&gt;
        &lt;/grid&gt;
        &lt;grid id="28"&gt;
            &lt;property name="width"&gt;100%&lt;/property&gt;
            &lt;column id="29"/&gt;
            &lt;row id="32"&gt;
                &lt;cell id="33"/&gt;
            &lt;/row&gt;
            &lt;row id="36"&gt;
                &lt;cell id="37"/&gt;
            &lt;/row&gt;
            &lt;row id="40"&gt;
                &lt;cell id="41"/&gt;
            &lt;/row&gt;
        &lt;/grid&gt;
    &lt;/body&gt;
&lt;/report&gt;
I have changed data set for BIRT sample data set and used 2006.4.18 BIRT to run the design file. It can export the data.
There is another problem that the BIRT can not support total count in highlight. We are solving this problem now.
You can try current version BIRT again. The data can be exported.
Created attachment 38882
Design file. Data set and the expression have been changed.
Created attachment 38884
Screen capture. The data can be exported.
Hi, AJ.

I can not produce the problem you mentioned. 
Can you try current BIRT. Please let me know whether the current BIRT have this problem.

Thanks.
can't reproduce in our desktop.
please try out RC2 build.


The query should be excutable even if there is a error in some of the script expressions of the column bindings.
Data has changed so that one illegal column binding would not prevent other legal column binding from being evaluated and displayed.Reassign to engine team for further investigation.

Fixed!

PS: the expression can not contain carriage return character.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="136741" />
    <CreationDate amount="2006-04-13 15:55:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="Debug" />
    <Version amount="3.1.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="trivial" />
    <Summery>[Memory View] Base address not initially scrolled into view with built-in renderings</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="VERIFIED" />
    <resolution amount="FIXED" />
    <WithStack>We use renderings derived from the built-in ones that come with Eclipse in our Eclipse-base IDE. We've noticed that when a memory block is initially added, and its attendant default rendering is create, if the base address falls in a column that is out of view, the memory view does not scroll the table to the right to make it visible. It does, however, when you perform a "Reset to Base Address" action.
Deferred.
It's been a while since this bug was deferred. Does anybody have any plans to re-open it?
CC'ing Sam - Not sure if she reads the inobx...
Re-opening for investigation.
Will investigate if we can reveal selection in the table viewer when the rendering gets created.
Fixed in AsyncTableRenderingViewer - force the table to show column whenever a selection is set.
Pawel, please verify.
Verified.</WithStack>
    <WithOutStack>We use renderings derived from the built-in ones that come with Eclipse in our Eclipse-base IDE. We've noticed that when a memory block is initially added, and its attendant default rendering is create, if the base address falls in a column that is out of view, the memory view does not scroll the table to the right to make it visible. It does, however, when you perform a "Reset to Base Address" action.
Deferred.
It's been a while since this bug was deferred. Does anybody have any plans to re-open it?
CC'ing Sam - Not sure if she reads the inobx...
Re-opening for investigation.
Will investigate if we can reveal selection in the table viewer when the rendering gets created.
Fixed in AsyncTableRenderingViewer - force the table to show column whenever a selection is set.
Pawel, please verify.
Verified.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="136742" />
    <CreationDate amount="2006-04-13 15:55:00 -0400" />
    <DupId amount="136158" />
    <classification amount="WebTools" />
    <Product amount="WTP Webservices" />
    <component amount="jst.ws" />
    <Version amount="1.0.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows 2000" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Pre-select java file and click finish on BUEJB wizard</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="DUPLICATE" />
    <WithStack>When a Java file is pre-selected and click finish on page 1 of the BUEJB Web service wizard, an exception is thrown.  Pre-selecting an EJB works.

If an EJB is required, please consider either disabling the finish button or popping up a more meaningful error message.

The following is the current exception:

WAB0014E Unexpected exception occured.
  org.eclipse.jdt.internal.core.CompilationUnit incompatible with java.lang.String
      java.lang.ClassCastException: org.eclipse.jdt.internal.core.CompilationUnit 
incompatible with java.lang.String
      at org.eclipse.jst.ws.internal.creation.ui.extension.PreServiceDevelopCommand.e
xecute(PreServiceDevelopCommand.java:100)
      at org.eclipse.wst.command.internal.env.core.fragment.CommandFragmentEngine.run
Command(CommandFragmentEngine.java:387)
      at org.eclipse.wst.command.internal.env.core.fragment.CommandFragmentEngine.vis
itTop(CommandFragmentEngine.java:327)
      at org.eclipse.wst.command.internal.env.core.fragment.CommandFragmentEngine.mov
eForwardToNextStop(CommandFragmentEngine.java:226)
      at org.eclipse.wst.command.internal.env.ui.widgets.SimpleCommandEngineManager$5
.run(SimpleCommandEngineManager.java:247)
      at org.eclipse.jface.operation.ModalContext.runInCurrentThread(ModalContext.jav
a:346)
      at org.eclipse.jface.operation.ModalContext.run(ModalContext.java:291)
      at org.eclipse.jface.wizard.WizardDialog.run(WizardDialog.java:830)
      at org.eclipse.wst.command.internal.env.ui.widgets.SimpleCommandEngineManager.r
unForwardToNextStop(SimpleCommandEngineManager.java:217)
      at org.eclipse.wst.command.internal.env.ui.widgets.WizardPageManager.runForward
ToNextStop(WizardPageManager.java:79)
      at org.eclipse.wst.command.internal.env.ui.widgets.WizardPageManager.performFin
ish(WizardPageManager.java:228)
      at org.eclipse.wst.command.internal.env.ui.widgets.DynamicWizard.performFinish(
DynamicWizard.java:335)
      at org.eclipse.jface.wizard.WizardDialog.finishPressed(WizardDialog.java:676)

      at org.eclipse.jface.wizard.WizardDialog.buttonPressed(WizardDialog.java:349)

      at org.eclipse.jface.dialogs.Dialog$2.widgetSelected(Dialog.java:556)
      at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:90)
      at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)
      at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1021)
      at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:2867)
      at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2572)
      at org.eclipse.jface.window.Window.runEventLoop(Window.java:809)
      at org.eclipse.jface.window.Window.open(Window.java:787)
      at org.eclipse.wst.command.internal.env.ui.widgets.popup.DynamicPopupWizard.run
(DynamicPopupWizard.java:126)
      at org.eclipse.ui.internal.PluginAction.runWithEvent(PluginAction.java:246)
      at org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection(Action
ContributionItem.java:538)
      at org.eclipse.jface.action.ActionContributionItem.access$2(ActionContributionI
tem.java:488)
      at org.eclipse.jface.action.ActionContributionItem$5.handleEvent(ActionContribu
tionItem.java:400)
      at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)
      at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1021)
      at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:2867)
      at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2572)
      at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1699)
      at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1663)
      at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:367)


      at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:143)
      at org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:103)
      at org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.
java:226)
      at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:376)

      at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:163)

      at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
      at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:64
)
      at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl
.java:43)
      at java.lang.reflect.Method.invoke(Method.java:615)
      at org.eclipse.core.launcher.Main.invokeFramework(Main.java:334)
      at org.eclipse.core.launcher.Main.basicRun(Main.java:278)
      at org.eclipse.core.launcher.Main.run(Main.java:973)
      at org.eclipse.core.launcher.Main.main(Main.java:948)
This problem is fixed indirectly thru bug 136158 since when the user change the Web service type from bottom-up Java to bottom-up EJB, the service definition field is blanked and Next/Finish is disabled.  The user would have to use the Browse button to browse for an EJB before being able to move on.

*** This bug has been marked as a duplicate of 136158 ***
verified in WTP 1.5 RC4
Closed.</WithStack>
    <WithOutStack>When a Java file is pre-selected and click finish on page 1 of the BUEJB Web service wizard, an exception is thrown.  Pre-selecting an EJB works.

If an EJB is required, please consider either disabling the finish button or popping up a more meaningful error message.

The following is the current exception:

WAB0014E Unexpected exception occured.
  org.eclipse.jdt.internal.core.CompilationUnit incompatible with java.lang.String
      java.lang.ClassCastException: org.eclipse.jdt.internal.core.CompilationUnit 
incompatible with java.lang.String
      at org.eclipse.jst.ws.internal.creation.ui.extension.PreServiceDevelopCommand.e
xecute(PreServiceDevelopCommand.java:100)
      at org.eclipse.wst.command.internal.env.core.fragment.CommandFragmentEngine.run
Command(CommandFragmentEngine.java:387)
      at org.eclipse.wst.command.internal.env.core.fragment.CommandFragmentEngine.vis
itTop(CommandFragmentEngine.java:327)
      at org.eclipse.wst.command.internal.env.core.fragment.CommandFragmentEngine.mov
eForwardToNextStop(CommandFragmentEngine.java:226)
      at org.eclipse.wst.command.internal.env.ui.widgets.SimpleCommandEngineManager$5
.run(SimpleCommandEngineManager.java:247)
      at org.eclipse.jface.operation.ModalContext.runInCurrentThread(ModalContext.jav
a:346)
      at org.eclipse.jface.operation.ModalContext.run(ModalContext.java:291)
      at org.eclipse.jface.wizard.WizardDialog.run(WizardDialog.java:830)
      at org.eclipse.wst.command.internal.env.ui.widgets.SimpleCommandEngineManager.r
unForwardToNextStop(SimpleCommandEngineManager.java:217)
      at org.eclipse.wst.command.internal.env.ui.widgets.WizardPageManager.runForward
ToNextStop(WizardPageManager.java:79)
      at org.eclipse.wst.command.internal.env.ui.widgets.WizardPageManager.performFin
ish(WizardPageManager.java:228)
      at org.eclipse.wst.command.internal.env.ui.widgets.DynamicWizard.performFinish(
DynamicWizard.java:335)
      at org.eclipse.jface.wizard.WizardDialog.finishPressed(WizardDialog.java:676)

      at org.eclipse.jface.wizard.WizardDialog.buttonPressed(WizardDialog.java:349)

      at org.eclipse.jface.dialogs.Dialog$2.widgetSelected(Dialog.java:556)
      at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:90)
      at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)
      at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1021)
      at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:2867)
      at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2572)
      at org.eclipse.jface.window.Window.runEventLoop(Window.java:809)
      at org.eclipse.jface.window.Window.open(Window.java:787)
      at org.eclipse.wst.command.internal.env.ui.widgets.popup.DynamicPopupWizard.run
(DynamicPopupWizard.java:126)
      at org.eclipse.ui.internal.PluginAction.runWithEvent(PluginAction.java:246)
      at org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection(Action
ContributionItem.java:538)
      at org.eclipse.jface.action.ActionContributionItem.access$2(ActionContributionI
tem.java:488)
      at org.eclipse.jface.action.ActionContributionItem$5.handleEvent(ActionContribu
tionItem.java:400)
      at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)
      at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1021)
      at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:2867)
      at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2572)
      at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1699)
      at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1663)
      at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:367)


      at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:143)
      at org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:103)
      at org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.
java:226)
      at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:376)

      at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:163)

      at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
      at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:64
)
      at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl
.java:43)
      at java.lang.reflect.Method.invoke(Method.java:615)
      at org.eclipse.core.launcher.Main.invokeFramework(Main.java:334)
      at org.eclipse.core.launcher.Main.basicRun(Main.java:278)
      at org.eclipse.core.launcher.Main.run(Main.java:973)
      at org.eclipse.core.launcher.Main.main(Main.java:948)
This problem is fixed indirectly thru bug 136158 since when the user change the Web service type from bottom-up Java to bottom-up EJB, the service definition field is blanked and Next/Finish is disabled.  The user would have to use the Browse button to browse for an EJB before being able to move on.

*** This bug has been marked as a duplicate of 136158 ***
verified in WTP 1.5 RC4
Closed.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="136743" />
    <CreationDate amount="2006-04-13 15:57:00 -0400" />
    <DupId amount="" />
    <classification amount="Tools" />
    <Product amount="TPTP Testing" />
    <component amount="Test.Execution" />
    <Version amount="4.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Linux" />
    <priority amount="P1" />
    <bug_severity amount="major" />
    <Summery>Unable to playback test a second  time</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="2">
      <Enumeration lines="8">
        <Lines>
          <Line>1) The submitter is going to investigate to determine if they, or TPTP, are somehow leaking file descriptors.  If so, the ulimit adjustment is not a fix, and we will fail similarly once the newly allocated descriptors are exhausted.</Line>
          <Line />
          <Line>2) I will file an enhancement request for a more robust custom command mechanish which acknowledges the delivery (but not receipt) of the command to the agent.  Today, this problem can be diagnosed by reading the servicelog.log file, and seend "Error Code 9, unable to deliver message to agent", but since the custom command mechanism does not acknlowledge the delivery of the message to the agent, no exception is thrown on the client side, and we are unaware that the message was not received.  Although acknowledging the delivery of the message (not the receipt) wll add overhead to the mechanism, it can be an optional validation, and in almost all of our cases, we'd prefer to know that the message was delievered.</Line>
          <Line />
          <Line>3) There is a defect in the timeout code in org.eclipse.hyades.execution.local.ExecutionComponentFactoryImpl.delegateRemoteCall() which defeats the purpose of the timeout, and causes us to hang indefinately, instead of timing out in 3 minutes.  I will open a new defect for this, as it seems too risky a change, based on code inspection, to consider for 4.2 i3.</Line>
          <Line>Based on discussions with Kevin &amp; Samson, this problem is not yet corrected.  Reopening</Line>
          <Line>Since this is only observable (as far as we know) on a comsuming product, deferring to 4.2.1</Line>
          <Line>Kevin's notes on this issue:</Line>
        </Lines>
      </Enumeration>
      <Enumeration lines="3">
        <Lines>
          <Line>- Redhat 4 machine</Line>
          <Line>- RPT 7.0 20060605_1049</Line>
          <Line>- RAC 20060605_1618</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="CLOSED" />
    <resolution amount="WORKSFORME" />
    <WithStack>A consuming product test playback works the first time, but "hangs" attempting to playback a second time.  Here is what is known so far:

o There does not seem to be a problem with session JVMs ending.
  At the end of the first playback any and all session JVMs are gone.

o Testing has been done against a 3.3 RAC but no playback occurs in
  that case, not even one.  But understanding is that there is no
  guarantee of backward compatibility between 4.2 and 3.3.

o The JRE in use is IBM Java 1.5.0 (IBM J9 VM build 2.3, J2RE 1.5.0
  IBM J9 2.3 Linux x86-32 j9vmxi3223ifx-20060124).

o In the case where the hang occurs there is a session JVM left around.
  A workaround for the problem is to kill this java process and re-start
  the RAC.  Then, you can playback one time again.

o Attempts to start the session JVMs with debugging enabled but to not
  wait for connection (ie suspend=n) caused both early session JVMs to
  start briefly then exit immediately.  All attempts to start session
  JVMs with suspend=y resulted in successful playback.  That is, running
  the session JVMs in debug mode it was possible to playback over and over
  again without any problem.
Joe, this looks like a potential dup of 137748. Note this is Linux (vs. Windows for 137748), and appears to be regular vs. intermittent.
*** Bug 140011 has been marked as a duplicate of this bug. ***
The reason for this overall failure is that the available file descriptors on the Linux box were exhausted.  This caused the Linux Agent Controller to drop the message which was intended for our agent, and then both sides of the communiction were waitig for the other's response.  

The file descriptor problem can be corrected by increasing the number of allowable file descriptors using the ulimit command.  However, several additional work items come out of this resolution:

1) The submitter is going to investigate to determine if they, or TPTP, are somehow leaking file descriptors.  If so, the ulimit adjustment is not a fix, and we will fail similarly once the newly allocated descriptors are exhausted.

2) I will file an enhancement request for a more robust custom command mechanish which acknowledges the delivery (but not receipt) of the command to the agent.  Today, this problem can be diagnosed by reading the servicelog.log file, and seend "Error Code 9, unable to deliver message to agent", but since the custom command mechanism does not acknlowledge the delivery of the message to the agent, no exception is thrown on the client side, and we are unaware that the message was not received.  Although acknowledging the delivery of the message (not the receipt) wll add overhead to the mechanism, it can be an optional validation, and in almost all of our cases, we'd prefer to know that the message was delievered.

3) There is a defect in the timeout code in org.eclipse.hyades.execution.local.ExecutionComponentFactoryImpl.delegateRemoteCall() which defeats the purpose of the timeout, and causes us to hang indefinately, instead of timing out in 3 minutes.  I will open a new defect for this, as it seems too risky a change, based on code inspection, to consider for 4.2 i3.
Based on discussions with Kevin &amp; Samson, this problem is not yet corrected.  Reopening
Since this is only observable (as far as we know) on a comsuming product, deferring to 4.2.1
Kevin's notes on this issue:

&gt; In following up with the file descriptor claim, I can hit this problem still consistently on the 3rd or 4th attempt.

&gt; The "Error 9" is still displayed in servicelog.log.

&gt; Increasing descriptors for the RAC and for the workbench doesn't help, unless I'm not setting it correctly.  I'm using ulimit at the command line prior to launching the RAC and prior to launching RPT.

&gt; I'm curious about the "9".  The Linux errno 9 is "bad file number", not "too many open files".

More notes from Kevin:

&gt; I think I found another clue.

&gt; On Windows runs when we finish, I see 10002 LISTENING and no active connections.  
&gt; On Linux, after we finish I do see the session JVM go away.  However, I also see this:

&gt; tcp          0        0 *:10002                            *:*                                                                                           LISTEN
&gt; tcp          0        0 kmooneyrh.raleigh.ibm.com:10002 kmooneyrh.raleigh.ibm.com:37175 ESTABLISHED
&gt; tcp          0        0 kmooneyrh.raleigh.ibm.com:37175 kmooneyrh.raleigh.ibm.com:10002 ESTABLISHED

&gt; These are the connections from the finished run.  
&gt; We don't have any operating specific code in our product in the area of test execution.

I'm afraid we will need some AC help with this one.
Kevin, Joe, do you think this is bug is somewhat related to bug 141033 and bug 144444 ? Mark and I have checked in the fixes for both on 2006/06/01.
This cannot be reproduced by the reporter using the following configuration:
- Redhat 4 machine
- RPT 7.0 20060605_1049
- RAC 20060605_1618

ACTION: Please verify/close this defect.
Verified in 4.2.1.1.</WithStack>
    <WithOutStack>A consuming product test playback works the first time, but "hangs" attempting to playback a second time.  Here is what is known so far:

o There does not seem to be a problem with session JVMs ending.
  At the end of the first playback any and all session JVMs are gone.

o Testing has been done against a 3.3 RAC but no playback occurs in
  that case, not even one.  But understanding is that there is no
  guarantee of backward compatibility between 4.2 and 3.3.

o The JRE in use is IBM Java 1.5.0 (IBM J9 VM build 2.3, J2RE 1.5.0
  IBM J9 2.3 Linux x86-32 j9vmxi3223ifx-20060124).

o In the case where the hang occurs there is a session JVM left around.
  A workaround for the problem is to kill this java process and re-start
  the RAC.  Then, you can playback one time again.

o Attempts to start the session JVMs with debugging enabled but to not
  wait for connection (ie suspend=n) caused both early session JVMs to
  start briefly then exit immediately.  All attempts to start session
  JVMs with suspend=y resulted in successful playback.  That is, running
  the session JVMs in debug mode it was possible to playback over and over
  again without any problem.
Joe, this looks like a potential dup of 137748. Note this is Linux (vs. Windows for 137748), and appears to be regular vs. intermittent.
*** Bug 140011 has been marked as a duplicate of this bug. ***
The reason for this overall failure is that the available file descriptors on the Linux box were exhausted.  This caused the Linux Agent Controller to drop the message which was intended for our agent, and then both sides of the communiction were waitig for the other's response.  

The file descriptor problem can be corrected by increasing the number of allowable file descriptors using the ulimit command.  However, several additional work items come out of this resolution:

1) The submitter is going to investigate to determine if they, or TPTP, are somehow leaking file descriptors.  If so, the ulimit adjustment is not a fix, and we will fail similarly once the newly allocated descriptors are exhausted.

2) I will file an enhancement request for a more robust custom command mechanish which acknowledges the delivery (but not receipt) of the command to the agent.  Today, this problem can be diagnosed by reading the servicelog.log file, and seend "Error Code 9, unable to deliver message to agent", but since the custom command mechanism does not acknlowledge the delivery of the message to the agent, no exception is thrown on the client side, and we are unaware that the message was not received.  Although acknowledging the delivery of the message (not the receipt) wll add overhead to the mechanism, it can be an optional validation, and in almost all of our cases, we'd prefer to know that the message was delievered.

3) There is a defect in the timeout code in org.eclipse.hyades.execution.local.ExecutionComponentFactoryImpl.delegateRemoteCall() which defeats the purpose of the timeout, and causes us to hang indefinately, instead of timing out in 3 minutes.  I will open a new defect for this, as it seems too risky a change, based on code inspection, to consider for 4.2 i3.
Based on discussions with Kevin &amp; Samson, this problem is not yet corrected.  Reopening
Since this is only observable (as far as we know) on a comsuming product, deferring to 4.2.1
Kevin's notes on this issue:

&gt; In following up with the file descriptor claim, I can hit this problem still consistently on the 3rd or 4th attempt.

&gt; The "Error 9" is still displayed in servicelog.log.

&gt; Increasing descriptors for the RAC and for the workbench doesn't help, unless I'm not setting it correctly.  I'm using ulimit at the command line prior to launching the RAC and prior to launching RPT.

&gt; I'm curious about the "9".  The Linux errno 9 is "bad file number", not "too many open files".

More notes from Kevin:

&gt; I think I found another clue.

&gt; On Windows runs when we finish, I see 10002 LISTENING and no active connections.  
&gt; On Linux, after we finish I do see the session JVM go away.  However, I also see this:

&gt; tcp          0        0 *:10002                            *:*                                                                                           LISTEN
&gt; tcp          0        0 kmooneyrh.raleigh.ibm.com:10002 kmooneyrh.raleigh.ibm.com:37175 ESTABLISHED
&gt; tcp          0        0 kmooneyrh.raleigh.ibm.com:37175 kmooneyrh.raleigh.ibm.com:10002 ESTABLISHED

&gt; These are the connections from the finished run.  
&gt; We don't have any operating specific code in our product in the area of test execution.

I'm afraid we will need some AC help with this one.
Kevin, Joe, do you think this is bug is somewhat related to bug 141033 and bug 144444 ? Mark and I have checked in the fixes for both on 2006/06/01.
This cannot be reproduced by the reporter using the following configuration:
- Redhat 4 machine
- RPT 7.0 20060605_1049
- RAC 20060605_1618

ACTION: Please verify/close this defect.
Verified in 4.2.1.1.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="136744" />
    <CreationDate amount="2006-04-13 16:04:00 -0400" />
    <DupId amount="" />
    <classification amount="Tools" />
    <Product amount="TPTP Static Analysis" />
    <component amount="Platform.Analysis" />
    <Version amount="4.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Need ability to synchronously analyze a provider manager</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>Created attachment 38550
fix patch
Applied supplied patch

closed</WithStack>
    <WithOutStack>Created attachment 38550
fix patch
Applied supplied patch

closed</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="136745" />
    <CreationDate amount="2006-04-13 16:05:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="UI" />
    <Version amount="3.2" />
    <rep_platform amount="Macintosh" />
    <op_sys amount="Mac OS X - Carbon (unsup.)" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>[Trim] Window draws once without trim.</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="NEW" />
    <resolution amount="" />
    <WithStack>Not sure if this is visible on other platforms, but it's easy to see on the Mac:

When you start Eclipse (with the Java perspective open), after the Shell appears, the contents are drawn once without the trim area (i.e. it fills the entire content area of the Shell), and then is redrawn inset with the trim visible. We should defer redraw or similar to prevent the first time the contents are drawn.
Changing OS from Mac OS to Mac OS X as per bug 185991</WithStack>
    <WithOutStack>Not sure if this is visible on other platforms, but it's easy to see on the Mac:

When you start Eclipse (with the Java perspective open), after the Shell appears, the contents are drawn once without the trim area (i.e. it fills the entire content area of the Shell), and then is redrawn inset with the trim visible. We should defer redraw or similar to prevent the first time the contents are drawn.
Changing OS from Mac OS to Mac OS X as per bug 185991</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="136746" />
    <CreationDate amount="2006-04-13 16:11:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="JDT" />
    <component amount="UI" />
    <Version amount="3.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>[CommonNavigator] [Java] Java packages disappear when switching to Hierarchical mode</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="2">
        <Lines>
          <Line>(1) commonWizards contributed by the Java extension take advantage of the enhancement for bug 137079, establishing a Java menu grouping for new/import/export.</Line>
          <Line>(2) The PackageExplorerRefactorActionGroup now contributes an enablement for the empty selection (adapt to collection, count ==0).</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="VERIFIED" />
    <resolution amount="FIXED" />
    <WithStack>[I20060413-0010]

To reproduce: From the Project Explorer view menu, select Package Presentation-&gt;Hierarchical.

Result: All source folders have no children
Expected: package folders appear hierarchically under source folders.
Can you verify if the empty package filter is checked in the Filter dialog?

In the Package Explorer, the filter does not hide empty packages with children, but when reused in the Project Explorer, it's hiding the empty packages, and hence no children. (The empty packages are the parents of packages with children).
In both the Project Explorer and the Package Explorer, the empty parent packages are filtered by the "Empty Parent Package" filter. However, in the Package Explorer, the filter attempt is blocked with a little jdt-fu in PackageExplorerPart.isEssential(Object), so the empty (parent) package shows anyway. 
Created attachment 40304
Adds empty package filters that are aware of the flat/hiearchical setting

This patch adds two new filters (and their common super type) to be aware of the isFlatLayout setting from the state model of the Java extension. This allows them to vary their behavior as the PackageExplorerPart does for its filters. 

The plugin.xml has converted the filter classes to use the new NonEssential form. 

There are two other fixes intermingled in the plugin.xml:
(1) commonWizards contributed by the Java extension take advantage of the enhancement for bug 137079, establishing a Java menu grouping for new/import/export.
(2) The PackageExplorerRefactorActionGroup now contributes an enablement for the empty selection (adapt to collection, count ==0). 

I can open two other defects and attach the same patch for the plugin.xml if you would prefer.
Created attachment 40345
Updated Patch

Patch looks good. Michael, why do we need to enumerate all types in the actionProvider's enablement tag now (first change in plugin.xml)?

I moved the filters to the org.eclipse.jdt.internal.ui.navigator package, since they currently only apply for the common navigator. Also reverted whitespace-only changes in plugin.xml.
&gt; Michael, why do we need to enumerate all types in the
&gt; actionProvider's enablement tag now (first change in plugin.xml)?

Is this perhaps a fix for bug 135587?

Approving for 3.2 RC3 (pending Michael's answer). Dani?

The enablement for the action provider repeats the enablement clause from the content extension + (and here's the key) an expression that describes an empty selection (adapt to collection + count == 0). In order to add that one case, the enablement clause had to be duplicated (and expanded). 

The empty selection supports the invocation of the action provider when the user clicks in the whitespace of the viewer. Bug 135587 is a different issue that I'll need to follow up on. There are other examples where EObjects are contributed and don't enable the JDT actions, so I suspect Jon's use case is doing something special.
Approving for 3.2 RC3.
Released updated patch.
verifying for 20060511-0010
verified, no more empty src folders</WithStack>
    <WithOutStack>[I20060413-0010]

To reproduce: From the Project Explorer view menu, select Package Presentation-&gt;Hierarchical.

Result: All source folders have no children
Expected: package folders appear hierarchically under source folders.
Can you verify if the empty package filter is checked in the Filter dialog?

In the Package Explorer, the filter does not hide empty packages with children, but when reused in the Project Explorer, it's hiding the empty packages, and hence no children. (The empty packages are the parents of packages with children).
In both the Project Explorer and the Package Explorer, the empty parent packages are filtered by the "Empty Parent Package" filter. However, in the Package Explorer, the filter attempt is blocked with a little jdt-fu in PackageExplorerPart.isEssential(Object), so the empty (parent) package shows anyway. 
Created attachment 40304
Adds empty package filters that are aware of the flat/hiearchical setting

This patch adds two new filters (and their common super type) to be aware of the isFlatLayout setting from the state model of the Java extension. This allows them to vary their behavior as the PackageExplorerPart does for its filters. 

The plugin.xml has converted the filter classes to use the new NonEssential form. 

There are two other fixes intermingled in the plugin.xml:
(1) commonWizards contributed by the Java extension take advantage of the enhancement for bug 137079, establishing a Java menu grouping for new/import/export.
(2) The PackageExplorerRefactorActionGroup now contributes an enablement for the empty selection (adapt to collection, count ==0). 

I can open two other defects and attach the same patch for the plugin.xml if you would prefer.
Created attachment 40345
Updated Patch

Patch looks good. Michael, why do we need to enumerate all types in the actionProvider's enablement tag now (first change in plugin.xml)?

I moved the filters to the org.eclipse.jdt.internal.ui.navigator package, since they currently only apply for the common navigator. Also reverted whitespace-only changes in plugin.xml.
&gt; Michael, why do we need to enumerate all types in the
&gt; actionProvider's enablement tag now (first change in plugin.xml)?

Is this perhaps a fix for bug 135587?

Approving for 3.2 RC3 (pending Michael's answer). Dani?

The enablement for the action provider repeats the enablement clause from the content extension + (and here's the key) an expression that describes an empty selection (adapt to collection + count == 0). In order to add that one case, the enablement clause had to be duplicated (and expanded). 

The empty selection supports the invocation of the action provider when the user clicks in the whitespace of the viewer. Bug 135587 is a different issue that I'll need to follow up on. There are other examples where EObjects are contributed and don't enable the JDT actions, so I suspect Jon's use case is doing something special.
Approving for 3.2 RC3.
Released updated patch.
verifying for 20060511-0010
verified, no more empty src folders</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="136747" />
    <CreationDate amount="2006-04-13 16:16:00 -0400" />
    <DupId amount="" />
    <classification amount="WebTools" />
    <Product amount="WTP Java EE Tools" />
    <component amount="jst.j2ee" />
    <Version amount="1.5" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="enhancement" />
    <Summery>[API Request] Consider making OpenJ2EEResourceAction, WSDDArtifactEdit, and WebServicesManager public</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="WONTFIX" />
    <WithStack>Our component uses this class to open a linked J2EE resource.  This seems to us to be a common enough action that this should be made public or a public equivalent should be provided.
org.eclipse.jst.j2ee.internal.actions.OpenJ2EEResourceAction


The following are other utility/helper classes that we use and would like to be made public.
org.eclipse.jst.j2ee.internal.webservice.componentcore.util.WSDDArtifactEdit
org.eclipse.jst.j2ee.internal.webservice.helper.WebServicesManager
Just changing "keyword" and severity to allow better queries. 

I, too, would like to see OpenJ2EEResourceAction become public... if I can find the time to do it during 3.0 development, I will.

However, I don't thing that all of WebServicesManager should be made public... I think there may have already been part of this exposed... I will have to check into it.
Moving these enhancements to 301 for now
Shall we put this in the 3.1 plan?

If they are going to get done, we need to do these before API freeze.
As much as I would like to see these made public API, it just doesn't look like we are going to get around to it.  (Due to other, higher priorities.)  Feel free to contribute a patch and reopen this bug.</WithStack>
    <WithOutStack>Our component uses this class to open a linked J2EE resource.  This seems to us to be a common enough action that this should be made public or a public equivalent should be provided.
org.eclipse.jst.j2ee.internal.actions.OpenJ2EEResourceAction


The following are other utility/helper classes that we use and would like to be made public.
org.eclipse.jst.j2ee.internal.webservice.componentcore.util.WSDDArtifactEdit
org.eclipse.jst.j2ee.internal.webservice.helper.WebServicesManager
Just changing "keyword" and severity to allow better queries. 

I, too, would like to see OpenJ2EEResourceAction become public... if I can find the time to do it during 3.0 development, I will.

However, I don't thing that all of WebServicesManager should be made public... I think there may have already been part of this exposed... I will have to check into it.
Moving these enhancements to 301 for now
Shall we put this in the 3.1 plan?

If they are going to get done, we need to do these before API freeze.
As much as I would like to see these made public API, it just doesn't look like we are going to get around to it.  (Due to other, higher priorities.)  Feel free to contribute a patch and reopen this bug.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="136748" />
    <CreationDate amount="2006-04-13 16:21:00 -0400" />
    <DupId amount="" />
    <classification amount="Modeling" />
    <Product amount="EMFT" />
    <component amount="Website" />
    <Version amount="1.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>promoteToEclipse -announce doesn't successfully post to newsgroup</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="VERIFIED" />
    <resolution amount="FIXED" />
    <WithStack>The script appears to work, but no message every shows up on the news group. 

[promote] Started 15:57:40. Executing with the following options:
   -sub jet
    [loading ./promoteToEclipse.jet.properties ... done]
   -buildID S200604131352
   -announceonly
   -Q
[promote] [1] PHP scripts &amp; other data upload - omitted.
[promote] [2] Upload new drop - omitted.
[promote] [4] Update IES mapping file - omitted.
[promote] [5] Generate Bugzilla release notes XML from CVS log - omitted.
[promote] [6] Generate news.xml content update - omitted.
[promote] [8] Unzip new javadocs - omitted.
[promote] [9] Create &amp; promote Update Manager jars to download ... omitted [-noj
ars].
[announce] Announce new build in emft newsgroup...
Trying 206.191.52.34...
Connected to news.eclipse.org (206.191.52.34).
Escape character is '^]'.
Connection closed by foreign host.
[announce] done.
[promote] Temporary files purged from /tmp/promoteToEclipse-emft-jet-pelder-2006
0413_155741/.
[promote] Done 15:57:45
Fixed by replacing telnet w/ nc (netcat).
Move to verified as per bug 206558.</WithStack>
    <WithOutStack>The script appears to work, but no message every shows up on the news group. 

[promote] Started 15:57:40. Executing with the following options:
   -sub jet
    [loading ./promoteToEclipse.jet.properties ... done]
   -buildID S200604131352
   -announceonly
   -Q
[promote] [1] PHP scripts &amp; other data upload - omitted.
[promote] [2] Upload new drop - omitted.
[promote] [4] Update IES mapping file - omitted.
[promote] [5] Generate Bugzilla release notes XML from CVS log - omitted.
[promote] [6] Generate news.xml content update - omitted.
[promote] [8] Unzip new javadocs - omitted.
[promote] [9] Create &amp; promote Update Manager jars to download ... omitted [-noj
ars].
[announce] Announce new build in emft newsgroup...
Trying 206.191.52.34...
Connected to news.eclipse.org (206.191.52.34).
Escape character is '^]'.
Connection closed by foreign host.
[announce] done.
[promote] Temporary files purged from /tmp/promoteToEclipse-emft-jet-pelder-2006
0413_155741/.
[promote] Done 15:57:45
Fixed by replacing telnet w/ nc (netcat).
Move to verified as per bug 206558.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="136749" />
    <CreationDate amount="2006-04-13 16:31:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="PDE" />
    <component amount="UI" />
    <Version amount="3.2" />
    <rep_platform amount="All" />
    <op_sys amount="All" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Renaming classpath libraries doesn't work</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="5">
        <Lines>
          <Line>- open plugin editor / runtime page / classpath section</Line>
          <Line>- press the "new..." button (fill out the dialog and press ok) to add a new entry</Line>
          <Line>- right click on the new entry and rename it to something else</Line>
          <Line>- the result will be visible in the table viewer in the editor but the Bundle-Classpath: entry does not get updated in the MANIFEST.MF</Line>
          <Line>fixed</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>To reproduce:
- open plugin editor / runtime page / classpath section
- press the "new..." button (fill out the dialog and press ok) to add a new entry
- right click on the new entry and rename it to something else
- the result will be visible in the table viewer in the editor but the Bundle-Classpath: entry does not get updated in the MANIFEST.MF
fixed</WithStack>
    <WithOutStack>To reproduce:
- open plugin editor / runtime page / classpath section
- press the "new..." button (fill out the dialog and press ok) to add a new entry
- right click on the new entry and rename it to something else
- the result will be visible in the table viewer in the editor but the Bundle-Classpath: entry does not get updated in the MANIFEST.MF
fixed</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="136750" />
    <CreationDate amount="2006-04-13 16:43:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="User Assistance" />
    <Version amount="3.2" />
    <rep_platform amount="PC" />
    <op_sys amount="All" />
    <priority amount="P3" />
    <bug_severity amount="major" />
    <Summery>[Intro] welcome page problems if native browser not found</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="2">
      <Enumeration lines="2">
        <Lines>
          <Line>- observed on all SWT machines where a native Browser is not found, so the fake one gets automatically substituted by (I think) UI</Line>
          <Line>- if you don't want to run on an obscure platform like aix or hpux, you can replicate this on linux by setting your MOZILLA_FIVE_HOME environment variable to any bogus value that does not point at a native browser</Line>
        </Lines>
      </Enumeration>
      <Enumeration lines="4">
        <Lines>
          <Line>- start Eclipse, and the Welcome page appears ok</Line>
          <Line>- click on the page's Go To Workbench button, and the page briefly flickers and then shows itself again</Line>
          <Line>- click on the page's Go To Workbench button again, and now the welcome page disappears but the default Java perspective comes up completely blank</Line>
          <Line>This only happens when using the forms-based intro (when a browser is not available). After clicking around I was able to get the perspective back so it's not a show-stopper for RC1.</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>3.2RC1
- observed on all SWT machines where a native Browser is not found, so the fake one gets automatically substituted by (I think) UI
- if you don't want to run on an obscure platform like aix or hpux, you can replicate this on linux by setting your MOZILLA_FIVE_HOME environment variable to any bogus value that does not point at a native browser

- start Eclipse, and the Welcome page appears ok
- click on the page's Go To Workbench button, and the page briefly flickers and then shows itself again
- click on the page's Go To Workbench button again, and now the welcome page disappears but the default Java perspective comes up completely blank
This only happens when using the forms-based intro (when a browser is not available). After clicking around I was able to get the perspective back so it's not a show-stopper for RC1.

Assigning to Dejan as requested.
*** Bug 136621 has been marked as a duplicate of this bug. ***
*** Bug 137021 has been marked as a duplicate of this bug. ***
Fixed 
*** Bug 137338 has been marked as a duplicate of this bug. ***
*** Bug 138925 has been marked as a duplicate of this bug. ***</WithStack>
    <WithOutStack>3.2RC1
- observed on all SWT machines where a native Browser is not found, so the fake one gets automatically substituted by (I think) UI
- if you don't want to run on an obscure platform like aix or hpux, you can replicate this on linux by setting your MOZILLA_FIVE_HOME environment variable to any bogus value that does not point at a native browser

- start Eclipse, and the Welcome page appears ok
- click on the page's Go To Workbench button, and the page briefly flickers and then shows itself again
- click on the page's Go To Workbench button again, and now the welcome page disappears but the default Java perspective comes up completely blank
This only happens when using the forms-based intro (when a browser is not available). After clicking around I was able to get the perspective back so it's not a show-stopper for RC1.

Assigning to Dejan as requested.
*** Bug 136621 has been marked as a duplicate of this bug. ***
*** Bug 137021 has been marked as a duplicate of this bug. ***
Fixed 
*** Bug 137338 has been marked as a duplicate of this bug. ***
*** Bug 138925 has been marked as a duplicate of this bug. ***</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="136751" />
    <CreationDate amount="2006-04-13 16:45:00 -0400" />
    <DupId amount="" />
    <classification amount="BIRT" />
    <Product amount="BIRT" />
    <component amount="Data Access" />
    <Version amount="2.0.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Problem with Dataset selected CLOB columns</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="WORKSFORME" />
    <WithStack>I have a sql, of which 2 of the columns are type CLOB.  When I press preview results, I get the following error:

An unexpected internal exception occurred.Please see log for detail.
  Plug-in Provider:Eclipse.org
  Plug-in Name:BIRT Designer UI
  Plug-in ID:org.eclipse.birt.report.designer.ui
  Version:2.1.0.M20060303-0920
  Error Code:Error.GUIException.invokedByUnexpectedException
  Error Message:IClob.getSubString()

Please advise.  My understanding was that 2.0 and up supports clob datatype in data sets.

Thanks.
Can you let me know below information?

database and its version
JDBC driver version
database: oracle 9.2.0.5
JDBC Driver version - 9.0.2.0.0
Synch up with Callisto schedule to rename RC1 as RC2 targeted 5/5/2006.
It might be related with particular database or one version, and we can not easily reproduce it.
Please try reproduce on an Oracle 9.x and its JDBC driver.  
I create a report with two Clob columns and preview it. But I can't reproduce the bug.
Could you please try the lastest version of Birt?

My environment
Database: oracle 9.0.1.0
JDBC Driver: 9.0.2.0.0
Birt: the latest version

Without more feedback, we assume this bug does not exist in latest build. Should you have any question, please reopen it freely.</WithStack>
    <WithOutStack>I have a sql, of which 2 of the columns are type CLOB.  When I press preview results, I get the following error:

An unexpected internal exception occurred.Please see log for detail.
  Plug-in Provider:Eclipse.org
  Plug-in Name:BIRT Designer UI
  Plug-in ID:org.eclipse.birt.report.designer.ui
  Version:2.1.0.M20060303-0920
  Error Code:Error.GUIException.invokedByUnexpectedException
  Error Message:IClob.getSubString()

Please advise.  My understanding was that 2.0 and up supports clob datatype in data sets.

Thanks.
Can you let me know below information?

database and its version
JDBC driver version
database: oracle 9.2.0.5
JDBC Driver version - 9.0.2.0.0
Synch up with Callisto schedule to rename RC1 as RC2 targeted 5/5/2006.
It might be related with particular database or one version, and we can not easily reproduce it.
Please try reproduce on an Oracle 9.x and its JDBC driver.  
I create a report with two Clob columns and preview it. But I can't reproduce the bug.
Could you please try the lastest version of Birt?

My environment
Database: oracle 9.0.1.0
JDBC Driver: 9.0.2.0.0
Birt: the latest version

Without more feedback, we assume this bug does not exist in latest build. Should you have any question, please reopen it freely.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="136752" />
    <CreationDate amount="2006-04-13 16:48:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="JDT" />
    <component amount="Core" />
    <Version amount="3.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>"name is too long to represent" error when using JDT compiler in Tomcat for very large JSPs</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="5">
        <Lines>
          <Line>1) Would it be possible to get a test case that I can try using Tomcat 5.5.17?</Line>
          <Line>I tried the test case referenced in http://issues.apache.org/bugzilla/show_bug.cgi?id=39089, but it doesn't work with uri not found (&lt;%@ taglib uri="http://java.sun.com/jsf/html" prefix="h"%&gt;).</Line>
          <Line>I tried to remove these lines, but then I get failures processing the include calls.</Line>
          <Line />
          <Line>2) I looked at the .class file compiled using Ant and there is no SourceDebugExtension attribute in it.</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="RESOLVED" />
    <resolution amount="INVALID" />
    <WithStack>Originally posted this to Tomcat's Bugzilla, but they thought it was a JDT bug.

http://issues.apache.org/bugzilla/show_bug.cgi?id=39089
(Full details and some test files are available from the above link)

The root cause seems to be related to the following JVM bug:
http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6294277 (&lt;-- please vote for this bug to be resolved if you read this...)

Synopsis: Using Tomcat's default settings to compile JSPs using JDT under 1.5, trying to compile a very large JSP fails. Using javac the same failure does not occur. The length of the JSP and resulting source file are a key factor, which makes sense considering the JVM bug is related to lengthy debug info in the class file.

Sun may very well get around to fixing their specification issue, but JDT should work equally well as javac in the mean time.

A second suggestion would be to have a flag that would suppress (maybe by default?) the "SourceDebugExtension" attribute as it seems unlikely the Tomcat would require this for JSP compilation.
Sounds like a compilation issue, not debugger.
I'll investigate.
Several questions:
1) Would it be possible to get a test case that I can try using Tomcat 5.5.17?
I tried the test case referenced in http://issues.apache.org/bugzilla/show_bug.cgi?id=39089, but it doesn't work with uri not found (&lt;%@ taglib uri="http://java.sun.com/jsf/html" prefix="h"%&gt;).
I tried to remove these lines, but then I get failures processing the include calls.

2) I looked at the .class file compiled using Ant and there is no SourceDebugExtension attribute in it.

The JDT compiler doesn't create this attribute. However I'd like to understand when this is added.
Thanks.
Erik,

It would be nice if you could come up with a jsp I could use to debug this issue. RC2 is coming fast. This issue needs to be investigated asap otherwise no changes can be provided for 3.2.
(In reply to comment #4)
&gt; Erik,
&gt; 
&gt; It would be nice if you could come up with a jsp I could use to debug this
&gt; issue. RC2 is coming fast. This issue needs to be investigated asap otherwise
&gt; no changes can be provided for 3.2.
&gt; 

Would a .class file compiled by JDT work for you? It'll be faster than trying to hack up the src.
Ideally I'd like to try to reproduce using a jsp file. JDT compiler doesn't create the SourceDebugExtension attribute. So this is done at a different moment and I'd like to understand exactly when and how.
I checked the zip file that you provided in the Tomcat bug report. The java source between the jdt and the ant compilation are not identical. The ant compilation doesn't contain any SourceDebugExtension atttribute. So I am not sure that you are comparing two identical things.
So I wonder why this attribute is in the .class file compiled by jdt and not in the precompiled version done with ant.
However you can attach a .class file compiled with jdt and I'll see what might be wrong at the .class file level.
Thanks for your help.
Created attachment 38854
Large JSP compiled by jdt

does this help?
(In reply to comment #6)
I'm not sure either. I was under the impression based on this bug - https://bugs.eclipse.org/bugs/show_bug.cgi?id=45373, that SourceDebugExtension was going to be part of JDT as some point.

Doing a little more sniffing around in the Tomcat src and I found a reference to SourceDebugExtension in the following Jasper class:
http://svn.apache.org/viewcvs.cgi/tomcat/jasper/tc5.5.x/src/share/org/apache/jasper/compiler/SmapUtil.java?view=markup

There are also a few other classes with SMAP in their names. I'm not sure exactly what they are doing but they do reference JSR-045 which is what defines the SourceDebugExtension

So I'm beginning to wonder if this is actually something Tomcat is stuffing in during compilation. If I recall, there is a way to force Tomcat to not use JDT to compile it's classes and to use javac instead - I'll see if I can get that cause the same error. As far as I know though, it just uses ANT to do the identical operation in the container that I do outside the container. This might be a case where Jasper's JDT wrapper is doing additional work unrelated to JDT?
&gt; So I'm beginning to wonder if this is actually something Tomcat is stuffing in
&gt; during compilation. If I recall, there is a way to force Tomcat to not use JDT
&gt; to compile it's classes and to use javac instead - I'll see if I can get that
&gt; cause the same error. As far as I know though, it just uses ANT to do the
&gt; identical operation in the container that I do outside the container. This
&gt; might be a case where Jasper's JDT wrapper is doing additional work unrelated
&gt; to JDT?
This is exactly what I am suspecting. I can assure you that JDT itself doesn't generate the SourceDebugExtension attribute. I'll check if Tomcat added this inside the jdt compiler.

In the .class file that I got, there is such an attribute at the end.
  Attribute: SourceDebugExtension Length: 81342.

I'll try to collect more information about jsr45 in order to see if this is an invalid size for such an attribute.
(In reply to comment #9)
&gt; I'll try to collect more information about jsr45 in order to see if this is an
&gt; invalid size for such an attribute.
&gt; 

I think it is a 4k size limit according to Sun's bug parade:
http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6294277




I don't understand why there would be a 64K limit.
The length is encoded in a unsigned four byte. This allows a huge string to be recorded. 64K limit would be true with a unsigned 2 byte encoding.
Using this information (http://java.sun.com/j2se/1.4.2/docs/guide/jpda/SourceDebugExtension_attribute.html), I was able to decode the string contained in the source debug extension attribute in the file you sent me.
It looks ok. I don't know the details of the format.
Might be a VM bug.

If you could send me an example of a .class file that contains a main method I could try different VMs.
Thanks for your time.
I could disassemble successfully the .class file you sent me. So nothing seems to be wrong in the .class file.
It would be nice to get clarifications about the bug you entered in the Sun database.
Closing as INVALID since there is nothing we can do to fix this issue.
If I find some time, I'll try to investigate the problem in the Tomcat source code.
I agree... doesn't seem like this is a JDT problem after all. The Tomcat folks re-opened the bug after I pointed out the code that is causing the problem (which looks like its run post-compile.)

Regarding the Sun bug, I did not actually post that to Sun - I found it while searching for the string "name is too long to represent", so unfortunately I do not have much else to add there.

thanks for your assistance - if there is anything else you need from me, let me know.</WithStack>
    <WithOutStack>Originally posted this to Tomcat's Bugzilla, but they thought it was a JDT bug.

http://issues.apache.org/bugzilla/show_bug.cgi?id=39089
(Full details and some test files are available from the above link)

The root cause seems to be related to the following JVM bug:
http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6294277 (&lt;-- please vote for this bug to be resolved if you read this...)

Synopsis: Using Tomcat's default settings to compile JSPs using JDT under 1.5, trying to compile a very large JSP fails. Using javac the same failure does not occur. The length of the JSP and resulting source file are a key factor, which makes sense considering the JVM bug is related to lengthy debug info in the class file.

Sun may very well get around to fixing their specification issue, but JDT should work equally well as javac in the mean time.

A second suggestion would be to have a flag that would suppress (maybe by default?) the "SourceDebugExtension" attribute as it seems unlikely the Tomcat would require this for JSP compilation.
Sounds like a compilation issue, not debugger.
I'll investigate.
Several questions:
1) Would it be possible to get a test case that I can try using Tomcat 5.5.17?
I tried the test case referenced in http://issues.apache.org/bugzilla/show_bug.cgi?id=39089, but it doesn't work with uri not found (&lt;%@ taglib uri="http://java.sun.com/jsf/html" prefix="h"%&gt;).
I tried to remove these lines, but then I get failures processing the include calls.

2) I looked at the .class file compiled using Ant and there is no SourceDebugExtension attribute in it.

The JDT compiler doesn't create this attribute. However I'd like to understand when this is added.
Thanks.
Erik,

It would be nice if you could come up with a jsp I could use to debug this issue. RC2 is coming fast. This issue needs to be investigated asap otherwise no changes can be provided for 3.2.
(In reply to comment #4)
&gt; Erik,
&gt; 
&gt; It would be nice if you could come up with a jsp I could use to debug this
&gt; issue. RC2 is coming fast. This issue needs to be investigated asap otherwise
&gt; no changes can be provided for 3.2.
&gt; 

Would a .class file compiled by JDT work for you? It'll be faster than trying to hack up the src.
Ideally I'd like to try to reproduce using a jsp file. JDT compiler doesn't create the SourceDebugExtension attribute. So this is done at a different moment and I'd like to understand exactly when and how.
I checked the zip file that you provided in the Tomcat bug report. The java source between the jdt and the ant compilation are not identical. The ant compilation doesn't contain any SourceDebugExtension atttribute. So I am not sure that you are comparing two identical things.
So I wonder why this attribute is in the .class file compiled by jdt and not in the precompiled version done with ant.
However you can attach a .class file compiled with jdt and I'll see what might be wrong at the .class file level.
Thanks for your help.
Created attachment 38854
Large JSP compiled by jdt

does this help?
(In reply to comment #6)
I'm not sure either. I was under the impression based on this bug - https://bugs.eclipse.org/bugs/show_bug.cgi?id=45373, that SourceDebugExtension was going to be part of JDT as some point.

Doing a little more sniffing around in the Tomcat src and I found a reference to SourceDebugExtension in the following Jasper class:
http://svn.apache.org/viewcvs.cgi/tomcat/jasper/tc5.5.x/src/share/org/apache/jasper/compiler/SmapUtil.java?view=markup

There are also a few other classes with SMAP in their names. I'm not sure exactly what they are doing but they do reference JSR-045 which is what defines the SourceDebugExtension

So I'm beginning to wonder if this is actually something Tomcat is stuffing in during compilation. If I recall, there is a way to force Tomcat to not use JDT to compile it's classes and to use javac instead - I'll see if I can get that cause the same error. As far as I know though, it just uses ANT to do the identical operation in the container that I do outside the container. This might be a case where Jasper's JDT wrapper is doing additional work unrelated to JDT?
&gt; So I'm beginning to wonder if this is actually something Tomcat is stuffing in
&gt; during compilation. If I recall, there is a way to force Tomcat to not use JDT
&gt; to compile it's classes and to use javac instead - I'll see if I can get that
&gt; cause the same error. As far as I know though, it just uses ANT to do the
&gt; identical operation in the container that I do outside the container. This
&gt; might be a case where Jasper's JDT wrapper is doing additional work unrelated
&gt; to JDT?
This is exactly what I am suspecting. I can assure you that JDT itself doesn't generate the SourceDebugExtension attribute. I'll check if Tomcat added this inside the jdt compiler.

In the .class file that I got, there is such an attribute at the end.
  Attribute: SourceDebugExtension Length: 81342.

I'll try to collect more information about jsr45 in order to see if this is an invalid size for such an attribute.
(In reply to comment #9)
&gt; I'll try to collect more information about jsr45 in order to see if this is an
&gt; invalid size for such an attribute.
&gt; 

I think it is a 4k size limit according to Sun's bug parade:
http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6294277




I don't understand why there would be a 64K limit.
The length is encoded in a unsigned four byte. This allows a huge string to be recorded. 64K limit would be true with a unsigned 2 byte encoding.
Using this information (http://java.sun.com/j2se/1.4.2/docs/guide/jpda/SourceDebugExtension_attribute.html), I was able to decode the string contained in the source debug extension attribute in the file you sent me.
It looks ok. I don't know the details of the format.
Might be a VM bug.

If you could send me an example of a .class file that contains a main method I could try different VMs.
Thanks for your time.
I could disassemble successfully the .class file you sent me. So nothing seems to be wrong in the .class file.
It would be nice to get clarifications about the bug you entered in the Sun database.
Closing as INVALID since there is nothing we can do to fix this issue.
If I find some time, I'll try to investigate the problem in the Tomcat source code.
I agree... doesn't seem like this is a JDT problem after all. The Tomcat folks re-opened the bug after I pointed out the code that is causing the problem (which looks like its run post-compile.)

Regarding the Sun bug, I did not actually post that to Sun - I found it while searching for the string "name is too long to represent", so unfortunately I do not have much else to add there.

thanks for your assistance - if there is anything else you need from me, let me know.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="136753" />
    <CreationDate amount="2006-04-13 16:52:00 -0400" />
    <DupId amount="" />
    <classification amount="WebTools" />
    <Product amount="WTP Releng" />
    <component amount="releng" />
    <Version amount="unspecified" />
    <rep_platform amount="Macintosh" />
    <op_sys amount="Mac OS X - Carbon (unsup.)" />
    <priority amount="P3" />
    <bug_severity amount="major" />
    <Summery>Unable to install full WTP on eclipse 3.2.0</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="WONTFIX" />
    <WithStack>I attempted to install WTP in eclipse 3.2.0  using the update instructions located at:

http://www.eclipse.org/webtools/

When I request updates from the follow URL: http://download.eclipse.org/webtools/updates/

I do not see the "Eclipse Project" portion and am unable to select any of the WTP options:

Get the message: "org.eclipse.wst.server_core.feature (1.0.1.v200602151554) requires feature "org.eclipse.rcp (3.1.1)", or equivalent."

I believe this required package should come down as part of the WTP update. It has everytime until I tried 3.2.0.
David, should our update site work with 3.2 at this point?
yes, won't work, and no plans to "fix" that site. 

Part of the reason is that site only has "released" code, not milestones. 

For 3.2 code, you can use 
http://download.eclipse.org/webtools/milestones

to get 3.2 compatible code ... still at our WTP 1.5 M5 level, for a few more days ... not sure how that "runs" with M6 level of eclipse. 

And, to make matters worse, I'm not sure a 3.2 version could/should ever install/use a 3.1 version of RCP, and related "platform" code. The reason is that there's some changes to "startup" and "configuration" such that I'm not sure they really work in same "stack" .. that is, we always assume a certain level of "staring point". 

So, marking as "won't fix", but hope that 
http://download.eclipse.org/webtools/milestones 
site does you well. 

BTW, you might even want to try 
http://download.eclipse.org/callisto/releases
which does have milestone level code, 
and get all kinds of good stuff! :) 



This is part of a mass update to close out all stale WTP bugs which are in the resolved state without an appropriate targeted version.  If you feel this bug was closed inappropriately, please reopen.
Changing OS from Mac OS to Mac OS X as per bug 185991</WithStack>
    <WithOutStack>I attempted to install WTP in eclipse 3.2.0  using the update instructions located at:

http://www.eclipse.org/webtools/

When I request updates from the follow URL: http://download.eclipse.org/webtools/updates/

I do not see the "Eclipse Project" portion and am unable to select any of the WTP options:

Get the message: "org.eclipse.wst.server_core.feature (1.0.1.v200602151554) requires feature "org.eclipse.rcp (3.1.1)", or equivalent."

I believe this required package should come down as part of the WTP update. It has everytime until I tried 3.2.0.
David, should our update site work with 3.2 at this point?
yes, won't work, and no plans to "fix" that site. 

Part of the reason is that site only has "released" code, not milestones. 

For 3.2 code, you can use 
http://download.eclipse.org/webtools/milestones

to get 3.2 compatible code ... still at our WTP 1.5 M5 level, for a few more days ... not sure how that "runs" with M6 level of eclipse. 

And, to make matters worse, I'm not sure a 3.2 version could/should ever install/use a 3.1 version of RCP, and related "platform" code. The reason is that there's some changes to "startup" and "configuration" such that I'm not sure they really work in same "stack" .. that is, we always assume a certain level of "staring point". 

So, marking as "won't fix", but hope that 
http://download.eclipse.org/webtools/milestones 
site does you well. 

BTW, you might even want to try 
http://download.eclipse.org/callisto/releases
which does have milestone level code, 
and get all kinds of good stuff! :) 



This is part of a mass update to close out all stale WTP bugs which are in the resolved state without an appropriate targeted version.  If you feel this bug was closed inappropriately, please reopen.
Changing OS from Mac OS to Mac OS X as per bug 185991</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="136754" />
    <CreationDate amount="2006-04-13 17:03:00 -0400" />
    <DupId amount="" />
    <classification amount="Tools" />
    <Product amount="PTP" />
    <component amount="Photran.For Internal Use" />
    <Version amount="3.0" />
    <rep_platform amount="PC" />
    <op_sys amount="All" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Lexer does not support umlauts () in comments</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>From the mailing list (4/10/06)...

- Photran's syntax highlighting became confused after I typed some
comments in German which contained umlauts (e.g. ). The whole text
after the umlaut till the end of the file get the comment color. The
same behavior appears if you type umlauts anywhere in the editor.
Syntax highlighting fixed; lexer still needs Unicode support.
Should be fixed in 4.0 beta 2.  Identifiers are still restricted to ASCII.</WithStack>
    <WithOutStack>From the mailing list (4/10/06)...

- Photran's syntax highlighting became confused after I typed some
comments in German which contained umlauts (e.g. ). The whole text
after the umlaut till the end of the file get the comment color. The
same behavior appears if you type umlauts anywhere in the editor.
Syntax highlighting fixed; lexer still needs Unicode support.
Should be fixed in 4.0 beta 2.  Identifiers are still restricted to ASCII.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="136755" />
    <CreationDate amount="2006-04-13 17:03:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="User Assistance" />
    <Version amount="3.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Cheatsheet in Help View Related Topics does not open correctly</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>I'm using eclipse-SDK-I20060413-1330-win32

If the related topics page contains cheatsheets they do not show the correct icon and are not opened correctly.

To reproduce;

Help/Search
Search for "Simple Java"

There will be several matches, including the cheat sheet "Simple Java Application". Notice that this cheatsheet shows the icon for a cheat sheet.

Click on the match titled "Extensions Page", the help page opens in the help view.

Now click on the "Related Topics" button at the bottom of the page. Note that "Simple Java Application" again shows up as a match except that this time it does not have the correct icon and if you try to open it the xml file is opened.
Curtis, it is possible that the 'Related Topics' (Dynamic Help) page does not check for 'canOpen()' on ISearchEngineResult2' interface and does not use the engine image. This is a different class and I didn't make it use the new interfaces.
I'll take a look.
Fixed.</WithStack>
    <WithOutStack>I'm using eclipse-SDK-I20060413-1330-win32

If the related topics page contains cheatsheets they do not show the correct icon and are not opened correctly.

To reproduce;

Help/Search
Search for "Simple Java"

There will be several matches, including the cheat sheet "Simple Java Application". Notice that this cheatsheet shows the icon for a cheat sheet.

Click on the match titled "Extensions Page", the help page opens in the help view.

Now click on the "Related Topics" button at the bottom of the page. Note that "Simple Java Application" again shows up as a match except that this time it does not have the correct icon and if you try to open it the xml file is opened.
Curtis, it is possible that the 'Related Topics' (Dynamic Help) page does not check for 'canOpen()' on ISearchEngineResult2' interface and does not use the engine image. This is a different class and I didn't make it use the new interfaces.
I'll take a look.
Fixed.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="136756" />
    <CreationDate amount="2006-04-13 17:04:00 -0400" />
    <DupId amount="" />
    <classification amount="Tools" />
    <Product amount="TPTP Testing" />
    <component amount="Test.UI.AutoGUIUI" />
    <Version amount="4.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>view toolbar menu not supported</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>Currently, view toolbar menu's are not supported.

The following recorded macro demonstrates the problem.  It tries to show the problem view and bring up the preferences dialog via the toolbar menu, then it closes the dialog.  This can be executed from the Java Perspective.

&lt;macro version="0.1" &gt;
   &lt;shell id="org.eclipse.ui.internal.WorkbenchWindow" return-code="-1"&gt;
      &lt;command type="select" contextId="menus" widgetId="org.eclipse.ui.internal.ShowViewMenu#{{&amp;amp;Window-Show &amp;amp;View-&amp;amp;Problems}}-{{0.8}}{{6|4|9}}-{{0.6}}{{true}}-{{0.1}}{{13}}-{{0.1}}{{&amp;amp;Package Explorer&amp;#x9;Alt+Shift+Q, P}}-{{0.2}}{{&amp;amp;Search&amp;#x9;Alt+Shift+Q, S}}-{{0.2}}"&gt;
         &lt;parent widgetId="window"/&gt;
         &lt;parent widgetId="showView"/&gt;
      &lt;/command&gt;
      &lt;command type="select" contextId="popup/view/org.eclipse.ui.views.ProblemView/org.eclipse.swt.widgets.Tree#1" widgetId="org.eclipse.jface.action.ActionContributionItem#{{&amp;amp;Preferences...}}-{{0.8}}{{5}}-{{0.6}}{{false}}-{{0.1}}{{6}}-{{0.1}}{{&amp;amp;Configure Filters...}}-{{0.2}}{{last}}-{{0.2}}"/&gt;
      &lt;shell id="org.eclipse.ui.views.markers.internal.MarkerViewPreferenceDialog" return-code="0"&gt;
         &lt;command type="select" contextId="shell" widgetId="org.eclipse.swt.widgets.Button#{{0}}-{{1.0}}"/&gt;
      &lt;/shell&gt;
      &lt;command type="wait"/&gt;
   &lt;/shell&gt;
&lt;/macro&gt;

I'm not sure if the problem lies in recording or executing of the macro, or possibly both.
This has been fixed and will be checked in as soon as 4.3 opens (July 4th)
Fix checked into CVS.  Changes were restricted to a technology preview item.
ACTION: Please verify/close this defect.
Verified in 4.3.1
Closing.</WithStack>
    <WithOutStack>Currently, view toolbar menu's are not supported.

The following recorded macro demonstrates the problem.  It tries to show the problem view and bring up the preferences dialog via the toolbar menu, then it closes the dialog.  This can be executed from the Java Perspective.

&lt;macro version="0.1" &gt;
   &lt;shell id="org.eclipse.ui.internal.WorkbenchWindow" return-code="-1"&gt;
      &lt;command type="select" contextId="menus" widgetId="org.eclipse.ui.internal.ShowViewMenu#{{&amp;amp;Window-Show &amp;amp;View-&amp;amp;Problems}}-{{0.8}}{{6|4|9}}-{{0.6}}{{true}}-{{0.1}}{{13}}-{{0.1}}{{&amp;amp;Package Explorer&amp;#x9;Alt+Shift+Q, P}}-{{0.2}}{{&amp;amp;Search&amp;#x9;Alt+Shift+Q, S}}-{{0.2}}"&gt;
         &lt;parent widgetId="window"/&gt;
         &lt;parent widgetId="showView"/&gt;
      &lt;/command&gt;
      &lt;command type="select" contextId="popup/view/org.eclipse.ui.views.ProblemView/org.eclipse.swt.widgets.Tree#1" widgetId="org.eclipse.jface.action.ActionContributionItem#{{&amp;amp;Preferences...}}-{{0.8}}{{5}}-{{0.6}}{{false}}-{{0.1}}{{6}}-{{0.1}}{{&amp;amp;Configure Filters...}}-{{0.2}}{{last}}-{{0.2}}"/&gt;
      &lt;shell id="org.eclipse.ui.views.markers.internal.MarkerViewPreferenceDialog" return-code="0"&gt;
         &lt;command type="select" contextId="shell" widgetId="org.eclipse.swt.widgets.Button#{{0}}-{{1.0}}"/&gt;
      &lt;/shell&gt;
      &lt;command type="wait"/&gt;
   &lt;/shell&gt;
&lt;/macro&gt;

I'm not sure if the problem lies in recording or executing of the macro, or possibly both.
This has been fixed and will be checked in as soon as 4.3 opens (July 4th)
Fix checked into CVS.  Changes were restricted to a technology preview item.
ACTION: Please verify/close this defect.
Verified in 4.3.1
Closing.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="136757" />
    <CreationDate amount="2006-04-13 17:05:00 -0400" />
    <DupId amount="" />
    <classification amount="Tools" />
    <Product amount="PTP" />
    <component amount="Photran.Editor &amp; Outline View" />
    <Version amount="3.0" />
    <rep_platform amount="PC" />
    <op_sys amount="All" />
    <priority amount="P3" />
    <bug_severity amount="major" />
    <Summery>Comment/uncomment no longer in editor popup menu</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>Comment/uncomment is no longer in the editor popup menu, but Ctrl+/ works
Fixed on or before 3.1 beta 2</WithStack>
    <WithOutStack>Comment/uncomment is no longer in the editor popup menu, but Ctrl+/ works
Fixed on or before 3.1 beta 2</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="136758" />
    <CreationDate amount="2006-04-13 17:13:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="SWT" />
    <Version amount="3.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="major" />
    <Summery>Eclispe is crashed after a combo box disposes itself.</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="8">
      <source_code type="assignment">
        <location start="121" end="187" />
        <code>final Combo combo = factory.createNormalCombo(main, SWT.BORDER);</code>
      </source_code>
      <source_code type="functioncall">
        <location start="188" end="250" />
        <code>combo.setLayoutData(new GridData(GridData.FILL_HORIZONTAL));</code>
      </source_code>
      <source_code type="assignment">
        <location start="254" end="295" />
        <code>String items[] = {"", "Remove myself"};</code>
      </source_code>
      <source_code type="functioncall">
        <location start="296" end="320" />
        <code>combo.setItems(items);</code>
      </source_code>
      <source_code type="functioncall">
        <location start="421" end="441" />
        <code>combo.dispose();</code>
      </source_code>
      <source_code type="import">
        <location start="578" end="604" />
        <code>import org.eclipse.swt.*;</code>
      </source_code>
      <source_code type="import">
        <location start="605" end="638" />
        <code>import org.eclipse.swt.widgets.*;</code>
      </source_code>
      <source_code type="class">
        <location start="640" end="1161" />
        <code>public class PR_136758 {
	public static void main(String[] args) {
		Display display = new Display();
		Shell shell = new Shell(display);
		final Combo combo = new Combo(shell, SWT.NONE);
		String items[] = { "", "Remove myself" };
		combo.setItems(items);
		combo.addListener(SWT.Modify, new Listener() {
			public void handleEvent(Event e) {
				combo.dispose();
			}
		});
		combo.pack();
		shell.open();
		while (!shell.isDisposed()) {
			if (!display.readAndDispatch()) display.sleep();
		}
		display.dispose();
	}
}</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>Create a wizard page with a combo box, add a listener to it and call combo.dispose(), eclipse is gone.

Here is my code:
		final Combo combo = factory.createNormalCombo(main, SWT.BORDER);
		combo.setLayoutData(new GridData(GridData.FILL_HORIZONTAL));
		
		String items[] = {"", "Remove myself"};
		combo.setItems(items);
		
		combo.addListener(SWT.Modify, new Listener()
		{
			public void handleEvent (Event event)
			{
				combo.dispose();
			}
		});

Is there anything wrong from my side? I tried CCombo, it worked fine. Is there a workaround for this?
This code WORKSFORME:

import org.eclipse.swt.*;
import org.eclipse.swt.widgets.*;

public class PR_136758 {
	public static void main(String[] args) {
		Display display = new Display();
		Shell shell = new Shell(display);
		final Combo combo = new Combo(shell, SWT.NONE);
		String items[] = { "", "Remove myself" };
		combo.setItems(items);
		combo.addListener(SWT.Modify, new Listener() {
			public void handleEvent(Event e) {
				combo.dispose();
			}
		});
		combo.pack();
		shell.open();
		while (!shell.isDisposed()) {
			if (!display.readAndDispatch()) display.sleep();
		}
		display.dispose();
	}
}

Please reopen with code that shows the problem.
I ran your pasted code as a SWT application, when I chose "Remove myself", I still got the "crash".

Here is the console log:
JVMDG217: Dump Handler is Processing Signal 11 - Please Wait.
JVMDG303: JVM Requesting Java core file
JVMDG304: Java core file written to D:\wswb\workspace\com.ibm.propertygroup.ui.test\javacore.20060417.143042.852.txt
JVMDG215: Dump Handler has Processed Exception Signal 11.


Hi Benson, I just did what you did and it WORKEDFORME.  Can you download a nightly build and try to again?  Thanks.
Finally I got the "WORKEDFORME", I was using 0331 eclipse (M6) and I tried it on 0413 (RC1), then it worked fine.</WithStack>
    <WithOutStack>Create a wizard page with a combo box, add a listener to it and call combo.dispose(), eclipse is gone.

Here is my code:
		final Combo combo = factory.createNormalCombo(main, SWT.BORDER);
		combo.setLayoutData(new GridData(GridData.FILL_HORIZONTAL));
		
		String items[] = {"", "Remove myself"};
		combo.setItems(items);
		
		combo.addListener(SWT.Modify, new Listener()
		{
			public void handleEvent (Event event)
			{
				combo.dispose();
			}
		});

Is there anything wrong from my side? I tried CCombo, it worked fine. Is there a workaround for this?
This code WORKSFORME:

import org.eclipse.swt.*;
import org.eclipse.swt.widgets.*;

public class PR_136758 {
	public static void main(String[] args) {
		Display display = new Display();
		Shell shell = new Shell(display);
		final Combo combo = new Combo(shell, SWT.NONE);
		String items[] = { "", "Remove myself" };
		combo.setItems(items);
		combo.addListener(SWT.Modify, new Listener() {
			public void handleEvent(Event e) {
				combo.dispose();
			}
		});
		combo.pack();
		shell.open();
		while (!shell.isDisposed()) {
			if (!display.readAndDispatch()) display.sleep();
		}
		display.dispose();
	}
}

Please reopen with code that shows the problem.
I ran your pasted code as a SWT application, when I chose "Remove myself", I still got the "crash".

Here is the console log:
JVMDG217: Dump Handler is Processing Signal 11 - Please Wait.
JVMDG303: JVM Requesting Java core file
JVMDG304: Java core file written to D:\wswb\workspace\com.ibm.propertygroup.ui.test\javacore.20060417.143042.852.txt
JVMDG215: Dump Handler has Processed Exception Signal 11.


Hi Benson, I just did what you did and it WORKEDFORME.  Can you download a nightly build and try to again?  Thanks.
Finally I got the "WORKEDFORME", I was using 0331 eclipse (M6) and I tried it on 0413 (RC1), then it worked fine.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="136759" />
    <CreationDate amount="2006-04-13 17:25:00 -0400" />
    <DupId amount="" />
    <classification amount="WebTools" />
    <Product amount="WTP Webservices" />
    <component amount="jst.ws" />
    <Version amount="1.5" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows 2000" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Project/EAR messages are missing from project selection widget</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>In the old page 3 we used to have little messages in under the EAR field that said things like:

The selected {0} project will be associated with the EAR project.
The {0} project will be created and associated with the EAR project.
The {0} EAR project will be created and associated with the project.
The {0} project and EAR project will be created and associated with one another.

These messages no longer display anywhere. 
The code to figure out the message content is still there in ProjectSelectionWidget.handleSetMessageText but it's just not being called anymore. I'm not sure if the messages should be displayed in the project dialog or on page 1 (and if on page 1, where on page 1's limited space?)

Perhaps we should remove them altogether since I'm not sure how helpful they are.

I'm opening this bug so that we don't forget about them.
These messages should go in the text areas (to the right of the graphics) that contain the hyperlinks. These areas were originally meant to contain prose text - such as the now missing messages - with embedded hyperlinks. The catch is we haven't figured out how, or if, we can mix regular and hyperlink text, and without doing this there may not be enough room in the text areas.

The project dialog is a reasonable spot for the messages since that's where the user will actually monkey with the values. The wizard banner is another.
We should only have one message in the wizard banner at a time (error, warning, or info) per Kate's guidelines. If we went with the banner as the location we should only display these "info" messages when there are no errors or warnings on the page.
I've added code to the new SimpleDialog framework that now calls getStatus() appropriately within the dialogs.  There is now a message area at the bottom of the dialog above the buttons that displays messages and the OK button is enabled and disabled based on the status returned by getStatus (disabled for IStatus.ERROR).

The fix for 136335 will cover this.

I notice though that the message area doesn't seem to get repainted properly when new text is written to it.  I'm going to use this bug for that problem.  I'm currently investigating.

look for combined patch in 136712
Patch reviewed and committed.  Will release later.
Released to WTP 1.5 as v200604190331.
Verified.
Closing.</WithStack>
    <WithOutStack>In the old page 3 we used to have little messages in under the EAR field that said things like:

The selected {0} project will be associated with the EAR project.
The {0} project will be created and associated with the EAR project.
The {0} EAR project will be created and associated with the project.
The {0} project and EAR project will be created and associated with one another.

These messages no longer display anywhere. 
The code to figure out the message content is still there in ProjectSelectionWidget.handleSetMessageText but it's just not being called anymore. I'm not sure if the messages should be displayed in the project dialog or on page 1 (and if on page 1, where on page 1's limited space?)

Perhaps we should remove them altogether since I'm not sure how helpful they are.

I'm opening this bug so that we don't forget about them.
These messages should go in the text areas (to the right of the graphics) that contain the hyperlinks. These areas were originally meant to contain prose text - such as the now missing messages - with embedded hyperlinks. The catch is we haven't figured out how, or if, we can mix regular and hyperlink text, and without doing this there may not be enough room in the text areas.

The project dialog is a reasonable spot for the messages since that's where the user will actually monkey with the values. The wizard banner is another.
We should only have one message in the wizard banner at a time (error, warning, or info) per Kate's guidelines. If we went with the banner as the location we should only display these "info" messages when there are no errors or warnings on the page.
I've added code to the new SimpleDialog framework that now calls getStatus() appropriately within the dialogs.  There is now a message area at the bottom of the dialog above the buttons that displays messages and the OK button is enabled and disabled based on the status returned by getStatus (disabled for IStatus.ERROR).

The fix for 136335 will cover this.

I notice though that the message area doesn't seem to get repainted properly when new text is written to it.  I'm going to use this bug for that problem.  I'm currently investigating.

look for combined patch in 136712
Patch reviewed and committed.  Will release later.
Released to WTP 1.5 as v200604190331.
Verified.
Closing.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="136760" />
    <CreationDate amount="2006-04-13 17:31:00 -0400" />
    <DupId amount="" />
    <classification amount="Modeling" />
    <Product amount="GMF-Runtime" />
    <component amount="General" />
    <Version amount="1.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P1" />
    <bug_severity amount="critical" />
    <Summery>ElementTypeRegistry prevents deployment of different applications sharing the same metamodel</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>The ElementTypeRegistry design allows only a single IMetamodelType to be registered for each EClass in a given metamodel.

This restriction will prevent the development of GMF applications that use the same metamodel, but desire different editing behaviour.  

Worse, it also means that any two clients that have generated a graphical editor using GMF for the same metamodel will not be able to be deployed into the same Eclipse workspace.
Could the type registry be associated with an EditingDomain as the context?
Just a thought, but wouldn't you want most of the time to share the edit helpers?  They represent additional semantic behavior for editing a meta-model.  Why would that semantic behavior change between different graphical editors?  

Or at least we need to consider the existing case where the 2 editors may simply represent different visual representations of the same meta-model but desire the same semantic editing capability.  I suspect this would be a more common circumstance... (i.e. Interaction diagrams - sequence vs. communication)
Regarding Comment 1, yes, I think that most applications will choose to use their editing domain as the client context for their element types.  This means that EObjects in their editing domain will be edited according to the edit helpers and advice contributed by their application.

Regarding Comment 2, if the two editors share the same editing domain, then EObjects from both applications can easily share element types and editing behaviour.  For example:

A context is defined for the shared editing domain:

&lt;extension point="org.eclipse.gmf.runtime.emf.type.core.elementTypeContext"&gt;
   &lt;clientContext id="com.example.SharedEditingDomainContext"&gt;
      &lt;enablement&gt;
         &lt;test
            property="org.eclipse.gmf.runtime.emf.type.core.editingDomain"
            value="com.example.SharedEditingDomain"/&gt;
      &lt;/enablement&gt;
   &lt;/clientContext&gt;
&lt;/extension&gt;

Application A binds the shared editing domain to its element types and advice:

&lt;extension point="org.eclipse.gmf.runtime.emf.type.core.elementTypeContext"&gt;
   &lt;contextBinding 
      clientContext="com.example.SharedEditingDomainContext"&gt;
      &lt;elementType pattern="com.a.*"/&gt;
      &lt;advice pattern="com.a.*"/&gt;
   &lt;/contextBinding&gt; 
&lt;/extension&gt;
   
Application B binds the shared editing domain to its element types and advice:

&lt;extension point="org.eclipse.gmf.runtime.emf.type.core.elementTypeContext"&gt;
   &lt;contextBinding 
      clientContext="com.example.SharedEditingDomainContext"&gt;
      &lt;elementType pattern="com.a.*"/&gt;
      &lt;advice pattern="com.a.*"/&gt;
   &lt;/contextBinding&gt; 
&lt;/extension&gt;


On the other hand, if each application has its own editing domain, but application B wishes to use the element types (and editing behaviour) from application A, then application B can bind its context to the types defined by application A.  For example:

Application A defines a context for its editing domain and binds its element types and advice to that context:

&lt;extension point="org.eclipse.gmf.runtime.emf.type.core.elementTypeContext"&gt;
   &lt;clientContext id="com.a.AContext"&gt;
      &lt;enablement&gt;
         &lt;test
            property="org.eclipse.gmf.runtime.emf.type.core.editingDomain"
            value="com.a.AEditingDomain"/&gt;
      &lt;/enablement&gt;
   &lt;/clientContext&gt; 
   &lt;contextBinding 
      clientContext="com.a.AContext"&gt;
      &lt;elementType pattern="com.a.*"/&gt;
      &lt;advice pattern="com.a.*"/&gt;
   &lt;/contextBinding&gt; 
&lt;/extension&gt;
 
Application B defines a context for its editing domain and binds the element types from application A to its context:

&lt;extension point="org.eclipse.gmf.runtime.emf.type.core.elementTypeContext"&gt;
   &lt;clientContext id="com.b.BContext"&gt;
      &lt;enablement&gt;
         &lt;test
            property="org.eclipse.gmf.runtime.emf.type.core.editingDomain"
            value="com.b.BEditingDomain"/&gt;
      &lt;/enablement&gt;
   &lt;/clientContext&gt; 
   &lt;contextBinding 
      clientContext="com.b.BContext"&gt;
      &lt;elementType pattern="com.a.*"/&gt;
      &lt;advice pattern="com.a.*"/&gt;
   &lt;/contextBinding&gt; 
&lt;/extension&gt;

I can imagine that resource extension might also be a common application context.
Correction to Comment 3:

In the shared editing domain case...

Application B binds the shared editing domain to its element types and advice:

&lt;extension point="org.eclipse.gmf.runtime.emf.type.core.elementTypeContext"&gt;
   &lt;contextBinding 
      clientContext="com.example.SharedEditingDomainContext"&gt;
      &lt;elementType pattern="com.b.*"/&gt;
      &lt;advice pattern="com.b.*"/&gt;
   &lt;/contextBinding&gt; 
&lt;/extension&gt;

Created attachment 39096
elementTypeBindings extension point schema

Proposed extension point schema for the new elementTypeBindings extension point.
Added the org.eclipse.gmf.runtime.emf.type.core.elementTypeBindings extension point in which client can define their own context and bind it to element types and advice in the ElementTypeRegistry.  This lifts the restriction that only one IMetamodelType can be registered with the ElementTypeRegistry per EClass in a given metamodel.  Two clients can now share a metamodel and define their own element types and editing behaviour for their client context.  

The use of client contexts in the element type API is optional.  A default client context is implicitly bound to any types that are not explicitly bound to a client context.  Additional API is also provided to specify the client context in the public methods on the ElementTypeRegistry and the IEditCommandRequest.  

The logic example has been updated to demonstrate the definition and binding of a client context to the logic element types.
[target cleanup] 1.0 RC was the original target milestone for this bug
[GMF Restructure] Bug 319140 : product GMF and component
Runtime Common was the original product and component for this bug</WithStack>
    <WithOutStack>The ElementTypeRegistry design allows only a single IMetamodelType to be registered for each EClass in a given metamodel.

This restriction will prevent the development of GMF applications that use the same metamodel, but desire different editing behaviour.  

Worse, it also means that any two clients that have generated a graphical editor using GMF for the same metamodel will not be able to be deployed into the same Eclipse workspace.
Could the type registry be associated with an EditingDomain as the context?
Just a thought, but wouldn't you want most of the time to share the edit helpers?  They represent additional semantic behavior for editing a meta-model.  Why would that semantic behavior change between different graphical editors?  

Or at least we need to consider the existing case where the 2 editors may simply represent different visual representations of the same meta-model but desire the same semantic editing capability.  I suspect this would be a more common circumstance... (i.e. Interaction diagrams - sequence vs. communication)
Regarding Comment 1, yes, I think that most applications will choose to use their editing domain as the client context for their element types.  This means that EObjects in their editing domain will be edited according to the edit helpers and advice contributed by their application.

Regarding Comment 2, if the two editors share the same editing domain, then EObjects from both applications can easily share element types and editing behaviour.  For example:

A context is defined for the shared editing domain:

&lt;extension point="org.eclipse.gmf.runtime.emf.type.core.elementTypeContext"&gt;
   &lt;clientContext id="com.example.SharedEditingDomainContext"&gt;
      &lt;enablement&gt;
         &lt;test
            property="org.eclipse.gmf.runtime.emf.type.core.editingDomain"
            value="com.example.SharedEditingDomain"/&gt;
      &lt;/enablement&gt;
   &lt;/clientContext&gt;
&lt;/extension&gt;

Application A binds the shared editing domain to its element types and advice:

&lt;extension point="org.eclipse.gmf.runtime.emf.type.core.elementTypeContext"&gt;
   &lt;contextBinding 
      clientContext="com.example.SharedEditingDomainContext"&gt;
      &lt;elementType pattern="com.a.*"/&gt;
      &lt;advice pattern="com.a.*"/&gt;
   &lt;/contextBinding&gt; 
&lt;/extension&gt;
   
Application B binds the shared editing domain to its element types and advice:

&lt;extension point="org.eclipse.gmf.runtime.emf.type.core.elementTypeContext"&gt;
   &lt;contextBinding 
      clientContext="com.example.SharedEditingDomainContext"&gt;
      &lt;elementType pattern="com.a.*"/&gt;
      &lt;advice pattern="com.a.*"/&gt;
   &lt;/contextBinding&gt; 
&lt;/extension&gt;


On the other hand, if each application has its own editing domain, but application B wishes to use the element types (and editing behaviour) from application A, then application B can bind its context to the types defined by application A.  For example:

Application A defines a context for its editing domain and binds its element types and advice to that context:

&lt;extension point="org.eclipse.gmf.runtime.emf.type.core.elementTypeContext"&gt;
   &lt;clientContext id="com.a.AContext"&gt;
      &lt;enablement&gt;
         &lt;test
            property="org.eclipse.gmf.runtime.emf.type.core.editingDomain"
            value="com.a.AEditingDomain"/&gt;
      &lt;/enablement&gt;
   &lt;/clientContext&gt; 
   &lt;contextBinding 
      clientContext="com.a.AContext"&gt;
      &lt;elementType pattern="com.a.*"/&gt;
      &lt;advice pattern="com.a.*"/&gt;
   &lt;/contextBinding&gt; 
&lt;/extension&gt;
 
Application B defines a context for its editing domain and binds the element types from application A to its context:

&lt;extension point="org.eclipse.gmf.runtime.emf.type.core.elementTypeContext"&gt;
   &lt;clientContext id="com.b.BContext"&gt;
      &lt;enablement&gt;
         &lt;test
            property="org.eclipse.gmf.runtime.emf.type.core.editingDomain"
            value="com.b.BEditingDomain"/&gt;
      &lt;/enablement&gt;
   &lt;/clientContext&gt; 
   &lt;contextBinding 
      clientContext="com.b.BContext"&gt;
      &lt;elementType pattern="com.a.*"/&gt;
      &lt;advice pattern="com.a.*"/&gt;
   &lt;/contextBinding&gt; 
&lt;/extension&gt;

I can imagine that resource extension might also be a common application context.
Correction to Comment 3:

In the shared editing domain case...

Application B binds the shared editing domain to its element types and advice:

&lt;extension point="org.eclipse.gmf.runtime.emf.type.core.elementTypeContext"&gt;
   &lt;contextBinding 
      clientContext="com.example.SharedEditingDomainContext"&gt;
      &lt;elementType pattern="com.b.*"/&gt;
      &lt;advice pattern="com.b.*"/&gt;
   &lt;/contextBinding&gt; 
&lt;/extension&gt;

Created attachment 39096
elementTypeBindings extension point schema

Proposed extension point schema for the new elementTypeBindings extension point.
Added the org.eclipse.gmf.runtime.emf.type.core.elementTypeBindings extension point in which client can define their own context and bind it to element types and advice in the ElementTypeRegistry.  This lifts the restriction that only one IMetamodelType can be registered with the ElementTypeRegistry per EClass in a given metamodel.  Two clients can now share a metamodel and define their own element types and editing behaviour for their client context.  

The use of client contexts in the element type API is optional.  A default client context is implicitly bound to any types that are not explicitly bound to a client context.  Additional API is also provided to specify the client context in the public methods on the ElementTypeRegistry and the IEditCommandRequest.  

The logic example has been updated to demonstrate the definition and binding of a client context to the logic element types.
[target cleanup] 1.0 RC was the original target milestone for this bug
[GMF Restructure] Bug 319140 : product GMF and component
Runtime Common was the original product and component for this bug</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="136761" />
    <CreationDate amount="2006-04-13 17:32:00 -0400" />
    <DupId amount="" />
    <classification amount="WebTools" />
    <Product amount="WTP Webservices" />
    <component amount="jst.ws" />
    <Version amount="1.5" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows 2000" />
    <priority amount="P3" />
    <bug_severity amount="major" />
    <Summery>Client-side EAR and needEAR values are inconsistent</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>In a service+client scenario, when the service side server is changed from one that requires EARs to one that doesn't (or vice-versa), the needEar state on the client-side changes but the EAR value doesn't. If the user then tries to progress through the wizard, PreClientAssembleCommand fails with an Exception when an attempt is made to add the project to the server.

When the client side needEar is changed from true to false, the EAR project should be blanked (i.e. ""). When changed from false to true, the EAR project should be defaulted to something valid.
Created attachment 39206
multi-plugin patch for org.eclipse.jst.ws, org.eclipse.jst.ws.consumption.ui, and org.eclipse.jst.ws.creation.ui

multi-plugin patch 1 of 1
The attached patch is ready to be committed.
Patch reviewed and committed.  Will release later this week.
Released to WTP 1.5 as v200604241655.
Verified.
Closing.</WithStack>
    <WithOutStack>In a service+client scenario, when the service side server is changed from one that requires EARs to one that doesn't (or vice-versa), the needEar state on the client-side changes but the EAR value doesn't. If the user then tries to progress through the wizard, PreClientAssembleCommand fails with an Exception when an attempt is made to add the project to the server.

When the client side needEar is changed from true to false, the EAR project should be blanked (i.e. ""). When changed from false to true, the EAR project should be defaulted to something valid.
Created attachment 39206
multi-plugin patch for org.eclipse.jst.ws, org.eclipse.jst.ws.consumption.ui, and org.eclipse.jst.ws.creation.ui

multi-plugin patch 1 of 1
The attached patch is ready to be committed.
Patch reviewed and committed.  Will release later this week.
Released to WTP 1.5 as v200604241655.
Verified.
Closing.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="136762" />
    <CreationDate amount="2006-04-13 17:39:00 -0400" />
    <DupId amount="" />
    <classification amount="WebTools" />
    <Product amount="WTP Common Tools" />
    <component amount="wst.validation" />
    <Version amount="1.5" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="critical" />
    <Summery>[validation] Validation exception thrown during bean creation</Summery>
    <Patches amount="0" />
    <Stacktraces amount="1">
      <Stacktrace timestamp="1437330716211">
        <Exception>org.eclipse.core.internal.resources.ResourceException</Exception>
        <Reason>Marker id: 1017 not found.</Reason>
        <Frames>
          <Frame depth="0">org.eclipse.core.internal.resources.Marker.checkInfo(Marker.java:56)</Frame>
          <Frame depth="1">org.eclipse.core.internal.resources.Marker.getAttribute(Marker.java:97)</Frame>
          <Frame depth="2">org.eclipse.wst.validation.internal.TaskListUtility.getValidationTasks(TaskListUtility.java:331)</Frame>
          <Frame depth="3">org.eclipse.wst.validation.internal.TaskListUtility.getValidationTasks(TaskListUtility.java:390)</Frame>
          <Frame depth="4">org.eclipse.wst.validation.internal.TaskListUtility.getValidationTasks(TaskListUtility.java:443)</Frame>
          <Frame depth="5">org.eclipse.wst.validation.internal.TaskListUtility.removeTaskSubset(TaskListUtility.java:543)</Frame>
          <Frame depth="6">org.eclipse.wst.validation.internal.TaskListUtility.removeTaskSubset(TaskListUtility.java:531)</Frame>
          <Frame depth="7">org.eclipse.wst.validation.internal.operations.WorkbenchReporter.removeMessageSubset(WorkbenchReporter.java:232)</Frame>
          <Frame depth="8">org.eclipse.wst.validation.internal.operations.WorkbenchReporter.removeMessageSubset(WorkbenchReporter.java:227)</Frame>
          <Frame depth="9">org.eclipse.wst.validation.internal.InternalValidatorManager.removeOperationTasks(InternalValidatorManager.java:109)</Frame>
          <Frame depth="10">org.eclipse.wst.validation.internal.operations.ValidationOperation.removeOldMessages(ValidationOperation.java:1128)</Frame>
          <Frame depth="11">org.eclipse.wst.validation.internal.operations.ValidationOperation.launchJobs(ValidationOperation.java:1607)</Frame>
          <Frame depth="12">org.eclipse.wst.validation.internal.operations.ValidationOperation.validate(ValidationOperation.java:850)</Frame>
          <Frame depth="13">org.eclipse.wst.validation.internal.operations.ValidationOperation.run(ValidationOperation.java:636)</Frame>
          <Frame depth="14">org.eclipse.wst.validation.internal.operations.ValidationBuilder.build(ValidationBuilder.java:210)</Frame>
          <Frame depth="15">org.eclipse.core.internal.events.BuildManager$2.run(BuildManager.java:603)</Frame>
          <Frame depth="16">org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:37)</Frame>
          <Frame depth="17">org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:167)</Frame>
          <Frame depth="18">org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:201)</Frame>
          <Frame depth="19">org.eclipse.core.internal.events.BuildManager$1.run(BuildManager.java:230)</Frame>
          <Frame depth="20">org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:37)</Frame>
          <Frame depth="21">org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:233)</Frame>
          <Frame depth="22">org.eclipse.core.internal.events.BuildManager.basicBuildLoop(BuildManager.java:252)</Frame>
          <Frame depth="23">org.eclipse.core.internal.events.BuildManager.build(BuildManager.java:285)</Frame>
          <Frame depth="24">org.eclipse.core.internal.events.AutoBuildJob.doBuild(AutoBuildJob.java:145)</Frame>
          <Frame depth="25">org.eclipse.core.internal.events.AutoBuildJob.run(AutoBuildJob.java:208)</Frame>
          <Frame depth="26">org.eclipse.core.internal.jobs.Worker.run(Worker.java:58)</Frame>
        </Frames>
      </Stacktrace>
    </Stacktraces>
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="WORKSFORME" />
    <WithStack>Opened for IBM:

The following exception is being thrown during bean creation.

org.eclipse.core.internal.resources.ResourceException: Marker id: 1017 not found.
    	at org.eclipse.core.internal.resources.Marker.checkInfo(Marker.java:56)
    	at org.eclipse.core.internal.resources.Marker.getAttribute(Marker.java:97)
    	at org.eclipse.wst.validation.internal.TaskListUtility.getValidationTasks(TaskListUtility.java:331)
    	at org.eclipse.wst.validation.internal.TaskListUtility.getValidationTasks(TaskListUtility.java:390)
    	at org.eclipse.wst.validation.internal.TaskListUtility.getValidationTasks(TaskListUtility.java:443)
    	at org.eclipse.wst.validation.internal.TaskListUtility.removeTaskSubset(TaskListUtility.java:543)
    	at org.eclipse.wst.validation.internal.TaskListUtility.removeTaskSubset(TaskListUtility.java:531)
    	at org.eclipse.wst.validation.internal.operations.WorkbenchReporter.removeMessageSubset(WorkbenchReporter.java:232)
    	at org.eclipse.wst.validation.internal.operations.WorkbenchReporter.removeMessageSubset(WorkbenchReporter.java:227)
    	at org.eclipse.wst.validation.internal.InternalValidatorManager.removeOperationTasks(InternalValidatorManager.java:109)
    	at org.eclipse.wst.validation.internal.operations.ValidationOperation.removeOldMessages(ValidationOperation.java:1128)
    	at org.eclipse.wst.validation.internal.operations.ValidationOperation.launchJobs(ValidationOperation.java:1607)
    	at org.eclipse.wst.validation.internal.operations.ValidationOperation.validate(ValidationOperation.java:850)
    	at org.eclipse.wst.validation.internal.operations.ValidationOperation.run(ValidationOperation.java:636)
    	at org.eclipse.wst.validation.internal.operations.ValidationBuilder.build(ValidationBuilder.java:210)
    	at org.eclipse.core.internal.events.BuildManager$2.run(BuildManager.java:603)
    	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:37)
    	at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:167)
    	at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:201)
    	at org.eclipse.core.internal.events.BuildManager$1.run(BuildManager.java:230)
    	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:37)
    	at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:233)
    	at org.eclipse.core.internal.events.BuildManager.basicBuildLoop(BuildManager.java:252)
    	at org.eclipse.core.internal.events.BuildManager.build(BuildManager.java:285)
    	at org.eclipse.core.internal.events.AutoBuildJob.doBuild(AutoBuildJob.java:145)
    	at org.eclipse.core.internal.events.AutoBuildJob.run(AutoBuildJob.java:208)
    	at org.eclipse.core.internal.jobs.Worker.run(Worker.java:58)
I could not  reproduce this problem in the  WTP build.

Seeing the stack below  the  problem is  possible if  a  validator defined  in the IBM product  uses marker in the  validator extension point but  doesn't define the custom marker id  extension point.
OK</WithStack>
    <WithOutStack>Opened for IBM:

The following exception is being thrown during bean creation.


I could not  reproduce this problem in the  WTP build.

Seeing the stack below  the  problem is  possible if  a  validator defined  in the IBM product  uses marker in the  validator extension point but  doesn't define the custom marker id  extension point.
OK</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="136763" />
    <CreationDate amount="2006-04-13 17:44:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="UI" />
    <Version amount="3.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows 2000" />
    <priority amount="P2" />
    <bug_severity amount="normal" />
    <Summery>Performance improvements to BindingManager</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="VERIFIED" />
    <resolution amount="FIXED" />
    <WithStack>Build id: I20060413-0010

One of our performance tests that still shows significant regression is opening editors.  With profiling I found that 0.8% of that time is in Collections.unmodifiableMap(...) called by three methods in BindingManager.  Another 0.15% is from instantiating new TrigerSequence[0] in three locations in BindingManager.  In the first case, the creation of an immutable map is completely unnecessary - the methods are private, the maps are never exposed across API boundaries, and there is never any risk that the maps will be modified.  The creation of empty TriggerSequence arrays can also be avoided with a singleton.  I will attach a patch that collectively saves about 1% of the total editor startup time (elapsed time as measured by sampling profiler).  These are very simple and safe fixes that I recommend considering for RC2.
Created attachment 38556
Patch to BindingManager.java
This is actually quite important because it affects the editor opening performance tests that are currently showing a regression for 3.2.  I'd like to see these fixes go in to see how much they improve the performance test.  The fixes are very safe, isolated, and simple optimizations.
Released into HEAD &gt;20060425

John, please let me know if this provides the improvement you want.

PW

Thanks Paul. I already ran my patches through some profiling to measure the improvement, but I'll keep an eye on the editor performance tests to measure the impact.
Dani, just CCing you here as an FYI... this should help performance on editor open tests.
Great, thanks guys!
verified in RC5
PW</WithStack>
    <WithOutStack>Build id: I20060413-0010

One of our performance tests that still shows significant regression is opening editors.  With profiling I found that 0.8% of that time is in Collections.unmodifiableMap(...) called by three methods in BindingManager.  Another 0.15% is from instantiating new TrigerSequence[0] in three locations in BindingManager.  In the first case, the creation of an immutable map is completely unnecessary - the methods are private, the maps are never exposed across API boundaries, and there is never any risk that the maps will be modified.  The creation of empty TriggerSequence arrays can also be avoided with a singleton.  I will attach a patch that collectively saves about 1% of the total editor startup time (elapsed time as measured by sampling profiler).  These are very simple and safe fixes that I recommend considering for RC2.
Created attachment 38556
Patch to BindingManager.java
This is actually quite important because it affects the editor opening performance tests that are currently showing a regression for 3.2.  I'd like to see these fixes go in to see how much they improve the performance test.  The fixes are very safe, isolated, and simple optimizations.
Released into HEAD &gt;20060425

John, please let me know if this provides the improvement you want.

PW

Thanks Paul. I already ran my patches through some profiling to measure the improvement, but I'll keep an eye on the editor performance tests to measure the impact.
Dani, just CCing you here as an FYI... this should help performance on editor open tests.
Great, thanks guys!
verified in RC5
PW</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="136764" />
    <CreationDate amount="2006-04-13 17:53:00 -0400" />
    <DupId amount="" />
    <classification amount="WebTools" />
    <Product amount="WTP Source Editing" />
    <component amount="wst.sse" />
    <Version amount="1.5" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="major" />
    <Summery>No source validation for xml, xsd, wsdl</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="1">
      <source_code type="functiondef">
        <location start="761" end="1252" />
        <code>private boolean isValidatorEnabled(ValidatorMetaData vmd) {
==&gt;	boolean enabled = true;
	ProjectConfiguration configuration = getProjectConfiguration();
	org.eclipse.wst.validation.internal.ValidatorMetaData metadata = ValidationRegistryReader.getReader().getValidatorMetaData(vmd.getValidatorClass());
	if (configuration != null &amp;&amp; metadata != null) {
==&gt;		if (!configuration.isBuildEnabled(metadata) &amp;&amp; !configuration.isManualEnabled(metadata))
==&gt;			enabled = false;
	}
	return enabled;
}</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>Fixing bug 130649 caused a regression where users are not able to get xml, xsd, wsdl validation.  This is because when validation preference is checked, by default, validation is turned off unless the preference is enabled.  Really, validation should be on by default and then if validation is deliberately turned off, then it should be turned off.

This problem affects xml, xsd, wsdl validation because they use special delegating validators that were created specifically for source validation, so there is no validation preference for them.  So when validation preference was looked up for them (and for Markup validation-which is another special source validator) none was found, so they were never used for source validation.
Fix is in ValidatorStrategy:
private boolean isValidatorEnabled(ValidatorMetaData vmd) {
==&gt;	boolean enabled = true;
	ProjectConfiguration configuration = getProjectConfiguration();
	org.eclipse.wst.validation.internal.ValidatorMetaData metadata = ValidationRegistryReader.getReader().getValidatorMetaData(vmd.getValidatorClass());
	if (configuration != null &amp;&amp; metadata != null) {
==&gt;		if (!configuration.isBuildEnabled(metadata) &amp;&amp; !configuration.isManualEnabled(metadata))
==&gt;			enabled = false;
	}
	return enabled;
}
released for wtp 1.5 m6
verified on  S-1.5M6-200604140226</WithStack>
    <WithOutStack>Fixing bug 130649 caused a regression where users are not able to get xml, xsd, wsdl validation.  This is because when validation preference is checked, by default, validation is turned off unless the preference is enabled.  Really, validation should be on by default and then if validation is deliberately turned off, then it should be turned off.

This problem affects xml, xsd, wsdl validation because they use special delegating validators that were created specifically for source validation, so there is no validation preference for them.  So when validation preference was looked up for them (and for Markup validation-which is another special source validator) none was found, so they were never used for source validation.
Fix is in ValidatorStrategy:
private boolean isValidatorEnabled(ValidatorMetaData vmd) {
==&gt;	boolean enabled = true;
	ProjectConfiguration configuration = getProjectConfiguration();
	org.eclipse.wst.validation.internal.ValidatorMetaData metadata = ValidationRegistryReader.getReader().getValidatorMetaData(vmd.getValidatorClass());
	if (configuration != null &amp;&amp; metadata != null) {
==&gt;		if (!configuration.isBuildEnabled(metadata) &amp;&amp; !configuration.isManualEnabled(metadata))
==&gt;			enabled = false;
	}
	return enabled;
}
released for wtp 1.5 m6
verified on  S-1.5M6-200604140226</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="136765" />
    <CreationDate amount="2006-04-13 18:06:00 -0400" />
    <DupId amount="" />
    <classification amount="WebTools" />
    <Product amount="WTP Common Tools" />
    <component amount="wst.common" />
    <Version amount="1.5" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="enhancement" />
    <Summery>[API Request] Consider making EditModel public API</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="WONTFIX" />
    <WithStack>The following classes are marked as internal and they are used by our component to monitor EditModel changes.  Please consider making this public API.

org.eclipse.wst.common.internal.emfworkbench.integration.EditModel
org.eclipse.wst.common.internal.emfworkbench.integration.EditModelEvent
org.eclipse.wst.common.internal.emfworkbench.integration.EditModelListener
EditModel classes will not change to public api, but alternative api classes that use EditModel internally should be considered  (IModelProvider, ArtifactEdit)</WithStack>
    <WithOutStack>The following classes are marked as internal and they are used by our component to monitor EditModel changes.  Please consider making this public API.

org.eclipse.wst.common.internal.emfworkbench.integration.EditModel
org.eclipse.wst.common.internal.emfworkbench.integration.EditModelEvent
org.eclipse.wst.common.internal.emfworkbench.integration.EditModelListener
EditModel classes will not change to public api, but alternative api classes that use EditModel internally should be considered  (IModelProvider, ArtifactEdit)</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="136766" />
    <CreationDate amount="2006-04-13 18:06:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse Foundation" />
    <Product amount="Community" />
    <component amount="CVS" />
    <Version amount="unspecified" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Add incubator group to map file access</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>Currently projects which are a part of the Equinox Incubator have their plug-ins listed in the core.map file in the org.eclipse.releng project. This is problematic for people on the team trying to update the map file because they don't have the correct permissions.

We would like a new file created and the owner to be the equinox-incubator group:
/cvsroot/eclipse/org.eclipse.releng/maps/equinox-incubator.map

Thanks.
Adding Sonia to the CC. We will be moving some of the entries from the core.map to the equinox-incubator.map file.

+1 if it matters
As long as the entries are present in any .map file in the maps directory, we're good from a build point of view.
Great.  Lets do this.  Seemed there was a stalemate so I created the file and moved the entries.  I assume all we need now is for D/M to set the perms so that equinox-incubator folks can modify.  I guess traditionally the releng folks can modify as well?
DJ, the org.eclipse.releng directory, and all the contents inside, is owned by eclipse-all, which is a group that should contain *all* the eclipse project committers.

You're in this group as well... Are you saying you can't commit to this file?

D.
I can commit, I just want to ensure that Simon and the other members of the equinox-incubator project can also. Simon, can you modify this file? If so, then I think we are done.
No, I'm still getting permission denied when I try to modify "equinox-incubator.map".

--
org.eclipse.releng: cvs [commit aborted]: could not open lock file `/cvsroot/eclipse/org.eclipse.releng/maps/,equinox-incubator.map,': Permission denied
--
I added all the equinox-incubator committers to the eclipse-all group as they should be.  They should all be able to commit to the eclipse common directories, such as org.eclipse.releng.

Closing as FIXED.  Feel free to reopen if I missed something.

D.
All good. Thanks.</WithStack>
    <WithOutStack>Currently projects which are a part of the Equinox Incubator have their plug-ins listed in the core.map file in the org.eclipse.releng project. This is problematic for people on the team trying to update the map file because they don't have the correct permissions.

We would like a new file created and the owner to be the equinox-incubator group:
/cvsroot/eclipse/org.eclipse.releng/maps/equinox-incubator.map

Thanks.
Adding Sonia to the CC. We will be moving some of the entries from the core.map to the equinox-incubator.map file.

+1 if it matters
As long as the entries are present in any .map file in the maps directory, we're good from a build point of view.
Great.  Lets do this.  Seemed there was a stalemate so I created the file and moved the entries.  I assume all we need now is for D/M to set the perms so that equinox-incubator folks can modify.  I guess traditionally the releng folks can modify as well?
DJ, the org.eclipse.releng directory, and all the contents inside, is owned by eclipse-all, which is a group that should contain *all* the eclipse project committers.

You're in this group as well... Are you saying you can't commit to this file?

D.
I can commit, I just want to ensure that Simon and the other members of the equinox-incubator project can also. Simon, can you modify this file? If so, then I think we are done.
No, I'm still getting permission denied when I try to modify "equinox-incubator.map".

--
org.eclipse.releng: cvs [commit aborted]: could not open lock file `/cvsroot/eclipse/org.eclipse.releng/maps/,equinox-incubator.map,': Permission denied
--
I added all the equinox-incubator committers to the eclipse-all group as they should be.  They should all be able to commit to the eclipse common directories, such as org.eclipse.releng.

Closing as FIXED.  Feel free to reopen if I missed something.

D.
All good. Thanks.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="136767" />
    <CreationDate amount="2006-04-13 18:16:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse Foundation" />
    <Product amount="z_Archived" />
    <component amount="WTP Datatools" />
    <Version amount="unspecified" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Supporting new database such as DB2 V9, SQL Server 2005 and Generic JDBC database</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>Supporting new database such as DB2 V9, SQL Server 2005 and Generic JDBC database.
Der-Ping, we are producing release candidates soon. No new function. This must get in before M6 is declared.
Created attachment 38626
patch (1 of 2)
Created attachment 38627
patch (2 of 2)
Created attachment 38628
new plug-in
Applied patch to WTP 1.5 (HEAD) on April 14th, 2006.
Verifed fixed.</WithStack>
    <WithOutStack>Supporting new database such as DB2 V9, SQL Server 2005 and Generic JDBC database.
Der-Ping, we are producing release candidates soon. No new function. This must get in before M6 is declared.
Created attachment 38626
patch (1 of 2)
Created attachment 38627
patch (2 of 2)
Created attachment 38628
new plug-in
Applied patch to WTP 1.5 (HEAD) on April 14th, 2006.
Verifed fixed.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="136768" />
    <CreationDate amount="2006-04-13 18:16:00 -0400" />
    <DupId amount="" />
    <classification amount="Modeling" />
    <Product amount="EMFT" />
    <component amount="Website" />
    <Version amount="1.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>After M6, javacSource and javaTarget must be specified</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="VERIFIED" />
    <resolution amount="FIXED" />
    <WithStack>Created attachment 38560
patches for */doc/org.eclipse.*.doc/build.xml

Christian, please apply these changes for your 4 projects. Thanks!
Patch does not work. Looks like the patch is not a multi project patch. Need to be a workspace patch
Comment on attachment 38560
patches for */doc/org.eclipse.*.doc/build.xml

this patch is not a workspace patch
Created attachment 39026
Workspace patch for the doc plugins

Patch provided by Nick Boldt for the doc plugins
Reviewed and applied the patch 
Move to verified as per bug 206558.</WithStack>
    <WithOutStack>Created attachment 38560
patches for */doc/org.eclipse.*.doc/build.xml

Christian, please apply these changes for your 4 projects. Thanks!
Patch does not work. Looks like the patch is not a multi project patch. Need to be a workspace patch
Comment on attachment 38560
patches for */doc/org.eclipse.*.doc/build.xml

this patch is not a workspace patch
Created attachment 39026
Workspace patch for the doc plugins

Patch provided by Nick Boldt for the doc plugins
Reviewed and applied the patch 
Move to verified as per bug 206558.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="136769" />
    <CreationDate amount="2006-04-13 18:19:00 -0400" />
    <DupId amount="" />
    <classification amount="WebTools" />
    <Product amount="WTP Common Tools" />
    <component amount="wst.common" />
    <Version amount="1.5" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>[Internal API] Consider making CommonNavigator and helper classes public API</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="WONTFIX" />
    <WithStack>We use CommonNavigator/Viewer classes in order to select elements in the viewer.  
This is a common action that ought to be made a public API.

org.eclipse.wst.common.navigator.internal.provisional.views.CommonNavigator
org.eclipse.wst.common.navigator.internal.provisional.views.CommonViewer 


Our component also makes extensive use of utility/helper classes that ought to be made publically available.

org.eclipse.wst.common.componentcore.internal.util.ComponentUtilities
org.eclipse.wst.common.internal.emfworkbench.WorkbenchResourceHelper
The common navigator classes in WTP will be deleted in RC1 for 1.5.  The replacement is the eclipse platform common navigator which is being billed as API.
Closing.</WithStack>
    <WithOutStack>We use CommonNavigator/Viewer classes in order to select elements in the viewer.  
This is a common action that ought to be made a public API.

org.eclipse.wst.common.navigator.internal.provisional.views.CommonNavigator
org.eclipse.wst.common.navigator.internal.provisional.views.CommonViewer 


Our component also makes extensive use of utility/helper classes that ought to be made publically available.

org.eclipse.wst.common.componentcore.internal.util.ComponentUtilities
org.eclipse.wst.common.internal.emfworkbench.WorkbenchResourceHelper
The common navigator classes in WTP will be deleted in RC1 for 1.5.  The replacement is the eclipse platform common navigator which is being billed as API.
Closing.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="136770" />
    <CreationDate amount="2006-04-13 18:34:00 -0400" />
    <DupId amount="" />
    <classification amount="BIRT" />
    <Product amount="BIRT" />
    <component amount="Report Viewer" />
    <Version amount="unspecified" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows 2000" />
    <priority amount="P2" />
    <bug_severity amount="major" />
    <Summery>Cannot view report document from web viewer</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>Put a report document under the root folder of web viewer deployment, using following URL to view it:
http://localhost:8888/birt_web/frameset?__document=customer1p-1kr.rptdocument
got error message "The design file c:\work\tomcat41\webapps\birt_web\ has error and can not be run." in the browser.
It seems the report document name is missed in the full path of the document when web viewer wants to open it.
Synch up with Callisto schedule to rename RC1 as RC2 targeted 5/5/2006.
Fixed.</WithStack>
    <WithOutStack>Put a report document under the root folder of web viewer deployment, using following URL to view it:
http://localhost:8888/birt_web/frameset?__document=customer1p-1kr.rptdocument
got error message "The design file c:\work\tomcat41\webapps\birt_web\ has error and can not be run." in the browser.
It seems the report document name is missed in the full path of the document when web viewer wants to open it.
Synch up with Callisto schedule to rename RC1 as RC2 targeted 5/5/2006.
Fixed.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="136771" />
    <CreationDate amount="2006-04-13 18:44:00 -0400" />
    <DupId amount="138129" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="SWT" />
    <Version amount="3.1.2" />
    <rep_platform amount="All" />
    <op_sys amount="All" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Broken link to Eclipse 3.2 help index on help.eclipse.org</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="DUPLICATE" />
    <WithStack>Go to http://www.eclipse.org/swt/widgets/
Scroll down to the ExpandBar widget and click the Javadoc link: http://help.eclipse.org/help32/nftopic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/widgets/ExpandBar.html
404 File not found error occurs

Backing off the filename from the link, and subsequently each subfolder name one at a time still produces the 404 error, until you get to help.eclipse.org only, which forwards to the 3.1 docs.
Moving to SWT
(actually) moving to SWT component to make sure they see it.


*** This bug has been marked as a duplicate of 138129 ***</WithStack>
    <WithOutStack>Go to http://www.eclipse.org/swt/widgets/
Scroll down to the ExpandBar widget and click the Javadoc link: http://help.eclipse.org/help32/nftopic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/widgets/ExpandBar.html
404 File not found error occurs

Backing off the filename from the link, and subsequently each subfolder name one at a time still produces the 404 error, until you get to help.eclipse.org only, which forwards to the 3.1 docs.
Moving to SWT
(actually) moving to SWT component to make sure they see it.


*** This bug has been marked as a duplicate of 138129 ***</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="136772" />
    <CreationDate amount="2006-04-13 19:17:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="PDE" />
    <component amount="UI" />
    <Version amount="3.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Cheatsheet Create an RCP Application does not run</Summery>
    <Patches amount="0" />
    <Stacktraces amount="1">
      <Stacktrace timestamp="1437330716211">
        <Exception>java.lang.NullPointerException</Exception>
        <Reason />
        <Frames>
          <Frame depth="0">org.eclipse.pde.internal.ui.wizards.plugin.NewProjectCreationPage.validatePage(NewProjectCreationPage.java:212)</Frame>
          <Frame depth="1">org.eclipse.ui.dialogs.WizardNewProjectCreationPage$2.reportError(WizardNewProjectCreationPage.java:128)</Frame>
          <Frame depth="2">org.eclipse.ui.internal.ide.dialogs.ProjectContentsLocationArea$3.modifyText(ProjectContentsLocationArea.java:230)</Frame>
          <Frame depth="3">org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:196)</Frame>
          <Frame depth="4">org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)</Frame>
          <Frame depth="5">org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:925)</Frame>
          <Frame depth="6">org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:949)</Frame>
          <Frame depth="7">org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:930)</Frame>
          <Frame depth="8">org.eclipse.swt.widgets.Text.wmCommandChild(Text.java:2143)</Frame>
          <Frame depth="9">org.eclipse.swt.widgets.Control.WM_COMMAND(Control.java:3375)</Frame>
          <Frame depth="10">org.eclipse.swt.widgets.Control.windowProc(Control.java:3249)</Frame>
          <Frame depth="11">org.eclipse.swt.widgets.Display.windowProc(Display.java:4023)</Frame>
          <Frame depth="12">org.eclipse.swt.internal.win32.OS.CallWindowProcW(Native Method)</Frame>
          <Frame depth="13">org.eclipse.swt.internal.win32.OS.CallWindowProc(OS.java:1839)</Frame>
          <Frame depth="14">org.eclipse.swt.widgets.Text.callWindowProc(Text.java:131)</Frame>
          <Frame depth="15">org.eclipse.swt.widgets.Control.windowProc(Control.java:3334)</Frame>
          <Frame depth="16">org.eclipse.swt.widgets.Text.windowProc(Text.java:1841)</Frame>
          <Frame depth="17">org.eclipse.swt.widgets.Display.windowProc(Display.java:4023)</Frame>
          <Frame depth="18">org.eclipse.swt.internal.win32.OS.SetWindowTextW(Native Method)</Frame>
          <Frame depth="19">org.eclipse.swt.internal.win32.OS.SetWindowText(OS.java:2633)</Frame>
          <Frame depth="20">org.eclipse.swt.widgets.Text.setText(Text.java:1657)</Frame>
          <Frame depth="21">org.eclipse.ui.internal.ide.dialogs.ProjectContentsLocationArea.updateProjectName(ProjectContentsLocationArea.java:451)</Frame>
          <Frame depth="22">org.eclipse.ui.dialogs.WizardNewProjectCreationPage.createControl(WizardNewProjectCreationPage.java:102)</Frame>
          <Frame depth="23">org.eclipse.pde.internal.ui.wizards.plugin.NewProjectCreationPage.createControl(NewProjectCreationPage.java:62)</Frame>
          <Frame depth="24">org.eclipse.jface.wizard.Wizard.createPageControls(Wizard.java:180)</Frame>
          <Frame depth="25">org.eclipse.jface.wizard.WizardDialog.createPageControls(WizardDialog.java:614)</Frame>
          <Frame depth="26">org.eclipse.jface.wizard.WizardDialog.createContents(WizardDialog.java:502)</Frame>
          <Frame depth="27">org.eclipse.jface.window.Window.create(Window.java:426)</Frame>
          <Frame depth="28">org.eclipse.jface.dialogs.Dialog.create(Dialog.java:1116)</Frame>
          <Frame depth="29">org.eclipse.pde.internal.ui.wizards.plugin.OpenProjectWizardAction.run(OpenProjectWizardAction.java:53)</Frame>
          <Frame depth="30">org.eclipse.ui.internal.cheatsheets.ActionRunner.runAction(ActionRunner.java:86)</Frame>
          <Frame depth="31">org.eclipse.ui.internal.cheatsheets.data.Action.execute(Action.java:97)</Frame>
          <Frame depth="32">org.eclipse.ui.internal.cheatsheets.views.CoreItem.runExecutable(CoreItem.java:451)</Frame>
          <Frame depth="33">org.eclipse.ui.internal.cheatsheets.views.CoreItem.runExecutable(CoreItem.java:446)</Frame>
          <Frame depth="34">org.eclipse.ui.internal.cheatsheets.views.CheatSheetViewer.runPerformExecutable(CheatSheetViewer.java:953)</Frame>
          <Frame depth="35">org.eclipse.ui.internal.cheatsheets.views.CoreItem$1.linkActivated(CoreItem.java:88)</Frame>
          <Frame depth="36">org.eclipse.ui.forms.widgets.AbstractHyperlink.handleActivate(AbstractHyperlink.java:208)</Frame>
          <Frame depth="37">org.eclipse.ui.forms.widgets.ImageHyperlink.handleActivate(ImageHyperlink.java:174)</Frame>
          <Frame depth="38">org.eclipse.ui.forms.widgets.AbstractHyperlink.handleMouseUp(AbstractHyperlink.java:289)</Frame>
          <Frame depth="39">org.eclipse.ui.forms.widgets.AbstractHyperlink.access$1(AbstractHyperlink.java:273)</Frame>
          <Frame depth="40">org.eclipse.ui.forms.widgets.AbstractHyperlink$4.handleEvent(AbstractHyperlink.java:110)</Frame>
          <Frame depth="41">org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)</Frame>
          <Frame depth="42">org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:925)</Frame>
          <Frame depth="43">org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3346)</Frame>
          <Frame depth="44">org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2966)</Frame>
          <Frame depth="45">org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1914)</Frame>
          <Frame depth="46">org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1878)</Frame>
          <Frame depth="47">org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:419)</Frame>
          <Frame depth="48">org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:143)</Frame>
          <Frame depth="49">org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:95)</Frame>
          <Frame depth="50">org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:78)</Frame>
          <Frame depth="51">org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:92)</Frame>
          <Frame depth="52">org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:68)</Frame>
          <Frame depth="53">org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:376)</Frame>
          <Frame depth="54">org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:169)</Frame>
          <Frame depth="55">sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)</Frame>
          <Frame depth="56">sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)</Frame>
          <Frame depth="57">sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)</Frame>
          <Frame depth="58">java.lang.reflect.Method.invoke(Unknown Source)</Frame>
          <Frame depth="59">org.eclipse.core.launcher.Main.invokeFramework(Main.java:336)</Frame>
          <Frame depth="60">org.eclipse.core.launcher.Main.basicRun(Main.java:280)</Frame>
          <Frame depth="61">org.eclipse.core.launcher.Main.run(Main.java:977)</Frame>
          <Frame depth="62">org.eclipse.core.launcher.Main.main(Main.java:952)</Frame>
        </Frames>
      </Stacktrace>
    </Stacktraces>
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="3">
        <Lines>
          <Line>- alt_about.gif</Line>
          <Line>- alt_window_16.gif</Line>
          <Line>- alt_window_32.gif</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>I'm using eclipse-SDK-I20060413-1330-win32.

Open the cheat sheet Creating an RCP application and start working through it. At the step Creating a new Plug-in Project pressing the "Click to perform button" causes an exception to be written to the error log and the action not to complete. Here's the log

java.lang.NullPointerException
at org.eclipse.pde.internal.ui.wizards.plugin.NewProjectCreationPage.validatePage(NewProjectCreationPage.java:212)
at org.eclipse.ui.dialogs.WizardNewProjectCreationPage$2.reportError(WizardNewProjectCreationPage.java:128)
at org.eclipse.ui.internal.ide.dialogs.ProjectContentsLocationArea$3.modifyText(ProjectContentsLocationArea.java:230)
at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:196)
at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:925)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:949)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:930)
at org.eclipse.swt.widgets.Text.wmCommandChild(Text.java:2143)
at org.eclipse.swt.widgets.Control.WM_COMMAND(Control.java:3375)
at org.eclipse.swt.widgets.Control.windowProc(Control.java:3249)
at org.eclipse.swt.widgets.Display.windowProc(Display.java:4023)
at org.eclipse.swt.internal.win32.OS.CallWindowProcW(Native Method)
at org.eclipse.swt.internal.win32.OS.CallWindowProc(OS.java:1839)
at org.eclipse.swt.widgets.Text.callWindowProc(Text.java:131)
at org.eclipse.swt.widgets.Control.windowProc(Control.java:3334)
at org.eclipse.swt.widgets.Text.windowProc(Text.java:1841)
at org.eclipse.swt.widgets.Display.windowProc(Display.java:4023)
at org.eclipse.swt.internal.win32.OS.SetWindowTextW(Native Method)
at org.eclipse.swt.internal.win32.OS.SetWindowText(OS.java:2633)
at org.eclipse.swt.widgets.Text.setText(Text.java:1657)
at org.eclipse.ui.internal.ide.dialogs.ProjectContentsLocationArea.updateProjectName(ProjectContentsLocationArea.java:451)
at org.eclipse.ui.dialogs.WizardNewProjectCreationPage.createControl(WizardNewProjectCreationPage.java:102)
at org.eclipse.pde.internal.ui.wizards.plugin.NewProjectCreationPage.createControl(NewProjectCreationPage.java:62)
at org.eclipse.jface.wizard.Wizard.createPageControls(Wizard.java:180)
at org.eclipse.jface.wizard.WizardDialog.createPageControls(WizardDialog.java:614)
at org.eclipse.jface.wizard.WizardDialog.createContents(WizardDialog.java:502)
at org.eclipse.jface.window.Window.create(Window.java:426)
at org.eclipse.jface.dialogs.Dialog.create(Dialog.java:1116)
at org.eclipse.pde.internal.ui.wizards.plugin.OpenProjectWizardAction.run(OpenProjectWizardAction.java:53)
at org.eclipse.ui.internal.cheatsheets.ActionRunner.runAction(ActionRunner.java:86)
at org.eclipse.ui.internal.cheatsheets.data.Action.execute(Action.java:97)
at org.eclipse.ui.internal.cheatsheets.views.CoreItem.runExecutable(CoreItem.java:451)
at org.eclipse.ui.internal.cheatsheets.views.CoreItem.runExecutable(CoreItem.java:446)
at org.eclipse.ui.internal.cheatsheets.views.CheatSheetViewer.runPerformExecutable(CheatSheetViewer.java:953)
at org.eclipse.ui.internal.cheatsheets.views.CoreItem$1.linkActivated(CoreItem.java:88)
at org.eclipse.ui.forms.widgets.AbstractHyperlink.handleActivate(AbstractHyperlink.java:208)
at org.eclipse.ui.forms.widgets.ImageHyperlink.handleActivate(ImageHyperlink.java:174)
at org.eclipse.ui.forms.widgets.AbstractHyperlink.handleMouseUp(AbstractHyperlink.java:289)
at org.eclipse.ui.forms.widgets.AbstractHyperlink.access$1(AbstractHyperlink.java:273)
at org.eclipse.ui.forms.widgets.AbstractHyperlink$4.handleEvent(AbstractHyperlink.java:110)
at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:925)
at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3346)
at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2966)
at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1914)
at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1878)
at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:419)
at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:143)
at org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:95)
at org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:78)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:92)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:68)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:376)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:169)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at org.eclipse.core.launcher.Main.invokeFramework(Main.java:336)
at org.eclipse.core.launcher.Main.basicRun(Main.java:280)
at org.eclipse.core.launcher.Main.run(Main.java:977)
at org.eclipse.core.launcher.Main.main(Main.java:952)
Mike, we could address this defect as turn this cheatsheet into a composite cheatsheet for 3.2
Work Done

* Created one composite cheat sheet containing five simple cheat sheets:
  -&gt; Create an RCP application using PDE
     -&gt; Create a plug-in
     -&gt; Define a plug-in based product
     -&gt; Customize a product
     -&gt; Export an RCP application
     -&gt; Define a feature based product

* Content 100% finished

* Formatted all text whenever possible

* Utilized subitems to enhance layout

* Linked all tasks with UA documents where applicable

* Utilized pre-defined commands where ever it made sense

* Verified spelling and grammar

* Successfully tested end to end using Eclipse 3.2 - N20060425-0010

See attached patch #1

* Updated the Eclipse 3.1 Hello RCP template to include icons and a splash
  screen image:
  
  -&gt; Reused from the Browser template

     - alt_about.gif
     - alt_window_16.gif
     - alt_window_32.gif

  -&gt; Reused from the RCP mail template

     - splash.bmp

  -&gt; Created icon with all 8 image formats

     - alt_launcher.ico

New images to be stored in this location:
/org.eclipse.pde.ui/templates_3.1/helloRCP/bin/icons/

Will send them by email

Created attachment 39495
Patch #1
Looks very good.  Thanks Mike.</WithStack>
    <WithOutStack>I'm using eclipse-SDK-I20060413-1330-win32.

Open the cheat sheet Creating an RCP application and start working through it. At the step Creating a new Plug-in Project pressing the "Click to perform button" causes an exception to be written to the error log and the action not to complete. Here's the log


Mike, we could address this defect as turn this cheatsheet into a composite cheatsheet for 3.2
Work Done

* Created one composite cheat sheet containing five simple cheat sheets:
  -&gt; Create an RCP application using PDE
     -&gt; Create a plug-in
     -&gt; Define a plug-in based product
     -&gt; Customize a product
     -&gt; Export an RCP application
     -&gt; Define a feature based product

* Content 100% finished

* Formatted all text whenever possible

* Utilized subitems to enhance layout

* Linked all tasks with UA documents where applicable

* Utilized pre-defined commands where ever it made sense

* Verified spelling and grammar

* Successfully tested end to end using Eclipse 3.2 - N20060425-0010

See attached patch #1

* Updated the Eclipse 3.1 Hello RCP template to include icons and a splash
  screen image:
  
  -&gt; Reused from the Browser template

     - alt_about.gif
     - alt_window_16.gif
     - alt_window_32.gif

  -&gt; Reused from the RCP mail template

     - splash.bmp

  -&gt; Created icon with all 8 image formats

     - alt_launcher.ico

New images to be stored in this location:
/org.eclipse.pde.ui/templates_3.1/helloRCP/bin/icons/

Will send them by email

Created attachment 39495
Patch #1
Looks very good.  Thanks Mike.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="136773" />
    <CreationDate amount="2006-04-13 19:25:00 -0400" />
    <DupId amount="" />
    <classification amount="WebTools" />
    <Product amount="WTP Source Editing" />
    <component amount="wst.xml" />
    <Version amount="1.5" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>As-you-type validation broken for XML, XSD and WSDL</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>The problem is with a "magic" constant used by AbstractNestedValidator to obtain the InputStream with the editor content from the validation context. This class requests it using "inputstream" while the validation context provided in the SSE's DelegatingSourceValidator has it hardcoded as "inputStream". Note the capitalization difference.
Created attachment 38565
Proposed fix
One small correction, the DelegatingSourceValidator class is an xml.ui class not an SSE class.

Also, the fix I provided is just a quick fix, a better solution would be to have the two classes share some common constant definitions. There seem to be a few other candidates for re-use - like the "squiggle" strategy related validation message attribute names.
Committed to head. 

released for M6. 
I've opened bug 136781 to track long term 
problem of us using too many Strings to "hide" dependancies.
.
Closing now.</WithStack>
    <WithOutStack>The problem is with a "magic" constant used by AbstractNestedValidator to obtain the InputStream with the editor content from the validation context. This class requests it using "inputstream" while the validation context provided in the SSE's DelegatingSourceValidator has it hardcoded as "inputStream". Note the capitalization difference.
Created attachment 38565
Proposed fix
One small correction, the DelegatingSourceValidator class is an xml.ui class not an SSE class.

Also, the fix I provided is just a quick fix, a better solution would be to have the two classes share some common constant definitions. There seem to be a few other candidates for re-use - like the "squiggle" strategy related validation message attribute names.
Committed to head. 

released for M6. 
I've opened bug 136781 to track long term 
problem of us using too many Strings to "hide" dependancies.
.
Closing now.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="136774" />
    <CreationDate amount="2006-04-13 19:39:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse Foundation" />
    <Product amount="Community" />
    <component amount="Website" />
    <Version amount="unspecified" />
    <rep_platform amount="All" />
    <op_sys amount="All" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Update projects.txt for Corona and Nebula project provisioning</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>Created attachment 38564
patch for /projects/
One minor typo in the patch: the URL for Nebula needed to end in a /. I made that fix and applied the patch.
(In reply to comment #2)
&gt; One minor typo in the patch: the URL for Nebula needed to end in a /. I made
&gt; that fix and applied the patch.
&gt; 

Good catch. I appreciate your vigilance.

D.</WithStack>
    <WithOutStack>Created attachment 38564
patch for /projects/
One minor typo in the patch: the URL for Nebula needed to end in a /. I made that fix and applied the patch.
(In reply to comment #2)
&gt; One minor typo in the patch: the URL for Nebula needed to end in a /. I made
&gt; that fix and applied the patch.
&gt; 

Good catch. I appreciate your vigilance.

D.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="136775" />
    <CreationDate amount="2006-04-13 19:42:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse Foundation" />
    <Product amount="Community" />
    <component amount="Website" />
    <Version amount="unspecified" />
    <rep_platform amount="All" />
    <op_sys amount="All" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Added minutes for Technology PMC conference calls</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>Created attachment 38566
Patch to add minutes for Tech PMC conference calls
Patch applied.</WithStack>
    <WithOutStack>Created attachment 38566
Patch to add minutes for Tech PMC conference calls
Patch applied.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="136776" />
    <CreationDate amount="2006-04-13 19:56:00 -0400" />
    <DupId amount="" />
    <classification amount="WebTools" />
    <Product amount="WTP Source Editing" />
    <component amount="jst.jsp" />
    <Version amount="1.0.1" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P4" />
    <bug_severity amount="normal" />
    <Summery>pageEncoding in JSP template makes Tomcat 3.2.4 fail to compile the page</Summery>
    <Patches amount="0" />
    <Stacktraces amount="1">
      <Stacktrace timestamp="1437330716211">
        <Exception>org.apache.jasper.compiler.ParseException</Exception>
        <Reason>C:\~eclipse-workspaces\WTP-1.0.1\.metadata\.plugins\org.eclipse.wst.server.core\tmp1\webapps\Tomcat324\first.jsp(0,0) Page directive: Invalid attribute, pageEncoding</Reason>
        <Frames>
          <Frame depth="0">org.apache.jasper.compiler.JspUtil.checkAttributes(JspUtil.java:243)</Frame>
          <Frame depth="1">org.apache.jasper.compiler.Parser$Directive.accept(Parser.java:194)</Frame>
          <Frame depth="2">org.apache.jasper.compiler.Parser.parse(Parser.java:1077)</Frame>
          <Frame depth="3">org.apache.jasper.compiler.Parser.parse(Parser.java:1042)</Frame>
          <Frame depth="4">org.apache.jasper.compiler.Parser.parse(Parser.java:1038)</Frame>
          <Frame depth="5">org.apache.jasper.compiler.Compiler.compile(Compiler.java:209)</Frame>
          <Frame depth="6">org.apache.jasper.servlet.JspServlet.doLoadJSP(JspServlet.java:612)</Frame>
          <Frame depth="7">org.apache.jasper.servlet.JasperLoader12.loadJSP(JasperLoader12.java:146)</Frame>
          <Frame depth="8">org.apache.jasper.servlet.JspServlet.loadJSP(JspServlet.java:542)</Frame>
          <Frame depth="9">org.apache.jasper.servlet.JspServlet$JspServletWrapper.loadIfNecessary(JspServlet.java:258)</Frame>
          <Frame depth="10">org.apache.jasper.servlet.JspServlet$JspServletWrapper.service(JspServlet.java:268)</Frame>
          <Frame depth="11">org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:429)</Frame>
          <Frame depth="12">org.apache.jasper.servlet.JspServlet.service(JspServlet.java:500)</Frame>
          <Frame depth="13">javax.servlet.http.HttpServlet.service(HttpServlet.java:853)</Frame>
          <Frame depth="14">org.apache.tomcat.core.ServletWrapper.doService(ServletWrapper.java:405)</Frame>
          <Frame depth="15">org.apache.tomcat.core.Handler.service(Handler.java:287)</Frame>
          <Frame depth="16">org.apache.tomcat.core.ServletWrapper.service(ServletWrapper.java:372)</Frame>
          <Frame depth="17">org.apache.tomcat.core.ContextManager.internalService(ContextManager.java:806)</Frame>
          <Frame depth="18">org.apache.tomcat.core.ContextManager.service(ContextManager.java:752)</Frame>
          <Frame depth="19">org.apache.tomcat.service.http.HttpConnectionHandler.processConnection(HttpConnectionHandler.java:213)</Frame>
          <Frame depth="20">org.apache.tomcat.service.TcpWorkerThread.runIt(PoolTcpEndpoint.java:416)</Frame>
          <Frame depth="21">org.apache.tomcat.util.ThreadPool$ControlRunnable.run(ThreadPool.java:501)</Frame>
          <Frame depth="22">java.lang.Thread.run(Thread.java:534)</Frame>
        </Frames>
      </Stacktrace>
    </Stacktraces>
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="WONTFIX" />
    <WithStack>The JSP template "New JSP file (html)" uses pageEncoding, but that makes Tomcat 3.2.4 throw an exception:

Error: 500
Location: /Tomcat324/first.jsp
Internal Servlet Error:

org.apache.jasper.compiler.ParseException: C:\~eclipse-workspaces\WTP-1.0.1\.metadata\.plugins\org.eclipse.wst.server.core\tmp1\webapps\Tomcat324\first.jsp(0,0) Page directive: Invalid attribute, pageEncoding
	at org.apache.jasper.compiler.JspUtil.checkAttributes(JspUtil.java:243)
	at org.apache.jasper.compiler.Parser$Directive.accept(Parser.java:194)
	at org.apache.jasper.compiler.Parser.parse(Parser.java:1077)
	at org.apache.jasper.compiler.Parser.parse(Parser.java:1042)
	at org.apache.jasper.compiler.Parser.parse(Parser.java:1038)
	at org.apache.jasper.compiler.Compiler.compile(Compiler.java:209)
	at org.apache.jasper.servlet.JspServlet.doLoadJSP(JspServlet.java:612)
	at org.apache.jasper.servlet.JasperLoader12.loadJSP(JasperLoader12.java:146)
	at org.apache.jasper.servlet.JspServlet.loadJSP(JspServlet.java:542)
	at org.apache.jasper.servlet.JspServlet$JspServletWrapper.loadIfNecessary(JspServlet.java:258)
	at org.apache.jasper.servlet.JspServlet$JspServletWrapper.service(JspServlet.java:268)
	at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:429)
	at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:500)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:853)
	at org.apache.tomcat.core.ServletWrapper.doService(ServletWrapper.java:405)
	at org.apache.tomcat.core.Handler.service(Handler.java:287)
	at org.apache.tomcat.core.ServletWrapper.service(ServletWrapper.java:372)
	at org.apache.tomcat.core.ContextManager.internalService(ContextManager.java:806)
	at org.apache.tomcat.core.ContextManager.service(ContextManager.java:752)
	at org.apache.tomcat.service.http.HttpConnectionHandler.processConnection(HttpConnectionHandler.java:213)
	at org.apache.tomcat.service.TcpWorkerThread.runIt(PoolTcpEndpoint.java:416)
	at org.apache.tomcat.util.ThreadPool$ControlRunnable.run(ThreadPool.java:501)
	at java.lang.Thread.run(Thread.java:534)
Wow, people still use 3.2.4, eh? :) 

I almost closed as "won't fix", because those templates are easily modifiable by the end user -- in fact, that's the idea, and our templates are just meant as a "starting point". 

But, I do agree its bad for us to ever produce non-compiling code. 
And, if we ever *do* put more smarts in the templates, this is a good candidate. 

I really do appreciate you opening it ... keep us honest! :) 

Oh, and meant to type, if other people see this a lot, please make a note, or 'vote' here, and we'll now I'm all wet and it deserves more attention. 

In the meantime, Julio, hope you don't mind just editing yours. 
Thanks again. 

Vote to resolve.  Tomcat 3.2 is a bit dated at this point and if there were still serious issues with our templates then this bug would have been touch more recently then 4 years ago.
Resolving since it's fine in 4.0 and up and can be edited.  It's not a perfect response to the problem, but at least it's recorded here.</WithStack>
    <WithOutStack>The JSP template "New JSP file (html)" uses pageEncoding, but that makes Tomcat 3.2.4 throw an exception:

Error: 500
Location: /Tomcat324/first.jsp
Internal Servlet Error:


Wow, people still use 3.2.4, eh? :) 

I almost closed as "won't fix", because those templates are easily modifiable by the end user -- in fact, that's the idea, and our templates are just meant as a "starting point". 

But, I do agree its bad for us to ever produce non-compiling code. 
And, if we ever *do* put more smarts in the templates, this is a good candidate. 

I really do appreciate you opening it ... keep us honest! :) 

Oh, and meant to type, if other people see this a lot, please make a note, or 'vote' here, and we'll now I'm all wet and it deserves more attention. 

In the meantime, Julio, hope you don't mind just editing yours. 
Thanks again. 

Vote to resolve.  Tomcat 3.2 is a bit dated at this point and if there were still serious issues with our templates then this bug would have been touch more recently then 4 years ago.
Resolving since it's fine in 4.0 and up and can be edited.  It's not a perfect response to the problem, but at least it's recorded here.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="136777" />
    <CreationDate amount="2006-04-13 20:20:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse Foundation" />
    <Product amount="Community" />
    <component amount="Website" />
    <Version amount="unspecified" />
    <rep_platform amount="All" />
    <op_sys amount="All" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Patch for callisto projects page adding CVC Projects section</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>Created attachment 38567
Patch to add CVS Build section to callisto page
Patch applied</WithStack>
    <WithOutStack>Created attachment 38567
Patch to add CVS Build section to callisto page
Patch applied</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="136778" />
    <CreationDate amount="2006-04-13 20:29:00 -0400" />
    <DupId amount="" />
    <classification amount="Modeling" />
    <Product amount="MDT.OCL" />
    <component amount="Core" />
    <Version amount="unspecified" />
    <rep_platform amount="PC" />
    <op_sys amount="Linux" />
    <priority amount="P2" />
    <bug_severity amount="normal" />
    <Summery>Validation visitor needs the Environment in order to validate completely</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="2">
      <Enumeration lines="5">
        <Lines>
          <Line>- operation call expressions can only reference query operations</Line>
          <Line>- navigation source of an association class call must be a member</Line>
          <Line>end of the association class</Line>
          <Line>- navigation qualifier expressions must conform to the source</Line>
          <Line>property's qualifier types</Line>
        </Lines>
      </Enumeration>
      <Enumeration lines="2">
        <Lines>
          <Line>- Tuple types and Collection types</Line>
          <Line>- additional properties and operations</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>There are certain validations that the ValidationVisitorImpl cannot perform because it does not have access to the Environment of the OCL Expression that it is parsing.  This includes, but is not limited to:

  - operation call expressions can only reference query operations
  - navigation source of an association class call must be a member
    end of the association class
  - navigation qualifier expressions must conform to the source
    property's qualifier types

Suggest that either an OCLExpression be imbued with a transitive reference to the Environment in which it was created, or else (preferably, I think) pass the Environment to the validation call.  Either way, I think it requires new API.
*** Bug 125627 has been marked as a duplicate of this bug. ***
Committed a new static factory method

    ValidationVisitorImpl.getInstance(Environment)

which creates a validation visitor using the client-specified environment.

The no-argument factory method is retained, and lazily creates an EcoreEnvironment on the context of the constraint.

Validation of operation calls now defers to the environment instead of using the TypeUtil class (the scenario reported in bug 125627) and the scenarios described in this bug are handled using the environment.

The ExpressionsUtil and IOCLHelper APIs are updated validate the expressions using the same environment in which they parsed them.
Verified. Fantastic, I've just deleted my most monstrous workarounds.

Looking forward to resolution of the orphan problems too.
Great!  I'm glad to hear that it's working better for you.

I'm still thinking about those orphans ... the biggest problem that I have is in two categories of dynamically-generated constructs:

  - Tuple types and Collection types
  - additional properties and operations

The former category I think we can handle by creating a custom resource that resolves proxies by reconstructing the necessary types from information encoded in the proxy URI.  This could even help us to implement some of the caching of types that we would like to do (you may have noticed some TODOs in the code  :-)

The latter category is more interesting.  A straight-forward approach would use the same custom resource implementation and encode the entire def: expression in the URI, but these kinds of expressions were intended by the OCL spec to be stored in some kind of file as an adjunct to the UML model.  I'm thinking that the persistence of these additional properties and operations should be managed by the client, but then I'm not sure how an href from a persisted constraint would look.

Have you any ideas on the matter?
Move to verified as per bug 206558.
Closing after over a year in verified state.
Closing after over a year in verified state.</WithStack>
    <WithOutStack>There are certain validations that the ValidationVisitorImpl cannot perform because it does not have access to the Environment of the OCL Expression that it is parsing.  This includes, but is not limited to:

  - operation call expressions can only reference query operations
  - navigation source of an association class call must be a member
    end of the association class
  - navigation qualifier expressions must conform to the source
    property's qualifier types

Suggest that either an OCLExpression be imbued with a transitive reference to the Environment in which it was created, or else (preferably, I think) pass the Environment to the validation call.  Either way, I think it requires new API.
*** Bug 125627 has been marked as a duplicate of this bug. ***
Committed a new static factory method

    ValidationVisitorImpl.getInstance(Environment)

which creates a validation visitor using the client-specified environment.

The no-argument factory method is retained, and lazily creates an EcoreEnvironment on the context of the constraint.

Validation of operation calls now defers to the environment instead of using the TypeUtil class (the scenario reported in bug 125627) and the scenarios described in this bug are handled using the environment.

The ExpressionsUtil and IOCLHelper APIs are updated validate the expressions using the same environment in which they parsed them.
Verified. Fantastic, I've just deleted my most monstrous workarounds.

Looking forward to resolution of the orphan problems too.
Great!  I'm glad to hear that it's working better for you.

I'm still thinking about those orphans ... the biggest problem that I have is in two categories of dynamically-generated constructs:

  - Tuple types and Collection types
  - additional properties and operations

The former category I think we can handle by creating a custom resource that resolves proxies by reconstructing the necessary types from information encoded in the proxy URI.  This could even help us to implement some of the caching of types that we would like to do (you may have noticed some TODOs in the code  :-)

The latter category is more interesting.  A straight-forward approach would use the same custom resource implementation and encode the entire def: expression in the URI, but these kinds of expressions were intended by the OCL spec to be stored in some kind of file as an adjunct to the UML model.  I'm thinking that the persistence of these additional properties and operations should be managed by the client, but then I'm not sure how an href from a persisted constraint would look.

Have you any ideas on the matter?
Move to verified as per bug 206558.
Closing after over a year in verified state.
Closing after over a year in verified state.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="136779" />
    <CreationDate amount="2006-04-13 20:47:00 -0400" />
    <DupId amount="" />
    <classification amount="WebTools" />
    <Product amount="WTP Java EE Tools" />
    <component amount="jst.j2ee" />
    <Version amount="1.0.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="major" />
    <Summery>[refactoring] web.xml doesn't match file on disk after refactor-rename</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="7">
        <Lines>
          <Line>1. In a new workspace</Line>
          <Line>2. Create Web1 dynamic web project.</Line>
          <Line>3. Create Web2 dynamic web project.</Line>
          <Line>4. Delete Web1 (delete the contents as well).</Line>
          <Line>5. Right click on Web2 and choose Refactor-rename and choose name to be Web1</Line>
          <Line>6. Open web.xml in Eclipse</Line>
          <Line>7. Open web.xml from filesystem (in notepad or whatever)</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>1. In a new workspace
2. Create Web1 dynamic web project.
3. Create Web2 dynamic web project.
4. Delete Web1 (delete the contents as well).
5. Right click on Web2 and choose Refactor-rename and choose name to be Web1
6. Open web.xml in Eclipse
7. Open web.xml from filesystem (in notepad or whatever)

Result: Document in eclipse will have a display-name of Web1.  Document on filesystem will have a display-name of Web2

Restarting Eclipse will display the document as it is on disk.
Ted, please assess whether this is stop ship for 1.0.2 for you guys or not and update accordingly.  Also, Rob if this is not under your realm, feel free to shoot back.
I've taken an initial scan of this one and don't believe it is impacted by the current WTP refactoring logic so it would be good if you/Chuck could take a look.
note that a separate enhancement request would be to have the display-name react to the refactor.  But this bug is strictly that the document view doc gets out of sync with what's on disk.

This hasn't been raised as a 1.0.2 stop ship internally, but I can imagine the user getting into all kinds of trouble...  would be good to fix in 1.5
The "display-name" one is already in my queue: https://bugs.eclipse.org/bugs/show_bug.cgi?id=123432
The eclipse and file system are now in synch in WTP 1.5 RC2.  The display name refactoring to swith to project rename can be tracked by Rob's defect.
verified
Closing.</WithStack>
    <WithOutStack>1. In a new workspace
2. Create Web1 dynamic web project.
3. Create Web2 dynamic web project.
4. Delete Web1 (delete the contents as well).
5. Right click on Web2 and choose Refactor-rename and choose name to be Web1
6. Open web.xml in Eclipse
7. Open web.xml from filesystem (in notepad or whatever)

Result: Document in eclipse will have a display-name of Web1.  Document on filesystem will have a display-name of Web2

Restarting Eclipse will display the document as it is on disk.
Ted, please assess whether this is stop ship for 1.0.2 for you guys or not and update accordingly.  Also, Rob if this is not under your realm, feel free to shoot back.
I've taken an initial scan of this one and don't believe it is impacted by the current WTP refactoring logic so it would be good if you/Chuck could take a look.
note that a separate enhancement request would be to have the display-name react to the refactor.  But this bug is strictly that the document view doc gets out of sync with what's on disk.

This hasn't been raised as a 1.0.2 stop ship internally, but I can imagine the user getting into all kinds of trouble...  would be good to fix in 1.5
The "display-name" one is already in my queue: https://bugs.eclipse.org/bugs/show_bug.cgi?id=123432
The eclipse and file system are now in synch in WTP 1.5 RC2.  The display name refactoring to swith to project rename can be tracked by Rob's defect.
verified
Closing.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="136780" />
    <CreationDate amount="2006-04-13 21:03:00 -0400" />
    <DupId amount="" />
    <classification amount="WebTools" />
    <Product amount="WTP Java EE Tools" />
    <component amount="jst.j2ee" />
    <Version amount="1.0.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>[project creation] J2EE project wizards should not allow ear project name of same value</Summery>
    <Patches amount="0" />
    <Stacktraces amount="1">
      <Stacktrace timestamp="1437330716227">
        <Exception>java.lang.NullPointerException</Exception>
        <Reason />
        <Frames>
          <Frame depth="0">org.eclipse.jst.j2ee.application.internal.operations.AddComponentToEnterpriseApplicationOp.validateEditEAR(AddComponentToEnterpriseApplicationOp.java:419)</Frame>
          <Frame depth="1">org.eclipse.jst.j2ee.application.internal.operations.AddComponentToEnterpriseApplicationOp.execute(AddComponentToEnterpriseApplicationOp.java:79)</Frame>
          <Frame depth="2">org.eclipse.wst.common.frameworks.internal.datamodel.DataModelPausibleOperationImpl$1.run(DataModelPausibleOperationImpl.java:385)</Frame>
          <Frame depth="3">org.eclipse.core.internal.resources.Workspace.run(Workspace.java:2344)</Frame>
          <Frame depth="4">org.eclipse.wst.common.frameworks.internal.datamodel.DataModelPausibleOperationImpl.runOperation(DataModelPausibleOperationImpl.java:410)</Frame>
          <Frame depth="5">org.eclipse.wst.common.frameworks.internal.datamodel.DataModelPausibleOperationImpl.runOperation(DataModelPausibleOperationImpl.java:360)</Frame>
          <Frame depth="6">org.eclipse.wst.common.frameworks.internal.datamodel.DataModelPausibleOperationImpl.doExecute(DataModelPausibleOperationImpl.java:247)</Frame>
          <Frame depth="7">org.eclipse.wst.common.frameworks.internal.datamodel.DataModelPausibleOperationImpl.executeImpl(DataModelPausibleOperationImpl.java:219)</Frame>
          <Frame depth="8">org.eclipse.wst.common.frameworks.internal.datamodel.DataModelPausibleOperationImpl.cacheThreadAndContinue(DataModelPausibleOperationImpl.java:89)</Frame>
          <Frame depth="9">org.eclipse.wst.common.frameworks.internal.datamodel.DataModelPausibleOperationImpl.execute(DataModelPausibleOperationImpl.java:207)</Frame>
          <Frame depth="10">org.eclipse.jst.j2ee.project.facet.J2EEFacetInstallDelegate.addToEar(J2EEFacetInstallDelegate.java:173)</Frame>
          <Frame depth="11">org.eclipse.jst.j2ee.project.facet.J2EEFacetInstallDelegate.installAndAddModuletoEAR(J2EEFacetInstallDelegate.java:207)</Frame>
          <Frame depth="12">org.eclipse.jst.j2ee.web.project.facet.WebFacetPostInstallDelegate.execute(WebFacetPostInstallDelegate.java:53)</Frame>
          <Frame depth="13">org.eclipse.wst.common.project.facet.core.events.internal.LegacyEventHandlerAdapter.handleEvent(LegacyEventHandlerAdapter.java:69)</Frame>
          <Frame depth="14">org.eclipse.wst.common.project.facet.core.events.internal.ProjectListenerRegistry.notifyListeners(ProjectListenerRegistry.java:76)</Frame>
          <Frame depth="15">org.eclipse.wst.common.project.facet.core.internal.FacetedProject.notifyListeners(FacetedProject.java:1327)</Frame>
          <Frame depth="16">org.eclipse.wst.common.project.facet.core.internal.FacetedProject.modifyInternal(FacetedProject.java:454)</Frame>
          <Frame depth="17">org.eclipse.wst.common.project.facet.core.internal.FacetedProject.mergeChangesInternal(FacetedProject.java:1181)</Frame>
          <Frame depth="18">org.eclipse.wst.common.project.facet.core.internal.FacetedProject.access$2(FacetedProject.java:1117)</Frame>
          <Frame depth="19">org.eclipse.wst.common.project.facet.core.internal.FacetedProject$5.run(FacetedProject.java:1099)</Frame>
          <Frame depth="20">org.eclipse.core.internal.resources.Workspace.run(Workspace.java:2344)</Frame>
          <Frame depth="21">org.eclipse.wst.common.project.facet.core.internal.FacetedProject.mergeChanges(FacetedProject.java:1109)</Frame>
          <Frame depth="22">org.eclipse.wst.common.project.facet.core.internal.FacetedProjectWorkingCopy.commitChanges(FacetedProjectWorkingCopy.java:2020)</Frame>
          <Frame depth="23">org.eclipse.wst.common.project.facet.ui.ModifyFacetedProjectWizard.performFinish(ModifyFacetedProjectWizard.java:400)</Frame>
          <Frame depth="24">org.eclipse.wst.web.ui.internal.wizards.NewProjectDataModelFacetWizard.performFinish(NewProjectDataModelFacetWizard.java:282)</Frame>
          <Frame depth="25">org.eclipse.wst.common.project.facet.ui.ModifyFacetedProjectWizard$3.run(ModifyFacetedProjectWizard.java:331)</Frame>
          <Frame depth="26">org.eclipse.core.internal.resources.Workspace.run(Workspace.java:2344)</Frame>
          <Frame depth="27">org.eclipse.wst.common.project.facet.ui.ModifyFacetedProjectWizard$4.run(ModifyFacetedProjectWizard.java:345)</Frame>
          <Frame depth="28">org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:121)</Frame>
        </Frames>
      </Stacktrace>
    </Stacktraces>
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="4">
        <Lines>
          <Line>- New Dynamic Web Project (or EJB/Utility/ClientApp/Connector)</Line>
          <Line>- project name "aProject"</Line>
          <Line>- select Add project to an EAR</Line>
          <Line>- enter "aProject" as the EAR project name</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>- New Dynamic Web Project (or EJB/Utility/ClientApp/Connector)
- project name "aProject"
- select Add project to an EAR
- enter "aProject" as the EAR project name

Expect: error status "New EAR project name may not match this project's name."

(If you hit Finish, only the web project is created, and you get into a weird state where the phantom ear project will show up in the ear project dropdown.)
code dropped to cvs.
This is actually still a problem if running on a case insensitive machine (windows) and the project names are different in cases; e.g. aProject and aproject.
This is the exception that is thrown if you hit finish:

*** ERROR ***: Tue Sep 26 15:35:20 EDT 2006    org.eclipse.core.internal.resources.ResourceException: A resource exists with a different cas
e: /aProject.
        at org.eclipse.core.internal.resources.Resource.checkDoesNotExist(Resource.java:281)
        at org.eclipse.core.internal.resources.Project.create(Project.java:273)
        at org.eclipse.wst.common.project.facet.core.internal.ProjectFacetsManagerImpl.create(ProjectFacetsManagerImpl.java:536)
        at org.eclipse.wst.common.project.facet.core.ProjectFacetsManager.create(ProjectFacetsManager.java:412)
        at org.eclipse.jst.j2ee.project.facet.J2EEFacetInstallDelegate.installEARFacet(J2EEFacetInstallDelegate.java:67)
        at org.eclipse.jst.j2ee.project.facet.J2EEFacetInstallDelegate.installAndAddModuletoEAR(J2EEFacetInstallDelegate.java:132)
        at org.eclipse.jst.j2ee.web.project.facet.WebFacetPostInstallDelegate.execute(WebFacetPostInstallDelegate.java:51)
        at org.eclipse.wst.common.project.facet.core.internal.FacetedProject.callDelegate(FacetedProject.java:1218)
        at org.eclipse.wst.common.project.facet.core.internal.FacetedProject.callEventHandlers(FacetedProject.java:1166)
        at org.eclipse.wst.common.project.facet.core.internal.FacetedProject.modifyInternal(FacetedProject.java:380)
        at org.eclipse.wst.common.project.facet.core.internal.FacetedProject.access$2(FacetedProject.java:264)
        at org.eclipse.wst.common.project.facet.core.internal.FacetedProject$1.run(FacetedProject.java:249)
        at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1737)
        at org.eclipse.wst.common.project.facet.core.internal.FacetedProject.modify(FacetedProject.java:259)
        at org.eclipse.wst.common.project.facet.ui.AddRemoveFacetsWizard.performFinish(AddRemoveFacetsWizard.java:334)
        at org.eclipse.wst.web.ui.internal.wizards.NewProjectDataModelFacetWizard.performFinish(NewProjectDataModelFacetWizard.java:288)
        at org.eclipse.wst.common.project.facet.ui.AddRemoveFacetsWizard$2.run(AddRemoveFacetsWizard.java:260)
        at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1737)
        at org.eclipse.wst.common.project.facet.ui.AddRemoveFacetsWizard$3.run(AddRemoveFacetsWizard.java:274)
        at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:113)
I just tried this again.  Different exception is thrown:

!ENTRY org.eclipse.wst.common.frameworks 4 0 2011-05-23 12:40:42.750
!MESSAGE 
!STACK 0
java.lang.NullPointerException
	at org.eclipse.jst.j2ee.application.internal.operations.AddComponentToEnterpriseApplicationOp.validateEditEAR(AddComponentToEnterpriseApplicationOp.java:419)
	at org.eclipse.jst.j2ee.application.internal.operations.AddComponentToEnterpriseApplicationOp.execute(AddComponentToEnterpriseApplicationOp.java:79)
	at org.eclipse.wst.common.frameworks.internal.datamodel.DataModelPausibleOperationImpl$1.run(DataModelPausibleOperationImpl.java:385)
	at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:2344)
	at org.eclipse.wst.common.frameworks.internal.datamodel.DataModelPausibleOperationImpl.runOperation(DataModelPausibleOperationImpl.java:410)
	at org.eclipse.wst.common.frameworks.internal.datamodel.DataModelPausibleOperationImpl.runOperation(DataModelPausibleOperationImpl.java:360)
	at org.eclipse.wst.common.frameworks.internal.datamodel.DataModelPausibleOperationImpl.doExecute(DataModelPausibleOperationImpl.java:247)
	at org.eclipse.wst.common.frameworks.internal.datamodel.DataModelPausibleOperationImpl.executeImpl(DataModelPausibleOperationImpl.java:219)
	at org.eclipse.wst.common.frameworks.internal.datamodel.DataModelPausibleOperationImpl.cacheThreadAndContinue(DataModelPausibleOperationImpl.java:89)
	at org.eclipse.wst.common.frameworks.internal.datamodel.DataModelPausibleOperationImpl.execute(DataModelPausibleOperationImpl.java:207)
	at org.eclipse.jst.j2ee.project.facet.J2EEFacetInstallDelegate.addToEar(J2EEFacetInstallDelegate.java:173)
	at org.eclipse.jst.j2ee.project.facet.J2EEFacetInstallDelegate.installAndAddModuletoEAR(J2EEFacetInstallDelegate.java:207)
	at org.eclipse.jst.j2ee.web.project.facet.WebFacetPostInstallDelegate.execute(WebFacetPostInstallDelegate.java:53)
	at org.eclipse.wst.common.project.facet.core.events.internal.LegacyEventHandlerAdapter.handleEvent(LegacyEventHandlerAdapter.java:69)
	at org.eclipse.wst.common.project.facet.core.events.internal.ProjectListenerRegistry.notifyListeners(ProjectListenerRegistry.java:76)
	at org.eclipse.wst.common.project.facet.core.internal.FacetedProject.notifyListeners(FacetedProject.java:1327)
	at org.eclipse.wst.common.project.facet.core.internal.FacetedProject.modifyInternal(FacetedProject.java:454)
	at org.eclipse.wst.common.project.facet.core.internal.FacetedProject.mergeChangesInternal(FacetedProject.java:1181)
	at org.eclipse.wst.common.project.facet.core.internal.FacetedProject.access$2(FacetedProject.java:1117)
	at org.eclipse.wst.common.project.facet.core.internal.FacetedProject$5.run(FacetedProject.java:1099)
	at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:2344)
	at org.eclipse.wst.common.project.facet.core.internal.FacetedProject.mergeChanges(FacetedProject.java:1109)
	at org.eclipse.wst.common.project.facet.core.internal.FacetedProjectWorkingCopy.commitChanges(FacetedProjectWorkingCopy.java:2020)
	at org.eclipse.wst.common.project.facet.ui.ModifyFacetedProjectWizard.performFinish(ModifyFacetedProjectWizard.java:400)
	at org.eclipse.wst.web.ui.internal.wizards.NewProjectDataModelFacetWizard.performFinish(NewProjectDataModelFacetWizard.java:282)
	at org.eclipse.wst.common.project.facet.ui.ModifyFacetedProjectWizard$3.run(ModifyFacetedProjectWizard.java:331)
	at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:2344)
	at org.eclipse.wst.common.project.facet.ui.ModifyFacetedProjectWizard$4.run(ModifyFacetedProjectWizard.java:345)
	at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:121)
Created attachment 196470
Patch1

The proposed patch validates if the file system is case sensitive, and if is not, displays a new error message if the project name and EAR name are the same but with different case.
The patch was built using code from HEAD
approved
PMC Review requested due to UI change.

* Explain why you believe this is a stop-ship defect. Or, if it is a "hotbug" (requested by an adopter) please document it as such. 

Requested by an adopter. Submitting for PMC review because of UI change (a new string is added in the form of an error message) in maintenance release.

* Is there a work-around? If so, why do you believe the work-around is insufficient? 

The work-around would be using different names for EAR and project. But in this case, a user could use the same name with different case for both EAR and project, and this will work in some OS, but won't in others, and the wizard should prevent this. 

* How has the fix been tested? Is there a test case attached to the bugzilla record? Has a JUnit Test been added? 

Tested manually

* Give a brief technical overview. Who has reviewed this fix? 

The fix consists on checking of the file system is case sensitive, and if is
not, displays a new error message if the project name and EAR name are the same
but with different case.

Patch reviewed by Chuck Bridgham

* What is the risk associated with this fix?  

Low

Note: In comment # 6 I mentioned that the patch was built using code from HEAD. But this patch can also be applied to R3_2_maintenance for 3.2.5, so I plan to use the same patch for all levels: 3.2.5, 3.3.1 and 3.4.
Perhaps, the time for fixing this bug has come. Approved.
Code committed to R3_2_maintenance and HEAD for WTP 3.2.5, 3.3.1 and 3.4</WithStack>
    <WithOutStack>- New Dynamic Web Project (or EJB/Utility/ClientApp/Connector)
- project name "aProject"
- select Add project to an EAR
- enter "aProject" as the EAR project name

Expect: error status "New EAR project name may not match this project's name."

(If you hit Finish, only the web project is created, and you get into a weird state where the phantom ear project will show up in the ear project dropdown.)
code dropped to cvs.
This is actually still a problem if running on a case insensitive machine (windows) and the project names are different in cases; e.g. aProject and aproject.
This is the exception that is thrown if you hit finish:

*** ERROR ***: Tue Sep 26 15:35:20 EDT 2006    org.eclipse.core.internal.resources.ResourceException: A resource exists with a different cas
e: /aProject.
        at org.eclipse.core.internal.resources.Resource.checkDoesNotExist(Resource.java:281)
        at org.eclipse.core.internal.resources.Project.create(Project.java:273)
        at org.eclipse.wst.common.project.facet.core.internal.ProjectFacetsManagerImpl.create(ProjectFacetsManagerImpl.java:536)
        at org.eclipse.wst.common.project.facet.core.ProjectFacetsManager.create(ProjectFacetsManager.java:412)
        at org.eclipse.jst.j2ee.project.facet.J2EEFacetInstallDelegate.installEARFacet(J2EEFacetInstallDelegate.java:67)
        at org.eclipse.jst.j2ee.project.facet.J2EEFacetInstallDelegate.installAndAddModuletoEAR(J2EEFacetInstallDelegate.java:132)
        at org.eclipse.jst.j2ee.web.project.facet.WebFacetPostInstallDelegate.execute(WebFacetPostInstallDelegate.java:51)
        at org.eclipse.wst.common.project.facet.core.internal.FacetedProject.callDelegate(FacetedProject.java:1218)
        at org.eclipse.wst.common.project.facet.core.internal.FacetedProject.callEventHandlers(FacetedProject.java:1166)
        at org.eclipse.wst.common.project.facet.core.internal.FacetedProject.modifyInternal(FacetedProject.java:380)
        at org.eclipse.wst.common.project.facet.core.internal.FacetedProject.access$2(FacetedProject.java:264)
        at org.eclipse.wst.common.project.facet.core.internal.FacetedProject$1.run(FacetedProject.java:249)
        at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1737)
        at org.eclipse.wst.common.project.facet.core.internal.FacetedProject.modify(FacetedProject.java:259)
        at org.eclipse.wst.common.project.facet.ui.AddRemoveFacetsWizard.performFinish(AddRemoveFacetsWizard.java:334)
        at org.eclipse.wst.web.ui.internal.wizards.NewProjectDataModelFacetWizard.performFinish(NewProjectDataModelFacetWizard.java:288)
        at org.eclipse.wst.common.project.facet.ui.AddRemoveFacetsWizard$2.run(AddRemoveFacetsWizard.java:260)
        at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1737)
        at org.eclipse.wst.common.project.facet.ui.AddRemoveFacetsWizard$3.run(AddRemoveFacetsWizard.java:274)
        at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:113)
I just tried this again.  Different exception is thrown:

!ENTRY org.eclipse.wst.common.frameworks 4 0 2011-05-23 12:40:42.750
!MESSAGE 
!STACK 0

Created attachment 196470
Patch1

The proposed patch validates if the file system is case sensitive, and if is not, displays a new error message if the project name and EAR name are the same but with different case.
The patch was built using code from HEAD
approved
PMC Review requested due to UI change.

* Explain why you believe this is a stop-ship defect. Or, if it is a "hotbug" (requested by an adopter) please document it as such. 

Requested by an adopter. Submitting for PMC review because of UI change (a new string is added in the form of an error message) in maintenance release.

* Is there a work-around? If so, why do you believe the work-around is insufficient? 

The work-around would be using different names for EAR and project. But in this case, a user could use the same name with different case for both EAR and project, and this will work in some OS, but won't in others, and the wizard should prevent this. 

* How has the fix been tested? Is there a test case attached to the bugzilla record? Has a JUnit Test been added? 

Tested manually

* Give a brief technical overview. Who has reviewed this fix? 

The fix consists on checking of the file system is case sensitive, and if is
not, displays a new error message if the project name and EAR name are the same
but with different case.

Patch reviewed by Chuck Bridgham

* What is the risk associated with this fix?  

Low

Note: In comment # 6 I mentioned that the patch was built using code from HEAD. But this patch can also be applied to R3_2_maintenance for 3.2.5, so I plan to use the same patch for all levels: 3.2.5, 3.3.1 and 3.4.
Perhaps, the time for fixing this bug has come. Approved.
Code committed to R3_2_maintenance and HEAD for WTP 3.2.5, 3.3.1 and 3.4</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="136781" />
    <CreationDate amount="2006-04-13 21:20:00 -0400" />
    <DupId amount="" />
    <classification amount="WebTools" />
    <Product amount="WTP Common Tools" />
    <component amount="wst.validation" />
    <Version amount="1.5" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="enhancement" />
    <Summery>[arch] Some "near API" use too many "magic strings"</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="WONTFIX" />
    <WithStack>This is an "outgrowth" of bug 136733 and bug 136684. 

There's some of our WTP API that uses "magic strings" to signal what function to execute, what value to return, etc. 

I suspect this one done once upon a time to reduce dependancies between plugins. While that's a noble goal, it is also more error prone that using Java constants. 

I'm opening this "enhancement request" as a reminder to review (and minimize) such "hidden API" and use constants or enumeration in the future.
I suspect that with the move to the new validation framework this enhancement is now obsolete.</WithStack>
    <WithOutStack>This is an "outgrowth" of bug 136733 and bug 136684. 

There's some of our WTP API that uses "magic strings" to signal what function to execute, what value to return, etc. 

I suspect this one done once upon a time to reduce dependancies between plugins. While that's a noble goal, it is also more error prone that using Java constants. 

I'm opening this "enhancement request" as a reminder to review (and minimize) such "hidden API" and use constants or enumeration in the future.
I suspect that with the move to the new validation framework this enhancement is now obsolete.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="136782" />
    <CreationDate amount="2006-04-13 21:58:00 -0400" />
    <DupId amount="" />
    <classification amount="WebTools" />
    <Product amount="WTP EJB Tools" />
    <component amount="jst.ejb" />
    <Version amount="1.5" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="blocker" />
    <Summery>[data models] Create xdoclet session bean fails</Summery>
    <Patches amount="0" />
    <Stacktraces amount="1">
      <Stacktrace timestamp="1437330716227">
        <Exception>java.lang.IllegalArgumentException</Exception>
        <Reason>:</Reason>
        <Frames>
          <Frame depth="0">org.eclipse.core.runtime.Assert.isLegal(Assert.java(Inlined CompiledCode))</Frame>
          <Frame depth="1">org.eclipse.core.runtime.Assert.isLegal(Assert.java(Compiled Code))</Frame>
          <Frame depth="2">org.eclipse.core.runtime.Status.setMessage(Status.java:175)</Frame>
          <Frame depth="3">org.eclipse.core.runtime.Status.&lt;init&gt;(Status.java:82)</Frame>
          <Frame depth="4">org.eclipse.wst.common.frameworks.internal.datamodel.ui.DataModelWizard.runOperations(DataModelWizard.java:207)</Frame>
          <Frame depth="5">org.eclipse.wst.common.frameworks.internal.datamodel.ui.DataModelWizard.performFinish(DataModelWizard.java:173)</Frame>
          <Frame depth="6">org.eclipse.jface.wizard.WizardDialog.finishPressed(WizardDialog.java:680)</Frame>
          <Frame depth="7">org.eclipse.jface.wizard.WizardDialog.buttonPressed(WizardDialog.java:355)</Frame>
          <Frame depth="8">org.eclipse.jface.dialogs.Dialog$3.widgetSelected(Dialog.java:652)</Frame>
          <Frame depth="9">org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:90)</Frame>
          <Frame depth="10">org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java(Compiled Code))</Frame>
          <Frame depth="11">org.eclipse.swt.widgets.Widget.sendEvent(Widget.java(Inlined Compiled Code))</Frame>
          <Frame depth="12">org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java(Compiled Code))</Frame>
          <Frame depth="13">org.eclipse.swt.widgets.Display.readAndDispatch(Display.java(Compiled Code))</Frame>
          <Frame depth="14">org.eclipse.jface.window.Window.runEventLoop(Window.java(Compiled Code))</Frame>
          <Frame depth="15">org.eclipse.jface.window.Window.open(Window.java:796)</Frame>
          <Frame depth="16">org.eclipse.ui.internal.navigator.wizards.WizardShortcutAction.run(WizardShortcutAction.java:94)</Frame>
          <Frame depth="17">org.eclipse.jface.action.Action.runWithEvent(Action.java:499)</Frame>
          <Frame depth="18">org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection(ActionContributionItem.java:539)</Frame>
          <Frame depth="19">org.eclipse.jface.action.ActionContributionItem.access$2(ActionContributionItem.java:488)</Frame>
          <Frame depth="20">org.eclipse.jface.action.ActionContributionItem$5.handleEvent(ActionContributionItem.java:400)</Frame>
          <Frame depth="21">org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java(Compiled Code))</Frame>
          <Frame depth="22">org.eclipse.swt.widgets.Widget.sendEvent(Widget.java(Inlined Compiled Code))</Frame>
          <Frame depth="23">org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java(Compiled Code))</Frame>
          <Frame depth="24">org.eclipse.swt.widgets.Display.readAndDispatch(Display.java(Compiled Code))</Frame>
          <Frame depth="25">org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java(Compiled Code))</Frame>
          <Frame depth="26">org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1878)</Frame>
          <Frame depth="27">org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:419)</Frame>
          <Frame depth="28">org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:143)</Frame>
          <Frame depth="29">org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:95)</Frame>
          <Frame depth="30">org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:78)</Frame>
          <Frame depth="31">org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:92)</Frame>
          <Frame depth="32">org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:68)</Frame>
          <Frame depth="33">org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:376)</Frame>
          <Frame depth="34">org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:169)</Frame>
          <Frame depth="35">sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)</Frame>
          <Frame depth="36">sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:85)</Frame>
          <Frame depth="37">sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:58)</Frame>
          <Frame depth="38">sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:60)</Frame>
          <Frame depth="39">java.lang.reflect.Method.invoke(Method.java:391)</Frame>
          <Frame depth="40">org.eclipse.core.launcher.Main.invokeFramework(Main.java:336)</Frame>
          <Frame depth="41">org.eclipse.core.launcher.Main.basicRun(Main.java:280)</Frame>
          <Frame depth="42">org.eclipse.core.launcher.Main.run(Main.java:977)</Frame>
          <Frame depth="43">org.eclipse.core.launcher.Main.main(Main.java:952)</Frame>
        </Frames>
      </Stacktrace>
    </Stacktraces>
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>Try and create an xdoclet session bean in 1.4 EJB with jonas server.
The wizard fails with exception:

!ENTRY org.eclipse.wst.common.frameworks.ui 4 0 2006-04-13 21:44:10.560
!MESSAGE
!STACK 0
java.lang.IllegalArgumentException:
        at org.eclipse.core.runtime.Assert.isLegal(Assert.java(Inlined Compiled
Code))
        at org.eclipse.core.runtime.Assert.isLegal(Assert.java(Compiled Code))
        at org.eclipse.core.runtime.Status.setMessage(Status.java:175)
        at org.eclipse.core.runtime.Status.&lt;init&gt;(Status.java:82)
        at org.eclipse.wst.common.frameworks.internal.datamodel.ui.DataModelWiza
rd.runOperations(DataModelWizard.java:207)
        at org.eclipse.wst.common.frameworks.internal.datamodel.ui.DataModelWiza
rd.performFinish(DataModelWizard.java:173)
        at org.eclipse.jface.wizard.WizardDialog.finishPressed(WizardDialog.java
:680)
        at org.eclipse.jface.wizard.WizardDialog.buttonPressed(WizardDialog.java
:355)
        at org.eclipse.jface.dialogs.Dialog$3.widgetSelected(Dialog.java:652)
        at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:
90)
        at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java(Compiled
 Code))
        at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java(Inlined Compiled
 Code))
        at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java(Compil
ed Code))
        at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java(Compiled
 Code))
        at org.eclipse.jface.window.Window.runEventLoop(Window.java(Compiled Cod
e))
        at org.eclipse.jface.window.Window.open(Window.java:796)
        at org.eclipse.ui.internal.navigator.wizards.WizardShortcutAction.run(Wi
zardShortcutAction.java:94)
        at org.eclipse.jface.action.Action.runWithEvent(Action.java:499)
        at org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection
(ActionContributionItem.java:539)
        at org.eclipse.jface.action.ActionContributionItem.access$2(ActionContri
butionItem.java:488)
        at org.eclipse.jface.action.ActionContributionItem$5.handleEvent(ActionC
ontributionItem.java:400)
        at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java(Compiled
 Code))
        at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java(Inlined Compiled
 Code))
        at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java(Compil
ed Code))
        at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java(Compiled
 Code))
        at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java(Compile
d Code))
        at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1878)
        at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.jav
a:419)
        at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:143)
        at org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:95
)
        at org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformAct
ivator.java:78)
        at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runAppli
cation(EclipseAppLauncher.java:92)
        at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(Ec
lipseAppLauncher.java:68)
        at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.ja
va:376)
        at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.ja
va:169)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.
java:85)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.
java:58)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces
sorImpl.java:60)
        at java.lang.reflect.Method.invoke(Method.java:391)
        at org.eclipse.core.launcher.Main.invokeFramework(Main.java:336)
        at org.eclipse.core.launcher.Main.basicRun(Main.java:280)
        at org.eclipse.core.launcher.Main.run(Main.java:977)
        at org.eclipse.core.launcher.Main.main(Main.java:952)
This is released to head and tagged for a respin of M6
Verified on 061606</WithStack>
    <WithOutStack>Try and create an xdoclet session bean in 1.4 EJB with jonas server.
The wizard fails with exception:

!ENTRY org.eclipse.wst.common.frameworks.ui 4 0 2006-04-13 21:44:10.560
!MESSAGE
!STACK 0

This is released to head and tagged for a respin of M6
Verified on 061606</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="136783" />
    <CreationDate amount="2006-04-13 22:36:00 -0400" />
    <DupId amount="" />
    <classification amount="BIRT" />
    <Product amount="BIRT" />
    <component amount="Data" />
    <Version amount="unspecified" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P2" />
    <bug_severity amount="major" />
    <Summery>Image get from DB in old report cannot display when preview</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="INVALID" />
    <WithStack>Description:
Image get from DB in old report cannot display when preview

Steps to reproduce:
1. Open attached blob.xml file and preview

Expected result:
Image shows.

Actual result:
No images.
Created attachment 38572
blob.xml
The data in data source is already corrupted.
cancel</WithStack>
    <WithOutStack>Description:
Image get from DB in old report cannot display when preview

Steps to reproduce:
1. Open attached blob.xml file and preview

Expected result:
Image shows.

Actual result:
No images.
Created attachment 38572
blob.xml
The data in data source is already corrupted.
cancel</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="136784" />
    <CreationDate amount="2006-04-13 22:48:00 -0400" />
    <DupId amount="" />
    <classification amount="BIRT" />
    <Product amount="BIRT" />
    <component amount="Report Engine" />
    <Version amount="unspecified" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P2" />
    <bug_severity amount="major" />
    <Summery>Export data from old report will return incorrect data.</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="3">
        <Lines>
          <Line>1. Open attached report.</Line>
          <Line>2. Preview in Web Viewer and export data</Line>
          <Line>3. Select all columns listed and export them.</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>Description:
Export data from old report will return incorrect data.

Steps to reproduce:
1. Open attached report.
2. Preview in Web Viewer and export data
3. Select all columns listed and export them.

Result:
Data in exported cvs file are incorrect
1. Several blank column.
2. Data in table header which are not retrieved from DB are exported.
Created attachment 38573
Global Post Room and Tax.rptdesign
The old report use the expressions row[""]. When we use the current BIRT open the old report design file, the new expressions dataSetRow[""] are added automatically. But the old expressions row[""] are not deleted. So the report contain both old binding columns and new binding columns.
Synch up with Callisto schedule to rename RC1 as RC2 targeted 5/5/2006.
Change the backward compaitiblity implementation to avoid duplicate bound data columns for the obsolete Data.valueExpr property.

Finished parts in Model. Reassign.
I have test it in 2006.4.18.
This bug has been fixed.
Verified in build 20060420</WithStack>
    <WithOutStack>Description:
Export data from old report will return incorrect data.

Steps to reproduce:
1. Open attached report.
2. Preview in Web Viewer and export data
3. Select all columns listed and export them.

Result:
Data in exported cvs file are incorrect
1. Several blank column.
2. Data in table header which are not retrieved from DB are exported.
Created attachment 38573
Global Post Room and Tax.rptdesign
The old report use the expressions row[""]. When we use the current BIRT open the old report design file, the new expressions dataSetRow[""] are added automatically. But the old expressions row[""] are not deleted. So the report contain both old binding columns and new binding columns.
Synch up with Callisto schedule to rename RC1 as RC2 targeted 5/5/2006.
Change the backward compaitiblity implementation to avoid duplicate bound data columns for the obsolete Data.valueExpr property.

Finished parts in Model. Reassign.
I have test it in 2006.4.18.
This bug has been fixed.
Verified in build 20060420</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="136785" />
    <CreationDate amount="2006-04-13 22:56:00 -0400" />
    <DupId amount="" />
    <classification amount="BIRT" />
    <Product amount="BIRT" />
    <component amount="Report Viewer" />
    <Version amount="unspecified" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P2" />
    <bug_severity amount="normal" />
    <Summery>the progress bar should stop moving when rendering is completed</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="5">
        <Lines>
          <Line>- create a report</Line>
          <Line>- add a data source</Line>
          <Line>- add a data set using the source</Line>
          <Line>- create a table</Line>
          <Line>- preview report</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>steps to reproduce:

   - create a report
   - add a data source
   - add a data set using the source
   - create a table
   - preview report

expected behavior:

   - the progress bar should stop moving when rendering is completed

actual behavior:

   - it simply didn't
Can we show the progress bar in the browser instead of on the desktop designer?


I observed this behavior too. There is a slight difference in fact. When you preview a report for the first time, the progress bar does stop moving. The second and subsequent times that you preview the same report, then the progress bar does not stop. When you preview a different report for the first time, the progress bar stops, but when you preview it again, then the progress bar does not stop.

So, the first time you preview any report the progress bar works, but previewing any report for a second and subsequent times, the progress bar does not stop. 
Synch up with Callisto schedule to rename RC1 as RC2 targeted 5/5/2006.
*** Bug 137112 has been marked as a duplicate of this bug. ***
The viewer will use native page to show the progress bar.
viewer just replace the parameter request page, that is not related to the native parameter.

The viewer progress bar is called by the ajax server, it is difficult to show it within designer preview. 


We can investigate to use the "/preview" to instead of "/run" when user preview the report within designer. The progress bar can be shown.
need to remove the desktop progress bar once viewer's HTML based progress bar is added.  if the HTML progress bar is not added yet, please at least remove the desktop progress bar in RC2, and then add the ajax based progress bar in RC3.
Because using Ajax action handle to retrieve page will cause other issues, here use the UI progress bar yet. Add the new listener to catch the event of loading complete.
Verified, 20060515</WithStack>
    <WithOutStack>steps to reproduce:

   - create a report
   - add a data source
   - add a data set using the source
   - create a table
   - preview report

expected behavior:

   - the progress bar should stop moving when rendering is completed

actual behavior:

   - it simply didn't
Can we show the progress bar in the browser instead of on the desktop designer?


I observed this behavior too. There is a slight difference in fact. When you preview a report for the first time, the progress bar does stop moving. The second and subsequent times that you preview the same report, then the progress bar does not stop. When you preview a different report for the first time, the progress bar stops, but when you preview it again, then the progress bar does not stop.

So, the first time you preview any report the progress bar works, but previewing any report for a second and subsequent times, the progress bar does not stop. 
Synch up with Callisto schedule to rename RC1 as RC2 targeted 5/5/2006.
*** Bug 137112 has been marked as a duplicate of this bug. ***
The viewer will use native page to show the progress bar.
viewer just replace the parameter request page, that is not related to the native parameter.

The viewer progress bar is called by the ajax server, it is difficult to show it within designer preview. 


We can investigate to use the "/preview" to instead of "/run" when user preview the report within designer. The progress bar can be shown.
need to remove the desktop progress bar once viewer's HTML based progress bar is added.  if the HTML progress bar is not added yet, please at least remove the desktop progress bar in RC2, and then add the ajax based progress bar in RC3.
Because using Ajax action handle to retrieve page will cause other issues, here use the UI progress bar yet. Add the new listener to catch the event of loading complete.
Verified, 20060515</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="136786" />
    <CreationDate amount="2006-04-13 23:00:00 -0400" />
    <DupId amount="" />
    <classification amount="BIRT" />
    <Product amount="BIRT" />
    <component amount="Report Engine" />
    <Version amount="unspecified" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="major" />
    <Summery>Data in old report cannot be exported.</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="1">
      <source_code type="functioncall">
        <location start="165" end="199" />
        <code>ReportEngineService.getMetaData();</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="1">
      <Enumeration lines="2">
        <Lines>
          <Line>1. Preview attached report in Web Viewer.</Line>
          <Line>2. Click Export Data button</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>Description:
Data in old report cannot be exported.

Steps to reproduce:
1. Preview attached report in Web Viewer.
2. Click Export Data button

Result:
Exception in
ReportEngineService.getMetaData();
Created attachment 38574
TransactionReport.rptdesign
fixed
*** Bug 136948 has been marked as a duplicate of this bug. ***
verified in build 20060420</WithStack>
    <WithOutStack>Description:
Data in old report cannot be exported.

Steps to reproduce:
1. Preview attached report in Web Viewer.
2. Click Export Data button

Result:
Exception in
ReportEngineService.getMetaData();
Created attachment 38574
TransactionReport.rptdesign
fixed
*** Bug 136948 has been marked as a duplicate of this bug. ***
verified in build 20060420</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="136787" />
    <CreationDate amount="2006-04-13 23:01:00 -0400" />
    <DupId amount="" />
    <classification amount="WebTools" />
    <Product amount="WTP Source Editing" />
    <component amount="wst.xsd" />
    <Version amount="1.0.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Content assist for type attribute values is inconsistent.</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="WORKSFORME" />
    <WithStack>In the XSD source editor, there is content assist for the values of the type attribute on the &lt;element&gt; element, and probably elsewhere. However it is inconsistent with the way content assist works in other contexts.

suppose the cursor is like: &lt;element name="person" type="|"/&gt; where | indicates the cursor. Hit Cntl+Space to get suggestions. Good so far. But as you type the list dissappears rather than narrows the suggestions that match the value so far.

Note that you can enter part of the value first then hit Cntl+Space to get matching suggestions.
Lawrence - pls track as a UI consistency bug. Thx.
I'm not sure if this is an XSD specific problem or a general XML content assist problem with attribute values.  Keith can you investigate?
Not sure if this has been magically fixed or if I'm just missing some key ingredient in order to reproduce it.  From my testing it works fine and exactly as you've described that you're expecting.

Can you please confirm that this is indeed fixed?
Verified on wtp-sdk-M-1.5.1-200609150551.zip
This is part of a mass update to close out all stale WTP defects already verified by the reporter but awaiting closure by the assignee.  If you feel this defect was closed inappropriately, please reopen.

Thanks, John Lanuti</WithStack>
    <WithOutStack>In the XSD source editor, there is content assist for the values of the type attribute on the &lt;element&gt; element, and probably elsewhere. However it is inconsistent with the way content assist works in other contexts.

suppose the cursor is like: &lt;element name="person" type="|"/&gt; where | indicates the cursor. Hit Cntl+Space to get suggestions. Good so far. But as you type the list dissappears rather than narrows the suggestions that match the value so far.

Note that you can enter part of the value first then hit Cntl+Space to get matching suggestions.
Lawrence - pls track as a UI consistency bug. Thx.
I'm not sure if this is an XSD specific problem or a general XML content assist problem with attribute values.  Keith can you investigate?
Not sure if this has been magically fixed or if I'm just missing some key ingredient in order to reproduce it.  From my testing it works fine and exactly as you've described that you're expecting.

Can you please confirm that this is indeed fixed?
Verified on wtp-sdk-M-1.5.1-200609150551.zip
This is part of a mass update to close out all stale WTP defects already verified by the reporter but awaiting closure by the assignee.  If you feel this defect was closed inappropriately, please reopen.

Thanks, John Lanuti</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="136788" />
    <CreationDate amount="2006-04-13 23:19:00 -0400" />
    <DupId amount="" />
    <classification amount="BIRT" />
    <Product amount="BIRT" />
    <component amount="Report Engine" />
    <Version amount="unspecified" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="major" />
    <Summery>ArrayIndexOutOfBound when view attached old report document in Web Viewer</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="WONTFIX" />
    <WithStack>Description:
ArrayIndexOutOfBound when view attached old report document in Web Viewer

Steps to reproduce:
1. view attached old report document in Web Viewer

Result:
See attached snap shot.
Created attachment 38576
report document
Created attachment 38578
error msg.
Engine PageHintReaderV1 :: getPageHint() throw out the exception.
I think we need keep the backward compatability for report document. If so we can close this SCR directly.
It is quite troublesome to fix this bug, and we have agreed to not support backward compatibility for BIRT report documents generated before. 
We can close this bug in the current stage. 

If Engine decide to support the compatibility for report document in some later release, please let us know and we can continue this part of test in our test suite.
ok</WithStack>
    <WithOutStack>Description:
ArrayIndexOutOfBound when view attached old report document in Web Viewer

Steps to reproduce:
1. view attached old report document in Web Viewer

Result:
See attached snap shot.
Created attachment 38576
report document
Created attachment 38578
error msg.
Engine PageHintReaderV1 :: getPageHint() throw out the exception.
I think we need keep the backward compatability for report document. If so we can close this SCR directly.
It is quite troublesome to fix this bug, and we have agreed to not support backward compatibility for BIRT report documents generated before. 
We can close this bug in the current stage. 

If Engine decide to support the compatibility for report document in some later release, please let us know and we can continue this part of test in our test suite.
ok</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="136789" />
    <CreationDate amount="2006-04-13 23:24:00 -0400" />
    <DupId amount="" />
    <classification amount="BIRT" />
    <Product amount="BIRT" />
    <component amount="Report Designer" />
    <Version amount="unspecified" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P2" />
    <bug_severity amount="enhancement" />
    <Summery>Data binding enhancement</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="3">
        <Lines>
          <Line>1.When drag a single data set column from data explorer to the layout, the data column binding has been added to the data automatically. This is good for such case</Line>
          <Line>2.When drag a single data set column from data explorer to a table detail and preview. Unfortunately, the result is not what the user want. What we should do is to add data columning binding to the table and remove the data column binding on the data. Could you please improve data binding feature to make this case done easier?</Line>
          <Line>Is it correct that when user drag a data report item to table detail row layout already try to create the result set column in the container's binding?</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>1.When drag a single data set column from data explorer to the layout, the data column binding has been added to the data automatically. This is good for such case
2.When drag a single data set column from data explorer to a table detail and preview. Unfortunately, the result is not what the user want. What we should do is to add data columning binding to the table and remove the data column binding on the data. Could you please improve data binding feature to make this case done easier?
Is it correct that when user drag a data report item to table detail row layout already try to create the result set column in the container's binding?

Is this about DnD to the outline view?

This bug seems has been fixed. Please change status and I'll close it.
See comments#2
Verified on build 20060421</WithStack>
    <WithOutStack>1.When drag a single data set column from data explorer to the layout, the data column binding has been added to the data automatically. This is good for such case
2.When drag a single data set column from data explorer to a table detail and preview. Unfortunately, the result is not what the user want. What we should do is to add data columning binding to the table and remove the data column binding on the data. Could you please improve data binding feature to make this case done easier?
Is it correct that when user drag a data report item to table detail row layout already try to create the result set column in the container's binding?

Is this about DnD to the outline view?

This bug seems has been fixed. Please change status and I'll close it.
See comments#2
Verified on build 20060421</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="136790" />
    <CreationDate amount="2006-04-13 23:28:00 -0400" />
    <DupId amount="" />
    <classification amount="BIRT" />
    <Product amount="BIRT" />
    <component amount="Report Designer" />
    <Version amount="2.0.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Linux" />
    <priority amount="P1" />
    <bug_severity amount="major" />
    <Summery>[Linux-AS]Contain of botton is appear fragmentary</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="2">
        <Lines>
          <Line>1.In user properties, Add and Delete button is appear fragmentary.</Line>
          <Line>2.In Named Expressions/ Map/ Hinglight/ Filters are also exist this bug.</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>Details:
[Linux-AS]Contain of botton is appear fragmentary

Actual result:
1.In user properties, Add and Delete button is appear fragmentary.
2.In Named Expressions/ Map/ Hinglight/ Filters are also exist this bug.

Please look at the attached image.
Created attachment 38639
Screenshot.png
Because we set height to the buttons so that the aspect wil look pretty, but it will cause this bug, and it works well in other OS.
Now, I remove the code setting the height, and this problem can disappear, but the aspect may not look pretty as before.
Verified on 20060517</WithStack>
    <WithOutStack>Details:
[Linux-AS]Contain of botton is appear fragmentary

Actual result:
1.In user properties, Add and Delete button is appear fragmentary.
2.In Named Expressions/ Map/ Hinglight/ Filters are also exist this bug.

Please look at the attached image.
Created attachment 38639
Screenshot.png
Because we set height to the buttons so that the aspect wil look pretty, but it will cause this bug, and it works well in other OS.
Now, I remove the code setting the height, and this problem can disappear, but the aspect may not look pretty as before.
Verified on 20060517</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="136791" />
    <CreationDate amount="2006-04-14 00:05:00 -0400" />
    <DupId amount="" />
    <classification amount="BIRT" />
    <Product amount="BIRT" />
    <component amount="Report Engine" />
    <Version amount="unspecified" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="major" />
    <Summery>Localization didn't work in Web Viewer</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="2">
      <Enumeration lines="4">
        <Lines>
          <Line>1.New a report, add a resource file "a.properties"</Line>
          <Line>2.Add a label with content "aaa"</Line>
          <Line>3.Add key"a" and value "bbb" to the label localization</Line>
          <Line>4.Preview in Web Viewer</Line>
        </Lines>
      </Enumeration>
      <Enumeration lines="4">
        <Lines>
          <Line>1. create the resource file with "a=bbb".</Line>
          <Line>2. set the resource file to the report.</Line>
          <Line>3. create the label, add "a".</Line>
          <Line>4. In the property editor, go to Localization item, select the resource key builder. Set the externalize string in the resource file for the label.</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>Steps to reproduce:
1.New a report, add a resource file "a.properties"
2.Add a label with content "aaa"
3.Add key"a" and value "bbb" to the label localization
4.Preview in Web Viewer

Expected result:
"bbb" display in preview

Actual result:
Nothing display
Step to set the externalize string:
1. create the resource file with "a=bbb".
2. set the resource file to the report.
3. create the label, add "a".
4. In the property editor, go to Localization item, select the resource key builder. Set the externalize string in the resource file for the label.

The label will display "bbb" after you do the correct operation.
Synch up with Callisto schedule to rename RC1 as RC2 targeted 5/5/2006.
When serialize the report, the external string will be saved into the report and the resource key will be clear.

I test label, there is no problem to preview it by preview, web viewer, html and pdf. But for TextItem, it can be previewed with preview, html and pdf. Just for web viewer, the external string for text item can not be displayed. I check the serialized design file and generated document, the content value is correctly set. So, reassign to Engine to investigate whether this is the same problem with Image.
It's the same problem as image problem. When preview in web viewer, the resource file cann't be found because the document is in a temp folder, which is created by viewer and doesn't contain the resource file.
The external resource does not need to be allocated to generate the document. All external string is stored in report when serialize design. Pleaes look at the case by label. The Label can be previewed correctly, but text item can not. There might be something cached by engine.
After 137426 is fixed, we need verify if this bug is fixed also.
Fixed.
Verified on build 20060429</WithStack>
    <WithOutStack>Steps to reproduce:
1.New a report, add a resource file "a.properties"
2.Add a label with content "aaa"
3.Add key"a" and value "bbb" to the label localization
4.Preview in Web Viewer

Expected result:
"bbb" display in preview

Actual result:
Nothing display
Step to set the externalize string:
1. create the resource file with "a=bbb".
2. set the resource file to the report.
3. create the label, add "a".
4. In the property editor, go to Localization item, select the resource key builder. Set the externalize string in the resource file for the label.

The label will display "bbb" after you do the correct operation.
Synch up with Callisto schedule to rename RC1 as RC2 targeted 5/5/2006.
When serialize the report, the external string will be saved into the report and the resource key will be clear.

I test label, there is no problem to preview it by preview, web viewer, html and pdf. But for TextItem, it can be previewed with preview, html and pdf. Just for web viewer, the external string for text item can not be displayed. I check the serialized design file and generated document, the content value is correctly set. So, reassign to Engine to investigate whether this is the same problem with Image.
It's the same problem as image problem. When preview in web viewer, the resource file cann't be found because the document is in a temp folder, which is created by viewer and doesn't contain the resource file.
The external resource does not need to be allocated to generate the document. All external string is stored in report when serialize design. Pleaes look at the case by label. The Label can be previewed correctly, but text item can not. There might be something cached by engine.
After 137426 is fixed, we need verify if this bug is fixed also.
Fixed.
Verified on build 20060429</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="136792" />
    <CreationDate amount="2006-04-14 00:13:00 -0400" />
    <DupId amount="" />
    <classification amount="BIRT" />
    <Product amount="BIRT" />
    <component amount="Report Viewer" />
    <Version amount="2.0.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Preview a deisgn file in web viewer, NPE will thrown out.</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="2">
        <Lines>
          <Line>1.Import a design file(attached)</Line>
          <Line>2.Preview in web view</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="CLOSED" />
    <resolution amount="WONTFIX" />
    <WithStack>Preview a deisgn file in web viewer, NPE will thrown out.

Steps:
1.Import a design file(attached)
2.Preview in web view

Actual Resutls:
1.NPE will thrown out, but preview in html, pdf, correctly.

Expected Results:
1.Work well.
Created attachment 38579
report design file
can not reproduce.
Verified</WithStack>
    <WithOutStack>Preview a deisgn file in web viewer, NPE will thrown out.

Steps:
1.Import a design file(attached)
2.Preview in web view

Actual Resutls:
1.NPE will thrown out, but preview in html, pdf, correctly.

Expected Results:
1.Work well.
Created attachment 38579
report design file
can not reproduce.
Verified</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="136793" />
    <CreationDate amount="2006-04-14 00:52:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="JDT" />
    <component amount="UI" />
    <Version amount="3.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Linux" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>NPE on "Pull Up"</Summery>
    <Patches amount="0" />
    <Stacktraces amount="3">
      <Stacktrace timestamp="1437330716242">
        <Exception>java.lang.reflect.InvocationTargetException</Exception>
        <Reason />
        <Frames>
          <Frame depth="0">org.eclipse.jface.operation.ModalContext.run(ModalContext.java:350)</Frame>
          <Frame depth="1">org.eclipse.jface.wizard.WizardDialog.run(WizardDialog.java:851)</Frame>
          <Frame depth="2">org.eclipse.ltk.ui.refactoring.RefactoringWizard.createChange(RefactoringWizard.java:571)</Frame>
          <Frame depth="3">org.eclipse.ltk.ui.refactoring.RefactoringWizard.computeUserInputSuccessorPage(RefactoringWizard.java:414)</Frame>
          <Frame depth="4">org.eclipse.ltk.ui.refactoring.UserInputWizardPage.computeSuccessorPage(UserInputWizardPage.java:75)</Frame>
          <Frame depth="5">org.eclipse.jdt.internal.ui.refactoring.PullUpMemberPage.getNextPage(PullUpMemberPage.java:809)</Frame>
          <Frame depth="6">org.eclipse.jface.wizard.WizardDialog.nextPressed(WizardDialog.java:751)</Frame>
          <Frame depth="7">org.eclipse.jface.wizard.WizardDialog.buttonPressed(WizardDialog.java:351)</Frame>
          <Frame depth="8">org.eclipse.jface.dialogs.Dialog$3.widgetSelected(Dialog.java:652)</Frame>
          <Frame depth="9">org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:90)</Frame>
          <Frame depth="10">org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)</Frame>
          <Frame depth="11">org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1074)</Frame>
          <Frame depth="12">org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3158)</Frame>
          <Frame depth="13">org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2838)</Frame>
          <Frame depth="14">org.eclipse.jface.window.Window.runEventLoop(Window.java:820)</Frame>
          <Frame depth="15">org.eclipse.jface.window.Window.open(Window.java:796)</Frame>
          <Frame depth="16">org.eclipse.ltk.ui.refactoring.RefactoringWizardOpenOperation$1.run(RefactoringWizardOpenOperation.java:132)</Frame>
          <Frame depth="17">org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:69)</Frame>
          <Frame depth="18">org.eclipse.ltk.ui.refactoring.RefactoringWizardOpenOperation.run(RefactoringWizardOpenOperation.java:145)</Frame>
          <Frame depth="19">org.eclipse.jdt.internal.ui.refactoring.actions.RefactoringStarter.activate(RefactoringStarter.java:40)</Frame>
          <Frame depth="20">org.eclipse.jdt.internal.corext.refactoring.RefactoringExecutionStarter.startPullUpRefactoring(RefactoringExecutionStarter.java:355)</Frame>
          <Frame depth="21">org.eclipse.jdt.ui.actions.PullUpAction.run(PullUpAction.java:143)</Frame>
          <Frame depth="22">org.eclipse.jdt.ui.actions.SelectionDispatchAction.dispatchRun(SelectionDispatchAction.java:271)</Frame>
          <Frame depth="23">org.eclipse.jdt.ui.actions.SelectionDispatchAction.run(SelectionDispatchAction.java:243)</Frame>
          <Frame depth="24">org.eclipse.jface.action.Action.runWithEvent(Action.java:499)</Frame>
          <Frame depth="25">org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection(ActionContributionItem.java:539)</Frame>
          <Frame depth="26">org.eclipse.jface.action.ActionContributionItem.access$2(ActionContributionItem.java:488)</Frame>
          <Frame depth="27">org.eclipse.jface.action.ActionContributionItem$5.handleEvent(ActionContributionItem.java:400)</Frame>
          <Frame depth="28">org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)</Frame>
          <Frame depth="29">org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1074)</Frame>
          <Frame depth="30">org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3158)</Frame>
          <Frame depth="31">org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2838)</Frame>
          <Frame depth="32">org.eclipse.jdt.internal.ui.actions.QuickMenuAction.run(QuickMenuAction.java:77)</Frame>
          <Frame depth="33">org.eclipse.jface.action.Action.runWithEvent(Action.java:499)</Frame>
          <Frame depth="34">org.eclipse.ui.commands.ActionHandler.execute(ActionHandler.java:185)</Frame>
          <Frame depth="35">org.eclipse.ui.internal.handlers.LegacyHandlerWrapper.execute(LegacyHandlerWrapper.java:109)</Frame>
          <Frame depth="36">org.eclipse.core.commands.Command.executeWithChecks(Command.java:460)</Frame>
          <Frame depth="37">org.eclipse.core.commands.ParameterizedCommand.executeWithChecks(ParameterizedCommand.java:424)</Frame>
          <Frame depth="38">org.eclipse.ui.internal.handlers.HandlerService.executeCommand(HandlerService.java:160)</Frame>
          <Frame depth="39">org.eclipse.ui.internal.keys.WorkbenchKeyboard.executeCommand(WorkbenchKeyboard.java:466)</Frame>
          <Frame depth="40">org.eclipse.ui.internal.keys.WorkbenchKeyboard.press(WorkbenchKeyboard.java:799)</Frame>
          <Frame depth="41">org.eclipse.ui.internal.keys.WorkbenchKeyboard.processKeyEvent(WorkbenchKeyboard.java:846)</Frame>
          <Frame depth="42">org.eclipse.ui.internal.keys.WorkbenchKeyboard.filterKeySequenceBindings(WorkbenchKeyboard.java:564)</Frame>
          <Frame depth="43">org.eclipse.ui.internal.keys.WorkbenchKeyboard.access$3(WorkbenchKeyboard.java:506)</Frame>
          <Frame depth="44">org.eclipse.ui.internal.keys.WorkbenchKeyboard$KeyDownFilter.handleEvent(WorkbenchKeyboard.java:122)</Frame>
          <Frame depth="45">org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)</Frame>
          <Frame depth="46">org.eclipse.swt.widgets.Display.filterEvent(Display.java:1336)</Frame>
          <Frame depth="47">org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1073)</Frame>
          <Frame depth="48">org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1098)</Frame>
          <Frame depth="49">org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1083)</Frame>
          <Frame depth="50">org.eclipse.swt.widgets.Widget.sendKeyEvent(Widget.java:1110)</Frame>
          <Frame depth="51">org.eclipse.swt.widgets.Widget.gtk_key_press_event(Widget.java:652)</Frame>
          <Frame depth="52">org.eclipse.swt.widgets.Control.gtk_key_press_event(Control.java:2070)</Frame>
          <Frame depth="53">org.eclipse.swt.widgets.Composite.gtk_key_press_event(Composite.java:611)</Frame>
          <Frame depth="54">org.eclipse.swt.widgets.Widget.windowProc(Widget.java:1423)</Frame>
          <Frame depth="55">org.eclipse.swt.widgets.Display.windowProc(Display.java:3790)</Frame>
          <Frame depth="56">org.eclipse.swt.internal.gtk.OS._gtk_main_do_event(Native Method)</Frame>
          <Frame depth="57">org.eclipse.swt.internal.gtk.OS.gtk_main_do_event(OS.java:5233)</Frame>
          <Frame depth="58">org.eclipse.swt.widgets.Display.eventProc(Display.java:1128)</Frame>
          <Frame depth="59">org.eclipse.swt.internal.gtk.OS._g_main_context_iteration(Native Method)</Frame>
          <Frame depth="60">org.eclipse.swt.internal.gtk.OS.g_main_context_iteration(OS.java:1415)</Frame>
          <Frame depth="61">org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2836)</Frame>
          <Frame depth="62">org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1914)</Frame>
          <Frame depth="63">org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1878)</Frame>
          <Frame depth="64">org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:419)</Frame>
          <Frame depth="65">org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:143)</Frame>
          <Frame depth="66">org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:95)</Frame>
          <Frame depth="67">org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:78)</Frame>
          <Frame depth="68">org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:92)</Frame>
          <Frame depth="69">org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:68)</Frame>
          <Frame depth="70">org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:376)</Frame>
          <Frame depth="71">org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:169)</Frame>
          <Frame depth="72">sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)</Frame>
          <Frame depth="73">sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)</Frame>
          <Frame depth="74">sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)</Frame>
          <Frame depth="75">java.lang.reflect.Method.invoke(Method.java:585)</Frame>
          <Frame depth="76">org.eclipse.core.launcher.Main.invokeFramework(Main.java:336)</Frame>
          <Frame depth="77">org.eclipse.core.launcher.Main.basicRun(Main.java:280)</Frame>
          <Frame depth="78">org.eclipse.core.launcher.Main.run(Main.java:977)</Frame>
          <Frame depth="79">org.eclipse.core.launcher.Main.main(Main.java:952)</Frame>
        </Frames>
      </Stacktrace>
      <Cause timestamp="1437330716242">
        <Exception>java.lang.NullPointerException</Exception>
        <Reason />
        <Frames>
          <Frame depth="0">org.eclipse.jdt.internal.corext.refactoring.structure.PullUpRefactoringProcessor.checkFinalFields(PullUpRefactoringProcessor.java:706)</Frame>
          <Frame depth="1">org.eclipse.jdt.internal.corext.refactoring.structure.PullUpRefactoringProcessor.checkFinalConditions(PullUpRefactoringProcessor.java:673)</Frame>
          <Frame depth="2">org.eclipse.ltk.core.refactoring.participants.ProcessorBasedRefactoring.checkFinalConditions(ProcessorBasedRefactoring.java:174)</Frame>
          <Frame depth="3">org.eclipse.ltk.core.refactoring.CheckConditionsOperation.run(CheckConditionsOperation.java:83)</Frame>
          <Frame depth="4">org.eclipse.ltk.core.refactoring.CreateChangeOperation.run(CreateChangeOperation.java:118)</Frame>
          <Frame depth="5">org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1737)</Frame>
          <Frame depth="6">org.eclipse.ltk.internal.ui.refactoring.WorkbenchRunnableAdapter.run(WorkbenchRunnableAdapter.java:87)</Frame>
          <Frame depth="7">org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:113)</Frame>
        </Frames>
      </Cause>
      <Stacktrace timestamp="1437330716242">
        <Exception>java.lang.NullPointerException</Exception>
        <Reason />
        <Frames>
          <Frame depth="0">org.eclipse.jdt.internal.corext.refactoring.structure.PullUpRefactoringProcessor.checkFinalFields(PullUpRefactoringProcessor.java:706)</Frame>
          <Frame depth="1">org.eclipse.jdt.internal.corext.refactoring.structure.PullUpRefactoringProcessor.checkFinalConditions(PullUpRefactoringProcessor.java:673)</Frame>
          <Frame depth="2">org.eclipse.ltk.core.refactoring.participants.ProcessorBasedRefactoring.checkFinalConditions(ProcessorBasedRefactoring.java:174)</Frame>
          <Frame depth="3">org.eclipse.ltk.core.refactoring.CheckConditionsOperation.run(CheckConditionsOperation.java:83)</Frame>
          <Frame depth="4">org.eclipse.ltk.core.refactoring.CreateChangeOperation.run(CreateChangeOperation.java:118)</Frame>
          <Frame depth="5">org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1737)</Frame>
          <Frame depth="6">org.eclipse.ltk.internal.ui.refactoring.WorkbenchRunnableAdapter.run(WorkbenchRunnableAdapter.java:87)</Frame>
          <Frame depth="7">org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:113)</Frame>
        </Frames>
      </Stacktrace>
    </Stacktraces>
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="WORKSFORME" />
    <WithStack>Trying to pull up a private Map (same happens for all other things I tried).

.log excerpt below.

Z

!SESSION 2006-04-13 21:35:55.404 -----------------------------------------------
eclipse.buildId=I20060331-2000
java.version=1.5.0_04
java.vendor=Sun Microsystems Inc.
BootLoader constants: OS=linux, ARCH=x86, WS=gtk, NL=en_US
Framework arguments:  -showlocation -refresh
Command-line arguments:  -os linux -ws gtk -arch x86 -showlocation -refresh -data /usr/local/zorzella/src/ew-loz-z

!ENTRY org.eclipse.ltk.ui.refactoring 4 10000 2006-04-13 21:41:09.891
!MESSAGE Internal Error
!STACK 0
java.lang.reflect.InvocationTargetException
        at org.eclipse.jface.operation.ModalContext.run(ModalContext.java:350)
        at org.eclipse.jface.wizard.WizardDialog.run(WizardDialog.java:851)
        at org.eclipse.ltk.ui.refactoring.RefactoringWizard.createChange(RefactoringWizard.java:571)
        at org.eclipse.ltk.ui.refactoring.RefactoringWizard.computeUserInputSuccessorPage(RefactoringWizard.java:414)
        at org.eclipse.ltk.ui.refactoring.UserInputWizardPage.computeSuccessorPage(UserInputWizardPage.java:75)
        at org.eclipse.jdt.internal.ui.refactoring.PullUpMemberPage.getNextPage(PullUpMemberPage.java:809)
        at org.eclipse.jface.wizard.WizardDialog.nextPressed(WizardDialog.java:751)
        at org.eclipse.jface.wizard.WizardDialog.buttonPressed(WizardDialog.java:351)
        at org.eclipse.jface.dialogs.Dialog$3.widgetSelected(Dialog.java:652)
        at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:90)
        at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)
        at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1074)
        at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3158)
        at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2838)
        at org.eclipse.jface.window.Window.runEventLoop(Window.java:820)
        at org.eclipse.jface.window.Window.open(Window.java:796)
        at org.eclipse.ltk.ui.refactoring.RefactoringWizardOpenOperation$1.run(RefactoringWizardOpenOperation.java:132)
        at org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:69)
        at org.eclipse.ltk.ui.refactoring.RefactoringWizardOpenOperation.run(RefactoringWizardOpenOperation.java:145)
        at org.eclipse.jdt.internal.ui.refactoring.actions.RefactoringStarter.activate(RefactoringStarter.java:40)
        at org.eclipse.jdt.internal.corext.refactoring.RefactoringExecutionStarter.startPullUpRefactoring(RefactoringExecutionStarter.java:355)
        at org.eclipse.jdt.ui.actions.PullUpAction.run(PullUpAction.java:143)
        at org.eclipse.jdt.ui.actions.SelectionDispatchAction.dispatchRun(SelectionDispatchAction.java:271)
        at org.eclipse.jdt.ui.actions.SelectionDispatchAction.run(SelectionDispatchAction.java:243)
        at org.eclipse.jface.action.Action.runWithEvent(Action.java:499)
        at org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection(ActionContributionItem.java:539)
        at org.eclipse.jface.action.ActionContributionItem.access$2(ActionContributionItem.java:488)
        at org.eclipse.jface.action.ActionContributionItem$5.handleEvent(ActionContributionItem.java:400)
        at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)
        at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1074)
        at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3158)
        at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2838)
        at org.eclipse.jdt.internal.ui.actions.QuickMenuAction.run(QuickMenuAction.java:77)
        at org.eclipse.jface.action.Action.runWithEvent(Action.java:499)
        at org.eclipse.ui.commands.ActionHandler.execute(ActionHandler.java:185)
        at org.eclipse.ui.internal.handlers.LegacyHandlerWrapper.execute(LegacyHandlerWrapper.java:109)
        at org.eclipse.core.commands.Command.executeWithChecks(Command.java:460)
        at org.eclipse.core.commands.ParameterizedCommand.executeWithChecks(ParameterizedCommand.java:424)
        at org.eclipse.ui.internal.handlers.HandlerService.executeCommand(HandlerService.java:160)
        at org.eclipse.ui.internal.keys.WorkbenchKeyboard.executeCommand(WorkbenchKeyboard.java:466)
        at org.eclipse.ui.internal.keys.WorkbenchKeyboard.press(WorkbenchKeyboard.java:799)
        at org.eclipse.ui.internal.keys.WorkbenchKeyboard.processKeyEvent(WorkbenchKeyboard.java:846)
        at org.eclipse.ui.internal.keys.WorkbenchKeyboard.filterKeySequenceBindings(WorkbenchKeyboard.java:564)
        at org.eclipse.ui.internal.keys.WorkbenchKeyboard.access$3(WorkbenchKeyboard.java:506)
        at org.eclipse.ui.internal.keys.WorkbenchKeyboard$KeyDownFilter.handleEvent(WorkbenchKeyboard.java:122)
        at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)
        at org.eclipse.swt.widgets.Display.filterEvent(Display.java:1336)
        at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1073)
        at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1098)
        at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1083)
        at org.eclipse.swt.widgets.Widget.sendKeyEvent(Widget.java:1110)
        at org.eclipse.swt.widgets.Widget.gtk_key_press_event(Widget.java:652)
        at org.eclipse.swt.widgets.Control.gtk_key_press_event(Control.java:2070)
        at org.eclipse.swt.widgets.Composite.gtk_key_press_event(Composite.java:611)
        at org.eclipse.swt.widgets.Widget.windowProc(Widget.java:1423)
        at org.eclipse.swt.widgets.Display.windowProc(Display.java:3790)
        at org.eclipse.swt.internal.gtk.OS._gtk_main_do_event(Native Method)
        at org.eclipse.swt.internal.gtk.OS.gtk_main_do_event(OS.java:5233)
        at org.eclipse.swt.widgets.Display.eventProc(Display.java:1128)
        at org.eclipse.swt.internal.gtk.OS._g_main_context_iteration(Native Method)
        at org.eclipse.swt.internal.gtk.OS.g_main_context_iteration(OS.java:1415)
        at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2836)
        at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1914)
        at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1878)
        at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:419)
        at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:143)
        at org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:95)
        at org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:78)
        at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:92)
        at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:68)
        at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:376)
        at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:169)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:585)
        at org.eclipse.core.launcher.Main.invokeFramework(Main.java:336)
        at org.eclipse.core.launcher.Main.basicRun(Main.java:280)
        at org.eclipse.core.launcher.Main.run(Main.java:977)
        at org.eclipse.core.launcher.Main.main(Main.java:952)
Caused by: java.lang.NullPointerException
        at org.eclipse.jdt.internal.corext.refactoring.structure.PullUpRefactoringProcessor.checkFinalFields(PullUpRefactoringProcessor.java:706)
        at org.eclipse.jdt.internal.corext.refactoring.structure.PullUpRefactoringProcessor.checkFinalConditions(PullUpRefactoringProcessor.java:673)
        at org.eclipse.ltk.core.refactoring.participants.ProcessorBasedRefactoring.checkFinalConditions(ProcessorBasedRefactoring.java:174)
        at org.eclipse.ltk.core.refactoring.CheckConditionsOperation.run(CheckConditionsOperation.java:83)
        at org.eclipse.ltk.core.refactoring.CreateChangeOperation.run(CreateChangeOperation.java:118)
        at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1737)
        at org.eclipse.ltk.internal.ui.refactoring.WorkbenchRunnableAdapter.run(WorkbenchRunnableAdapter.java:87)
        at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:113)
Root exception:
java.lang.NullPointerException
        at org.eclipse.jdt.internal.corext.refactoring.structure.PullUpRefactoringProcessor.checkFinalFields(PullUpRefactoringProcessor.java:706)
        at org.eclipse.jdt.internal.corext.refactoring.structure.PullUpRefactoringProcessor.checkFinalConditions(PullUpRefactoringProcessor.java:673)
        at org.eclipse.ltk.core.refactoring.participants.ProcessorBasedRefactoring.checkFinalConditions(ProcessorBasedRefactoring.java:174)
        at org.eclipse.ltk.core.refactoring.CheckConditionsOperation.run(CheckConditionsOperation.java:83)
        at org.eclipse.ltk.core.refactoring.CreateChangeOperation.run(CreateChangeOperation.java:118)
        at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1737)
        at org.eclipse.ltk.internal.ui.refactoring.WorkbenchRunnableAdapter.run(WorkbenchRunnableAdapter.java:87)
        at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:113)
This works for me using RC2. Please reopen with specific steps to reproduce if RC2 does not work for you.</WithStack>
    <WithOutStack>Trying to pull up a private Map (same happens for all other things I tried).

.log excerpt below.

Z

!SESSION 2006-04-13 21:35:55.404 -----------------------------------------------
eclipse.buildId=I20060331-2000
java.version=1.5.0_04
java.vendor=Sun Microsystems Inc.
BootLoader constants: OS=linux, ARCH=x86, WS=gtk, NL=en_US
Framework arguments:  -showlocation -refresh
Command-line arguments:  -os linux -ws gtk -arch x86 -showlocation -refresh -data /usr/local/zorzella/src/ew-loz-z

!ENTRY org.eclipse.ltk.ui.refactoring 4 10000 2006-04-13 21:41:09.891
!MESSAGE Internal Error
!STACK 0
Root exception:

This works for me using RC2. Please reopen with specific steps to reproduce if RC2 does not work for you.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="136794" />
    <CreationDate amount="2006-04-14 01:38:00 -0400" />
    <DupId amount="" />
    <classification amount="BIRT" />
    <Product amount="BIRT" />
    <component amount="Report Engine" />
    <Version amount="2.0.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="major" />
    <Summery>Table nested chart, chart plot size is incorrect.</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="4">
        <Lines>
          <Line>1.Drag a table into layout, bind the data set, insert a data into detail: row["customernumber"]</Line>
          <Line>2.Create a chart into table detail</Line>
          <Line>3.Preview</Line>
          <Line>(attched design file)</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>Table nested chart, chart plot size is incorrect.

Steps:
Data source: sample DB
Data set: select * from customers
1.Drag a table into layout, bind the data set, insert a data into detail: row["customernumber"]
2.Create a chart into table detail
3.Preview
(attched design file)

Actual Results:
1.Chart plot size is incorrect

Expected Results:
1.Chart plot size is correct
Created attachment 38584
report desing file
viewer issue in IE
fixed.
u</WithStack>
    <WithOutStack>Table nested chart, chart plot size is incorrect.

Steps:
Data source: sample DB
Data set: select * from customers
1.Drag a table into layout, bind the data set, insert a data into detail: row["customernumber"]
2.Create a chart into table detail
3.Preview
(attched design file)

Actual Results:
1.Chart plot size is incorrect

Expected Results:
1.Chart plot size is correct
Created attachment 38584
report desing file
viewer issue in IE
fixed.
u</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="136795" />
    <CreationDate amount="2006-04-14 01:40:00 -0400" />
    <DupId amount="" />
    <classification amount="WebTools" />
    <Product amount="WTP Source Editing" />
    <component amount="jst.jsp" />
    <Version amount="1.5" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>EL Syntax Error accessing collection via string</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="4">
      <source_code type="functiondef">
        <location start="2196" end="2291" />
        <code>[&lt;a href="&lt;%= request.getContextPath()%&gt;/${backToRegister != null ? 'register' : 'enquire'}</code>
      </source_code>
      <source_code type="functiondef">
        <location start="5323" end="5504" />
        <code>+ while (elRegions != null &amp;&amp; elRegions.hasNext()) {
+ 	elRegion = (ITextRegion) elRegions.next();
+ 	if (elRegion.getType() == DOMJSPRegionContexts.JSP_EL_CLOSE)
+       	break;
+}</code>
      </source_code>
      <source_code type="functiondef">
        <location start="6171" end="6379" />
        <code>&gt; + while (elRegions != null &amp;&amp; elRegions.hasNext()) {
&gt; +       elRegion = (ITextRegion) elRegions.next();
&gt; +       if (elRegion.getType() == DOMJSPRegionContexts.JSP_EL_CLOSE)
&gt; +               break;
&gt; +}</code>
      </source_code>
      <source_code type="functiondef">
        <location start="6900" end="7104" />
        <code>Removed the break from the conditional that checks EL content because there may be more than one EL expression in the container. For example, &lt;a href="${fn:trim('http://  ')}${fn:trim('www.eclipse.org') }</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="0" />
    <bug_status amount="VERIFIED" />
    <resolution amount="FIXED" />
    <WithStack>on WTP 3.2M5 The following in my JSP is being marked as an EL Syntax Error:

${header["Accept"]}

The code executes fine. Other uses of the ["foo"] notation show up as syntax errors as well. If I change it to ${header[0]} it doesn't complain.
I'm also seeing a similar error with this line
${fn:join(row.errorProofing, ',')}
I get the highlights on the single quotes.
I see a similar problem in this line
${fn:join(row.errorProofing, ',')}
warnings highlight on the single quote.

using eclipse 3.2RC1, webtools 1.5
May be related:

${(1 &lt; 0) ? "YES" : "NO"} produces an EL Syntax Error as well. I got this example out of Core Servlets page 494 so I presume it's valid. Sometimes 1 and 0 need to be complex objects (ie request.header) to trigger the yellow squigglies but they stick.
Still seeing this in RC5. Perhaps related, but in the last month references to param collection elements seem to flag as errors incorrectly as well, ie:

&lt;option ${(param.foo eq "0")?"selected":""} value="0"&gt;Foo&lt;/option&gt;

Since the string collection accessor is also failing there seems to be no workaround to the problem.
Any idea on when this might be fixed?  I recently stopped using the BEA Workshop JSP plugin (which does validate correctly) and now noticed that my project has several hundreds of errors. This makes it quite difficult to find "real" warnings. 

Suggestion:
Add "Ignore warning" option to the context menu of the Problems view.
Adding my post-IBM email..this is still a big annoyance to me as most of my JSPs end up showing false errors.
When I write the following code in a JSP page in Eclipse, it gives a warning, "EL Syntax Error".

${param['user']}

It also says that the word 'param' is not correctly spelled and underlines it with a yellow squiggly. The two "EL Systax Error" messages are show at the two ']'. I'm using Eclipse Europa for JEE developers.  I receive the expected output when the page is loaded on the browser.

It is extremely intimidating when a 100% correct JSP page shows several wrong warning messages.
This bug is more than two years old and still present in Eclipse 3.4. Any progress regarding this annoying behaviour?

Regards,
I have a simple JSP, see below.

    [&lt;a href="&lt;%= request.getContextPath()%&gt;/${backToRegister != null ? 'register' : 'enquire'}/home.do"
        &gt;${backToRegister != null ? 'Go to Registration' : 'Back to main'}&lt;/a&gt;]

It is giving me an error "EL Syntax Error".

Description	Resource	Path	Location	Type
EL Syntax Error 	failEnquire.jsp	xxx	line 0	JSP Problem

It is making a red squiggle mark before the second ":".

${backToRegister != null ? 'Go to Registration'&lt;red_mark_here&gt;: 'Back to main'}





Just wanted to +1 this issue.  I've got:

User Login from ${header["host"]}

with red markings under the "



Created attachment 115620
patch

Adding a patch to fix the EL validator so that it considers all of the content of the EL container and not just regions that are of the type JSP_EL_CONTENT.
Nitin, could you please take a look at this patch before I release it?
* Explain why you believe this is a stop-ship defect. Or, if it is a "hotbug" (requested by an adopter) please document it as such. 
      Without these changes, the JSP EL validator will incorrectly identify problems in EL regions that contain some kind of EL syntax and a string literal.
      
* Is there a work-around? If so, why do you believe the work-around is insufficient? 
      Yes, the work-around is to ignore EL Syntax problems in the JSP Validation preferences. The drawback to this is that real EL syntax problems will be ignored as well.
      
* How has the fix been tested? Is there a test case attached to the bugzilla record? Has a JUnit Test been added? 
      No JUnits, but the fix has been tested manually using the numerous failing EL regions posted in the comments of the bug.

* Give a brief technical overview. Who has reviewed this fix? 
      Before, the JSPELValidator would skip quoted regions in JSP EL content, thus the validated EL content would be incomplete and syntax validation would fail. Now, the validator looks at the content of the EL region as a whole instead of splitting it up into regions. Nitin has reviewed this fix.
      
* What is the risk associated with this fix? 
      Minimal. The change only affects the EL validator and the text that it validates.
*** Bug 252336 has been marked as a duplicate of this bug. ***
Looks good.

For the technical information, we currently break up any EL regions into different pieces depending on the presence of quotes.  Without this patch, only the segment before the first quote would be sent to the EL parser.  The patch changing this to properly use the entire EL content.
I think this is great and a needed fix, but can you comment on one (potential) issue. I'm wondering about "runaway code" in loops such as that below (from your patch) ... what if there is no 'close' region (yet) ... seems it might slow down typing in a large file, until the user types '}'. I don't recall (but Nitin might :) it seems like in some cases we put in some huge maximum regions we'd check, like 500? 1000? That at least prevents an apparent hang if someone has a megabyte jsp file, or similar. 


+ /* Find the EL closing region, otherwise the last region will be used to calculate the EL content text */
+ while (elRegions != null &amp;&amp; elRegions.hasNext()) {
+ 	elRegion = (ITextRegion) elRegions.next();
+ 	if (elRegion.getType() == DOMJSPRegionContexts.JSP_EL_CLOSE)
+       	break;
+}

(In reply to comment #16)
&gt; I think this is great and a needed fix, but can you comment on one (potential)
&gt; issue. I'm wondering about "runaway code" in loops such as that below (from
&gt; your patch) ... what if there is no 'close' region (yet) ... seems it might
&gt; slow down typing in a large file, until the user types '}'. I don't recall (but
&gt; Nitin might :) it seems like in some cases we put in some huge maximum regions
&gt; we'd check, like 500? 1000? That at least prevents an apparent hang if someone
&gt; has a megabyte jsp file, or similar. 
&gt; 
&gt; 
&gt; + /* Find the EL closing region, otherwise the last region will be used to
&gt; calculate the EL content text */
&gt; + while (elRegions != null &amp;&amp; elRegions.hasNext()) {
&gt; +       elRegion = (ITextRegion) elRegions.next();
&gt; +       if (elRegion.getType() == DOMJSPRegionContexts.JSP_EL_CLOSE)
&gt; +               break;
&gt; +}

Adding limits sounds reasonable, but just to assuage any concerns, the JSP parser only divides the EL into quoted and non-quoted segments.  It's not a full syntactic breakdown, so the common case would be a somewhat small number.

Nick, please attach an updated patch with a limit of 1000 or so for the while loop.

Created attachment 116434
patch with a max number of regions in the loop

Added a check of 1000 regions before exiting the loop.
Created attachment 116451
patch for more than 1 EL region in a container

Removed the break from the conditional that checks EL content because there may be more than one EL expression in the container. For example, &lt;a href="${fn:trim('http://  ')}${fn:trim('www.eclipse.org') }"&gt;Eclipse&lt;/a&gt;
yes, I'm fine with this. 

Released to 3_0_Maintenance.
In RC2.
Released to HEAD.
Verified in wtp-R-3.0.3-20081113203138.
*** Bug 239913 has been marked as a duplicate of this bug. ***
*** Bug 156034 has been marked as a duplicate of this bug. ***
*** Bug 238752 has been marked as a duplicate of this bug. ***
*** Bug 149392 has been marked as a duplicate of this bug. ***
*** Bug 206704 has been marked as a duplicate of this bug. ***
*** Bug 112527 has been marked as a duplicate of this bug. ***</WithStack>
    <WithOutStack>on WTP 3.2M5 The following in my JSP is being marked as an EL Syntax Error:

${header["Accept"]}

The code executes fine. Other uses of the ["foo"] notation show up as syntax errors as well. If I change it to ${header[0]} it doesn't complain.
I'm also seeing a similar error with this line
${fn:join(row.errorProofing, ',')}
I get the highlights on the single quotes.
I see a similar problem in this line
${fn:join(row.errorProofing, ',')}
warnings highlight on the single quote.

using eclipse 3.2RC1, webtools 1.5
May be related:

${(1 &lt; 0) ? "YES" : "NO"} produces an EL Syntax Error as well. I got this example out of Core Servlets page 494 so I presume it's valid. Sometimes 1 and 0 need to be complex objects (ie request.header) to trigger the yellow squigglies but they stick.
Still seeing this in RC5. Perhaps related, but in the last month references to param collection elements seem to flag as errors incorrectly as well, ie:

&lt;option ${(param.foo eq "0")?"selected":""} value="0"&gt;Foo&lt;/option&gt;

Since the string collection accessor is also failing there seems to be no workaround to the problem.
Any idea on when this might be fixed?  I recently stopped using the BEA Workshop JSP plugin (which does validate correctly) and now noticed that my project has several hundreds of errors. This makes it quite difficult to find "real" warnings. 

Suggestion:
Add "Ignore warning" option to the context menu of the Problems view.
Adding my post-IBM email..this is still a big annoyance to me as most of my JSPs end up showing false errors.
When I write the following code in a JSP page in Eclipse, it gives a warning, "EL Syntax Error".

${param['user']}

It also says that the word 'param' is not correctly spelled and underlines it with a yellow squiggly. The two "EL Systax Error" messages are show at the two ']'. I'm using Eclipse Europa for JEE developers.  I receive the expected output when the page is loaded on the browser.

It is extremely intimidating when a 100% correct JSP page shows several wrong warning messages.
This bug is more than two years old and still present in Eclipse 3.4. Any progress regarding this annoying behaviour?

Regards,
I have a simple JSP, see below.

    [&lt;a href="&lt;%= request.getContextPath()%&gt;/${backToRegister != null ? 'register' : 'enquire'}/home.do"
        &gt;${backToRegister != null ? 'Go to Registration' : 'Back to main'}&lt;/a&gt;]

It is giving me an error "EL Syntax Error".

Description	Resource	Path	Location	Type
EL Syntax Error 	failEnquire.jsp	xxx	line 0	JSP Problem

It is making a red squiggle mark before the second ":".

${backToRegister != null ? 'Go to Registration'&lt;red_mark_here&gt;: 'Back to main'}





Just wanted to +1 this issue.  I've got:

User Login from ${header["host"]}

with red markings under the "



Created attachment 115620
patch

Adding a patch to fix the EL validator so that it considers all of the content of the EL container and not just regions that are of the type JSP_EL_CONTENT.
Nitin, could you please take a look at this patch before I release it?
* Explain why you believe this is a stop-ship defect. Or, if it is a "hotbug" (requested by an adopter) please document it as such. 
      Without these changes, the JSP EL validator will incorrectly identify problems in EL regions that contain some kind of EL syntax and a string literal.
      
* Is there a work-around? If so, why do you believe the work-around is insufficient? 
      Yes, the work-around is to ignore EL Syntax problems in the JSP Validation preferences. The drawback to this is that real EL syntax problems will be ignored as well.
      
* How has the fix been tested? Is there a test case attached to the bugzilla record? Has a JUnit Test been added? 
      No JUnits, but the fix has been tested manually using the numerous failing EL regions posted in the comments of the bug.

* Give a brief technical overview. Who has reviewed this fix? 
      Before, the JSPELValidator would skip quoted regions in JSP EL content, thus the validated EL content would be incomplete and syntax validation would fail. Now, the validator looks at the content of the EL region as a whole instead of splitting it up into regions. Nitin has reviewed this fix.
      
* What is the risk associated with this fix? 
      Minimal. The change only affects the EL validator and the text that it validates.
*** Bug 252336 has been marked as a duplicate of this bug. ***
Looks good.

For the technical information, we currently break up any EL regions into different pieces depending on the presence of quotes.  Without this patch, only the segment before the first quote would be sent to the EL parser.  The patch changing this to properly use the entire EL content.
I think this is great and a needed fix, but can you comment on one (potential) issue. I'm wondering about "runaway code" in loops such as that below (from your patch) ... what if there is no 'close' region (yet) ... seems it might slow down typing in a large file, until the user types '}'. I don't recall (but Nitin might :) it seems like in some cases we put in some huge maximum regions we'd check, like 500? 1000? That at least prevents an apparent hang if someone has a megabyte jsp file, or similar. 


+ /* Find the EL closing region, otherwise the last region will be used to calculate the EL content text */
+ while (elRegions != null &amp;&amp; elRegions.hasNext()) {
+ 	elRegion = (ITextRegion) elRegions.next();
+ 	if (elRegion.getType() == DOMJSPRegionContexts.JSP_EL_CLOSE)
+       	break;
+}

(In reply to comment #16)
&gt; I think this is great and a needed fix, but can you comment on one (potential)
&gt; issue. I'm wondering about "runaway code" in loops such as that below (from
&gt; your patch) ... what if there is no 'close' region (yet) ... seems it might
&gt; slow down typing in a large file, until the user types '}'. I don't recall (but
&gt; Nitin might :) it seems like in some cases we put in some huge maximum regions
&gt; we'd check, like 500? 1000? That at least prevents an apparent hang if someone
&gt; has a megabyte jsp file, or similar. 
&gt; 
&gt; 
&gt; + /* Find the EL closing region, otherwise the last region will be used to
&gt; calculate the EL content text */
&gt; + while (elRegions != null &amp;&amp; elRegions.hasNext()) {
&gt; +       elRegion = (ITextRegion) elRegions.next();
&gt; +       if (elRegion.getType() == DOMJSPRegionContexts.JSP_EL_CLOSE)
&gt; +               break;
&gt; +}

Adding limits sounds reasonable, but just to assuage any concerns, the JSP parser only divides the EL into quoted and non-quoted segments.  It's not a full syntactic breakdown, so the common case would be a somewhat small number.

Nick, please attach an updated patch with a limit of 1000 or so for the while loop.

Created attachment 116434
patch with a max number of regions in the loop

Added a check of 1000 regions before exiting the loop.
Created attachment 116451
patch for more than 1 EL region in a container

Removed the break from the conditional that checks EL content because there may be more than one EL expression in the container. For example, &lt;a href="${fn:trim('http://  ')}${fn:trim('www.eclipse.org') }"&gt;Eclipse&lt;/a&gt;
yes, I'm fine with this. 

Released to 3_0_Maintenance.
In RC2.
Released to HEAD.
Verified in wtp-R-3.0.3-20081113203138.
*** Bug 239913 has been marked as a duplicate of this bug. ***
*** Bug 156034 has been marked as a duplicate of this bug. ***
*** Bug 238752 has been marked as a duplicate of this bug. ***
*** Bug 149392 has been marked as a duplicate of this bug. ***
*** Bug 206704 has been marked as a duplicate of this bug. ***
*** Bug 112527 has been marked as a duplicate of this bug. ***</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="136796" />
    <CreationDate amount="2006-04-14 01:55:00 -0400" />
    <DupId amount="136534" />
    <classification amount="BIRT" />
    <Product amount="BIRT" />
    <component amount="Chart" />
    <Version amount="2.0.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="enhancement" />
    <Summery>It is cockamamie to create a data set in chart</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="3">
        <Lines>
          <Line>1.New a data source named d1 and data set named ds1.</Line>
          <Line>2.Add a chart and switch to "Select Data" tab.</Line>
          <Line>3.Now I want to create a new data set.</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="CLOSED" />
    <resolution amount="DUPLICATE" />
    <WithStack>Details:
It is cockamamie to create a data set in chart

Step:
1.New a data source named d1 and data set named ds1.
2.Add a chart and switch to "Select Data" tab.
3.Now I want to create a new data set.

Actual result:
I want to create a new data set, bug I must select data set ds1 and add some column first.

Exception:
I can create the new data set but click use data set.
same bug as bug136534. At least fixing 136534 will automatically fix this one.

*** This bug has been marked as a duplicate of 136534 ***
Verified! It is a good idea!</WithStack>
    <WithOutStack>Details:
It is cockamamie to create a data set in chart

Step:
1.New a data source named d1 and data set named ds1.
2.Add a chart and switch to "Select Data" tab.
3.Now I want to create a new data set.

Actual result:
I want to create a new data set, bug I must select data set ds1 and add some column first.

Exception:
I can create the new data set but click use data set.
same bug as bug136534. At least fixing 136534 will automatically fix this one.

*** This bug has been marked as a duplicate of 136534 ***
Verified! It is a good idea!</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="136797" />
    <CreationDate amount="2006-04-14 01:58:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse Foundation" />
    <Product amount="z_Archived" />
    <component amount="TPTP.monitoring" />
    <Version amount="unspecified" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows 2000" />
    <priority amount="P2" />
    <bug_severity amount="normal" />
    <Summery>Use timeFormat string in creationTime rule in Windows Event log adapters</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>In TPTP 4.1, feature 74918 added support to GLA for setting the timezone in adapter files for log types that did not have timezones in their record timestamps.  This feature should be applied to the Windows Event log adapters because the Windows Event logs do not contain timezone information.  

To fix this, the @TIMEZONE keyword should be added to the substitute value in the creationTime rule (eg. substitute="$3-$1-$2T$4.000@TIMEZONE"). Also, the timeZone commonFields attribute needs to be added to the extension points for the Windows Event log parsers.
This is not stop ship for iteration 2 so targetting to iteration 3.
If @TIMEZONE is used in the adapter file, then log import with filter from a machine with a pre-4.2 RAC will not work, breaking forward compatibility.  Instead the creationTime rule will be changed to use a timeFormat string without timezone.  The default system timezone offset will be appended to the creationTime value autmatically.  Here is the suggested substitution rule for creationTime:

&lt;SubstitutionRule match="(\d{2}/\d{2}/\d{4}\s\d{2}:\d{2}:\d{2}\.\d{6})" positions="$h('CreationTime')" substitute="$1" timeFormat="MM/dd/yyy HH:mm:ss.S" useBuiltInFunction="false"/&gt;

Also, the timeZone commonFields attribute should not be added to the extension points because the timezone should always be the default system timezone where GLA is parsing the event log.  The event log is generated by the converter command on the system.
Committed fix to TPTP Head CVS.

Made suggested fix to creationTime substitution rule in all of the Windows event log adapter files (9 of them).  Also removed characterEncoding commonField from the Windows event log logParser extension points because the default character encoding will always be used.  A user cannot import a Windows event log in an encoding other than the system default.
As of TPTP 4.6.0, TPTP is in maintenance mode and focusing on improving quality by resolving relevant enhancements/defects and increasing test coverage through test creation, automation, Build Verification Tests (BVTs), and expanded run-time execution. As part of the TPTP Bugzilla housecleaning process (see http://wiki.eclipse.org/Bugzilla_Housecleaning_Processes), this enhancement/defect is verified/closed by the Project Lead since this originator of this enhancement/defect has an inactive Bugzilla account and considered to be fixed. If this enhancement/defect is still unresolved and reproducible in the latest TPTP release (http://www.eclipse.org/tptp/home/downloads/), please re-open.</WithStack>
    <WithOutStack>In TPTP 4.1, feature 74918 added support to GLA for setting the timezone in adapter files for log types that did not have timezones in their record timestamps.  This feature should be applied to the Windows Event log adapters because the Windows Event logs do not contain timezone information.  

To fix this, the @TIMEZONE keyword should be added to the substitute value in the creationTime rule (eg. substitute="$3-$1-$2T$4.000@TIMEZONE"). Also, the timeZone commonFields attribute needs to be added to the extension points for the Windows Event log parsers.
This is not stop ship for iteration 2 so targetting to iteration 3.
If @TIMEZONE is used in the adapter file, then log import with filter from a machine with a pre-4.2 RAC will not work, breaking forward compatibility.  Instead the creationTime rule will be changed to use a timeFormat string without timezone.  The default system timezone offset will be appended to the creationTime value autmatically.  Here is the suggested substitution rule for creationTime:

&lt;SubstitutionRule match="(\d{2}/\d{2}/\d{4}\s\d{2}:\d{2}:\d{2}\.\d{6})" positions="$h('CreationTime')" substitute="$1" timeFormat="MM/dd/yyy HH:mm:ss.S" useBuiltInFunction="false"/&gt;

Also, the timeZone commonFields attribute should not be added to the extension points because the timezone should always be the default system timezone where GLA is parsing the event log.  The event log is generated by the converter command on the system.
Committed fix to TPTP Head CVS.

Made suggested fix to creationTime substitution rule in all of the Windows event log adapter files (9 of them).  Also removed characterEncoding commonField from the Windows event log logParser extension points because the default character encoding will always be used.  A user cannot import a Windows event log in an encoding other than the system default.
As of TPTP 4.6.0, TPTP is in maintenance mode and focusing on improving quality by resolving relevant enhancements/defects and increasing test coverage through test creation, automation, Build Verification Tests (BVTs), and expanded run-time execution. As part of the TPTP Bugzilla housecleaning process (see http://wiki.eclipse.org/Bugzilla_Housecleaning_Processes), this enhancement/defect is verified/closed by the Project Lead since this originator of this enhancement/defect has an inactive Bugzilla account and considered to be fixed. If this enhancement/defect is still unresolved and reproducible in the latest TPTP release (http://www.eclipse.org/tptp/home/downloads/), please re-open.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="136798" />
    <CreationDate amount="2006-04-14 02:17:00 -0400" />
    <DupId amount="" />
    <classification amount="BIRT" />
    <Product amount="BIRT" />
    <component amount="Report Viewer" />
    <Version amount="unspecified" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="critical" />
    <Summery>In JBoss preview report failed.</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="3">
        <Lines>
          <Line>1. Deploy birt in JBoss4.0.2</Line>
          <Line>2. Visit index.jsp and click Link to sample report</Line>
          <Line>3. Change web address to another report and press enter to reload sample report.</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>Description:
In JBoss only the first report can be previewed.

Steps to reproduce:
1. Deploy birt in JBoss4.0.2
2. Visit index.jsp and click Link to sample report
3. Change web address to another report and press enter to reload sample report.

Expected result:
No errors.

Actual result:
When preview sample report, console display below errors but report displayed correctly:
13:18:12,703 INFO  [ContextConfig] Missing application web.xml, using defaults o
nly StandardEngine[jboss.web].StandardHost[localhost].StandardContext[/birt06041
3]

Try to preview another report, but all failed. Console showed:
13:18:32,656 INFO  [WebappClassLoader] Illegal access: this web application inst
ance has been stopped already.  Could not load java.io.DataOutputStream.  The ev
entual following stack trace is caused by an error thrown for debugging purposes
 as well as to attempt to terminate the thread which caused the illegal access,
and has no functional impact.
After invesitgation, this should be a bug of Jboss. 

Currentlt,we create the document fold besides the working folder. And the first half part of the document fold name is same with the working folder. Jboss find the first part name same then get into the document folder, so no web.xml can be found there. 

I change the document folder inside the working folder without any part name duplicated. The error is not throw out any more.
Fixed
verified.</WithStack>
    <WithOutStack>Description:
In JBoss only the first report can be previewed.

Steps to reproduce:
1. Deploy birt in JBoss4.0.2
2. Visit index.jsp and click Link to sample report
3. Change web address to another report and press enter to reload sample report.

Expected result:
No errors.

Actual result:
When preview sample report, console display below errors but report displayed correctly:
13:18:12,703 INFO  [ContextConfig] Missing application web.xml, using defaults o
nly StandardEngine[jboss.web].StandardHost[localhost].StandardContext[/birt06041
3]

Try to preview another report, but all failed. Console showed:
13:18:32,656 INFO  [WebappClassLoader] Illegal access: this web application inst
ance has been stopped already.  Could not load java.io.DataOutputStream.  The ev
entual following stack trace is caused by an error thrown for debugging purposes
 as well as to attempt to terminate the thread which caused the illegal access,
and has no functional impact.
After invesitgation, this should be a bug of Jboss. 

Currentlt,we create the document fold besides the working folder. And the first half part of the document fold name is same with the working folder. Jboss find the first part name same then get into the document folder, so no web.xml can be found there. 

I change the document folder inside the working folder without any part name duplicated. The error is not throw out any more.
Fixed
verified.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="136799" />
    <CreationDate amount="2006-04-14 02:27:00 -0400" />
    <DupId amount="103834" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="Resources" />
    <Version amount="3.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="major" />
    <Summery>Provide the ability to decide content type from IResource or IPath in ITextContentDescriber</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="DUPLICATE" />
    <WithStack>I want to decide the content type from metadata including content type information, not from file content. 
Actually, Web Tools Platform has content properties settings feature. The settings includes the content type information for JSP fragment files. And to get the information, IResource is required.
However, unfortunately, InputStream or Reader are passed to ITextContentDescriber or IContentDescriber. If IResource or IPath is passed to ITextContenDescriber, I'll be able to do what I want to do.


*** This bug has been marked as a duplicate of 103834 ***</WithStack>
    <WithOutStack>I want to decide the content type from metadata including content type information, not from file content. 
Actually, Web Tools Platform has content properties settings feature. The settings includes the content type information for JSP fragment files. And to get the information, IResource is required.
However, unfortunately, InputStream or Reader are passed to ITextContentDescriber or IContentDescriber. If IResource or IPath is passed to ITextContenDescriber, I'll be able to do what I want to do.


*** This bug has been marked as a duplicate of 103834 ***</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="136800" />
    <CreationDate amount="2006-04-14 02:38:00 -0400" />
    <DupId amount="" />
    <classification amount="BIRT" />
    <Product amount="BIRT" />
    <component amount="Chart" />
    <Version amount="2.0.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="major" />
    <Summery>[Compatibility]ChartException throws out when preview an existing report design</Summery>
    <Patches amount="0" />
    <Stacktraces amount="1">
      <Cause timestamp="1437330717724">
        <Exception>java.lang.NullPointerException</Exception>
        <Reason />
        <Frames>
          <Frame depth="0">org.eclipse.emf.ecore.util.EcoreUtil$Copier.createCopy(EcoreUtil.java:479) at org.eclipse.emf.ecore.util.EcoreUtil$Copier.copy(EcoreUtil.java:429) at org.eclipse.emf.ecore.util.EcoreUtil.copy(EcoreUtil.java:346) at org.eclipse.birt.chart.computation.Engine3D.&lt;init&gt;(Engine3D.java:162) at org.eclipse.birt.chart.render.AxesRenderer.get3DEngine(AxesRenderer.java:5425) at org.eclipse.birt.chart.render.Line.renderMarker(Line.java:991) at org.eclipse.birt.chart.render.Line.renderSeries(Line.java:690) at org.eclipse.birt.chart.render.AxesRenderer.renderPlot(AxesRenderer.java:2221) at org.eclipse.birt.chart.render.AxesRenderer.render(AxesRenderer.java:299) at org.eclipse.birt.chart.factory.Generator.render(Generator.java:1243)</Frame>
        </Frames>
      </Cause>
    </Stacktraces>
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>Description:
ChartException throws out when preview an existing report design.

Error log:
Error0 : null ( 1 time(s) )
detail : org.eclipse.birt.chart.exception.ChartException: $NO-RB$ null at org.eclipse.birt.chart.factory.Generator.render(Generator.java:1248) at org.eclipse.birt.chart.reportitem.ChartReportItemPresentationImpl.onRowSets(ChartReportItemPresentationImpl.java:476) at org.eclipse.birt.report.engine.presentation.LocalizedEmitter.startExtendedContent(LocalizedEmitter.java:660) at org.eclipse.birt.report.engine.presentation.LocalizedEmitter.startForeign(LocalizedEmitter
Created attachment 38585
Report Design
can you paste the full stack trace please
Trace:
There are errors on the report page: 
-There are error(s) in Chart : 198 
Error0 : null ( 1 time(s) )
detail : org.eclipse.birt.chart.exception.ChartException: $NO-RB$ null at org.eclipse.birt.chart.factory.Generator.render(Generator.java:1248) at org.eclipse.birt.chart.reportitem.ChartReportItemPresentationImpl.onRowSets(ChartReportItemPresentationImpl.java:476) at org.eclipse.birt.report.engine.presentation.LocalizedEmitter.startExtendedContent(LocalizedEmitter.java:660) at org.eclipse.birt.report.engine.presentation.LocalizedEmitter.startForeign(LocalizedEmitter.java:439) at org.eclipse.birt.report.engine.presentation.WrappedEmitter.startForeign(WrappedEmitter.java:209) at org.eclipse.birt.report.engine.presentation.DefaultPaginationEmitter.startForeign(DefaultPaginationEmitter.java:490) at org.eclipse.birt.report.engine.executor.ExtendedItemExecutor.execute(ExtendedItemExecutor.java:100) at org.eclipse.birt.report.engine.executor.ReportExecutorVisitor.visitExtendedItem(ReportExecutorVisitor.java:82) at org.eclipse.birt.report.engine.ir.ExtendedItemDesign.accept(ExtendedItemDesign.java:30) at org.eclipse.birt.report.engine.executor.GridItemExecutor.executeCell(GridItemExecutor.java:261) at org.eclipse.birt.report.engine.executor.GridItemExecutor.executeRow(GridItemExecutor.java:196) at org.eclipse.birt.report.engine.executor.GridItemExecutor.execute(GridItemExecutor.java:124) at org.eclipse.birt.report.engine.executor.ReportExecutorVisitor.visitGridItem(ReportExecutorVisitor.java:173) at org.eclipse.birt.report.engine.ir.GridItemDesign.accept(GridItemDesign.java:117) at org.eclipse.birt.report.engine.executor.ReportExecutor.execute(ReportExecutor.java:125) at org.eclipse.birt.report.engine.executor.ReportExecutor.execute(ReportExecutor.java:89) at org.eclipse.birt.report.engine.api.impl.RunAndRenderTask.run(RunAndRenderTask.java:171) at org.eclipse.birt.report.service.ReportEngineService.runAndRenderReport(Unknown Source) at org.eclipse.birt.report.presentation.aggregation.layout.EngineFragment.doService(Unknown Source) at org.eclipse.birt.report.presentation.aggregation.BaseFragment.service(Unknown Source) at org.eclipse.birt.report.servlet.ViewerServlet.doGet(Unknown Source) at javax.servlet.http.HttpServlet.service(HttpServlet.java:740) at org.apache.axis.transport.http.AxisServletBase.service(AxisServletBase.java:327) at javax.servlet.http.HttpServlet.service(HttpServlet.java:853) at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:247) at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:193) at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:256) at org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:643) at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:480) at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995) at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191) at org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:643) at org.apache.catalina.valves.CertificatesValve.invoke(CertificatesValve.java:246) at org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:641) at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:480) at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995) at org.apache.catalina.core.StandardContext.invoke(StandardContext.java:2422) at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:180) at org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:643) at org.apache.catalina.valves.ErrorDispatcherValve.invoke(ErrorDispatcherValve.java:171) at org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:641) at org.eclipse.tomcat.internal.EclipseErrorReportValve.invoke(EclipseErrorReportValve.java:153) at org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:641) at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:480) at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995) at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:174) at org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:643) at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:480) at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995) at org.apache.coyote.tomcat4.CoyoteAdapter.service(CoyoteAdapter.java:199) at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:828) at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnection(Http11Protocol.java:700) at org.apache.tomcat.util.net.TcpWorkerThread.runIt(PoolTcpEndpoint.java:584) at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:683) at java.lang.Thread.run(Thread.java:534)Caused by: java.lang.NullPointerException at org.eclipse.emf.ecore.util.EcoreUtil$Copier.createCopy(EcoreUtil.java:479) at org.eclipse.emf.ecore.util.EcoreUtil$Copier.copy(EcoreUtil.java:429) at org.eclipse.emf.ecore.util.EcoreUtil.copy(EcoreUtil.java:346) at org.eclipse.birt.chart.computation.Engine3D.&lt;init&gt;(Engine3D.java:162) at org.eclipse.birt.chart.render.AxesRenderer.get3DEngine(AxesRenderer.java:5425) at org.eclipse.birt.chart.render.Line.renderMarker(Line.java:991) at org.eclipse.birt.chart.render.Line.renderSeries(Line.java:690) at org.eclipse.birt.chart.render.AxesRenderer.renderPlot(AxesRenderer.java:2221) at org.eclipse.birt.chart.render.AxesRenderer.render(AxesRenderer.java:299) at org.eclipse.birt.chart.factory.Generator.render(Generator.java:1243) ... 54 more
						
investigate the reason for the error and reassign to correct team if needed.
fixed &gt; 20060414
Resolved.</WithStack>
    <WithOutStack>Description:
ChartException throws out when preview an existing report design.

Error log:
Error0 : null ( 1 time(s) )
detail : org.eclipse.birt.chart.exception.ChartException: $NO-RB$ null at org.eclipse.birt.chart.factory.Generator.render(Generator.java:1248) at org.eclipse.birt.chart.reportitem.ChartReportItemPresentationImpl.onRowSets(ChartReportItemPresentationImpl.java:476) at org.eclipse.birt.report.engine.presentation.LocalizedEmitter.startExtendedContent(LocalizedEmitter.java:660) at org.eclipse.birt.report.engine.presentation.LocalizedEmitter.startForeign(LocalizedEmitter
Created attachment 38585
Report Design
can you paste the full stack trace please
Trace:
There are errors on the report page: 
-There are error(s) in Chart : 198 
Error0 : null ( 1 time(s) )
detail : org.eclipse.birt.chart.exception.ChartException: $NO-RB$ null at org.eclipse.birt.chart.factory.Generator.render(Generator.java:1248) at org.eclipse.birt.chart.reportitem.ChartReportItemPresentationImpl.onRowSets(ChartReportItemPresentationImpl.java:476) at org.eclipse.birt.report.engine.presentation.LocalizedEmitter.startExtendedContent(LocalizedEmitter.java:660) at org.eclipse.birt.report.engine.presentation.LocalizedEmitter.startForeign(LocalizedEmitter.java:439) at org.eclipse.birt.report.engine.presentation.WrappedEmitter.startForeign(WrappedEmitter.java:209) at org.eclipse.birt.report.engine.presentation.DefaultPaginationEmitter.startForeign(DefaultPaginationEmitter.java:490) at org.eclipse.birt.report.engine.executor.ExtendedItemExecutor.execute(ExtendedItemExecutor.java:100) at org.eclipse.birt.report.engine.executor.ReportExecutorVisitor.visitExtendedItem(ReportExecutorVisitor.java:82) at org.eclipse.birt.report.engine.ir.ExtendedItemDesign.accept(ExtendedItemDesign.java:30) at org.eclipse.birt.report.engine.executor.GridItemExecutor.executeCell(GridItemExecutor.java:261) at org.eclipse.birt.report.engine.executor.GridItemExecutor.executeRow(GridItemExecutor.java:196) at org.eclipse.birt.report.engine.executor.GridItemExecutor.execute(GridItemExecutor.java:124) at org.eclipse.birt.report.engine.executor.ReportExecutorVisitor.visitGridItem(ReportExecutorVisitor.java:173) at org.eclipse.birt.report.engine.ir.GridItemDesign.accept(GridItemDesign.java:117) at org.eclipse.birt.report.engine.executor.ReportExecutor.execute(ReportExecutor.java:125) at org.eclipse.birt.report.engine.executor.ReportExecutor.execute(ReportExecutor.java:89) at org.eclipse.birt.report.engine.api.impl.RunAndRenderTask.run(RunAndRenderTask.java:171) at org.eclipse.birt.report.service.ReportEngineService.runAndRenderReport(Unknown Source) at org.eclipse.birt.report.presentation.aggregation.layout.EngineFragment.doService(Unknown Source) at org.eclipse.birt.report.presentation.aggregation.BaseFragment.service(Unknown Source) at org.eclipse.birt.report.servlet.ViewerServlet.doGet(Unknown Source) at javax.servlet.http.HttpServlet.service(HttpServlet.java:740) at org.apache.axis.transport.http.AxisServletBase.service(AxisServletBase.java:327) at javax.servlet.http.HttpServlet.service(HttpServlet.java:853) at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:247) at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:193) at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:256) at org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:643) at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:480) at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995) at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191) at org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:643) at org.apache.catalina.valves.CertificatesValve.invoke(CertificatesValve.java:246) at org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:641) at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:480) at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995) at org.apache.catalina.core.StandardContext.invoke(StandardContext.java:2422) at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:180) at org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:643) at org.apache.catalina.valves.ErrorDispatcherValve.invoke(ErrorDispatcherValve.java:171) at org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:641) at org.eclipse.tomcat.internal.EclipseErrorReportValve.invoke(EclipseErrorReportValve.java:153) at org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:641) at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:480) at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995) at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:174) at org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:643) at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:480) at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995) at org.apache.coyote.tomcat4.CoyoteAdapter.service(CoyoteAdapter.java:199) at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:828) at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnection(Http11Protocol.java:700) at org.apache.tomcat.util.net.TcpWorkerThread.runIt(PoolTcpEndpoint.java:584) at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:683) at java.lang.Thread.run(Thread.java:534) ... 54 more
						
investigate the reason for the error and reassign to correct team if needed.
fixed &gt; 20060414
Resolved.</WithOutStack>
  </Bug>
</infozilla-output>

