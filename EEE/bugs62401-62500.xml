<?xml version="1.0" encoding="UTF-8"?>
<infozilla-output>
  <Bug>
    <BugId amount="62401" />
    <CreationDate amount="2004-05-15 07:27:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="UI" />
    <Version amount="3.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P1" />
    <bug_severity amount="normal" />
    <Summery>[Actions] ReferenceCleanerThread in ActionContributionItem cause application can not exit normally.</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="2">
      <source_code type="multicomment">
        <location start="1226" end="1338" />
        <code>/**
 * Tells this thread to stop trying to clean up. This is usually run
 * when the cache is shutting down.
 */</code>
      </source_code>
      <source_code type="functiondef">
        <location start="1339" end="1523" />
        <code>private final void stopCleaning() {
    this.running = false;
    WeakReference referenceToStop = new WeakReference(new Object(),this.
referenceQueue);
    referenceToStop.enqueue();
}</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="0" />
    <bug_status amount="VERIFIED" />
    <resolution amount="FIXED" />
    <WithStack>When the standalone application exit, the display disposed, will call
ReferenceCleanerThread.stopCleaning() method, it simply set the running
field to false, but "reference = referenceQueue.remove();" in line 196
still blocking. And you must call System.exit() explicitlly to terminate
the currently running Java Virtual Machine. so I think it is a bug.

My env: XP home edition, jdk 1.4.2_04, and eclipse-SDK-I20040514-win32

Regards,

Eric
I was aware of this limitation when I built this piece, but for some reason 
didn't think it was a big deal.  Eclipse calls System.exit(), and Swing apps 
must call System.exit() as well.  Sorry about that....

I can change this to be an active polling solution.
Because my application is not use java.exe to launch, and after
main thread is end, the native code will release some resources.
System.exit cause that procedure never run...
Maybe can use ReferenceQueue.remove(long timeout)
instead of ReferenceQueue.remove()

Doug would it help to mark your thread as a daemon thread (see 
Thread.setDaemon)?

That way your thread will not stop the app from exiting cleanly
I resolved this problem by rewriting stopCleaning() method 
(ReferenceCleanerThread class) in the folowing way:
/**
 * Tells this thread to stop trying to clean up. This is usually run
 * when the cache is shutting down.
 */
private final void stopCleaning() {
    this.running = false;
    WeakReference referenceToStop = new WeakReference(new Object(),this.
referenceQueue);
    referenceToStop.enqueue();
}


Created attachment 11235
Patch to ActionContributionItem
I've used Alexandr's recommended fix of enqueuing a end marker reference.  It 
reference the queue itself, so should never become weakly reachable on its own.  
 
This leads to a potentially strange situation, but I can't think of when it 
might occur in real usage: the call to shutdown could happen before all of the 
image descriptors have become weakly referred -- leaking image resources.  
However, this would require someone re-writing ActionContributionItem to allow 
these threads to be shutdown outside of the display being disposed.  Not a big 
concern at this point. 
*** Bug 64519 has been marked as a duplicate of this bug. ***</WithStack>
    <WithOutStack>When the standalone application exit, the display disposed, will call
ReferenceCleanerThread.stopCleaning() method, it simply set the running
field to false, but "reference = referenceQueue.remove();" in line 196
still blocking. And you must call System.exit() explicitlly to terminate
the currently running Java Virtual Machine. so I think it is a bug.

My env: XP home edition, jdk 1.4.2_04, and eclipse-SDK-I20040514-win32

Regards,

Eric
I was aware of this limitation when I built this piece, but for some reason 
didn't think it was a big deal.  Eclipse calls System.exit(), and Swing apps 
must call System.exit() as well.  Sorry about that....

I can change this to be an active polling solution.
Because my application is not use java.exe to launch, and after
main thread is end, the native code will release some resources.
System.exit cause that procedure never run...
Maybe can use ReferenceQueue.remove(long timeout)
instead of ReferenceQueue.remove()

Doug would it help to mark your thread as a daemon thread (see 
Thread.setDaemon)?

That way your thread will not stop the app from exiting cleanly
I resolved this problem by rewriting stopCleaning() method 
(ReferenceCleanerThread class) in the folowing way:
/**
 * Tells this thread to stop trying to clean up. This is usually run
 * when the cache is shutting down.
 */
private final void stopCleaning() {
    this.running = false;
    WeakReference referenceToStop = new WeakReference(new Object(),this.
referenceQueue);
    referenceToStop.enqueue();
}


Created attachment 11235
Patch to ActionContributionItem
I've used Alexandr's recommended fix of enqueuing a end marker reference.  It 
reference the queue itself, so should never become weakly reachable on its own.  
 
This leads to a potentially strange situation, but I can't think of when it 
might occur in real usage: the call to shutdown could happen before all of the 
image descriptors have become weakly referred -- leaking image resources.  
However, this would require someone re-writing ActionContributionItem to allow 
these threads to be shutdown outside of the display being disposed.  Not a big 
concern at this point. 
*** Bug 64519 has been marked as a duplicate of this bug. ***</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="62402" />
    <CreationDate amount="2004-05-15 13:19:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="Debug" />
    <Version amount="3.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>NPE in BreakpointsView during shutdown</Summery>
    <Patches amount="0" />
    <Stacktraces amount="1">
      <Stacktrace timestamp="1437341131308">
        <Exception>java.lang.NullPointerException</Exception>
        <Reason />
        <Frames>
          <Frame depth="0">java.lang.Throwable.&lt;init&gt;(Throwable.java)</Frame>
          <Frame depth="1">java.lang.Throwable.&lt;init&gt;(Throwable.java)</Frame>
          <Frame depth="2">java.lang.NullPointerException.&lt;init&gt;(NullPointerException.java:60)</Frame>
          <Frame depth="3">org.eclipse.debug.internal.ui.views.breakpoints.BreakpointsView.dispose(BreakpointsView.java:188)</Frame>
          <Frame depth="4">org.eclipse.ui.internal.WorkbenchPartReference.dispose(WorkbenchPartReference.java:162)</Frame>
          <Frame depth="5">org.eclipse.ui.internal.ViewFactory$ViewReference.dispose(ViewFactory.java:73)</Frame>
          <Frame depth="6">org.eclipse.ui.internal.WorkbenchPage$6.run(WorkbenchPage.java:1189)</Frame>
          <Frame depth="7">org.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java)</Frame>
          <Frame depth="8">org.eclipse.core.runtime.Platform.run(Platform.java)</Frame>
          <Frame depth="9">org.eclipse.ui.internal.WorkbenchPage.dispose(WorkbenchPage.java:1187)</Frame>
          <Frame depth="10">org.eclipse.ui.internal.WorkbenchWindow.closeAllPages(WorkbenchWindow.java:588)</Frame>
          <Frame depth="11">org.eclipse.ui.internal.WorkbenchWindow.hardClose(WorkbenchWindow.java:1066)</Frame>
          <Frame depth="12">org.eclipse.ui.internal.WorkbenchWindow.busyClose(WorkbenchWindow.java:485)</Frame>
          <Frame depth="13">org.eclipse.ui.internal.WorkbenchWindow.access$0(WorkbenchWindow.java:467)</Frame>
          <Frame depth="14">org.eclipse.ui.internal.WorkbenchWindow$1.run(WorkbenchWindow.java:555)</Frame>
          <Frame depth="15">org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java)</Frame>
          <Frame depth="16">org.eclipse.ui.internal.WorkbenchWindow.close(WorkbenchWindow.java:553)</Frame>
          <Frame depth="17">org.eclipse.jface.window.WindowManager.close(WindowManager.java:101)</Frame>
          <Frame depth="18">org.eclipse.ui.internal.Workbench$10.run(Workbench.java:450)</Frame>
          <Frame depth="19">org.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java)</Frame>
          <Frame depth="20">org.eclipse.core.runtime.Platform.run(Platform.java)</Frame>
          <Frame depth="21">org.eclipse.ui.internal.Workbench.busyClose(Workbench.java:447)</Frame>
          <Frame depth="22">org.eclipse.ui.internal.Workbench.access$8(Workbench.java:389)</Frame>
          <Frame depth="23">org.eclipse.ui.internal.Workbench$12.run(Workbench.java:561)</Frame>
          <Frame depth="24">org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java)</Frame>
          <Frame depth="25">org.eclipse.ui.internal.Workbench.close(Workbench.java:559)</Frame>
          <Frame depth="26">org.eclipse.ui.internal.Workbench.close(Workbench.java:535)</Frame>
          <Frame depth="27">org.eclipse.ui.internal.WorkbenchWindow.busyClose(WorkbenchWindow.java:482)</Frame>
          <Frame depth="28">org.eclipse.ui.internal.WorkbenchWindow.access$0(WorkbenchWindow.java:467)</Frame>
          <Frame depth="29">org.eclipse.ui.internal.WorkbenchWindow$1.run(WorkbenchWindow.java:555)</Frame>
          <Frame depth="30">org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java)</Frame>
          <Frame depth="31">org.eclipse.ui.internal.WorkbenchWindow.close(WorkbenchWindow.java:553)</Frame>
          <Frame depth="32">org.eclipse.jface.window.Window.handleShellCloseEvent(Window.java:593)</Frame>
          <Frame depth="33">org.eclipse.jface.window.Window$2.shellClosed(Window.java:544)</Frame>
          <Frame depth="34">org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java)</Frame>
          <Frame depth="35">org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java)</Frame>
          <Frame depth="36">org.eclipse.swt.widgets.Widget.sendEvent(Widget.java)</Frame>
          <Frame depth="37">org.eclipse.swt.widgets.Widget.sendEvent(Widget.java)</Frame>
          <Frame depth="38">org.eclipse.swt.widgets.Widget.sendEvent(Widget.java)</Frame>
          <Frame depth="39">org.eclipse.swt.widgets.Decorations.WM_CLOSE(Decorations.java:1506)</Frame>
          <Frame depth="40">org.eclipse.swt.widgets.Control.windowProc(Control.java)</Frame>
          <Frame depth="41">org.eclipse.swt.widgets.Decorations.windowProc(Decorations.java)</Frame>
          <Frame depth="42">org.eclipse.swt.widgets.Display.windowProc(Display.java)</Frame>
          <Frame depth="43">org.eclipse.swt.internal.win32.OS.DefWindowProcW(Native Method)</Frame>
          <Frame depth="44">org.eclipse.swt.internal.win32.OS.DefWindowProc(OS.java)</Frame>
          <Frame depth="45">org.eclipse.swt.widgets.Shell.callWindowProc(Shell.java)</Frame>
          <Frame depth="46">org.eclipse.swt.widgets.Control.windowProc(Control.java)</Frame>
          <Frame depth="47">org.eclipse.swt.widgets.Decorations.windowProc(Decorations.java)</Frame>
          <Frame depth="48">org.eclipse.swt.widgets.Display.windowProc(Display.java)</Frame>
          <Frame depth="49">org.eclipse.swt.internal.win32.OS.DefWindowProcW(Native Method)</Frame>
          <Frame depth="50">org.eclipse.swt.internal.win32.OS.DefWindowProc(OS.java)</Frame>
          <Frame depth="51">org.eclipse.swt.widgets.Shell.callWindowProc(Shell.java)</Frame>
          <Frame depth="52">org.eclipse.swt.widgets.Control.windowProc(Control.java)</Frame>
          <Frame depth="53">org.eclipse.swt.widgets.Decorations.windowProc(Decorations.java)</Frame>
          <Frame depth="54">org.eclipse.swt.widgets.Display.windowProc(Display.java)</Frame>
          <Frame depth="55">org.eclipse.swt.internal.win32.OS.DispatchMessageW(Native Method)</Frame>
          <Frame depth="56">org.eclipse.swt.internal.win32.OS.DispatchMessage(OS.java)</Frame>
          <Frame depth="57">org.eclipse.swt.widgets.Display.readAndDispatch(Display.java)</Frame>
          <Frame depth="58">org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1353)</Frame>
          <Frame depth="59">org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1324)</Frame>
          <Frame depth="60">org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:243)</Frame>
          <Frame depth="61">org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:141)</Frame>
          <Frame depth="62">org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:90)</Frame>
          <Frame depth="63">org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:298)</Frame>
          <Frame depth="64">org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:249)</Frame>
          <Frame depth="65">org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:126)</Frame>
          <Frame depth="66">sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)</Frame>
          <Frame depth="67">sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:84)</Frame>
          <Frame depth="68">sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)</Frame>
          <Frame depth="69">sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:59)</Frame>
          <Frame depth="70">java.lang.reflect.Method.invoke(Method.java:390)</Frame>
          <Frame depth="71">org.eclipse.core.launcher.Main.basicRun(Main.java:269)</Frame>
          <Frame depth="72">org.eclipse.core.launcher.Main.run(Main.java:722)</Frame>
          <Frame depth="73">org.eclipse.core.launcher.Main.main(Main.java:706)</Frame>
        </Frames>
      </Stacktrace>
    </Stacktraces>
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="WORKSFORME" />
    <WithStack>I200405140800 on WXP

I was closing down Eclipse, and received an error during shutdown with the 
following in the log:

java.lang.NullPointerException
        at java.lang.Throwable.&lt;init&gt;(Throwable.java)
        at java.lang.Throwable.&lt;init&gt;(Throwable.java)
        at java.lang.NullPointerException.&lt;init&gt;(NullPointerException.java:60)
        at 
org.eclipse.debug.internal.ui.views.breakpoints.BreakpointsView.dispose
(BreakpointsView.java:188)
        at org.eclipse.ui.internal.WorkbenchPartReference.dispose
(WorkbenchPartReference.java:162)
        at org.eclipse.ui.internal.ViewFactory$ViewReference.dispose
(ViewFactory.java:73)
        at org.eclipse.ui.internal.WorkbenchPage$6.run(WorkbenchPage.java:1189)
        at org.eclipse.core.internal.runtime.InternalPlatform.run
(InternalPlatform.java)
        at org.eclipse.core.runtime.Platform.run(Platform.java)
        at org.eclipse.ui.internal.WorkbenchPage.dispose
(WorkbenchPage.java:1187)
        at org.eclipse.ui.internal.WorkbenchWindow.closeAllPages
(WorkbenchWindow.java:588)
        at org.eclipse.ui.internal.WorkbenchWindow.hardClose
(WorkbenchWindow.java:1066)
        at org.eclipse.ui.internal.WorkbenchWindow.busyClose
(WorkbenchWindow.java:485)
        at org.eclipse.ui.internal.WorkbenchWindow.access$0
(WorkbenchWindow.java:467)
        at org.eclipse.ui.internal.WorkbenchWindow$1.run
(WorkbenchWindow.java:555)
        at org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java)
        at org.eclipse.ui.internal.WorkbenchWindow.close
(WorkbenchWindow.java:553)
        at org.eclipse.jface.window.WindowManager.close(WindowManager.java:101)
        at org.eclipse.ui.internal.Workbench$10.run(Workbench.java:450)
        at org.eclipse.core.internal.runtime.InternalPlatform.run
(InternalPlatform.java)
        at org.eclipse.core.runtime.Platform.run(Platform.java)
        at org.eclipse.ui.internal.Workbench.busyClose(Workbench.java:447)
        at org.eclipse.ui.internal.Workbench.access$8(Workbench.java:389)
        at org.eclipse.ui.internal.Workbench$12.run(Workbench.java:561)
        at org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java)
        at org.eclipse.ui.internal.Workbench.close(Workbench.java:559)
        at org.eclipse.ui.internal.Workbench.close(Workbench.java:535)
        at org.eclipse.ui.internal.WorkbenchWindow.busyClose
(WorkbenchWindow.java:482)
        at org.eclipse.ui.internal.WorkbenchWindow.access$0
(WorkbenchWindow.java:467)
        at org.eclipse.ui.internal.WorkbenchWindow$1.run
(WorkbenchWindow.java:555)
        at org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java)
        at org.eclipse.ui.internal.WorkbenchWindow.close
(WorkbenchWindow.java:553)
        at org.eclipse.jface.window.Window.handleShellCloseEvent
(Window.java:593)
        at org.eclipse.jface.window.Window$2.shellClosed(Window.java:544)
        at org.eclipse.swt.widgets.TypedListener.handleEvent
(TypedListener.java)
        at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java)
        at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java)
        at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java)
        at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java)
        at org.eclipse.swt.widgets.Decorations.WM_CLOSE(Decorations.java:1506)
        at org.eclipse.swt.widgets.Control.windowProc(Control.java)
        at org.eclipse.swt.widgets.Decorations.windowProc(Decorations.java)
        at org.eclipse.swt.widgets.Display.windowProc(Display.java)
        at org.eclipse.swt.internal.win32.OS.DefWindowProcW(Native Method)
        at org.eclipse.swt.internal.win32.OS.DefWindowProc(OS.java)
        at org.eclipse.swt.widgets.Shell.callWindowProc(Shell.java)
        at org.eclipse.swt.widgets.Control.windowProc(Control.java)
        at org.eclipse.swt.widgets.Decorations.windowProc(Decorations.java)
        at org.eclipse.swt.widgets.Display.windowProc(Display.java)
        at org.eclipse.swt.internal.win32.OS.DefWindowProcW(Native Method)
        at org.eclipse.swt.internal.win32.OS.DefWindowProc(OS.java)
        at org.eclipse.swt.widgets.Shell.callWindowProc(Shell.java)
        at org.eclipse.swt.widgets.Control.windowProc(Control.java)
        at org.eclipse.swt.widgets.Decorations.windowProc(Decorations.java)
        at org.eclipse.swt.widgets.Display.windowProc(Display.java)
        at org.eclipse.swt.internal.win32.OS.DispatchMessageW(Native Method)
        at org.eclipse.swt.internal.win32.OS.DispatchMessage(OS.java)
        at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java)
        at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1353)
        at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1324)
        at org.eclipse.ui.internal.Workbench.createAndRunWorkbench
(Workbench.java:243)
        at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:141)
        at org.eclipse.ui.internal.ide.IDEApplication.run
(IDEApplication.java:90)
        at org.eclipse.core.internal.runtime.PlatformActivator$1.run
(PlatformActivator.java:298)
        at org.eclipse.core.runtime.adaptor.EclipseStarter.run
(EclipseStarter.java:249)
        at org.eclipse.core.runtime.adaptor.EclipseStarter.run
(EclipseStarter.java:126)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke
(NativeMethodAccessorImpl.java:84)
        at sun.reflect.NativeMethodAccessorImpl.invoke
(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke
(DelegatingMethodAccessorImpl.java:59)
        at java.lang.reflect.Method.invoke(Method.java:390)
        at org.eclipse.core.launcher.Main.basicRun(Main.java:269)
        at org.eclipse.core.launcher.Main.run(Main.java:722)
        at org.eclipse.core.launcher.Main.main(Main.java:706)
Do you have any steps to reproduce this error? Looking at the code, it seems 
like this can only happen if the view failed to create itself (i.e. it points 
to a null viewer).
I have only seen this problem once.  Could the view have been disposed twice 
on shutdown?
Closing since we have not seen this again. Please re-open if re-occurrs.</WithStack>
    <WithOutStack>I200405140800 on WXP

I was closing down Eclipse, and received an error during shutdown with the 
following in the log:


Do you have any steps to reproduce this error? Looking at the code, it seems 
like this can only happen if the view failed to create itself (i.e. it points 
to a null viewer).
I have only seen this problem once.  Could the view have been disposed twice 
on shutdown?
Closing since we have not seen this again. Please re-open if re-occurrs.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="62403" />
    <CreationDate amount="2004-05-15 13:54:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="Ant" />
    <Version amount="3.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Create separate Code Assist page</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="VERIFIED" />
    <resolution amount="FIXED" />
    <WithStack>To better mimic the Java editor, move the Code Assist tab to a full fledged 
sub preference page
Separate out the code into the AntCodeAssistPreferencePage.

Changes to:
plugin.xml and plugin.properties
AntEditorPreferencePage: removed content assist preferences
Created AntCodeAssistPreferencePage
Changes to AntPreferenceMessages: changed keys to reflect class that uses them
Please verify Jared.
I reworked this a bit to have a common abstract super class: 
AbstractAntEditorPreferencePage.
Verified.</WithStack>
    <WithOutStack>To better mimic the Java editor, move the Code Assist tab to a full fledged 
sub preference page
Separate out the code into the AntCodeAssistPreferencePage.

Changes to:
plugin.xml and plugin.properties
AntEditorPreferencePage: removed content assist preferences
Created AntCodeAssistPreferencePage
Changes to AntPreferenceMessages: changed keys to reflect class that uses them
Please verify Jared.
I reworked this a bit to have a common abstract super class: 
AbstractAntEditorPreferencePage.
Verified.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="62404" />
    <CreationDate amount="2004-05-15 16:11:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse Foundation" />
    <Product amount="z_Archived" />
    <component amount="Hyades" />
    <Version amount="unspecified" />
    <rep_platform amount="All" />
    <op_sys amount="All" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>CommonBaseEventLogRecord.java overwrites the log record's level, sequence and thread ID in CBE constructor.</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="4">
      <source_code type="multicomment">
        <location start="397" end="572" />
        <code>/**
     * Constructor to create a CBE log record with the parameter CBE.
     * &lt;p&gt;
     * 
     * @param commonBaseEvent The CBE of the newly created log record.
     */</code>
      </source_code>
      <source_code type="functiondef">
        <location start="573" end="1388" />
        <code>public CommonBaseEventLogRecord(CommonBaseEvent commonBaseEvent) {

        super(Level.OFF,null);
        
        if(commonBaseEvent != null){

            this.commonBaseEvent = commonBaseEvent;

	        short severity = commonBaseEvent.getSeverity();
	        
	        if(severity &gt;= 50){
	            setLevel(Level.SEVERE);
	        }
	        else if((severity &gt;= 30) &amp;&amp; (severity &lt;= 49)){            
	            setLevel(Level.WARNING);
	        }
	        else{
	            setLevel(Level.INFO);            
	        }
	        
	        setSequenceNumber(super.getSequenceNumber());
	
	        setThreadID(super.getThreadID());
	        
	        if(!commonBaseEvent.isSetCreationTime()){
	            commonBaseEvent.setCreationTimeAsLong
(System.currentTimeMillis());
	        }
        }
    }</code>
      </source_code>
      <source_code type="multicomment">
        <location start="1403" end="1579" />
        <code>/**
     * Constructor to create a CBE log record with the parameter CBE.
     * &lt;p&gt;
     * 
     * @param commonBaseEvent The CBE of the newly created log record.
     */</code>
      </source_code>
      <source_code type="functiondef">
        <location start="1580" end="3143" />
        <code>public CommonBaseEventLogRecord(CommonBaseEvent commonBaseEvent) {

        super(Level.OFF,null);
        
        if(commonBaseEvent != null){

            this.commonBaseEvent = commonBaseEvent;

	        List levelExtendedDataElements = 
commonBaseEvent.getExtendedDataElements(EXTENDED_DATA_ELEMENT_NAME_LEVEL);
	        if((levelExtendedDataElements == null) || 
(levelExtendedDataElements.size() &lt;= 0)){   
		        short severity = commonBaseEvent.getSeverity();
		        
		        if(severity &gt;= 50){
		            setLevel(Level.SEVERE);
		        }
		        else if((severity &gt;= 30) &amp;&amp; (severity &lt;= 49))
{            
		            setLevel(Level.WARNING);
		        }
		        else{
		            setLevel(Level.INFO);            
		        }
	        }
	        
            List sequenceNumberExtendedDataElements = 
commonBaseEvent.getExtendedDataElements
(EXTENDED_DATA_ELEMENT_NAME_SEQUENCE_NUMBER);
	        if((sequenceNumberExtendedDataElements == null) || 
(sequenceNumberExtendedDataElements.size() &lt;= 0)){
		        setSequenceNumber(super.getSequenceNumber());
	        }
	        
	        List threadIDExtendedDataElements = 
commonBaseEvent.getExtendedDataElements(EXTENDED_DATA_ELEMENT_NAME_THREAD_ID);
	        if((threadIDExtendedDataElements == null) || 
(threadIDExtendedDataElements.size() &lt;= 0)){
		        setThreadID(super.getThreadID());
	        }
	        
	        if(!commonBaseEvent.isSetCreationTime()){
	            commonBaseEvent.setCreationTimeAsLong
(System.currentTimeMillis());
	        }
        }
    }</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>CommonBaseEventLogRecord.java overwrites the log record's level, sequence and 
thread ID in CBE constructor.

In the code below, setLevel, setSequenceNumber, and setThreadId should not be 
called if there are corresponding JSR47 EDEs in the CBE.  (This is necessary 
for reflexivity when serializing a CBE that was in a CBELogRecord, then 
deserializing and putting back into a new CBELogRecord).

   /**
     * Constructor to create a CBE log record with the parameter CBE.
     * &lt;p&gt;
     * 
     * @param commonBaseEvent The CBE of the newly created log record.
     */
    public CommonBaseEventLogRecord(CommonBaseEvent commonBaseEvent) {

        super(Level.OFF,null);
        
        if(commonBaseEvent != null){

            this.commonBaseEvent = commonBaseEvent;

	        short severity = commonBaseEvent.getSeverity();
	        
	        if(severity &gt;= 50){
	            setLevel(Level.SEVERE);
	        }
	        else if((severity &gt;= 30) &amp;&amp; (severity &lt;= 49)){            
	            setLevel(Level.WARNING);
	        }
	        else{
	            setLevel(Level.INFO);            
	        }
	        
	        setSequenceNumber(super.getSequenceNumber());
	
	        setThreadID(super.getThreadID());
	        
	        if(!commonBaseEvent.isSetCreationTime()){
	            commonBaseEvent.setCreationTimeAsLong
(System.currentTimeMillis());
	        }
        }
    }

New version:

    /**
     * Constructor to create a CBE log record with the parameter CBE.
     * &lt;p&gt;
     * 
     * @param commonBaseEvent The CBE of the newly created log record.
     */
    public CommonBaseEventLogRecord(CommonBaseEvent commonBaseEvent) {

        super(Level.OFF,null);
        
        if(commonBaseEvent != null){

            this.commonBaseEvent = commonBaseEvent;

	        List levelExtendedDataElements = 
commonBaseEvent.getExtendedDataElements(EXTENDED_DATA_ELEMENT_NAME_LEVEL);
	        if((levelExtendedDataElements == null) || 
(levelExtendedDataElements.size() &lt;= 0)){   
		        short severity = commonBaseEvent.getSeverity();
		        
		        if(severity &gt;= 50){
		            setLevel(Level.SEVERE);
		        }
		        else if((severity &gt;= 30) &amp;&amp; (severity &lt;= 49))
{            
		            setLevel(Level.WARNING);
		        }
		        else{
		            setLevel(Level.INFO);            
		        }
	        }
	        
            List sequenceNumberExtendedDataElements = 
commonBaseEvent.getExtendedDataElements
(EXTENDED_DATA_ELEMENT_NAME_SEQUENCE_NUMBER);
	        if((sequenceNumberExtendedDataElements == null) || 
(sequenceNumberExtendedDataElements.size() &lt;= 0)){
		        setSequenceNumber(super.getSequenceNumber());
	        }
	        
	        List threadIDExtendedDataElements = 
commonBaseEvent.getExtendedDataElements(EXTENDED_DATA_ELEMENT_NAME_THREAD_ID);
	        if((threadIDExtendedDataElements == null) || 
(threadIDExtendedDataElements.size() &lt;= 0)){
		        setThreadID(super.getThreadID());
	        }
	        
	        if(!commonBaseEvent.isSetCreationTime()){
	            commonBaseEvent.setCreationTimeAsLong
(System.currentTimeMillis());
	        }
        }
    }
As discussed.
Fix is in HEAD - May 18 2004
Verified in Toronto's 20040713_1106 build.
Closing.</WithStack>
    <WithOutStack>CommonBaseEventLogRecord.java overwrites the log record's level, sequence and 
thread ID in CBE constructor.

In the code below, setLevel, setSequenceNumber, and setThreadId should not be 
called if there are corresponding JSR47 EDEs in the CBE.  (This is necessary 
for reflexivity when serializing a CBE that was in a CBELogRecord, then 
deserializing and putting back into a new CBELogRecord).

   /**
     * Constructor to create a CBE log record with the parameter CBE.
     * &lt;p&gt;
     * 
     * @param commonBaseEvent The CBE of the newly created log record.
     */
    public CommonBaseEventLogRecord(CommonBaseEvent commonBaseEvent) {

        super(Level.OFF,null);
        
        if(commonBaseEvent != null){

            this.commonBaseEvent = commonBaseEvent;

	        short severity = commonBaseEvent.getSeverity();
	        
	        if(severity &gt;= 50){
	            setLevel(Level.SEVERE);
	        }
	        else if((severity &gt;= 30) &amp;&amp; (severity &lt;= 49)){            
	            setLevel(Level.WARNING);
	        }
	        else{
	            setLevel(Level.INFO);            
	        }
	        
	        setSequenceNumber(super.getSequenceNumber());
	
	        setThreadID(super.getThreadID());
	        
	        if(!commonBaseEvent.isSetCreationTime()){
	            commonBaseEvent.setCreationTimeAsLong
(System.currentTimeMillis());
	        }
        }
    }

New version:

    /**
     * Constructor to create a CBE log record with the parameter CBE.
     * &lt;p&gt;
     * 
     * @param commonBaseEvent The CBE of the newly created log record.
     */
    public CommonBaseEventLogRecord(CommonBaseEvent commonBaseEvent) {

        super(Level.OFF,null);
        
        if(commonBaseEvent != null){

            this.commonBaseEvent = commonBaseEvent;

	        List levelExtendedDataElements = 
commonBaseEvent.getExtendedDataElements(EXTENDED_DATA_ELEMENT_NAME_LEVEL);
	        if((levelExtendedDataElements == null) || 
(levelExtendedDataElements.size() &lt;= 0)){   
		        short severity = commonBaseEvent.getSeverity();
		        
		        if(severity &gt;= 50){
		            setLevel(Level.SEVERE);
		        }
		        else if((severity &gt;= 30) &amp;&amp; (severity &lt;= 49))
{            
		            setLevel(Level.WARNING);
		        }
		        else{
		            setLevel(Level.INFO);            
		        }
	        }
	        
            List sequenceNumberExtendedDataElements = 
commonBaseEvent.getExtendedDataElements
(EXTENDED_DATA_ELEMENT_NAME_SEQUENCE_NUMBER);
	        if((sequenceNumberExtendedDataElements == null) || 
(sequenceNumberExtendedDataElements.size() &lt;= 0)){
		        setSequenceNumber(super.getSequenceNumber());
	        }
	        
	        List threadIDExtendedDataElements = 
commonBaseEvent.getExtendedDataElements(EXTENDED_DATA_ELEMENT_NAME_THREAD_ID);
	        if((threadIDExtendedDataElements == null) || 
(threadIDExtendedDataElements.size() &lt;= 0)){
		        setThreadID(super.getThreadID());
	        }
	        
	        if(!commonBaseEvent.isSetCreationTime()){
	            commonBaseEvent.setCreationTimeAsLong
(System.currentTimeMillis());
	        }
        }
    }
As discussed.
Fix is in HEAD - May 18 2004
Verified in Toronto's 20040713_1106 build.
Closing.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="62405" />
    <CreationDate amount="2004-05-15 16:19:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="SWT" />
    <Version amount="3.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Linux-GTK" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Editor drop down performance slow on Linux-GTK on mouse move</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="1">
      <source_code type="ifstatement">
        <location start="2214" end="2351" />
        <code>if (control != null ) {
	shell = control.getShell ();
	if ((shell.style &amp; SWT.ON_TOP) != 0) {
		OS.gtk_grab_add (shell.shellHandle);
	}
}</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="1">
      <Enumeration lines="3">
        <Lines>
          <Line>1.  Open 5 or so files.</Line>
          <Line>2.  Open Editor Drop Down.</Line>
          <Line>3.  Move the mouse cursor up and down over the list of editors quickly a few times.</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="RESOLVED" />
    <resolution amount="WONTFIX" />
    <WithStack>I wonder if the fix to bug 44915 introduced a performance regression.  I'm using
I20040513 GTK and the UI is sluggish in a number of places.  The most apparent
is when using the "Open Editor Drop Down" command to bring up the list of open
editors.

1.  Open 5 or so files.
2.  Open Editor Drop Down.
3.  Move the mouse cursor up and down over the list of editors quickly a few times.

Notice that the highlighting of the list elements trails behind the mouse
movement significantly.  That is, if I move the mouse over the first, then
second, then third, etc. editor in the list and then reverse the direction back
up to the first editor in the list, the highlight moves from the first to the
second to the third, etc., but it lags behind the mouse.

This kind of behavior seems suspiciously likely to be a result of queuing UI
events, as I understand the fix for 44915 does.
Yes, it does seem very suspicious.  Vikki to investigate.
The case listed here is not related to the clipboard fix - 
gtk_clipboard_wait_for_contents is not running at this time.

When the shell with the list of editors is first opened, Shell.setVisible is 
called which uses the "dispatchEvents" mechanism.  However, this completes 
fairly quickly and the mouse movement response is still sluggish.  
No "deferredEvents" behaviour is going on while the mouse is moving around and 
the response is still sluggish.
AbstractTableInformationControl$3mouseMove is the place where the work is 
being done.  It is calling Table.getItem(Point) and Table.setSelection([]
TableItem).  I think the performance of Table.setSelection(TableItem[]) is 
slowing this down.
FH changed Table and Tree in this area this recently.  Is the new code really 
slow?
I changed only Tree.getItem(Point) and TreeItem.getBounds(), didn't touch 
Table.
*** Bug 62290 has been marked as a duplicate of this bug. ***
If we do not use the ON_TOP style for the editor drop down then the selection
events seem to be processed speedily.  I believe the bug has to do with ON_TOP
somehow.
OK, I can reproduce it in cases where the window is not ON_TOP, sorry.
I think Billy is onto something with the ON_TOP.

The following code in Display.eventProc is causing the problem:

if (control != null ) {
	shell = control.getShell ();
	if ((shell.style &amp; SWT.ON_TOP) != 0) {
		OS.gtk_grab_add (shell.shellHandle);
	}
}

Silenio, what problem was the gtk_grab_add addressing?  Is there another 
solution?
SSQ, why did we do this silly grab thing (yes, I do remember that it was my 
hack)?
If the code is removed, you will not be able to click on ON_TOP shell that is a
child of a modal dialog.

Window-&gt;Preferences-&gt;Java-&gt;Editor-&gt;Templates-&gt;New Button-&gt;Pattern text-&gt;&lt;invoke
code assist&gt;
I can still reproduce this problem after removing the call
gtk_grab_add()/gtk_grab_remove() in Display.eventProc().
Ok, I don't think the problem has anything to do if the code in
Display.eventProc(). Here are two scenarios (both are not affected by the code
in eventProc()).

1) As soon as you click the button, start moving the mouse in circles and never
stop. The selection will not catch up if the mouse ever. If you stop and let all
the outstanding events happen, when you move the mouse again, the selection will
follow the mouse properly.

2) Click the button and do not move the mouse, let the popup appear fully (1 or
2 seconds). Move the mouse, the selection willl follow it properly.
More info, if you move the mouse outsize of the popup window and then back,
selection will start to follow the mouse properly.
Bug 67458 should be marked as a duplicate of this bug.

Silenio and I discovered that mouse move hints are not being correctly handled:
the hints slow down mouse events, but report the original positions when it
started grabbing events, not the most recent position.

The fix is to query the pointer's actual position on a mouse move event if the
motion hints are turned on and the Gdk motion event has its hint flag set to
true.  Using this fix in the Sash code solves bug 54517 about fast view resizing
being slow.  Using the same logic for mouse motion events in
Control.sendMouseEvent fixes this bug about the editor drop down being slow.
We released changes that will fix the slowness resizing fast views.

GtkTreeView does not set the pointer motion hint, so it gets all motion events
and that is way it is slow. I don't think we should set the motion hint for this
widget though, because GTK might not handle that properly, since they do not
expect it.
I opened this bug against GtkTreeView:
http://bugzilla.gnome.org/show_bug.cgi?id=144729
We should probably just work around this bug in the UI code for now by disabling
the selection code on GTK+, since there are no plans to add the motion hint on
the tree view upstream (and it would be too dangerous for SWT to set the hint).
I was able to come up with a small GTK+ test case which exhibits the same weird
performance problem.  Unfortunately, the cause seems to be a complex interaction
with the idle handlers for resizing and validating rows in GtkTreeView:

  http://bugzilla.gnome.org/show_bug.cgi?id=170600

The fix is to run the row validator, but there is no public API to do this and I
cannot find any suitable workaround in SWT.  While the easier workaround is
simply to set the motion hint, which means we don't have to deal with so many
mouse events in the first place, this is dangerous, was rejected upstream, and
the newly reported bug is really what seems to be causing setting the cursor to
be slow in the first place.

Even worse, this bug is also machine and GTK+ version dependent.  It doesn't
happen on Doug's machine (GTK+ 2.6), nor on jrb's machine (also GTK+ 2.6), and
for me it happens more easily on GTK+ 2.6 than GTK+ 2.4.  Furthermore, the
selection is slow in general for me under RHEL3/BlueCurve (GTK+ 2.2), but
generally snappy on FC3/BlueCurve (GTK+ 2.4).

Given that there is a clear bug in GTK+, this problem is not reproducable
everywhere, and there is no good workaround in SWT, I think it is best to close
this as WONTFIX.  I still think it may be worth changing the UI behaviour, but I
will file a new bug for this.
I've had a change of heart and I think I will reopen this bug.  It would be nice
to figure out why it's slow in general on some machines: under RHEL3 and on my
machine at home, it's a lot slower than it should be.  Furthermore, the fix in
GTK+ is strange, so maybe after it's fixed there we could figure out a stable
workaround.  Best to leave this open.
Finding out what is really wrong, does not preclude putting in a workaround to fix the appearance in 
this particular instance. Can something be done about that? Is this a UI problem or an SWT problem?
As a rule we never want to have platform code in UI, but I'm afraid this problem
will not get tracked and we will never bring back the feature when GTK does
improve.  I'm going to remove the feature for GTK only in the UI, and leave this
bug open with a reference to it from the code.
That is fine with me.
MVM, did you ever get to this?  It makes a big difference on GTK.
Created attachment 20651
attaching some code that I'm experimenting with
I've put a workaround in the UI in HEAD that optimizes the current code to do a
lot less work during the mouse moves, and secondly for GTK tries to call
setSelection() about %75 less.  This seems to work quite well on my Linux
machine (which WAS exhibiting the slowness).  I'd like to here from Billy if
this makes his test machines usable.
As of I20050510-0010, the code in head isn't fixing the problem (I just tried 
it).  Can I give you a demonstration?
yes please

*** Bug 104926 has been marked as a duplicate of this bug. ***
Sigh, I am doomed, never to get this worked around in Eclipse, even though the 
work around is trivial and the failure makes Eclipse look horrible.
*** Bug 148293 has been marked as a duplicate of this bug. ***
Doomed I tell you, doomed ... R2?
bleep brrrrrrrrr bee-doop.

I've tried for a while to get this worked around in Eclipse and now I'm giving up.  Since it has already fixed in newer versions of GTK, I'm going to have to close it as WONTFIX (really, already fixed in GTK).</WithStack>
    <WithOutStack>I wonder if the fix to bug 44915 introduced a performance regression.  I'm using
I20040513 GTK and the UI is sluggish in a number of places.  The most apparent
is when using the "Open Editor Drop Down" command to bring up the list of open
editors.

1.  Open 5 or so files.
2.  Open Editor Drop Down.
3.  Move the mouse cursor up and down over the list of editors quickly a few times.

Notice that the highlighting of the list elements trails behind the mouse
movement significantly.  That is, if I move the mouse over the first, then
second, then third, etc. editor in the list and then reverse the direction back
up to the first editor in the list, the highlight moves from the first to the
second to the third, etc., but it lags behind the mouse.

This kind of behavior seems suspiciously likely to be a result of queuing UI
events, as I understand the fix for 44915 does.
Yes, it does seem very suspicious.  Vikki to investigate.
The case listed here is not related to the clipboard fix - 
gtk_clipboard_wait_for_contents is not running at this time.

When the shell with the list of editors is first opened, Shell.setVisible is 
called which uses the "dispatchEvents" mechanism.  However, this completes 
fairly quickly and the mouse movement response is still sluggish.  
No "deferredEvents" behaviour is going on while the mouse is moving around and 
the response is still sluggish.
AbstractTableInformationControl$3mouseMove is the place where the work is 
being done.  It is calling Table.getItem(Point) and Table.setSelection([]
TableItem).  I think the performance of Table.setSelection(TableItem[]) is 
slowing this down.
FH changed Table and Tree in this area this recently.  Is the new code really 
slow?
I changed only Tree.getItem(Point) and TreeItem.getBounds(), didn't touch 
Table.
*** Bug 62290 has been marked as a duplicate of this bug. ***
If we do not use the ON_TOP style for the editor drop down then the selection
events seem to be processed speedily.  I believe the bug has to do with ON_TOP
somehow.
OK, I can reproduce it in cases where the window is not ON_TOP, sorry.
I think Billy is onto something with the ON_TOP.

The following code in Display.eventProc is causing the problem:

if (control != null ) {
	shell = control.getShell ();
	if ((shell.style &amp; SWT.ON_TOP) != 0) {
		OS.gtk_grab_add (shell.shellHandle);
	}
}

Silenio, what problem was the gtk_grab_add addressing?  Is there another 
solution?
SSQ, why did we do this silly grab thing (yes, I do remember that it was my 
hack)?
If the code is removed, you will not be able to click on ON_TOP shell that is a
child of a modal dialog.

Window-&gt;Preferences-&gt;Java-&gt;Editor-&gt;Templates-&gt;New Button-&gt;Pattern text-&gt;&lt;invoke
code assist&gt;
I can still reproduce this problem after removing the call
gtk_grab_add()/gtk_grab_remove() in Display.eventProc().
Ok, I don't think the problem has anything to do if the code in
Display.eventProc(). Here are two scenarios (both are not affected by the code
in eventProc()).

1) As soon as you click the button, start moving the mouse in circles and never
stop. The selection will not catch up if the mouse ever. If you stop and let all
the outstanding events happen, when you move the mouse again, the selection will
follow the mouse properly.

2) Click the button and do not move the mouse, let the popup appear fully (1 or
2 seconds). Move the mouse, the selection willl follow it properly.
More info, if you move the mouse outsize of the popup window and then back,
selection will start to follow the mouse properly.
Bug 67458 should be marked as a duplicate of this bug.

Silenio and I discovered that mouse move hints are not being correctly handled:
the hints slow down mouse events, but report the original positions when it
started grabbing events, not the most recent position.

The fix is to query the pointer's actual position on a mouse move event if the
motion hints are turned on and the Gdk motion event has its hint flag set to
true.  Using this fix in the Sash code solves bug 54517 about fast view resizing
being slow.  Using the same logic for mouse motion events in
Control.sendMouseEvent fixes this bug about the editor drop down being slow.
We released changes that will fix the slowness resizing fast views.

GtkTreeView does not set the pointer motion hint, so it gets all motion events
and that is way it is slow. I don't think we should set the motion hint for this
widget though, because GTK might not handle that properly, since they do not
expect it.
I opened this bug against GtkTreeView:
http://bugzilla.gnome.org/show_bug.cgi?id=144729
We should probably just work around this bug in the UI code for now by disabling
the selection code on GTK+, since there are no plans to add the motion hint on
the tree view upstream (and it would be too dangerous for SWT to set the hint).
I was able to come up with a small GTK+ test case which exhibits the same weird
performance problem.  Unfortunately, the cause seems to be a complex interaction
with the idle handlers for resizing and validating rows in GtkTreeView:

  http://bugzilla.gnome.org/show_bug.cgi?id=170600

The fix is to run the row validator, but there is no public API to do this and I
cannot find any suitable workaround in SWT.  While the easier workaround is
simply to set the motion hint, which means we don't have to deal with so many
mouse events in the first place, this is dangerous, was rejected upstream, and
the newly reported bug is really what seems to be causing setting the cursor to
be slow in the first place.

Even worse, this bug is also machine and GTK+ version dependent.  It doesn't
happen on Doug's machine (GTK+ 2.6), nor on jrb's machine (also GTK+ 2.6), and
for me it happens more easily on GTK+ 2.6 than GTK+ 2.4.  Furthermore, the
selection is slow in general for me under RHEL3/BlueCurve (GTK+ 2.2), but
generally snappy on FC3/BlueCurve (GTK+ 2.4).

Given that there is a clear bug in GTK+, this problem is not reproducable
everywhere, and there is no good workaround in SWT, I think it is best to close
this as WONTFIX.  I still think it may be worth changing the UI behaviour, but I
will file a new bug for this.
I've had a change of heart and I think I will reopen this bug.  It would be nice
to figure out why it's slow in general on some machines: under RHEL3 and on my
machine at home, it's a lot slower than it should be.  Furthermore, the fix in
GTK+ is strange, so maybe after it's fixed there we could figure out a stable
workaround.  Best to leave this open.
Finding out what is really wrong, does not preclude putting in a workaround to fix the appearance in 
this particular instance. Can something be done about that? Is this a UI problem or an SWT problem?
As a rule we never want to have platform code in UI, but I'm afraid this problem
will not get tracked and we will never bring back the feature when GTK does
improve.  I'm going to remove the feature for GTK only in the UI, and leave this
bug open with a reference to it from the code.
That is fine with me.
MVM, did you ever get to this?  It makes a big difference on GTK.
Created attachment 20651
attaching some code that I'm experimenting with
I've put a workaround in the UI in HEAD that optimizes the current code to do a
lot less work during the mouse moves, and secondly for GTK tries to call
setSelection() about %75 less.  This seems to work quite well on my Linux
machine (which WAS exhibiting the slowness).  I'd like to here from Billy if
this makes his test machines usable.
As of I20050510-0010, the code in head isn't fixing the problem (I just tried 
it).  Can I give you a demonstration?
yes please

*** Bug 104926 has been marked as a duplicate of this bug. ***
Sigh, I am doomed, never to get this worked around in Eclipse, even though the 
work around is trivial and the failure makes Eclipse look horrible.
*** Bug 148293 has been marked as a duplicate of this bug. ***
Doomed I tell you, doomed ... R2?
bleep brrrrrrrrr bee-doop.

I've tried for a while to get this worked around in Eclipse and now I'm giving up.  Since it has already fixed in newer versions of GTK, I'm going to have to close it as WONTFIX (really, already fixed in GTK).</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="62406" />
    <CreationDate amount="2004-05-15 17:32:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="SWT" />
    <Version amount="3.0" />
    <rep_platform amount="Macintosh" />
    <op_sys amount="Mac OS X - Carbon (unsup.)" />
    <priority amount="P1" />
    <bug_severity amount="major" />
    <Summery>Trees don't show nodes on OS X 10.3.3 build 7G43</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="1">
      <source_code type="functiondef">
        <location start="2343" end="2641" />
        <code>void redraw (int propertyID) {
	if (parent.drawCount != 0) return;
	propertyID = OS.kDataBrowserNoItem;
	int parentID = parentItem == null ? OS.kDataBrowserNoItem : parentItem.id;
	OS.UpdateDataBrowserItems (parent.handle, parentID, 1, new int[] {id}, 
OS.kDataBrowserItemNoProperty, propertyID);
}</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="WONTFIX" />
    <WithStack>When running any Eclipse build newer than M8 on a new PowerBook G4 15" with OS X 10.3.3 (build 
7G43) trees don't have any nodes. This makes it very difficult to use any of these builds ;-)
Last Eclipse build tested is I-I20040514-200405140800.
Created attachment 10695
Screenshot showing Package Explorer
Created attachment 10696
Preferences dialog
McQ, have you ever seen this?  Is this build of OS X already shipping?
No. I have been running all of the recent builds, and have not seen this. Does not happen for me in the 
200405140800 I-build.
What build of OS X are you running?
It also happens in build I200405171219.
AFAIK OS X 10.3 build 7G43 has only been distributed with the new generation of PowerBooks.

How can I help?

I'm running "10.3.3 (7F44)".

McQ, this seems very serious, can we get someone from Apple to look at this? 
(at least confirm it)
Andre has the best contacts with Apple. I'm not sure what else we can do except try and get that seed 
of the OS. It may be on the developer site.

Andre?
Since I'm on vacation, I have only sporadic access to the Internet.
I don't have access to the latest builds.
However, I have seen this problem once in the 200405131200 build, and in one or two earlier builds.
Since I've seen it very sporadic (every two weeks), I could not identify a pattern.
I don't think it is a problem on Apple's side, since I hadn't installed any new OS updates when the 
problem first occurred.
IIRC it first occured around the time when the Tree sorting/updating performance improvement was 
done.
Thanks Andre.
Increasing the priority.

Chris, does it happen every time?  If so, I can give you a hack that turns off 
the "Tree sorting/updating performance" improvement to see whether this is 
causing the trouble.
Steve, it happens every time. Last checked with build I200405190010.
Funny thing is, I created a new Java Project with a fresh copy of I200405190010. There the trees in the 
various wizard pages (e.g. Source, Libraries) have been working. After deleting the project and creating 
a new one, the trees won't work. Trees are still not working in Package Explorer and Preferences.
I will happily try the hack.
Chris, can you load SWT from HEAD and replace TreeItem.redraw(int) with the following and tell us if 
the problem goes away?  If you need help doing this, please ask.  Thanks.

void redraw (int propertyID) {
	if (parent.drawCount != 0) return;
	propertyID = OS.kDataBrowserNoItem;
	int parentID = parentItem == null ? OS.kDataBrowserNoItem : parentItem.id;
	OS.UpdateDataBrowserItems (parent.handle, parentID, 1, new int[] {id}, 
OS.kDataBrowserItemNoProperty, propertyID);
}
Steve, it is still not working after applying the proposed change. It is working after replacing Tree.java 
with Revision 1.25 and TreeItem.java with Revision 1.8.
I will look at it in a few hours.
I tried this on 7H57 (late 10.3.4 build) and it is not happening there. Prefs dialog looks okay, package 
explorer looks okay. This is with build ID 200405190010.
Given that the problem is not effected by our recent optimizations, and that it does not show up in 
either less recent or more recent versions than 7G43 (which we do not have access to), it seems clear 
that this is a bug in a particular seed of the Mac OS code.

I believe 10.3.4 is getting close to release. Once that is available, we will test again with it to verify that 
the problem has been fixed. Until then, it's not clear that there is much we can do to help. :-(
Thanks Chris, given that the problem seems to be fixed in new releases of OS X 
and that we are screaming towards RC0 and 3.0, I'm going to have to mark this 
as WONTFIX.

You have done good work narrowing it down to the revisions of Tree and 
TreeItem that cause the problem.  I suspect it is happening because we 
switched to using kDataBrowserUserToggledContainer for SWT.Expand and 
SWT.Collapse and the bug is that we don't get them or the state is wrong when 
we do so we don't call Eclipse properly (they lazily fill tree items when a 
node is expanded for every tree in Eclipse).

If you take the work further and can provide a simple patch that WORKSFORYOU 
and WORKSFORME, then we could fix this.  The big problem we have is that we 
don't have a release of OS X to test on.

Thanks again for your work in this matter.
I cannot reproduce this problem in 10.3.4 (7H63)
It still shows up under 10.3.4 (7H63) when using the keyboard to expand a tree. When using the mouse 
all trees are working fine. Tested with I200405260010 and a new workspace.
Yes, but that problem seems to be independent from the OS version (hence unrelated to this bug).
It is covered by bug #63716.
Note that bug#63716 is fixed.</WithStack>
    <WithOutStack>When running any Eclipse build newer than M8 on a new PowerBook G4 15" with OS X 10.3.3 (build 
7G43) trees don't have any nodes. This makes it very difficult to use any of these builds ;-)
Last Eclipse build tested is I-I20040514-200405140800.
Created attachment 10695
Screenshot showing Package Explorer
Created attachment 10696
Preferences dialog
McQ, have you ever seen this?  Is this build of OS X already shipping?
No. I have been running all of the recent builds, and have not seen this. Does not happen for me in the 
200405140800 I-build.
What build of OS X are you running?
It also happens in build I200405171219.
AFAIK OS X 10.3 build 7G43 has only been distributed with the new generation of PowerBooks.

How can I help?

I'm running "10.3.3 (7F44)".

McQ, this seems very serious, can we get someone from Apple to look at this? 
(at least confirm it)
Andre has the best contacts with Apple. I'm not sure what else we can do except try and get that seed 
of the OS. It may be on the developer site.

Andre?
Since I'm on vacation, I have only sporadic access to the Internet.
I don't have access to the latest builds.
However, I have seen this problem once in the 200405131200 build, and in one or two earlier builds.
Since I've seen it very sporadic (every two weeks), I could not identify a pattern.
I don't think it is a problem on Apple's side, since I hadn't installed any new OS updates when the 
problem first occurred.
IIRC it first occured around the time when the Tree sorting/updating performance improvement was 
done.
Thanks Andre.
Increasing the priority.

Chris, does it happen every time?  If so, I can give you a hack that turns off 
the "Tree sorting/updating performance" improvement to see whether this is 
causing the trouble.
Steve, it happens every time. Last checked with build I200405190010.
Funny thing is, I created a new Java Project with a fresh copy of I200405190010. There the trees in the 
various wizard pages (e.g. Source, Libraries) have been working. After deleting the project and creating 
a new one, the trees won't work. Trees are still not working in Package Explorer and Preferences.
I will happily try the hack.
Chris, can you load SWT from HEAD and replace TreeItem.redraw(int) with the following and tell us if 
the problem goes away?  If you need help doing this, please ask.  Thanks.

void redraw (int propertyID) {
	if (parent.drawCount != 0) return;
	propertyID = OS.kDataBrowserNoItem;
	int parentID = parentItem == null ? OS.kDataBrowserNoItem : parentItem.id;
	OS.UpdateDataBrowserItems (parent.handle, parentID, 1, new int[] {id}, 
OS.kDataBrowserItemNoProperty, propertyID);
}
Steve, it is still not working after applying the proposed change. It is working after replacing Tree.java 
with Revision 1.25 and TreeItem.java with Revision 1.8.
I will look at it in a few hours.
I tried this on 7H57 (late 10.3.4 build) and it is not happening there. Prefs dialog looks okay, package 
explorer looks okay. This is with build ID 200405190010.
Given that the problem is not effected by our recent optimizations, and that it does not show up in 
either less recent or more recent versions than 7G43 (which we do not have access to), it seems clear 
that this is a bug in a particular seed of the Mac OS code.

I believe 10.3.4 is getting close to release. Once that is available, we will test again with it to verify that 
the problem has been fixed. Until then, it's not clear that there is much we can do to help. :-(
Thanks Chris, given that the problem seems to be fixed in new releases of OS X 
and that we are screaming towards RC0 and 3.0, I'm going to have to mark this 
as WONTFIX.

You have done good work narrowing it down to the revisions of Tree and 
TreeItem that cause the problem.  I suspect it is happening because we 
switched to using kDataBrowserUserToggledContainer for SWT.Expand and 
SWT.Collapse and the bug is that we don't get them or the state is wrong when 
we do so we don't call Eclipse properly (they lazily fill tree items when a 
node is expanded for every tree in Eclipse).

If you take the work further and can provide a simple patch that WORKSFORYOU 
and WORKSFORME, then we could fix this.  The big problem we have is that we 
don't have a release of OS X to test on.

Thanks again for your work in this matter.
I cannot reproduce this problem in 10.3.4 (7H63)
It still shows up under 10.3.4 (7H63) when using the keyboard to expand a tree. When using the mouse 
all trees are working fine. Tested with I200405260010 and a new workspace.
Yes, but that problem seems to be independent from the OS version (hence unrelated to this bug).
It is covered by bug #63716.
Note that bug#63716 is fixed.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="62407" />
    <CreationDate amount="2004-05-15 18:18:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="Team" />
    <Version amount="3.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows 2000" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>new classes not created from patches</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="4">
        <Lines>
          <Line>- load the org.eclipse.ui.workbench project</Line>
          <Line>- select Team -&gt; Apply patch from the project's popup menu (in the package</Line>
          <Line>explorer)</Line>
          <Line>- choose the patch and click apply</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="RESOLVED" />
    <resolution amount="WORKSFORME" />
    <WithStack>Build id: 200405140800

If a patch defines a new class, that class is not created when the patch is 
applied.  I'll attach a sample patch, do the following to reproduce:

- load the org.eclipse.ui.workbench project
- select Team -&gt; Apply patch from the project's popup menu (in the package 
explorer)
- choose the patch and click apply

The project and package get a '&gt;' modification marker, but the class isn't 
there.  It should add a class 'org.eclipse.ui.AAASampleClass', its not in the 
package explorer and is not found with Ctrl-Shift-T.

The patch was also created from this build, but I orginally found the problem in 
a patch created from the may11 integration build.
Created attachment 10697
sample patch to demonstrate the problem
*** Bug 62408 has been marked as a duplicate of this bug. ***
are you sure? I've just applied the patch and the file shows up in the navigator
and in the sync view as an outgoing addition. I'm running with the latest from
HEAD so this may of been fixed since then?
One other thing I noticed (after opening both of these bugs) is that I couldn't 
create a new class of the same name (I figured I would copy and paste).  From 
the point of view of the New Class Wizard, eclipse thought the class already 
existed.  But from the perspective of the Ctrl-Shift-T dialog it did not.

It was definately happening, and I was able to consistently reproduce it.

This was on my home machine which has "only" 256 Mb of memory, so perhaps some 
low-memory condition caused the errors?  I'll check a newer load on the same 
machine when I get a chance.</WithStack>
    <WithOutStack>Build id: 200405140800

If a patch defines a new class, that class is not created when the patch is 
applied.  I'll attach a sample patch, do the following to reproduce:

- load the org.eclipse.ui.workbench project
- select Team -&gt; Apply patch from the project's popup menu (in the package 
explorer)
- choose the patch and click apply

The project and package get a '&gt;' modification marker, but the class isn't 
there.  It should add a class 'org.eclipse.ui.AAASampleClass', its not in the 
package explorer and is not found with Ctrl-Shift-T.

The patch was also created from this build, but I orginally found the problem in 
a patch created from the may11 integration build.
Created attachment 10697
sample patch to demonstrate the problem
*** Bug 62408 has been marked as a duplicate of this bug. ***
are you sure? I've just applied the patch and the file shows up in the navigator
and in the sync view as an outgoing addition. I'm running with the latest from
HEAD so this may of been fixed since then?
One other thing I noticed (after opening both of these bugs) is that I couldn't 
create a new class of the same name (I figured I would copy and paste).  From 
the point of view of the New Class Wizard, eclipse thought the class already 
existed.  But from the perspective of the Ctrl-Shift-T dialog it did not.

It was definately happening, and I was able to consistently reproduce it.

This was on my home machine which has "only" 256 Mb of memory, so perhaps some 
low-memory condition caused the errors?  I'll check a newer load on the same 
machine when I get a chance.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="62408" />
    <CreationDate amount="2004-05-15 18:18:00 -0400" />
    <DupId amount="62407" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="Team" />
    <Version amount="3.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows 2000" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>new classes not created from patches</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="4">
        <Lines>
          <Line>- load the org.eclipse.ui.workbench project</Line>
          <Line>- select Team -&gt; Apply patch from the project's popup menu (in the package</Line>
          <Line>explorer)</Line>
          <Line>- choose the patch and click apply</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="RESOLVED" />
    <resolution amount="DUPLICATE" />
    <WithStack>Build id: 200405140800

If a patch defines a new class, that class is not created when the patch is 
applied.  I'll attach a sample patch, do the following to reproduce:

- load the org.eclipse.ui.workbench project
- select Team -&gt; Apply patch from the project's popup menu (in the package 
explorer)
- choose the patch and click apply

The project and package get a '&gt;' modification marker, but the class isn't 
there.  It should add a class 'org.eclipse.ui.AAASampleClass', its not in the 
package explorer and is not found with Ctrl-Shift-T.

The patch was also created from this build, but I orginally found the problem in 
a patch created from the may11 integration build.
Accidentally created this bug twice.

*** This bug has been marked as a duplicate of 62407 ***</WithStack>
    <WithOutStack>Build id: 200405140800

If a patch defines a new class, that class is not created when the patch is 
applied.  I'll attach a sample patch, do the following to reproduce:

- load the org.eclipse.ui.workbench project
- select Team -&gt; Apply patch from the project's popup menu (in the package 
explorer)
- choose the patch and click apply

The project and package get a '&gt;' modification marker, but the class isn't 
there.  It should add a class 'org.eclipse.ui.AAASampleClass', its not in the 
package explorer and is not found with Ctrl-Shift-T.

The patch was also created from this build, but I orginally found the problem in 
a patch created from the may11 integration build.
Accidentally created this bug twice.

*** This bug has been marked as a duplicate of 62407 ***</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="62409" />
    <CreationDate amount="2004-05-15 19:07:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse Foundation" />
    <Product amount="z_Archived" />
    <component amount="Hyades" />
    <Version amount="unspecified" />
    <rep_platform amount="All" />
    <op_sys amount="All" />
    <priority amount="P3" />
    <bug_severity amount="major" />
    <Summery>Performance improvements for EMF Common Base Event implementation.</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="11">
        <Lines>
          <Line>1) New public CommonBaseEventLogRecord(CommonBaseEvent commonBaseEvent, Level</Line>
          <Line>level) constructor.</Line>
          <Line />
          <Line>2) Caching all LogRecord properties (ie. only including those properties that</Line>
          <Line>end up as Extended Data Elements, not including things that map directly into</Line>
          <Line>the Common Base Event proper).  Use a namespace and make the tacit assumption</Line>
          <Line>that users cannot set Extended Data Elements using the same namspace.  This</Line>
          <Line>would remove all the look-ups in the constructors and setters (if someone calls</Line>
          <Line>setXYZ more than once on the LogRecord, problems may exist so keep an isSet bit</Line>
          <Line>for each of the attributes that are being cached) and is not a huge</Line>
          <Line>inconvenience to the user.</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>Performance improvements needed to CBE logging implementation as 
necessitated/indicated by early experience of some key logging consumers.
As of the stipulated date (e.g. May 27, 2004) for various logging consumers 
have not provided requirements for Common Base Event performance improvements.  
Therefore, no Common Base Event performance improvements will be provided for 
M10.
Reopening for the newly received suggested performance improvement:

-EventFormatter.toCanonicalXMLString
(org.eclipse.hyades.logging.events.cbe.CommonBaseEvent, boolean) is getting the 
CBE data as strings and trying to normalize(XmlUtility.Normalize()), can we 
avoid calling the normalize method for certain fields in CBE which we know 
wouldn't need normalization? (Ex: Timestamp)
-When adding guaranteed unique elements to an EList (e.g. EList.add()), cast 
the EList down to an InternalEList and use to addUnique() API.  This API does 
not use O(N) time to walk the EList checking for unique elements.
-EventFormatter.toCanonicalXMLString
we can use CDATA on fields which are not attribute to avoid calling the 
XMLUtility.normalize on these fields.
Consider implementing the following performance enhancements in 
CommonBaseEventLogRecord.java:

1) New public CommonBaseEventLogRecord(CommonBaseEvent commonBaseEvent, Level 
level) constructor.  

2) Caching all LogRecord properties (ie. only including those properties that 
end up as Extended Data Elements, not including things that map directly into 
the Common Base Event proper).  Use a namespace and make the tacit assumption 
that users cannot set Extended Data Elements using the same namspace.  This 
would remove all the look-ups in the constructors and setters (if someone calls 
setXYZ more than once on the LogRecord, problems may exist so keep an isSet bit 
for each of the attributes that are being cached) and is not a huge 
inconvenience to the user.  

NOTE:  Existing users should be made aware of this enhancements through 
deprecation of existing static constants and newly defined static constants.
I have seen interest in this for 3.0.1.  I see it is targeted for 3.1 but the 
bug history shows several different targets over time.  Has some work been 
done in 3.0.1 and the rest is intended for 3.1?  The suggestion in comment #5 
is an api change that really should not be in 3.0.1.

No work for this defect has been checked-in to 3.0.1.  As such, this defect 
will be addressed in 3.1 (i2).
This has been raised by the WAS folks again.  Using our 
CommonBaseEventLogRecord causes performance degregation.  We will cache the 
ExtendedDataElements in the Logrecord as opposed to using the pure delegation 
model.  This will save them the performance grief of retrieving these values.
CommonBaseEventLogRecord.java checked-in to Haydes_v3_0_1 on August 19, 2004.
CommonBaseEventLogRecord.java and JUnit test suite checked-in to HEAD on August 
19, 2004.

This defect will only make the following enhancements for 
CommonBaseEventLogRecord.java for 3.0.1 and 3.1 (HEAD):

1) New public CommonBaseEventLogRecord(CommonBaseEvent commonBaseEvent, Level 
level) constructor.  

2) Caching all LogRecord properties (ie. only including those properties that 
end up as Extended Data Elements, not including things that map directly into 
the Common Base Event proper).  This would remove all the look-ups in the 
constructors and setters (if someone calls setXYZ more than once on the 
LogRecord, problems may exist so keep an isSet bit for each of the attributes 
that are being cached) and is not a huge inconvenience to the user.  


Please see defect #72308 (https://bugs.eclipse.org/bugs/show_bug.cgi?id=72308) 
for the remaining suggested performance enhancements.
Verified in Toronto's 20040819_1252 (Hyades_v3_0_1) build on August 19, 2004.
Closing.</WithStack>
    <WithOutStack>Performance improvements needed to CBE logging implementation as 
necessitated/indicated by early experience of some key logging consumers.
As of the stipulated date (e.g. May 27, 2004) for various logging consumers 
have not provided requirements for Common Base Event performance improvements.  
Therefore, no Common Base Event performance improvements will be provided for 
M10.
Reopening for the newly received suggested performance improvement:

-EventFormatter.toCanonicalXMLString
(org.eclipse.hyades.logging.events.cbe.CommonBaseEvent, boolean) is getting the 
CBE data as strings and trying to normalize(XmlUtility.Normalize()), can we 
avoid calling the normalize method for certain fields in CBE which we know 
wouldn't need normalization? (Ex: Timestamp)
-When adding guaranteed unique elements to an EList (e.g. EList.add()), cast 
the EList down to an InternalEList and use to addUnique() API.  This API does 
not use O(N) time to walk the EList checking for unique elements.
-EventFormatter.toCanonicalXMLString
we can use CDATA on fields which are not attribute to avoid calling the 
XMLUtility.normalize on these fields.
Consider implementing the following performance enhancements in 
CommonBaseEventLogRecord.java:

1) New public CommonBaseEventLogRecord(CommonBaseEvent commonBaseEvent, Level 
level) constructor.  

2) Caching all LogRecord properties (ie. only including those properties that 
end up as Extended Data Elements, not including things that map directly into 
the Common Base Event proper).  Use a namespace and make the tacit assumption 
that users cannot set Extended Data Elements using the same namspace.  This 
would remove all the look-ups in the constructors and setters (if someone calls 
setXYZ more than once on the LogRecord, problems may exist so keep an isSet bit 
for each of the attributes that are being cached) and is not a huge 
inconvenience to the user.  

NOTE:  Existing users should be made aware of this enhancements through 
deprecation of existing static constants and newly defined static constants.
I have seen interest in this for 3.0.1.  I see it is targeted for 3.1 but the 
bug history shows several different targets over time.  Has some work been 
done in 3.0.1 and the rest is intended for 3.1?  The suggestion in comment #5 
is an api change that really should not be in 3.0.1.

No work for this defect has been checked-in to 3.0.1.  As such, this defect 
will be addressed in 3.1 (i2).
This has been raised by the WAS folks again.  Using our 
CommonBaseEventLogRecord causes performance degregation.  We will cache the 
ExtendedDataElements in the Logrecord as opposed to using the pure delegation 
model.  This will save them the performance grief of retrieving these values.
CommonBaseEventLogRecord.java checked-in to Haydes_v3_0_1 on August 19, 2004.
CommonBaseEventLogRecord.java and JUnit test suite checked-in to HEAD on August 
19, 2004.

This defect will only make the following enhancements for 
CommonBaseEventLogRecord.java for 3.0.1 and 3.1 (HEAD):

1) New public CommonBaseEventLogRecord(CommonBaseEvent commonBaseEvent, Level 
level) constructor.  

2) Caching all LogRecord properties (ie. only including those properties that 
end up as Extended Data Elements, not including things that map directly into 
the Common Base Event proper).  This would remove all the look-ups in the 
constructors and setters (if someone calls setXYZ more than once on the 
LogRecord, problems may exist so keep an isSet bit for each of the attributes 
that are being cached) and is not a huge inconvenience to the user.  


Please see defect #72308 (https://bugs.eclipse.org/bugs/show_bug.cgi?id=72308) 
for the remaining suggested performance enhancements.
Verified in Toronto's 20040819_1252 (Hyades_v3_0_1) build on August 19, 2004.
Closing.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="62410" />
    <CreationDate amount="2004-05-15 19:42:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="PDE" />
    <component amount="UI" />
    <Version amount="3.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Plugin Link does not work</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>Create a new fragment project.
In the general info section of the editor, click on the "Plug-in ID" hyperlink.
The manifest of the plugin does not open.
Fixed.</WithStack>
    <WithOutStack>Create a new fragment project.
In the general info section of the editor, click on the "Plug-in ID" hyperlink.
The manifest of the plugin does not open.
Fixed.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="62411" />
    <CreationDate amount="2004-05-15 19:53:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="UI" />
    <Version amount="3.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>[Workbench] ApplicationWindow's CoolBar does not re-layout window's contents on CoolItem's drag</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="ASSIGNED" />
    <resolution amount="" />
    <WithStack>In JFace, when you subclass ApplicationWindow and enable a CoolBar using the new
APIs (addCoolBar, createCoolBarManager) with 2 or more CoolItems
(CoolBarManager.addToolBarManager), it does not layout correctly the client area
when one CoolItem is dragged down.

I will attach a code snippet demonstrating the problem.
Created attachment 10698
Source code demonstrating the problem
Created attachment 10699
Shows what happens when the second CoolItem is dragged down
Created attachment 10700
Shows what happens after a redraw is induced (minimize/restore window)


*** This bug has been marked as a duplicate of 52362 ***
This bug was marked as a duplicate of 52362, which was fixed/closed, but the
sample code I attached still does not work in M9.
Reassigning the last of Stefan's bugs. 
seems related to other issues with coolbar sizing etc...  moving to BB
*** Bug 162369 has been marked as a duplicate of this bug. ***</WithStack>
    <WithOutStack>In JFace, when you subclass ApplicationWindow and enable a CoolBar using the new
APIs (addCoolBar, createCoolBarManager) with 2 or more CoolItems
(CoolBarManager.addToolBarManager), it does not layout correctly the client area
when one CoolItem is dragged down.

I will attach a code snippet demonstrating the problem.
Created attachment 10698
Source code demonstrating the problem
Created attachment 10699
Shows what happens when the second CoolItem is dragged down
Created attachment 10700
Shows what happens after a redraw is induced (minimize/restore window)


*** This bug has been marked as a duplicate of 52362 ***
This bug was marked as a duplicate of 52362, which was fixed/closed, but the
sample code I attached still does not work in M9.
Reassigning the last of Stefan's bugs. 
seems related to other issues with coolbar sizing etc...  moving to BB
*** Bug 162369 has been marked as a duplicate of this bug. ***</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="62412" />
    <CreationDate amount="2004-05-15 21:10:00 -0400" />
    <DupId amount="63298" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="Ant" />
    <Version amount="3.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows 2000" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>doctype with entity prevents problems view updates</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="19">
        <Lines>
          <Line>1. Paste the exhibit a. text into a new build.xml file in the ant editor. The</Line>
          <Line>problems view identifies the error: "Default target go does not exist in this</Line>
          <Line>project."</Line>
          <Line />
          <Line>2. Correct the problem by changing the target name 'start' to 'go'. Save the</Line>
          <Line>document. The problems view removes the error.</Line>
          <Line />
          <Line>3. Undo to recreate the error and save again. The problems view identifies the</Line>
          <Line>error.</Line>
          <Line />
          <Line>4. Paste in Exhibit B. which resolves the error but adds an entity declaration.</Line>
          <Line>Create a file called "greeting.ent" which contains the text "hi" and place it in</Line>
          <Line>the same directory as the build file. Save and run the build to verify that the</Line>
          <Line>document is well-formed. Ant echos the contents of your entity file. Notice that</Line>
          <Line>though you have corrected the problem identified in the problems view, it is not</Line>
          <Line>updated.</Line>
          <Line />
          <Line>5. Remove the doctype declaration and save. Notice that the problems view</Line>
          <Line>updates with only the error "Reference to undefined entity "&amp;myEntity;".</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="RESOLVED" />
    <resolution amount="DUPLICATE" />
    <WithStack>If a build file contains an a doctype with an entity declaration, the problems
view does not get updated with information about other errors.

To reproduce:
1. Paste the exhibit a. text into a new build.xml file in the ant editor. The
problems view identifies the error: "Default target go does not exist in this
project."

2. Correct the problem by changing the target name 'start' to 'go'. Save the
document. The problems view removes the error.

3. Undo to recreate the error and save again. The problems view identifies the
error.

4. Paste in Exhibit B. which resolves the error but adds an entity declaration.
Create a file called "greeting.ent" which contains the text "hi" and place it in
the same directory as the build file. Save and run the build to verify that the
document is well-formed. Ant echos the contents of your entity file. Notice that
though you have corrected the problem identified in the problems view, it is not
updated.

5. Remove the doctype declaration and save. Notice that the problems view
updates with only the error "Reference to undefined entity "&amp;myEntity;".


Exhibit A.
--------------
&lt;project default="go"&gt;
    &lt;target name="start"&gt;
        &lt;echo&gt;hi!&lt;/echo&gt;
    &lt;/target&gt;
&lt;/project&gt;


Exhibit B.
--------------

&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE docWithEntity [ 
    &lt;!ENTITY myEntity SYSTEM "greeting.ent"&gt;
]&gt;

&lt;project default="go"&gt;
	&lt;target name="go"&gt;
		&lt;echo&gt;&amp;myEntity;&lt;/echo&gt;
	&lt;/target&gt;
&lt;/project&gt;
I should have looked at this more closely sooner...sorry.
This is a bug in the platform core that is supposed to be fixed in the builds 
of today.

*** This bug has been marked as a duplicate of 63298 ***</WithStack>
    <WithOutStack>If a build file contains an a doctype with an entity declaration, the problems
view does not get updated with information about other errors.

To reproduce:
1. Paste the exhibit a. text into a new build.xml file in the ant editor. The
problems view identifies the error: "Default target go does not exist in this
project."

2. Correct the problem by changing the target name 'start' to 'go'. Save the
document. The problems view removes the error.

3. Undo to recreate the error and save again. The problems view identifies the
error.

4. Paste in Exhibit B. which resolves the error but adds an entity declaration.
Create a file called "greeting.ent" which contains the text "hi" and place it in
the same directory as the build file. Save and run the build to verify that the
document is well-formed. Ant echos the contents of your entity file. Notice that
though you have corrected the problem identified in the problems view, it is not
updated.

5. Remove the doctype declaration and save. Notice that the problems view
updates with only the error "Reference to undefined entity "&amp;myEntity;".


Exhibit A.
--------------
&lt;project default="go"&gt;
    &lt;target name="start"&gt;
        &lt;echo&gt;hi!&lt;/echo&gt;
    &lt;/target&gt;
&lt;/project&gt;


Exhibit B.
--------------

&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE docWithEntity [ 
    &lt;!ENTITY myEntity SYSTEM "greeting.ent"&gt;
]&gt;

&lt;project default="go"&gt;
	&lt;target name="go"&gt;
		&lt;echo&gt;&amp;myEntity;&lt;/echo&gt;
	&lt;/target&gt;
&lt;/project&gt;
I should have looked at this more closely sooner...sorry.
This is a bug in the platform core that is supposed to be fixed in the builds 
of today.

*** This bug has been marked as a duplicate of 63298 ***</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="62413" />
    <CreationDate amount="2004-05-15 21:27:00 -0400" />
    <DupId amount="63298" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="Ant" />
    <Version amount="3.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows 2000" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>doctype declaration brakes Run... menu in navigator view</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="11">
        <Lines>
          <Line>1. Paste the text below into a new build.xml file and save.</Line>
          <Line />
          <Line>2. Attempt to execute the build from the navigator context menu. The option to</Line>
          <Line>do so will not appear.</Line>
          <Line />
          <Line>3. Delete the doctype declaration and save.</Line>
          <Line />
          <Line>4. Attempt to execute the build from the navigator context menu. The option</Line>
          <Line>appears. (Running the build will result in BUILD FAILED:</Line>
          <Line>java.io.FileNotFoundException unless a greeting.ent file is in the same</Line>
          <Line>directory as your build.xml file. This is expected behavior.)</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="RESOLVED" />
    <resolution amount="DUPLICATE" />
    <WithStack>A build file with a doctype declaration (as below) isn't seen as ant build file
when it comes to enabling the Run Ant... option in the "Run" item on the
navigator context menu. 

To reproduce:

1. Paste the text below into a new build.xml file and save.

2. Attempt to execute the build from the navigator context menu. The option to
do so will not appear.

3. Delete the doctype declaration and save.

4. Attempt to execute the build from the navigator context menu. The option
appears. (Running the build will result in BUILD FAILED:
java.io.FileNotFoundException unless a greeting.ent file is in the same
directory as your build.xml file. This is expected behavior.) 

---
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE docWithEntity [ 
    &lt;!ENTITY myEntity SYSTEM "greeting.ent"&gt;
]&gt;
&lt;project default="go"&gt;
	&lt;target name="go"&gt;
		&lt;echo&gt;&amp;myEntity;&lt;/echo&gt;
	&lt;/target&gt;
&lt;/project&gt;


*** This bug has been marked as a duplicate of 63298 ***</WithStack>
    <WithOutStack>A build file with a doctype declaration (as below) isn't seen as ant build file
when it comes to enabling the Run Ant... option in the "Run" item on the
navigator context menu. 

To reproduce:

1. Paste the text below into a new build.xml file and save.

2. Attempt to execute the build from the navigator context menu. The option to
do so will not appear.

3. Delete the doctype declaration and save.

4. Attempt to execute the build from the navigator context menu. The option
appears. (Running the build will result in BUILD FAILED:
java.io.FileNotFoundException unless a greeting.ent file is in the same
directory as your build.xml file. This is expected behavior.) 

---
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE docWithEntity [ 
    &lt;!ENTITY myEntity SYSTEM "greeting.ent"&gt;
]&gt;
&lt;project default="go"&gt;
	&lt;target name="go"&gt;
		&lt;echo&gt;&amp;myEntity;&lt;/echo&gt;
	&lt;/target&gt;
&lt;/project&gt;


*** This bug has been marked as a duplicate of 63298 ***</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="62414" />
    <CreationDate amount="2004-05-15 23:19:00 -0400" />
    <DupId amount="63748" />
    <classification amount="Eclipse" />
    <Product amount="JDT" />
    <component amount="Core" />
    <Version amount="3.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>NPE during Refactoring</Summery>
    <Patches amount="0" />
    <Stacktraces amount="2">
      <Stacktrace timestamp="1437341131326">
        <Exception>java.lang.NullPointerException</Exception>
        <Reason />
        <Frames>
          <Frame depth="0">java.lang.Throwable.&lt;init&gt;(Throwable.java)</Frame>
          <Frame depth="1">java.lang.Throwable.&lt;init&gt;(Throwable.java)</Frame>
          <Frame depth="2">java.lang.NullPointerException.&lt;init&gt;(NullPointerException.java:60)</Frame>
          <Frame depth="3">org.eclipse.jdt.internal.compiler.lookup.BinaryTypeBinding.superInterfaces(BinaryTypeBinding.java)</Frame>
          <Frame depth="4">org.eclipse.jdt.internal.core.hierarchy.HierarchyResolver.resolve(HierarchyResolver.java:679)</Frame>
          <Frame depth="5">org.eclipse.jdt.internal.core.hierarchy.IndexBasedHierarchyBuilder.buildForProject(IndexBasedHierarchyBuilder.java:195)</Frame>
          <Frame depth="6">org.eclipse.jdt.internal.core.hierarchy.IndexBasedHierarchyBuilder.buildFromPotentialSubtypes(IndexBasedHierarchyBuilder.java:302)</Frame>
          <Frame depth="7">org.eclipse.jdt.internal.core.hierarchy.IndexBasedHierarchyBuilder.build(IndexBasedHierarchyBuilder.java:131)</Frame>
          <Frame depth="8">org.eclipse.jdt.internal.core.hierarchy.TypeHierarchy.compute(TypeHierarchy.java:319)</Frame>
          <Frame depth="9">org.eclipse.jdt.internal.core.hierarchy.TypeHierarchy.refresh(TypeHierarchy.java:1234)</Frame>
          <Frame depth="10">org.eclipse.jdt.internal.core.CreateTypeHierarchyOperation.executeOperation(CreateTypeHierarchyOperation.java:90)</Frame>
          <Frame depth="11">org.eclipse.jdt.internal.core.JavaModelOperation.run(JavaModelOperation.java)</Frame>
          <Frame depth="12">org.eclipse.jdt.internal.core.JavaModelOperation.runOperation(JavaModelOperation.java)</Frame>
          <Frame depth="13">org.eclipse.jdt.internal.core.SourceType.newTypeHierarchy(SourceType.java:649)</Frame>
          <Frame depth="14">org.eclipse.jdt.internal.corext.refactoring.rename.RenameMethodProcessor.hierarchyDeclaresMethodName(RenameMethodProcessor.java:575)</Frame>
          <Frame depth="15">org.eclipse.jdt.internal.corext.refactoring.rename.RenameNonVirtualMethodProcessor.checkFinalConditions(RenameNonVirtualMethodProcessor.java:61)</Frame>
          <Frame depth="16">org.eclipse.ltk.core.refactoring.participants.ProcessorBasedRefactoring.checkFinalConditions(ProcessorBasedRefactoring.java:134)</Frame>
          <Frame depth="17">org.eclipse.ltk.core.refactoring.CheckConditionsOperation.run(CheckConditionsOperation.java:84)</Frame>
          <Frame depth="18">org.eclipse.ltk.core.refactoring.CreateChangeOperation.run(CreateChangeOperation.java:114)</Frame>
          <Frame depth="19">org.eclipse.ltk.core.refactoring.PerformChangeOperation.run(PerformChangeOperation.java:182)</Frame>
          <Frame depth="20">org.eclipse.core.internal.resources.Workspace.run(Workspace.java)</Frame>
          <Frame depth="21">org.eclipse.ltk.internal.ui.refactoring.WorkbenchRunnableAdapter.run(WorkbenchRunnableAdapter.java:58)</Frame>
          <Frame depth="22">org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:101)</Frame>
        </Frames>
      </Stacktrace>
      <Stacktrace timestamp="1437341131326">
        <Exception>java.lang.NullPointerException</Exception>
        <Reason />
        <Frames>
          <Frame depth="0">java.lang.Throwable.&lt;init&gt;(Throwable.java)</Frame>
          <Frame depth="1">java.lang.Throwable.&lt;init&gt;(Throwable.java)</Frame>
          <Frame depth="2">java.lang.NullPointerException.&lt;init&gt;(NullPointerException.java:60)</Frame>
          <Frame depth="3">org.eclipse.jdt.internal.compiler.lookup.BinaryTypeBinding.superInterfaces(BinaryTypeBinding.java)</Frame>
          <Frame depth="4">org.eclipse.jdt.internal.core.hierarchy.HierarchyResolver.resolve(HierarchyResolver.java:679)</Frame>
          <Frame depth="5">org.eclipse.jdt.internal.core.hierarchy.IndexBasedHierarchyBuilder.buildForProject(IndexBasedHierarchyBuilder.java:195)</Frame>
          <Frame depth="6">org.eclipse.jdt.internal.core.hierarchy.IndexBasedHierarchyBuilder.buildFromPotentialSubtypes(IndexBasedHierarchyBuilder.java:302)</Frame>
          <Frame depth="7">org.eclipse.jdt.internal.core.hierarchy.IndexBasedHierarchyBuilder.build(IndexBasedHierarchyBuilder.java:131)</Frame>
          <Frame depth="8">org.eclipse.jdt.internal.core.hierarchy.TypeHierarchy.compute(TypeHierarchy.java:319)</Frame>
          <Frame depth="9">org.eclipse.jdt.internal.core.hierarchy.TypeHierarchy.refresh(TypeHierarchy.java:1234)</Frame>
          <Frame depth="10">org.eclipse.jdt.internal.core.CreateTypeHierarchyOperation.executeOperation(CreateTypeHierarchyOperation.java:90)</Frame>
          <Frame depth="11">org.eclipse.jdt.internal.core.JavaModelOperation.run(JavaModelOperation.java)</Frame>
          <Frame depth="12">org.eclipse.jdt.internal.core.JavaModelOperation.runOperation(JavaModelOperation.java)</Frame>
          <Frame depth="13">org.eclipse.jdt.internal.core.SourceType.newTypeHierarchy(SourceType.java:649)</Frame>
          <Frame depth="14">org.eclipse.jdt.internal.corext.refactoring.rename.MethodChecks.isDeclaredInInterface(MethodChecks.java:98)</Frame>
          <Frame depth="15">org.eclipse.jdt.internal.corext.refactoring.rename.RenameVirtualMethodProcessor.checkInitialConditions(RenameVirtualMethodProcessor.java:70)</Frame>
          <Frame depth="16">org.eclipse.jdt.internal.ui.refactoring.reorg.RenameMethodUserInterfaceStarter.activate(RenameMethodUserInterfaceStarter.java:37)</Frame>
          <Frame depth="17">org.eclipse.jdt.ui.refactoring.RenameSupport.openDialog(RenameSupport.java:108)</Frame>
          <Frame depth="18">org.eclipse.jdt.internal.ui.refactoring.actions.RenameJavaElementAction.run(RenameJavaElementAction.java:175)</Frame>
          <Frame depth="19">org.eclipse.jdt.internal.ui.refactoring.actions.RenameJavaElementAction.run(RenameJavaElementAction.java:128)</Frame>
          <Frame depth="20">org.eclipse.jdt.ui.actions.RenameAction.run(RenameAction.java:127)</Frame>
          <Frame depth="21">org.eclipse.jdt.ui.actions.SelectionDispatchAction.dispatchRun(SelectionDispatchAction.java:216)</Frame>
          <Frame depth="22">org.eclipse.jdt.ui.actions.SelectionDispatchAction.run(SelectionDispatchAction.java:188)</Frame>
          <Frame depth="23">org.eclipse.jface.action.Action.runWithEvent(Action.java:881)</Frame>
          <Frame depth="24">org.eclipse.ui.commands.ActionHandler.execute(ActionHandler.java:141)</Frame>
          <Frame depth="25">org.eclipse.ui.internal.commands.Command.execute(Command.java:132)</Frame>
          <Frame depth="26">org.eclipse.ui.internal.keys.WorkbenchKeyboard.executeCommand(WorkbenchKeyboard.java:468)</Frame>
          <Frame depth="27">org.eclipse.ui.internal.keys.WorkbenchKeyboard.press(WorkbenchKeyboard.java)</Frame>
          <Frame depth="28">org.eclipse.ui.internal.keys.WorkbenchKeyboard.processKeyEvent(WorkbenchKeyboard.java)</Frame>
          <Frame depth="29">org.eclipse.ui.internal.keys.WorkbenchKeyboard.filterKeySequenceBindings(WorkbenchKeyboard.java)</Frame>
          <Frame depth="30">org.eclipse.ui.internal.keys.WorkbenchKeyboard.access$2(WorkbenchKeyboard.java)</Frame>
          <Frame depth="31">org.eclipse.ui.internal.keys.WorkbenchKeyboard$1.handleEvent(WorkbenchKeyboard.java)</Frame>
          <Frame depth="32">org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java)</Frame>
          <Frame depth="33">org.eclipse.swt.widgets.Display.filterEvent(Display.java)</Frame>
          <Frame depth="34">org.eclipse.swt.widgets.Widget.sendEvent(Widget.java)</Frame>
          <Frame depth="35">org.eclipse.swt.widgets.Widget.sendEvent(Widget.java)</Frame>
          <Frame depth="36">org.eclipse.swt.widgets.Widget.sendEvent(Widget.java)</Frame>
          <Frame depth="37">org.eclipse.swt.widgets.Control.traverse(Control.java)</Frame>
          <Frame depth="38">org.eclipse.swt.widgets.Control.translateMnemonic(Control.java:2545)</Frame>
          <Frame depth="39">org.eclipse.swt.widgets.Composite.translateMnemonic(Composite.java)</Frame>
          <Frame depth="40">org.eclipse.swt.widgets.Control.translateMnemonic(Control.java)</Frame>
          <Frame depth="41">org.eclipse.swt.widgets.Display.translateMnemonic(Display.java)</Frame>
          <Frame depth="42">org.eclipse.swt.widgets.Display.filterMessage(Display.java)</Frame>
          <Frame depth="43">org.eclipse.swt.widgets.Display.readAndDispatch(Display.java)</Frame>
          <Frame depth="44">org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1353)</Frame>
          <Frame depth="45">org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1324)</Frame>
          <Frame depth="46">org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:243)</Frame>
          <Frame depth="47">org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:141)</Frame>
          <Frame depth="48">org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:90)</Frame>
          <Frame depth="49">org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:298)</Frame>
          <Frame depth="50">org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:249)</Frame>
          <Frame depth="51">org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:126)</Frame>
          <Frame depth="52">sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)</Frame>
          <Frame depth="53">sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:84)</Frame>
          <Frame depth="54">sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)</Frame>
          <Frame depth="55">sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:59)</Frame>
          <Frame depth="56">java.lang.reflect.Method.invoke(Method.java:390)</Frame>
          <Frame depth="57">org.eclipse.core.launcher.Main.basicRun(Main.java:269)</Frame>
          <Frame depth="58">org.eclipse.core.launcher.Main.run(Main.java:722)</Frame>
          <Frame depth="59">org.eclipse.core.launcher.Main.main(Main.java:706)</Frame>
        </Frames>
      </Stacktrace>
    </Stacktraces>
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="DUPLICATE" />
    <WithStack>I200405150800 on WXP

I attempted to refactor a method which resulted in the following failure.  
When I attempt to enter Alt-Shift-R, I get the second error.

java.lang.NullPointerException
        at java.lang.Throwable.&lt;init&gt;(Throwable.java)
        at java.lang.Throwable.&lt;init&gt;(Throwable.java)
        at java.lang.NullPointerException.&lt;init&gt;(NullPointerException.java:60)
        at 
org.eclipse.jdt.internal.compiler.lookup.BinaryTypeBinding.superInterfaces
(BinaryTypeBinding.java)
        at org.eclipse.jdt.internal.core.hierarchy.HierarchyResolver.resolve
(HierarchyResolver.java:679)
        at 
org.eclipse.jdt.internal.core.hierarchy.IndexBasedHierarchyBuilder.buildForProj
ect(IndexBasedHierarchyBuilder.java:195)
        at 
org.eclipse.jdt.internal.core.hierarchy.IndexBasedHierarchyBuilder.buildFromPot
entialSubtypes(IndexBasedHierarchyBuilder.java:302)
        at 
org.eclipse.jdt.internal.core.hierarchy.IndexBasedHierarchyBuilder.build
(IndexBasedHierarchyBuilder.java:131)
        at org.eclipse.jdt.internal.core.hierarchy.TypeHierarchy.compute
(TypeHierarchy.java:319)
        at org.eclipse.jdt.internal.core.hierarchy.TypeHierarchy.refresh
(TypeHierarchy.java:1234)
        at 
org.eclipse.jdt.internal.core.CreateTypeHierarchyOperation.executeOperation
(CreateTypeHierarchyOperation.java:90)
        at org.eclipse.jdt.internal.core.JavaModelOperation.run
(JavaModelOperation.java)
        at org.eclipse.jdt.internal.core.JavaModelOperation.runOperation
(JavaModelOperation.java)
        at org.eclipse.jdt.internal.core.SourceType.newTypeHierarchy
(SourceType.java:649)
        at 
org.eclipse.jdt.internal.corext.refactoring.rename.RenameMethodProcessor.hierar
chyDeclaresMethodName(RenameMethodProcessor.java:575)
        at 
org.eclipse.jdt.internal.corext.refactoring.rename.RenameNonVirtualMethodProces
sor.checkFinalConditions(RenameNonVirtualMethodProcessor.java:61)
        at 
org.eclipse.ltk.core.refactoring.participants.ProcessorBasedRefactoring.checkFi
nalConditions(ProcessorBasedRefactoring.java:134)
        at org.eclipse.ltk.core.refactoring.CheckConditionsOperation.run
(CheckConditionsOperation.java:84)
        at org.eclipse.ltk.core.refactoring.CreateChangeOperation.run
(CreateChangeOperation.java:114)
        at org.eclipse.ltk.core.refactoring.PerformChangeOperation.run
(PerformChangeOperation.java:182)
        at org.eclipse.core.internal.resources.Workspace.run(Workspace.java)
        at org.eclipse.ltk.internal.ui.refactoring.WorkbenchRunnableAdapter.run
(WorkbenchRunnableAdapter.java:58)
        at org.eclipse.jface.operation.ModalContext$ModalContextThread.run
(ModalContext.java:101)


java.lang.NullPointerException
        at java.lang.Throwable.&lt;init&gt;(Throwable.java)
        at java.lang.Throwable.&lt;init&gt;(Throwable.java)
        at java.lang.NullPointerException.&lt;init&gt;(NullPointerException.java:60)
        at 
org.eclipse.jdt.internal.compiler.lookup.BinaryTypeBinding.superInterfaces
(BinaryTypeBinding.java)
        at org.eclipse.jdt.internal.core.hierarchy.HierarchyResolver.resolve
(HierarchyResolver.java:679)
        at 
org.eclipse.jdt.internal.core.hierarchy.IndexBasedHierarchyBuilder.buildForProj
ect(IndexBasedHierarchyBuilder.java:195)
        at 
org.eclipse.jdt.internal.core.hierarchy.IndexBasedHierarchyBuilder.buildFromPot
entialSubtypes(IndexBasedHierarchyBuilder.java:302)
        at 
org.eclipse.jdt.internal.core.hierarchy.IndexBasedHierarchyBuilder.build
(IndexBasedHierarchyBuilder.java:131)
        at org.eclipse.jdt.internal.core.hierarchy.TypeHierarchy.compute
(TypeHierarchy.java:319)
        at org.eclipse.jdt.internal.core.hierarchy.TypeHierarchy.refresh
(TypeHierarchy.java:1234)
        at 
org.eclipse.jdt.internal.core.CreateTypeHierarchyOperation.executeOperation
(CreateTypeHierarchyOperation.java:90)
        at org.eclipse.jdt.internal.core.JavaModelOperation.run
(JavaModelOperation.java)
        at org.eclipse.jdt.internal.core.JavaModelOperation.runOperation
(JavaModelOperation.java)
        at org.eclipse.jdt.internal.core.SourceType.newTypeHierarchy
(SourceType.java:649)
        at 
org.eclipse.jdt.internal.corext.refactoring.rename.MethodChecks.isDeclaredInInt
erface(MethodChecks.java:98)
        at 
org.eclipse.jdt.internal.corext.refactoring.rename.RenameVirtualMethodProcessor
.checkInitialConditions(RenameVirtualMethodProcessor.java:70)
        at 
org.eclipse.jdt.internal.ui.refactoring.reorg.RenameMethodUserInterfaceStarter.
activate(RenameMethodUserInterfaceStarter.java:37)
        at org.eclipse.jdt.ui.refactoring.RenameSupport.openDialog
(RenameSupport.java:108)
        at 
org.eclipse.jdt.internal.ui.refactoring.actions.RenameJavaElementAction.run
(RenameJavaElementAction.java:175)
        at 
org.eclipse.jdt.internal.ui.refactoring.actions.RenameJavaElementAction.run
(RenameJavaElementAction.java:128)
        at org.eclipse.jdt.ui.actions.RenameAction.run(RenameAction.java:127)
        at org.eclipse.jdt.ui.actions.SelectionDispatchAction.dispatchRun
(SelectionDispatchAction.java:216)
        at org.eclipse.jdt.ui.actions.SelectionDispatchAction.run
(SelectionDispatchAction.java:188)
        at org.eclipse.jface.action.Action.runWithEvent(Action.java:881)
        at org.eclipse.ui.commands.ActionHandler.execute
(ActionHandler.java:141)
        at org.eclipse.ui.internal.commands.Command.execute(Command.java:132)
        at org.eclipse.ui.internal.keys.WorkbenchKeyboard.executeCommand
(WorkbenchKeyboard.java:468)
        at org.eclipse.ui.internal.keys.WorkbenchKeyboard.press
(WorkbenchKeyboard.java)
        at org.eclipse.ui.internal.keys.WorkbenchKeyboard.processKeyEvent
(WorkbenchKeyboard.java)
        at 
org.eclipse.ui.internal.keys.WorkbenchKeyboard.filterKeySequenceBindings
(WorkbenchKeyboard.java)
        at org.eclipse.ui.internal.keys.WorkbenchKeyboard.access$2
(WorkbenchKeyboard.java)
        at org.eclipse.ui.internal.keys.WorkbenchKeyboard$1.handleEvent
(WorkbenchKeyboard.java)
        at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java)
        at org.eclipse.swt.widgets.Display.filterEvent(Display.java)
        at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java)
        at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java)
        at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java)
        at org.eclipse.swt.widgets.Control.traverse(Control.java)
        at org.eclipse.swt.widgets.Control.translateMnemonic(Control.java:2545)
        at org.eclipse.swt.widgets.Composite.translateMnemonic(Composite.java)
        at org.eclipse.swt.widgets.Control.translateMnemonic(Control.java)
        at org.eclipse.swt.widgets.Display.translateMnemonic(Display.java)
        at org.eclipse.swt.widgets.Display.filterMessage(Display.java)
        at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java)
        at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1353)
        at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1324)
        at org.eclipse.ui.internal.Workbench.createAndRunWorkbench
(Workbench.java:243)
        at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:141)
        at org.eclipse.ui.internal.ide.IDEApplication.run
(IDEApplication.java:90)
        at org.eclipse.core.internal.runtime.PlatformActivator$1.run
(PlatformActivator.java:298)
        at org.eclipse.core.runtime.adaptor.EclipseStarter.run
(EclipseStarter.java:249)
        at org.eclipse.core.runtime.adaptor.EclipseStarter.run
(EclipseStarter.java:126)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke
(NativeMethodAccessorImpl.java:84)
        at sun.reflect.NativeMethodAccessorImpl.invoke
(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke
(DelegatingMethodAccessorImpl.java:59)
        at java.lang.reflect.Method.invoke(Method.java:390)
        at org.eclipse.core.launcher.Main.basicRun(Main.java:269)
        at org.eclipse.core.launcher.Main.run(Main.java:722)
        at org.eclipse.core.launcher.Main.main(Main.java:706)
Would you have steps to reproduce this problem?


*** This bug has been marked as a duplicate of 63748 ***</WithStack>
    <WithOutStack>I200405150800 on WXP

I attempted to refactor a method which resulted in the following failure.  
When I attempt to enter Alt-Shift-R, I get the second error.




Would you have steps to reproduce this problem?


*** This bug has been marked as a duplicate of 63748 ***</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="62415" />
    <CreationDate amount="2004-05-16 00:04:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="PDE" />
    <component amount="UI" />
    <Version amount="3.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows 2000" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Import dependant plug-ins fails with NPE</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>To reproduce.. fire up I200405140800 in an empty workspace

Choose, File-&gt;Import-&gt;External Plug-ins and Fragments

Leave "Import From" alone (default settings)

Choose, "Select from all plug-ins and fragments at the specified location"

In "Import As"

Choose "Binary projects with linked content" or "Projects with source folders"

Hit "Next"

Choose a plugin, click "Add" 

Click "Finish"

The one plugin selected is imported. Appears to be ok. (Aside: if its imported 
as "Project with source folders" no compile errors appear even though none of 
its dependencies have been imported).

Now try and import the dependencies..

Choose File-&gt;Import-&gt;External Plug-ins and Fragments

Again, leave "Import From" alone (default settings)

This time choose "Import plug-ins and fragments required by existing workspace 
plu-ins"

Hit "Next"

Nothing happens, the following NPE is seen in the log file (will attach).
Created attachment 10702
.log file containing NPE

.log file containing NPE
Fixed by guarding against this NPE.</WithStack>
    <WithOutStack>To reproduce.. fire up I200405140800 in an empty workspace

Choose, File-&gt;Import-&gt;External Plug-ins and Fragments

Leave "Import From" alone (default settings)

Choose, "Select from all plug-ins and fragments at the specified location"

In "Import As"

Choose "Binary projects with linked content" or "Projects with source folders"

Hit "Next"

Choose a plugin, click "Add" 

Click "Finish"

The one plugin selected is imported. Appears to be ok. (Aside: if its imported 
as "Project with source folders" no compile errors appear even though none of 
its dependencies have been imported).

Now try and import the dependencies..

Choose File-&gt;Import-&gt;External Plug-ins and Fragments

Again, leave "Import From" alone (default settings)

This time choose "Import plug-ins and fragments required by existing workspace 
plu-ins"

Hit "Next"

Nothing happens, the following NPE is seen in the log file (will attach).
Created attachment 10702
.log file containing NPE

.log file containing NPE
Fixed by guarding against this NPE.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="62416" />
    <CreationDate amount="2004-05-16 00:11:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="JDT" />
    <component amount="Core" />
    <Version amount="3.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="critical" />
    <Summery>[1.5] An error has occurred when creating this (Java) editor</Summery>
    <Patches amount="0" />
    <Stacktraces amount="2">
      <Stacktrace timestamp="1437341131332">
        <Exception>java.lang.NoClassDefFoundError</Exception>
        <Reason>org/eclipse/jdt/internal/codeassist/IExtendedCompletionRequestor</Reason>
        <Frames>
          <Frame depth="0">java.lang.ClassLoader.defineClass0(Native Method)</Frame>
          <Frame depth="1">java.lang.ClassLoader.defineClass(ClassLoader.java:537)</Frame>
          <Frame depth="2">org.eclipse.osgi.framework.internal.defaultadaptor.DefaultClassLoader.defineClass(DefaultClassLoader.java:292)</Frame>
          <Frame depth="3">org.eclipse.core.runtime.adaptor.EclipseClassLoader.defineClass(EclipseClassLoader.java:207)</Frame>
          <Frame depth="4">org.eclipse.osgi.framework.internal.defaultadaptor.DefaultClassLoader.findClassImpl(DefaultClassLoader.java:281)</Frame>
          <Frame depth="5">org.eclipse.osgi.framework.internal.defaultadaptor.DefaultClassLoader.findClass(DefaultClassLoader.java:172)</Frame>
          <Frame depth="6">org.eclipse.osgi.framework.adaptor.core.AbstractClassLoader.findLocalClass(AbstractClassLoader.java:220)</Frame>
          <Frame depth="7">org.eclipse.core.runtime.adaptor.EclipseClassLoader.findLocalClass(EclipseClassLoader.java:59)</Frame>
          <Frame depth="8">org.eclipse.osgi.framework.internal.core.BundleLoader.findLocalClass(BundleLoader.java:368)</Frame>
          <Frame depth="9">org.eclipse.osgi.framework.internal.core.BundleLoader.findClass(BundleLoader.java:399)</Frame>
          <Frame depth="10">org.eclipse.osgi.framework.adaptor.core.AbstractClassLoader.loadClass(AbstractClassLoader.java:93)</Frame>
          <Frame depth="11">java.lang.ClassLoader.loadClass(ClassLoader.java:235)</Frame>
          <Frame depth="12">java.lang.ClassLoader.loadClassInternal(ClassLoader.java:302)</Frame>
          <Frame depth="13">java.lang.ClassLoader.defineClass0(Native Method)</Frame>
          <Frame depth="14">java.lang.ClassLoader.defineClass(ClassLoader.java:537)</Frame>
          <Frame depth="15">org.eclipse.osgi.framework.internal.defaultadaptor.DefaultClassLoader.defineClass(DefaultClassLoader.java:292)</Frame>
          <Frame depth="16">org.eclipse.core.runtime.adaptor.EclipseClassLoader.defineClass(EclipseClassLoader.java:207)</Frame>
          <Frame depth="17">org.eclipse.osgi.framework.internal.defaultadaptor.DefaultClassLoader.findClassImpl(DefaultClassLoader.java:281)</Frame>
          <Frame depth="18">org.eclipse.osgi.framework.internal.defaultadaptor.DefaultClassLoader.findClass(DefaultClassLoader.java:172)</Frame>
          <Frame depth="19">org.eclipse.osgi.framework.adaptor.core.AbstractClassLoader.findLocalClass(AbstractClassLoader.java:220)</Frame>
          <Frame depth="20">org.eclipse.core.runtime.adaptor.EclipseClassLoader.findLocalClass(EclipseClassLoader.java:59)</Frame>
          <Frame depth="21">org.eclipse.osgi.framework.internal.core.BundleLoader.findLocalClass(BundleLoader.java:368)</Frame>
          <Frame depth="22">org.eclipse.osgi.framework.internal.core.BundleLoader.findClass(BundleLoader.java:399)</Frame>
          <Frame depth="23">org.eclipse.osgi.framework.adaptor.core.AbstractClassLoader.loadClass(AbstractClassLoader.java:93)</Frame>
          <Frame depth="24">java.lang.ClassLoader.loadClass(ClassLoader.java:235)</Frame>
          <Frame depth="25">java.lang.ClassLoader.loadClassInternal(ClassLoader.java:302)</Frame>
          <Frame depth="26">org.eclipse.jdt.ui.text.JavaSourceViewerConfiguration.getContentAssistant(JavaSourceViewerConfiguration.java:380)</Frame>
          <Frame depth="27">org.eclipse.jface.text.source.SourceViewer.configure(SourceViewer.java:315)</Frame>
          <Frame depth="28">org.eclipse.jdt.internal.ui.javaeditor.JavaSourceViewer.configure(JavaSourceViewer.java:172)</Frame>
          <Frame depth="29">org.eclipse.jdt.internal.ui.javaeditor.CompilationUnitEditor$AdaptedSourceViewer.configure(CompilationUnitEditor.java:287)</Frame>
          <Frame depth="30">org.eclipse.ui.texteditor.AbstractTextEditor.createPartControl(AbstractTextEditor.java:2221)</Frame>
          <Frame depth="31">org.eclipse.ui.texteditor.StatusTextEditor.createPartControl(StatusTextEditor.java:53)</Frame>
          <Frame depth="32">org.eclipse.ui.texteditor.AbstractDecoratedTextEditor.createPartControl(AbstractDecoratedTextEditor.java:279)</Frame>
          <Frame depth="33">org.eclipse.jdt.internal.ui.javaeditor.JavaEditor.createPartControl(JavaEditor.java:3263)</Frame>
          <Frame depth="34">org.eclipse.jdt.internal.ui.javaeditor.CompilationUnitEditor.createPartControl(CompilationUnitEditor.java:1594)</Frame>
          <Frame depth="35">org.eclipse.ui.internal.PartPane$1.run(PartPane.java:93)</Frame>
          <Frame depth="36">org.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java:607)</Frame>
          <Frame depth="37">org.eclipse.core.runtime.Platform.run(Platform.java:668)</Frame>
          <Frame depth="38">org.eclipse.ui.internal.PartPane.createChildControl(PartPane.java:89)</Frame>
          <Frame depth="39">org.eclipse.ui.internal.PartPane.createControl(PartPane.java:150)</Frame>
          <Frame depth="40">org.eclipse.ui.internal.PartStack.refreshPresentationSelection(PartStack.java:710)</Frame>
          <Frame depth="41">org.eclipse.ui.internal.PartStack.setSelection(PartStack.java:692)</Frame>
          <Frame depth="42">org.eclipse.ui.internal.PartStack.add(PartStack.java:152)</Frame>
          <Frame depth="43">org.eclipse.ui.internal.EditorStack.add(EditorStack.java:100)</Frame>
          <Frame depth="44">org.eclipse.ui.internal.EditorSashContainer.addEditor(EditorSashContainer.java:56)</Frame>
          <Frame depth="45">org.eclipse.ui.internal.EditorAreaHelper.openEditor(EditorAreaHelper.java:257)</Frame>
          <Frame depth="46">org.eclipse.ui.internal.EditorManager$2.run(EditorManager.java:550)</Frame>
          <Frame depth="47">org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:69)</Frame>
          <Frame depth="48">org.eclipse.ui.internal.EditorManager.createEditorTab(EditorManager.java:539)</Frame>
          <Frame depth="49">org.eclipse.ui.internal.EditorManager.openInternalEditor(EditorManager.java:635)</Frame>
          <Frame depth="50">org.eclipse.ui.internal.EditorManager.openEditorFromDescriptor(EditorManager.java:438)</Frame>
          <Frame depth="51">org.eclipse.ui.internal.EditorManager.openEditor(EditorManager.java:426)</Frame>
          <Frame depth="52">org.eclipse.ui.internal.WorkbenchPage.busyOpenEditor(WorkbenchPage.java:2137)</Frame>
          <Frame depth="53">org.eclipse.ui.internal.WorkbenchPage.access$6(WorkbenchPage.java:2080)</Frame>
          <Frame depth="54">org.eclipse.ui.internal.WorkbenchPage$9.run(WorkbenchPage.java:2067)</Frame>
          <Frame depth="55">org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:69)</Frame>
          <Frame depth="56">org.eclipse.ui.internal.WorkbenchPage.openEditor(WorkbenchPage.java:2062)</Frame>
          <Frame depth="57">org.eclipse.ui.ide.IDE.openEditor(IDE.java:301)</Frame>
          <Frame depth="58">org.eclipse.jdt.internal.ui.javaeditor.EditorUtility.openInEditor(EditorUtility.java:137)</Frame>
          <Frame depth="59">org.eclipse.jdt.internal.ui.javaeditor.EditorUtility.openInEditor(EditorUtility.java:115)</Frame>
          <Frame depth="60">org.eclipse.jdt.internal.ui.actions.OpenActionUtil.open(OpenActionUtil.java:49)</Frame>
          <Frame depth="61">org.eclipse.jdt.ui.actions.OpenAction.run(OpenAction.java:161)</Frame>
          <Frame depth="62">org.eclipse.jdt.ui.actions.OpenAction.run(OpenAction.java:147)</Frame>
          <Frame depth="63">org.eclipse.jdt.ui.actions.SelectionDispatchAction.dispatchRun(SelectionDispatchAction.java:212)</Frame>
          <Frame depth="64">org.eclipse.jdt.ui.actions.SelectionDispatchAction.run(SelectionDispatchAction.java:188)</Frame>
          <Frame depth="65">org.eclipse.jdt.internal.ui.packageview.PackageExplorerActionGroup.handleOpen(PackageExplorerActionGroup.java:277)</Frame>
          <Frame depth="66">org.eclipse.jdt.internal.ui.packageview.PackageExplorerPart$4.open(PackageExplorerPart.java:302)</Frame>
          <Frame depth="67">org.eclipse.jface.viewers.StructuredViewer$2.run(StructuredViewer.java:396)</Frame>
          <Frame depth="68">org.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java:607)</Frame>
          <Frame depth="69">org.eclipse.core.runtime.Platform.run(Platform.java:668)</Frame>
          <Frame depth="70">org.eclipse.jface.viewers.StructuredViewer.fireOpen(StructuredViewer.java:394)</Frame>
          <Frame depth="71">org.eclipse.jface.viewers.StructuredViewer.handleOpen(StructuredViewer.java:592)</Frame>
          <Frame depth="72">org.eclipse.jface.viewers.StructuredViewer$6.handleOpen(StructuredViewer.java:681)</Frame>
          <Frame depth="73">org.eclipse.jface.util.OpenStrategy.fireOpenEvent(OpenStrategy.java:211)</Frame>
          <Frame depth="74">org.eclipse.jface.util.OpenStrategy.access$2(OpenStrategy.java:206)</Frame>
          <Frame depth="75">org.eclipse.jface.util.OpenStrategy$1.handleEvent(OpenStrategy.java:238)</Frame>
          <Frame depth="76">org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)</Frame>
          <Frame depth="77">org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:796)</Frame>
          <Frame depth="78">org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:2725)</Frame>
          <Frame depth="79">org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2390)</Frame>
          <Frame depth="80">org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1353)</Frame>
          <Frame depth="81">org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1324)</Frame>
          <Frame depth="82">org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:243)</Frame>
          <Frame depth="83">org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:141)</Frame>
          <Frame depth="84">org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:90)</Frame>
          <Frame depth="85">org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:298)</Frame>
          <Frame depth="86">org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:249)</Frame>
          <Frame depth="87">org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:126)</Frame>
          <Frame depth="88">sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)</Frame>
          <Frame depth="89">sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)</Frame>
          <Frame depth="90">sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)</Frame>
          <Frame depth="91">java.lang.reflect.Method.invoke(Method.java:324)</Frame>
          <Frame depth="92">org.eclipse.core.launcher.Main.basicRun(Main.java:269)</Frame>
          <Frame depth="93">org.eclipse.core.launcher.Main.run(Main.java:722)</Frame>
          <Frame depth="94">org.eclipse.core.launcher.Main.main(Main.java:706)</Frame>
        </Frames>
      </Stacktrace>
      <Stacktrace timestamp="1437341131332">
        <Exception>java.lang.ClassCastException</Exception>
        <Reason />
        <Frames>
          <Frame depth="0">org.eclipse.jdt.internal.ui.javaeditor.ASTProvider.activeJavaEditorChanged(ASTProvider.java:216)</Frame>
          <Frame depth="1">org.eclipse.jdt.internal.ui.javaeditor.ASTProvider.access$0(ASTProvider.java:211)</Frame>
          <Frame depth="2">org.eclipse.jdt.internal.ui.javaeditor.ASTProvider$ActivationListener.partOpened(ASTProvider.java:100)</Frame>
          <Frame depth="3">org.eclipse.ui.internal.PartListenerList2$5.run(PartListenerList2.java:101)</Frame>
          <Frame depth="4">org.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java:607)</Frame>
          <Frame depth="5">org.eclipse.core.runtime.Platform.run(Platform.java:668)</Frame>
          <Frame depth="6">org.eclipse.ui.internal.PartListenerList2.firePartOpened(PartListenerList2.java:99)</Frame>
          <Frame depth="7">org.eclipse.ui.internal.WWinPartService$1.partOpened(WWinPartService.java:62)</Frame>
          <Frame depth="8">org.eclipse.ui.internal.PartListenerList2$5.run(PartListenerList2.java:101)</Frame>
          <Frame depth="9">org.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java:607)</Frame>
          <Frame depth="10">org.eclipse.core.runtime.Platform.run(Platform.java:668)</Frame>
          <Frame depth="11">org.eclipse.ui.internal.PartListenerList2.firePartOpened(PartListenerList2.java:99)</Frame>
          <Frame depth="12">org.eclipse.ui.internal.WorkbenchPage.firePartOpened(WorkbenchPage.java:1385)</Frame>
          <Frame depth="13">org.eclipse.ui.internal.PartPane.createChildControl(PartPane.java:119)</Frame>
          <Frame depth="14">org.eclipse.ui.internal.PartPane.createControl(PartPane.java:150)</Frame>
          <Frame depth="15">org.eclipse.ui.internal.PartStack.refreshPresentationSelection(PartStack.java:710)</Frame>
          <Frame depth="16">org.eclipse.ui.internal.PartStack.setSelection(PartStack.java:692)</Frame>
          <Frame depth="17">org.eclipse.ui.internal.PartStack.add(PartStack.java:152)</Frame>
          <Frame depth="18">org.eclipse.ui.internal.EditorStack.add(EditorStack.java:100)</Frame>
          <Frame depth="19">org.eclipse.ui.internal.EditorSashContainer.addEditor(EditorSashContainer.java:56)</Frame>
          <Frame depth="20">org.eclipse.ui.internal.EditorAreaHelper.openEditor(EditorAreaHelper.java:257)</Frame>
          <Frame depth="21">org.eclipse.ui.internal.EditorManager$2.run(EditorManager.java:550)</Frame>
          <Frame depth="22">org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:69)</Frame>
          <Frame depth="23">org.eclipse.ui.internal.EditorManager.createEditorTab(EditorManager.java:539)</Frame>
          <Frame depth="24">org.eclipse.ui.internal.EditorManager.openInternalEditor(EditorManager.java:635)</Frame>
          <Frame depth="25">org.eclipse.ui.internal.EditorManager.openEditorFromDescriptor(EditorManager.java:438)</Frame>
          <Frame depth="26">org.eclipse.ui.internal.EditorManager.openEditor(EditorManager.java:426)</Frame>
          <Frame depth="27">org.eclipse.ui.internal.WorkbenchPage.busyOpenEditor(WorkbenchPage.java:2137)</Frame>
          <Frame depth="28">org.eclipse.ui.internal.WorkbenchPage.access$6(WorkbenchPage.java:2080)</Frame>
          <Frame depth="29">org.eclipse.ui.internal.WorkbenchPage$9.run(WorkbenchPage.java:2067)</Frame>
          <Frame depth="30">org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:69)</Frame>
          <Frame depth="31">org.eclipse.ui.internal.WorkbenchPage.openEditor(WorkbenchPage.java:2062)</Frame>
          <Frame depth="32">org.eclipse.ui.ide.IDE.openEditor(IDE.java:301)</Frame>
          <Frame depth="33">org.eclipse.jdt.internal.ui.javaeditor.EditorUtility.openInEditor(EditorUtility.java:137)</Frame>
          <Frame depth="34">org.eclipse.jdt.internal.ui.javaeditor.EditorUtility.openInEditor(EditorUtility.java:115)</Frame>
          <Frame depth="35">org.eclipse.jdt.internal.ui.actions.OpenActionUtil.open(OpenActionUtil.java:49)</Frame>
          <Frame depth="36">org.eclipse.jdt.ui.actions.OpenAction.run(OpenAction.java:161)</Frame>
          <Frame depth="37">org.eclipse.jdt.ui.actions.OpenAction.run(OpenAction.java:147)</Frame>
          <Frame depth="38">org.eclipse.jdt.ui.actions.SelectionDispatchAction.dispatchRun(SelectionDispatchAction.java:212)</Frame>
          <Frame depth="39">org.eclipse.jdt.ui.actions.SelectionDispatchAction.run(SelectionDispatchAction.java:188)</Frame>
          <Frame depth="40">org.eclipse.jdt.internal.ui.packageview.PackageExplorerActionGroup.handleOpen(PackageExplorerActionGroup.java:277)</Frame>
          <Frame depth="41">org.eclipse.jdt.internal.ui.packageview.PackageExplorerPart$4.open(PackageExplorerPart.java:302)</Frame>
          <Frame depth="42">org.eclipse.jface.viewers.StructuredViewer$2.run(StructuredViewer.java:396)</Frame>
          <Frame depth="43">org.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java:607)</Frame>
          <Frame depth="44">org.eclipse.core.runtime.Platform.run(Platform.java:668)</Frame>
          <Frame depth="45">org.eclipse.jface.viewers.StructuredViewer.fireOpen(StructuredViewer.java:394)</Frame>
          <Frame depth="46">org.eclipse.jface.viewers.StructuredViewer.handleOpen(StructuredViewer.java:592)</Frame>
          <Frame depth="47">org.eclipse.jface.viewers.StructuredViewer$6.handleOpen(StructuredViewer.java:681)</Frame>
          <Frame depth="48">org.eclipse.jface.util.OpenStrategy.fireOpenEvent(OpenStrategy.java:211)</Frame>
          <Frame depth="49">org.eclipse.jface.util.OpenStrategy.access$2(OpenStrategy.java:206)</Frame>
          <Frame depth="50">org.eclipse.jface.util.OpenStrategy$1.handleEvent(OpenStrategy.java:238)</Frame>
          <Frame depth="51">org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)</Frame>
          <Frame depth="52">org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:796)</Frame>
          <Frame depth="53">org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:2725)</Frame>
          <Frame depth="54">org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2390)</Frame>
          <Frame depth="55">org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1353)</Frame>
          <Frame depth="56">org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1324)</Frame>
          <Frame depth="57">org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:243)</Frame>
          <Frame depth="58">org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:141)</Frame>
          <Frame depth="59">org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:90)</Frame>
          <Frame depth="60">org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:298)</Frame>
          <Frame depth="61">org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:249)</Frame>
          <Frame depth="62">org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:126)</Frame>
          <Frame depth="63">sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)</Frame>
          <Frame depth="64">sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)</Frame>
          <Frame depth="65">sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)</Frame>
          <Frame depth="66">java.lang.reflect.Method.invoke(Method.java:324)</Frame>
          <Frame depth="67">org.eclipse.core.launcher.Main.basicRun(Main.java:269)</Frame>
          <Frame depth="68">org.eclipse.core.launcher.Main.run(Main.java:722)</Frame>
          <Frame depth="69">org.eclipse.core.launcher.Main.main(Main.java:706)</Frame>
        </Frames>
      </Stacktrace>
    </Stacktraces>
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>I tested Cheetah 04 with
eclipse.buildId=I200405140800
java.version=1.4.2_05-ea
, and I couldn't open a Java editor with the following error log.
I found that jdtcore.jar in plugins\org.eclipse.jdt.core_3.0.0.cheetah04 had 
no org/eclipse/jdt/internal/codeassist/IExtendedCompletionRequestor.class file 
while that of plugins\org.eclipse.jdt.core_3.0.0 had.

Regards,

Ias

---error message---
java.vendor=Sun Microsystems Inc.
BootLoader constants: OS=win32, ARCH=x86, WS=win32, NL=ko_KR
!ENTRY org.eclipse.compare 4 1 5&amp;#65533; 16, 2004 12:48:59.328
!MESSAGE content type 'org.eclipse.jdt.core.javaSource' not found
!ENTRY org.eclipse.compare 4 1 5&amp;#65533; 16, 2004 12:48:59.328
!MESSAGE content type 'org.eclipse.jdt.core.javaSource' not found
!ENTRY org.eclipse.core.runtime 4 2 5&amp;#65533; 16, 2004 12:49:09.171
!MESSAGE Problems occurred when invoking code from plug-
in: "org.eclipse.core.runtime".
!STACK 0
java.lang.NoClassDefFoundError: 
org/eclipse/jdt/internal/codeassist/IExtendedCompletionRequestor
	at java.lang.ClassLoader.defineClass0(Native Method)
	at java.lang.ClassLoader.defineClass(ClassLoader.java:537)
	at 
org.eclipse.osgi.framework.internal.defaultadaptor.DefaultClassLoader.defineCla
ss(DefaultClassLoader.java:292)
	at org.eclipse.core.runtime.adaptor.EclipseClassLoader.defineClass
(EclipseClassLoader.java:207)
	at 
org.eclipse.osgi.framework.internal.defaultadaptor.DefaultClassLoader.findClass
Impl(DefaultClassLoader.java:281)
	at 
org.eclipse.osgi.framework.internal.defaultadaptor.DefaultClassLoader.findClass
(DefaultClassLoader.java:172)
	at 
org.eclipse.osgi.framework.adaptor.core.AbstractClassLoader.findLocalClass
(AbstractClassLoader.java:220)
	at org.eclipse.core.runtime.adaptor.EclipseClassLoader.findLocalClass
(EclipseClassLoader.java:59)
	at org.eclipse.osgi.framework.internal.core.BundleLoader.findLocalClass
(BundleLoader.java:368)
	at org.eclipse.osgi.framework.internal.core.BundleLoader.findClass
(BundleLoader.java:399)
	at 
org.eclipse.osgi.framework.adaptor.core.AbstractClassLoader.loadClass
(AbstractClassLoader.java:93)
	at java.lang.ClassLoader.loadClass(ClassLoader.java:235)
	at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:302)
	at java.lang.ClassLoader.defineClass0(Native Method)
	at java.lang.ClassLoader.defineClass(ClassLoader.java:537)
	at 
org.eclipse.osgi.framework.internal.defaultadaptor.DefaultClassLoader.defineCla
ss(DefaultClassLoader.java:292)
	at org.eclipse.core.runtime.adaptor.EclipseClassLoader.defineClass
(EclipseClassLoader.java:207)
	at 
org.eclipse.osgi.framework.internal.defaultadaptor.DefaultClassLoader.findClass
Impl(DefaultClassLoader.java:281)
	at 
org.eclipse.osgi.framework.internal.defaultadaptor.DefaultClassLoader.findClass
(DefaultClassLoader.java:172)
	at 
org.eclipse.osgi.framework.adaptor.core.AbstractClassLoader.findLocalClass
(AbstractClassLoader.java:220)
	at org.eclipse.core.runtime.adaptor.EclipseClassLoader.findLocalClass
(EclipseClassLoader.java:59)
	at org.eclipse.osgi.framework.internal.core.BundleLoader.findLocalClass
(BundleLoader.java:368)
	at org.eclipse.osgi.framework.internal.core.BundleLoader.findClass
(BundleLoader.java:399)
	at 
org.eclipse.osgi.framework.adaptor.core.AbstractClassLoader.loadClass
(AbstractClassLoader.java:93)
	at java.lang.ClassLoader.loadClass(ClassLoader.java:235)
	at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:302)
	at 
org.eclipse.jdt.ui.text.JavaSourceViewerConfiguration.getContentAssistant
(JavaSourceViewerConfiguration.java:380)
	at org.eclipse.jface.text.source.SourceViewer.configure
(SourceViewer.java:315)
	at org.eclipse.jdt.internal.ui.javaeditor.JavaSourceViewer.configure
(JavaSourceViewer.java:172)
	at 
org.eclipse.jdt.internal.ui.javaeditor.CompilationUnitEditor$AdaptedSourceViewe
r.configure(CompilationUnitEditor.java:287)
	at org.eclipse.ui.texteditor.AbstractTextEditor.createPartControl
(AbstractTextEditor.java:2221)
	at org.eclipse.ui.texteditor.StatusTextEditor.createPartControl
(StatusTextEditor.java:53)
	at 
org.eclipse.ui.texteditor.AbstractDecoratedTextEditor.createPartControl
(AbstractDecoratedTextEditor.java:279)
	at org.eclipse.jdt.internal.ui.javaeditor.JavaEditor.createPartControl
(JavaEditor.java:3263)
	at 
org.eclipse.jdt.internal.ui.javaeditor.CompilationUnitEditor.createPartControl
(CompilationUnitEditor.java:1594)
	at org.eclipse.ui.internal.PartPane$1.run(PartPane.java:93)
	at org.eclipse.core.internal.runtime.InternalPlatform.run
(InternalPlatform.java:607)
	at org.eclipse.core.runtime.Platform.run(Platform.java:668)
	at org.eclipse.ui.internal.PartPane.createChildControl
(PartPane.java:89)
	at org.eclipse.ui.internal.PartPane.createControl(PartPane.java:150)
	at org.eclipse.ui.internal.PartStack.refreshPresentationSelection
(PartStack.java:710)
	at org.eclipse.ui.internal.PartStack.setSelection(PartStack.java:692)
	at org.eclipse.ui.internal.PartStack.add(PartStack.java:152)
	at org.eclipse.ui.internal.EditorStack.add(EditorStack.java:100)
	at org.eclipse.ui.internal.EditorSashContainer.addEditor
(EditorSashContainer.java:56)
	at org.eclipse.ui.internal.EditorAreaHelper.openEditor
(EditorAreaHelper.java:257)
	at org.eclipse.ui.internal.EditorManager$2.run(EditorManager.java:550)
	at org.eclipse.swt.custom.BusyIndicator.showWhile
(BusyIndicator.java:69)
	at org.eclipse.ui.internal.EditorManager.createEditorTab
(EditorManager.java:539)
	at org.eclipse.ui.internal.EditorManager.openInternalEditor
(EditorManager.java:635)
	at org.eclipse.ui.internal.EditorManager.openEditorFromDescriptor
(EditorManager.java:438)
	at org.eclipse.ui.internal.EditorManager.openEditor
(EditorManager.java:426)
	at org.eclipse.ui.internal.WorkbenchPage.busyOpenEditor
(WorkbenchPage.java:2137)
	at org.eclipse.ui.internal.WorkbenchPage.access$6
(WorkbenchPage.java:2080)
	at org.eclipse.ui.internal.WorkbenchPage$9.run(WorkbenchPage.java:2067)
	at org.eclipse.swt.custom.BusyIndicator.showWhile
(BusyIndicator.java:69)
	at org.eclipse.ui.internal.WorkbenchPage.openEditor
(WorkbenchPage.java:2062)
	at org.eclipse.ui.ide.IDE.openEditor(IDE.java:301)
	at org.eclipse.jdt.internal.ui.javaeditor.EditorUtility.openInEditor
(EditorUtility.java:137)
	at org.eclipse.jdt.internal.ui.javaeditor.EditorUtility.openInEditor
(EditorUtility.java:115)
	at org.eclipse.jdt.internal.ui.actions.OpenActionUtil.open
(OpenActionUtil.java:49)
	at org.eclipse.jdt.ui.actions.OpenAction.run(OpenAction.java:161)
	at org.eclipse.jdt.ui.actions.OpenAction.run(OpenAction.java:147)
	at org.eclipse.jdt.ui.actions.SelectionDispatchAction.dispatchRun
(SelectionDispatchAction.java:212)
	at org.eclipse.jdt.ui.actions.SelectionDispatchAction.run
(SelectionDispatchAction.java:188)
	at 
org.eclipse.jdt.internal.ui.packageview.PackageExplorerActionGroup.handleOpen
(PackageExplorerActionGroup.java:277)
	at org.eclipse.jdt.internal.ui.packageview.PackageExplorerPart$4.open
(PackageExplorerPart.java:302)
	at org.eclipse.jface.viewers.StructuredViewer$2.run
(StructuredViewer.java:396)
	at org.eclipse.core.internal.runtime.InternalPlatform.run
(InternalPlatform.java:607)
	at org.eclipse.core.runtime.Platform.run(Platform.java:668)
	at org.eclipse.jface.viewers.StructuredViewer.fireOpen
(StructuredViewer.java:394)
	at org.eclipse.jface.viewers.StructuredViewer.handleOpen
(StructuredViewer.java:592)
	at org.eclipse.jface.viewers.StructuredViewer$6.handleOpen
(StructuredViewer.java:681)
	at org.eclipse.jface.util.OpenStrategy.fireOpenEvent
(OpenStrategy.java:211)
	at org.eclipse.jface.util.OpenStrategy.access$2(OpenStrategy.java:206)
	at org.eclipse.jface.util.OpenStrategy$1.handleEvent
(OpenStrategy.java:238)
	at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:796)
	at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:2725)
	at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2390)
	at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1353)
	at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1324)
	at org.eclipse.ui.internal.Workbench.createAndRunWorkbench
(Workbench.java:243)
	at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:141)
	at org.eclipse.ui.internal.ide.IDEApplication.run
(IDEApplication.java:90)
	at org.eclipse.core.internal.runtime.PlatformActivator$1.run
(PlatformActivator.java:298)
	at org.eclipse.core.runtime.adaptor.EclipseStarter.run
(EclipseStarter.java:249)
	at org.eclipse.core.runtime.adaptor.EclipseStarter.run
(EclipseStarter.java:126)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke
(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke
(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:324)
	at org.eclipse.core.launcher.Main.basicRun(Main.java:269)
	at org.eclipse.core.launcher.Main.run(Main.java:722)
	at org.eclipse.core.launcher.Main.main(Main.java:706)
!ENTRY org.eclipse.core.runtime 4 2 5&amp;#65533; 16, 2004 12:49:09.203
!MESSAGE Problems occurred when invoking code from plug-
in: "org.eclipse.core.runtime".
!STACK 0
java.lang.ClassCastException
	at 
org.eclipse.jdt.internal.ui.javaeditor.ASTProvider.activeJavaEditorChanged
(ASTProvider.java:216)
	at org.eclipse.jdt.internal.ui.javaeditor.ASTProvider.access$0
(ASTProvider.java:211)
	at 
org.eclipse.jdt.internal.ui.javaeditor.ASTProvider$ActivationListener.partOpene
d(ASTProvider.java:100)
	at org.eclipse.ui.internal.PartListenerList2$5.run
(PartListenerList2.java:101)
	at org.eclipse.core.internal.runtime.InternalPlatform.run
(InternalPlatform.java:607)
	at org.eclipse.core.runtime.Platform.run(Platform.java:668)
	at org.eclipse.ui.internal.PartListenerList2.firePartOpened
(PartListenerList2.java:99)
	at org.eclipse.ui.internal.WWinPartService$1.partOpened
(WWinPartService.java:62)
	at org.eclipse.ui.internal.PartListenerList2$5.run
(PartListenerList2.java:101)
	at org.eclipse.core.internal.runtime.InternalPlatform.run
(InternalPlatform.java:607)
	at org.eclipse.core.runtime.Platform.run(Platform.java:668)
	at org.eclipse.ui.internal.PartListenerList2.firePartOpened
(PartListenerList2.java:99)
	at org.eclipse.ui.internal.WorkbenchPage.firePartOpened
(WorkbenchPage.java:1385)
	at org.eclipse.ui.internal.PartPane.createChildControl
(PartPane.java:119)
	at org.eclipse.ui.internal.PartPane.createControl(PartPane.java:150)
	at org.eclipse.ui.internal.PartStack.refreshPresentationSelection
(PartStack.java:710)
	at org.eclipse.ui.internal.PartStack.setSelection(PartStack.java:692)
	at org.eclipse.ui.internal.PartStack.add(PartStack.java:152)
	at org.eclipse.ui.internal.EditorStack.add(EditorStack.java:100)
	at org.eclipse.ui.internal.EditorSashContainer.addEditor
(EditorSashContainer.java:56)
	at org.eclipse.ui.internal.EditorAreaHelper.openEditor
(EditorAreaHelper.java:257)
	at org.eclipse.ui.internal.EditorManager$2.run(EditorManager.java:550)
	at org.eclipse.swt.custom.BusyIndicator.showWhile
(BusyIndicator.java:69)
	at org.eclipse.ui.internal.EditorManager.createEditorTab
(EditorManager.java:539)
	at org.eclipse.ui.internal.EditorManager.openInternalEditor
(EditorManager.java:635)
	at org.eclipse.ui.internal.EditorManager.openEditorFromDescriptor
(EditorManager.java:438)
	at org.eclipse.ui.internal.EditorManager.openEditor
(EditorManager.java:426)
	at org.eclipse.ui.internal.WorkbenchPage.busyOpenEditor
(WorkbenchPage.java:2137)
	at org.eclipse.ui.internal.WorkbenchPage.access$6
(WorkbenchPage.java:2080)
	at org.eclipse.ui.internal.WorkbenchPage$9.run(WorkbenchPage.java:2067)
	at org.eclipse.swt.custom.BusyIndicator.showWhile
(BusyIndicator.java:69)
	at org.eclipse.ui.internal.WorkbenchPage.openEditor
(WorkbenchPage.java:2062)
	at org.eclipse.ui.ide.IDE.openEditor(IDE.java:301)
	at org.eclipse.jdt.internal.ui.javaeditor.EditorUtility.openInEditor
(EditorUtility.java:137)
	at org.eclipse.jdt.internal.ui.javaeditor.EditorUtility.openInEditor
(EditorUtility.java:115)
	at org.eclipse.jdt.internal.ui.actions.OpenActionUtil.open
(OpenActionUtil.java:49)
	at org.eclipse.jdt.ui.actions.OpenAction.run(OpenAction.java:161)
	at org.eclipse.jdt.ui.actions.OpenAction.run(OpenAction.java:147)
	at org.eclipse.jdt.ui.actions.SelectionDispatchAction.dispatchRun
(SelectionDispatchAction.java:212)
	at org.eclipse.jdt.ui.actions.SelectionDispatchAction.run
(SelectionDispatchAction.java:188)
	at 
org.eclipse.jdt.internal.ui.packageview.PackageExplorerActionGroup.handleOpen
(PackageExplorerActionGroup.java:277)
	at org.eclipse.jdt.internal.ui.packageview.PackageExplorerPart$4.open
(PackageExplorerPart.java:302)
	at org.eclipse.jface.viewers.StructuredViewer$2.run
(StructuredViewer.java:396)
	at org.eclipse.core.internal.runtime.InternalPlatform.run
(InternalPlatform.java:607)
	at org.eclipse.core.runtime.Platform.run(Platform.java:668)
	at org.eclipse.jface.viewers.StructuredViewer.fireOpen
(StructuredViewer.java:394)
	at org.eclipse.jface.viewers.StructuredViewer.handleOpen
(StructuredViewer.java:592)
	at org.eclipse.jface.viewers.StructuredViewer$6.handleOpen
(StructuredViewer.java:681)
	at org.eclipse.jface.util.OpenStrategy.fireOpenEvent
(OpenStrategy.java:211)
	at org.eclipse.jface.util.OpenStrategy.access$2(OpenStrategy.java:206)
	at org.eclipse.jface.util.OpenStrategy$1.handleEvent
(OpenStrategy.java:238)
	at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:796)
	at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:2725)
	at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2390)
	at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1353)
	at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1324)
	at org.eclipse.ui.internal.Workbench.createAndRunWorkbench
(Workbench.java:243)
	at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:141)
	at org.eclipse.ui.internal.ide.IDEApplication.run
(IDEApplication.java:90)
	at org.eclipse.core.internal.runtime.PlatformActivator$1.run
(PlatformActivator.java:298)
	at org.eclipse.core.runtime.adaptor.EclipseStarter.run
(EclipseStarter.java:249)
	at org.eclipse.core.runtime.adaptor.EclipseStarter.run
(EclipseStarter.java:126)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke
(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke
(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:324)
	at org.eclipse.core.launcher.Main.basicRun(Main.java:269)
	at org.eclipse.core.launcher.Main.run(Main.java:722)
	at org.eclipse.core.launcher.Main.main(Main.java:706)
Cheetah04 isn't compatible with latest integration build. Please use an older 
build instead.

I will soon repost an update of Cheetah which will match latest Eclipse  build.
Fixed once Cheetah05 is available.</WithStack>
    <WithOutStack>I tested Cheetah 04 with
eclipse.buildId=I200405140800
java.version=1.4.2_05-ea
, and I couldn't open a Java editor with the following error log.
I found that jdtcore.jar in plugins\org.eclipse.jdt.core_3.0.0.cheetah04 had 
no org/eclipse/jdt/internal/codeassist/IExtendedCompletionRequestor.class file 
while that of plugins\org.eclipse.jdt.core_3.0.0 had.

Regards,

Ias

---error message---
java.vendor=Sun Microsystems Inc.
BootLoader constants: OS=win32, ARCH=x86, WS=win32, NL=ko_KR
!ENTRY org.eclipse.compare 4 1 5&amp;#65533; 16, 2004 12:48:59.328
!MESSAGE content type 'org.eclipse.jdt.core.javaSource' not found
!ENTRY org.eclipse.compare 4 1 5&amp;#65533; 16, 2004 12:48:59.328
!MESSAGE content type 'org.eclipse.jdt.core.javaSource' not found
!ENTRY org.eclipse.core.runtime 4 2 5&amp;#65533; 16, 2004 12:49:09.171
!MESSAGE Problems occurred when invoking code from plug-
in: "org.eclipse.core.runtime".
!STACK 0
!ENTRY org.eclipse.core.runtime 4 2 5&amp;#65533; 16, 2004 12:49:09.203
!MESSAGE Problems occurred when invoking code from plug-
in: "org.eclipse.core.runtime".
!STACK 0

Cheetah04 isn't compatible with latest integration build. Please use an older 
build instead.

I will soon repost an update of Cheetah which will match latest Eclipse  build.
Fixed once Cheetah05 is available.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="62417" />
    <CreationDate amount="2004-05-16 01:26:00 -0400" />
    <DupId amount="" />
    <classification amount="Tools" />
    <Product amount="AspectJ" />
    <component amount="Docs" />
    <Version amount="unspecified" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="minor" />
    <Summery>Sample code in AspectJ doc does not work</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="5">
      <source_code type="functioncall">
        <location start="258" end="304" />
        <code>pointcut fooPC(): execution(void Test.foo());</code>
      </source_code>
      <source_code type="functioncall">
        <location start="305" end="351" />
        <code>pointcut gooPC(): execution(void Test.goo());</code>
      </source_code>
      <source_code type="functioncall">
        <location start="352" end="420" />
        <code>pointcut printPC(): call(void java.io.PrintStream.println(String));</code>
      </source_code>
      <source_code type="functiondef">
        <location start="422" end="523" />
        <code>before(): cflow(fooPC()) &amp;&amp; cflow(gooPC()) &amp;&amp; printPC() {
	   System.out.print("should occur\n");
	}</code>
      </source_code>
      <source_code type="functiondef">
        <location start="525" end="623" />
        <code>before(): cflow(fooPC() &amp;&amp; gooPC()) &amp;&amp; printPC() {
	   System.out.print("should not occur\n");
	}</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="WORKSFORME" />
    <WithStack>Chapter 2. The AspectJ Language
Join Points and Pointcuts
Pointcut composition
The code snippet Test and A does not work.
It results in a StackOverflowError.

Should not call println in the advice.

One possible code snippet that works is:
public aspect A {
	pointcut fooPC(): execution(void Test.foo());
	pointcut gooPC(): execution(void Test.goo());
	pointcut printPC(): call(void java.io.PrintStream.println(String));

	before(): cflow(fooPC()) &amp;&amp; cflow(gooPC()) &amp;&amp; printPC() {
	   System.out.print("should occur\n");
	}

	before(): cflow(fooPC() &amp;&amp; gooPC()) &amp;&amp; printPC() {
	   System.out.print("should not occur\n");
	}
}
I carefully cut-and-pasted the code from both the online documentation and the 
doc shipped with AspectJ 1.2. The sample program works correctly for me with 
AspectJ 1.2 in both cases. Is it possible you made an error in transcription of 
the example?
Fix released as part of AspectJ 1.2.1</WithStack>
    <WithOutStack>Chapter 2. The AspectJ Language
Join Points and Pointcuts
Pointcut composition
The code snippet Test and A does not work.
It results in a StackOverflowError.

Should not call println in the advice.

One possible code snippet that works is:
public aspect A {
	pointcut fooPC(): execution(void Test.foo());
	pointcut gooPC(): execution(void Test.goo());
	pointcut printPC(): call(void java.io.PrintStream.println(String));

	before(): cflow(fooPC()) &amp;&amp; cflow(gooPC()) &amp;&amp; printPC() {
	   System.out.print("should occur\n");
	}

	before(): cflow(fooPC() &amp;&amp; gooPC()) &amp;&amp; printPC() {
	   System.out.print("should not occur\n");
	}
}
I carefully cut-and-pasted the code from both the online documentation and the 
doc shipped with AspectJ 1.2. The sample program works correctly for me with 
AspectJ 1.2 in both cases. Is it possible you made an error in transcription of 
the example?
Fix released as part of AspectJ 1.2.1</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="62418" />
    <CreationDate amount="2004-05-16 05:33:00 -0400" />
    <DupId amount="61841" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="SWT" />
    <Version amount="3.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>clipboard exception: Cannot set data in clipboard</Summery>
    <Patches amount="0" />
    <Stacktraces amount="1">
      <Stacktrace timestamp="1437341131335">
        <Exception>org.eclipse.swt.SWTError</Exception>
        <Reason>Cannot set data in clipboard</Reason>
        <Frames>
          <Frame depth="0">org.eclipse.swt.dnd.DND.error(DND.java:225)</Frame>
          <Frame depth="1">org.eclipse.swt.dnd.DND.error(DND.java:181)</Frame>
          <Frame depth="2">org.eclipse.swt.dnd.Clipboard.setContents(Clipboard.java:267)</Frame>
          <Frame depth="3">org.eclipse.jdt.internal.ui.javaeditor.ClipboardOperationAction.doCutCopyWithImportsOperation(ClipboardOperationAction.java:304)</Frame>
          <Frame depth="4">org.eclipse.jdt.internal.ui.javaeditor.ClipboardOperationAction.internalDoOperation(ClipboardOperationAction.java:246)</Frame>
          <Frame depth="5">org.eclipse.jdt.internal.ui.javaeditor.ClipboardOperationAction$1.run(ClipboardOperationAction.java:224)</Frame>
          <Frame depth="6">org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:69)</Frame>
          <Frame depth="7">org.eclipse.jdt.internal.ui.javaeditor.ClipboardOperationAction.run(ClipboardOperationAction.java:222)</Frame>
          <Frame depth="8">org.eclipse.jface.action.Action.runWithEvent(Action.java:881)</Frame>
          <Frame depth="9">org.eclipse.ui.commands.ActionHandler.execute(ActionHandler.java:141)</Frame>
          <Frame depth="10">org.eclipse.ui.internal.commands.Command.execute(Command.java:132)</Frame>
          <Frame depth="11">org.eclipse.ui.internal.keys.WorkbenchKeyboard.executeCommand(WorkbenchKeyboard.java:468)</Frame>
          <Frame depth="12">org.eclipse.ui.internal.keys.WorkbenchKeyboard.press(WorkbenchKeyboard.java:886)</Frame>
          <Frame depth="13">org.eclipse.ui.internal.keys.WorkbenchKeyboard.processKeyEvent(WorkbenchKeyboard.java:927)</Frame>
          <Frame depth="14">org.eclipse.ui.internal.keys.WorkbenchKeyboard.filterKeySequenceBindings(WorkbenchKeyboard.java:545)</Frame>
          <Frame depth="15">org.eclipse.ui.internal.keys.WorkbenchKeyboard.access$2(WorkbenchKeyboard.java:493)</Frame>
          <Frame depth="16">org.eclipse.ui.internal.keys.WorkbenchKeyboard$1.handleEvent(WorkbenchKeyboard.java:258)</Frame>
          <Frame depth="17">org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)</Frame>
          <Frame depth="18">org.eclipse.swt.widgets.Display.filterEvent(Display.java:712)</Frame>
          <Frame depth="19">org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:795)</Frame>
          <Frame depth="20">org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:820)</Frame>
          <Frame depth="21">org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:805)</Frame>
          <Frame depth="22">org.eclipse.swt.widgets.Control.sendKeyEvent(Control.java:1724)</Frame>
          <Frame depth="23">org.eclipse.swt.widgets.Control.sendKeyEvent(Control.java:1720)</Frame>
          <Frame depth="24">org.eclipse.swt.widgets.Control.WM_CHAR(Control.java:3048)</Frame>
          <Frame depth="25">org.eclipse.swt.widgets.Control.windowProc(Control.java:2951)</Frame>
          <Frame depth="26">org.eclipse.swt.widgets.Display.windowProc(Display.java:3291)</Frame>
          <Frame depth="27">org.eclipse.swt.internal.win32.OS.CallWindowProcW(Native Method)</Frame>
          <Frame depth="28">org.eclipse.swt.internal.win32.OS.CallWindowProc(OS.java:1390)</Frame>
          <Frame depth="29">org.eclipse.swt.internal.BidiUtil.windowProc(BidiUtil.java:647)</Frame>
          <Frame depth="30">org.eclipse.swt.internal.win32.OS.DispatchMessageW(Native Method)</Frame>
          <Frame depth="31">org.eclipse.swt.internal.win32.OS.DispatchMessage(OS.java:1466)</Frame>
          <Frame depth="32">org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2388)</Frame>
          <Frame depth="33">org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1353)</Frame>
          <Frame depth="34">org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1324)</Frame>
          <Frame depth="35">org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:243)</Frame>
          <Frame depth="36">org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:141)</Frame>
          <Frame depth="37">org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:90)</Frame>
          <Frame depth="38">org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:298)</Frame>
          <Frame depth="39">org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:249)</Frame>
          <Frame depth="40">org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:126)</Frame>
          <Frame depth="41">sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)</Frame>
          <Frame depth="42">sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)</Frame>
          <Frame depth="43">sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)</Frame>
          <Frame depth="44">java.lang.reflect.Method.invoke(Method.java:494)</Frame>
          <Frame depth="45">org.eclipse.core.launcher.Main.basicRun(Main.java:269)</Frame>
          <Frame depth="46">org.eclipse.core.launcher.Main.run(Main.java:722)</Frame>
          <Frame depth="47">org.eclipse.core.launcher.Main.main(Main.java:706)</Frame>
        </Frames>
      </Stacktrace>
    </Stacktraces>
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="DUPLICATE" />
    <WithStack>with the latest builds now using 200405140800 i get an Exception and a Dialog 
in eclipse that i should terminate eclipse because of a SWT error..

It seems that it does put the right data into the clipboard (or i can use the 
clipboard right after that pretty normally)

org.eclipse.swt.SWTError: Cannot set data in clipboard
        at org.eclipse.swt.dnd.DND.error(DND.java:225)
        at org.eclipse.swt.dnd.DND.error(DND.java:181)
        at org.eclipse.swt.dnd.Clipboard.setContents(Clipboard.java:267)
        at org.eclipse.jdt.internal.ui.javaeditor.ClipboardOperationAction.doCut
CopyWithImportsOperation(ClipboardOperationAction.java:304)
        at org.eclipse.jdt.internal.ui.javaeditor.ClipboardOperationAction.inter
nalDoOperation(ClipboardOperationAction.java:246)
        at org.eclipse.jdt.internal.ui.javaeditor.ClipboardOperationAction$1.run
(ClipboardOperationAction.java:224)
        at org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:69)

        at org.eclipse.jdt.internal.ui.javaeditor.ClipboardOperationAction.run(C
lipboardOperationAction.java:222)
        at org.eclipse.jface.action.Action.runWithEvent(Action.java:881)
        at org.eclipse.ui.commands.ActionHandler.execute(ActionHandler.java:141)

        at org.eclipse.ui.internal.commands.Command.execute(Command.java:132)
        at org.eclipse.ui.internal.keys.WorkbenchKeyboard.executeCommand(Workben
chKeyboard.java:468)
        at org.eclipse.ui.internal.keys.WorkbenchKeyboard.press(WorkbenchKeyboar
d.java:886)
        at org.eclipse.ui.internal.keys.WorkbenchKeyboard.processKeyEvent(Workbe
nchKeyboard.java:927)
        at org.eclipse.ui.internal.keys.WorkbenchKeyboard.filterKeySequenceBindi
ngs(WorkbenchKeyboard.java:545)
        at org.eclipse.ui.internal.keys.WorkbenchKeyboard.access$2(WorkbenchKeyb
oard.java:493)
        at org.eclipse.ui.internal.keys.WorkbenchKeyboard$1.handleEvent(Workbenc
hKeyboard.java:258)
        at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)
        at org.eclipse.swt.widgets.Display.filterEvent(Display.java:712)
        at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:795)
        at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:820)
        at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:805)
        at org.eclipse.swt.widgets.Control.sendKeyEvent(Control.java:1724)
        at org.eclipse.swt.widgets.Control.sendKeyEvent(Control.java:1720)
        at org.eclipse.swt.widgets.Control.WM_CHAR(Control.java:3048)
        at org.eclipse.swt.widgets.Control.windowProc(Control.java:2951)
        at org.eclipse.swt.widgets.Display.windowProc(Display.java:3291)
        at org.eclipse.swt.internal.win32.OS.CallWindowProcW(Native Method)
        at org.eclipse.swt.internal.win32.OS.CallWindowProc(OS.java:1390)
        at org.eclipse.swt.internal.BidiUtil.windowProc(BidiUtil.java:647)
        at org.eclipse.swt.internal.win32.OS.DispatchMessageW(Native Method)
        at org.eclipse.swt.internal.win32.OS.DispatchMessage(OS.java:1466)
        at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2388)
        at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1353)
        at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1324)
        at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.jav
a:243)
        at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:141)
        at org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:90
)
        at org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformAct
ivator.java:298)
        at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.ja
va:249)
        at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.ja
va:126)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.
java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces
sorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:494)
        at org.eclipse.core.launcher.Main.basicRun(Main.java:269)
        at org.eclipse.core.launcher.Main.run(Main.java:722)
        at org.eclipse.core.launcher.Main.main(Main.java:706)


*** This bug has been marked as a duplicate of 61841 ***</WithStack>
    <WithOutStack>with the latest builds now using 200405140800 i get an Exception and a Dialog 
in eclipse that i should terminate eclipse because of a SWT error..

It seems that it does put the right data into the clipboard (or i can use the 
clipboard right after that pretty normally)




*** This bug has been marked as a duplicate of 61841 ***</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="62419" />
    <CreationDate amount="2004-05-16 06:56:00 -0400" />
    <DupId amount="55537" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="Resources" />
    <Version amount="3.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>default workplace directory is not saved.</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="DUPLICATE" />
    <WithStack>default workplace directory is not saved.

-&gt; everytime i start eclipse i am asked to enter my workplace, regardless of the
checkbox setting (use as default)

happened in:
Version 3.0.0
Build id: 200403261517


*** This bug has been marked as a duplicate of 55537 ***</WithStack>
    <WithOutStack>default workplace directory is not saved.

-&gt; everytime i start eclipse i am asked to enter my workplace, regardless of the
checkbox setting (use as default)

happened in:
Version 3.0.0
Build id: 200403261517


*** This bug has been marked as a duplicate of 55537 ***</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="62420" />
    <CreationDate amount="2004-05-16 07:26:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="UI" />
    <Version amount="3.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Help &gt; Welcome invocation - 2 problems</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="3">
      <Enumeration lines="8">
        <Lines>
          <Line>a) References to Help &gt; Welcome:</Line>
          <Line>From Workbench User Guide, Rearranging views and editors</Line>
          <Line>... If necessary, the welcome page can be returned to by choosing Help &gt;</Line>
          <Line>Welcome... and selecting Eclipse Platform.</Line>
          <Line />
          <Line>b) From Workbench User Guide, Help menu</Line>
          <Line>Help menu</Line>
          <Line>This menu provides help on using the Workbench.</Line>
        </Lines>
      </Enumeration>
      <Enumeration lines="9">
        <Lines>
          <Line>1. No Welcome option in the Help pull-down menu.</Line>
          <Line>Although Help contains several references to Help &gt; Welcome invocation (please</Line>
          <Line>see examples below) there is no Welcome option in the Help pull-down menu.</Line>
          <Line>2. The CDT option line in the Welcome dialog box is empty.</Line>
          <Line>In the Eclipse Platform Welcome editor click on Help &gt; Welcome hyperlink. The</Line>
          <Line>Welcome dialog box appears. Notice that in the first line of the four available</Line>
          <Line>welcome editors choices is empty. The empty line is supposed to display the CDT</Line>
          <Line>Welcome editor choice. If you either select the empty line and click OK, or</Line>
          <Line>double click the empty line, the CDT Welcome editor would be displayed.</Line>
        </Lines>
      </Enumeration>
      <Enumeration lines="8">
        <Lines>
          <Line>- start Eclipse after fresh install or after current workspace is deleted (no</Line>
          <Line>CDT installed yet);</Line>
          <Line>- from Inro screen click on 'Go To The Workbench'</Line>
          <Line>- exit Eclipse without taking any action</Line>
          <Line>- start Eclipse in the same workspace</Line>
          <Line>- Eclipse opens with Welcome editor with Help &gt; Welcome hyperlink that would</Line>
          <Line>allow to open other Welcome screens, such as JDT, PDE, and if installed, CDT</Line>
          <Line>(blank line)</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="RESOLVED" />
    <resolution amount="WONTFIX" />
    <WithStack>Win XP, Eclipse Platform 3.0M8 CDT 2.0 M8
1. No Welcome option in the Help pull-down menu.
Although Help contains several references to Help &gt; Welcome invocation (please
see examples below) there is no Welcome option in the Help pull-down menu.
2. The CDT option line in the Welcome dialog box is empty.
In the Eclipse Platform Welcome editor click on Help &gt; Welcome hyperlink. The
Welcome dialog box appears. Notice that in the first line of the four available
welcome editors choices is empty. The empty line is supposed to display the CDT
Welcome editor choice. If you either select the empty line and click OK, or
double click the empty line, the CDT Welcome editor would be displayed.

Examples for problem 1. (described above)
a) References to Help &gt; Welcome:
From Workbench User Guide, Rearranging views and editors
... If necessary, the welcome page can be returned to by choosing Help &gt;
Welcome... and selecting Eclipse Platform.

b) From Workbench User Guide, Help menu
Help menu
This menu provides help on using the Workbench.

Welcome
This command is used to open a Welcome editor containing a brief tutorial
intended to introduce new users to some facet of Eclipse.
Welcome has been deprecated in 3.0 in favour of the introduction extension.  The
doc needs to be updated to reflect this.  Reassigning to Andrea for comment.
I'm not seeing the second problem you've described when running against
I20040514.  Could you try running CDT against this integration build and confirm
if it's still an issue?  
The following behavior from 3.0M8 is no longer observed in the I20040514 even
before I install CDT:
- start Eclipse after fresh install or after current workspace is deleted (no
CDT installed yet);
- from Inro screen click on 'Go To The Workbench'
- exit Eclipse without taking any action
- start Eclipse in the same workspace
- Eclipse opens with Welcome editor with Help &gt; Welcome hyperlink that would
allow to open other Welcome screens, such as JDT, PDE, and if installed, CDT
(blank line)

Since in the I20040514 the Platform Welcome editor never opens, there is no way
to reproduce the "blank line instead of CDT option" problem in the Welcome
dialog. However, if the same code is going to be reused somewhere in the new
Intro screen Help system, maybe it's worth fixing the problem in the 3.0M8.

As a follow-up to comment #1 from Kim Horne, if the Welcome editor is deprecated
then several references in the Help system should be removed as they are rather
misleading.

I don't know whether this comment is allowed here, but the new Inro screen is
very nice: it is very unorthodox and refreshing, at the same time intriguing and
inviting to explore.
I have edited the pages described in problem number 1.


problem #2 is reported against CDT this should be logged there.</WithStack>
    <WithOutStack>Win XP, Eclipse Platform 3.0M8 CDT 2.0 M8
1. No Welcome option in the Help pull-down menu.
Although Help contains several references to Help &gt; Welcome invocation (please
see examples below) there is no Welcome option in the Help pull-down menu.
2. The CDT option line in the Welcome dialog box is empty.
In the Eclipse Platform Welcome editor click on Help &gt; Welcome hyperlink. The
Welcome dialog box appears. Notice that in the first line of the four available
welcome editors choices is empty. The empty line is supposed to display the CDT
Welcome editor choice. If you either select the empty line and click OK, or
double click the empty line, the CDT Welcome editor would be displayed.

Examples for problem 1. (described above)
a) References to Help &gt; Welcome:
From Workbench User Guide, Rearranging views and editors
... If necessary, the welcome page can be returned to by choosing Help &gt;
Welcome... and selecting Eclipse Platform.

b) From Workbench User Guide, Help menu
Help menu
This menu provides help on using the Workbench.

Welcome
This command is used to open a Welcome editor containing a brief tutorial
intended to introduce new users to some facet of Eclipse.
Welcome has been deprecated in 3.0 in favour of the introduction extension.  The
doc needs to be updated to reflect this.  Reassigning to Andrea for comment.
I'm not seeing the second problem you've described when running against
I20040514.  Could you try running CDT against this integration build and confirm
if it's still an issue?  
The following behavior from 3.0M8 is no longer observed in the I20040514 even
before I install CDT:
- start Eclipse after fresh install or after current workspace is deleted (no
CDT installed yet);
- from Inro screen click on 'Go To The Workbench'
- exit Eclipse without taking any action
- start Eclipse in the same workspace
- Eclipse opens with Welcome editor with Help &gt; Welcome hyperlink that would
allow to open other Welcome screens, such as JDT, PDE, and if installed, CDT
(blank line)

Since in the I20040514 the Platform Welcome editor never opens, there is no way
to reproduce the "blank line instead of CDT option" problem in the Welcome
dialog. However, if the same code is going to be reused somewhere in the new
Intro screen Help system, maybe it's worth fixing the problem in the 3.0M8.

As a follow-up to comment #1 from Kim Horne, if the Welcome editor is deprecated
then several references in the Help system should be removed as they are rather
misleading.

I don't know whether this comment is allowed here, but the new Inro screen is
very nice: it is very unorthodox and refreshing, at the same time intriguing and
inviting to explore.
I have edited the pages described in problem number 1.


problem #2 is reported against CDT this should be logged there.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="62421" />
    <CreationDate amount="2004-05-16 09:59:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="JDT" />
    <component amount="Text" />
    <Version amount="3.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Relevance for method stub is too high</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="2">
      <source_code type="class">
        <location start="115" end="149" />
        <code>class X {
  void someMethod() {}
}</code>
      </source_code>
      <source_code type="class">
        <location start="151" end="231" />
        <code>class Y extends X {
  some&lt;CODEASSIST&gt; --&gt; first proposal shouldn't be #some()
}</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="1">
      <Enumeration lines="2">
        <Lines>
          <Line>- overriden method relevance is 18</Line>
          <Line>- method stub relevance is 5</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>Build 20040513

Method stubs are inserted before overriden method declarations. This shouldn't 
be the case.

e.g.
class X {
  void someMethod() {}
}

class Y extends X {
  some&lt;CODEASSIST&gt; --&gt; first proposal shouldn't be #some()
}
For CompletionEngine
 - overriden method relevance is 18
 - method stub relevance is 5

The proposals list seems do not use the relevance for method stubs.

Move to JDT/UI
add added some relevance because type proposals go a higher relevance than the 
method stub proposal. 
fixed &gt; 20040517

now using the jdt.core relevance</WithStack>
    <WithOutStack>Build 20040513

Method stubs are inserted before overriden method declarations. This shouldn't 
be the case.

e.g.
class X {
  void someMethod() {}
}

class Y extends X {
  some&lt;CODEASSIST&gt; --&gt; first proposal shouldn't be #some()
}
For CompletionEngine
 - overriden method relevance is 18
 - method stub relevance is 5

The proposals list seems do not use the relevance for method stubs.

Move to JDT/UI
add added some relevance because type proposals go a higher relevance than the 
method stub proposal. 
fixed &gt; 20040517

now using the jdt.core relevance</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="62422" />
    <CreationDate amount="2004-05-16 10:54:00 -0400" />
    <DupId amount="" />
    <classification amount="Modeling" />
    <Product amount="EMF" />
    <component amount="Core" />
    <Version amount="2.0" />
    <rep_platform amount="All" />
    <op_sys amount="All" />
    <priority amount="P3" />
    <bug_severity amount="enhancement" />
    <Summery>Support generator control over runtime compatibility and Rich Client Platform</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="VERIFIED" />
    <resolution amount="FIXED" />
    <WithStack>Eliminate the use of runtime compatibility within EMF.
Change plugin dependencies to support RCP.
Avoid use of runtime compatibility in EMF code and plugins to eliminate 
deprecation warnings.
Change all plugins to require org.eclipse.core.runtime not 
org.eclipse.core.runtime.compatibility.
Provide GenModel.runtimeCompatibility property to target either the new or old 
runtime.

Make non-RCP plugin dependencies optional.
Only optionally require org.eclipse.core.resources from org.eclipse.emf.ecore 
and org.eclipe.emf.edit.ui.
Only optionally require org.eclipse.ui.ide from org.eclipse.emf.edit.ui and 
don't export it.
Provide GenModel.richClientPlatform property to target the editor for RCP.

The fix is available in the latest build.
Move to verified as per bug 206558.</WithStack>
    <WithOutStack>Eliminate the use of runtime compatibility within EMF.
Change plugin dependencies to support RCP.
Avoid use of runtime compatibility in EMF code and plugins to eliminate 
deprecation warnings.
Change all plugins to require org.eclipse.core.runtime not 
org.eclipse.core.runtime.compatibility.
Provide GenModel.runtimeCompatibility property to target either the new or old 
runtime.

Make non-RCP plugin dependencies optional.
Only optionally require org.eclipse.core.resources from org.eclipse.emf.ecore 
and org.eclipe.emf.edit.ui.
Only optionally require org.eclipse.ui.ide from org.eclipse.emf.edit.ui and 
don't export it.
Provide GenModel.richClientPlatform property to target the editor for RCP.

The fix is available in the latest build.
Move to verified as per bug 206558.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="62423" />
    <CreationDate amount="2004-05-16 11:14:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="UI" />
    <Version amount="3.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>[About] [RCP] Need more flexibility in the about dialog box.</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="9">
        <Lines>
          <Line>- Used IPluginDescriptor instead of PluginDescriptor.</Line>
          <Line>- Used</Line>
          <Line>org.eclipse.update.configurator.ConfiguratorUtils#getCurrentPlatformCOnfiguratio</Line>
          <Line>n()instead of org.eclipse.core.boot.BootLoader#getCurrentPlatformCOnfiguration</Line>
          <Line>().</Line>
          <Line>- Used org.eclipse.update.configurator.IPlatformConfiguration instead of</Line>
          <Line>org.eclipse.core.boot.IPlatformConfiguration.</Line>
          <Line>As of now 'LATER' and 'REMIND' resolutions are no longer supported.</Line>
          <Line>Please reopen this bug if it is still valid for you.</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="RESOLVED" />
    <resolution amount="WONTFIX" />
    <WithStack>PROBLEM:
While the about dialog has some flexibility for branding, our application 
requires more. In our about dialog box we need a canvas in place of the top 
part of the standard about dialog that contains the branding image and/or 
branding text. It is our desire to display our version and license text at 
certain offsets over the image instead of having the image and text displayed 
side by side.
In addition, we desire the flexibility to have only specific elements of the 
about dialog visible. We do not want the feature image buttons row and 
the "Feature Details" button to be visible but do want the "Plug-in Details" 
and "Configuration Details" buttons visible.

We have also bumped into the bug that the about dialog box is in 
org.eclipse.ui.ide (bug #54052).

SOLUTION:
Needed to modify the code in AboutDialog.java to add a canvas, 
AboutCanvas.java, and comment out unwanted ui elements. AboutDialog.java 
required the following files to be moved out of org.eclipse.ui.ide and 
modified to work outside that environment.

AboutAction.java
AboutPluginsDialog.java
ProductInfoDialog.java
SystemSummaryDialog.java
Created attachment 10703
modified AboutDialog.java

Added a canvas, AboutCanvas, to display an image with license and version text
displayed on top of the image. Disabled unwanted ui elements.
Created attachment 10704
modified AboutPluginsDialog.java

Hacked to run outside of org.eclipse.ui.ide
Created attachment 10705
modified ProductInfoDialog.java

Hacked to run outside of org.eclipse.ui.ide
Created attachment 10706
modified SystemSummaryDialog.java

Hacked to run outside of org.eclipse.ui.ide
Created attachment 10707
modified AboutAction.java

Hacked to work outside of org.eclipse.ui.ide
Note that the AboutDialog was pushed down to the generic workbench from the IDE
layer recently.  However the only API exposed is the action to open the dialog.
 See bug 54052 for more details.

The intent is that applications can use this one for getting started, but most
apps will want to roll their own.

Exposing more than that would require further API work, and Eclipse is now API
frozen for 3.0.

Will consider opening it up more post-3.0.

can we have this for 3.1 ?

in addition to Darrell's comments, 
in IBM Workplace 2.5, AboutItem class is also used to support URL link on 
AboutDialog, and also Workplace's about dialog is extended from Eclipse 
ProductInfoDialog without changing Eclipse ProductInfoDialog.

Thanks,
Hiro

Hiro, sorry but we are feature frozen for 3.1 at this point.

Created attachment 19885
IBM Workplace 2.5 About dialog code

Thank you Nick. 
We will wait till the next chance.
In case, I added About box code in Workplace 2.5,
so that we can get the idea how to enhance the about dialog code.

Thanks,
Hiro
One more comment...
We have another plugin to display About box. 
The code is same as this code, except for the following things:

SystemSummaryDialog.java
- Used IPluginDescriptor instead of PluginDescriptor.
- Used 
org.eclipse.update.configurator.ConfiguratorUtils#getCurrentPlatformCOnfiguratio
n()instead of org.eclipse.core.boot.BootLoader#getCurrentPlatformCOnfiguration
().
- Used org.eclipse.update.configurator.IPlatformConfiguration instead of 
org.eclipse.core.boot.IPlatformConfiguration.
As of now 'LATER' and 'REMIND' resolutions are no longer supported.
Please reopen this bug if it is still valid for you.</WithStack>
    <WithOutStack>PROBLEM:
While the about dialog has some flexibility for branding, our application 
requires more. In our about dialog box we need a canvas in place of the top 
part of the standard about dialog that contains the branding image and/or 
branding text. It is our desire to display our version and license text at 
certain offsets over the image instead of having the image and text displayed 
side by side.
In addition, we desire the flexibility to have only specific elements of the 
about dialog visible. We do not want the feature image buttons row and 
the "Feature Details" button to be visible but do want the "Plug-in Details" 
and "Configuration Details" buttons visible.

We have also bumped into the bug that the about dialog box is in 
org.eclipse.ui.ide (bug #54052).

SOLUTION:
Needed to modify the code in AboutDialog.java to add a canvas, 
AboutCanvas.java, and comment out unwanted ui elements. AboutDialog.java 
required the following files to be moved out of org.eclipse.ui.ide and 
modified to work outside that environment.

AboutAction.java
AboutPluginsDialog.java
ProductInfoDialog.java
SystemSummaryDialog.java
Created attachment 10703
modified AboutDialog.java

Added a canvas, AboutCanvas, to display an image with license and version text
displayed on top of the image. Disabled unwanted ui elements.
Created attachment 10704
modified AboutPluginsDialog.java

Hacked to run outside of org.eclipse.ui.ide
Created attachment 10705
modified ProductInfoDialog.java

Hacked to run outside of org.eclipse.ui.ide
Created attachment 10706
modified SystemSummaryDialog.java

Hacked to run outside of org.eclipse.ui.ide
Created attachment 10707
modified AboutAction.java

Hacked to work outside of org.eclipse.ui.ide
Note that the AboutDialog was pushed down to the generic workbench from the IDE
layer recently.  However the only API exposed is the action to open the dialog.
 See bug 54052 for more details.

The intent is that applications can use this one for getting started, but most
apps will want to roll their own.

Exposing more than that would require further API work, and Eclipse is now API
frozen for 3.0.

Will consider opening it up more post-3.0.

can we have this for 3.1 ?

in addition to Darrell's comments, 
in IBM Workplace 2.5, AboutItem class is also used to support URL link on 
AboutDialog, and also Workplace's about dialog is extended from Eclipse 
ProductInfoDialog without changing Eclipse ProductInfoDialog.

Thanks,
Hiro

Hiro, sorry but we are feature frozen for 3.1 at this point.

Created attachment 19885
IBM Workplace 2.5 About dialog code

Thank you Nick. 
We will wait till the next chance.
In case, I added About box code in Workplace 2.5,
so that we can get the idea how to enhance the about dialog code.

Thanks,
Hiro
One more comment...
We have another plugin to display About box. 
The code is same as this code, except for the following things:

SystemSummaryDialog.java
- Used IPluginDescriptor instead of PluginDescriptor.
- Used 
org.eclipse.update.configurator.ConfiguratorUtils#getCurrentPlatformCOnfiguratio
n()instead of org.eclipse.core.boot.BootLoader#getCurrentPlatformCOnfiguration
().
- Used org.eclipse.update.configurator.IPlatformConfiguration instead of 
org.eclipse.core.boot.IPlatformConfiguration.
As of now 'LATER' and 'REMIND' resolutions are no longer supported.
Please reopen this bug if it is still valid for you.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="62424" />
    <CreationDate amount="2004-05-16 12:01:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="SWT" />
    <Version amount="3.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Linux-GTK" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>gc.drawFocus on linux does not use XOR drawing</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="16">
        <Lines>
          <Line>1) There is a difference in behavior from win32. On win32 when I call</Line>
          <Line>gc.drawFocus on an area of the gc that already has a focus rect displayed, the</Line>
          <Line>focus rect will XOR off (The gc is created from the canvas that is being</Line>
          <Line>painted (lgc = new GC(getCanvas());). On linux this will not happen, the focus</Line>
          <Line>will continue to be displayed. To try to work around the problem I set the xor</Line>
          <Line>mode to true to try to explicitly XOR the existing focus rect. This did not</Line>
          <Line>work.</Line>
          <Line />
          <Line>To work around the problem I added, SWT.getPlatform, to test for the "gtk"</Line>
          <Line>platform and in that case I redraw the area of the canvas containing the focus</Line>
          <Line>rect instead of simply XORing it away.</Line>
          <Line />
          <Line>2) The focus rect on linux is solid line, not dotted line. The OS applications</Line>
          <Line>use a dotted line for focus and SWT should as well.</Line>
          <Line>We now draw the appropriate native focus rectangle for the current GTK+ theme</Line>
          <Line>using the GTK+ style API.  This was done in bug 80830.</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="RESOLVED" />
    <resolution amount="WONTFIX" />
    <WithStack>I have two issues with gc.drawFocus on linux. 
1) There is a difference in behavior from win32. On win32 when I call 
gc.drawFocus on an area of the gc that already has a focus rect displayed, the 
focus rect will XOR off (The gc is created from the canvas that is being 
painted (lgc = new GC(getCanvas());). On linux this will not happen, the focus 
will continue to be displayed. To try to work around the problem I set the xor 
mode to true to try to explicitly XOR the existing focus rect. This did not 
work.

To work around the problem I added, SWT.getPlatform, to test for the "gtk" 
platform and in that case I redraw the area of the canvas containing the focus 
rect instead of simply XORing it away.

2) The focus rect on linux is solid line, not dotted line. The OS applications 
use a dotted line for focus and SWT should as well.
We now draw the appropriate native focus rectangle for the current GTK+ theme
using the GTK+ style API.  This was done in bug 80830.

However, different themes draw the rectangle differently, and none seem to draw
it using XOR drawing.  Therefore, I think this is platform behaviour and we
should not change it.
Since this is platform behaviour, I am marking this as WONTFIX.</WithStack>
    <WithOutStack>I have two issues with gc.drawFocus on linux. 
1) There is a difference in behavior from win32. On win32 when I call 
gc.drawFocus on an area of the gc that already has a focus rect displayed, the 
focus rect will XOR off (The gc is created from the canvas that is being 
painted (lgc = new GC(getCanvas());). On linux this will not happen, the focus 
will continue to be displayed. To try to work around the problem I set the xor 
mode to true to try to explicitly XOR the existing focus rect. This did not 
work.

To work around the problem I added, SWT.getPlatform, to test for the "gtk" 
platform and in that case I redraw the area of the canvas containing the focus 
rect instead of simply XORing it away.

2) The focus rect on linux is solid line, not dotted line. The OS applications 
use a dotted line for focus and SWT should as well.
We now draw the appropriate native focus rectangle for the current GTK+ theme
using the GTK+ style API.  This was done in bug 80830.

However, different themes draw the rectangle differently, and none seem to draw
it using XOR drawing.  Therefore, I think this is platform behaviour and we
should not change it.
Since this is platform behaviour, I am marking this as WONTFIX.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="62425" />
    <CreationDate amount="2004-05-16 13:54:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="JDT" />
    <component amount="UI" />
    <Version amount="3.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P2" />
    <bug_severity amount="normal" />
    <Summery>Externalizing Strings dump (Internal Error) [nls] [refactoring]</Summery>
    <Patches amount="0" />
    <Stacktraces amount="3">
      <Stacktrace timestamp="1437341131344">
        <Exception>java.lang.reflect.InvocationTargetException</Exception>
        <Reason />
        <Frames>
          <Frame depth="0">org.eclipse.jface.operation.ModalContext.run(ModalContext.java:283)</Frame>
          <Frame depth="1">org.eclipse.jface.wizard.WizardDialog.run(WizardDialog.java:749)</Frame>
          <Frame depth="2">org.eclipse.ltk.ui.refactoring.RefactoringWizard.createChange(RefactoringWizard.java:559)</Frame>
          <Frame depth="3">org.eclipse.ltk.ui.refactoring.RefactoringWizard.computeUserInputSuccessorPage(RefactoringWizard.java:405)</Frame>
          <Frame depth="4">org.eclipse.ltk.ui.refactoring.UserInputWizardPage.computeSuccessorPage(UserInputWizardPage.java:72)</Frame>
          <Frame depth="5">org.eclipse.ltk.ui.refactoring.UserInputWizardPage.getNextPage(UserInputWizardPage.java:112)</Frame>
          <Frame depth="6">org.eclipse.jdt.internal.ui.refactoring.nls.ExternalizeWizardPage.getNextPage(ExternalizeWizardPage.java:1066)</Frame>
          <Frame depth="7">org.eclipse.jface.wizard.WizardDialog.nextPressed(WizardDialog.java:672)</Frame>
          <Frame depth="8">org.eclipse.jface.wizard.WizardDialog.buttonPressed(WizardDialog.java:300)</Frame>
          <Frame depth="9">org.eclipse.jface.dialogs.Dialog$2.widgetSelected(Dialog.java:505)</Frame>
          <Frame depth="10">org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:89)</Frame>
          <Frame depth="11">org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)</Frame>
          <Frame depth="12">org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:796)</Frame>
          <Frame depth="13">org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:2725)</Frame>
          <Frame depth="14">org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2390)</Frame>
          <Frame depth="15">org.eclipse.jface.window.Window.runEventLoop(Window.java:668)</Frame>
          <Frame depth="16">org.eclipse.jface.window.Window.open(Window.java:648)</Frame>
          <Frame depth="17">org.eclipse.ltk.ui.refactoring.RefactoringWizardOpenOperation.run(RefactoringWizardOpenOperation.java:120)</Frame>
          <Frame depth="18">org.eclipse.jdt.internal.ui.refactoring.actions.RefactoringStarter.activate(RefactoringStarter.java:40)</Frame>
          <Frame depth="19">org.eclipse.jdt.ui.actions.ExternalizeStringsAction.openExternalizeStringsWizard(ExternalizeStringsAction.java:157)</Frame>
          <Frame depth="20">org.eclipse.jdt.ui.actions.FindStringsToExternalizeAction$NonNLSListDialog.openWizard(FindStringsToExternalizeAction.java:406)</Frame>
          <Frame depth="21">org.eclipse.jdt.ui.actions.FindStringsToExternalizeAction$NonNLSListDialog.buttonPressed(FindStringsToExternalizeAction.java:400)</Frame>
          <Frame depth="22">org.eclipse.jface.dialogs.Dialog$2.widgetSelected(Dialog.java:505)</Frame>
          <Frame depth="23">org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:89)</Frame>
          <Frame depth="24">org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)</Frame>
          <Frame depth="25">org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:796)</Frame>
          <Frame depth="26">org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:2725)</Frame>
          <Frame depth="27">org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2390)</Frame>
          <Frame depth="28">org.eclipse.jface.window.Window.runEventLoop(Window.java:668)</Frame>
          <Frame depth="29">org.eclipse.jface.window.Window.open(Window.java:648)</Frame>
          <Frame depth="30">org.eclipse.jdt.ui.actions.FindStringsToExternalizeAction.showResults(FindStringsToExternalizeAction.java:196)</Frame>
          <Frame depth="31">org.eclipse.jdt.ui.actions.FindStringsToExternalizeAction.run(FindStringsToExternalizeAction.java:150)</Frame>
          <Frame depth="32">org.eclipse.jdt.ui.actions.SelectionDispatchAction.dispatchRun(SelectionDispatchAction.java:212)</Frame>
          <Frame depth="33">org.eclipse.jdt.ui.actions.SelectionDispatchAction.run(SelectionDispatchAction.java:188)</Frame>
          <Frame depth="34">org.eclipse.jface.action.Action.runWithEvent(Action.java:881)</Frame>
          <Frame depth="35">org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection(ActionContributionItem.java:891)</Frame>
          <Frame depth="36">org.eclipse.jface.action.ActionContributionItem.access$2(ActionContributionItem.java:842)</Frame>
          <Frame depth="37">org.eclipse.jface.action.ActionContributionItem$6.handleEvent(ActionContributionItem.java:761)</Frame>
          <Frame depth="38">org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)</Frame>
          <Frame depth="39">org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:796)</Frame>
          <Frame depth="40">org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:2725)</Frame>
          <Frame depth="41">org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2390)</Frame>
          <Frame depth="42">org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1353)</Frame>
          <Frame depth="43">org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1324)</Frame>
          <Frame depth="44">org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:243)</Frame>
          <Frame depth="45">org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:141)</Frame>
          <Frame depth="46">org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:90)</Frame>
          <Frame depth="47">org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:298)</Frame>
          <Frame depth="48">org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:249)</Frame>
          <Frame depth="49">org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:126)</Frame>
          <Frame depth="50">sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)</Frame>
          <Frame depth="51">sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)</Frame>
          <Frame depth="52">sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)</Frame>
          <Frame depth="53">java.lang.reflect.Method.invoke(Unknown Source)</Frame>
          <Frame depth="54">org.eclipse.core.launcher.Main.basicRun(Main.java:269)</Frame>
          <Frame depth="55">org.eclipse.core.launcher.Main.run(Main.java:722)</Frame>
          <Frame depth="56">org.eclipse.core.launcher.Main.main(Main.java:706)</Frame>
        </Frames>
      </Stacktrace>
      <Cause timestamp="1437341131344">
        <Exception>java.lang.NullPointerException</Exception>
        <Reason />
        <Frames>
          <Frame depth="0">org.eclipse.jdt.internal.corext.refactoring.nls.PropertyFileDocumentModel$KeyValuePairModell.unwindEscapeChars(PropertyFileDocumentModel.java:216)</Frame>
          <Frame depth="1">org.eclipse.jdt.internal.corext.refactoring.nls.PropertyFileDocumentModel$KeyValuePairModell.getEncodedText(PropertyFileDocumentModel.java:158)</Frame>
          <Frame depth="2">org.eclipse.jdt.internal.corext.refactoring.nls.PropertyFileDocumentModel.insert(PropertyFileDocumentModel.java:41)</Frame>
          <Frame depth="3">org.eclipse.jdt.internal.corext.refactoring.nls.NLSPropertyFileModifier.addInsertEdits(NLSPropertyFileModifier.java:95)</Frame>
          <Frame depth="4">org.eclipse.jdt.internal.corext.refactoring.nls.NLSPropertyFileModifier.addChanges(NLSPropertyFileModifier.java:66)</Frame>
          <Frame depth="5">org.eclipse.jdt.internal.corext.refactoring.nls.NLSPropertyFileModifier.create(NLSPropertyFileModifier.java:44)</Frame>
          <Frame depth="6">org.eclipse.jdt.internal.corext.refactoring.nls.NLSRefactoring.createChange(NLSRefactoring.java:215)</Frame>
          <Frame depth="7">org.eclipse.ltk.core.refactoring.CreateChangeOperation.run(CreateChangeOperation.java:117)</Frame>
          <Frame depth="8">org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1674)</Frame>
          <Frame depth="9">org.eclipse.ltk.internal.ui.refactoring.WorkbenchRunnableAdapter.run(WorkbenchRunnableAdapter.java:52)</Frame>
          <Frame depth="10">org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:101)</Frame>
        </Frames>
      </Cause>
      <Stacktrace timestamp="1437341131344">
        <Exception>java.lang.NullPointerException</Exception>
        <Reason />
        <Frames>
          <Frame depth="0">org.eclipse.jdt.internal.corext.refactoring.nls.PropertyFileDocumentModel$KeyValuePairModell.unwindEscapeChars(PropertyFileDocumentModel.java:216)</Frame>
          <Frame depth="1">org.eclipse.jdt.internal.corext.refactoring.nls.PropertyFileDocumentModel$KeyValuePairModell.getEncodedText(PropertyFileDocumentModel.java:158)</Frame>
          <Frame depth="2">org.eclipse.jdt.internal.corext.refactoring.nls.PropertyFileDocumentModel.insert(PropertyFileDocumentModel.java:41)</Frame>
          <Frame depth="3">org.eclipse.jdt.internal.corext.refactoring.nls.NLSPropertyFileModifier.addInsertEdits(NLSPropertyFileModifier.java:95)</Frame>
          <Frame depth="4">org.eclipse.jdt.internal.corext.refactoring.nls.NLSPropertyFileModifier.addChanges(NLSPropertyFileModifier.java:66)</Frame>
          <Frame depth="5">org.eclipse.jdt.internal.corext.refactoring.nls.NLSPropertyFileModifier.create(NLSPropertyFileModifier.java:44)</Frame>
          <Frame depth="6">org.eclipse.jdt.internal.corext.refactoring.nls.NLSRefactoring.createChange(NLSRefactoring.java:215)</Frame>
          <Frame depth="7">org.eclipse.ltk.core.refactoring.CreateChangeOperation.run(CreateChangeOperation.java:117)</Frame>
          <Frame depth="8">org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1674)</Frame>
          <Frame depth="9">org.eclipse.ltk.internal.ui.refactoring.WorkbenchRunnableAdapter.run(WorkbenchRunnableAdapter.java:52)</Frame>
          <Frame depth="10">org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:101)</Frame>
        </Frames>
      </Stacktrace>
    </Stacktraces>
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>I Build id: 200405111200

Externalizing Strings fails on a java file that I have, but it is hard to 
isolate the problem.
Im opening the defect just for the stack dump: 


Internal Error:

java.lang.reflect.InvocationTargetException
at org.eclipse.jface.operation.ModalContext.run(ModalContext.java:283)
at org.eclipse.jface.wizard.WizardDialog.run(WizardDialog.java:749)
at org.eclipse.ltk.ui.refactoring.RefactoringWizard.createChange
(RefactoringWizard.java:559)
at 
org.eclipse.ltk.ui.refactoring.RefactoringWizard.computeUserInputSuccessorPage
(RefactoringWizard.java:405)
at org.eclipse.ltk.ui.refactoring.UserInputWizardPage.computeSuccessorPage
(UserInputWizardPage.java:72)
at org.eclipse.ltk.ui.refactoring.UserInputWizardPage.getNextPage
(UserInputWizardPage.java:112)
at 
org.eclipse.jdt.internal.ui.refactoring.nls.ExternalizeWizardPage.getNextPage
(ExternalizeWizardPage.java:1066)
at org.eclipse.jface.wizard.WizardDialog.nextPressed(WizardDialog.java:672)
at org.eclipse.jface.wizard.WizardDialog.buttonPressed(WizardDialog.java:300)
at org.eclipse.jface.dialogs.Dialog$2.widgetSelected(Dialog.java:505)
at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:89)
at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:796)
at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:2725)
at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2390)
at org.eclipse.jface.window.Window.runEventLoop(Window.java:668)
at org.eclipse.jface.window.Window.open(Window.java:648)
at org.eclipse.ltk.ui.refactoring.RefactoringWizardOpenOperation.run
(RefactoringWizardOpenOperation.java:120)
at org.eclipse.jdt.internal.ui.refactoring.actions.RefactoringStarter.activate
(RefactoringStarter.java:40)
at 
org.eclipse.jdt.ui.actions.ExternalizeStringsAction.openExternalizeStringsWizar
d(ExternalizeStringsAction.java:157)
at 
org.eclipse.jdt.ui.actions.FindStringsToExternalizeAction$NonNLSListDialog.open
Wizard(FindStringsToExternalizeAction.java:406)
at 
org.eclipse.jdt.ui.actions.FindStringsToExternalizeAction$NonNLSListDialog.butt
onPressed(FindStringsToExternalizeAction.java:400)
at org.eclipse.jface.dialogs.Dialog$2.widgetSelected(Dialog.java:505)
at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:89)
at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:796)
at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:2725)
at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2390)
at org.eclipse.jface.window.Window.runEventLoop(Window.java:668)
at org.eclipse.jface.window.Window.open(Window.java:648)
at org.eclipse.jdt.ui.actions.FindStringsToExternalizeAction.showResults
(FindStringsToExternalizeAction.java:196)
at org.eclipse.jdt.ui.actions.FindStringsToExternalizeAction.run
(FindStringsToExternalizeAction.java:150)
at org.eclipse.jdt.ui.actions.SelectionDispatchAction.dispatchRun
(SelectionDispatchAction.java:212)
at org.eclipse.jdt.ui.actions.SelectionDispatchAction.run
(SelectionDispatchAction.java:188)
at org.eclipse.jface.action.Action.runWithEvent(Action.java:881)
at org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection
(ActionContributionItem.java:891)
at org.eclipse.jface.action.ActionContributionItem.access$2
(ActionContributionItem.java:842)
at org.eclipse.jface.action.ActionContributionItem$6.handleEvent
(ActionContributionItem.java:761)
at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:796)
at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:2725)
at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2390)
at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1353)
at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1324)
at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:243)
at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:141)
at org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:90)
at org.eclipse.core.internal.runtime.PlatformActivator$1.run
(PlatformActivator.java:298)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:249)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:126)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at org.eclipse.core.launcher.Main.basicRun(Main.java:269)
at org.eclipse.core.launcher.Main.run(Main.java:722)
at org.eclipse.core.launcher.Main.main(Main.java:706)
Caused by: java.lang.NullPointerException
at 
org.eclipse.jdt.internal.corext.refactoring.nls.PropertyFileDocumentModel$KeyVa
luePairModell.unwindEscapeChars(PropertyFileDocumentModel.java:216)
at 
org.eclipse.jdt.internal.corext.refactoring.nls.PropertyFileDocumentModel$KeyVa
luePairModell.getEncodedText(PropertyFileDocumentModel.java:158)
at 
org.eclipse.jdt.internal.corext.refactoring.nls.PropertyFileDocumentModel.inser
t(PropertyFileDocumentModel.java:41)
at 
org.eclipse.jdt.internal.corext.refactoring.nls.NLSPropertyFileModifier.addInse
rtEdits(NLSPropertyFileModifier.java:95)
at 
org.eclipse.jdt.internal.corext.refactoring.nls.NLSPropertyFileModifier.addChan
ges(NLSPropertyFileModifier.java:66)
at 
org.eclipse.jdt.internal.corext.refactoring.nls.NLSPropertyFileModifier.create
(NLSPropertyFileModifier.java:44)
at org.eclipse.jdt.internal.corext.refactoring.nls.NLSRefactoring.createChange
(NLSRefactoring.java:215)
at org.eclipse.ltk.core.refactoring.CreateChangeOperation.run
(CreateChangeOperation.java:117)
at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1674)
at org.eclipse.ltk.internal.ui.refactoring.WorkbenchRunnableAdapter.run
(WorkbenchRunnableAdapter.java:52)
at org.eclipse.jface.operation.ModalContext$ModalContextThread.run
(ModalContext.java:101)
Root exception:
java.lang.NullPointerException
at 
org.eclipse.jdt.internal.corext.refactoring.nls.PropertyFileDocumentModel$KeyVa
luePairModell.unwindEscapeChars(PropertyFileDocumentModel.java:216)
at 
org.eclipse.jdt.internal.corext.refactoring.nls.PropertyFileDocumentModel$KeyVa
luePairModell.getEncodedText(PropertyFileDocumentModel.java:158)
at 
org.eclipse.jdt.internal.corext.refactoring.nls.PropertyFileDocumentModel.inser
t(PropertyFileDocumentModel.java:41)
at 
org.eclipse.jdt.internal.corext.refactoring.nls.NLSPropertyFileModifier.addInse
rtEdits(NLSPropertyFileModifier.java:95)
at 
org.eclipse.jdt.internal.corext.refactoring.nls.NLSPropertyFileModifier.addChan
ges(NLSPropertyFileModifier.java:66)
at 
org.eclipse.jdt.internal.corext.refactoring.nls.NLSPropertyFileModifier.create
(NLSPropertyFileModifier.java:44)
at org.eclipse.jdt.internal.corext.refactoring.nls.NLSRefactoring.createChange
(NLSRefactoring.java:215)
at org.eclipse.ltk.core.refactoring.CreateChangeOperation.run
(CreateChangeOperation.java:117)
at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1674)
at org.eclipse.ltk.internal.ui.refactoring.WorkbenchRunnableAdapter.run
(WorkbenchRunnableAdapter.java:52)
at org.eclipse.jface.operation.ModalContext$ModalContextThread.run
(ModalContext.java:101)
fixed &gt; 20040517</WithStack>
    <WithOutStack>I Build id: 200405111200

Externalizing Strings fails on a java file that I have, but it is hard to 
isolate the problem.
Im opening the defect just for the stack dump: 


Internal Error:

Root exception:

fixed &gt; 20040517</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="62426" />
    <CreationDate amount="2004-05-16 17:31:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="JDT" />
    <component amount="Core" />
    <Version amount="3.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows 2000" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>NPE in Java SearchEngine (3.0M8)</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="3">
      <source_code type="functioncall">
        <location start="393" end="416" />
        <code>locator.report(match);</code>
      </source_code>
      <source_code type="functiondef">
        <location start="523" end="1040" />
        <code>public int compare(Object o1, Object o2) {
    AbstractMetricSource left = (AbstractMetricSource) o1;
    AbstractMetricSource right = (AbstractMetricSource) o2;
    Metric lm = left.getValue(id);
    Metric rm = right.getValue(id);
    int result;
    if ((lm == null))
        {
          result = ((rm == null) ? 0 : (- 1));
        }
    else
        {
          result = (- lm.compareTo(rm));
        }
    if ((result != 0))
        return result;
    return left.getHandle().compareTo(right.getHandle());
  }</code>
      </source_code>
      <source_code type="functiondef">
        <location start="2660" end="3228" />
        <code>Collections.sort(values, new Comparator() {

			public int compare(Object o1, Object o2) {
				AbstractMetricSource left = 
(AbstractMetricSource)o1;
				AbstractMetricSource right = 
(AbstractMetricSource)o2;
				Metric lm = left.getValue(id);
				Metric rm = right.getValue(id);
				int result;
			    if (lm == null) { // BUG #826997 
			        result = (rm == null) ? 0 : -1;
			    } else {
			        result = -lm.compareTo(rm); // BUG 746394
			    }
				if (result != 0) return result;
				return left.getHandle().compareTo
(right.getHandle());
			}
			
		}</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="WORKSFORME" />
    <WithStack>This NPE occurs when an anonymous type is found as the search result. The 
PatternLocator class fails to create a match in:

protected void matchReportReference(ASTNode reference, IJavaElement element, 
int accuracy, MatchLocator locator) throws CoreException {
	SearchMatch match = locator.newReferenceMatch(referenceType(), element, 
accuracy, reference.sourceStart, reference.sourceEnd+1);
	locator.report(match);
}

The reference and element parameters look good to me as far as I can tell:

reference is shown as:

 {
  public int compare(Object o1, Object o2) {
    AbstractMetricSource left = (AbstractMetricSource) o1;
    AbstractMetricSource right = (AbstractMetricSource) o2;
    Metric lm = left.getValue(id);
    Metric rm = right.getValue(id);
    int result;
    if ((lm == null))
        {
          result = ((rm == null) ? 0 : (- 1));
        }
    else
        {
          result = (- lm.compareTo(rm));
        }
    if ((result != 0))
        return result;
    return left.getHandle().compareTo(right.getHandle());
  }
}

and element is shown as:

printValues(List, String, XMLPrintStream, MetricDescriptor) (not open) [in 
MetricsFirstExporter [in MetricsFirstExporter.java [in 
net.sourceforge.metrics.internal.xml [in src [in net.sourceforge.metrics]]]]]

which is the surrounding method of the anonymous inner class.


match being null results in an NPE in MatchLocator:

SearchEngine$ResultCollectorAdapter.acceptSearchMatch(SearchMatch) line: 59
MatchLocator.report(SearchMatch) line: 1033
TypeDeclarationLocator(PatternLocator).matchReportReference(ASTNode, 
IJavaElement, int, MatchLocator) line: 230
MatchLocator.reportMatching(AbstractMethodDeclaration, IJavaElement, int, 
boolean, MatchingNodeSet) line: 1214
MatchLocator.reportMatching(TypeDeclaration, IJavaElement, int, 
MatchingNodeSet, int) line: 1422
MatchLocator.reportMatching(CompilationUnitDeclaration, boolean) line: 1279
MatchLocator.process(PossibleMatch, boolean) line: 968
MatchLocator.locateMatches(JavaProject, PossibleMatch[], int, int) line: 622
MatchLocator.locateMatches(JavaProject, PossibleMatchSet) line: 656
MatchLocator.locateMatches(SearchDocument[]) line: 747
JavaSearchParticipant.locateMatches(SearchDocument[], SearchPattern, 
IJavaSearchScope, SearchRequestor, IProgressMonitor) line: 157
QualifiedTypeDeclarationPattern(InternalSearchPattern).findMatches
(SearchParticipant[], IJavaSearchScope, SearchRequestor, IProgressMonitor) 
line: 107
SearchEngine.search(SearchPattern, SearchParticipant[], IJavaSearchScope, 
SearchRequestor, IProgressMonitor) line: 739


The anonymous inner class being reported as the search result looks like this:

		Collections.sort(values, new Comparator() {

			public int compare(Object o1, Object o2) {
				AbstractMetricSource left = 
(AbstractMetricSource)o1;
				AbstractMetricSource right = 
(AbstractMetricSource)o2;
				Metric lm = left.getValue(id);
				Metric rm = right.getValue(id);
				int result;
			    if (lm == null) { // BUG #826997 
			        result = (rm == null) ? 0 : -1;
			    } else {
			        result = -lm.compareTo(rm); // BUG 746394
			    }
				if (result != 0) return result;
				return left.getHandle().compareTo
(right.getHandle());
			}
			
		});
PatternLocator#matchReportReference(...) has changed since 3.0 M8 to always 
succeed in creating a search match.Moreover it filters out null search matches 
(in case one would add a new reference match without updating this method).

Please reopen if you see this problem in a recent integration build.</WithStack>
    <WithOutStack>This NPE occurs when an anonymous type is found as the search result. The 
PatternLocator class fails to create a match in:

protected void matchReportReference(ASTNode reference, IJavaElement element, 
int accuracy, MatchLocator locator) throws CoreException {
	SearchMatch match = locator.newReferenceMatch(referenceType(), element, 
accuracy, reference.sourceStart, reference.sourceEnd+1);
	locator.report(match);
}

The reference and element parameters look good to me as far as I can tell:

reference is shown as:

 {
  public int compare(Object o1, Object o2) {
    AbstractMetricSource left = (AbstractMetricSource) o1;
    AbstractMetricSource right = (AbstractMetricSource) o2;
    Metric lm = left.getValue(id);
    Metric rm = right.getValue(id);
    int result;
    if ((lm == null))
        {
          result = ((rm == null) ? 0 : (- 1));
        }
    else
        {
          result = (- lm.compareTo(rm));
        }
    if ((result != 0))
        return result;
    return left.getHandle().compareTo(right.getHandle());
  }
}

and element is shown as:

printValues(List, String, XMLPrintStream, MetricDescriptor) (not open) [in 
MetricsFirstExporter [in MetricsFirstExporter.java [in 
net.sourceforge.metrics.internal.xml [in src [in net.sourceforge.metrics]]]]]

which is the surrounding method of the anonymous inner class.


match being null results in an NPE in MatchLocator:

SearchEngine$ResultCollectorAdapter.acceptSearchMatch(SearchMatch) line: 59
MatchLocator.report(SearchMatch) line: 1033
TypeDeclarationLocator(PatternLocator).matchReportReference(ASTNode, 
IJavaElement, int, MatchLocator) line: 230
MatchLocator.reportMatching(AbstractMethodDeclaration, IJavaElement, int, 
boolean, MatchingNodeSet) line: 1214
MatchLocator.reportMatching(TypeDeclaration, IJavaElement, int, 
MatchingNodeSet, int) line: 1422
MatchLocator.reportMatching(CompilationUnitDeclaration, boolean) line: 1279
MatchLocator.process(PossibleMatch, boolean) line: 968
MatchLocator.locateMatches(JavaProject, PossibleMatch[], int, int) line: 622
MatchLocator.locateMatches(JavaProject, PossibleMatchSet) line: 656
MatchLocator.locateMatches(SearchDocument[]) line: 747
JavaSearchParticipant.locateMatches(SearchDocument[], SearchPattern, 
IJavaSearchScope, SearchRequestor, IProgressMonitor) line: 157
QualifiedTypeDeclarationPattern(InternalSearchPattern).findMatches
(SearchParticipant[], IJavaSearchScope, SearchRequestor, IProgressMonitor) 
line: 107
SearchEngine.search(SearchPattern, SearchParticipant[], IJavaSearchScope, 
SearchRequestor, IProgressMonitor) line: 739


The anonymous inner class being reported as the search result looks like this:

		Collections.sort(values, new Comparator() {

			public int compare(Object o1, Object o2) {
				AbstractMetricSource left = 
(AbstractMetricSource)o1;
				AbstractMetricSource right = 
(AbstractMetricSource)o2;
				Metric lm = left.getValue(id);
				Metric rm = right.getValue(id);
				int result;
			    if (lm == null) { // BUG #826997 
			        result = (rm == null) ? 0 : -1;
			    } else {
			        result = -lm.compareTo(rm); // BUG 746394
			    }
				if (result != 0) return result;
				return left.getHandle().compareTo
(right.getHandle());
			}
			
		});
PatternLocator#matchReportReference(...) has changed since 3.0 M8 to always 
succeed in creating a search match.Moreover it filters out null search matches 
(in case one would add a new reference match without updating this method).

Please reopen if you see this problem in a recent integration build.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="62427" />
    <CreationDate amount="2004-05-16 17:51:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="JDT" />
    <component amount="Core" />
    <Version amount="3.0" />
    <rep_platform amount="Macintosh" />
    <op_sys amount="Mac OS X - Carbon (unsup.)" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>org.eclipse.jdt.core.dom.AST.newTypeDeclaration: java.lang.NoClassDefFoundError</Summery>
    <Patches amount="0" />
    <Stacktraces amount="4">
      <Stacktrace timestamp="1437341131349">
        <Exception>java.lang.NoClassDefFoundError</Exception>
        <Reason />
        <Frames>
          <Frame depth="0">org.eclipse.jdt.core.dom.AST.newTypeDeclaration(AST.java:1480)</Frame>
          <Frame depth="1">org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:249)</Frame>
          <Frame depth="2">org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:151)</Frame>
          <Frame depth="3">org.eclipse.jdt.core.dom.AST.convertCompilationUnit(AST.java:251)</Frame>
          <Frame depth="4">org.eclipse.jdt.internal.core.ReconcileWorkingCopyOperation.executeOperation(ReconcileWorkingCopyOperation.java:81)</Frame>
          <Frame depth="5">org.eclipse.jdt.internal.core.JavaModelOperation.run(JavaModelOperation.java:700)</Frame>
          <Frame depth="6">org.eclipse.jdt.internal.core.JavaModelOperation.runOperation(JavaModelOperation.java:739)</Frame>
          <Frame depth="7">org.eclipse.jdt.internal.core.CompilationUnit.reconcile(CompilationUnit.java:1097)</Frame>
          <Frame depth="8">org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:88)</Frame>
          <Frame depth="9">org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.initialReconcile(JavaReconcilingStrategy.java:156)</Frame>
          <Frame depth="10">org.eclipse.jdt.internal.ui.text.CompositeReconcilingStrategy.initialReconcile(CompositeReconcilingStrategy.java:114)</Frame>
          <Frame depth="11">org.eclipse.jdt.internal.ui.text.JavaCompositeReconcilingStrategy.initialReconcile(JavaCompositeReconcilingStrategy.java:122)</Frame>
          <Frame depth="12">org.eclipse.jface.text.reconciler.MonoReconciler.initialProcess(MonoReconciler.java:104)</Frame>
          <Frame depth="13">org.eclipse.jdt.internal.ui.text.JavaReconciler.initialProcess(JavaReconciler.java:280)</Frame>
          <Frame depth="14">org.eclipse.jface.text.reconciler.AbstractReconciler$BackgroundThread.run(AbstractReconciler.java:155)</Frame>
        </Frames>
      </Stacktrace>
      <Stacktrace timestamp="1437341131349">
        <Exception>java.lang.ExceptionInInitializerError</Exception>
        <Reason />
        <Frames>
          <Frame depth="0">java.lang.Class.forName0(Native Method)</Frame>
          <Frame depth="1">java.lang.Class.forName(Class.java:141)</Frame>
          <Frame depth="2">org.eclipse.jdt.core.dom.TypeDeclaration.&lt;clinit&gt;(TypeDeclaration.java:140)</Frame>
          <Frame depth="3">org.eclipse.jdt.core.dom.AST.newTypeDeclaration(AST.java:1480)</Frame>
          <Frame depth="4">org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:249)</Frame>
          <Frame depth="5">org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:151)</Frame>
          <Frame depth="6">org.eclipse.jdt.core.dom.AST.convertCompilationUnit(AST.java:251)</Frame>
          <Frame depth="7">org.eclipse.jdt.internal.core.ReconcileWorkingCopyOperation.executeOperation(ReconcileWorkingCopyOperation.java:81)</Frame>
          <Frame depth="8">org.eclipse.jdt.internal.core.JavaModelOperation.run(JavaModelOperation.java:700)</Frame>
          <Frame depth="9">org.eclipse.jdt.internal.core.JavaModelOperation.runOperation(JavaModelOperation.java:739)</Frame>
          <Frame depth="10">org.eclipse.jdt.internal.core.CompilationUnit.reconcile(CompilationUnit.java:1097)</Frame>
          <Frame depth="11">org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:88)</Frame>
          <Frame depth="12">org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.initialReconcile(JavaReconcilingStrategy.java:156)</Frame>
          <Frame depth="13">org.eclipse.jdt.internal.ui.text.CompositeReconcilingStrategy.initialReconcile(CompositeReconcilingStrategy.java:114)</Frame>
          <Frame depth="14">org.eclipse.jdt.internal.ui.text.JavaCompositeReconcilingStrategy.initialReconcile(JavaCompositeReconcilingStrategy.java:122)</Frame>
          <Frame depth="15">org.eclipse.jface.text.reconciler.MonoReconciler.initialProcess(MonoReconciler.java:104)</Frame>
          <Frame depth="16">org.eclipse.jdt.internal.ui.text.JavaReconciler.initialProcess(JavaReconciler.java:280)</Frame>
          <Frame depth="17">org.eclipse.jface.text.reconciler.AbstractReconciler$BackgroundThread.run(AbstractReconciler.java:155)</Frame>
        </Frames>
      </Stacktrace>
      <Cause timestamp="1437341131349">
        <Exception>java.lang.NullPointerException</Exception>
        <Reason />
        <Frames>
          <Frame depth="0">org.eclipse.jdt.core.dom.ASTNode.addProperty(ASTNode.java:1735)</Frame>
          <Frame depth="1">org.eclipse.jdt.core.dom.TypeParameter.&lt;clinit&gt;(TypeParameter.java:56)</Frame>
        </Frames>
      </Cause>
      <Stacktrace timestamp="1437341131349">
        <Exception>java.lang.NoClassDefFoundError</Exception>
        <Reason />
        <Frames>
          <Frame depth="0">org.eclipse.jdt.core.dom.AST.newTypeDeclaration(AST.java:1480)</Frame>
          <Frame depth="1">org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:249)</Frame>
          <Frame depth="2">org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:151)</Frame>
          <Frame depth="3">org.eclipse.jdt.core.dom.AST.convertCompilationUnit(AST.java:251)</Frame>
          <Frame depth="4">org.eclipse.jdt.internal.core.ReconcileWorkingCopyOperation.executeOperation(ReconcileWorkingCopyOperation.java:81)</Frame>
          <Frame depth="5">org.eclipse.jdt.internal.core.JavaModelOperation.run(JavaModelOperation.java:700)</Frame>
          <Frame depth="6">org.eclipse.jdt.internal.core.JavaModelOperation.runOperation(JavaModelOperation.java:739)</Frame>
          <Frame depth="7">org.eclipse.jdt.internal.core.CompilationUnit.reconcile(CompilationUnit.java:1097)</Frame>
          <Frame depth="8">org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:88)</Frame>
          <Frame depth="9">org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.initialReconcile(JavaReconcilingStrategy.java:156)</Frame>
          <Frame depth="10">org.eclipse.jdt.internal.ui.text.CompositeReconcilingStrategy.initialReconcile(CompositeReconcilingStrategy.java:114)</Frame>
          <Frame depth="11">org.eclipse.jdt.internal.ui.text.JavaCompositeReconcilingStrategy.initialReconcile(JavaCompositeReconcilingStrategy.java:122)</Frame>
          <Frame depth="12">org.eclipse.jface.text.reconciler.MonoReconciler.initialProcess(MonoReconciler.java:104)</Frame>
          <Frame depth="13">org.eclipse.jdt.internal.ui.text.JavaReconciler.initialProcess(JavaReconciler.java:280)</Frame>
          <Frame depth="14">org.eclipse.jface.text.reconciler.AbstractReconciler$BackgroundThread.run(AbstractReconciler.java:155)</Frame>
        </Frames>
      </Stacktrace>
    </Stacktraces>
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="INVALID" />
    <WithStack>I'm using eclipse eclipse I20040514 on osx 10.3.3 with java 1.4.2.

I once got the following exception when quiting eclipse:

java.lang.NoClassDefFoundError
	at org.eclipse.jdt.core.dom.AST.newTypeDeclaration(AST.java:1480)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:249)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:151)
	at org.eclipse.jdt.core.dom.AST.convertCompilationUnit(AST.java:251)
	at
org.eclipse.jdt.internal.core.ReconcileWorkingCopyOperation.executeOperation(ReconcileWorkingCopyOperation.java:81)
	at
org.eclipse.jdt.internal.core.JavaModelOperation.run(JavaModelOperation.java:700)
	at
org.eclipse.jdt.internal.core.JavaModelOperation.runOperation(JavaModelOperation.java:739)
	at
org.eclipse.jdt.internal.core.CompilationUnit.reconcile(CompilationUnit.java:1097)
	at
org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:88)
	at
org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.initialReconcile(JavaReconcilingStrategy.java:156)
	at
org.eclipse.jdt.internal.ui.text.CompositeReconcilingStrategy.initialReconcile(CompositeReconcilingStrategy.java:114)
	at
org.eclipse.jdt.internal.ui.text.JavaCompositeReconcilingStrategy.initialReconcile(JavaCompositeReconcilingStrategy.java:122)
	at
org.eclipse.jface.text.reconciler.MonoReconciler.initialProcess(MonoReconciler.java:104)
	at
org.eclipse.jdt.internal.ui.text.JavaReconciler.initialProcess(JavaReconciler.java:280)
	at
org.eclipse.jface.text.reconciler.AbstractReconciler$BackgroundThread.run(AbstractReconciler.java:155)
java.lang.ExceptionInInitializerError
	at java.lang.Class.forName0(Native Method)
	at java.lang.Class.forName(Class.java:141)
	at org.eclipse.jdt.core.dom.TypeDeclaration.&lt;clinit&gt;(TypeDeclaration.java:140)
	at org.eclipse.jdt.core.dom.AST.newTypeDeclaration(AST.java:1480)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:249)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:151)
	at org.eclipse.jdt.core.dom.AST.convertCompilationUnit(AST.java:251)
	at
org.eclipse.jdt.internal.core.ReconcileWorkingCopyOperation.executeOperation(ReconcileWorkingCopyOperation.java:81)
	at
org.eclipse.jdt.internal.core.JavaModelOperation.run(JavaModelOperation.java:700)
	at
org.eclipse.jdt.internal.core.JavaModelOperation.runOperation(JavaModelOperation.java:739)
	at
org.eclipse.jdt.internal.core.CompilationUnit.reconcile(CompilationUnit.java:1097)
	at
org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:88)
	at
org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.initialReconcile(JavaReconcilingStrategy.java:156)
	at
org.eclipse.jdt.internal.ui.text.CompositeReconcilingStrategy.initialReconcile(CompositeReconcilingStrategy.java:114)
	at
org.eclipse.jdt.internal.ui.text.JavaCompositeReconcilingStrategy.initialReconcile(JavaCompositeReconcilingStrategy.java:122)
	at
org.eclipse.jface.text.reconciler.MonoReconciler.initialProcess(MonoReconciler.java:104)
	at
org.eclipse.jdt.internal.ui.text.JavaReconciler.initialProcess(JavaReconciler.java:280)
	at
org.eclipse.jface.text.reconciler.AbstractReconciler$BackgroundThread.run(AbstractReconciler.java:155)
Caused by: java.lang.NullPointerException
	at org.eclipse.jdt.core.dom.ASTNode.addProperty(ASTNode.java:1735)
	at org.eclipse.jdt.core.dom.TypeParameter.&lt;clinit&gt;(TypeParameter.java:56)
	... 18 more
java.lang.NoClassDefFoundError
	at org.eclipse.jdt.core.dom.AST.newTypeDeclaration(AST.java:1480)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:249)
	at org.eclipse.jdt.core.dom.ASTConverter.convert(ASTConverter.java:151)
	at org.eclipse.jdt.core.dom.AST.convertCompilationUnit(AST.java:251)
	at
org.eclipse.jdt.internal.core.ReconcileWorkingCopyOperation.executeOperation(ReconcileWorkingCopyOperation.java:81)
	at
org.eclipse.jdt.internal.core.JavaModelOperation.run(JavaModelOperation.java:700)
	at
org.eclipse.jdt.internal.core.JavaModelOperation.runOperation(JavaModelOperation.java:739)
	at
org.eclipse.jdt.internal.core.CompilationUnit.reconcile(CompilationUnit.java:1097)
	at
org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:88)
	at
org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.initialReconcile(JavaReconcilingStrategy.java:156)
	at
org.eclipse.jdt.internal.ui.text.CompositeReconcilingStrategy.initialReconcile(CompositeReconcilingStrategy.java:114)
	at
org.eclipse.jdt.internal.ui.text.JavaCompositeReconcilingStrategy.initialReconcile(JavaCompositeReconcilingStrategy.java:122)
	at
org.eclipse.jface.text.reconciler.MonoReconciler.initialProcess(MonoReconciler.java:104)
	at
org.eclipse.jdt.internal.ui.text.JavaReconciler.initialProcess(JavaReconciler.java:280)
	at
org.eclipse.jface.text.reconciler.AbstractReconciler$BackgroundThread.run(AbstractReconciler.java:155)
Feels like some JAR got corrupted, can you reobtain a SDK and reproduce it ?
Thanks for looking into this issue.

I have already tried to reproduce this issue on the same eclipse installation,
but didn't manage do to so.

So far I have only seen this stacktrace once.
Reopen if you can provide steps to reproduce after re-installing Eclipse, as 
corrupted files are suspected</WithStack>
    <WithOutStack>I'm using eclipse eclipse I20040514 on osx 10.3.3 with java 1.4.2.

I once got the following exception when quiting eclipse:

	... 18 more

Feels like some JAR got corrupted, can you reobtain a SDK and reproduce it ?
Thanks for looking into this issue.

I have already tried to reproduce this issue on the same eclipse installation,
but didn't manage do to so.

So far I have only seen this stacktrace once.
Reopen if you can provide steps to reproduce after re-installing Eclipse, as 
corrupted files are suspected</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="62428" />
    <CreationDate amount="2004-05-16 17:53:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="JDT" />
    <component amount="Core" />
    <Version amount="3.0" />
    <rep_platform amount="Macintosh" />
    <op_sys amount="Mac OS X - Carbon (unsup.)" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>org.eclipse.jdt.core.JavaConventions.validateClassFileName: NullPointerException</Summery>
    <Patches amount="0" />
    <Stacktraces amount="2">
      <Stacktrace timestamp="1437341131352">
        <Exception>java.lang.NullPointerException</Exception>
        <Reason />
        <Frames>
          <Frame depth="0">org.eclipse.jdt.core.JavaConventions.validateClassFileName(JavaConventions.java:191)</Frame>
          <Frame depth="1">org.eclipse.jdt.internal.core.util.Util.isValidClassFileName(Util.java:1002)</Frame>
          <Frame depth="2">org.eclipse.jdt.internal.core.ClassFile.isValidClassFile(ClassFile.java:467)</Frame>
          <Frame depth="3">org.eclipse.jdt.internal.core.ClassFile.buildStructure(ClassFile.java:76)</Frame>
          <Frame depth="4">org.eclipse.jdt.internal.core.Openable.generateInfos(Openable.java:183)</Frame>
          <Frame depth="5">org.eclipse.jdt.internal.core.BinaryMember.generateInfos(BinaryMember.java:46)</Frame>
          <Frame depth="6">org.eclipse.jdt.internal.core.JavaElement.openWhenClosed(JavaElement.java:573)</Frame>
          <Frame depth="7">org.eclipse.jdt.internal.core.JavaElement.getElementInfo(JavaElement.java:310)</Frame>
          <Frame depth="8">org.eclipse.jdt.internal.core.JavaElement.getElementInfo(JavaElement.java:296)</Frame>
          <Frame depth="9">org.eclipse.jdt.internal.core.BinaryType.isInterface(BinaryType.java:537)</Frame>
          <Frame depth="10">org.eclipse.jdt.internal.core.BinaryType.isClass(BinaryType.java:521)</Frame>
          <Frame depth="11">org.eclipse.jdt.internal.core.NameLookup.acceptType(NameLookup.java:121)</Frame>
          <Frame depth="12">org.eclipse.jdt.internal.core.NameLookup.seekTypesInBinaryPackage(NameLookup.java:605)</Frame>
          <Frame depth="13">org.eclipse.jdt.internal.core.NameLookup.seekTypes(NameLookup.java:549)</Frame>
          <Frame depth="14">org.eclipse.jdt.internal.core.NameLookup.findType(NameLookup.java:382)</Frame>
          <Frame depth="15">org.eclipse.jdt.internal.core.NameLookup.findType(NameLookup.java:353)</Frame>
          <Frame depth="16">org.eclipse.jdt.internal.core.SearchableEnvironment.find(SearchableEnvironment.java:78)</Frame>
          <Frame depth="17">org.eclipse.jdt.internal.core.SearchableEnvironment.findType(SearchableEnvironment.java:157)</Frame>
          <Frame depth="18">org.eclipse.jdt.internal.compiler.lookup.LookupEnvironment.askForType(LookupEnvironment.java:95)</Frame>
          <Frame depth="19">org.eclipse.jdt.internal.compiler.lookup.PackageBinding.getType(PackageBinding.java:117)</Frame>
          <Frame depth="20">org.eclipse.jdt.internal.compiler.lookup.Scope.findType(Scope.java:770)</Frame>
          <Frame depth="21">org.eclipse.jdt.internal.compiler.lookup.Scope.getTypeOrPackage(Scope.java:1460)</Frame>
          <Frame depth="22">org.eclipse.jdt.internal.compiler.lookup.Scope.getType(Scope.java:1271)</Frame>
          <Frame depth="23">org.eclipse.jdt.internal.compiler.ast.SingleTypeReference.getTypeBinding(SingleTypeReference.java:43)</Frame>
          <Frame depth="24">org.eclipse.jdt.internal.compiler.ast.TypeReference.resolveType(TypeReference.java:99)</Frame>
          <Frame depth="25">org.eclipse.jdt.internal.compiler.ast.LocalDeclaration.resolve(LocalDeclaration.java:137)</Frame>
          <Frame depth="26">org.eclipse.jdt.internal.compiler.ast.Block.resolve(Block.java:101)</Frame>
          <Frame depth="27">org.eclipse.jdt.internal.compiler.ast.IfStatement.resolve(IfStatement.java:226)</Frame>
          <Frame depth="28">org.eclipse.jdt.internal.compiler.ast.AbstractMethodDeclaration.resolveStatements(AbstractMethodDeclaration.java:381)</Frame>
          <Frame depth="29">org.eclipse.jdt.internal.compiler.ast.MethodDeclaration.resolveStatements(MethodDeclaration.java:137)</Frame>
          <Frame depth="30">org.eclipse.jdt.internal.compiler.ast.AbstractMethodDeclaration.resolve(AbstractMethodDeclaration.java:358)</Frame>
          <Frame depth="31">org.eclipse.jdt.internal.compiler.ast.TypeDeclaration.resolve(TypeDeclaration.java:922)</Frame>
          <Frame depth="32">org.eclipse.jdt.internal.compiler.ast.TypeDeclaration.resolve(TypeDeclaration.java:971)</Frame>
          <Frame depth="33">org.eclipse.jdt.internal.compiler.ast.CompilationUnitDeclaration.resolve(CompilationUnitDeclaration.java:273)</Frame>
          <Frame depth="34">org.eclipse.jdt.internal.compiler.Compiler.resolve(Compiler.java:562)</Frame>
          <Frame depth="35">org.eclipse.jdt.internal.compiler.Compiler.resolve(Compiler.java:601)</Frame>
          <Frame depth="36">org.eclipse.jdt.internal.core.CompilationUnitProblemFinder.process(CompilationUnitProblemFinder.java:166)</Frame>
          <Frame depth="37">org.eclipse.jdt.internal.core.CompilationUnitProblemFinder.process(CompilationUnitProblemFinder.java:206)</Frame>
          <Frame depth="38">org.eclipse.jdt.internal.core.ReconcileWorkingCopyOperation.executeOperation(ReconcileWorkingCopyOperation.java:76)</Frame>
          <Frame depth="39">org.eclipse.jdt.internal.core.JavaModelOperation.run(JavaModelOperation.java:700)</Frame>
          <Frame depth="40">org.eclipse.jdt.internal.core.JavaModelOperation.runOperation(JavaModelOperation.java:739)</Frame>
          <Frame depth="41">org.eclipse.jdt.internal.core.CompilationUnit.reconcile(CompilationUnit.java:1097)</Frame>
          <Frame depth="42">org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:88)</Frame>
          <Frame depth="43">org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.initialReconcile(JavaReconcilingStrategy.java:156)</Frame>
          <Frame depth="44">org.eclipse.jdt.internal.ui.text.CompositeReconcilingStrategy.initialReconcile(CompositeReconcilingStrategy.java:114)</Frame>
          <Frame depth="45">org.eclipse.jdt.internal.ui.text.JavaCompositeReconcilingStrategy.initialReconcile(JavaCompositeReconcilingStrategy.java:122)</Frame>
          <Frame depth="46">org.eclipse.jface.text.reconciler.MonoReconciler.initialProcess(MonoReconciler.java:104)</Frame>
          <Frame depth="47">org.eclipse.jdt.internal.ui.text.JavaReconciler.initialProcess(JavaReconciler.java:280)</Frame>
          <Frame depth="48">org.eclipse.jface.text.reconciler.AbstractReconciler$BackgroundThread.run(AbstractReconciler.java:155)</Frame>
        </Frames>
      </Stacktrace>
      <Stacktrace timestamp="1437341131352">
        <Exception>java.lang.NullPointerException</Exception>
        <Reason />
        <Frames>
          <Frame depth="0">org.eclipse.ui.editors.text.TextFileDocumentProvider.&lt;init&gt;(TextFileDocumentProvider.java:347)</Frame>
          <Frame depth="1">org.eclipse.ui.editors.text.TextFileDocumentProvider.&lt;init&gt;(TextFileDocumentProvider.java:337)</Frame>
          <Frame depth="2">org.eclipse.jdt.internal.ui.javaeditor.CompilationUnitDocumentProvider.&lt;init&gt;(CompilationUnitDocumentProvider.java:761)</Frame>
          <Frame depth="3">org.eclipse.jdt.internal.ui.JavaPlugin.getCompilationUnitDocumentProvider(JavaPlugin.java:514)</Frame>
          <Frame depth="4">org.eclipse.jdt.internal.ui.JavaPlugin.getWorkingCopyManager(JavaPlugin.java:526)</Frame>
          <Frame depth="5">org.eclipse.jdt.internal.ui.javaeditor.CompilationUnitEditor.getInputJavaElement(CompilationUnitEditor.java:1310)</Frame>
          <Frame depth="6">org.eclipse.jdt.internal.ui.javaeditor.CompilationUnitEditor.reconciled(CompilationUnitEditor.java:1730)</Frame>
          <Frame depth="7">org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:117)</Frame>
          <Frame depth="8">org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.initialReconcile(JavaReconcilingStrategy.java:156)</Frame>
          <Frame depth="9">org.eclipse.jdt.internal.ui.text.CompositeReconcilingStrategy.initialReconcile(CompositeReconcilingStrategy.java:114)</Frame>
          <Frame depth="10">org.eclipse.jdt.internal.ui.text.JavaCompositeReconcilingStrategy.initialReconcile(JavaCompositeReconcilingStrategy.java:122)</Frame>
          <Frame depth="11">org.eclipse.jface.text.reconciler.MonoReconciler.initialProcess(MonoReconciler.java:104)</Frame>
          <Frame depth="12">org.eclipse.jdt.internal.ui.text.JavaReconciler.initialProcess(JavaReconciler.java:280)</Frame>
          <Frame depth="13">org.eclipse.jface.text.reconciler.AbstractReconciler$BackgroundThread.run(AbstractReconciler.java:155)</Frame>
        </Frames>
      </Stacktrace>
    </Stacktraces>
    <SourceCodeRegions amount="1">
      <source_code type="assignment">
        <location start="441" end="516" />
        <code>status = ResourcesPlugin.getWorkspace().validateName(name, IResource.FILE);</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="INVALID" />
    <WithStack>I'm using eclipse eclipse I20040514 on osx 10.3.3 with java 1.4.2.

I once got the following exception when quiting eclipse:

!ENTRY org.eclipse.jdt.core 4 4 May 16, 2004 23:13:51.806

!MESSAGE Exception occurred during problem detection: 

!STACK 0

java.lang.NullPointerException

	at
org.eclipse.jdt.core.JavaConventions.validateClassFileName(JavaConventions.java:191)

	at org.eclipse.jdt.internal.core.util.Util.isValidClassFileName(Util.java:1002)

	at org.eclipse.jdt.internal.core.ClassFile.isValidClassFile(ClassFile.java:467)

	at org.eclipse.jdt.internal.core.ClassFile.buildStructure(ClassFile.java:76)

	at org.eclipse.jdt.internal.core.Openable.generateInfos(Openable.java:183)

	at org.eclipse.jdt.internal.core.BinaryMember.generateInfos(BinaryMember.java:46)

	at org.eclipse.jdt.internal.core.JavaElement.openWhenClosed(JavaElement.java:573)

	at org.eclipse.jdt.internal.core.JavaElement.getElementInfo(JavaElement.java:310)

	at org.eclipse.jdt.internal.core.JavaElement.getElementInfo(JavaElement.java:296)

	at org.eclipse.jdt.internal.core.BinaryType.isInterface(BinaryType.java:537)

	at org.eclipse.jdt.internal.core.BinaryType.isClass(BinaryType.java:521)

	at org.eclipse.jdt.internal.core.NameLookup.acceptType(NameLookup.java:121)

	at
org.eclipse.jdt.internal.core.NameLookup.seekTypesInBinaryPackage(NameLookup.java:605)

	at org.eclipse.jdt.internal.core.NameLookup.seekTypes(NameLookup.java:549)

	at org.eclipse.jdt.internal.core.NameLookup.findType(NameLookup.java:382)

	at org.eclipse.jdt.internal.core.NameLookup.findType(NameLookup.java:353)

	at
org.eclipse.jdt.internal.core.SearchableEnvironment.find(SearchableEnvironment.java:78)

	at
org.eclipse.jdt.internal.core.SearchableEnvironment.findType(SearchableEnvironment.java:157)

	at
org.eclipse.jdt.internal.compiler.lookup.LookupEnvironment.askForType(LookupEnvironment.java:95)

	at
org.eclipse.jdt.internal.compiler.lookup.PackageBinding.getType(PackageBinding.java:117)

	at org.eclipse.jdt.internal.compiler.lookup.Scope.findType(Scope.java:770)

	at org.eclipse.jdt.internal.compiler.lookup.Scope.getTypeOrPackage(Scope.java:1460)

	at org.eclipse.jdt.internal.compiler.lookup.Scope.getType(Scope.java:1271)

	at
org.eclipse.jdt.internal.compiler.ast.SingleTypeReference.getTypeBinding(SingleTypeReference.java:43)

	at
org.eclipse.jdt.internal.compiler.ast.TypeReference.resolveType(TypeReference.java:99)

	at
org.eclipse.jdt.internal.compiler.ast.LocalDeclaration.resolve(LocalDeclaration.java:137)

	at org.eclipse.jdt.internal.compiler.ast.Block.resolve(Block.java:101)

	at org.eclipse.jdt.internal.compiler.ast.IfStatement.resolve(IfStatement.java:226)

	at
org.eclipse.jdt.internal.compiler.ast.AbstractMethodDeclaration.resolveStatements(AbstractMethodDeclaration.java:381)

	at
org.eclipse.jdt.internal.compiler.ast.MethodDeclaration.resolveStatements(MethodDeclaration.java:137)

	at
org.eclipse.jdt.internal.compiler.ast.AbstractMethodDeclaration.resolve(AbstractMethodDeclaration.java:358)

	at
org.eclipse.jdt.internal.compiler.ast.TypeDeclaration.resolve(TypeDeclaration.java:922)

	at
org.eclipse.jdt.internal.compiler.ast.TypeDeclaration.resolve(TypeDeclaration.java:971)

	at
org.eclipse.jdt.internal.compiler.ast.CompilationUnitDeclaration.resolve(CompilationUnitDeclaration.java:273)

	at org.eclipse.jdt.internal.compiler.Compiler.resolve(Compiler.java:562)

	at org.eclipse.jdt.internal.compiler.Compiler.resolve(Compiler.java:601)

	at
org.eclipse.jdt.internal.core.CompilationUnitProblemFinder.process(CompilationUnitProblemFinder.java:166)

	at
org.eclipse.jdt.internal.core.CompilationUnitProblemFinder.process(CompilationUnitProblemFinder.java:206)

	at
org.eclipse.jdt.internal.core.ReconcileWorkingCopyOperation.executeOperation(ReconcileWorkingCopyOperation.java:76)

	at
org.eclipse.jdt.internal.core.JavaModelOperation.run(JavaModelOperation.java:700)

	at
org.eclipse.jdt.internal.core.JavaModelOperation.runOperation(JavaModelOperation.java:739)

	at
org.eclipse.jdt.internal.core.CompilationUnit.reconcile(CompilationUnit.java:1097)

	at
org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:88)

	at
org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.initialReconcile(JavaReconcilingStrategy.java:156)

	at
org.eclipse.jdt.internal.ui.text.CompositeReconcilingStrategy.initialReconcile(CompositeReconcilingStrategy.java:114)

	at
org.eclipse.jdt.internal.ui.text.JavaCompositeReconcilingStrategy.initialReconcile(JavaCompositeReconcilingStrategy.java:122)

	at
org.eclipse.jface.text.reconciler.MonoReconciler.initialProcess(MonoReconciler.java:104)

	at
org.eclipse.jdt.internal.ui.text.JavaReconciler.initialProcess(JavaReconciler.java:280)

	at
org.eclipse.jface.text.reconciler.AbstractReconciler$BackgroundThread.run(AbstractReconciler.java:155)

java.lang.NullPointerException

	at
org.eclipse.ui.editors.text.TextFileDocumentProvider.&lt;init&gt;(TextFileDocumentProvider.java:347)

	at
org.eclipse.ui.editors.text.TextFileDocumentProvider.&lt;init&gt;(TextFileDocumentProvider.java:337)

	at
org.eclipse.jdt.internal.ui.javaeditor.CompilationUnitDocumentProvider.&lt;init&gt;(CompilationUnitDocumentProvider.java:761)

	at
org.eclipse.jdt.internal.ui.JavaPlugin.getCompilationUnitDocumentProvider(JavaPlugin.java:514)

	at
org.eclipse.jdt.internal.ui.JavaPlugin.getWorkingCopyManager(JavaPlugin.java:526)

	at
org.eclipse.jdt.internal.ui.javaeditor.CompilationUnitEditor.getInputJavaElement(CompilationUnitEditor.java:1310)

	at
org.eclipse.jdt.internal.ui.javaeditor.CompilationUnitEditor.reconciled(CompilationUnitEditor.java:1730)

	at
org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:117)

	at
org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.initialReconcile(JavaReconcilingStrategy.java:156)

	at
org.eclipse.jdt.internal.ui.text.CompositeReconcilingStrategy.initialReconcile(CompositeReconcilingStrategy.java:114)

	at
org.eclipse.jdt.internal.ui.text.JavaCompositeReconcilingStrategy.initialReconcile(JavaCompositeReconcilingStrategy.java:122)

	at
org.eclipse.jface.text.reconciler.MonoReconciler.initialProcess(MonoReconciler.java:104)

	at
org.eclipse.jdt.internal.ui.text.JavaReconciler.initialProcess(JavaReconciler.java:280)

	at
org.eclipse.jface.text.reconciler.AbstractReconciler$BackgroundThread.run(AbstractReconciler.java:155)
Could be similar issue as bug 62427 if corrupted JAR.
Reopen if you can provide steps to reproduce after re-installing Eclipse, as 
corrupted files are suspected.
Offending line would be:
status = ResourcesPlugin.getWorkspace().validateName(name, IResource.FILE);

which would only fail if Eclipse wasn't properly running.</WithStack>
    <WithOutStack>I'm using eclipse eclipse I20040514 on osx 10.3.3 with java 1.4.2.

I once got the following exception when quiting eclipse:

!ENTRY org.eclipse.jdt.core 4 4 May 16, 2004 23:13:51.806

!MESSAGE Exception occurred during problem detection: 

!STACK 0



Could be similar issue as bug 62427 if corrupted JAR.
Reopen if you can provide steps to reproduce after re-installing Eclipse, as 
corrupted files are suspected.
Offending line would be:
status = ResourcesPlugin.getWorkspace().validateName(name, IResource.FILE);

which would only fail if Eclipse wasn't properly running.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="62429" />
    <CreationDate amount="2004-05-16 19:56:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="Text" />
    <Version amount="3.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Document partitioner not set when user assigns extension to editor</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="1">
      <source_code type="functiondef">
        <location start="7211" end="8129" />
        <code>public void createPartControl(Composite parent) {
		super.createPartControl(parent);
		IDocumentProvider provider = getDocumentProvider();
		if (provider == null
		|| (
				/* $if version&gt;=3.0.0$ */
				!(provider instanceof TextFileDocumentProvider) &amp;&amp;
				/* $endif$ */
				!(provider instanceof XMLDocumentProvider)
			)) {
			setDocumentProvider(createDocumentProvider());
		}
		
		IDocument document = getSourceViewer().getDocument();
		if (document != null) {
			try {
				fInitializingDocument = true;
				IDocumentPartitioner partitioner = document.getDocumentPartitioner();
				if (!(partitioner instanceof XMLPartitioner)) {
					partitioner = XMLDocumentProvider.createXMLPartitioner();
					partitioner.connect(document);
					document.setDocumentPartitioner(partitioner);
				}
				documentChanged(document, 0, document.getLength(), 0, true);
			} finally {
				fInitializingDocument = false;
			}
		}
	}</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="1">
      <Enumeration lines="10">
        <Lines>
          <Line>1. Use preferences to assign an extension "*.jive" with the Java editor.</Line>
          <Line>2. Use File &gt; New &gt; File to create a file "test.jive".</Line>
          <Line>3. Type some Java code or comments in the new file. Observe there is no syntax</Line>
          <Line>coloring in the file. (Lots of other things don't work, either.)</Line>
          <Line>This problem is real and unfortunately not new. Any Eclipse editor - not just</Line>
          <Line>text editors - are designed to work with specific content types. Usually, this</Line>
          <Line>types are fixed and cannot be changed. For example, the Java editor is written</Line>
          <Line>for Java content and the an XML editor is written for XML content. Theoretical</Line>
          <Line>user should be able to refine the mapping between files (file extensions or</Line>
          <Line>file names) and content types.</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>An editor is entitled to assume that its document partitioner will be set. But
when the user associates an extension, e.g., "*.foo", with an editor using
preferences, the partitioner for the editor is never set and there is no API
(plugin.xml or otherwise) to make it happen. This is fundamentally broken in
Eclipse and must be fixed before 3.0 ships.

Prior to 3.0, an editor could solve the problem by always forcing its own
IDocumentProvider when the editor class was initialized. The documentprovider
then attached the partitioner to the document when it was created. This was a
well-known idiom, used by many editors and in the editor sample code.

However, in 3.0, there is a new philosophy: that the documentprovider is chosen
by Eclipse, with hooks provided, e.g., IDocumentSetupParticipant, that allow a
plugin to get its partitioner established without needing to override the
system-provided IDocumentProvider. However, this scheme has the same flaw that
previous releases have shared, it is driven by file extension and therefore
doesn't work when the user just makes up a new extension for, e.g., Java or XML
files.

This puts an editor plugin in an awkward position. If it forces a particular
documentprovider, the editor won't work with the new TextFileDocumentProvider
and therefore won't work with Open External File. If it doesn't, it won't work
correctly with user-invented file extensions.
Eclipse editors have the problem, as well. For example,

1. Use preferences to assign an extension "*.jive" with the Java editor.
2. Use File &gt; New &gt; File to create a file "test.jive".
3. Type some Java code or comments in the new file. Observe there is no syntax
coloring in the file. (Lots of other things don't work, either.)
This problem is real and unfortunately not new. Any Eclipse editor - not just 
text editors - are designed to work with specific content types. Usually, this 
types are fixed and cannot be changed. For example, the Java editor is written 
for Java content and the an XML editor is written for XML content. Theoretical 
user should be able to refine the mapping between files (file extensions or 
file names) and content types. 

Eclipse allows user to arbitrarily associate file extensions and file names 
with editors. As the files must not contain content know to the editor this 
may result in a situation in which some functions are available and others are 
not. When the user, e.g., associates the Java editor with the file 
extension "abc" any function that relies on the existence of a Java model 
element (ICompilationUnit or IClassFile) is lost as the Java model ignores any 
file not ending on ".java". 

In 3.0, assigning content types to file names and file extensions is not 
supported, although initially there was hope that we could get it. Thus, the 
general situation is not different from 2.1. The introduction of file buffers 
and their usage by document providers makes this flaw more visible as a editor 
may miss the document partitioning it is working on. 

Editor implementers which do not want to tolerate that their editors do not 
work with a user defined file name mapping will be asked to provide a 
workaround. The workaround is that custom editors for which the 
TextFileDocumentProvider would be good enough still work with a custom 
document provider. This document provider would be mostly similar to the 
TextFileDocumentProvider (e.g., forwarding all calls to it) but ensure that 
the document partitioning expected by the editor is installed on the delivered 
documents. We'll try to provide a convenience class that can be configured on 
object instantiation. This proposal is not satisfying but the best we can do 
right now.


Thanks, but I'm not sure I understood the reply. Did you say that as a
workaround you will provide a variant of FileDocumentProvider that will work
with an IDocumentSetupParticipant? Wouldn't that have the same problem: the
participant is configured for a fixed set of file extensions.

I can't help think all this would be much simpler if the choice of
IDocumentProvider class to instantiate and/or IDocumentSetupParticipant to use
were configured by editor id instead of by file extension.

As far as I can tell (please correct me if this is wrong) currently every
IDocumentSetupParticipant registered for a given file extension is called, which
in practice means that every one attaches a partitioner to the document. Since
the document has no way to tell which partitioner to use, presumably it uses
them all. This is a lot of overhead in the normal 99.9% case, were a given file
is open in only one editor at a time.
We will provide a document provider implementation that acts similarly to the 
TextFileDocumentProvider and ensures the existence of a particular 
configurable partitioning.

File buffers are independent from editors. Editors may use file buffers by 
means of their document provider. It is not a must that an editor 
infrastructure has to participate in the document setup. Editors can set up 
their documents as they like to. 

Eclipse uses file buffers for example to maintain search results or to update 
annotations (potentially marker based) when changing file content while 
refactoring. For that, no editor must be open. Editors are just another use 
case of file buffers. Every such function might create document position 
categories and attach position updaters. Position updaters are allowed to use 
partitioning information. Thus partitioning information must be up-to-date. In 
order to prevent clients from being responsible for keeping track of when and 
how long a particular partitioning or document position category is needed 
(multiple interleaving clients may share them) file buffers set up the 
documents.
Thanks for the information. I understand your design rationale, though I still
think it a waste to have partitioners nobody is using set up and responding to
changes. I guess we'll see the impact of that down the road.

&gt;We will provide a document provider implementation that acts similarly to the 
&gt;TextFileDocumentProvider and ensures the existence of a particular 
&gt;configurable partitioning.

Yes, but how will this work for user-invented extensions associated with a
particular editor?
&gt; Editor implementers which do not want to tolerate that their editors do not 
&gt; work with a user defined file name mapping will be asked to provide a 
&gt; workaround. The workaround is that custom editors for which the 
&gt; TextFileDocumentProvider would be good enough still work with a custom 
&gt; document provider.


Promises, promises. ;-}
But seriously. I held off on M8 support because of Open External File and other
text-related issues, but because so many of my plugin users are early adopters I
am strongly motivated to support M9.

If you or anyone can think of a workaround that will work in M9 and support both
FileDocumentProvider and TextFileDocumentProvider, for both plugin.xml-declared
file extensions and user-assigned file extensions, please let me know.
*** Bug 62851 has been marked as a duplicate of this bug. ***
The following code sequence in the texteditor createPartControl seems to handle
all three cases in M9 (and hopefully in 2.0):

	public void createPartControl(Composite parent) {
		super.createPartControl(parent);
		IDocumentProvider provider = getDocumentProvider();
		if (provider == null
		|| (
				/* $if version&gt;=3.0.0$ */
				!(provider instanceof TextFileDocumentProvider) &amp;&amp;
				/* $endif$ */
				!(provider instanceof XMLDocumentProvider)
			)) {
			setDocumentProvider(createDocumentProvider());
		}
		
		IDocument document = getSourceViewer().getDocument();
		if (document != null) {
			try {
				fInitializingDocument = true;
				IDocumentPartitioner partitioner = document.getDocumentPartitioner();
				if (!(partitioner instanceof XMLPartitioner)) {
					partitioner = XMLDocumentProvider.createXMLPartitioner();
					partitioner.connect(document);
					document.setDocumentPartitioner(partitioner);
				}
				documentChanged(document, 0, document.getLength(), 0, true);
			} finally {
				fInitializingDocument = false;
			}
		}
	}

For the *.foo case, a TextFileDocumentProvider exists but has a null
partitioner. For the *.xml external file case, a TextFileDocumentProvider exists
and has the correct partitioner. For the *.xml project file case, an
XMLDocumentProvider (as configured in plugin.xml) exists and has the correct
partitioner (because the documentprovider set it up, as in 2.0).

The documentChanged method expects the partitions to be set up.
i got burned by this too (no coloring etc. for a java source file as soon as 
the extension is not exactly '.java')
Added ForwardingDocumentProvider. Pls see javadoc.
Build &gt; 200405251200.
Yes, but...

I still have an issue with this design. Currently, the document provider class
is sometimes specified by the editor and sometimes imposed on the editor. The
editor should always have the ability to specify the document provider class.

I see as a matter of practice that the Java (compilation unit) editor is always
creating its own document provider in its constructor, a subclass of
TextFileDocumentProvider. The Ant editor seems to do so, as well. This is quite
confusing!

My immediate problem is encoding support. If I can't override the default
encoding behavior, I don't see how to set the output encoding correctly, with
the result that some documents that specify will be written in another (the
platform default, of all things!). This is a serious problem that is the
roadblock for M9 support.

But the document provider does other things, as well. (In fact, it's hard to
tell exactly what the document provider is designed to do, except be a
collection of document-related hooks for other functions.) Do you want to keep
adding extensions to cover every one of its hooks? Wouldn't it be simpler just
to allow editors to always specify the document provider class?</WithStack>
    <WithOutStack>An editor is entitled to assume that its document partitioner will be set. But
when the user associates an extension, e.g., "*.foo", with an editor using
preferences, the partitioner for the editor is never set and there is no API
(plugin.xml or otherwise) to make it happen. This is fundamentally broken in
Eclipse and must be fixed before 3.0 ships.

Prior to 3.0, an editor could solve the problem by always forcing its own
IDocumentProvider when the editor class was initialized. The documentprovider
then attached the partitioner to the document when it was created. This was a
well-known idiom, used by many editors and in the editor sample code.

However, in 3.0, there is a new philosophy: that the documentprovider is chosen
by Eclipse, with hooks provided, e.g., IDocumentSetupParticipant, that allow a
plugin to get its partitioner established without needing to override the
system-provided IDocumentProvider. However, this scheme has the same flaw that
previous releases have shared, it is driven by file extension and therefore
doesn't work when the user just makes up a new extension for, e.g., Java or XML
files.

This puts an editor plugin in an awkward position. If it forces a particular
documentprovider, the editor won't work with the new TextFileDocumentProvider
and therefore won't work with Open External File. If it doesn't, it won't work
correctly with user-invented file extensions.
Eclipse editors have the problem, as well. For example,

1. Use preferences to assign an extension "*.jive" with the Java editor.
2. Use File &gt; New &gt; File to create a file "test.jive".
3. Type some Java code or comments in the new file. Observe there is no syntax
coloring in the file. (Lots of other things don't work, either.)
This problem is real and unfortunately not new. Any Eclipse editor - not just 
text editors - are designed to work with specific content types. Usually, this 
types are fixed and cannot be changed. For example, the Java editor is written 
for Java content and the an XML editor is written for XML content. Theoretical 
user should be able to refine the mapping between files (file extensions or 
file names) and content types. 

Eclipse allows user to arbitrarily associate file extensions and file names 
with editors. As the files must not contain content know to the editor this 
may result in a situation in which some functions are available and others are 
not. When the user, e.g., associates the Java editor with the file 
extension "abc" any function that relies on the existence of a Java model 
element (ICompilationUnit or IClassFile) is lost as the Java model ignores any 
file not ending on ".java". 

In 3.0, assigning content types to file names and file extensions is not 
supported, although initially there was hope that we could get it. Thus, the 
general situation is not different from 2.1. The introduction of file buffers 
and their usage by document providers makes this flaw more visible as a editor 
may miss the document partitioning it is working on. 

Editor implementers which do not want to tolerate that their editors do not 
work with a user defined file name mapping will be asked to provide a 
workaround. The workaround is that custom editors for which the 
TextFileDocumentProvider would be good enough still work with a custom 
document provider. This document provider would be mostly similar to the 
TextFileDocumentProvider (e.g., forwarding all calls to it) but ensure that 
the document partitioning expected by the editor is installed on the delivered 
documents. We'll try to provide a convenience class that can be configured on 
object instantiation. This proposal is not satisfying but the best we can do 
right now.


Thanks, but I'm not sure I understood the reply. Did you say that as a
workaround you will provide a variant of FileDocumentProvider that will work
with an IDocumentSetupParticipant? Wouldn't that have the same problem: the
participant is configured for a fixed set of file extensions.

I can't help think all this would be much simpler if the choice of
IDocumentProvider class to instantiate and/or IDocumentSetupParticipant to use
were configured by editor id instead of by file extension.

As far as I can tell (please correct me if this is wrong) currently every
IDocumentSetupParticipant registered for a given file extension is called, which
in practice means that every one attaches a partitioner to the document. Since
the document has no way to tell which partitioner to use, presumably it uses
them all. This is a lot of overhead in the normal 99.9% case, were a given file
is open in only one editor at a time.
We will provide a document provider implementation that acts similarly to the 
TextFileDocumentProvider and ensures the existence of a particular 
configurable partitioning.

File buffers are independent from editors. Editors may use file buffers by 
means of their document provider. It is not a must that an editor 
infrastructure has to participate in the document setup. Editors can set up 
their documents as they like to. 

Eclipse uses file buffers for example to maintain search results or to update 
annotations (potentially marker based) when changing file content while 
refactoring. For that, no editor must be open. Editors are just another use 
case of file buffers. Every such function might create document position 
categories and attach position updaters. Position updaters are allowed to use 
partitioning information. Thus partitioning information must be up-to-date. In 
order to prevent clients from being responsible for keeping track of when and 
how long a particular partitioning or document position category is needed 
(multiple interleaving clients may share them) file buffers set up the 
documents.
Thanks for the information. I understand your design rationale, though I still
think it a waste to have partitioners nobody is using set up and responding to
changes. I guess we'll see the impact of that down the road.

&gt;We will provide a document provider implementation that acts similarly to the 
&gt;TextFileDocumentProvider and ensures the existence of a particular 
&gt;configurable partitioning.

Yes, but how will this work for user-invented extensions associated with a
particular editor?
&gt; Editor implementers which do not want to tolerate that their editors do not 
&gt; work with a user defined file name mapping will be asked to provide a 
&gt; workaround. The workaround is that custom editors for which the 
&gt; TextFileDocumentProvider would be good enough still work with a custom 
&gt; document provider.


Promises, promises. ;-}
But seriously. I held off on M8 support because of Open External File and other
text-related issues, but because so many of my plugin users are early adopters I
am strongly motivated to support M9.

If you or anyone can think of a workaround that will work in M9 and support both
FileDocumentProvider and TextFileDocumentProvider, for both plugin.xml-declared
file extensions and user-assigned file extensions, please let me know.
*** Bug 62851 has been marked as a duplicate of this bug. ***
The following code sequence in the texteditor createPartControl seems to handle
all three cases in M9 (and hopefully in 2.0):

	public void createPartControl(Composite parent) {
		super.createPartControl(parent);
		IDocumentProvider provider = getDocumentProvider();
		if (provider == null
		|| (
				/* $if version&gt;=3.0.0$ */
				!(provider instanceof TextFileDocumentProvider) &amp;&amp;
				/* $endif$ */
				!(provider instanceof XMLDocumentProvider)
			)) {
			setDocumentProvider(createDocumentProvider());
		}
		
		IDocument document = getSourceViewer().getDocument();
		if (document != null) {
			try {
				fInitializingDocument = true;
				IDocumentPartitioner partitioner = document.getDocumentPartitioner();
				if (!(partitioner instanceof XMLPartitioner)) {
					partitioner = XMLDocumentProvider.createXMLPartitioner();
					partitioner.connect(document);
					document.setDocumentPartitioner(partitioner);
				}
				documentChanged(document, 0, document.getLength(), 0, true);
			} finally {
				fInitializingDocument = false;
			}
		}
	}

For the *.foo case, a TextFileDocumentProvider exists but has a null
partitioner. For the *.xml external file case, a TextFileDocumentProvider exists
and has the correct partitioner. For the *.xml project file case, an
XMLDocumentProvider (as configured in plugin.xml) exists and has the correct
partitioner (because the documentprovider set it up, as in 2.0).

The documentChanged method expects the partitions to be set up.
i got burned by this too (no coloring etc. for a java source file as soon as 
the extension is not exactly '.java')
Added ForwardingDocumentProvider. Pls see javadoc.
Build &gt; 200405251200.
Yes, but...

I still have an issue with this design. Currently, the document provider class
is sometimes specified by the editor and sometimes imposed on the editor. The
editor should always have the ability to specify the document provider class.

I see as a matter of practice that the Java (compilation unit) editor is always
creating its own document provider in its constructor, a subclass of
TextFileDocumentProvider. The Ant editor seems to do so, as well. This is quite
confusing!

My immediate problem is encoding support. If I can't override the default
encoding behavior, I don't see how to set the output encoding correctly, with
the result that some documents that specify will be written in another (the
platform default, of all things!). This is a serious problem that is the
roadblock for M9 support.

But the document provider does other things, as well. (In fact, it's hard to
tell exactly what the document provider is designed to do, except be a
collection of document-related hooks for other functions.) Do you want to keep
adding extensions to cover every one of its hooks? Wouldn't it be simpler just
to allow editors to always specify the document provider class?</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="62430" />
    <CreationDate amount="2004-05-16 20:00:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="Resources" />
    <Version amount="3.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Exception while saving project.</Summery>
    <Patches amount="0" />
    <Stacktraces amount="2">
      <Stacktrace timestamp="1437341131363">
        <Exception>org.eclipse.core.internal.resources.ResourceException</Exception>
        <Reason>The resource tree is 
locked for modifications.</Reason>
        <Frames>
          <Frame depth="0">org.eclipse.core.internal.resources.WorkManager.checkIn(WorkManager.java:93)</Frame>
          <Frame depth="1">org.eclipse.core.internal.resources.Workspace.prepareOperation(Workspace.java:1629)</Frame>
          <Frame depth="2">org.eclipse.core.internal.resources.File.setContents(File.java:329)</Frame>
          <Frame depth="3">org.eclipse.core.internal.resources.ProjectPreferences.save(ProjectPreferences.java:258)</Frame>
          <Frame depth="4">org.eclipse.core.internal.preferences.EclipsePreferences.flush(EclipsePreferences.java:334)</Frame>
          <Frame depth="5">org.eclipse.core.internal.preferences.EclipsePreferences.create(EclipsePreferences.java:291)</Frame>
          <Frame depth="6">org.eclipse.core.internal.preferences.EclipsePreferences.internalNode(EclipsePreferences.java:517)</Frame>
          <Frame depth="7">org.eclipse.core.internal.preferences.EclipsePreferences.node(EclipsePreferences.java:647)</Frame>
          <Frame depth="8">org.eclipse.core.resources.ProjectScope.getNode(ProjectScope.java:66)</Frame>
          <Frame depth="9">org.eclipse.core.internal.resources.CharsetManager.getPreferences(CharsetManager.java:161)</Frame>
          <Frame depth="10">org.eclipse.core.internal.resources.CharsetManager.access$0(CharsetManager.java:160)</Frame>
          <Frame depth="11">org.eclipse.core.internal.resources.CharsetManager$Listener.processEntryChanges(CharsetManager.java:86)</Frame>
          <Frame depth="12">org.eclipse.core.internal.resources.CharsetManager$Listener.resourceChanged(CharsetManager.java:134)</Frame>
          <Frame depth="13">org.eclipse.core.internal.events.NotificationManager$2.run(NotificationManager.java:319)</Frame>
          <Frame depth="14">org.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java:607)</Frame>
          <Frame depth="15">org.eclipse.core.runtime.Platform.run(Platform.java:668)</Frame>
          <Frame depth="16">org.eclipse.core.internal.events.NotificationManager.notify(NotificationManager.java:313)</Frame>
          <Frame depth="17">org.eclipse.core.internal.events.NotificationManager.broadcastChanges(NotificationManager.java:156)</Frame>
          <Frame depth="18">org.eclipse.core.internal.resources.Workspace.broadcastChanges(Workspace.java:172)</Frame>
          <Frame depth="19">org.eclipse.core.internal.resources.Workspace.endOperation(Workspace.java:902)</Frame>
          <Frame depth="20">org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1683)</Frame>
          <Frame depth="21">org.eclipse.jdt.core.JavaCore.run(JavaCore.java:3232)</Frame>
          <Frame depth="22">org.eclipse.jdt.core.JavaCore.setClasspathContainer(JavaCore.java:3402)</Frame>
          <Frame depth="23">org.eclipse.pde.internal.core.ModelEntry.updateClasspathContainer(ModelEntry.java:109)</Frame>
          <Frame depth="24">org.eclipse.pde.internal.core.RequiredPluginsInitializer.initialize(RequiredPluginsInitializer.java:40)</Frame>
          <Frame depth="25">org.eclipse.jdt.internal.core.JavaModelManager.initializeContainer(JavaModelManager.java:1187)</Frame>
          <Frame depth="26">org.eclipse.jdt.internal.core.JavaModelManager.initializeAllContainers(JavaModelManager.java:1161)</Frame>
          <Frame depth="27">org.eclipse.jdt.internal.core.JavaModelManager.getClasspathContainer(JavaModelManager.java:824)</Frame>
          <Frame depth="28">org.eclipse.jdt.core.JavaCore.getClasspathContainer(JavaCore.java:1182)</Frame>
          <Frame depth="29">org.eclipse.jdt.internal.core.JavaProject.getResolvedClasspath(JavaProject.java:1877)</Frame>
          <Frame depth="30">org.eclipse.jdt.internal.core.JavaProject.getResolvedClasspath(JavaProject.java:1788)</Frame>
          <Frame depth="31">org.eclipse.jdt.internal.core.JavaProject.getResolvedClasspath(JavaProject.java:1739)</Frame>
          <Frame depth="32">org.eclipse.jdt.internal.core.JavaProject.buildStructure(JavaProject.java:266)</Frame>
          <Frame depth="33">org.eclipse.jdt.internal.core.Openable.generateInfos(Openable.java:183)</Frame>
          <Frame depth="34">org.eclipse.jdt.internal.core.JavaElement.openWhenClosed(JavaElement.java:573)</Frame>
          <Frame depth="35">org.eclipse.jdt.internal.core.JavaElement.getElementInfo(JavaElement.java:310)</Frame>
          <Frame depth="36">org.eclipse.jdt.internal.core.JavaElement.getElementInfo(JavaElement.java:296)</Frame>
          <Frame depth="37">org.eclipse.jdt.internal.core.JavaElement.getChildren(JavaElement.java:251)</Frame>
          <Frame depth="38">org.eclipse.jdt.internal.core.JavaProject.getPackageFragmentRoots(JavaProject.java:1569)</Frame>
          <Frame depth="39">org.eclipse.jdt.ui.StandardJavaElementContentProvider.getPackageFragmentRoots(StandardJavaElementContentProvider.java:250)</Frame>
          <Frame depth="40">org.eclipse.jdt.ui.StandardJavaElementContentProvider.getChildren(StandardJavaElementContentProvider.java:168)</Frame>
          <Frame depth="41">org.eclipse.jdt.internal.ui.packageview.PackageExplorerContentProvider.getChildren(PackageExplorerContentProvider.java:115)</Frame>
          <Frame depth="42">org.eclipse.jdt.internal.ui.packageview.PackageExplorerPart$5.getFilteredChildren(PackageExplorerPart.java:345)</Frame>
          <Frame depth="43">org.eclipse.jface.viewers.AbstractTreeViewer.isExpandable(AbstractTreeViewer.java:1138)</Frame>
          <Frame depth="44">org.eclipse.jface.viewers.AbstractTreeViewer.updatePlus(AbstractTreeViewer.java:1585)</Frame>
          <Frame depth="45">org.eclipse.jface.viewers.AbstractTreeViewer.createTreeItem(AbstractTreeViewer.java:378)</Frame>
          <Frame depth="46">org.eclipse.jface.viewers.AbstractTreeViewer$1.run(AbstractTreeViewer.java:357)</Frame>
          <Frame depth="47">org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:69)</Frame>
          <Frame depth="48">org.eclipse.jface.viewers.AbstractTreeViewer.createChildren(AbstractTreeViewer.java:343)</Frame>
          <Frame depth="49">org.eclipse.jface.viewers.AbstractTreeViewer$5.run(AbstractTreeViewer.java:783)</Frame>
          <Frame depth="50">org.eclipse.jface.viewers.StructuredViewer.preservingSelection(StructuredViewer.java:788)</Frame>
          <Frame depth="51">org.eclipse.jface.viewers.AbstractTreeViewer.inputChanged(AbstractTreeViewer.java:773)</Frame>
          <Frame depth="52">org.eclipse.jface.viewers.ContentViewer.setInput(ContentViewer.java:238)</Frame>
          <Frame depth="53">org.eclipse.jface.viewers.StructuredViewer.setInput(StructuredViewer.java:972)</Frame>
          <Frame depth="54">org.eclipse.jdt.internal.ui.packageview.PackageExplorerPart.createPartControl(PackageExplorerPart.java:287)</Frame>
          <Frame depth="55">org.eclipse.ui.internal.PartPane$1.run(PartPane.java:93)</Frame>
          <Frame depth="56">org.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java:607)</Frame>
          <Frame depth="57">org.eclipse.core.runtime.Platform.run(Platform.java:668)</Frame>
          <Frame depth="58">org.eclipse.ui.internal.PartPane.createChildControl(PartPane.java:89)</Frame>
          <Frame depth="59">org.eclipse.ui.internal.ViewPane.createChildControl(ViewPane.java:143)</Frame>
          <Frame depth="60">org.eclipse.ui.internal.PartPane.createControl(PartPane.java:150)</Frame>
          <Frame depth="61">org.eclipse.ui.internal.ViewPane.createControl(ViewPane.java:131)</Frame>
          <Frame depth="62">org.eclipse.ui.internal.PartStack.refreshPresentationSelection(PartStack.java:710)</Frame>
          <Frame depth="63">org.eclipse.ui.internal.PartStack.createControl(PartStack.java:315)</Frame>
          <Frame depth="64">org.eclipse.ui.internal.ViewStack.createControl(ViewStack.java:99)</Frame>
          <Frame depth="65">org.eclipse.ui.internal.PartSashContainer.createControl(PartSashContainer.java:392)</Frame>
          <Frame depth="66">org.eclipse.ui.internal.PerspectiveHelper.activate(PerspectiveHelper.java:156)</Frame>
          <Frame depth="67">org.eclipse.ui.internal.Perspective.onActivate(Perspective.java:718)</Frame>
          <Frame depth="68">org.eclipse.ui.internal.WorkbenchPage.onActivate(WorkbenchPage.java:1974)</Frame>
          <Frame depth="69">org.eclipse.ui.internal.WorkbenchWindow$7.run(WorkbenchWindow.java:1910)</Frame>
          <Frame depth="70">org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:69)</Frame>
          <Frame depth="71">org.eclipse.ui.internal.WorkbenchWindow.setActivePage(WorkbenchWindow.java:1897)</Frame>
          <Frame depth="72">org.eclipse.ui.internal.WorkbenchWindow.restoreState(WorkbenchWindow.java:1465)</Frame>
          <Frame depth="73">org.eclipse.ui.internal.Workbench.restoreState(Workbench.java:1206)</Frame>
          <Frame depth="74">org.eclipse.ui.internal.Workbench.access$10(Workbench.java:1173)</Frame>
          <Frame depth="75">org.eclipse.ui.internal.Workbench$13.run(Workbench.java:1084)</Frame>
          <Frame depth="76">org.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java:607)</Frame>
          <Frame depth="77">org.eclipse.core.runtime.Platform.run(Platform.java:668)</Frame>
          <Frame depth="78">org.eclipse.ui.internal.Workbench.restoreState(Workbench.java:1017)</Frame>
          <Frame depth="79">org.eclipse.ui.internal.WorkbenchConfigurer.restoreState(WorkbenchConfigurer.java:167)</Frame>
          <Frame depth="80">org.eclipse.ui.application.WorkbenchAdvisor.openWindows(WorkbenchAdvisor.java:648)</Frame>
          <Frame depth="81">org.eclipse.ui.internal.Workbench.init(Workbench.java:807)</Frame>
          <Frame depth="82">org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1301)</Frame>
          <Frame depth="83">org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:243)</Frame>
          <Frame depth="84">org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:141)</Frame>
          <Frame depth="85">org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:90)</Frame>
          <Frame depth="86">org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:298)</Frame>
          <Frame depth="87">org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:249)</Frame>
          <Frame depth="88">org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:126)</Frame>
          <Frame depth="89">sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)</Frame>
          <Frame depth="90">sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)</Frame>
          <Frame depth="91">sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)</Frame>
          <Frame depth="92">java.lang.reflect.Method.invoke(Method.java:324)</Frame>
          <Frame depth="93">org.eclipse.core.launcher.Main.basicRun(Main.java:269)</Frame>
          <Frame depth="94">org.eclipse.core.launcher.Main.run(Main.java:722)</Frame>
          <Frame depth="95">org.eclipse.core.launcher.Main.main(Main.java:706)</Frame>
        </Frames>
      </Stacktrace>
      <Stacktrace timestamp="1437341131363">
        <Exception>org.osgi.service.prefs.BackingStoreException</Exception>
        <Reason>Exception occurred while saving 
project 
preferences: /com.example.ui.fragment/.settings/org.eclipse.core.resources.pref
s.</Reason>
        <Frames>
          <Frame depth="0">org.eclipse.core.internal.resources.ProjectPreferences.save(ProjectPreferences.java:274)</Frame>
          <Frame depth="1">org.eclipse.core.internal.preferences.EclipsePreferences.flush(EclipsePreferences.java:334)</Frame>
          <Frame depth="2">org.eclipse.core.internal.preferences.EclipsePreferences.create(EclipsePreferences.java:291)</Frame>
          <Frame depth="3">org.eclipse.core.internal.preferences.EclipsePreferences.internalNode(EclipsePreferences.java:517)</Frame>
          <Frame depth="4">org.eclipse.core.internal.preferences.EclipsePreferences.node(EclipsePreferences.java:647)</Frame>
          <Frame depth="5">org.eclipse.core.resources.ProjectScope.getNode(ProjectScope.java:66)</Frame>
          <Frame depth="6">org.eclipse.core.internal.resources.CharsetManager.getPreferences(CharsetManager.java:161)</Frame>
          <Frame depth="7">org.eclipse.core.internal.resources.CharsetManager.access$0(CharsetManager.java:160)</Frame>
          <Frame depth="8">org.eclipse.core.internal.resources.CharsetManager$Listener.processEntryChanges(CharsetManager.java:86)</Frame>
          <Frame depth="9">org.eclipse.core.internal.resources.CharsetManager$Listener.resourceChanged(CharsetManager.java:134)</Frame>
          <Frame depth="10">org.eclipse.core.internal.events.NotificationManager$2.run(NotificationManager.java:319)</Frame>
          <Frame depth="11">org.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java:607)</Frame>
          <Frame depth="12">org.eclipse.core.runtime.Platform.run(Platform.java:668)</Frame>
          <Frame depth="13">org.eclipse.core.internal.events.NotificationManager.notify(NotificationManager.java:313)</Frame>
          <Frame depth="14">org.eclipse.core.internal.events.NotificationManager.broadcastChanges(NotificationManager.java:156)</Frame>
          <Frame depth="15">org.eclipse.core.internal.resources.Workspace.broadcastChanges(Workspace.java:172)</Frame>
          <Frame depth="16">org.eclipse.core.internal.resources.Workspace.endOperation(Workspace.java:902)</Frame>
          <Frame depth="17">org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1683)</Frame>
          <Frame depth="18">org.eclipse.jdt.core.JavaCore.run(JavaCore.java:3232)</Frame>
          <Frame depth="19">org.eclipse.jdt.core.JavaCore.setClasspathContainer(JavaCore.java:3402)</Frame>
          <Frame depth="20">org.eclipse.pde.internal.core.ModelEntry.updateClasspathContainer(ModelEntry.java:109)</Frame>
          <Frame depth="21">org.eclipse.pde.internal.core.RequiredPluginsInitializer.initialize(RequiredPluginsInitializer.java:40)</Frame>
          <Frame depth="22">org.eclipse.jdt.internal.core.JavaModelManager.initializeContainer(JavaModelManager.java:1187)</Frame>
          <Frame depth="23">org.eclipse.jdt.internal.core.JavaModelManager.initializeAllContainers(JavaModelManager.java:1161)</Frame>
          <Frame depth="24">org.eclipse.jdt.internal.core.JavaModelManager.getClasspathContainer(JavaModelManager.java:824)</Frame>
          <Frame depth="25">org.eclipse.jdt.core.JavaCore.getClasspathContainer(JavaCore.java:1182)</Frame>
          <Frame depth="26">org.eclipse.jdt.internal.core.JavaProject.getResolvedClasspath(JavaProject.java:1877)</Frame>
          <Frame depth="27">org.eclipse.jdt.internal.core.JavaProject.getResolvedClasspath(JavaProject.java:1788)</Frame>
          <Frame depth="28">org.eclipse.jdt.internal.core.JavaProject.getResolvedClasspath(JavaProject.java:1739)</Frame>
          <Frame depth="29">org.eclipse.jdt.internal.core.JavaProject.buildStructure(JavaProject.java:266)</Frame>
          <Frame depth="30">org.eclipse.jdt.internal.core.Openable.generateInfos(Openable.java:183)</Frame>
          <Frame depth="31">org.eclipse.jdt.internal.core.JavaElement.openWhenClosed(JavaElement.java:573)</Frame>
          <Frame depth="32">org.eclipse.jdt.internal.core.JavaElement.getElementInfo(JavaElement.java:310)</Frame>
          <Frame depth="33">org.eclipse.jdt.internal.core.JavaElement.getElementInfo(JavaElement.java:296)</Frame>
          <Frame depth="34">org.eclipse.jdt.internal.core.JavaElement.getChildren(JavaElement.java:251)</Frame>
          <Frame depth="35">org.eclipse.jdt.internal.core.JavaProject.getPackageFragmentRoots(JavaProject.java:1569)</Frame>
          <Frame depth="36">org.eclipse.jdt.ui.StandardJavaElementContentProvider.getPackageFragmentRoots(StandardJavaElementContentProvider.java:250)</Frame>
          <Frame depth="37">org.eclipse.jdt.ui.StandardJavaElementContentProvider.getChildren(StandardJavaElementContentProvider.java:168)</Frame>
          <Frame depth="38">org.eclipse.jdt.internal.ui.packageview.PackageExplorerContentProvider.getChildren(PackageExplorerContentProvider.java:115)</Frame>
          <Frame depth="39">org.eclipse.jdt.internal.ui.packageview.PackageExplorerPart$5.getFilteredChildren(PackageExplorerPart.java:345)</Frame>
          <Frame depth="40">org.eclipse.jface.viewers.AbstractTreeViewer.isExpandable(AbstractTreeViewer.java:1138)</Frame>
          <Frame depth="41">org.eclipse.jface.viewers.AbstractTreeViewer.updatePlus(AbstractTreeViewer.java:1585)</Frame>
          <Frame depth="42">org.eclipse.jface.viewers.AbstractTreeViewer.createTreeItem(AbstractTreeViewer.java:378)</Frame>
          <Frame depth="43">org.eclipse.jface.viewers.AbstractTreeViewer$1.run(AbstractTreeViewer.java:357)</Frame>
          <Frame depth="44">org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:69)</Frame>
          <Frame depth="45">org.eclipse.jface.viewers.AbstractTreeViewer.createChildren(AbstractTreeViewer.java:343)</Frame>
          <Frame depth="46">org.eclipse.jface.viewers.AbstractTreeViewer$5.run(AbstractTreeViewer.java:783)</Frame>
          <Frame depth="47">org.eclipse.jface.viewers.StructuredViewer.preservingSelection(StructuredViewer.java:788)</Frame>
          <Frame depth="48">org.eclipse.jface.viewers.AbstractTreeViewer.inputChanged(AbstractTreeViewer.java:773)</Frame>
          <Frame depth="49">org.eclipse.jface.viewers.ContentViewer.setInput(ContentViewer.java:238)</Frame>
          <Frame depth="50">org.eclipse.jface.viewers.StructuredViewer.setInput(StructuredViewer.java:972)</Frame>
          <Frame depth="51">org.eclipse.jdt.internal.ui.packageview.PackageExplorerPart.createPartControl(PackageExplorerPart.java:287)</Frame>
          <Frame depth="52">org.eclipse.ui.internal.PartPane$1.run(PartPane.java:93)</Frame>
          <Frame depth="53">org.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java:607)</Frame>
          <Frame depth="54">org.eclipse.core.runtime.Platform.run(Platform.java:668)</Frame>
          <Frame depth="55">org.eclipse.ui.internal.PartPane.createChildControl(PartPane.java:89)</Frame>
          <Frame depth="56">org.eclipse.ui.internal.ViewPane.createChildControl(ViewPane.java:143)</Frame>
          <Frame depth="57">org.eclipse.ui.internal.PartPane.createControl(PartPane.java:150)</Frame>
          <Frame depth="58">org.eclipse.ui.internal.ViewPane.createControl(ViewPane.java:131)</Frame>
          <Frame depth="59">org.eclipse.ui.internal.PartStack.refreshPresentationSelection(PartStack.java:710)</Frame>
          <Frame depth="60">org.eclipse.ui.internal.PartStack.createControl(PartStack.java:315)</Frame>
          <Frame depth="61">org.eclipse.ui.internal.ViewStack.createControl(ViewStack.java:99)</Frame>
          <Frame depth="62">org.eclipse.ui.internal.PartSashContainer.createControl(PartSashContainer.java:392)</Frame>
          <Frame depth="63">org.eclipse.ui.internal.PerspectiveHelper.activate(PerspectiveHelper.java:156)</Frame>
          <Frame depth="64">org.eclipse.ui.internal.Perspective.onActivate(Perspective.java:718)</Frame>
          <Frame depth="65">org.eclipse.ui.internal.WorkbenchPage.onActivate(WorkbenchPage.java:1974)</Frame>
          <Frame depth="66">org.eclipse.ui.internal.WorkbenchWindow$7.run(WorkbenchWindow.java:1910)</Frame>
          <Frame depth="67">org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:69)</Frame>
          <Frame depth="68">org.eclipse.ui.internal.WorkbenchWindow.setActivePage(WorkbenchWindow.java:1897)</Frame>
          <Frame depth="69">org.eclipse.ui.internal.WorkbenchWindow.restoreState(WorkbenchWindow.java:1465)</Frame>
          <Frame depth="70">org.eclipse.ui.internal.Workbench.restoreState(Workbench.java:1206)</Frame>
          <Frame depth="71">org.eclipse.ui.internal.Workbench.access$10(Workbench.java:1173)</Frame>
          <Frame depth="72">org.eclipse.ui.internal.Workbench$13.run(Workbench.java:1084)</Frame>
          <Frame depth="73">org.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java:607)</Frame>
          <Frame depth="74">org.eclipse.core.runtime.Platform.run(Platform.java:668)</Frame>
          <Frame depth="75">org.eclipse.ui.internal.Workbench.restoreState(Workbench.java:1017)</Frame>
          <Frame depth="76">org.eclipse.ui.internal.WorkbenchConfigurer.restoreState(WorkbenchConfigurer.java:167)</Frame>
          <Frame depth="77">org.eclipse.ui.application.WorkbenchAdvisor.openWindows(WorkbenchAdvisor.java:648)</Frame>
          <Frame depth="78">org.eclipse.ui.internal.Workbench.init(Workbench.java:807)</Frame>
          <Frame depth="79">org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1301)</Frame>
          <Frame depth="80">org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:243)</Frame>
          <Frame depth="81">org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:141)</Frame>
          <Frame depth="82">org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:90)</Frame>
          <Frame depth="83">org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:298)</Frame>
          <Frame depth="84">org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:249)</Frame>
          <Frame depth="85">org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:126)</Frame>
          <Frame depth="86">sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)</Frame>
          <Frame depth="87">sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)</Frame>
          <Frame depth="88">sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)</Frame>
          <Frame depth="89">java.lang.reflect.Method.invoke(Method.java:324)</Frame>
          <Frame depth="90">org.eclipse.core.launcher.Main.basicRun(Main.java:269)</Frame>
          <Frame depth="91">org.eclipse.core.launcher.Main.run(Main.java:722)</Frame>
          <Frame depth="92">org.eclipse.core.launcher.Main.main(Main.java:706)</Frame>
        </Frames>
      </Stacktrace>
    </Stacktraces>
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>When creating a new plugin/fragment project WITH a manifest.mf, we set the 
encoding of the manifest.mf to be UTF-8.
This causes the creation of a .settings directory and a core.resources.pref 
file.

When I have such a project in my workspace, I get nthe following stack upon 
startup.


!SESSION May 16, 2004 19:34:40.432 --------------------------------------------
-
eclipse.buildId=unknown
java.version=1.4.2
java.vendor=Sun Microsystems Inc.
BootLoader constants: OS=win32, ARCH=x86, WS=win32, NL=en_US
!ENTRY org.eclipse.core.resources 4 4 May 16, 2004 19:34:40.432
!MESSAGE Exception occurred while saving project 
preferences: /com.example.ui.fragment/.settings/org.eclipse.core.resources.pref
s.
!STACK 1
org.eclipse.core.internal.resources.ResourceException: The resource tree is 
locked for modifications.
	at org.eclipse.core.internal.resources.WorkManager.checkIn
(WorkManager.java:93)
	at org.eclipse.core.internal.resources.Workspace.prepareOperation
(Workspace.java:1629)
	at org.eclipse.core.internal.resources.File.setContents(File.java:329)
	at org.eclipse.core.internal.resources.ProjectPreferences.save
(ProjectPreferences.java:258)
	at org.eclipse.core.internal.preferences.EclipsePreferences.flush
(EclipsePreferences.java:334)
	at org.eclipse.core.internal.preferences.EclipsePreferences.create
(EclipsePreferences.java:291)
	at 
org.eclipse.core.internal.preferences.EclipsePreferences.internalNode
(EclipsePreferences.java:517)
	at org.eclipse.core.internal.preferences.EclipsePreferences.node
(EclipsePreferences.java:647)
	at org.eclipse.core.resources.ProjectScope.getNode
(ProjectScope.java:66)
	at org.eclipse.core.internal.resources.CharsetManager.getPreferences
(CharsetManager.java:161)
	at org.eclipse.core.internal.resources.CharsetManager.access$0
(CharsetManager.java:160)
	at 
org.eclipse.core.internal.resources.CharsetManager$Listener.processEntryChanges
(CharsetManager.java:86)
	at 
org.eclipse.core.internal.resources.CharsetManager$Listener.resourceChanged
(CharsetManager.java:134)
	at org.eclipse.core.internal.events.NotificationManager$2.run
(NotificationManager.java:319)
	at org.eclipse.core.internal.runtime.InternalPlatform.run
(InternalPlatform.java:607)
	at org.eclipse.core.runtime.Platform.run(Platform.java:668)
	at org.eclipse.core.internal.events.NotificationManager.notify
(NotificationManager.java:313)
	at 
org.eclipse.core.internal.events.NotificationManager.broadcastChanges
(NotificationManager.java:156)
	at org.eclipse.core.internal.resources.Workspace.broadcastChanges
(Workspace.java:172)
	at org.eclipse.core.internal.resources.Workspace.endOperation
(Workspace.java:902)
	at org.eclipse.core.internal.resources.Workspace.run
(Workspace.java:1683)
	at org.eclipse.jdt.core.JavaCore.run(JavaCore.java:3232)
	at org.eclipse.jdt.core.JavaCore.setClasspathContainer
(JavaCore.java:3402)
	at org.eclipse.pde.internal.core.ModelEntry.updateClasspathContainer
(ModelEntry.java:109)
	at org.eclipse.pde.internal.core.RequiredPluginsInitializer.initialize
(RequiredPluginsInitializer.java:40)
	at org.eclipse.jdt.internal.core.JavaModelManager.initializeContainer
(JavaModelManager.java:1187)
	at 
org.eclipse.jdt.internal.core.JavaModelManager.initializeAllContainers
(JavaModelManager.java:1161)
	at org.eclipse.jdt.internal.core.JavaModelManager.getClasspathContainer
(JavaModelManager.java:824)
	at org.eclipse.jdt.core.JavaCore.getClasspathContainer
(JavaCore.java:1182)
	at org.eclipse.jdt.internal.core.JavaProject.getResolvedClasspath
(JavaProject.java:1877)
	at org.eclipse.jdt.internal.core.JavaProject.getResolvedClasspath
(JavaProject.java:1788)
	at org.eclipse.jdt.internal.core.JavaProject.getResolvedClasspath
(JavaProject.java:1739)
	at org.eclipse.jdt.internal.core.JavaProject.buildStructure
(JavaProject.java:266)
	at org.eclipse.jdt.internal.core.Openable.generateInfos
(Openable.java:183)
	at org.eclipse.jdt.internal.core.JavaElement.openWhenClosed
(JavaElement.java:573)
	at org.eclipse.jdt.internal.core.JavaElement.getElementInfo
(JavaElement.java:310)
	at org.eclipse.jdt.internal.core.JavaElement.getElementInfo
(JavaElement.java:296)
	at org.eclipse.jdt.internal.core.JavaElement.getChildren
(JavaElement.java:251)
	at org.eclipse.jdt.internal.core.JavaProject.getPackageFragmentRoots
(JavaProject.java:1569)
	at 
org.eclipse.jdt.ui.StandardJavaElementContentProvider.getPackageFragmentRoots
(StandardJavaElementContentProvider.java:250)
	at org.eclipse.jdt.ui.StandardJavaElementContentProvider.getChildren
(StandardJavaElementContentProvider.java:168)
	at 
org.eclipse.jdt.internal.ui.packageview.PackageExplorerContentProvider.getChild
ren(PackageExplorerContentProvider.java:115)
	at 
org.eclipse.jdt.internal.ui.packageview.PackageExplorerPart$5.getFilteredChildr
en(PackageExplorerPart.java:345)
	at org.eclipse.jface.viewers.AbstractTreeViewer.isExpandable
(AbstractTreeViewer.java:1138)
	at org.eclipse.jface.viewers.AbstractTreeViewer.updatePlus
(AbstractTreeViewer.java:1585)
	at org.eclipse.jface.viewers.AbstractTreeViewer.createTreeItem
(AbstractTreeViewer.java:378)
	at org.eclipse.jface.viewers.AbstractTreeViewer$1.run
(AbstractTreeViewer.java:357)
	at org.eclipse.swt.custom.BusyIndicator.showWhile
(BusyIndicator.java:69)
	at org.eclipse.jface.viewers.AbstractTreeViewer.createChildren
(AbstractTreeViewer.java:343)
	at org.eclipse.jface.viewers.AbstractTreeViewer$5.run
(AbstractTreeViewer.java:783)
	at org.eclipse.jface.viewers.StructuredViewer.preservingSelection
(StructuredViewer.java:788)
	at org.eclipse.jface.viewers.AbstractTreeViewer.inputChanged
(AbstractTreeViewer.java:773)
	at org.eclipse.jface.viewers.ContentViewer.setInput
(ContentViewer.java:238)
	at org.eclipse.jface.viewers.StructuredViewer.setInput
(StructuredViewer.java:972)
	at 
org.eclipse.jdt.internal.ui.packageview.PackageExplorerPart.createPartControl
(PackageExplorerPart.java:287)
	at org.eclipse.ui.internal.PartPane$1.run(PartPane.java:93)
	at org.eclipse.core.internal.runtime.InternalPlatform.run
(InternalPlatform.java:607)
	at org.eclipse.core.runtime.Platform.run(Platform.java:668)
	at org.eclipse.ui.internal.PartPane.createChildControl
(PartPane.java:89)
	at org.eclipse.ui.internal.ViewPane.createChildControl
(ViewPane.java:143)
	at org.eclipse.ui.internal.PartPane.createControl(PartPane.java:150)
	at org.eclipse.ui.internal.ViewPane.createControl(ViewPane.java:131)
	at org.eclipse.ui.internal.PartStack.refreshPresentationSelection
(PartStack.java:710)
	at org.eclipse.ui.internal.PartStack.createControl(PartStack.java:315)
	at org.eclipse.ui.internal.ViewStack.createControl(ViewStack.java:99)
	at org.eclipse.ui.internal.PartSashContainer.createControl
(PartSashContainer.java:392)
	at org.eclipse.ui.internal.PerspectiveHelper.activate
(PerspectiveHelper.java:156)
	at org.eclipse.ui.internal.Perspective.onActivate(Perspective.java:718)
	at org.eclipse.ui.internal.WorkbenchPage.onActivate
(WorkbenchPage.java:1974)
	at org.eclipse.ui.internal.WorkbenchWindow$7.run
(WorkbenchWindow.java:1910)
	at org.eclipse.swt.custom.BusyIndicator.showWhile
(BusyIndicator.java:69)
	at org.eclipse.ui.internal.WorkbenchWindow.setActivePage
(WorkbenchWindow.java:1897)
	at org.eclipse.ui.internal.WorkbenchWindow.restoreState
(WorkbenchWindow.java:1465)
	at org.eclipse.ui.internal.Workbench.restoreState(Workbench.java:1206)
	at org.eclipse.ui.internal.Workbench.access$10(Workbench.java:1173)
	at org.eclipse.ui.internal.Workbench$13.run(Workbench.java:1084)
	at org.eclipse.core.internal.runtime.InternalPlatform.run
(InternalPlatform.java:607)
	at org.eclipse.core.runtime.Platform.run(Platform.java:668)
	at org.eclipse.ui.internal.Workbench.restoreState(Workbench.java:1017)
	at org.eclipse.ui.internal.WorkbenchConfigurer.restoreState
(WorkbenchConfigurer.java:167)
	at org.eclipse.ui.application.WorkbenchAdvisor.openWindows
(WorkbenchAdvisor.java:648)
	at org.eclipse.ui.internal.Workbench.init(Workbench.java:807)
	at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1301)
	at org.eclipse.ui.internal.Workbench.createAndRunWorkbench
(Workbench.java:243)
	at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:141)
	at org.eclipse.ui.internal.ide.IDEApplication.run
(IDEApplication.java:90)
	at org.eclipse.core.internal.runtime.PlatformActivator$1.run
(PlatformActivator.java:298)
	at org.eclipse.core.runtime.adaptor.EclipseStarter.run
(EclipseStarter.java:249)
	at org.eclipse.core.runtime.adaptor.EclipseStarter.run
(EclipseStarter.java:126)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke
(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke
(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:324)
	at org.eclipse.core.launcher.Main.basicRun(Main.java:269)
	at org.eclipse.core.launcher.Main.run(Main.java:722)
	at org.eclipse.core.launcher.Main.main(Main.java:706)
!SUBENTRY 1 org.eclipse.core.resources 4 380 May 16, 2004 19:34:40.442
!MESSAGE The resource tree is locked for modifications.
!ENTRY org.eclipse.core.runtime 4 4 May 16, 2004 19:34:40.452
!MESSAGE Exception loading preferences from: D:/Eclipse/UpdatedSource/runtime-
workspace/com.example.ui.fragment/.settings/org.eclipse.core.resources.prefs.
!STACK 0
org.osgi.service.prefs.BackingStoreException: Exception occurred while saving 
project 
preferences: /com.example.ui.fragment/.settings/org.eclipse.core.resources.pref
s.
	at org.eclipse.core.internal.resources.ProjectPreferences.save
(ProjectPreferences.java:274)
	at org.eclipse.core.internal.preferences.EclipsePreferences.flush
(EclipsePreferences.java:334)
	at org.eclipse.core.internal.preferences.EclipsePreferences.create
(EclipsePreferences.java:291)
	at 
org.eclipse.core.internal.preferences.EclipsePreferences.internalNode
(EclipsePreferences.java:517)
	at org.eclipse.core.internal.preferences.EclipsePreferences.node
(EclipsePreferences.java:647)
	at org.eclipse.core.resources.ProjectScope.getNode
(ProjectScope.java:66)
	at org.eclipse.core.internal.resources.CharsetManager.getPreferences
(CharsetManager.java:161)
	at org.eclipse.core.internal.resources.CharsetManager.access$0
(CharsetManager.java:160)
	at 
org.eclipse.core.internal.resources.CharsetManager$Listener.processEntryChanges
(CharsetManager.java:86)
	at 
org.eclipse.core.internal.resources.CharsetManager$Listener.resourceChanged
(CharsetManager.java:134)
	at org.eclipse.core.internal.events.NotificationManager$2.run
(NotificationManager.java:319)
	at org.eclipse.core.internal.runtime.InternalPlatform.run
(InternalPlatform.java:607)
	at org.eclipse.core.runtime.Platform.run(Platform.java:668)
	at org.eclipse.core.internal.events.NotificationManager.notify
(NotificationManager.java:313)
	at 
org.eclipse.core.internal.events.NotificationManager.broadcastChanges
(NotificationManager.java:156)
	at org.eclipse.core.internal.resources.Workspace.broadcastChanges
(Workspace.java:172)
	at org.eclipse.core.internal.resources.Workspace.endOperation
(Workspace.java:902)
	at org.eclipse.core.internal.resources.Workspace.run
(Workspace.java:1683)
	at org.eclipse.jdt.core.JavaCore.run(JavaCore.java:3232)
	at org.eclipse.jdt.core.JavaCore.setClasspathContainer
(JavaCore.java:3402)
	at org.eclipse.pde.internal.core.ModelEntry.updateClasspathContainer
(ModelEntry.java:109)
	at org.eclipse.pde.internal.core.RequiredPluginsInitializer.initialize
(RequiredPluginsInitializer.java:40)
	at org.eclipse.jdt.internal.core.JavaModelManager.initializeContainer
(JavaModelManager.java:1187)
	at 
org.eclipse.jdt.internal.core.JavaModelManager.initializeAllContainers
(JavaModelManager.java:1161)
	at org.eclipse.jdt.internal.core.JavaModelManager.getClasspathContainer
(JavaModelManager.java:824)
	at org.eclipse.jdt.core.JavaCore.getClasspathContainer
(JavaCore.java:1182)
	at org.eclipse.jdt.internal.core.JavaProject.getResolvedClasspath
(JavaProject.java:1877)
	at org.eclipse.jdt.internal.core.JavaProject.getResolvedClasspath
(JavaProject.java:1788)
	at org.eclipse.jdt.internal.core.JavaProject.getResolvedClasspath
(JavaProject.java:1739)
	at org.eclipse.jdt.internal.core.JavaProject.buildStructure
(JavaProject.java:266)
	at org.eclipse.jdt.internal.core.Openable.generateInfos
(Openable.java:183)
	at org.eclipse.jdt.internal.core.JavaElement.openWhenClosed
(JavaElement.java:573)
	at org.eclipse.jdt.internal.core.JavaElement.getElementInfo
(JavaElement.java:310)
	at org.eclipse.jdt.internal.core.JavaElement.getElementInfo
(JavaElement.java:296)
	at org.eclipse.jdt.internal.core.JavaElement.getChildren
(JavaElement.java:251)
	at org.eclipse.jdt.internal.core.JavaProject.getPackageFragmentRoots
(JavaProject.java:1569)
	at 
org.eclipse.jdt.ui.StandardJavaElementContentProvider.getPackageFragmentRoots
(StandardJavaElementContentProvider.java:250)
	at org.eclipse.jdt.ui.StandardJavaElementContentProvider.getChildren
(StandardJavaElementContentProvider.java:168)
	at 
org.eclipse.jdt.internal.ui.packageview.PackageExplorerContentProvider.getChild
ren(PackageExplorerContentProvider.java:115)
	at 
org.eclipse.jdt.internal.ui.packageview.PackageExplorerPart$5.getFilteredChildr
en(PackageExplorerPart.java:345)
	at org.eclipse.jface.viewers.AbstractTreeViewer.isExpandable
(AbstractTreeViewer.java:1138)
	at org.eclipse.jface.viewers.AbstractTreeViewer.updatePlus
(AbstractTreeViewer.java:1585)
	at org.eclipse.jface.viewers.AbstractTreeViewer.createTreeItem
(AbstractTreeViewer.java:378)
	at org.eclipse.jface.viewers.AbstractTreeViewer$1.run
(AbstractTreeViewer.java:357)
	at org.eclipse.swt.custom.BusyIndicator.showWhile
(BusyIndicator.java:69)
	at org.eclipse.jface.viewers.AbstractTreeViewer.createChildren
(AbstractTreeViewer.java:343)
	at org.eclipse.jface.viewers.AbstractTreeViewer$5.run
(AbstractTreeViewer.java:783)
	at org.eclipse.jface.viewers.StructuredViewer.preservingSelection
(StructuredViewer.java:788)
	at org.eclipse.jface.viewers.AbstractTreeViewer.inputChanged
(AbstractTreeViewer.java:773)
	at org.eclipse.jface.viewers.ContentViewer.setInput
(ContentViewer.java:238)
	at org.eclipse.jface.viewers.StructuredViewer.setInput
(StructuredViewer.java:972)
	at 
org.eclipse.jdt.internal.ui.packageview.PackageExplorerPart.createPartControl
(PackageExplorerPart.java:287)
	at org.eclipse.ui.internal.PartPane$1.run(PartPane.java:93)
	at org.eclipse.core.internal.runtime.InternalPlatform.run
(InternalPlatform.java:607)
	at org.eclipse.core.runtime.Platform.run(Platform.java:668)
	at org.eclipse.ui.internal.PartPane.createChildControl
(PartPane.java:89)
	at org.eclipse.ui.internal.ViewPane.createChildControl
(ViewPane.java:143)
	at org.eclipse.ui.internal.PartPane.createControl(PartPane.java:150)
	at org.eclipse.ui.internal.ViewPane.createControl(ViewPane.java:131)
	at org.eclipse.ui.internal.PartStack.refreshPresentationSelection
(PartStack.java:710)
	at org.eclipse.ui.internal.PartStack.createControl(PartStack.java:315)
	at org.eclipse.ui.internal.ViewStack.createControl(ViewStack.java:99)
	at org.eclipse.ui.internal.PartSashContainer.createControl
(PartSashContainer.java:392)
	at org.eclipse.ui.internal.PerspectiveHelper.activate
(PerspectiveHelper.java:156)
	at org.eclipse.ui.internal.Perspective.onActivate(Perspective.java:718)
	at org.eclipse.ui.internal.WorkbenchPage.onActivate
(WorkbenchPage.java:1974)
	at org.eclipse.ui.internal.WorkbenchWindow$7.run
(WorkbenchWindow.java:1910)
	at org.eclipse.swt.custom.BusyIndicator.showWhile
(BusyIndicator.java:69)
	at org.eclipse.ui.internal.WorkbenchWindow.setActivePage
(WorkbenchWindow.java:1897)
	at org.eclipse.ui.internal.WorkbenchWindow.restoreState
(WorkbenchWindow.java:1465)
	at org.eclipse.ui.internal.Workbench.restoreState(Workbench.java:1206)
	at org.eclipse.ui.internal.Workbench.access$10(Workbench.java:1173)
	at org.eclipse.ui.internal.Workbench$13.run(Workbench.java:1084)
	at org.eclipse.core.internal.runtime.InternalPlatform.run
(InternalPlatform.java:607)
	at org.eclipse.core.runtime.Platform.run(Platform.java:668)
	at org.eclipse.ui.internal.Workbench.restoreState(Workbench.java:1017)
	at org.eclipse.ui.internal.WorkbenchConfigurer.restoreState
(WorkbenchConfigurer.java:167)
	at org.eclipse.ui.application.WorkbenchAdvisor.openWindows
(WorkbenchAdvisor.java:648)
	at org.eclipse.ui.internal.Workbench.init(Workbench.java:807)
	at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1301)
	at org.eclipse.ui.internal.Workbench.createAndRunWorkbench
(Workbench.java:243)
	at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:141)
	at org.eclipse.ui.internal.ide.IDEApplication.run
(IDEApplication.java:90)
	at org.eclipse.core.internal.runtime.PlatformActivator$1.run
(PlatformActivator.java:298)
	at org.eclipse.core.runtime.adaptor.EclipseStarter.run
(EclipseStarter.java:249)
	at org.eclipse.core.runtime.adaptor.EclipseStarter.run
(EclipseStarter.java:126)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke
(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke
(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:324)
	at org.eclipse.core.launcher.Main.basicRun(Main.java:269)
	at org.eclipse.core.launcher.Main.run(Main.java:722)
	at org.eclipse.core.launcher.Main.main(Main.java:706)
What build? Potential dup of bug 61843
Using I-20040514-0800
Trouble-maker.
Phew. My fix for bug 61843 isn't in build i0514-0800. I think that the fix
should fix this problem too. We'll try to reproduce this problem once we get a
build today.
This works ok for me with the i0514-1219 build.
Closing.
oops....I meant i0517-1219</WithStack>
    <WithOutStack>When creating a new plugin/fragment project WITH a manifest.mf, we set the 
encoding of the manifest.mf to be UTF-8.
This causes the creation of a .settings directory and a core.resources.pref 
file.

When I have such a project in my workspace, I get nthe following stack upon 
startup.


!SESSION May 16, 2004 19:34:40.432 --------------------------------------------
-
eclipse.buildId=unknown
java.version=1.4.2
java.vendor=Sun Microsystems Inc.
BootLoader constants: OS=win32, ARCH=x86, WS=win32, NL=en_US
!ENTRY org.eclipse.core.resources 4 4 May 16, 2004 19:34:40.432
!MESSAGE Exception occurred while saving project 
preferences: /com.example.ui.fragment/.settings/org.eclipse.core.resources.pref
s.
!STACK 1
!SUBENTRY 1 org.eclipse.core.resources 4 380 May 16, 2004 19:34:40.442
!MESSAGE The resource tree is locked for modifications.
!ENTRY org.eclipse.core.runtime 4 4 May 16, 2004 19:34:40.452
!MESSAGE Exception loading preferences from: D:/Eclipse/UpdatedSource/runtime-
workspace/com.example.ui.fragment/.settings/org.eclipse.core.resources.prefs.
!STACK 0

What build? Potential dup of bug 61843
Using I-20040514-0800
Trouble-maker.
Phew. My fix for bug 61843 isn't in build i0514-0800. I think that the fix
should fix this problem too. We'll try to reproduce this problem once we get a
build today.
This works ok for me with the i0514-1219 build.
Closing.
oops....I meant i0517-1219</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="62431" />
    <CreationDate amount="2004-05-16 21:11:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="SWT" />
    <Version amount="3.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="enhancement" />
    <Summery>[Widgets] Need public API to control IME</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="2">
      <source_code type="functioncall">
        <location start="3340" end="3403" />
        <code>IS_GTK || IS_CARBON || BidiUtil.isBidiPlatform() || isMirrored;</code>
      </source_code>
      <source_code type="functioncall">
        <location start="4558" end="4623" />
        <code>&gt; IS_GTK || IS_CARBON || BidiUtil.isBidiPlatform() || isMirrored;</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="12">
      <Enumeration lines="90">
        <Lines>
          <Line>E.g.:</Line>
          <Line />
          <Line>- isBidiPlatform(BIDI_KEYBOARD)</Line>
          <Line>- isBidiPlatform(BIDI_LOCALE)</Line>
          <Line>- isBidiPlatform(BIDI_MIRROR)</Line>
          <Line>- isBidiPlatform(BIDI_REORDER) - will need a (stock) font</Line>
          <Line>- isBidiPlatform(BIDI_SHAPE) - ditto</Line>
          <Line />
          <Line>- isBidiPlatform(BIDI_REORDER | BIDI_SHAPE | BIDI_MIRROR),</Line>
          <Line>- etc.</Line>
          <Line />
          <Line>Of course that would turn it into non-IME-specific method (and maybe even not SWT-specific one ;-) ).</Line>
          <Line />
          <Line />
          <Line />
          <Line />
          <Line>(In reply to comment #14)</Line>
          <Line>&gt;</Line>
          <Line>&gt; Maybe this could be used to enable bidi segments listener of StyledText. Right</Line>
          <Line>&gt; now it runs when this is true:</Line>
          <Line />
          <Line>&gt;</Line>
          <Line />
          <Line>I think Bidi segments should get enabled when basic text reordering occurs (i.e. isBidiPlatform(BIDI_REORDER) is satisfied - but of course regardless of the fact if provided by that API or not).</Line>
          <Line>I used another method for its detection, and can reference it here if necessary.</Line>
          <Line />
          <Line>*** Bug 233898 has been marked as a duplicate of this bug. ***</Line>
          <Line>*** Bug 238004 has been marked as a duplicate of this bug. ***</Line>
          <Line>Created attachment 105828</Line>
          <Line>Example of setting and getting keyboard language on *nix via XKB</Line>
          <Line />
          <Line>A very rough prototype of how set/getKeyboardLanguage could be implemented in gtk using X Keyboard Extension.</Line>
          <Line />
          <Line>There are not few issues/concerns/questions around, which I'll try to summarize tomorrow.</Line>
          <Line>____________</Line>
          <Line />
          <Line>To compile:</Line>
          <Line>gcc -lX11 -L/usr/lib -I/usr/include -o kbdtest kbdtest.c</Line>
          <Line />
          <Line>Usage:</Line>
          <Line>kbdtest [OPTION] [LANG]</Line>
          <Line>OPTION:</Line>
          <Line>-c      default: clean up (for now sets English with Arabic and Hebrew</Line>
          <Line>enabled as well)</Line>
          <Line>-g      get keyboard language\n");</Line>
          <Line>-s      set keyboard language\n");</Line>
          <Line>--help  print this help\n");</Line>
          <Line>LANG:</Line>
          <Line>language ID</Line>
          <Line />
          <Line>Example: kbdtest -g (query current language)</Line>
          <Line>kbdtest  -s il (set Hebrew)</Line>
          <Line>kbdtest  -s ara (set Arabic)</Line>
          <Line>kbdtest  -c  (clean)</Line>
          <Line>Created attachment 105877</Line>
          <Line>Example of set/get keyboard language on *nix via XKB</Line>
          <Line />
          <Line>Sorry: there was seemingly a weird problem compiling strcat calls, so the example used workarounds. The problem was elsewhere. I resubmit the example with some corrections.</Line>
          <Line>Created attachment 105878</Line>
          <Line>Example of set/get keyboard language on *nix via XKB</Line>
          <Line />
          <Line>Sorry: there was seemingly a weird problem compiling strcat calls, so the example used workarounds. The problem was elsewhere. I resubmit the example with some corrections.</Line>
          <Line>GTK doesn't provide sufficient (in the context of this bug) API to interoperate with IM. Thus for the moment I do not see an alternative to making direct X11 API calls. Among other things, that would require introducing quite a considerable amount of new SWT natives (apparently invoked through dynamic lazy loading).</Line>
          <Line>Felipe, can you please indicate if you see any problem with that?</Line>
          <Line />
          <Line>For isBidiPlatform() solely (in its current interpretation), we'll only need 2 gtk functions:</Line>
          <Line>(1) gdk_keymap_get_direction</Line>
          <Line>(2) gdk_keymap_have_bidi_layouts</Line>
          <Line />
          <Line>We will first call (1). If it returns RTL, the keyboard is doubtlessly Bidi-enabled. Otherwise, we will also call (2) and just get to clients whatever it returns. (Lone (2) seems insufficient, since it indicates |False| for any unidirectional set of languages, including RTL ones).</Line>
          <Line />
          <Line>Okay, It has been years since the last time I worked on GTK.</Line>
          <Line>I wrote a bunch of XKB code (similar to Lina's) that got mostly of the APIs working.</Line>
          <Line>Where it failed bad was in the integration with other desktop applications, mainly the GNOME and KDE applets for switching keyboard layout.</Line>
          <Line />
          <Line>Here an example for getKeyboardLanguageList()</Line>
          <Line />
          <Line>This list can be store in XKB and it can be retrieve using XKB calls. But the GNOME applet doesn't keep the list of layout in XKB, it has its own list. the KDE does the same thing.</Line>
          <Line />
          <Line>Mostly users don't use XKB directly, they use the applet. So writting code that works for XKB but doesn't work with the applets will not fix the bug for mostly users.</Line>
          <Line />
          <Line>setKeyboardLanguage() is even worse. It changes the layout 'behind the scenes' cause the applet to be out of sync (e.i the applet shows EN but the keyboard is really in IL).</Line>
          <Line />
          <Line />
          <Line>Note: gdk_keymap_have_bidi_layouts () says: Since 2.12</Line>
          <Line>That is pretty new API.</Line>
          <Line />
          <Line>Note: This conclusion were made back a while ago. We need to find out if:</Line>
          <Line>(a) those applets have changed to better integrate with other XKB applications</Line>
          <Line>(b) their offer API we can use</Line>
        </Lines>
      </Enumeration>
      <Enumeration lines="5">
        <Lines>
          <Line>1. globalOrientationChanged() - (Listener event), Global Orientation is important too, we need to be aware of it, and not have to the current lang on a timely basis, or every time we need to write a character. in windows GO changes when you  hit CTRL + LEFT/Right shift (Just as an example, on a BIDI keyborad)</Line>
          <Line />
          <Line>2. isLangRTL(Lang lang) - Again, need to have a central place/API to ask if the lang should be treated as RTL or LTR</Line>
          <Line />
          <Line>3. isKeyboardSelectedLangRTL() - Simplification, to check the current selected lang if it is RTL/LTR</Line>
        </Lines>
      </Enumeration>
      <Enumeration lines="2">
        <Lines>
          <Line>(1) gdk_keymap_get_direction</Line>
          <Line>(2) gdk_keymap_have_bidi_layouts</Line>
        </Lines>
      </Enumeration>
      <Enumeration lines="6">
        <Lines>
          <Line>(1) Tries to use DCOP first:</Line>
          <Line>- runs dcop command (this could be also done through C++ calls or Java - via Runtime#exec()),</Line>
          <Line>- streams the output to a file,</Line>
          <Line>- reads the file content into returned memory block.</Line>
          <Line />
          <Line>(2) If nothing got streamed out, it invokes XKB functions, like those we used in the past.</Line>
        </Lines>
      </Enumeration>
      <Enumeration lines="4">
        <Lines>
          <Line>1- I really don't like the idea of new library (swt-ime)</Line>
          <Line>2- We should use D-Bus (dcop is becoming deprecated, see KDE 4)</Line>
          <Line>3- I guess it should be okay to include X11/XKBlib.h (if we make all calls dynamic we prop won't need to include anything)</Line>
          <Line>4- I think we will have legal problems to include kde/kapplication.h</Line>
        </Lines>
      </Enumeration>
      <Enumeration lines="17">
        <Lines>
          <Line>- isBidiPlatform()</Line>
          <Line>- addLanguageListener()</Line>
          <Line>- removeLanguageListener()</Line>
          <Line>- getKeyboardLanguage()</Line>
          <Line>- getKeyboardLanguageList()</Line>
          <Line>- setKeyboardLanguage()</Line>
          <Line>We tried to get rid of BidiUtil for 3.0 but ran out of time.  FH, is there</Line>
          <Line>already a bug report for this?</Line>
          <Line>NOTE.  Some of us out there use BidiUtil - although internal, it was the only</Line>
          <Line>way to implement bidi functions, and was used as per Eclipse's own</Line>
          <Line>recommendation.  Should not eliminate it (when the time comes), but just</Line>
          <Line>deprecate it for a while!!</Line>
          <Line>*** Bug 85953 has been marked as a duplicate of this bug. ***</Line>
          <Line>*** Bug 74783 has been marked as a duplicate of this bug. ***</Line>
          <Line>Please consider for Ganymede</Line>
          <Line>*** Bug 156052 has been marked as a duplicate of this bug. ***</Line>
          <Line>Bug 156052 has a few more suggestions for API.</Line>
        </Lines>
      </Enumeration>
      <Enumeration lines="5">
        <Lines>
          <Line>- isBidiPlatform(BIDI_KEYBOARD)</Line>
          <Line>- isBidiPlatform(BIDI_LOCALE)</Line>
          <Line>- isBidiPlatform(BIDI_MIRROR)</Line>
          <Line>- isBidiPlatform(BIDI_REORDER) - will need a (stock) font</Line>
          <Line>- isBidiPlatform(BIDI_SHAPE) - ditto</Line>
        </Lines>
      </Enumeration>
      <Enumeration lines="2">
        <Lines>
          <Line>- isBidiPlatform(BIDI_REORDER | BIDI_SHAPE | BIDI_MIRROR),</Line>
          <Line>- etc.</Line>
        </Lines>
      </Enumeration>
      <Enumeration lines="3">
        <Lines>
          <Line>- setLayout(QString)</Line>
          <Line>- QString getCurrentLayout()</Line>
          <Line>- QStringList getLayoutList()</Line>
        </Lines>
      </Enumeration>
      <Enumeration lines="3">
        <Lines>
          <Line>- runs dcop command (this could be also done through C++ calls or Java - via Runtime#exec()),</Line>
          <Line>- streams the output to a file,</Line>
          <Line>- reads the file content into returned memory block.</Line>
        </Lines>
      </Enumeration>
      <Enumeration lines="3">
        <Lines>
          <Line>- Fedora 9 (http://distrowatch.com/table.php?distribution=fedora)</Line>
          <Line>- OpenSuSE 11 (http://distrowatch.com/table.php?distribution=suse)</Line>
          <Line>- Ubuntu X (?) (http://distrowatch.com/table.php?distribution=ubuntu)</Line>
        </Lines>
      </Enumeration>
      <Enumeration lines="6">
        <Lines>
          <Line>- Debian (http://distrowatch.com/table.php?distribution=debian)</Line>
          <Line>- Gentoo (http://distrowatch.com/table.php?distribution=gentoo)</Line>
          <Line>- Mandriva (http://distrowatch.com/table.php?distribution=mandriva)</Line>
          <Line>- RHEL (http://distrowatch.com/table.php?distribution=redhat)</Line>
          <Line>- Slackware (http://distrowatch.com/table.php?distribution=slackware)</Line>
          <Line>- Turbolinux (http://distrowatch.com/table.php?distribution=turbolinux)</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="NEW" />
    <resolution amount="" />
    <WithStack>This problem has been separated from Bugzilla39881.

We need public APIs to control IME.  BidiUtil class has the following APIs but 
the class currently exists in an internal package.  This must be exposed to 
public.

- isBidiPlatform()
- addLanguageListener()
- removeLanguageListener()
- getKeyboardLanguage()
- getKeyboardLanguageList()
- setKeyboardLanguage()
We tried to get rid of BidiUtil for 3.0 but ran out of time.  FH, is there 
already a bug report for this?
NOTE.  Some of us out there use BidiUtil - although internal, it was the only
way to implement bidi functions, and was used as per Eclipse's own
recommendation.  Should not eliminate it (when the time comes), but just
deprecate it for a while!!
*** Bug 85953 has been marked as a duplicate of this bug. ***
*** Bug 74783 has been marked as a duplicate of this bug. ***
Please consider for Ganymede
*** Bug 156052 has been marked as a duplicate of this bug. ***
Bug 156052 has a few more suggestions for API.

I think we need some more APIs in order to get a better BIDI ecperience for the users.

I propose to add these methods, to the API:

1. globalOrientationChanged() - (Listener event), Global Orientation is important too, we need to be aware of it, and not have to the current lang on a timely basis, or every time we need to write a character. in windows GO changes when you  hit CTRL + LEFT/Right shift (Just as an example, on a BIDI keyborad)

2. isLangRTL(Lang lang) - Again, need to have a central place/API to ask if the lang should be treated as RTL or LTR 

3. isKeyboardSelectedLangRTL() - Simplification, to check the current selected lang if it is RTL/LTR

156052 was closed out as DUP of this one. Any plans to fix it in 3.4?


(In reply to comment #9)
&gt; 156052 was closed out as DUP of this one. Any plans to fix it in 3.4?

Sorry, we are past the API freeze.
I know GTK doesn't API for this, we could by pass GTK and call XKB directly but that would cause integration problems with another apps in the desktop. It would not work well.
In Carbon I don't know what they have.
In Windows I believe we can implement all the APIs requested.

&gt;BidiUtil#isBidiPlatform()
Would be good enough for me. Currently this blocks me from fixing the BIDI bug 54942.
&gt;BidiUtil#isBidiPlatform()

As far as I remember, "isBidiPlatform" was decided based on availability of a Bidi input locale / keyboard layout. Is it still okay?

(I think clients rather expect querying of the native rendering Bidi capabilities.)

And there could be yet another method to detect the presence of RTL keyboard language (e.g. required for bug 54942).
(In reply to comment #12)
&gt; &gt;BidiUtil#isBidiPlatform()
&gt; As far as I remember, "isBidiPlatform" was decided based on availability of a
&gt; Bidi input locale / keyboard layout. Is it still okay?

Yes, that is StyledText policy to enable bidi caret. I don't think we can change this.

&gt; (I think clients rather expect querying of the native rendering Bidi
&gt; capabilities.)

What does "native rendering Bidi capabilities" mean ?
On windows, WINVER &gt; 4.10 supports mirroring. Bidi text rendering has being around for a long time.
Maybe this what you are looking for:
http://blogs.msdn.com/michkap/archive/2006/03/03/542963.aspx

Maybe this could be used to enable bidi segments listener of StyledText. Right now it runs when this is true:
IS_GTK || IS_CARBON || BidiUtil.isBidiPlatform() || isMirrored;


(In reply to comment #12)
&gt; What does "native rendering Bidi capabilities" mean ?

Actually I meant any characteristic that would affect our decision to enable Bidi support in application or the toolkit itself.

I think the notion "Bidi platform" is usually associated with the *text* reordering capabilities.
But it's hardly possible to work out a single universal criteria which covers the entire variety of client needs and the respective "native capabilities".
Fortunately, the latter is rather limited, and can likely be addressed well...

Perhaps |isBidiPlatform| can be parameterized to get notified of the Bidi aspect(s) to look at?
E.g.:

- isBidiPlatform(BIDI_KEYBOARD)
- isBidiPlatform(BIDI_LOCALE)
- isBidiPlatform(BIDI_MIRROR)
- isBidiPlatform(BIDI_REORDER) - will need a (stock) font
- isBidiPlatform(BIDI_SHAPE) - ditto

- isBidiPlatform(BIDI_REORDER | BIDI_SHAPE | BIDI_MIRROR),
- etc.

Of course that would turn it into non-IME-specific method (and maybe even not SWT-specific one ;-) ).




(In reply to comment #14)
&gt; 
&gt; Maybe this could be used to enable bidi segments listener of StyledText. Right
&gt; now it runs when this is true:
&gt; IS_GTK || IS_CARBON || BidiUtil.isBidiPlatform() || isMirrored;
&gt; 

I think Bidi segments should get enabled when basic text reordering occurs (i.e. isBidiPlatform(BIDI_REORDER) is satisfied - but of course regardless of the fact if provided by that API or not).
I used another method for its detection, and can reference it here if necessary.

*** Bug 233898 has been marked as a duplicate of this bug. ***
*** Bug 238004 has been marked as a duplicate of this bug. ***
Created attachment 105828
Example of setting and getting keyboard language on *nix via XKB

A very rough prototype of how set/getKeyboardLanguage could be implemented in gtk using X Keyboard Extension.

There are not few issues/concerns/questions around, which I'll try to summarize tomorrow.
____________

To compile:
gcc -lX11 -L/usr/lib -I/usr/include -o kbdtest kbdtest.c

Usage:
  kbdtest [OPTION] [LANG]
    OPTION:
      -c      default: clean up (for now sets English with Arabic and Hebrew
              enabled as well)
      -g      get keyboard language\n");
      -s      set keyboard language\n");
      --help  print this help\n");
    LANG:
      language ID

Example: kbdtest -g (query current language)
         kbdtest  -s il (set Hebrew)
         kbdtest  -s ara (set Arabic)
         kbdtest  -c  (clean)
Created attachment 105877
Example of set/get keyboard language on *nix via XKB

Sorry: there was seemingly a weird problem compiling strcat calls, so the example used workarounds. The problem was elsewhere. I resubmit the example with some corrections.
Created attachment 105878
Example of set/get keyboard language on *nix via XKB

Sorry: there was seemingly a weird problem compiling strcat calls, so the example used workarounds. The problem was elsewhere. I resubmit the example with some corrections.
GTK doesn't provide sufficient (in the context of this bug) API to interoperate with IM. Thus for the moment I do not see an alternative to making direct X11 API calls. Among other things, that would require introducing quite a considerable amount of new SWT natives (apparently invoked through dynamic lazy loading).
Felipe, can you please indicate if you see any problem with that?

For isBidiPlatform() solely (in its current interpretation), we'll only need 2 gtk functions:
  (1) gdk_keymap_get_direction
  (2) gdk_keymap_have_bidi_layouts

We will first call (1). If it returns RTL, the keyboard is doubtlessly Bidi-enabled. Otherwise, we will also call (2) and just get to clients whatever it returns. (Lone (2) seems insufficient, since it indicates |False| for any unidirectional set of languages, including RTL ones).

Okay, It has been years since the last time I worked on GTK.
I wrote a bunch of XKB code (similar to Lina's) that got mostly of the APIs working.
Where it failed bad was in the integration with other desktop applications, mainly the GNOME and KDE applets for switching keyboard layout.

Here an example for getKeyboardLanguageList()

This list can be store in XKB and it can be retrieve using XKB calls. But the GNOME applet doesn't keep the list of layout in XKB, it has its own list. the KDE does the same thing.

Mostly users don't use XKB directly, they use the applet. So writting code that works for XKB but doesn't work with the applets will not fix the bug for mostly users.

setKeyboardLanguage() is even worse. It changes the layout 'behind the scenes' cause the applet to be out of sync (e.i the applet shows EN but the keyboard is really in IL).


Note: gdk_keymap_have_bidi_layouts () says: Since 2.12 
That is pretty new API.

Note: This conclusion were made back a while ago. We need to find out if:
(a) those applets have changed to better integrate with other XKB applications
(b) their offer API we can use

Interoperability with keyboard switching tools is one of the major issues I also have in mind.

KDE. Commonly used switcher - kxkb - can be manipulated via DCOP interfaces (not XKB directly). kxkb provides the following API critical to us ('$ dcop kxkb kxkb'):

  - setLayout(QString)
  - QString getCurrentLayout()
  - QStringList getLayoutList()

These seem to work fine, e.g. '$dcop kxkb kxkb setLayout il' not only loads Hebrew keyboard mapping, but also makes the applet icon change accordingly.

GNOME. Its keymap switcher ('gswitchit', I think) seems to be listening for keymap events and was reacting adequately during the testing.

I have also written and run in GNOME tests using libxklavier library:
http://xlibs.freedesktop.org/xkbdesc/doc/

Libxklavier wraps around XKB, providing higher-level APIs for keyboard manipulation. Perhaps using it is preferable to making direct XKB calls. As far as I understand, it ships at least with all those Linux distributions that offer gswitchit, consuming this library.

Of course, there can be more tools whose behavior is unpredictable. In particular, as far as I know, for languages actually using IME (e.g. Chinese, Japanese, Korean) there are other, dedicated tools.

I am currently trying to get more information on those other tools. I think we should only address broadly used ones.

I did some research on linux today.

Gnome switcher:

Gnome switcher 'gswitchit' (http://gswitchit.sourceforge.net/) now is part of the gnome-applets, I couldn't find a homepage for it but you can get the code at gnome SVN: http://developer.gnome.org/tools/svn.html

LibXklavier
http://www.freedesktop.org/wiki/Software/LibXklavier

I'm not sure if I would like add a dependency on this library. I'm okay if we only work on XFree86.

D-Bus
http://www.freedesktop.org/wiki/Software/dbus
http://en.wikipedia.org/wiki/D-Bus
http://library.gnome.org/devel/dbus-glib/unstable/index.html

According to what I read this is the right technology to use for communication between process. in our case, eclipse-gswitchit and eclipse-kxkb.
KDE 4 has replaced DCOP with D-BUS and GNOME is also uses D-BUS.

We need to find out if gswitchit and kxkb use D-Bus.
Back from vacation...
_________________

There was also a private communication thread, which, by mutual agreement of the sides and after a minor clean up, I'm posting here.
_________________

Lina on Jul 10:

Basically, get/setKeyboardLanguage and getKeyboardLanguageList seem to work for me with GNOME (gswitchit) and KDE (kxkb) applets.

I tried various methods. I am still not sure which one is preferable.

Attached is my last version of getKeyboardLanguageList. I included one API only to provide just high view of the changes. Please do not do a thorough review. There are quite many TODOs yet, and it doesn't worth putting any significant time and effort. Please can you just let me know your overall impression of the strategy.

Bulk of code is native. Each native function is "custom", including series of actual native calls.

E.g. the native for getKeyboardLanguageList is doing the following:

(1) Tries to use DCOP first:
  - runs dcop command (this could be also done through C++ calls or Java - via Runtime#exec()),
  - streams the output to a file,
  - reads the file content into returned memory block.

(2) If nothing got streamed out, it invokes XKB functions, like those we used in the past.

The return values of (1) and (2) are currently in mismatching formats (short vs. long layout names). Should we sync this with win32? What data type win32's getKeyboardLanguageList counterpart will return? an integer array?

As for the Java changes, I intended to create a new class, named say IMEUtil or KeyboardUtil, but was not sure about the name. This doesn't seem a real issue though.
For the time being, the changes are added to the old BidiUtil.
_________________

Felipe on Jul 14:

I read the code (didn't compile it, didn't run it, just read it).

Here my thoughts:

1- I really don't like the idea of new library (swt-ime)
2- We should use D-Bus (dcop is becoming deprecated, see KDE 4)
3- I guess it should be okay to include X11/XKBlib.h (if we make all calls dynamic we prop won't need to include anything)
4- I think we will have legal problems to include kde/kapplication.h

Created attachment 107886
IME API attempt #1

Experimental code referenced in comment 27.
(kde/kapplication.h related part is removed for legal reasons, as per Felipe's comments.)
Felipe, regarding using D-Bus in KDE (and possibly GNOME):

It looks like KDE 4 has not yet been adopted by many Linux distributions.

Examples of distros that ship KDE 4 are:
  - Fedora 9 (http://distrowatch.com/table.php?distribution=fedora)
  - OpenSuSE 11 (http://distrowatch.com/table.php?distribution=suse)
  - Ubuntu X (?) (http://distrowatch.com/table.php?distribution=ubuntu)

Examples of distros that do NOT ship KDE 4 are:
  - Debian (http://distrowatch.com/table.php?distribution=debian)
  - Gentoo (http://distrowatch.com/table.php?distribution=gentoo)
  - Mandriva (http://distrowatch.com/table.php?distribution=mandriva)
  - RHEL (http://distrowatch.com/table.php?distribution=redhat)
  - Slackware (http://distrowatch.com/table.php?distribution=slackware)
  - Turbolinux (http://distrowatch.com/table.php?distribution=turbolinux)

So it may be too early to rely on D-Bus (or exclusively on D-Bus). For the intermediate future at least, it seems we need to have a DCOP-based solution available.</WithStack>
    <WithOutStack>This problem has been separated from Bugzilla39881.

We need public APIs to control IME.  BidiUtil class has the following APIs but 
the class currently exists in an internal package.  This must be exposed to 
public.

- isBidiPlatform()
- addLanguageListener()
- removeLanguageListener()
- getKeyboardLanguage()
- getKeyboardLanguageList()
- setKeyboardLanguage()
We tried to get rid of BidiUtil for 3.0 but ran out of time.  FH, is there 
already a bug report for this?
NOTE.  Some of us out there use BidiUtil - although internal, it was the only
way to implement bidi functions, and was used as per Eclipse's own
recommendation.  Should not eliminate it (when the time comes), but just
deprecate it for a while!!
*** Bug 85953 has been marked as a duplicate of this bug. ***
*** Bug 74783 has been marked as a duplicate of this bug. ***
Please consider for Ganymede
*** Bug 156052 has been marked as a duplicate of this bug. ***
Bug 156052 has a few more suggestions for API.

I think we need some more APIs in order to get a better BIDI ecperience for the users.

I propose to add these methods, to the API:

1. globalOrientationChanged() - (Listener event), Global Orientation is important too, we need to be aware of it, and not have to the current lang on a timely basis, or every time we need to write a character. in windows GO changes when you  hit CTRL + LEFT/Right shift (Just as an example, on a BIDI keyborad)

2. isLangRTL(Lang lang) - Again, need to have a central place/API to ask if the lang should be treated as RTL or LTR 

3. isKeyboardSelectedLangRTL() - Simplification, to check the current selected lang if it is RTL/LTR

156052 was closed out as DUP of this one. Any plans to fix it in 3.4?


(In reply to comment #9)
&gt; 156052 was closed out as DUP of this one. Any plans to fix it in 3.4?

Sorry, we are past the API freeze.
I know GTK doesn't API for this, we could by pass GTK and call XKB directly but that would cause integration problems with another apps in the desktop. It would not work well.
In Carbon I don't know what they have.
In Windows I believe we can implement all the APIs requested.

&gt;BidiUtil#isBidiPlatform()
Would be good enough for me. Currently this blocks me from fixing the BIDI bug 54942.
&gt;BidiUtil#isBidiPlatform()

As far as I remember, "isBidiPlatform" was decided based on availability of a Bidi input locale / keyboard layout. Is it still okay?

(I think clients rather expect querying of the native rendering Bidi capabilities.)

And there could be yet another method to detect the presence of RTL keyboard language (e.g. required for bug 54942).
(In reply to comment #12)
&gt; &gt;BidiUtil#isBidiPlatform()
&gt; As far as I remember, "isBidiPlatform" was decided based on availability of a
&gt; Bidi input locale / keyboard layout. Is it still okay?

Yes, that is StyledText policy to enable bidi caret. I don't think we can change this.

&gt; (I think clients rather expect querying of the native rendering Bidi
&gt; capabilities.)

What does "native rendering Bidi capabilities" mean ?
On windows, WINVER &gt; 4.10 supports mirroring. Bidi text rendering has being around for a long time.
Maybe this what you are looking for:
http://blogs.msdn.com/michkap/archive/2006/03/03/542963.aspx

Maybe this could be used to enable bidi segments listener of StyledText. Right now it runs when this is true:
IS_GTK || IS_CARBON || BidiUtil.isBidiPlatform() || isMirrored;


(In reply to comment #12)
&gt; What does "native rendering Bidi capabilities" mean ?

Actually I meant any characteristic that would affect our decision to enable Bidi support in application or the toolkit itself.

I think the notion "Bidi platform" is usually associated with the *text* reordering capabilities.
But it's hardly possible to work out a single universal criteria which covers the entire variety of client needs and the respective "native capabilities".
Fortunately, the latter is rather limited, and can likely be addressed well...

Perhaps |isBidiPlatform| can be parameterized to get notified of the Bidi aspect(s) to look at?
E.g.:

- isBidiPlatform(BIDI_KEYBOARD)
- isBidiPlatform(BIDI_LOCALE)
- isBidiPlatform(BIDI_MIRROR)
- isBidiPlatform(BIDI_REORDER) - will need a (stock) font
- isBidiPlatform(BIDI_SHAPE) - ditto

- isBidiPlatform(BIDI_REORDER | BIDI_SHAPE | BIDI_MIRROR),
- etc.

Of course that would turn it into non-IME-specific method (and maybe even not SWT-specific one ;-) ).




(In reply to comment #14)
&gt; 
&gt; Maybe this could be used to enable bidi segments listener of StyledText. Right
&gt; now it runs when this is true:
&gt; IS_GTK || IS_CARBON || BidiUtil.isBidiPlatform() || isMirrored;
&gt; 

I think Bidi segments should get enabled when basic text reordering occurs (i.e. isBidiPlatform(BIDI_REORDER) is satisfied - but of course regardless of the fact if provided by that API or not).
I used another method for its detection, and can reference it here if necessary.

*** Bug 233898 has been marked as a duplicate of this bug. ***
*** Bug 238004 has been marked as a duplicate of this bug. ***
Created attachment 105828
Example of setting and getting keyboard language on *nix via XKB

A very rough prototype of how set/getKeyboardLanguage could be implemented in gtk using X Keyboard Extension.

There are not few issues/concerns/questions around, which I'll try to summarize tomorrow.
____________

To compile:
gcc -lX11 -L/usr/lib -I/usr/include -o kbdtest kbdtest.c

Usage:
  kbdtest [OPTION] [LANG]
    OPTION:
      -c      default: clean up (for now sets English with Arabic and Hebrew
              enabled as well)
      -g      get keyboard language\n");
      -s      set keyboard language\n");
      --help  print this help\n");
    LANG:
      language ID

Example: kbdtest -g (query current language)
         kbdtest  -s il (set Hebrew)
         kbdtest  -s ara (set Arabic)
         kbdtest  -c  (clean)
Created attachment 105877
Example of set/get keyboard language on *nix via XKB

Sorry: there was seemingly a weird problem compiling strcat calls, so the example used workarounds. The problem was elsewhere. I resubmit the example with some corrections.
Created attachment 105878
Example of set/get keyboard language on *nix via XKB

Sorry: there was seemingly a weird problem compiling strcat calls, so the example used workarounds. The problem was elsewhere. I resubmit the example with some corrections.
GTK doesn't provide sufficient (in the context of this bug) API to interoperate with IM. Thus for the moment I do not see an alternative to making direct X11 API calls. Among other things, that would require introducing quite a considerable amount of new SWT natives (apparently invoked through dynamic lazy loading).
Felipe, can you please indicate if you see any problem with that?

For isBidiPlatform() solely (in its current interpretation), we'll only need 2 gtk functions:
  (1) gdk_keymap_get_direction
  (2) gdk_keymap_have_bidi_layouts

We will first call (1). If it returns RTL, the keyboard is doubtlessly Bidi-enabled. Otherwise, we will also call (2) and just get to clients whatever it returns. (Lone (2) seems insufficient, since it indicates |False| for any unidirectional set of languages, including RTL ones).

Okay, It has been years since the last time I worked on GTK.
I wrote a bunch of XKB code (similar to Lina's) that got mostly of the APIs working.
Where it failed bad was in the integration with other desktop applications, mainly the GNOME and KDE applets for switching keyboard layout.

Here an example for getKeyboardLanguageList()

This list can be store in XKB and it can be retrieve using XKB calls. But the GNOME applet doesn't keep the list of layout in XKB, it has its own list. the KDE does the same thing.

Mostly users don't use XKB directly, they use the applet. So writting code that works for XKB but doesn't work with the applets will not fix the bug for mostly users.

setKeyboardLanguage() is even worse. It changes the layout 'behind the scenes' cause the applet to be out of sync (e.i the applet shows EN but the keyboard is really in IL).


Note: gdk_keymap_have_bidi_layouts () says: Since 2.12 
That is pretty new API.

Note: This conclusion were made back a while ago. We need to find out if:
(a) those applets have changed to better integrate with other XKB applications
(b) their offer API we can use

Interoperability with keyboard switching tools is one of the major issues I also have in mind.

KDE. Commonly used switcher - kxkb - can be manipulated via DCOP interfaces (not XKB directly). kxkb provides the following API critical to us ('$ dcop kxkb kxkb'):

  - setLayout(QString)
  - QString getCurrentLayout()
  - QStringList getLayoutList()

These seem to work fine, e.g. '$dcop kxkb kxkb setLayout il' not only loads Hebrew keyboard mapping, but also makes the applet icon change accordingly.

GNOME. Its keymap switcher ('gswitchit', I think) seems to be listening for keymap events and was reacting adequately during the testing.

I have also written and run in GNOME tests using libxklavier library:
http://xlibs.freedesktop.org/xkbdesc/doc/

Libxklavier wraps around XKB, providing higher-level APIs for keyboard manipulation. Perhaps using it is preferable to making direct XKB calls. As far as I understand, it ships at least with all those Linux distributions that offer gswitchit, consuming this library.

Of course, there can be more tools whose behavior is unpredictable. In particular, as far as I know, for languages actually using IME (e.g. Chinese, Japanese, Korean) there are other, dedicated tools.

I am currently trying to get more information on those other tools. I think we should only address broadly used ones.

I did some research on linux today.

Gnome switcher:

Gnome switcher 'gswitchit' (http://gswitchit.sourceforge.net/) now is part of the gnome-applets, I couldn't find a homepage for it but you can get the code at gnome SVN: http://developer.gnome.org/tools/svn.html

LibXklavier
http://www.freedesktop.org/wiki/Software/LibXklavier

I'm not sure if I would like add a dependency on this library. I'm okay if we only work on XFree86.

D-Bus
http://www.freedesktop.org/wiki/Software/dbus
http://en.wikipedia.org/wiki/D-Bus
http://library.gnome.org/devel/dbus-glib/unstable/index.html

According to what I read this is the right technology to use for communication between process. in our case, eclipse-gswitchit and eclipse-kxkb.
KDE 4 has replaced DCOP with D-BUS and GNOME is also uses D-BUS.

We need to find out if gswitchit and kxkb use D-Bus.
Back from vacation...
_________________

There was also a private communication thread, which, by mutual agreement of the sides and after a minor clean up, I'm posting here.
_________________

Lina on Jul 10:

Basically, get/setKeyboardLanguage and getKeyboardLanguageList seem to work for me with GNOME (gswitchit) and KDE (kxkb) applets.

I tried various methods. I am still not sure which one is preferable.

Attached is my last version of getKeyboardLanguageList. I included one API only to provide just high view of the changes. Please do not do a thorough review. There are quite many TODOs yet, and it doesn't worth putting any significant time and effort. Please can you just let me know your overall impression of the strategy.

Bulk of code is native. Each native function is "custom", including series of actual native calls.

E.g. the native for getKeyboardLanguageList is doing the following:

(1) Tries to use DCOP first:
  - runs dcop command (this could be also done through C++ calls or Java - via Runtime#exec()),
  - streams the output to a file,
  - reads the file content into returned memory block.

(2) If nothing got streamed out, it invokes XKB functions, like those we used in the past.

The return values of (1) and (2) are currently in mismatching formats (short vs. long layout names). Should we sync this with win32? What data type win32's getKeyboardLanguageList counterpart will return? an integer array?

As for the Java changes, I intended to create a new class, named say IMEUtil or KeyboardUtil, but was not sure about the name. This doesn't seem a real issue though.
For the time being, the changes are added to the old BidiUtil.
_________________

Felipe on Jul 14:

I read the code (didn't compile it, didn't run it, just read it).

Here my thoughts:

1- I really don't like the idea of new library (swt-ime)
2- We should use D-Bus (dcop is becoming deprecated, see KDE 4)
3- I guess it should be okay to include X11/XKBlib.h (if we make all calls dynamic we prop won't need to include anything)
4- I think we will have legal problems to include kde/kapplication.h

Created attachment 107886
IME API attempt #1

Experimental code referenced in comment 27.
(kde/kapplication.h related part is removed for legal reasons, as per Felipe's comments.)
Felipe, regarding using D-Bus in KDE (and possibly GNOME):

It looks like KDE 4 has not yet been adopted by many Linux distributions.

Examples of distros that ship KDE 4 are:
  - Fedora 9 (http://distrowatch.com/table.php?distribution=fedora)
  - OpenSuSE 11 (http://distrowatch.com/table.php?distribution=suse)
  - Ubuntu X (?) (http://distrowatch.com/table.php?distribution=ubuntu)

Examples of distros that do NOT ship KDE 4 are:
  - Debian (http://distrowatch.com/table.php?distribution=debian)
  - Gentoo (http://distrowatch.com/table.php?distribution=gentoo)
  - Mandriva (http://distrowatch.com/table.php?distribution=mandriva)
  - RHEL (http://distrowatch.com/table.php?distribution=redhat)
  - Slackware (http://distrowatch.com/table.php?distribution=slackware)
  - Turbolinux (http://distrowatch.com/table.php?distribution=turbolinux)

So it may be too early to rely on D-Bus (or exclusively on D-Bus). For the intermediate future at least, it seems we need to have a DCOP-based solution available.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="62432" />
    <CreationDate amount="2004-05-16 22:50:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse Foundation" />
    <Product amount="z_Archived" />
    <component amount="Hyades" />
    <Version amount="unspecified" />
    <rep_platform amount="All" />
    <op_sys amount="All" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>MsgDataElementImpl.getMsgCatalogTokensAsStrings() throws a NullPointerException.</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>MsgDataElementImpl.getMsgCatalogTokensAsStrings() throws a NullPointerException.

MsgDataElementImpl.getMsgCatalogTokensAsStrings() throws a NullPointerException 
on line 609 if any of the elements in the tokens ArrayList are null. 

Consider setting the element in the strToken array to null is an element in the 
tokens ArrayList is null.
As discussed.
Fix is in HEAD - May 18 2004
Verified in Toronto's 20040713_1106 build.
Closing.</WithStack>
    <WithOutStack>MsgDataElementImpl.getMsgCatalogTokensAsStrings() throws a NullPointerException.

MsgDataElementImpl.getMsgCatalogTokensAsStrings() throws a NullPointerException 
on line 609 if any of the elements in the tokens ArrayList are null. 

Consider setting the element in the strToken array to null is an element in the 
tokens ArrayList is null.
As discussed.
Fix is in HEAD - May 18 2004
Verified in Toronto's 20040713_1106 build.
Closing.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="62433" />
    <CreationDate amount="2004-05-16 23:43:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="Resources" />
    <Version amount="3.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="blocker" />
    <Summery>[content type] empty content should not return parents content type default charset</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>I've tried to define a new "content type" for JSPs, but if the file is actually 
empty, then its parent' type is queried for content type, instead of using the 
default as defined in the plugin extension. Is this intentional for some 
use-case I can't imagine? From looking at the code in File's getCharset, it 
seems to be. Secondly, it also seems like if the resource does not exist its 
parent type is also used, but again, the new content type's default should 
apply. Is there a why to "override" this behavior or is it a design bug? (I 
would think it'd be typical case, and unit tests should test this). 

My extentension point looks like the following, (and if the content is empty, is 
seems my describer is never called, which is fine, but I'd still want my 
specified charset to apply). 

   &lt;extension
         point="org.eclipse.core.runtime.contentTypes"&gt;
         &lt;content-type
               file-extensions="jsp"
               priority="high"
               name="JSP Content Type"
               id="jsp"
               base-type="org.eclipse.core.runtime.text"
               default-charset="ISO-8859-1"&gt;
         &lt;describer class="com.ibm.sse.model.jsp.contenttype.
ContentDescriberForJSP"/&gt;
         &lt;/content-type&gt;
   &lt;/extension&gt;

I've marked as 'blocker' since this would prohibit use of new content 
type/charset APIs. (And, apologies in advance if I misunderstood again how 
extension point is to be defined ... I assumed any "text" its to extend 'text'?)
Created attachment 10713
example test case demonstrating above

I've isolated my tests to the critical part that shows above problem. I think
its easy to reproduce, but thought it might be easier so see in code in case
description not clear, or in case I've made an error! :&lt;
To run, you can pick TestCodedReader and "run as Junit plugin test".
BTW, thinking about it, perhaps this design point was reached since if there's 
nothing to read, it doesn't matter if the charset is "inaccurate". I guess my 
question would then be how do clients determine the "defaultCharset" when they 
go to setContents in that empty iFile. Are they to (somehow) remember content 
type and re-look it up directly from content type manager? I've studied classes 
like TextFileBuffers, and can't seem to see any existing use of this type of 
technique. Again, apologies if this is already documented somewhere, but its 
not obvious to me. 
I noticed this problem last week. It has been fixed, but has yet to be released.
David, expect to see it for tomorrow's i-build.
Fixed (in the context of bug 58726). If an empty stream is provided, the
resulting behaviour for content type determination is file-name-based.</WithStack>
    <WithOutStack>I've tried to define a new "content type" for JSPs, but if the file is actually 
empty, then its parent' type is queried for content type, instead of using the 
default as defined in the plugin extension. Is this intentional for some 
use-case I can't imagine? From looking at the code in File's getCharset, it 
seems to be. Secondly, it also seems like if the resource does not exist its 
parent type is also used, but again, the new content type's default should 
apply. Is there a why to "override" this behavior or is it a design bug? (I 
would think it'd be typical case, and unit tests should test this). 

My extentension point looks like the following, (and if the content is empty, is 
seems my describer is never called, which is fine, but I'd still want my 
specified charset to apply). 

   &lt;extension
         point="org.eclipse.core.runtime.contentTypes"&gt;
         &lt;content-type
               file-extensions="jsp"
               priority="high"
               name="JSP Content Type"
               id="jsp"
               base-type="org.eclipse.core.runtime.text"
               default-charset="ISO-8859-1"&gt;
         &lt;describer class="com.ibm.sse.model.jsp.contenttype.
ContentDescriberForJSP"/&gt;
         &lt;/content-type&gt;
   &lt;/extension&gt;

I've marked as 'blocker' since this would prohibit use of new content 
type/charset APIs. (And, apologies in advance if I misunderstood again how 
extension point is to be defined ... I assumed any "text" its to extend 'text'?)
Created attachment 10713
example test case demonstrating above

I've isolated my tests to the critical part that shows above problem. I think
its easy to reproduce, but thought it might be easier so see in code in case
description not clear, or in case I've made an error! :&lt;
To run, you can pick TestCodedReader and "run as Junit plugin test".
BTW, thinking about it, perhaps this design point was reached since if there's 
nothing to read, it doesn't matter if the charset is "inaccurate". I guess my 
question would then be how do clients determine the "defaultCharset" when they 
go to setContents in that empty iFile. Are they to (somehow) remember content 
type and re-look it up directly from content type manager? I've studied classes 
like TextFileBuffers, and can't seem to see any existing use of this type of 
technique. Again, apologies if this is already documented somewhere, but its 
not obvious to me. 
I noticed this problem last week. It has been fixed, but has yet to be released.
David, expect to see it for tomorrow's i-build.
Fixed (in the context of bug 58726). If an empty stream is provided, the
resulting behaviour for content type determination is file-name-based.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="62434" />
    <CreationDate amount="2004-05-17 00:02:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="PDE" />
    <component amount="UI" />
    <Version amount="3.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="major" />
    <Summery>Fails to launch target workspace</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="WONTFIX" />
    <WithStack>When using the 0514 M9 integration build and targeting a 0506 M9 build, I get 
the following error when trying to launch the target in either debug or run 
mode.

"Unable to restore Java source locator - invalid format."

I have found no way to get around this problem and the error doesn't point me 
to a solution.  I launched to a new workspace and I have tried deleting the 
configuration file but no difference was found.
Is there anything in your .log file?
No...nothing more than this message.
I have come to the conclusion that you cannot launch a 0506 eclipse target from
a 0513 or greater eclipse build.  Is this correct and, if so, isn't this bad?
This is a PDE issue (source locator bug is likely misleading). Moving to PDE 
for comment.
As announced on the eclipse-dev mailing list, the I-builds starting last week 
CANNOT be used to target any previous 3.0 I-builds.  This is due to the change 
in config.ini syntax by the Equinox team.

Just to be really clear about this one.  The runtime can still take the old 
format.  When we did the change we put in a workaround to always start all 
bundles listed on the osgi.bundles list (regardless of whether or not they spec 
the new "@start" attribute.  This was a stop gap measure while PDE and others 
caught up to the late change in format.  We will remove that soon.

PDE has (rightly) not tried to support both models.  Otherwise it would be a 
catch 22 situation.  We can't remove our workaround until they generate the new 
format.  They can generate the new format but then old eclipse targets will not 
work, ...

So, everyone is doing the best that they can and unfortunately, our late 
realization that there was a hole in the osgi.bundles story impacts some people 
doing mixed level development.  We traded this off against quick action to 
enable several important scenarios.  
*** Bug 63150 has been marked as a duplicate of this bug. ***</WithStack>
    <WithOutStack>When using the 0514 M9 integration build and targeting a 0506 M9 build, I get 
the following error when trying to launch the target in either debug or run 
mode.

"Unable to restore Java source locator - invalid format."

I have found no way to get around this problem and the error doesn't point me 
to a solution.  I launched to a new workspace and I have tried deleting the 
configuration file but no difference was found.
Is there anything in your .log file?
No...nothing more than this message.
I have come to the conclusion that you cannot launch a 0506 eclipse target from
a 0513 or greater eclipse build.  Is this correct and, if so, isn't this bad?
This is a PDE issue (source locator bug is likely misleading). Moving to PDE 
for comment.
As announced on the eclipse-dev mailing list, the I-builds starting last week 
CANNOT be used to target any previous 3.0 I-builds.  This is due to the change 
in config.ini syntax by the Equinox team.

Just to be really clear about this one.  The runtime can still take the old 
format.  When we did the change we put in a workaround to always start all 
bundles listed on the osgi.bundles list (regardless of whether or not they spec 
the new "@start" attribute.  This was a stop gap measure while PDE and others 
caught up to the late change in format.  We will remove that soon.

PDE has (rightly) not tried to support both models.  Otherwise it would be a 
catch 22 situation.  We can't remove our workaround until they generate the new 
format.  They can generate the new format but then old eclipse targets will not 
work, ...

So, everyone is doing the best that they can and unfortunately, our late 
realization that there was a hole in the osgi.bundles story impacts some people 
doing mixed level development.  We traded this off against quick action to 
enable several important scenarios.  
*** Bug 63150 has been marked as a duplicate of this bug. ***</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="62435" />
    <CreationDate amount="2004-05-17 00:28:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="SWT" />
    <Version amount="3.0" />
    <rep_platform amount="All" />
    <op_sys amount="All" />
    <priority amount="P3" />
    <bug_severity amount="enhancement" />
    <Summery>Chinese font substitution defaults to Kai</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>Selecting fonts like Courier New displays English correctly, but all Chinese 
fonts are displayed in Kai, which is very hard to read if size &lt;12. Especially 
in java Editor.
Please revert it back to default to Ming for Chinese fonts.
FH to investigate.  What platform is this?  Windows?
You have to set the default font to Ming in this case (instead of courier). I 
don't have control over which font will be selected by the font substitution 
code (it's going to be the first one that contains all the necessary glyphs).

If I release the fix for bug63571 chinese fallback fonts will change to  
SimSum, MS PGothic. Is it better ?
Does it revert to PMingLiU on T-Chinese Windows?
I don't know, I would need to test the code in T-Chinese Windows... which I 
don't have in our lab.
Jiawei, according to Fuse-san (Bug#63793) this bug is fixed in the current 
nightly build.  Could you verify it ? Thanks.


I can verify that it is fixed in the latest nightly build 20040816
Thanks, closing pr.</WithStack>
    <WithOutStack>Selecting fonts like Courier New displays English correctly, but all Chinese 
fonts are displayed in Kai, which is very hard to read if size &lt;12. Especially 
in java Editor.
Please revert it back to default to Ming for Chinese fonts.
FH to investigate.  What platform is this?  Windows?
You have to set the default font to Ming in this case (instead of courier). I 
don't have control over which font will be selected by the font substitution 
code (it's going to be the first one that contains all the necessary glyphs).

If I release the fix for bug63571 chinese fallback fonts will change to  
SimSum, MS PGothic. Is it better ?
Does it revert to PMingLiU on T-Chinese Windows?
I don't know, I would need to test the code in T-Chinese Windows... which I 
don't have in our lab.
Jiawei, according to Fuse-san (Bug#63793) this bug is fixed in the current 
nightly build.  Could you verify it ? Thanks.


I can verify that it is fixed in the latest nightly build 20040816
Thanks, closing pr.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="62436" />
    <CreationDate amount="2004-05-17 00:36:00 -0400" />
    <DupId amount="61732" />
    <classification amount="Eclipse" />
    <Product amount="PDE" />
    <component amount="UI" />
    <Version amount="3.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>could not save plugin.xml file</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="DUPLICATE" />
    <WithStack>I created new plugin project, and, using PDE Editor's dependancy page, was 
adding pre-req plugins to list. when I tried to save, I got error message 
basically saying it couldn't save to do exception. This was with 5/6 build in my 
daily working environment. I could not recreate on 5/14 I-build with fresh 
workspace, so not sure if its something that was fixed, or something that has to 
do with fresh (near empty) workspace, but thought I'd report all exceptions in 
my log file, in case it rings any bells.
Created attachment 10711
log when above error occurred


*** This bug has been marked as a duplicate of 61732 ***</WithStack>
    <WithOutStack>I created new plugin project, and, using PDE Editor's dependancy page, was 
adding pre-req plugins to list. when I tried to save, I got error message 
basically saying it couldn't save to do exception. This was with 5/6 build in my 
daily working environment. I could not recreate on 5/14 I-build with fresh 
workspace, so not sure if its something that was fixed, or something that has to 
do with fresh (near empty) workspace, but thought I'd report all exceptions in 
my log file, in case it rings any bells.
Created attachment 10711
log when above error occurred


*** This bug has been marked as a duplicate of 61732 ***</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="62437" />
    <CreationDate amount="2004-05-17 01:13:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="JDT" />
    <component amount="UI" />
    <Version amount="3.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P2" />
    <bug_severity amount="major" />
    <Summery>Hang on 0506 build related to indexing?</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="VERIFIED" />
    <resolution amount="FIXED" />
    <WithStack>My development environment "hung". I did ctrl-break and will attache stack 
dumps. I can't read these (easily) in detail, but looked related to JDT 
indexing, so thought I'd route to JDT first. 

The only thing "unusuall" I was doing in IDE was that I'd just copied a java 
source file form one plugin/package to another plugin/package. The first was 
open in an editor before the copy, after the copy I opened the second one, then 
closed the first one. Then it hung. Hopefully the stack traces will be more 
revealing. This was with 0506 I-build, using following VM:

java version "1.4.2"
J9 - VM for the Java(TM) platform (build 2.1)
IBM J9SE VM (build 2.1, J2RE 1.4.2 IBM J9 build 20040422 (JIT enabled))
meant to mark as "critical" if I'm reading definition of severity correctly. (If 
not feel free to let me know) I have only seen once. 
Created attachment 10712
stack states during above hang
Indexer is idle (Java Indexing thread). The hang seems to be related to all-
types caching which lives in JDT/UI.
The problem is that the OrganizeImportsOperation passes in null as a progress 
monitor. Since the background thread is currently build the all types cache 
this result in a situation where the user doesn't get progress feedback for 
long running operations.

Martin, I looked at callers of the all types cache and ImportsStructure# 
evaluateStarImportConflicts() passes in null as well.
Martin we should try to get a fix for this for M9/RC0.
I have a fix ready that avoids that 'null' is passed as progress monitor to the
all types cache. For the organize imports case this is easy doable, for the
'evaluateStarImportConflicts' case not, as it would mean to change
ImportRewrite.createEdits to add an extra progress monitor as argument.

However, I don't think this solves the observed problem. We're using the
BusyIndicatorRunnableContext so you wouldn't see progress.
We should replace all BusyIndicatorRunnableContext with IProgressService so
there is a dialog.
Even then we still have UI refresh problems as we don't fork for orananize
import of a single CU.
Dirk, how far do we want to go here?
Having a "hang" UI isn't an option so we should fix those usages of 
BusyIndicatorRunnableContext where we know that the operation can take 
seconds. I am not a fan of using the IProgressService all over the place since 
it introduces nasty flickering when the operation is fast. Can't we use the 
WorkbenchWindow instead in cases where the operation takes longer in really a 
limited number of cases.
Created attachment 10820
patch to add progress monitor to org. imp. and imp.structure
I released the patch for M9/RC0. Hoewever we have to check the call sites of 
refactoring which we should do for RC1.
no immediate action is needed for the refactorings. Organize import now uses a
progress monitor when using the imports structure

&gt; 20040526
start verifying...
Verified that OrganizeImportsOperation  &amp; ImportsStructure don't pass in null 
anymore in the described cases.

Hoewever found another pass that can cause harm. Opened new bug 66635</WithStack>
    <WithOutStack>My development environment "hung". I did ctrl-break and will attache stack 
dumps. I can't read these (easily) in detail, but looked related to JDT 
indexing, so thought I'd route to JDT first. 

The only thing "unusuall" I was doing in IDE was that I'd just copied a java 
source file form one plugin/package to another plugin/package. The first was 
open in an editor before the copy, after the copy I opened the second one, then 
closed the first one. Then it hung. Hopefully the stack traces will be more 
revealing. This was with 0506 I-build, using following VM:

java version "1.4.2"
J9 - VM for the Java(TM) platform (build 2.1)
IBM J9SE VM (build 2.1, J2RE 1.4.2 IBM J9 build 20040422 (JIT enabled))
meant to mark as "critical" if I'm reading definition of severity correctly. (If 
not feel free to let me know) I have only seen once. 
Created attachment 10712
stack states during above hang
Indexer is idle (Java Indexing thread). The hang seems to be related to all-
types caching which lives in JDT/UI.
The problem is that the OrganizeImportsOperation passes in null as a progress 
monitor. Since the background thread is currently build the all types cache 
this result in a situation where the user doesn't get progress feedback for 
long running operations.

Martin, I looked at callers of the all types cache and ImportsStructure# 
evaluateStarImportConflicts() passes in null as well.
Martin we should try to get a fix for this for M9/RC0.
I have a fix ready that avoids that 'null' is passed as progress monitor to the
all types cache. For the organize imports case this is easy doable, for the
'evaluateStarImportConflicts' case not, as it would mean to change
ImportRewrite.createEdits to add an extra progress monitor as argument.

However, I don't think this solves the observed problem. We're using the
BusyIndicatorRunnableContext so you wouldn't see progress.
We should replace all BusyIndicatorRunnableContext with IProgressService so
there is a dialog.
Even then we still have UI refresh problems as we don't fork for orananize
import of a single CU.
Dirk, how far do we want to go here?
Having a "hang" UI isn't an option so we should fix those usages of 
BusyIndicatorRunnableContext where we know that the operation can take 
seconds. I am not a fan of using the IProgressService all over the place since 
it introduces nasty flickering when the operation is fast. Can't we use the 
WorkbenchWindow instead in cases where the operation takes longer in really a 
limited number of cases.
Created attachment 10820
patch to add progress monitor to org. imp. and imp.structure
I released the patch for M9/RC0. Hoewever we have to check the call sites of 
refactoring which we should do for RC1.
no immediate action is needed for the refactorings. Organize import now uses a
progress monitor when using the imports structure

&gt; 20040526
start verifying...
Verified that OrganizeImportsOperation  &amp; ImportsStructure don't pass in null 
anymore in the described cases.

Hoewever found another pass that can cause harm. Opened new bug 66635</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="62438" />
    <CreationDate amount="2004-05-17 02:10:00 -0400" />
    <DupId amount="" />
    <classification amount="RT" />
    <Product amount="Equinox" />
    <component amount="Incubator" />
    <Version amount="unspecified" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>new osgi.bundles key is commented out in eclipse.properties</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>Build: I-20040514-0800

Since the osgi.bundles key is commented out from the configuration/config.ini 
file of the Eclipse install, PDE resorts to the eclipse.properties file in the 
org.eclipse.osgi plug-in to get the list of autostart plug-ins.  

In this file, however, the line containing the new syntax (elg. @2:start) is 
commented out, while the old one is not.

This should be reversed, since when PDE populates the configuration tab of the 
launcher, it will now look for ones specifying "start" only.
Please plan on addressing this today.

As of tomorrow, the only plugins that will be marked by PDE as autostart in 
the config.ini for the runtime workbench are the ones that we read as 
autostart in eclipse.properties.
released into HEAD.</WithStack>
    <WithOutStack>Build: I-20040514-0800

Since the osgi.bundles key is commented out from the configuration/config.ini 
file of the Eclipse install, PDE resorts to the eclipse.properties file in the 
org.eclipse.osgi plug-in to get the list of autostart plug-ins.  

In this file, however, the line containing the new syntax (elg. @2:start) is 
commented out, while the old one is not.

This should be reversed, since when PDE populates the configuration tab of the 
launcher, it will now look for ones specifying "start" only.
Please plan on addressing this today.

As of tomorrow, the only plugins that will be marked by PDE as autostart in 
the config.ini for the runtime workbench are the ones that we read as 
autostart in eclipse.properties.
released into HEAD.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="62439" />
    <CreationDate amount="2004-05-17 02:13:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="PDE" />
    <component amount="UI" />
    <Version amount="3.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>ConcurrentModificationException while adding a new extension</Summery>
    <Patches amount="0" />
    <Stacktraces amount="1">
      <Stacktrace timestamp="1437341131384">
        <Exception>java.util.ConcurrentModificationException</Exception>
        <Reason />
        <Frames>
          <Frame depth="0">java.util.AbstractList$Itr.checkForComodification(Unknown Source)</Frame>
          <Frame depth="1">java.util.AbstractList$Itr.next(Unknown Source)</Frame>
          <Frame depth="2">org.eclipse.pde.internal.core.AbstractModel.fireModelChanged(AbstractModel.java:62)</Frame>
          <Frame depth="3">org.eclipse.pde.internal.core.bundle.BundlePluginModelBase.fireModelChanged(BundlePluginModelBase.java:141)</Frame>
          <Frame depth="4">org.eclipse.pde.internal.core.bundle.BundlePluginBase.modelChanged(BundlePluginBase.java:43)</Frame>
          <Frame depth="5">org.eclipse.pde.internal.ui.model.AbstractEditingModel.fireModelChanged(AbstractEditingModel.java:180)</Frame>
          <Frame depth="6">org.eclipse.pde.internal.ui.model.plugin.PluginObjectNode.fireModelChanged(PluginObjectNode.java:178)</Frame>
          <Frame depth="7">org.eclipse.pde.internal.ui.model.plugin.PluginObjectNode.fireStructureChanged(PluginObjectNode.java:170)</Frame>
          <Frame depth="8">org.eclipse.pde.internal.ui.model.plugin.PluginBaseNode.add(PluginBaseNode.java:186)</Frame>
          <Frame depth="9">org.eclipse.pde.internal.core.bundle.BundlePluginBase.add(BundlePluginBase.java:371)</Frame>
          <Frame depth="10">org.eclipse.pde.internal.ui.wizards.extension.PointSelectionPage.finish(PointSelectionPage.java:356)</Frame>
          <Frame depth="11">org.eclipse.pde.internal.ui.wizards.extension.NewExtensionWizard.performFinish(NewExtensionWizard.java:73)</Frame>
          <Frame depth="12">org.eclipse.jface.wizard.WizardDialog.finishPressed(WizardDialog.java:607)</Frame>
          <Frame depth="13">org.eclipse.jface.wizard.WizardDialog.buttonPressed(WizardDialog.java:305)</Frame>
          <Frame depth="14">org.eclipse.jface.dialogs.Dialog$2.widgetSelected(Dialog.java:505)</Frame>
          <Frame depth="15">org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:89)</Frame>
          <Frame depth="16">org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)</Frame>
          <Frame depth="17">org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:796)</Frame>
          <Frame depth="18">org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:2725)</Frame>
          <Frame depth="19">org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2390)</Frame>
          <Frame depth="20">org.eclipse.jface.window.Window.runEventLoop(Window.java:668)</Frame>
          <Frame depth="21">org.eclipse.jface.window.Window.open(Window.java:648)</Frame>
          <Frame depth="22">org.eclipse.pde.internal.ui.editor.plugin.ExtensionsSection$3.run(ExtensionsSection.java:378)</Frame>
          <Frame depth="23">org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:69)</Frame>
          <Frame depth="24">org.eclipse.pde.internal.ui.editor.plugin.ExtensionsSection.handleNew(ExtensionsSection.java:368)</Frame>
          <Frame depth="25">org.eclipse.pde.internal.ui.editor.plugin.ExtensionsSection.buttonSelected(ExtensionsSection.java:183)</Frame>
          <Frame depth="26">org.eclipse.pde.internal.ui.editor.TreeSection$PartAdapter.buttonSelected(TreeSection.java:36)</Frame>
          <Frame depth="27">org.eclipse.pde.internal.ui.parts.SharedPartWithButtons$SelectionHandler.buttonSelected(SharedPartWithButtons.java:34)</Frame>
          <Frame depth="28">org.eclipse.pde.internal.ui.parts.SharedPartWithButtons$SelectionHandler.widgetSelected(SharedPartWithButtons.java:27)</Frame>
          <Frame depth="29">org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:89)</Frame>
          <Frame depth="30">org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)</Frame>
          <Frame depth="31">org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:796)</Frame>
          <Frame depth="32">org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:2725)</Frame>
          <Frame depth="33">org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2390)</Frame>
          <Frame depth="34">org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1353)</Frame>
          <Frame depth="35">org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1324)</Frame>
          <Frame depth="36">org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:243)</Frame>
          <Frame depth="37">org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:141)</Frame>
          <Frame depth="38">org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:90)</Frame>
          <Frame depth="39">org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:298)</Frame>
          <Frame depth="40">org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:249)</Frame>
          <Frame depth="41">org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:126)</Frame>
          <Frame depth="42">sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)</Frame>
          <Frame depth="43">sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)</Frame>
          <Frame depth="44">sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)</Frame>
          <Frame depth="45">java.lang.reflect.Method.invoke(Unknown Source)</Frame>
          <Frame depth="46">org.eclipse.core.launcher.Main.basicRun(Main.java:269)</Frame>
          <Frame depth="47">org.eclipse.core.launcher.Main.run(Main.java:722)</Frame>
          <Frame depth="48">org.eclipse.core.launcher.Main.main(Main.java:706)</Frame>
        </Frames>
      </Stacktrace>
    </Stacktraces>
    <SourceCodeRegions amount="1">
      <source_code type="functiondef">
        <location start="356" end="584" />
        <code>IModelChangedListenerFilter() {
				public boolean accept(IModelChangedListener 
listener) {
					if (listener instanceof IFormPart ||
							listener instanceof 
FormOutlinePage)
						return true;
					return false;
				}
			}</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>Build: I-20040514 - 0800

Create a new plug-in project WITH a manifest.mf

Go to the extensions tab.  Try to add an extension.  You will get the 
exception below.  Ahh, those listener transfers...


Error May 17, 2004 01:58:51.975 java.util.ConcurrentModificationException
java.util.ConcurrentModificationException
	at java.util.AbstractList$Itr.checkForComodification(Unknown Source)
	at java.util.AbstractList$Itr.next(Unknown Source)
	at org.eclipse.pde.internal.core.AbstractModel.fireModelChanged
(AbstractModel.java:62)
	at 
org.eclipse.pde.internal.core.bundle.BundlePluginModelBase.fireModelChanged
(BundlePluginModelBase.java:141)
	at org.eclipse.pde.internal.core.bundle.BundlePluginBase.modelChanged
(BundlePluginBase.java:43)
	at 
org.eclipse.pde.internal.ui.model.AbstractEditingModel.fireModelChanged
(AbstractEditingModel.java:180)
	at 
org.eclipse.pde.internal.ui.model.plugin.PluginObjectNode.fireModelChanged
(PluginObjectNode.java:178)
	at 
org.eclipse.pde.internal.ui.model.plugin.PluginObjectNode.fireStructureChanged
(PluginObjectNode.java:170)
	at org.eclipse.pde.internal.ui.model.plugin.PluginBaseNode.add
(PluginBaseNode.java:186)
	at org.eclipse.pde.internal.core.bundle.BundlePluginBase.add
(BundlePluginBase.java:371)
	at 
org.eclipse.pde.internal.ui.wizards.extension.PointSelectionPage.finish
(PointSelectionPage.java:356)
	at 
org.eclipse.pde.internal.ui.wizards.extension.NewExtensionWizard.performFinish
(NewExtensionWizard.java:73)
	at org.eclipse.jface.wizard.WizardDialog.finishPressed
(WizardDialog.java:607)
	at org.eclipse.jface.wizard.WizardDialog.buttonPressed
(WizardDialog.java:305)
	at org.eclipse.jface.dialogs.Dialog$2.widgetSelected(Dialog.java:505)
	at org.eclipse.swt.widgets.TypedListener.handleEvent
(TypedListener.java:89)
	at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:796)
	at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:2725)
	at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2390)
	at org.eclipse.jface.window.Window.runEventLoop(Window.java:668)
	at org.eclipse.jface.window.Window.open(Window.java:648)
	at org.eclipse.pde.internal.ui.editor.plugin.ExtensionsSection$3.run
(ExtensionsSection.java:378)
	at org.eclipse.swt.custom.BusyIndicator.showWhile
(BusyIndicator.java:69)
	at 
org.eclipse.pde.internal.ui.editor.plugin.ExtensionsSection.handleNew
(ExtensionsSection.java:368)
	at 
org.eclipse.pde.internal.ui.editor.plugin.ExtensionsSection.buttonSelected
(ExtensionsSection.java:183)
	at 
org.eclipse.pde.internal.ui.editor.TreeSection$PartAdapter.buttonSelected
(TreeSection.java:36)
	at 
org.eclipse.pde.internal.ui.parts.SharedPartWithButtons$SelectionHandler.button
Selected(SharedPartWithButtons.java:34)
	at 
org.eclipse.pde.internal.ui.parts.SharedPartWithButtons$SelectionHandler.widget
Selected(SharedPartWithButtons.java:27)
	at org.eclipse.swt.widgets.TypedListener.handleEvent
(TypedListener.java:89)
	at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:796)
	at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:2725)
	at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2390)
	at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1353)
	at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1324)
	at org.eclipse.ui.internal.Workbench.createAndRunWorkbench
(Workbench.java:243)
	at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:141)
	at org.eclipse.ui.internal.ide.IDEApplication.run
(IDEApplication.java:90)
	at org.eclipse.core.internal.runtime.PlatformActivator$1.run
(PlatformActivator.java:298)
	at org.eclipse.core.runtime.adaptor.EclipseStarter.run
(EclipseStarter.java:249)
	at org.eclipse.core.runtime.adaptor.EclipseStarter.run
(EclipseStarter.java:126)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
	at java.lang.reflect.Method.invoke(Unknown Source)
	at org.eclipse.core.launcher.Main.basicRun(Main.java:269)
	at org.eclipse.core.launcher.Main.run(Main.java:722)
	at org.eclipse.core.launcher.Main.main(Main.java:706)
Here is the listener transfer filter:

			smodel.transferListenersTo(tmodel, new 
IModelChangedListenerFilter() {
				public boolean accept(IModelChangedListener 
listener) {
					if (listener instanceof IFormPart ||
							listener instanceof 
FormOutlinePage)
						return true;
					return false;
				}
			});

Obviously, only listeners that implement IFormPart or FormOutlinePage are 
moved. This is unlikely to have caused the problem above. 

It smells like bundle model -&gt; bundle plugin model cross-listening spagetti.
I cannot reproduce this with the code from HEAD. I can add extensions without 
problems.
Upon re-reading the original text of the defect, I CAN reproduce it in a newly 
created project. 

The problem was caused by the extensions section. When reacting to the 
extension addition event, it was firing the selection event. Details section 
on the right was catching the event and creating the details part. The details 
part was adding itself as a model listener. This addition was happening in the 
middle of model change notification, and apparently Iterator didn't like this 
change of the associated list. The moment AbstractModel asked for the next 
listener, it fired the concurrent modification exception.

The simple fix is to create an array of listeners before iterating over them. 
This way, notification of listeners is static because it uses the listeners 
that existed at the beginning of the notification process. Listeners arriving 
or departing in the middle of the notification will be ignored. This is not a 
kludge - this is how java.util.Observable notifies observers, for example.
Just a correction of the claim above: listeners arriving during the 
notification will be ignored, while listeners departing will be needlessly 
notified. There is a short window for this to happen, so I doubt it will cause 
any problems (otherwise we would know about them via 
ConcurrentModificationException already).</WithStack>
    <WithOutStack>Build: I-20040514 - 0800

Create a new plug-in project WITH a manifest.mf

Go to the extensions tab.  Try to add an extension.  You will get the 
exception below.  Ahh, those listener transfers...


Error May 17, 2004 01:58:51.975 java.util.ConcurrentModificationException

Here is the listener transfer filter:

			smodel.transferListenersTo(tmodel, new 
IModelChangedListenerFilter() {
				public boolean accept(IModelChangedListener 
listener) {
					if (listener instanceof IFormPart ||
							listener instanceof 
FormOutlinePage)
						return true;
					return false;
				}
			});

Obviously, only listeners that implement IFormPart or FormOutlinePage are 
moved. This is unlikely to have caused the problem above. 

It smells like bundle model -&gt; bundle plugin model cross-listening spagetti.
I cannot reproduce this with the code from HEAD. I can add extensions without 
problems.
Upon re-reading the original text of the defect, I CAN reproduce it in a newly 
created project. 

The problem was caused by the extensions section. When reacting to the 
extension addition event, it was firing the selection event. Details section 
on the right was catching the event and creating the details part. The details 
part was adding itself as a model listener. This addition was happening in the 
middle of model change notification, and apparently Iterator didn't like this 
change of the associated list. The moment AbstractModel asked for the next 
listener, it fired the concurrent modification exception.

The simple fix is to create an array of listeners before iterating over them. 
This way, notification of listeners is static because it uses the listeners 
that existed at the beginning of the notification process. Listeners arriving 
or departing in the middle of the notification will be ignored. This is not a 
kludge - this is how java.util.Observable notifies observers, for example.
Just a correction of the claim above: listeners arriving during the 
notification will be ignored, while listeners departing will be needlessly 
notified. There is a short window for this to happen, so I doubt it will cause 
any problems (otherwise we would know about them via 
ConcurrentModificationException already).</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="62440" />
    <CreationDate amount="2004-05-17 02:15:00 -0400" />
    <DupId amount="" />
    <classification amount="Modeling" />
    <Product amount="MDT.XSD" />
    <component amount="Core" />
    <Version amount="2.0.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>THAI: XSD Editor have problem with Thai characters.</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="2">
      <Enumeration lines="11">
        <Lines>
          <Line>1) Run Eclipse 3.0 and Select File-&gt;Import from menu bar.</Line>
          <Line>2) Select File System as import source and Click Next.</Line>
          <Line>3) Import soccer.xsd to the Eclipse.</Line>
          <Line>4) Open soccer.xsd file with XSD Editor.</Line>
          <Line>5) Thai content at source page are displayed incorrectly (See xsd_source.png)</Line>
          <Line>while the same contents are displayed correctly at Sematics page and Syntax</Line>
          <Line>page (See xsd_semantics.png and xsd_syntax.png).</Line>
          <Line>6) At Syntax page, Expand and Right Click on RoleType item.</Line>
          <Line>Select New Sibling-&gt; Notation Declaration from popup menu.</Line>
          <Line>All Thai text under RoleType item are displayed incorrectly (See</Line>
          <Line>xsd_problem.png).</Line>
        </Lines>
      </Enumeration>
      <Enumeration lines="5">
        <Lines>
          <Line>1) Right click at soccer.xsd in Package Explorer and select Properties from</Line>
          <Line>popup menu.</Line>
          <Line>2) Change Text file encoding option from Default (inherited from container:</Line>
          <Line>MS874) to Other: UTF-8.</Line>
          <Line>3) Click OK.</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="RESOLVED" />
    <resolution amount="WONTFIX" />
    <WithStack>Environment:
Operating System: Windows XP/2003 (Set Regional Settings to Thai).
Eclipse 3.0 Build: I20040514
XSD Runtime Build: I20040513

Problem description
XSD editor have encoding problem with Thai characters. 

Attachment (Sample Thai XSD file)
Soccer.xsd

How to create the problem:
1) Run Eclipse 3.0 and Select File-&gt;Import from menu bar.
2) Select File System as import source and Click Next.
3) Import soccer.xsd to the Eclipse.
4) Open soccer.xsd file with XSD Editor.
5) Thai content at source page are displayed incorrectly (See xsd_source.png) 
while the same contents are displayed correctly at Sematics page and Syntax 
page (See xsd_semantics.png and xsd_syntax.png).
6) At Syntax page, Expand and Right Click on RoleType item.
   Select New Sibling-&gt; Notation Declaration from popup menu.
   All Thai text under RoleType item are displayed incorrectly (See 
xsd_problem.png).

Please help investigating this problem.
Thanks,
Suwit Srivilairith.
Created attachment 10714
Sample Thai XSD file
Created attachment 10715
XSD Editor (Source page)
Created attachment 10716
XSD Editor (Semantics page)
Created attachment 10717
XSD Editor (Thai char problem)

Thai text become to rubbish when adding new sibling or editing existing Thai
text.
I think the problem is purely in the text editor component of Eclipse.  Please 
try to view the file using "Open With-&gt;Text Editor" and see if Eclipse is able 
to edit this file correctly using just its plain text editor.  If not, please 
redirect this bugzilla to that component.
Hello,

I tried to change soccer.xsd 's file encoding from MS874 (Default Thai 
codepage) to UTF-8 by :- 

1) Right click at soccer.xsd in Package Explorer and select Properties from 
popup menu.
2) Change Text file encoding option from Default (inherited from container: 
MS874) to Other: UTF-8.
3) Click OK.

After that, I opened the soccer.xsd on Text Editor. 
All Thai characters are displayed correctly on Text Editor!

Also, I opened it on XML Schema Editor. 
All Thai characters are displayed correctly on source page. 

No problem as illustrated in XSD Editor (Source page) are found! So please 
ignore Thai display problem at source page.

However, the problem at Semantics and Syntax page still persist (See 
XSD_problem.png in attachment). If we try to modify the existing Thai 
Enumeration Facet (Edit Lexical Value in Properties list) or add the new Facet 
in the Semantics and Syntax page, All Thai text will be rubbish in both 
Semantics and Syntax page.

I think this problem may be associated with file encoding in XML Schema Editor.

Please investigate.  
Thanks, Suwit.

The parser was not recording the encoding at the correct time.  The fix is 
committed to CVS.
The fix is available in the latest build.
The problem still persist in the latest build (200405200923).
I think you could only have this problem if the encoding of the file as known by 
Eclipse isn't actually UTF-8 to match the actual encoding of the file.  I'll 
change the editor to set the encoding of the file to match the encoding 
determined by the parser.
Thanks very much for your investigation. 
I will verify your fix in the next XSD build.

Thanks, Suwit
This is fixed in the latest driver.
Unfortunately, the problem still exist on the latest driver (xsd-SDK-
I200406030436.zip). Anyway, I will send the additional information to you via e-
mail.

Thanks, Suwit
It's possible that this problem might be related to which implementation of JAXP 
is being used.  Can you please confirm which JDK/JRE you are reproducing this 
problem with...
The version of JDK I am using is Sun JDK 1.4.2_03.

Thanks,
Suwit
Created attachment 11770
Eclipse Configuration details 

This information has been created by click "Configuration Details" button at
the "About Eclipse Platform" dialog.
Suwit,

I believe you should be testing with the IBM JDK, since that's the only 
supported configurationf for IES.  The Sun JDK's Crimson DOM implementation is 
pretty buggy and it doesn't provide support for determining the encoding of the 
file being parsed, which is what's causing the problem here.  At the very least, 
you will need to use a non-buggy imlementation of JAXP as outlined on the 
download page of http:/www.eclipse.org/emf.
Ed,
You are correct! This is a bug on Sun JDK.
Now I tried XSD Editor with IBM JDK 1.4... This problem is no longer exist!

Thanks very much for your times in problem investigation.

Regards,
Suwit.</WithStack>
    <WithOutStack>Environment:
Operating System: Windows XP/2003 (Set Regional Settings to Thai).
Eclipse 3.0 Build: I20040514
XSD Runtime Build: I20040513

Problem description
XSD editor have encoding problem with Thai characters. 

Attachment (Sample Thai XSD file)
Soccer.xsd

How to create the problem:
1) Run Eclipse 3.0 and Select File-&gt;Import from menu bar.
2) Select File System as import source and Click Next.
3) Import soccer.xsd to the Eclipse.
4) Open soccer.xsd file with XSD Editor.
5) Thai content at source page are displayed incorrectly (See xsd_source.png) 
while the same contents are displayed correctly at Sematics page and Syntax 
page (See xsd_semantics.png and xsd_syntax.png).
6) At Syntax page, Expand and Right Click on RoleType item.
   Select New Sibling-&gt; Notation Declaration from popup menu.
   All Thai text under RoleType item are displayed incorrectly (See 
xsd_problem.png).

Please help investigating this problem.
Thanks,
Suwit Srivilairith.
Created attachment 10714
Sample Thai XSD file
Created attachment 10715
XSD Editor (Source page)
Created attachment 10716
XSD Editor (Semantics page)
Created attachment 10717
XSD Editor (Thai char problem)

Thai text become to rubbish when adding new sibling or editing existing Thai
text.
I think the problem is purely in the text editor component of Eclipse.  Please 
try to view the file using "Open With-&gt;Text Editor" and see if Eclipse is able 
to edit this file correctly using just its plain text editor.  If not, please 
redirect this bugzilla to that component.
Hello,

I tried to change soccer.xsd 's file encoding from MS874 (Default Thai 
codepage) to UTF-8 by :- 

1) Right click at soccer.xsd in Package Explorer and select Properties from 
popup menu.
2) Change Text file encoding option from Default (inherited from container: 
MS874) to Other: UTF-8.
3) Click OK.

After that, I opened the soccer.xsd on Text Editor. 
All Thai characters are displayed correctly on Text Editor!

Also, I opened it on XML Schema Editor. 
All Thai characters are displayed correctly on source page. 

No problem as illustrated in XSD Editor (Source page) are found! So please 
ignore Thai display problem at source page.

However, the problem at Semantics and Syntax page still persist (See 
XSD_problem.png in attachment). If we try to modify the existing Thai 
Enumeration Facet (Edit Lexical Value in Properties list) or add the new Facet 
in the Semantics and Syntax page, All Thai text will be rubbish in both 
Semantics and Syntax page.

I think this problem may be associated with file encoding in XML Schema Editor.

Please investigate.  
Thanks, Suwit.

The parser was not recording the encoding at the correct time.  The fix is 
committed to CVS.
The fix is available in the latest build.
The problem still persist in the latest build (200405200923).
I think you could only have this problem if the encoding of the file as known by 
Eclipse isn't actually UTF-8 to match the actual encoding of the file.  I'll 
change the editor to set the encoding of the file to match the encoding 
determined by the parser.
Thanks very much for your investigation. 
I will verify your fix in the next XSD build.

Thanks, Suwit
This is fixed in the latest driver.
Unfortunately, the problem still exist on the latest driver (xsd-SDK-
I200406030436.zip). Anyway, I will send the additional information to you via e-
mail.

Thanks, Suwit
It's possible that this problem might be related to which implementation of JAXP 
is being used.  Can you please confirm which JDK/JRE you are reproducing this 
problem with...
The version of JDK I am using is Sun JDK 1.4.2_03.

Thanks,
Suwit
Created attachment 11770
Eclipse Configuration details 

This information has been created by click "Configuration Details" button at
the "About Eclipse Platform" dialog.
Suwit,

I believe you should be testing with the IBM JDK, since that's the only 
supported configurationf for IES.  The Sun JDK's Crimson DOM implementation is 
pretty buggy and it doesn't provide support for determining the encoding of the 
file being parsed, which is what's causing the problem here.  At the very least, 
you will need to use a non-buggy imlementation of JAXP as outlined on the 
download page of http:/www.eclipse.org/emf.
Ed,
You are correct! This is a bug on Sun JDK.
Now I tried XSD Editor with IBM JDK 1.4... This problem is no longer exist!

Thanks very much for your times in problem investigation.

Regards,
Suwit.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="62441" />
    <CreationDate amount="2004-05-17 02:39:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="JDT" />
    <component amount="Text" />
    <Version amount="3.0" />
    <rep_platform amount="All" />
    <op_sys amount="All" />
    <priority amount="P3" />
    <bug_severity amount="enhancement" />
    <Summery>"Override/Implement Methods..." in anonymous class still not availible?</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="1">
      <source_code type="class">
        <location start="352" end="419" />
        <code>abstract class CSI {
	void f() {
		new Comparable() {
			
		};
	}
}</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>this feature is really useful when creating a listner
available in builds &gt;= 200405170800
Still does not work in M9 (200405211200). The Package Explorer context menu 
does not contain "Override/Implement Methods..." menu item. When I select this 
action from the editor context menu, "The operation is not applicable ..." 
message box is displayed.

abstract class CSI {
	void f() {
		new Comparable() {
			
		};
	}
}
there's no menu but you can do it using code assist:
type new YourClassGoesHere(&lt;code assist&gt;
  I don't think the context menu item ought to be disabled, coz from the view 
of inheriting, there's no deference between named subclasses and anonymous 
inner classes. although the current content assist behavior is really great and 
attractive. the former is mandarine and should not be replaced by the latter, 
which is just a shortcut, i think.</WithStack>
    <WithOutStack>this feature is really useful when creating a listner
available in builds &gt;= 200405170800
Still does not work in M9 (200405211200). The Package Explorer context menu 
does not contain "Override/Implement Methods..." menu item. When I select this 
action from the editor context menu, "The operation is not applicable ..." 
message box is displayed.

abstract class CSI {
	void f() {
		new Comparable() {
			
		};
	}
}
there's no menu but you can do it using code assist:
type new YourClassGoesHere(&lt;code assist&gt;
  I don't think the context menu item ought to be disabled, coz from the view 
of inheriting, there's no deference between named subclasses and anonymous 
inner classes. although the current content assist behavior is really great and 
attractive. the former is mandarine and should not be replaced by the latter, 
which is just a shortcut, i think.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="62442" />
    <CreationDate amount="2004-05-17 02:40:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="Resources" />
    <Version amount="3.0" />
    <rep_platform amount="Macintosh" />
    <op_sys amount="Mac OS X - Carbon (unsup.)" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Absence of Xerces plugin causes Checkstyle plugin to fail</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>I downloaded and tried out the Integration build I20040514 (on a Mac), for a quick test on how things 
were progressing towards M9/RC0.  The first thing I noticed was that the Checkstyle plugin did not 
work.  On checking the log, this plugin had been disabled because it declared a dependency on the 
plugin org.apache.xerces.  M9 has removed this plugin, as documented in bug 37696.

Given that Checkstyle is probably not the only plugin to use the previous Xerces stuff, the 'What's New 
in M9' document needs to highlight this change between M8 and M9, and preferably describe to plugin 
writers how to switch from Xerces to the XML parser(s) built in to Java 1.4.
This information has been included in the Eclipse 3.0 Porting Guide.</WithStack>
    <WithOutStack>I downloaded and tried out the Integration build I20040514 (on a Mac), for a quick test on how things 
were progressing towards M9/RC0.  The first thing I noticed was that the Checkstyle plugin did not 
work.  On checking the log, this plugin had been disabled because it declared a dependency on the 
plugin org.apache.xerces.  M9 has removed this plugin, as documented in bug 37696.

Given that Checkstyle is probably not the only plugin to use the previous Xerces stuff, the 'What's New 
in M9' document needs to highlight this change between M8 and M9, and preferably describe to plugin 
writers how to switch from Xerces to the XML parser(s) built in to Java 1.4.
This information has been included in the Eclipse 3.0 Porting Guide.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="62443" />
    <CreationDate amount="2004-05-17 03:12:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="Resources" />
    <Version amount="3.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>[content type] UTF-16 causes exception in XMLRootHandler with IBM's JRE</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="6">
      <source_code type="import">
        <location start="7149" end="7167" />
        <code>import java.io.*;</code>
      </source_code>
      <source_code type="class">
        <location start="7168" end="7413" />
        <code>public class Simple {
	public static void main(String[] args) throws IOException {
		Reader reader = new InputStreamReader(new FileInputStream(args[0]), args[1]);
		int c;
		while ((c = reader.read()) != -1)
			System.out.println((char) c);
	}
}</code>
      </source_code>
      <source_code type="assignment">
        <location start="8012" end="8059" />
        <code>Charset charset = Charset.forName("UTF-16");</code>
      </source_code>
      <source_code type="assignment">
        <location start="8060" end="8116" />
        <code>CharsetDecoder charsetDecoder = charset.newDecoder();</code>
      </source_code>
      <source_code type="functioncall">
        <location start="8117" end="8179" />
        <code>charsetDecoder.onMalformedInput(CodingErrorAction.REPLACE);</code>
      </source_code>
      <source_code type="functioncall">
        <location start="8316" end="8351" />
        <code>System.out.println((char) c);</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>Using 0514 build. 
JRE is 
java version "1.4.2"
J9 - VM for the Java(TM) platform (build 2.1)
IBM J9SE VM (build 2.1, J2RE 1.4.2 IBM J9 build 20040422 (JIT enabled))

Works ok on Suns' JRE (1.4.2_03) but with IBM's its easy to exception from 
iFile.getContentDescription(), I'll attach test case. 


= = = = =
org.eclipse.core.internal.resources.ResourceException(/com.ibm.encoding.
resource.newtests/testfiles/xml/testUTF16.xml)[381]: sun.io.
MalformedInputException
	at sun.io.ByteToCharUnicode.flush(ByteToCharUnicode.java:227)
	at sun.nio.cs.StreamDecoder$ConverterSD.flushInto(StreamDecoder.java:305)
	at sun.nio.cs.StreamDecoder$ConverterSD.implRead(StreamDecoder.java:329)
	at sun.nio.cs.StreamDecoder.read(StreamDecoder.java:222)
	at java.io.InputStreamReader.read(InputStreamReader.java:207)
	at org.apache.xerces.impl.XMLEntityScanner.load(Unknown Source)
	at org.apache.xerces.impl.XMLEntityScanner.skipSpaces(Unknown Source)
	at org.apache.xerces.impl.XMLDocumentScannerImpl$PrologDispatcher.
dispatch(Unknown Source)
	at org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.
scanDocument(Unknown Source)
	at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)
	at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)
	at org.apache.xerces.parsers.XMLParser.parse(Unknown Source)
	at org.apache.xerces.parsers.AbstractSAXParser.parse(Unknown Source)
	at javax.xml.parsers.SAXParser.parse(Unknown Source)
	at org.eclipse.core.internal.content.XMLRootHandler.
parseContents(XMLRootHandler.java:163)
	at org.eclipse.core.runtime.content.XMLRootElementContentDescriber.
checkCriteria(XMLRootElementContentDescriber.java:62)
	at org.eclipse.core.runtime.content.XMLRootElementContentDescriber.
describe(XMLRootElementContentDescriber.java:87)
	at org.eclipse.core.internal.content.ContentType.describe(ContentType.java:
164)
	at org.eclipse.core.internal.content.ContentTypeManager.
internalFindContentTypesFor(ContentTypeManager.java:295)
	at org.eclipse.core.internal.content.ContentTypeManager.
getDescriptionFor(ContentTypeManager.java:262)
	at org.eclipse.core.internal.resources.ContentDescriptionManager.
readDescription(ContentDescriptionManager.java:57)
	at org.eclipse.core.internal.resources.ContentDescriptionManager.
getDescriptionFor(ContentDescriptionManager.java:42)
	at org.eclipse.core.internal.resources.File.getContentDescription(File.
java:239)
	at com.ibm.encoding.resource.tests.example.TestCodedReader.
doContentDescriptionTest(TestCodedReader.java:213)
	at com.ibm.encoding.resource.tests.example.TestCodedReader.
testFile123(TestCodedReader.java:206)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.
java:84)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.
java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.
invoke(DelegatingMethodAccessorImpl.java:59)
	at java.lang.reflect.Method.invoke(Method.java:390)
	at junit.framework.TestCase.runTest(TestCase.java:154)
	at junit.framework.TestCase.runBare(TestCase.java:127)
	at junit.framework.TestResult$1.protect(TestResult.java:106)
	at junit.framework.TestResult.runProtected(TestResult.java:124)
	at junit.framework.TestResult.run(TestResult.java:109)
	at junit.framework.TestCase.run(TestCase.java:118)
	at junit.framework.TestSuite.runTest(TestSuite.java:208)
	at junit.framework.TestSuite.run(TestSuite.java:203)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.
runTests(RemoteTestRunner.java:422)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.
run(RemoteTestRunner.java:306)
	at org.eclipse.pde.internal.junit.runtime.RemotePluginTestRunner.
main(RemotePluginTestRunner.java:30)
	at org.eclipse.pde.internal.junit.runtime.UITestApplication$1.
run(UITestApplication.java:90)
	at org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35)
	at org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:
106)
	at org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:2702)
	at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2394)
	at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1353)
	at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1324)
	at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:
243)
	at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:141)
	at org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:90)
	at org.eclipse.pde.internal.junit.runtime.UITestApplication.
run(UITestApplication.java:33)
	at org.eclipse.core.internal.runtime.PlatformActivator$1.
run(PlatformActivator.java:298)
	at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:
249)
	at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:
126)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.
java:84)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.
java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.
invoke(DelegatingMethodAccessorImpl.java:59)
	at java.lang.reflect.Method.invoke(Method.java:390)
	at org.eclipse.core.launcher.Main.basicRun(Main.java:269)
	at org.eclipse.core.launcher.Main.run(Main.java:722)
	at org.eclipse.core.launcher.Main.main(Main.java:706)
Created attachment 10718
junit test to demonstrate above error
David, it seems the mentioned file does not have a UTF-16 BOM. According to:

http://www.w3.org/TR/2004/REC-xml-20040204/#charencoding

it seems it should have. 

Of course, this does not invalidate the PR. I just thought I should mention.
Created attachment 10738
hex values of test file

I think it does -- testUTF16.xml in zip file? -- unless somethings getting
"lost in translation". Of course, I think some one's code some where may leave
the input stream positioned after the BOM :) [that works pretty well, and is
needed, for UTF-8 BOMs, I've always found the UTF-16 boms a little more
problematic, sometimes expected, sometimes not, as the different results for
two VM's would seem to indicate]

The attached image show's what the hex values look like for the file I'm
looking at ... FFFE, right?
My fault... yes, the right one has the right BOM... I was trying with
"test-UTF-16.xml" in testfiles\genedFiles...\xml. 

The reason we were failing is that we want to let IOExceptions flow to the
caller, but sun.io.MalformedInputException is an I/O exception
(CharConversionException). We will have to handle those (and let
non-encoding-related ones flow).
Since we are reading the contents right in the beginning in the handling it to
describers, any "real" I/O exceptions will happen right way. When calling
describers, I/O exceptions will not be severe, so they are just logged (not thrown).

Fixed and released to HEAD as described above.
Actually the problem itself still occurs...
David, that file has an odd number of bytes. The IOException happens when trying
to decode the last char. Is this intentional? The following example would cause
a CharConversionException to occur with IBM's JRE:

import java.io.*;
public class Simple {
	public static void main(String[] args) throws IOException {
		Reader reader = new InputStreamReader(new FileInputStream(args[0]), args[1]);
		int c;
		while ((c = reader.read()) != -1)
			System.out.println((char) c);
	}
}
No, it wasn't intentional. Well, at least I don't think so. I'll try and 
recover its "history", but its just part of the whole set of files I've 
routinely tested for the past few years! (I should document my unit tests 
better).  I assume some previous version of Java wrote it that way. It does 
make obvious, though, that the CharsetDecoder error defaults are different 
between the IBM and Sun VMs (and, we've had trouble in the past where the 
defaults change from one version to another). 

If you change your example to use "Replace" on error then you get the same 
behavior on both VMs. 

	 	Charset charset = Charset.forName("UTF-16");
	 	CharsetDecoder charsetDecoder = charset.newDecoder();
	 	charsetDecoder.onMalformedInput(CodingErrorAction.REPLACE);
		 Reader reader = new InputStreamReader(new FileInputStream(args
[0]), charsetDecoder);
		 int c;
		 while ((c = reader.read()) != -1)
		 		 System.out.println((char) c);
}

Can things be arranged so each "content type handler" set its own values for 
this type of error handling? It seems the XMLRootHander would be best off 
ignoring (replacing) them (since its looking for a "positive match"). But, in 
the past, we've enjoyed giving are editor users a choice when an error 
occurs ... e.g. "malformed input detected do you want to continue or cancel?". 
I'm not sure how to do that with this new system. 
Partial fix was to handle faulty describers so other describers still have a chance.

As the change you suggested, David, in core.runtime we have a requirement of
running on J2SE subsets that do not include java.nio. To do what you suggested
would require doing some exercise with reflection.
No java.nio!? How do those systems handle encoding/decoding? I thought java.nio 
was a "standard" part of Java 1.4. So, if core.runtime has to run on a subset 
of standard Java, then some of this encoding/decoding function doesn't belong 
at that level, that'd be my opinion, I mean. Even more concretely, in this 
case, if your "fix" is just to disable that provider as 'faulty', then there 
will be a bug open that object contributions depending on 
XMLRootElementContentDescriber would not work. (Or, do you mean it was just be 
disabled for that one pass, for that one file, in which case, you'd always need 
that sort of fall back behaviour for that one time.). 

BTW, I think this "invalid file" was formed by checking a UTF-16 files with 
single EOL into CVS, and then when checked back out, an 2 coded EOL was added. 
Or some similar "play" with end-of-lines. I suspect this will be moderately 
common.

More severely, for me to maintain our products current level of encoding 
support/behavior, I will have to use java.nio (e.g. to check differenct 
of "detected encoding" and "used encoding" (to know when an alias is being 
used) and have control over how its set/initialized.  I as going to propose 
some of these as fixes for core.runtime, but sounds like that would be a hard 
case to sell. I don't mind leaving them in my own XML version of 
ContentDescriber, as long as I can depend on it always being called. I assume I 
would put its priority as "high" and a child of runtime.xml. Do you forsee any 
problems with this approach?

Thanks in advance for any help or advice. 
Agreed that the content type support is being more restricted than it should,
but right now we don't have many choices.

Regardless the cirscumstances your file got into that state, you agree it is
invalid, right? 

Re: providing a personalized version of the XML content describer: you cannot
replace the default XML content provider. But the XML describer will hardly
classify any contents as invalid (currently it never does that), so you don't
need a new content type for XML. You need a more appropriate XML content
describer to be used by your XML-based content types.
No further action planned. We will log such exceptions only if in debug mode
(added a debug option for content type), and faulty describers will just be
skipped during that lookup.</WithStack>
    <WithOutStack>Using 0514 build. 
JRE is 
java version "1.4.2"
J9 - VM for the Java(TM) platform (build 2.1)
IBM J9SE VM (build 2.1, J2RE 1.4.2 IBM J9 build 20040422 (JIT enabled))

Works ok on Suns' JRE (1.4.2_03) but with IBM's its easy to exception from 
iFile.getContentDescription(), I'll attach test case. 


= = = = =
org.eclipse.core.internal.resources.ResourceException(/com.ibm.encoding.
resource.newtests/testfiles/xml/testUTF16.xml)[381]: sun.io.
MalformedInputException
	at sun.io.ByteToCharUnicode.flush(ByteToCharUnicode.java:227)
	at sun.nio.cs.StreamDecoder$ConverterSD.flushInto(StreamDecoder.java:305)
	at sun.nio.cs.StreamDecoder$ConverterSD.implRead(StreamDecoder.java:329)
	at sun.nio.cs.StreamDecoder.read(StreamDecoder.java:222)
	at java.io.InputStreamReader.read(InputStreamReader.java:207)
	at org.apache.xerces.impl.XMLEntityScanner.load(Unknown Source)
	at org.apache.xerces.impl.XMLEntityScanner.skipSpaces(Unknown Source)
	at org.apache.xerces.impl.XMLDocumentScannerImpl$PrologDispatcher.
dispatch(Unknown Source)
	at org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.
scanDocument(Unknown Source)
	at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)
	at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)
	at org.apache.xerces.parsers.XMLParser.parse(Unknown Source)
	at org.apache.xerces.parsers.AbstractSAXParser.parse(Unknown Source)
	at javax.xml.parsers.SAXParser.parse(Unknown Source)
	at org.eclipse.core.internal.content.XMLRootHandler.
parseContents(XMLRootHandler.java:163)
	at org.eclipse.core.runtime.content.XMLRootElementContentDescriber.
checkCriteria(XMLRootElementContentDescriber.java:62)
	at org.eclipse.core.runtime.content.XMLRootElementContentDescriber.
describe(XMLRootElementContentDescriber.java:87)
	at org.eclipse.core.internal.content.ContentType.describe(ContentType.java:
164)
	at org.eclipse.core.internal.content.ContentTypeManager.
internalFindContentTypesFor(ContentTypeManager.java:295)
	at org.eclipse.core.internal.content.ContentTypeManager.
getDescriptionFor(ContentTypeManager.java:262)
	at org.eclipse.core.internal.resources.ContentDescriptionManager.
readDescription(ContentDescriptionManager.java:57)
	at org.eclipse.core.internal.resources.ContentDescriptionManager.
getDescriptionFor(ContentDescriptionManager.java:42)
	at org.eclipse.core.internal.resources.File.getContentDescription(File.
java:239)
	at com.ibm.encoding.resource.tests.example.TestCodedReader.
doContentDescriptionTest(TestCodedReader.java:213)
	at com.ibm.encoding.resource.tests.example.TestCodedReader.
testFile123(TestCodedReader.java:206)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.
java:84)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.
java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.
invoke(DelegatingMethodAccessorImpl.java:59)
	at java.lang.reflect.Method.invoke(Method.java:390)
	at junit.framework.TestCase.runTest(TestCase.java:154)
	at junit.framework.TestCase.runBare(TestCase.java:127)
	at junit.framework.TestResult$1.protect(TestResult.java:106)
	at junit.framework.TestResult.runProtected(TestResult.java:124)
	at junit.framework.TestResult.run(TestResult.java:109)
	at junit.framework.TestCase.run(TestCase.java:118)
	at junit.framework.TestSuite.runTest(TestSuite.java:208)
	at junit.framework.TestSuite.run(TestSuite.java:203)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.
runTests(RemoteTestRunner.java:422)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.
run(RemoteTestRunner.java:306)
	at org.eclipse.pde.internal.junit.runtime.RemotePluginTestRunner.
main(RemotePluginTestRunner.java:30)
	at org.eclipse.pde.internal.junit.runtime.UITestApplication$1.
run(UITestApplication.java:90)
	at org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35)
	at org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:
106)
	at org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:2702)
	at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2394)
	at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1353)
	at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1324)
	at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:
243)
	at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:141)
	at org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:90)
	at org.eclipse.pde.internal.junit.runtime.UITestApplication.
run(UITestApplication.java:33)
	at org.eclipse.core.internal.runtime.PlatformActivator$1.
run(PlatformActivator.java:298)
	at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:
249)
	at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:
126)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.
java:84)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.
java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.
invoke(DelegatingMethodAccessorImpl.java:59)
	at java.lang.reflect.Method.invoke(Method.java:390)
	at org.eclipse.core.launcher.Main.basicRun(Main.java:269)
	at org.eclipse.core.launcher.Main.run(Main.java:722)
	at org.eclipse.core.launcher.Main.main(Main.java:706)
Created attachment 10718
junit test to demonstrate above error
David, it seems the mentioned file does not have a UTF-16 BOM. According to:

http://www.w3.org/TR/2004/REC-xml-20040204/#charencoding

it seems it should have. 

Of course, this does not invalidate the PR. I just thought I should mention.
Created attachment 10738
hex values of test file

I think it does -- testUTF16.xml in zip file? -- unless somethings getting
"lost in translation". Of course, I think some one's code some where may leave
the input stream positioned after the BOM :) [that works pretty well, and is
needed, for UTF-8 BOMs, I've always found the UTF-16 boms a little more
problematic, sometimes expected, sometimes not, as the different results for
two VM's would seem to indicate]

The attached image show's what the hex values look like for the file I'm
looking at ... FFFE, right?
My fault... yes, the right one has the right BOM... I was trying with
"test-UTF-16.xml" in testfiles\genedFiles...\xml. 

The reason we were failing is that we want to let IOExceptions flow to the
caller, but sun.io.MalformedInputException is an I/O exception
(CharConversionException). We will have to handle those (and let
non-encoding-related ones flow).
Since we are reading the contents right in the beginning in the handling it to
describers, any "real" I/O exceptions will happen right way. When calling
describers, I/O exceptions will not be severe, so they are just logged (not thrown).

Fixed and released to HEAD as described above.
Actually the problem itself still occurs...
David, that file has an odd number of bytes. The IOException happens when trying
to decode the last char. Is this intentional? The following example would cause
a CharConversionException to occur with IBM's JRE:

import java.io.*;
public class Simple {
	public static void main(String[] args) throws IOException {
		Reader reader = new InputStreamReader(new FileInputStream(args[0]), args[1]);
		int c;
		while ((c = reader.read()) != -1)
			System.out.println((char) c);
	}
}
No, it wasn't intentional. Well, at least I don't think so. I'll try and 
recover its "history", but its just part of the whole set of files I've 
routinely tested for the past few years! (I should document my unit tests 
better).  I assume some previous version of Java wrote it that way. It does 
make obvious, though, that the CharsetDecoder error defaults are different 
between the IBM and Sun VMs (and, we've had trouble in the past where the 
defaults change from one version to another). 

If you change your example to use "Replace" on error then you get the same 
behavior on both VMs. 

	 	Charset charset = Charset.forName("UTF-16");
	 	CharsetDecoder charsetDecoder = charset.newDecoder();
	 	charsetDecoder.onMalformedInput(CodingErrorAction.REPLACE);
		 Reader reader = new InputStreamReader(new FileInputStream(args
[0]), charsetDecoder);
		 int c;
		 while ((c = reader.read()) != -1)
		 		 System.out.println((char) c);
}

Can things be arranged so each "content type handler" set its own values for 
this type of error handling? It seems the XMLRootHander would be best off 
ignoring (replacing) them (since its looking for a "positive match"). But, in 
the past, we've enjoyed giving are editor users a choice when an error 
occurs ... e.g. "malformed input detected do you want to continue or cancel?". 
I'm not sure how to do that with this new system. 
Partial fix was to handle faulty describers so other describers still have a chance.

As the change you suggested, David, in core.runtime we have a requirement of
running on J2SE subsets that do not include java.nio. To do what you suggested
would require doing some exercise with reflection.
No java.nio!? How do those systems handle encoding/decoding? I thought java.nio 
was a "standard" part of Java 1.4. So, if core.runtime has to run on a subset 
of standard Java, then some of this encoding/decoding function doesn't belong 
at that level, that'd be my opinion, I mean. Even more concretely, in this 
case, if your "fix" is just to disable that provider as 'faulty', then there 
will be a bug open that object contributions depending on 
XMLRootElementContentDescriber would not work. (Or, do you mean it was just be 
disabled for that one pass, for that one file, in which case, you'd always need 
that sort of fall back behaviour for that one time.). 

BTW, I think this "invalid file" was formed by checking a UTF-16 files with 
single EOL into CVS, and then when checked back out, an 2 coded EOL was added. 
Or some similar "play" with end-of-lines. I suspect this will be moderately 
common.

More severely, for me to maintain our products current level of encoding 
support/behavior, I will have to use java.nio (e.g. to check differenct 
of "detected encoding" and "used encoding" (to know when an alias is being 
used) and have control over how its set/initialized.  I as going to propose 
some of these as fixes for core.runtime, but sounds like that would be a hard 
case to sell. I don't mind leaving them in my own XML version of 
ContentDescriber, as long as I can depend on it always being called. I assume I 
would put its priority as "high" and a child of runtime.xml. Do you forsee any 
problems with this approach?

Thanks in advance for any help or advice. 
Agreed that the content type support is being more restricted than it should,
but right now we don't have many choices.

Regardless the cirscumstances your file got into that state, you agree it is
invalid, right? 

Re: providing a personalized version of the XML content describer: you cannot
replace the default XML content provider. But the XML describer will hardly
classify any contents as invalid (currently it never does that), so you don't
need a new content type for XML. You need a more appropriate XML content
describer to be used by your XML-based content types.
No further action planned. We will log such exceptions only if in debug mode
(added a debug option for content type), and faulty describers will just be
skipped during that lookup.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="62444" />
    <CreationDate amount="2004-05-17 03:39:00 -0400" />
    <DupId amount="61545" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="UI" />
    <Version amount="3.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="major" />
    <Summery>[Workbench] Workbench calls setFocus before createPartControl is called</Summery>
    <Patches amount="0" />
    <Stacktraces amount="1">
      <Stacktrace timestamp="1437341131404">
        <Exception>java.lang.NullPointerException</Exception>
        <Reason />
        <Frames>
          <Frame depth="0">java.lang.Throwable.&lt;init&gt;(Throwable.java)</Frame>
          <Frame depth="1">java.lang.Throwable.&lt;init&gt;(Throwable.java:73)</Frame>
          <Frame depth="2">java.lang.NullPointerException.&lt;init&gt;(NullPointerException.java:60)</Frame>
          <Frame depth="3">org.eclipse.jdt.internal.ui.packageview.PackageExplorerPart.setFocus(PackageExplorerPart.java)</Frame>
          <Frame depth="4">org.eclipse.ui.internal.WorkbenchPage$2.run(WorkbenchPage.java:469)</Frame>
          <Frame depth="5">org.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java:607)</Frame>
          <Frame depth="6">org.eclipse.core.runtime.Platform.run(Platform.java:668)</Frame>
          <Frame depth="7">org.eclipse.ui.internal.WorkbenchPage.activatePart(WorkbenchPage.java:466)</Frame>
          <Frame depth="8">org.eclipse.ui.internal.WorkbenchPage.onActivate(WorkbenchPage.java:1991)</Frame>
          <Frame depth="9">org.eclipse.ui.internal.WorkbenchWindow$7.run(WorkbenchWindow.java:1910)</Frame>
          <Frame depth="10">org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:69)</Frame>
          <Frame depth="11">org.eclipse.ui.internal.WorkbenchWindow.setActivePage(WorkbenchWindow.java:1897)</Frame>
          <Frame depth="12">org.eclipse.ui.internal.WorkbenchWindow.restoreState(WorkbenchWindow.java:1465)</Frame>
          <Frame depth="13">org.eclipse.ui.internal.Workbench.restoreState(Workbench.java:1206)</Frame>
          <Frame depth="14">org.eclipse.ui.internal.Workbench.access$10(Workbench.java:1173)</Frame>
          <Frame depth="15">org.eclipse.ui.internal.Workbench$13.run(Workbench.java:1084)</Frame>
          <Frame depth="16">org.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java:607)</Frame>
          <Frame depth="17">org.eclipse.core.runtime.Platform.run(Platform.java:668)</Frame>
          <Frame depth="18">org.eclipse.ui.internal.Workbench.restoreState(Workbench.java:1017)</Frame>
          <Frame depth="19">org.eclipse.ui.internal.WorkbenchConfigurer.restoreState(WorkbenchConfigurer.java:167)</Frame>
          <Frame depth="20">org.eclipse.ui.application.WorkbenchAdvisor.openWindows(WorkbenchAdvisor.java:648)</Frame>
          <Frame depth="21">org.eclipse.ui.internal.Workbench.init(Workbench.java:807)</Frame>
          <Frame depth="22">org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1301)</Frame>
          <Frame depth="23">org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:243)</Frame>
          <Frame depth="24">org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:141)</Frame>
          <Frame depth="25">org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:90)</Frame>
          <Frame depth="26">org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:298)</Frame>
          <Frame depth="27">org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:249)</Frame>
          <Frame depth="28">org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:126)</Frame>
          <Frame depth="29">sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)</Frame>
          <Frame depth="30">sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:79)</Frame>
          <Frame depth="31">sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:41)</Frame>
          <Frame depth="32">java.lang.reflect.Method.invoke(Method.java:386)</Frame>
          <Frame depth="33">org.eclipse.core.launcher.Main.basicRun(Main.java:269)</Frame>
          <Frame depth="34">org.eclipse.core.launcher.Main.run(Main.java:722)</Frame>
          <Frame depth="35">org.eclipse.core.launcher.Main.main(Main.java:706)</Frame>
        </Frames>
      </Stacktrace>
    </Stacktraces>
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="11">
        <Lines>
          <Line>- shutdown workbench with package explorer active</Line>
          <Line>- restart workbench.</Line>
          <Line>I'm unable to reproduce this... is it consistantly reproducable with the steps</Line>
          <Line>you've given?</Line>
          <Line>Kim I can reproduce it on every start-up with my test workspace. Setting</Line>
          <Line>breakpoints shows that I receive a setFocus call before I receive a</Line>
          <Line>createPartControl call. I will see how large my workspace is in zipped form</Line>
          <Line>Is this a custom perspective?  Dirk, can you reproduce this on a new "simpler"</Line>
          <Line>workspace perhaps we don't need your full workspace.</Line>
          <Line>This is a dup of bug 61545, for which we have been unable to get reproduceable</Line>
          <Line>steps.  Any hints would be helpful.</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="RESOLVED" />
    <resolution amount="DUPLICATE" />
    <WithStack>I20040514

SetFocus is called on PackageExplorerPart before createPartControl is called 
which results in the following NPE. This was different in the past.

!SESSION May 17, 2004 09:23:49.312 --------------------------------------------
-
eclipse.buildId=unknown
java.fullversion=J2RE 1.4.1 IBM J9 build 20040510 (JIT enabled)
BootLoader constants: OS=win32, ARCH=x86, WS=win32, NL=en_US
!ENTRY org.eclipse.core.runtime 4 2 May 17, 2004 09:23:49.322
!MESSAGE Problems occurred when invoking code from plug-
in: "org.eclipse.core.runtime".
!STACK 0
java.lang.NullPointerException
	at java.lang.Throwable.&lt;init&gt;(Throwable.java)
	at java.lang.Throwable.&lt;init&gt;(Throwable.java:73)
	at java.lang.NullPointerException.&lt;init&gt;(NullPointerException.java:60)
	at org.eclipse.jdt.internal.ui.packageview.PackageExplorerPart.setFocus
(PackageExplorerPart.java)
	at org.eclipse.ui.internal.WorkbenchPage$2.run(WorkbenchPage.java:469)
	at org.eclipse.core.internal.runtime.InternalPlatform.run
(InternalPlatform.java:607)
	at org.eclipse.core.runtime.Platform.run(Platform.java:668)
	at org.eclipse.ui.internal.WorkbenchPage.activatePart
(WorkbenchPage.java:466)
	at org.eclipse.ui.internal.WorkbenchPage.onActivate
(WorkbenchPage.java:1991)
	at org.eclipse.ui.internal.WorkbenchWindow$7.run
(WorkbenchWindow.java:1910)
	at org.eclipse.swt.custom.BusyIndicator.showWhile
(BusyIndicator.java:69)
	at org.eclipse.ui.internal.WorkbenchWindow.setActivePage
(WorkbenchWindow.java:1897)
	at org.eclipse.ui.internal.WorkbenchWindow.restoreState
(WorkbenchWindow.java:1465)
	at org.eclipse.ui.internal.Workbench.restoreState(Workbench.java:1206)
	at org.eclipse.ui.internal.Workbench.access$10(Workbench.java:1173)
	at org.eclipse.ui.internal.Workbench$13.run(Workbench.java:1084)
	at org.eclipse.core.internal.runtime.InternalPlatform.run
(InternalPlatform.java:607)
	at org.eclipse.core.runtime.Platform.run(Platform.java:668)
	at org.eclipse.ui.internal.Workbench.restoreState(Workbench.java:1017)
	at org.eclipse.ui.internal.WorkbenchConfigurer.restoreState
(WorkbenchConfigurer.java:167)
	at org.eclipse.ui.application.WorkbenchAdvisor.openWindows
(WorkbenchAdvisor.java:648)
	at org.eclipse.ui.internal.Workbench.init(Workbench.java:807)
	at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1301)
	at org.eclipse.ui.internal.Workbench.createAndRunWorkbench
(Workbench.java:243)
	at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:141)
	at org.eclipse.ui.internal.ide.IDEApplication.run
(IDEApplication.java:90)
	at org.eclipse.core.internal.runtime.PlatformActivator$1.run
(PlatformActivator.java:298)
	at org.eclipse.core.runtime.adaptor.EclipseStarter.run
(EclipseStarter.java:249)
	at org.eclipse.core.runtime.adaptor.EclipseStarter.run
(EclipseStarter.java:126)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke
(NativeMethodAccessorImpl.java:79)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke
(DelegatingMethodAccessorImpl.java:41)
	at java.lang.reflect.Method.invoke(Method.java:386)
	at org.eclipse.core.launcher.Main.basicRun(Main.java:269)
	at org.eclipse.core.launcher.Main.run(Main.java:722)
	at org.eclipse.core.launcher.Main.main(Main.java:706)

Steps to reproduce:

- shutdown workbench with package explorer active
- restart workbench.
I'm unable to reproduce this... is it consistantly reproducable with the steps
you've given?
Kim I can reproduce it on every start-up with my test workspace. Setting 
breakpoints shows that I receive a setFocus call before I receive a 
createPartControl call. I will see how large my workspace is in zipped form
Is this a custom perspective?  Dirk, can you reproduce this on a new "simpler" 
workspace perhaps we don't need your full workspace.
This is a dup of bug 61545, for which we have been unable to get reproduceable
steps.  Any hints would be helpful.


*** This bug has been marked as a duplicate of 61545 ***</WithStack>
    <WithOutStack>I20040514

SetFocus is called on PackageExplorerPart before createPartControl is called 
which results in the following NPE. This was different in the past.

!SESSION May 17, 2004 09:23:49.312 --------------------------------------------
-
eclipse.buildId=unknown
java.fullversion=J2RE 1.4.1 IBM J9 build 20040510 (JIT enabled)
BootLoader constants: OS=win32, ARCH=x86, WS=win32, NL=en_US
!ENTRY org.eclipse.core.runtime 4 2 May 17, 2004 09:23:49.322
!MESSAGE Problems occurred when invoking code from plug-
in: "org.eclipse.core.runtime".
!STACK 0


Steps to reproduce:

- shutdown workbench with package explorer active
- restart workbench.
I'm unable to reproduce this... is it consistantly reproducable with the steps
you've given?
Kim I can reproduce it on every start-up with my test workspace. Setting 
breakpoints shows that I receive a setFocus call before I receive a 
createPartControl call. I will see how large my workspace is in zipped form
Is this a custom perspective?  Dirk, can you reproduce this on a new "simpler" 
workspace perhaps we don't need your full workspace.
This is a dup of bug 61545, for which we have been unable to get reproduceable
steps.  Any hints would be helpful.


*** This bug has been marked as a duplicate of 61545 ***</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="62445" />
    <CreationDate amount="2004-05-17 04:25:00 -0400" />
    <DupId amount="63278" />
    <classification amount="Eclipse" />
    <Product amount="JDT" />
    <component amount="Text" />
    <Version amount="3.0" />
    <rep_platform amount="All" />
    <op_sys amount="All" />
    <priority amount="P4" />
    <bug_severity amount="enhancement" />
    <Summery>[find/replace] Find in the class viewer with no attached source</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="DUPLICATE" />
    <WithStack>The class viewer (which is opened when "Open Declaration" of some type/class 
whose source is not attatched), would be more useful if we can search it for a 
certain field or method, I think.
this information is in the Outline view
Sorry for not having explain the problem clearly.

What I want is to perform "Find(Ctrl+F/without Replace?)" in the "Class File 
Editor", the "Class File Editor" is the one which is opened when "Open 
Declaration" of some type/class whose source code is not availible.

is it clear now? thank's for your patience.

Best Regards.
Sorry for not having explain the problem clearly.

What I want is to perform "Find(Ctrl+F/without Replace?)" in the "Class File 
Editor", the "Class File Editor" is the one which is opened when "Open 
Declaration" of some type/class whose source code is not availible.
ps: the eclipse version currently I use is "eclipse-SDK-I20040518-win32".

is it clear now? thank's for your patience.

Best Regards.
I understood your request but since you find all that information in the Outline
view much quicker why would you use "Find"?


*** This bug has been marked as a duplicate of 63278 ***</WithStack>
    <WithOutStack>The class viewer (which is opened when "Open Declaration" of some type/class 
whose source is not attatched), would be more useful if we can search it for a 
certain field or method, I think.
this information is in the Outline view
Sorry for not having explain the problem clearly.

What I want is to perform "Find(Ctrl+F/without Replace?)" in the "Class File 
Editor", the "Class File Editor" is the one which is opened when "Open 
Declaration" of some type/class whose source code is not availible.

is it clear now? thank's for your patience.

Best Regards.
Sorry for not having explain the problem clearly.

What I want is to perform "Find(Ctrl+F/without Replace?)" in the "Class File 
Editor", the "Class File Editor" is the one which is opened when "Open 
Declaration" of some type/class whose source code is not availible.
ps: the eclipse version currently I use is "eclipse-SDK-I20040518-win32".

is it clear now? thank's for your patience.

Best Regards.
I understood your request but since you find all that information in the Outline
view much quicker why would you use "Find"?


*** This bug has been marked as a duplicate of 63278 ***</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="62446" />
    <CreationDate amount="2004-05-17 04:26:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="JDT" />
    <component amount="UI" />
    <Version amount="3.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>[search] Query should listen the Java element deltas</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="2">
      <source_code type="class">
        <location start="23" end="103" />
        <code>public class A {
	public void foo() {
		bar();
	}
	
	public void bar() {
		
	}
}</code>
      </source_code>
      <source_code type="functioncall">
        <location start="105" end="138" />
        <code>- search for references to bar();</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="1">
      <Enumeration lines="21">
        <Lines>
          <Line>- the search view still shows foo</Line>
          <Line>- toggle some filters</Line>
          <Line>- the foo method is now rendered with a question marks</Line>
          <Line>Thomas, what do we have to do to solve this for 3.0</Line>
          <Line>We were not listening for element changes in the case of this query. The match</Line>
          <Line>is now removed when you rename the method.</Line>
          <Line>I think we could better in cases like this, though (try matching the removed</Line>
          <Line>element to a new one?). I'll leave the PR open.</Line>
          <Line>Thomas, we should try to do better here since the old search tried to relocate</Line>
          <Line>the match.</Line>
          <Line>Unfortunately, we can't update the elemenet of a match without additional API.</Line>
          <Line>If you add a new match instead, we're not getting the proper positions in dirty</Line>
          <Line>editors.</Line>
          <Line>We're probably stuck with the current behaviour for 3.0. Dirk?</Line>
          <Line>*** Bug 65530 has been marked as a duplicate of this bug. ***</Line>
          <Line>Given all the other things we have on the plan I opt to postpone &gt; 3.0 now.</Line>
          <Line>Thomas any comments.</Line>
          <Line>I agree. It's getting late in the cycle and the changes would be way outside my</Line>
          <Line>comfort zone.</Line>
          <Line>Martin, we should try to do better here for 3.1.</Line>
          <Line>Postponing until 3.2</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="ASSIGNED" />
    <resolution amount="" />
    <WithStack>I20040514

Test case:

public class A {
	public void foo() {
		bar();
	}
	
	public void bar() {
		
	}
}

- search for references to bar();
- rename foo

observe: 

- the search view still shows foo
- toggle some filters
- the foo method is now rendered with a question marks
Thomas, what do we have to do to solve this for 3.0
We were not listening for element changes in the case of this query. The match
is now removed when you rename the method.
I think we could better in cases like this, though (try matching the removed
element to a new one?). I'll leave the PR open.
Thomas, we should try to do better here since the old search tried to relocate 
the match.
Unfortunately, we can't update the elemenet of a match without additional API.
If you add a new match instead, we're not getting the proper positions in dirty
editors.
We're probably stuck with the current behaviour for 3.0. Dirk?
*** Bug 65530 has been marked as a duplicate of this bug. ***
Given all the other things we have on the plan I opt to postpone &gt; 3.0 now. 
Thomas any comments.
I agree. It's getting late in the cycle and the changes would be way outside my
comfort zone.
Martin, we should try to do better here for 3.1. 
Postponing until 3.2</WithStack>
    <WithOutStack>I20040514

Test case:

public class A {
	public void foo() {
		bar();
	}
	
	public void bar() {
		
	}
}

- search for references to bar();
- rename foo

observe: 

- the search view still shows foo
- toggle some filters
- the foo method is now rendered with a question marks
Thomas, what do we have to do to solve this for 3.0
We were not listening for element changes in the case of this query. The match
is now removed when you rename the method.
I think we could better in cases like this, though (try matching the removed
element to a new one?). I'll leave the PR open.
Thomas, we should try to do better here since the old search tried to relocate 
the match.
Unfortunately, we can't update the elemenet of a match without additional API.
If you add a new match instead, we're not getting the proper positions in dirty
editors.
We're probably stuck with the current behaviour for 3.0. Dirk?
*** Bug 65530 has been marked as a duplicate of this bug. ***
Given all the other things we have on the plan I opt to postpone &gt; 3.0 now. 
Thomas any comments.
I agree. It's getting late in the cycle and the changes would be way outside my
comfort zone.
Martin, we should try to do better here for 3.1. 
Postponing until 3.2</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="62447" />
    <CreationDate amount="2004-05-17 04:54:00 -0400" />
    <DupId amount="" />
    <classification amount="Tools" />
    <Product amount="AspectJ" />
    <component amount="AJBrowser" />
    <Version amount="unspecified" />
    <rep_platform amount="All" />
    <op_sys amount="Windows NT" />
    <priority amount="P3" />
    <bug_severity amount="critical" />
    <Summery>JBuilder don't recognize aspect keyword</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="INVALID" />
    <WithStack>JBuilder don't recognize aspect keyword, 
For ex when we create new aspect:

public aspect MyAspect {

}
It gives error on aspect keyword.
Mik, shouldn't this bug be raised against the JBuilder Aspectj project (http://sourceforge.net/projects/
aspectj4jbuildr/)? There's nothing we can do in the Aspectj source tree to fix it here.... If so, let's close 
this bug and open one against the JBuilder project...
Moved to: http://sourceforge.net/tracker/index.php?
func=detail&amp;aid=1012604&amp;group_id=69326&amp;atid=524147
Fix released as part of AspectJ 1.2.1
More precisely, the status of this bug is "moved" (to sourceforge) and 
not "fixed".</WithStack>
    <WithOutStack>JBuilder don't recognize aspect keyword, 
For ex when we create new aspect:

public aspect MyAspect {

}
It gives error on aspect keyword.
Mik, shouldn't this bug be raised against the JBuilder Aspectj project (http://sourceforge.net/projects/
aspectj4jbuildr/)? There's nothing we can do in the Aspectj source tree to fix it here.... If so, let's close 
this bug and open one against the JBuilder project...
Moved to: http://sourceforge.net/tracker/index.php?
func=detail&amp;aid=1012604&amp;group_id=69326&amp;atid=524147
Fix released as part of AspectJ 1.2.1
More precisely, the status of this bug is "moved" (to sourceforge) and 
not "fixed".</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="62448" />
    <CreationDate amount="2004-05-17 05:16:00 -0400" />
    <DupId amount="60327" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="Debug" />
    <Version amount="3.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P2" />
    <bug_severity amount="normal" />
    <Summery>NPE while starting eclipse</Summery>
    <Patches amount="0" />
    <Stacktraces amount="1">
      <Stacktrace timestamp="1437341131404">
        <Exception>java.lang.NullPointerException</Exception>
        <Reason />
        <Frames>
          <Frame depth="0">org.eclipse.debug.internal.ui.views.launch.LaunchView.perspectiveChanged(LaunchView.java:614)</Frame>
          <Frame depth="1">org.eclipse.ui.internal.PerspectiveListenerListOld$2.run(PerspectiveListenerListOld.java:58)</Frame>
          <Frame depth="2">org.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java:608)</Frame>
          <Frame depth="3">org.eclipse.core.runtime.Platform.run(Platform.java:668)</Frame>
          <Frame depth="4">org.eclipse.ui.internal.PerspectiveListenerListOld.firePerspectiveChanged(PerspectiveListenerListOld.java:56)</Frame>
          <Frame depth="5">org.eclipse.ui.internal.WorkbenchWindow.firePerspectiveChanged(WorkbenchWindow.java:913)</Frame>
          <Frame depth="6">org.eclipse.ui.internal.WorkbenchPage.showActionSet(WorkbenchPage.java:2918)</Frame>
          <Frame depth="7">org.eclipse.debug.internal.ui.views.launch.LaunchViewContextListener.showDebugActionSet(LaunchViewContextListener.java:821)</Frame>
          <Frame depth="8">org.eclipse.debug.internal.ui.views.launch.LaunchViewContextListener.&lt;init&gt;(LaunchViewContextListener.java:135)</Frame>
          <Frame depth="9">org.eclipse.debug.internal.ui.views.launch.LaunchView.partOpened(LaunchView.java:656)</Frame>
          <Frame depth="10">org.eclipse.ui.internal.PartListenerList$5.run(PartListenerList.java:105)</Frame>
          <Frame depth="11">org.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java:608)</Frame>
          <Frame depth="12">org.eclipse.core.runtime.Platform.run(Platform.java:668)</Frame>
          <Frame depth="13">org.eclipse.ui.internal.PartListenerList.firePartOpened(PartListenerList.java:103)</Frame>
          <Frame depth="14">org.eclipse.ui.internal.WorkbenchPage.firePartOpened(WorkbenchPage.java:1404)</Frame>
          <Frame depth="15">org.eclipse.ui.internal.PartPane.createChildControl(PartPane.java:138)</Frame>
          <Frame depth="16">org.eclipse.ui.internal.ViewPane.createChildControl(ViewPane.java:140)</Frame>
          <Frame depth="17">org.eclipse.ui.internal.PartPane.createControl(PartPane.java:170)</Frame>
          <Frame depth="18">org.eclipse.ui.internal.ViewPane.createControl(ViewPane.java:128)</Frame>
          <Frame depth="19">org.eclipse.ui.internal.PartStack.refreshPresentationSelection(PartStack.java:912)</Frame>
          <Frame depth="20">org.eclipse.ui.internal.PartStack.createControl(PartStack.java:463)</Frame>
          <Frame depth="21">org.eclipse.ui.internal.PartStack.createControl(PartStack.java:363)</Frame>
          <Frame depth="22">org.eclipse.ui.internal.PartSashContainer.createControl(PartSashContainer.java:427)</Frame>
          <Frame depth="23">org.eclipse.ui.internal.PerspectiveHelper.activate(PerspectiveHelper.java:156)</Frame>
          <Frame depth="24">org.eclipse.ui.internal.Perspective.onActivate(Perspective.java:718)</Frame>
          <Frame depth="25">org.eclipse.ui.internal.WorkbenchPage.onActivate(WorkbenchPage.java:1991)</Frame>
          <Frame depth="26">org.eclipse.ui.internal.WorkbenchWindow$7.run(WorkbenchWindow.java:1907)</Frame>
          <Frame depth="27">org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:69)</Frame>
          <Frame depth="28">org.eclipse.ui.internal.WorkbenchWindow.setActivePage(WorkbenchWindow.java:1894)</Frame>
          <Frame depth="29">org.eclipse.ui.internal.WorkbenchWindow.restoreState(WorkbenchWindow.java:1462)</Frame>
          <Frame depth="30">org.eclipse.ui.internal.Workbench.restoreState(Workbench.java:1216)</Frame>
          <Frame depth="31">org.eclipse.ui.internal.Workbench.access$10(Workbench.java:1183)</Frame>
          <Frame depth="32">org.eclipse.ui.internal.Workbench$13.run(Workbench.java:1094)</Frame>
          <Frame depth="33">org.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java:608)</Frame>
          <Frame depth="34">org.eclipse.core.runtime.Platform.run(Platform.java:668)</Frame>
          <Frame depth="35">org.eclipse.ui.internal.Workbench.restoreState(Workbench.java:1027)</Frame>
          <Frame depth="36">org.eclipse.ui.internal.WorkbenchConfigurer.restoreState(WorkbenchConfigurer.java:167)</Frame>
          <Frame depth="37">org.eclipse.ui.application.WorkbenchAdvisor.openWindows(WorkbenchAdvisor.java:652)</Frame>
          <Frame depth="38">org.eclipse.ui.internal.Workbench.init(Workbench.java:817)</Frame>
          <Frame depth="39">org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1311)</Frame>
          <Frame depth="40">org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:253)</Frame>
          <Frame depth="41">org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:141)</Frame>
          <Frame depth="42">org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:97)</Frame>
          <Frame depth="43">org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:299)</Frame>
          <Frame depth="44">org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:256)</Frame>
          <Frame depth="45">org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:127)</Frame>
          <Frame depth="46">sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)</Frame>
          <Frame depth="47">sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)</Frame>
          <Frame depth="48">sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)</Frame>
          <Frame depth="49">java.lang.reflect.Method.invoke(Method.java:324)</Frame>
          <Frame depth="50">org.eclipse.core.launcher.Main.basicRun(Main.java:184)</Frame>
          <Frame depth="51">org.eclipse.core.launcher.Main.run(Main.java:637)</Frame>
          <Frame depth="52">org.eclipse.core.launcher.Main.main(Main.java:621)</Frame>
        </Frames>
      </Stacktrace>
    </Stacktraces>
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="DUPLICATE" />
    <WithStack>I'm using nightly build N200405170010. I know it's a little it dangerous but I
need it...

Perhaps it's a know problem but when I launch eclipse using this build, I always
get following NPE:
!ENTRY org.eclipse.core.runtime 4 2 May 17, 2004 11:00:08.268
!MESSAGE Problems occurred when invoking code from plug-in:
"org.eclipse.core.runtime".
!STACK 0
java.lang.NullPointerException
        at
org.eclipse.debug.internal.ui.views.launch.LaunchView.perspectiveChanged(LaunchView.java:614)
        at
org.eclipse.ui.internal.PerspectiveListenerListOld$2.run(PerspectiveListenerListOld.java:58)
        at
org.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java:608)
        at org.eclipse.core.runtime.Platform.run(Platform.java:668)
        at
org.eclipse.ui.internal.PerspectiveListenerListOld.firePerspectiveChanged(PerspectiveListenerListOld.java:56)
        at
org.eclipse.ui.internal.WorkbenchWindow.firePerspectiveChanged(WorkbenchWindow.java:913)
        at
org.eclipse.ui.internal.WorkbenchPage.showActionSet(WorkbenchPage.java:2918)
        at
org.eclipse.debug.internal.ui.views.launch.LaunchViewContextListener.showDebugActionSet(LaunchViewContextListener.java:821)
        at
org.eclipse.debug.internal.ui.views.launch.LaunchViewContextListener.&lt;init&gt;(LaunchViewContextListener.java:135)
        at
org.eclipse.debug.internal.ui.views.launch.LaunchView.partOpened(LaunchView.java:656)
        at org.eclipse.ui.internal.PartListenerList$5.run(PartListenerList.java:105)
        at
org.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java:608)
        at org.eclipse.core.runtime.Platform.run(Platform.java:668)
        at
org.eclipse.ui.internal.PartListenerList.firePartOpened(PartListenerList.java:103)
        at
org.eclipse.ui.internal.WorkbenchPage.firePartOpened(WorkbenchPage.java:1404)
        at org.eclipse.ui.internal.PartPane.createChildControl(PartPane.java:138)
        at org.eclipse.ui.internal.ViewPane.createChildControl(ViewPane.java:140)
        at org.eclipse.ui.internal.PartPane.createControl(PartPane.java:170)
        at org.eclipse.ui.internal.ViewPane.createControl(ViewPane.java:128)
        at
org.eclipse.ui.internal.PartStack.refreshPresentationSelection(PartStack.java:912)
        at org.eclipse.ui.internal.PartStack.createControl(PartStack.java:463)
        at org.eclipse.ui.internal.PartStack.createControl(PartStack.java:363)
        at
org.eclipse.ui.internal.PartSashContainer.createControl(PartSashContainer.java:427)
        at
org.eclipse.ui.internal.PerspectiveHelper.activate(PerspectiveHelper.java:156)
        at org.eclipse.ui.internal.Perspective.onActivate(Perspective.java:718)
        at org.eclipse.ui.internal.WorkbenchPage.onActivate(WorkbenchPage.java:1991)
        at org.eclipse.ui.internal.WorkbenchWindow$7.run(WorkbenchWindow.java:1907)
        at org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:69)
        at
org.eclipse.ui.internal.WorkbenchWindow.setActivePage(WorkbenchWindow.java:1894)
        at
org.eclipse.ui.internal.WorkbenchWindow.restoreState(WorkbenchWindow.java:1462)
        at org.eclipse.ui.internal.Workbench.restoreState(Workbench.java:1216)
        at org.eclipse.ui.internal.Workbench.access$10(Workbench.java:1183)
        at org.eclipse.ui.internal.Workbench$13.run(Workbench.java:1094)
        at
org.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java:608)
        at org.eclipse.core.runtime.Platform.run(Platform.java:668)
        at org.eclipse.ui.internal.Workbench.restoreState(Workbench.java:1027)
        at
org.eclipse.ui.internal.WorkbenchConfigurer.restoreState(WorkbenchConfigurer.java:167)
        at
org.eclipse.ui.application.WorkbenchAdvisor.openWindows(WorkbenchAdvisor.java:652)
        at org.eclipse.ui.internal.Workbench.init(Workbench.java:817)
        at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1311)
        at
org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:253)
        at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:141)
        at org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:97)
        at
org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:299)
        at
org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:256)
        at
org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:127)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:324)
        at org.eclipse.core.launcher.Main.basicRun(Main.java:184)
        at org.eclipse.core.launcher.Main.run(Main.java:637)
        at org.eclipse.core.launcher.Main.main(Main.java:621)

Not usre if I should open it against debug-ui or core-ui, please reassign if
necessary or cancel if this is only a temporary issue...
I think this is due to our fix for bug 61868, which needs to be reverted once 
bug 61937 is fixed.
(But perhaps we can still protect against the problem with the current 
implementation? I'm seeing the problem too, running with the latest plugins).


*** This bug has been marked as a duplicate of 60327 ***</WithStack>
    <WithOutStack>I'm using nightly build N200405170010. I know it's a little it dangerous but I
need it...

Perhaps it's a know problem but when I launch eclipse using this build, I always
get following NPE:
!ENTRY org.eclipse.core.runtime 4 2 May 17, 2004 11:00:08.268
!MESSAGE Problems occurred when invoking code from plug-in:
"org.eclipse.core.runtime".
!STACK 0


Not usre if I should open it against debug-ui or core-ui, please reassign if
necessary or cancel if this is only a temporary issue...
I think this is due to our fix for bug 61868, which needs to be reverted once 
bug 61937 is fixed.
(But perhaps we can still protect against the problem with the current 
implementation? I'm seeing the problem too, running with the latest plugins).


*** This bug has been marked as a duplicate of 60327 ***</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="62449" />
    <CreationDate amount="2004-05-17 05:35:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="Text" />
    <Version amount="3.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>[projection] collapse glyph flicker on expand/collapse</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="WORKSFORME" />
    <WithStack>When collapsing/expanding a region you can observe that all visible collapse 
glyphs [..] flicker.
Has been fixed long time ago.</WithStack>
    <WithOutStack>When collapsing/expanding a region you can observe that all visible collapse 
glyphs [..] flicker.
Has been fixed long time ago.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="62450" />
    <CreationDate amount="2004-05-17 05:53:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="Team" />
    <Version amount="3.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>(minor) Synchronize dialog "select all"/deselect buttons positioning</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="6">
        <Lines>
          <Line>1) Open the synchronize dialog: Tool bar&gt;synchronize item&gt;Synchronize...</Line>
          <Line>2) The select all/deselect all buttons are shown below the the scope group</Line>
          <Line>Since they affect the check box tree they should better be shown below the</Line>
          <Line>checkbox tree.</Line>
          <Line>and the buttons should be the same size.</Line>
          <Line>fixed.</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>1) Open the synchronize dialog: Tool bar&gt;synchronize item&gt;Synchronize...  
2) The select all/deselect all buttons are shown below the the scope group
Since they affect the check box tree they should better be shown below the 
checkbox tree.
and the buttons should be the same size.
fixed.</WithStack>
    <WithOutStack>1) Open the synchronize dialog: Tool bar&gt;synchronize item&gt;Synchronize...  
2) The select all/deselect all buttons are shown below the the scope group
Since they affect the check box tree they should better be shown below the 
checkbox tree.
and the buttons should be the same size.
fixed.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="62451" />
    <CreationDate amount="2004-05-17 06:00:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="JDT" />
    <component amount="Doc" />
    <Version amount="3.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows 2000" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>invoking JSP editor stalls system</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="6">
        <Lines>
          <Line>- Windows 2000 professional</Line>
          <Line>- J2SDK 1.4.2_04</Line>
          <Line>- Eclipse 3.0M8</Line>
          <Line>- Struts console plugin</Line>
          <Line>- Sysdeo Tomcat plugin 2.2.1</Line>
          <Line>- Tomcat 4.1.30</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="RESOLVED" />
    <resolution amount="INVALID" />
    <WithStack>Opening a JSP file in the JSP editor inside a Tomcat project makes the 
javaw.exe process on my system grab &gt;99% of CPU usage. After a while there are 
significant stalls of 30 seconds length or more. Closing the JSP file and 
restarting Eclipse brings everything back to normal behaviour.

The described behaviour occurs on all of three different systems on which we 
installed our development environment (a P3/800, a P4/2600 and a notebook). It 
is independent of the fact whether Tomcat has been started or not.

Opening the JSP files with the text editor does not lead to this behaviour.

Used development configuration:
- Windows 2000 professional
- J2SDK 1.4.2_04
- Eclipse 3.0M8
- Struts console plugin
- Sysdeo Tomcat plugin 2.2.1
- Tomcat 4.1.30

Best regards
Arne Siegel
Eclipse doesn't ship with a JSP editor. Please report this bug to the 
component providing the editor.</WithStack>
    <WithOutStack>Opening a JSP file in the JSP editor inside a Tomcat project makes the 
javaw.exe process on my system grab &gt;99% of CPU usage. After a while there are 
significant stalls of 30 seconds length or more. Closing the JSP file and 
restarting Eclipse brings everything back to normal behaviour.

The described behaviour occurs on all of three different systems on which we 
installed our development environment (a P3/800, a P4/2600 and a notebook). It 
is independent of the fact whether Tomcat has been started or not.

Opening the JSP files with the text editor does not lead to this behaviour.

Used development configuration:
- Windows 2000 professional
- J2SDK 1.4.2_04
- Eclipse 3.0M8
- Struts console plugin
- Sysdeo Tomcat plugin 2.2.1
- Tomcat 4.1.30

Best regards
Arne Siegel
Eclipse doesn't ship with a JSP editor. Please report this bug to the 
component providing the editor.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="62452" />
    <CreationDate amount="2004-05-17 06:11:00 -0400" />
    <DupId amount="" />
    <classification amount="Modeling" />
    <Product amount="EMF" />
    <component amount="Core" />
    <Version amount="2.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>...provider.&lt;model&gt;EditPlugin class generated in wrong place</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="VERIFIED" />
    <resolution amount="FIXED" />
    <WithStack>The xxxEditPlugin class generated for a model is created in the editor 
directory location rather than the edit directory location.
You should provide some additonal details, such as the value of the Edit 
Directory property and the Edit Plug-in Class property in the GenModel.
Edit Directory : /&lt;project&gt;/edit/src
Edit PluginClass : {unchanged from the default}

Editor Directory : /&lt;project&gt;/editor/src

Model Directory : /&lt;project&gt;/src
The fix is committed to CVS.
The fix is available in the latest build.
Move to verified as per bug 206558.</WithStack>
    <WithOutStack>The xxxEditPlugin class generated for a model is created in the editor 
directory location rather than the edit directory location.
You should provide some additonal details, such as the value of the Edit 
Directory property and the Edit Plug-in Class property in the GenModel.
Edit Directory : /&lt;project&gt;/edit/src
Edit PluginClass : {unchanged from the default}

Editor Directory : /&lt;project&gt;/editor/src

Model Directory : /&lt;project&gt;/src
The fix is committed to CVS.
The fix is available in the latest build.
Move to verified as per bug 206558.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="62453" />
    <CreationDate amount="2004-05-17 06:30:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="JDT" />
    <component amount="Core" />
    <Version amount="3.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Large File: Java builder not reacting on cancel</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="8">
      <Enumeration lines="15">
        <Lines>
          <Line>- waiting on &lt;0x1d321940&gt; (a org.eclipse.core.internal.jobs.Semaphore)</Line>
          <Line>at org.eclipse.core.internal.jobs.Semaphore.acquire(Semaphore.java:38)</Line>
          <Line>- locked &lt;0x1d321940&gt; (a org.eclipse.core.internal.jobs.Semaphore)</Line>
          <Line>at</Line>
          <Line>org.eclipse.core.internal.jobs.OrderedLock.doAcquire(OrderedLock.java:171)</Line>
          <Line>at org.eclipse.core.internal.jobs.OrderedLock.acquire(OrderedLock.java:105)</Line>
          <Line>at org.eclipse.core.internal.jobs.OrderedLock.acquire(OrderedLock.java:79)</Line>
          <Line>at</Line>
          <Line>org.eclipse.core.internal.resources.WorkManager.checkIn(WorkManager.java:96)</Line>
          <Line>at</Line>
          <Line>org.eclipse.core.internal.resources.Workspace.prepareOperation(Workspace.java:1629)</Line>
          <Line>at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1669)</Line>
          <Line>at</Line>
          <Line>org.eclipse.core.internal.events.NotificationManager$NotifyJob.run(NotificationManager.java:38)</Line>
          <Line>at org.eclipse.core.internal.jobs.Worker.run(Worker.java:66)</Line>
        </Lines>
      </Enumeration>
      <Enumeration lines="5">
        <Lines>
          <Line>- waiting on &lt;0x11d1c030&gt; (a org.eclipse.core.internal.jobs.WorkerPool)</Line>
          <Line>at org.eclipse.core.internal.jobs.WorkerPool.sleep(WorkerPool.java:209)</Line>
          <Line>- locked &lt;0x11d1c030&gt; (a org.eclipse.core.internal.jobs.WorkerPool)</Line>
          <Line>at org.eclipse.core.internal.jobs.WorkerPool.startJob(WorkerPool.java:236)</Line>
          <Line>at org.eclipse.core.internal.jobs.Worker.run(Worker.java:59)</Line>
        </Lines>
      </Enumeration>
      <Enumeration lines="8">
        <Lines>
          <Line>- waiting on &lt;0x12784be0&gt; (a</Line>
          <Line>org.eclipse.jdt.internal.core.search.indexing.IndexManager)</Line>
          <Line>at java.lang.Object.wait(Object.java:429)</Line>
          <Line>at</Line>
          <Line>org.eclipse.jdt.internal.core.search.processing.JobManager.run(JobManager.java:344)</Line>
          <Line>- locked &lt;0x12784be0&gt; (a</Line>
          <Line>org.eclipse.jdt.internal.core.search.indexing.IndexManager)</Line>
          <Line>at java.lang.Thread.run(Thread.java:534)</Line>
        </Lines>
      </Enumeration>
      <Enumeration lines="6">
        <Lines>
          <Line>- waiting on &lt;0x12726158&gt; (a java.lang.ref.ReferenceQueue$Lock)</Line>
          <Line>at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:111)</Line>
          <Line>- locked &lt;0x12726158&gt; (a java.lang.ref.ReferenceQueue$Lock)</Line>
          <Line>at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:127)</Line>
          <Line>at</Line>
          <Line>org.eclipse.jface.action.ActionContributionItem$ImageCache$ReferenceCleanerThread.run(ActionContributionItem.java:196)</Line>
        </Lines>
      </Enumeration>
      <Enumeration lines="7">
        <Lines>
          <Line>- waiting on &lt;0x11b6de18&gt; (a</Line>
          <Line>org.eclipse.osgi.framework.eventmgr.EventThread)</Line>
          <Line>at java.lang.Object.wait(Object.java:429)</Line>
          <Line>at</Line>
          <Line>org.eclipse.osgi.framework.eventmgr.EventThread.getNextEvent(EventThread.java:149)</Line>
          <Line>- locked &lt;0x11b6de18&gt; (a org.eclipse.osgi.framework.eventmgr.EventThread)</Line>
          <Line>at org.eclipse.osgi.framework.eventmgr.EventThread.run(EventThread.java:107)</Line>
        </Lines>
      </Enumeration>
      <Enumeration lines="7">
        <Lines>
          <Line>- waiting on &lt;0x11b6e018&gt; (a</Line>
          <Line>org.eclipse.osgi.framework.eventmgr.EventThread)</Line>
          <Line>at java.lang.Object.wait(Object.java:429)</Line>
          <Line>at</Line>
          <Line>org.eclipse.osgi.framework.eventmgr.EventThread.getNextEvent(EventThread.java:149)</Line>
          <Line>- locked &lt;0x11b6e018&gt; (a org.eclipse.osgi.framework.eventmgr.EventThread)</Line>
          <Line>at org.eclipse.osgi.framework.eventmgr.EventThread.run(EventThread.java:107)</Line>
        </Lines>
      </Enumeration>
      <Enumeration lines="54">
        <Lines>
          <Line>- waiting on &lt;0x228aaeb0&gt; (a org.eclipse.core.internal.jobs.ThreadJob)</Line>
          <Line>at org.eclipse.core.internal.jobs.ThreadJob.joinRun(ThreadJob.java:159)</Line>
          <Line>- locked &lt;0x228aaeb0&gt; (a org.eclipse.core.internal.jobs.ThreadJob)</Line>
          <Line>at org.eclipse.core.internal.jobs.ImplicitJobs.begin(ImplicitJobs.java:87)</Line>
          <Line>at</Line>
          <Line>org.eclipse.core.internal.jobs.ImplicitJobs.suspend(ImplicitJobs.java:189)</Line>
          <Line>at org.eclipse.core.internal.jobs.JobManager.suspend(JobManager.java:994)</Line>
          <Line>at</Line>
          <Line>org.eclipse.ltk.ui.refactoring.RefactoringWizardOpenOperation.run(RefactoringWizardOpenOperation.java:108)</Line>
          <Line>at</Line>
          <Line>org.eclipse.jdt.internal.ui.refactoring.actions.RefactoringStarter.activate(RefactoringStarter.java:40)</Line>
          <Line>at</Line>
          <Line>org.eclipse.jdt.internal.ui.refactoring.UserInterfaceStarter.activate(UserInterfaceStarter.java:54)</Line>
          <Line>at</Line>
          <Line>org.eclipse.jdt.internal.ui.refactoring.reorg.RenameUserInterfaceStarter.activate(RenameUserInterfaceStarter.java:113)</Line>
          <Line>at</Line>
          <Line>org.eclipse.jdt.internal.ui.refactoring.actions.RenameResourceAction.run(RenameResourceAction.java:64)</Line>
          <Line>at org.eclipse.jdt.ui.actions.RenameAction.run(RenameAction.java:118)</Line>
          <Line>at</Line>
          <Line>org.eclipse.jdt.ui.actions.SelectionDispatchAction.dispatchRun(SelectionDispatchAction.java:212)</Line>
          <Line>at</Line>
          <Line>org.eclipse.jdt.ui.actions.SelectionDispatchAction.run(SelectionDispatchAction.java:188)</Line>
          <Line>at org.eclipse.jface.action.Action.runWithEvent(Action.java:881)</Line>
          <Line>at</Line>
          <Line>org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection(ActionContributionItem.java:899)</Line>
          <Line>at</Line>
          <Line>org.eclipse.jface.action.ActionContributionItem.access$2(ActionContributionItem.java:850)</Line>
          <Line>at</Line>
          <Line>org.eclipse.jface.action.ActionContributionItem$7.handleEvent(ActionContributionItem.java:769)</Line>
          <Line>at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)</Line>
          <Line>at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:796)</Line>
          <Line>at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:2725)</Line>
          <Line>at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2390)</Line>
          <Line>at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1353)</Line>
          <Line>at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1324)</Line>
          <Line>at</Line>
          <Line>org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:243)</Line>
          <Line>at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:141)</Line>
          <Line>at org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:90)</Line>
          <Line>at</Line>
          <Line>org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:298)</Line>
          <Line>at</Line>
          <Line>org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:249)</Line>
          <Line>at</Line>
          <Line>org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:126)</Line>
          <Line>at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)</Line>
          <Line>at</Line>
          <Line>sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)</Line>
          <Line>at</Line>
          <Line>sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)</Line>
          <Line>at java.lang.reflect.Method.invoke(Method.java:324)</Line>
          <Line>at org.eclipse.core.launcher.Main.basicRun(Main.java:269)</Line>
          <Line>at org.eclipse.core.launcher.Main.run(Main.java:722)</Line>
          <Line>at org.eclipse.core.launcher.Main.main(Main.java:706)</Line>
        </Lines>
      </Enumeration>
      <Enumeration lines="12">
        <Lines>
          <Line>- DiagnoseParser#scopeTrialCheck: limit the depth of scopeTrialCheck recursive</Line>
          <Line>call</Line>
          <Line>- DiagnoseParser#diagnoseParse: stop diagnose when the maximum errors per unit</Line>
          <Line>is reached.</Line>
          <Line>- CompilationUnit#buildStructure: diagnose only one syntax error when it's</Line>
          <Line>possible</Line>
          <Line>- SourceInder#indexDocument: diagnose only one syntax error</Line>
          <Line>Created attachment 11270</Line>
          <Line>diagnose performance improvment</Line>
          <Line>Fixed and released.</Line>
          <Line>David, could you please verify this one?</Line>
          <Line>Verified for 3.0RC1</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="VERIFIED" />
    <resolution amount="FIXED" />
    <WithStack>I200405131600

I was trying to reproduce bug 41830. To do this I copied a large zip into my
workspace and then renamed it to have a .java ending. Since auto-build is on the
builder tried to compile this file (which of course has no valid Java source). I
disabled auto-build and cancelled the job but the Java still builder uses 100%
CPU after 5 minutes.

Here's the stack dump:
Full thread dump Java HotSpot(TM) Client VM (1.4.2_03-b02 mixed mode):

"Worker-63" prio=5 tid=0x03e63698 nid=0x98c in Object.wait() [5a8f000..5a8fd8c]
        at java.lang.Object.wait(Native Method)
        - waiting on &lt;0x1d321940&gt; (a org.eclipse.core.internal.jobs.Semaphore)
        at org.eclipse.core.internal.jobs.Semaphore.acquire(Semaphore.java:38)
        - locked &lt;0x1d321940&gt; (a org.eclipse.core.internal.jobs.Semaphore)
        at
org.eclipse.core.internal.jobs.OrderedLock.doAcquire(OrderedLock.java:171)
        at org.eclipse.core.internal.jobs.OrderedLock.acquire(OrderedLock.java:105)
        at org.eclipse.core.internal.jobs.OrderedLock.acquire(OrderedLock.java:79)
        at
org.eclipse.core.internal.resources.WorkManager.checkIn(WorkManager.java:96)
        at
org.eclipse.core.internal.resources.Workspace.prepareOperation(Workspace.java:1629)
        at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1669)
        at
org.eclipse.core.internal.events.NotificationManager$NotifyJob.run(NotificationManager.java:38)
        at org.eclipse.core.internal.jobs.Worker.run(Worker.java:66)

"Worker-62" prio=5 tid=0x03ffc090 nid=0xab8 in Object.wait() [3d9f000..3d9fd8c]
        at java.lang.Object.wait(Native Method)
        - waiting on &lt;0x11d1c030&gt; (a org.eclipse.core.internal.jobs.WorkerPool)
        at org.eclipse.core.internal.jobs.WorkerPool.sleep(WorkerPool.java:209)
        - locked &lt;0x11d1c030&gt; (a org.eclipse.core.internal.jobs.WorkerPool)
        at org.eclipse.core.internal.jobs.WorkerPool.startJob(WorkerPool.java:236)
        at org.eclipse.core.internal.jobs.Worker.run(Worker.java:59)

"Worker-61" prio=5 tid=0x04741d80 nid=0x558 runnable [38ef000..38efd8c]
        at
org.eclipse.jdt.internal.compiler.parser.diagnose.DiagnoseParser.scopeTrialCheck(DiagnoseParser.java:1346)
        at
org.eclipse.jdt.internal.compiler.parser.diagnose.DiagnoseParser.scopeTrial(DiagnoseParser.java:1309)
        at
org.eclipse.jdt.internal.compiler.parser.diagnose.DiagnoseParser.secondaryPhase(DiagnoseParser.java:1663)
        at
org.eclipse.jdt.internal.compiler.parser.diagnose.DiagnoseParser.errorRecovery(DiagnoseParser.java:476)
        at
org.eclipse.jdt.internal.compiler.parser.diagnose.DiagnoseParser.diagnoseParse(DiagnoseParser.java:358)
        at
org.eclipse.jdt.internal.compiler.parser.Parser.reportSyntaxErrors(Parser.java:5405)
        at org.eclipse.jdt.internal.compiler.parser.Parser.parse(Parser.java:5384)
        at org.eclipse.jdt.internal.compiler.parser.Parser.parse(Parser.java:5708)
        at org.eclipse.jdt.internal.compiler.parser.Parser.parse(Parser.java:5673)
        at
org.eclipse.jdt.internal.compiler.parser.Parser.dietParse(Parser.java:4393)
        at
org.eclipse.jdt.internal.compiler.Compiler.beginToCompile(Compiler.java:293)
        at org.eclipse.jdt.internal.compiler.Compiler.compile(Compiler.java:319)
        at
org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.compile(AbstractImageBuilder.java:203)
        at
org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.compile(AbstractImageBuilder.java:153)
        at
org.eclipse.jdt.internal.core.builder.IncrementalImageBuilder.build(IncrementalImageBuilder.java:113)
        at
org.eclipse.jdt.internal.core.builder.JavaBuilder.buildDeltas(JavaBuilder.java:224)
        at
org.eclipse.jdt.internal.core.builder.JavaBuilder.build(JavaBuilder.java:152)
        at
org.eclipse.core.internal.events.BuildManager$2.run(BuildManager.java:532)
        at
org.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java:607)
        at org.eclipse.core.runtime.Platform.run(Platform.java:668)
        at
org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:148)
        at
org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:225)
        at
org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:178)
        at
org.eclipse.core.internal.events.BuildManager$1.run(BuildManager.java:205)
        at
org.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java:607)
        at org.eclipse.core.runtime.Platform.run(Platform.java:668)
        at
org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:208)
        at
org.eclipse.core.internal.events.BuildManager.basicBuildLoop(BuildManager.java:244)
        at
org.eclipse.core.internal.events.BuildManager.build(BuildManager.java:273)
        at
org.eclipse.core.internal.events.AutoBuildJob.doBuild(AutoBuildJob.java:150)
        at org.eclipse.core.internal.events.AutoBuildJob.run(AutoBuildJob.java:196)
        at org.eclipse.core.internal.jobs.Worker.run(Worker.java:66)

"Thread-5" prio=7 tid=0x03e98130 nid=0xb40 runnable [3c1f000..3c1fd8c]
        at java.net.SocketInputStream.socketRead0(Native Method)
        at java.net.SocketInputStream.read(SocketInputStream.java:129)
        at com.jcraft.jsch.IO.getByte(Unknown Source)
        at com.jcraft.jsch.Session.read(Unknown Source)
        at com.jcraft.jsch.Session.run(Unknown Source)
        at java.lang.Thread.run(Thread.java:534)

"Java indexing" daemon prio=4 tid=0x030cc2e0 nid=0xc64 in Object.wait()
[386f000..386fd8c]
        at java.lang.Object.wait(Native Method)
        - waiting on &lt;0x12784be0&gt; (a
org.eclipse.jdt.internal.core.search.indexing.IndexManager)
        at java.lang.Object.wait(Object.java:429)
        at
org.eclipse.jdt.internal.core.search.processing.JobManager.run(JobManager.java:344)
        - locked &lt;0x12784be0&gt; (a
org.eclipse.jdt.internal.core.search.indexing.IndexManager)
        at java.lang.Thread.run(Thread.java:534)

"Thread-1" prio=7 tid=0x02f45d68 nid=0xe88 in Object.wait() [37cf000..37cfd8c]
        at java.lang.Object.wait(Native Method)
        at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:111)
        - locked &lt;0x127260e8&gt; (a java.lang.ref.ReferenceQueue$Lock)
        at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:127)
        at
org.eclipse.jface.action.ActionContributionItem$ImageCache$ReferenceCleanerThread.run(ActionContributionItem.java:196)

"Thread-0" prio=7 tid=0x02ee19f8 nid=0xe84 in Object.wait() [378f000..378fd8c]
        at java.lang.Object.wait(Native Method)
        - waiting on &lt;0x12726158&gt; (a java.lang.ref.ReferenceQueue$Lock)
        at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:111)
        - locked &lt;0x12726158&gt; (a java.lang.ref.ReferenceQueue$Lock)
        at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:127)
        at
org.eclipse.jface.action.ActionContributionItem$ImageCache$ReferenceCleanerThread.run(ActionContributionItem.java:196)

"Start Level Event Dispatcher" daemon prio=5 tid=0x02de09b8 nid=0xdd8 in
Object.wait() [302f000..302fd8c]
        at java.lang.Object.wait(Native Method)
        - waiting on &lt;0x11b6de18&gt; (a
org.eclipse.osgi.framework.eventmgr.EventThread)
        at java.lang.Object.wait(Object.java:429)
        at
org.eclipse.osgi.framework.eventmgr.EventThread.getNextEvent(EventThread.java:149)
        - locked &lt;0x11b6de18&gt; (a org.eclipse.osgi.framework.eventmgr.EventThread)
        at org.eclipse.osgi.framework.eventmgr.EventThread.run(EventThread.java:107)

"Framework Event Dispatcher" daemon prio=5 tid=0x00a51ad0 nid=0xdd4 in
Object.wait() [2fef000..2fefd8c]
        at java.lang.Object.wait(Native Method)
        - waiting on &lt;0x11b6e018&gt; (a
org.eclipse.osgi.framework.eventmgr.EventThread)
        at java.lang.Object.wait(Object.java:429)
        at
org.eclipse.osgi.framework.eventmgr.EventThread.getNextEvent(EventThread.java:149)
        - locked &lt;0x11b6e018&gt; (a org.eclipse.osgi.framework.eventmgr.EventThread)
        at org.eclipse.osgi.framework.eventmgr.EventThread.run(EventThread.java:107)

"Signal Dispatcher" daemon prio=10 tid=0x0003f2e0 nid=0x130 waiting on condition
[0..0]

"Finalizer" daemon prio=9 tid=0x00a01b28 nid=0xee0 in Object.wait()
[2caf000..2cafd8c]
        at java.lang.Object.wait(Native Method)
        at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:111)
        - locked &lt;0x11b0f910&gt; (a java.lang.ref.ReferenceQueue$Lock)
        at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:127)
        at java.lang.ref.Finalizer$FinalizerThread.run(Finalizer.java:159)

"Reference Handler" daemon prio=10 tid=0x009c20a8 nid=0xecc in Object.wait()
[2c6f000..2c6fd8c]
        at java.lang.Object.wait(Native Method)
        at java.lang.Object.wait(Object.java:429)
        at java.lang.ref.Reference$ReferenceHandler.run(Reference.java:115)
        - locked &lt;0x11b0f6c8&gt; (a java.lang.ref.Reference$Lock)

"main" prio=7 tid=0x000352c0 nid=0xec4 in Object.wait() [7f000..7fc3c]
        at java.lang.Object.wait(Native Method)
        - waiting on &lt;0x228aaeb0&gt; (a org.eclipse.core.internal.jobs.ThreadJob)
        at org.eclipse.core.internal.jobs.ThreadJob.joinRun(ThreadJob.java:159)
        - locked &lt;0x228aaeb0&gt; (a org.eclipse.core.internal.jobs.ThreadJob)
        at org.eclipse.core.internal.jobs.ImplicitJobs.begin(ImplicitJobs.java:87)
        at
org.eclipse.core.internal.jobs.ImplicitJobs.suspend(ImplicitJobs.java:189)
        at org.eclipse.core.internal.jobs.JobManager.suspend(JobManager.java:994)
        at
org.eclipse.ltk.ui.refactoring.RefactoringWizardOpenOperation.run(RefactoringWizardOpenOperation.java:108)
        at
org.eclipse.jdt.internal.ui.refactoring.actions.RefactoringStarter.activate(RefactoringStarter.java:40)
        at
org.eclipse.jdt.internal.ui.refactoring.UserInterfaceStarter.activate(UserInterfaceStarter.java:54)
        at
org.eclipse.jdt.internal.ui.refactoring.reorg.RenameUserInterfaceStarter.activate(RenameUserInterfaceStarter.java:113)
        at
org.eclipse.jdt.internal.ui.refactoring.actions.RenameResourceAction.run(RenameResourceAction.java:64)
        at org.eclipse.jdt.ui.actions.RenameAction.run(RenameAction.java:118)
        at
org.eclipse.jdt.ui.actions.SelectionDispatchAction.dispatchRun(SelectionDispatchAction.java:212)
        at
org.eclipse.jdt.ui.actions.SelectionDispatchAction.run(SelectionDispatchAction.java:188)
        at org.eclipse.jface.action.Action.runWithEvent(Action.java:881)
        at
org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection(ActionContributionItem.java:899)
        at
org.eclipse.jface.action.ActionContributionItem.access$2(ActionContributionItem.java:850)
        at
org.eclipse.jface.action.ActionContributionItem$7.handleEvent(ActionContributionItem.java:769)
        at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)
        at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:796)
        at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:2725)
        at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2390)
        at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1353)
        at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1324)
        at
org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:243)
        at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:141)
        at org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:90)
        at
org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:298)
        at
org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:249)
        at
org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:126)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:324)
        at org.eclipse.core.launcher.Main.basicRun(Main.java:269)
        at org.eclipse.core.launcher.Main.run(Main.java:722)
        at org.eclipse.core.launcher.Main.main(Main.java:706)

"VM Thread" prio=5 tid=0x009bdd38 nid=0xec0 runnable

"VM Periodic Task Thread" prio=10 tid=0x00a111a0 nid=0x10c waiting on condition
"Suspend Checker Thread" prio=10 tid=0x009fb960 nid=0xdc runnable
We only check for cancel when handing back compilation results.
In order to check more often, we'd have to provide an alternate mechanism, as 
the compiler is not allowed to directly see progress monitors which are 
Eclipse specific.

Post 3.0
Reopening, someone else complained about slow error diagnosis.
Suspecting the following to be using all CPU...

org.eclipse.jdt.internal.compiler.parser.diagnose.DiagnoseParser.scopeTrialChec
k(DiagnoseParser.java:1346)
        at
org.eclipse.jdt.internal.compiler.parser.diagnose.DiagnoseParser.scopeTrial
(DiagnoseParser.java:1309)

daniel - what is the size of your large zip in your test case ?
&gt;20MB as outlined
*** Bug 63432 has been marked as a duplicate of this bug. ***
Diagnose takes too much time for very large files with a lot of syntax errors.

Possible improvment:
- DiagnoseParser#scopeTrialCheck: limit the depth of scopeTrialCheck recursive 
call
- DiagnoseParser#diagnoseParse: stop diagnose when the maximum errors per unit 
is reached.
- CompilationUnit#buildStructure: diagnose only one syntax error when it's 
possible
- SourceInder#indexDocument: diagnose only one syntax error 
Created attachment 11270
diagnose performance improvment
Fixed and released.
David, could you please verify this one?
Verified for 3.0RC1</WithStack>
    <WithOutStack>I200405131600

I was trying to reproduce bug 41830. To do this I copied a large zip into my
workspace and then renamed it to have a .java ending. Since auto-build is on the
builder tried to compile this file (which of course has no valid Java source). I
disabled auto-build and cancelled the job but the Java still builder uses 100%
CPU after 5 minutes.

Here's the stack dump:
Full thread dump Java HotSpot(TM) Client VM (1.4.2_03-b02 mixed mode):

"Worker-63" prio=5 tid=0x03e63698 nid=0x98c in Object.wait() [5a8f000..5a8fd8c]
        at java.lang.Object.wait(Native Method)
        - waiting on &lt;0x1d321940&gt; (a org.eclipse.core.internal.jobs.Semaphore)
        at org.eclipse.core.internal.jobs.Semaphore.acquire(Semaphore.java:38)
        - locked &lt;0x1d321940&gt; (a org.eclipse.core.internal.jobs.Semaphore)
        at
org.eclipse.core.internal.jobs.OrderedLock.doAcquire(OrderedLock.java:171)
        at org.eclipse.core.internal.jobs.OrderedLock.acquire(OrderedLock.java:105)
        at org.eclipse.core.internal.jobs.OrderedLock.acquire(OrderedLock.java:79)
        at
org.eclipse.core.internal.resources.WorkManager.checkIn(WorkManager.java:96)
        at
org.eclipse.core.internal.resources.Workspace.prepareOperation(Workspace.java:1629)
        at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1669)
        at
org.eclipse.core.internal.events.NotificationManager$NotifyJob.run(NotificationManager.java:38)
        at org.eclipse.core.internal.jobs.Worker.run(Worker.java:66)

"Worker-62" prio=5 tid=0x03ffc090 nid=0xab8 in Object.wait() [3d9f000..3d9fd8c]
        at java.lang.Object.wait(Native Method)
        - waiting on &lt;0x11d1c030&gt; (a org.eclipse.core.internal.jobs.WorkerPool)
        at org.eclipse.core.internal.jobs.WorkerPool.sleep(WorkerPool.java:209)
        - locked &lt;0x11d1c030&gt; (a org.eclipse.core.internal.jobs.WorkerPool)
        at org.eclipse.core.internal.jobs.WorkerPool.startJob(WorkerPool.java:236)
        at org.eclipse.core.internal.jobs.Worker.run(Worker.java:59)

"Worker-61" prio=5 tid=0x04741d80 nid=0x558 runnable [38ef000..38efd8c]
        at
org.eclipse.jdt.internal.compiler.parser.diagnose.DiagnoseParser.scopeTrialCheck(DiagnoseParser.java:1346)
        at
org.eclipse.jdt.internal.compiler.parser.diagnose.DiagnoseParser.scopeTrial(DiagnoseParser.java:1309)
        at
org.eclipse.jdt.internal.compiler.parser.diagnose.DiagnoseParser.secondaryPhase(DiagnoseParser.java:1663)
        at
org.eclipse.jdt.internal.compiler.parser.diagnose.DiagnoseParser.errorRecovery(DiagnoseParser.java:476)
        at
org.eclipse.jdt.internal.compiler.parser.diagnose.DiagnoseParser.diagnoseParse(DiagnoseParser.java:358)
        at
org.eclipse.jdt.internal.compiler.parser.Parser.reportSyntaxErrors(Parser.java:5405)
        at org.eclipse.jdt.internal.compiler.parser.Parser.parse(Parser.java:5384)
        at org.eclipse.jdt.internal.compiler.parser.Parser.parse(Parser.java:5708)
        at org.eclipse.jdt.internal.compiler.parser.Parser.parse(Parser.java:5673)
        at
org.eclipse.jdt.internal.compiler.parser.Parser.dietParse(Parser.java:4393)
        at
org.eclipse.jdt.internal.compiler.Compiler.beginToCompile(Compiler.java:293)
        at org.eclipse.jdt.internal.compiler.Compiler.compile(Compiler.java:319)
        at
org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.compile(AbstractImageBuilder.java:203)
        at
org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.compile(AbstractImageBuilder.java:153)
        at
org.eclipse.jdt.internal.core.builder.IncrementalImageBuilder.build(IncrementalImageBuilder.java:113)
        at
org.eclipse.jdt.internal.core.builder.JavaBuilder.buildDeltas(JavaBuilder.java:224)
        at
org.eclipse.jdt.internal.core.builder.JavaBuilder.build(JavaBuilder.java:152)
        at
org.eclipse.core.internal.events.BuildManager$2.run(BuildManager.java:532)
        at
org.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java:607)
        at org.eclipse.core.runtime.Platform.run(Platform.java:668)
        at
org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:148)
        at
org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:225)
        at
org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:178)
        at
org.eclipse.core.internal.events.BuildManager$1.run(BuildManager.java:205)
        at
org.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java:607)
        at org.eclipse.core.runtime.Platform.run(Platform.java:668)
        at
org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:208)
        at
org.eclipse.core.internal.events.BuildManager.basicBuildLoop(BuildManager.java:244)
        at
org.eclipse.core.internal.events.BuildManager.build(BuildManager.java:273)
        at
org.eclipse.core.internal.events.AutoBuildJob.doBuild(AutoBuildJob.java:150)
        at org.eclipse.core.internal.events.AutoBuildJob.run(AutoBuildJob.java:196)
        at org.eclipse.core.internal.jobs.Worker.run(Worker.java:66)

"Thread-5" prio=7 tid=0x03e98130 nid=0xb40 runnable [3c1f000..3c1fd8c]
        at java.net.SocketInputStream.socketRead0(Native Method)
        at java.net.SocketInputStream.read(SocketInputStream.java:129)
        at com.jcraft.jsch.IO.getByte(Unknown Source)
        at com.jcraft.jsch.Session.read(Unknown Source)
        at com.jcraft.jsch.Session.run(Unknown Source)
        at java.lang.Thread.run(Thread.java:534)

"Java indexing" daemon prio=4 tid=0x030cc2e0 nid=0xc64 in Object.wait()
[386f000..386fd8c]
        at java.lang.Object.wait(Native Method)
        - waiting on &lt;0x12784be0&gt; (a
org.eclipse.jdt.internal.core.search.indexing.IndexManager)
        at java.lang.Object.wait(Object.java:429)
        at
org.eclipse.jdt.internal.core.search.processing.JobManager.run(JobManager.java:344)
        - locked &lt;0x12784be0&gt; (a
org.eclipse.jdt.internal.core.search.indexing.IndexManager)
        at java.lang.Thread.run(Thread.java:534)

"Thread-1" prio=7 tid=0x02f45d68 nid=0xe88 in Object.wait() [37cf000..37cfd8c]
        at java.lang.Object.wait(Native Method)
        at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:111)
        - locked &lt;0x127260e8&gt; (a java.lang.ref.ReferenceQueue$Lock)
        at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:127)
        at
org.eclipse.jface.action.ActionContributionItem$ImageCache$ReferenceCleanerThread.run(ActionContributionItem.java:196)

"Thread-0" prio=7 tid=0x02ee19f8 nid=0xe84 in Object.wait() [378f000..378fd8c]
        at java.lang.Object.wait(Native Method)
        - waiting on &lt;0x12726158&gt; (a java.lang.ref.ReferenceQueue$Lock)
        at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:111)
        - locked &lt;0x12726158&gt; (a java.lang.ref.ReferenceQueue$Lock)
        at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:127)
        at
org.eclipse.jface.action.ActionContributionItem$ImageCache$ReferenceCleanerThread.run(ActionContributionItem.java:196)

"Start Level Event Dispatcher" daemon prio=5 tid=0x02de09b8 nid=0xdd8 in
Object.wait() [302f000..302fd8c]
        at java.lang.Object.wait(Native Method)
        - waiting on &lt;0x11b6de18&gt; (a
org.eclipse.osgi.framework.eventmgr.EventThread)
        at java.lang.Object.wait(Object.java:429)
        at
org.eclipse.osgi.framework.eventmgr.EventThread.getNextEvent(EventThread.java:149)
        - locked &lt;0x11b6de18&gt; (a org.eclipse.osgi.framework.eventmgr.EventThread)
        at org.eclipse.osgi.framework.eventmgr.EventThread.run(EventThread.java:107)

"Framework Event Dispatcher" daemon prio=5 tid=0x00a51ad0 nid=0xdd4 in
Object.wait() [2fef000..2fefd8c]
        at java.lang.Object.wait(Native Method)
        - waiting on &lt;0x11b6e018&gt; (a
org.eclipse.osgi.framework.eventmgr.EventThread)
        at java.lang.Object.wait(Object.java:429)
        at
org.eclipse.osgi.framework.eventmgr.EventThread.getNextEvent(EventThread.java:149)
        - locked &lt;0x11b6e018&gt; (a org.eclipse.osgi.framework.eventmgr.EventThread)
        at org.eclipse.osgi.framework.eventmgr.EventThread.run(EventThread.java:107)

"Signal Dispatcher" daemon prio=10 tid=0x0003f2e0 nid=0x130 waiting on condition
[0..0]

"Finalizer" daemon prio=9 tid=0x00a01b28 nid=0xee0 in Object.wait()
[2caf000..2cafd8c]
        at java.lang.Object.wait(Native Method)
        at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:111)
        - locked &lt;0x11b0f910&gt; (a java.lang.ref.ReferenceQueue$Lock)
        at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:127)
        at java.lang.ref.Finalizer$FinalizerThread.run(Finalizer.java:159)

"Reference Handler" daemon prio=10 tid=0x009c20a8 nid=0xecc in Object.wait()
[2c6f000..2c6fd8c]
        at java.lang.Object.wait(Native Method)
        at java.lang.Object.wait(Object.java:429)
        at java.lang.ref.Reference$ReferenceHandler.run(Reference.java:115)
        - locked &lt;0x11b0f6c8&gt; (a java.lang.ref.Reference$Lock)

"main" prio=7 tid=0x000352c0 nid=0xec4 in Object.wait() [7f000..7fc3c]
        at java.lang.Object.wait(Native Method)
        - waiting on &lt;0x228aaeb0&gt; (a org.eclipse.core.internal.jobs.ThreadJob)
        at org.eclipse.core.internal.jobs.ThreadJob.joinRun(ThreadJob.java:159)
        - locked &lt;0x228aaeb0&gt; (a org.eclipse.core.internal.jobs.ThreadJob)
        at org.eclipse.core.internal.jobs.ImplicitJobs.begin(ImplicitJobs.java:87)
        at
org.eclipse.core.internal.jobs.ImplicitJobs.suspend(ImplicitJobs.java:189)
        at org.eclipse.core.internal.jobs.JobManager.suspend(JobManager.java:994)
        at
org.eclipse.ltk.ui.refactoring.RefactoringWizardOpenOperation.run(RefactoringWizardOpenOperation.java:108)
        at
org.eclipse.jdt.internal.ui.refactoring.actions.RefactoringStarter.activate(RefactoringStarter.java:40)
        at
org.eclipse.jdt.internal.ui.refactoring.UserInterfaceStarter.activate(UserInterfaceStarter.java:54)
        at
org.eclipse.jdt.internal.ui.refactoring.reorg.RenameUserInterfaceStarter.activate(RenameUserInterfaceStarter.java:113)
        at
org.eclipse.jdt.internal.ui.refactoring.actions.RenameResourceAction.run(RenameResourceAction.java:64)
        at org.eclipse.jdt.ui.actions.RenameAction.run(RenameAction.java:118)
        at
org.eclipse.jdt.ui.actions.SelectionDispatchAction.dispatchRun(SelectionDispatchAction.java:212)
        at
org.eclipse.jdt.ui.actions.SelectionDispatchAction.run(SelectionDispatchAction.java:188)
        at org.eclipse.jface.action.Action.runWithEvent(Action.java:881)
        at
org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection(ActionContributionItem.java:899)
        at
org.eclipse.jface.action.ActionContributionItem.access$2(ActionContributionItem.java:850)
        at
org.eclipse.jface.action.ActionContributionItem$7.handleEvent(ActionContributionItem.java:769)
        at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)
        at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:796)
        at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:2725)
        at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2390)
        at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1353)
        at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1324)
        at
org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:243)
        at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:141)
        at org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:90)
        at
org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:298)
        at
org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:249)
        at
org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:126)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:324)
        at org.eclipse.core.launcher.Main.basicRun(Main.java:269)
        at org.eclipse.core.launcher.Main.run(Main.java:722)
        at org.eclipse.core.launcher.Main.main(Main.java:706)

"VM Thread" prio=5 tid=0x009bdd38 nid=0xec0 runnable

"VM Periodic Task Thread" prio=10 tid=0x00a111a0 nid=0x10c waiting on condition
"Suspend Checker Thread" prio=10 tid=0x009fb960 nid=0xdc runnable
We only check for cancel when handing back compilation results.
In order to check more often, we'd have to provide an alternate mechanism, as 
the compiler is not allowed to directly see progress monitors which are 
Eclipse specific.

Post 3.0
Reopening, someone else complained about slow error diagnosis.
Suspecting the following to be using all CPU...

org.eclipse.jdt.internal.compiler.parser.diagnose.DiagnoseParser.scopeTrialChec
k(DiagnoseParser.java:1346)
        at
org.eclipse.jdt.internal.compiler.parser.diagnose.DiagnoseParser.scopeTrial
(DiagnoseParser.java:1309)

daniel - what is the size of your large zip in your test case ?
&gt;20MB as outlined
*** Bug 63432 has been marked as a duplicate of this bug. ***
Diagnose takes too much time for very large files with a lot of syntax errors.

Possible improvment:
- DiagnoseParser#scopeTrialCheck: limit the depth of scopeTrialCheck recursive 
call
- DiagnoseParser#diagnoseParse: stop diagnose when the maximum errors per unit 
is reached.
- CompilationUnit#buildStructure: diagnose only one syntax error when it's 
possible
- SourceInder#indexDocument: diagnose only one syntax error 
Created attachment 11270
diagnose performance improvment
Fixed and released.
David, could you please verify this one?
Verified for 3.0RC1</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="62454" />
    <CreationDate amount="2004-05-17 06:43:00 -0400" />
    <DupId amount="62883" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="UI" />
    <Version amount="3.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Linux-GTK" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>progress indicator in status bar is partially hidden</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="DUPLICATE" />
    <WithStack>I20040514

1. Produce some background activity (e.g. a CVS synchronize)
-&gt; The progress indicator becomes visible in the lower right corner of the workbench
-&gt; beside the progress indicator, a clickable button lets one navigate to the
progress view directly

This button is partially hidden under Linux-GTK. I will attach a screenshot.
Created attachment 10719
screenshot showing progress indicator

The button is only partially visible. Note that it does not matter where the
fast view bar is located (currently at the left).


*** This bug has been marked as a duplicate of 62883 ***</WithStack>
    <WithOutStack>I20040514

1. Produce some background activity (e.g. a CVS synchronize)
-&gt; The progress indicator becomes visible in the lower right corner of the workbench
-&gt; beside the progress indicator, a clickable button lets one navigate to the
progress view directly

This button is partially hidden under Linux-GTK. I will attach a screenshot.
Created attachment 10719
screenshot showing progress indicator

The button is only partially visible. Note that it does not matter where the
fast view bar is located (currently at the left).


*** This bug has been marked as a duplicate of 62883 ***</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="62455" />
    <CreationDate amount="2004-05-17 06:55:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="JDT" />
    <component amount="UI" />
    <Version amount="3.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="major" />
    <Summery>Method stub for "main" interferes with main method template [code manipulation]</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="1">
      <source_code type="class">
        <location start="312" end="354" />
        <code>public class A {
  toString&lt;code assist&gt;
}</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="0" />
    <bug_status amount="VERIFIED" />
    <resolution amount="FIXED" />
    <WithStack>Build 20040513

When codeassisting behind "main", the codeassist menu incorrectly offers both 
a main method template and a main method stub (the latter appears first and 
shouldn't appear at all).
Martin, some testing shows that we have some problems as well with overridden 
methods. In the following example

public class A {
  toString&lt;code assist&gt;
}

the code assist has two proposals which is confusing. We should put in 
proposals in this case.
fixed &gt; 20040517
added test so that no stubs are suggested when there's already an override
suggested. "main" is also excluded.
verifying...
verified fixed in 20040519 / M9 test pass</WithStack>
    <WithOutStack>Build 20040513

When codeassisting behind "main", the codeassist menu incorrectly offers both 
a main method template and a main method stub (the latter appears first and 
shouldn't appear at all).
Martin, some testing shows that we have some problems as well with overridden 
methods. In the following example

public class A {
  toString&lt;code assist&gt;
}

the code assist has two proposals which is confusing. We should put in 
proposals in this case.
fixed &gt; 20040517
added test so that no stubs are suggested when there's already an override
suggested. "main" is also excluded.
verifying...
verified fixed in 20040519 / M9 test pass</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="62456" />
    <CreationDate amount="2004-05-17 07:08:00 -0400" />
    <DupId amount="" />
    <classification amount="RT" />
    <Product amount="Equinox" />
    <component amount="Incubator" />
    <Version amount="3.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="critical" />
    <Summery>Classloader does not allow java system classes in shutdown hook</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="WORKSFORME" />
    <WithStack>I use a library that uses a shutdown hook to persist some state. Since 3.0m8 the 
plugin classloader does not delegate to the parent classloader anymore when 
Eclipse is shutting down. I can understand that loading of dependent plugins' 
classes is not allowed, but system classes should not be a problem. (The library 
has no dependency to Eclipse.) 
I tried to circumvent the problem by touching the needed class somewhere in my 
plugin (not in shutdown hook). Unfortunately it's not only one class that's 
needed but a lot (and the next library version could add even more).
Have you tried this on the latest I-Build.  A fix has gone in to leave the 
classloaders active during shutdown.  

Do you have a thread that is not properly shutdown when your plugin is 
stopped?  During shutdown all plugins are stopped.  If you ensure all your 
threads are stopped when your plugin is stopped then your threads will have 
full access to their classloaders.  See bug 47255.
I got this with the official 3.0m8. But I can/will repeat the tests once 3.0rc0 
is out (end of the week?).
The library uses the standard Runtime.getRuntime().addShutdownHook(runnable) 
method. So the VM will somehow let the runnable run in some thread at shutdown.
M9 is coming :)
Problem is gone with 3.0m9.</WithStack>
    <WithOutStack>I use a library that uses a shutdown hook to persist some state. Since 3.0m8 the 
plugin classloader does not delegate to the parent classloader anymore when 
Eclipse is shutting down. I can understand that loading of dependent plugins' 
classes is not allowed, but system classes should not be a problem. (The library 
has no dependency to Eclipse.) 
I tried to circumvent the problem by touching the needed class somewhere in my 
plugin (not in shutdown hook). Unfortunately it's not only one class that's 
needed but a lot (and the next library version could add even more).
Have you tried this on the latest I-Build.  A fix has gone in to leave the 
classloaders active during shutdown.  

Do you have a thread that is not properly shutdown when your plugin is 
stopped?  During shutdown all plugins are stopped.  If you ensure all your 
threads are stopped when your plugin is stopped then your threads will have 
full access to their classloaders.  See bug 47255.
I got this with the official 3.0m8. But I can/will repeat the tests once 3.0rc0 
is out (end of the week?).
The library uses the standard Runtime.getRuntime().addShutdownHook(runnable) 
method. So the VM will somehow let the runnable run in some thread at shutdown.
M9 is coming :)
Problem is gone with 3.0m9.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="62457" />
    <CreationDate amount="2004-05-17 07:11:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="UI" />
    <Version amount="3.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows 2000" />
    <priority amount="P3" />
    <bug_severity amount="trivial" />
    <Summery>[MPE] Multipage editor shows an additional white border around client area</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="1">
      <source_code type="assignment">
        <location start="495" end="573" />
        <code>final CTabFolder newContainer = new CTabFolder(parent, SWT.FLAT | SWT.BOTTOM);</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="WORKSFORME" />
    <WithStack>Since Eclipse 3.0 the Multipage editor adds an addition one pixel wide border
around the client area. The border is added because the CTabFolder defines an
additional space with the variable highlight_margin ( 3.0 Milestone 8,
org.eclipse.swt.custom.CTabFolder, line 264 ).

To be consistent with the standard editors the MultiPageEditorPart should set
the style of it's CTabFolder from SWT.BOTTOM to (SWT.FLAT | SWT.BOTTOM).

3.0 Milestone 8, org.eclipse.ui.part.MultiPageEditorPart, line 145:
final CTabFolder newContainer = new CTabFolder(parent, SWT.FLAT | SWT.BOTTOM);
Bug is resolves in Eclipse 3 milestone 9

Thank you.
this is being closed, if anyone sees it post R3.0 please reopen</WithStack>
    <WithOutStack>Since Eclipse 3.0 the Multipage editor adds an addition one pixel wide border
around the client area. The border is added because the CTabFolder defines an
additional space with the variable highlight_margin ( 3.0 Milestone 8,
org.eclipse.swt.custom.CTabFolder, line 264 ).

To be consistent with the standard editors the MultiPageEditorPart should set
the style of it's CTabFolder from SWT.BOTTOM to (SWT.FLAT | SWT.BOTTOM).

3.0 Milestone 8, org.eclipse.ui.part.MultiPageEditorPart, line 145:
final CTabFolder newContainer = new CTabFolder(parent, SWT.FLAT | SWT.BOTTOM);
Bug is resolves in Eclipse 3 milestone 9

Thank you.
this is being closed, if anyone sees it post R3.0 please reopen</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="62458" />
    <CreationDate amount="2004-05-17 07:21:00 -0400" />
    <DupId amount="" />
    <classification amount="Tools" />
    <Product amount="AspectJ" />
    <component amount="Compiler" />
    <Version amount="1.2" />
    <rep_platform amount="All" />
    <op_sys amount="All" />
    <priority amount="P3" />
    <bug_severity amount="enhancement" />
    <Summery>An if() pointcut inside a perthis() clause causes an ABORT - null pointer exception in ajc</Summery>
    <Patches amount="0" />
    <Stacktraces amount="1">
      <Stacktrace timestamp="1437341131434">
        <Exception>java.lang.NullPointerException</Exception>
        <Reason />
        <Frames>
          <Frame depth="0">org.aspectj.weaver.patterns.IfPointcut.concretize1(IfPointcut.java:171)</Frame>
          <Frame depth="1">org.aspectj.weaver.patterns.IfPointcut.concretize(IfPointcut.java:143)</Frame>
          <Frame depth="2">org.aspectj.weaver.patterns.AndPointcut.concretize1(AndPointcut.java:88)</Frame>
          <Frame depth="3">org.aspectj.weaver.patterns.Pointcut.concretize(Pointcut.java:135)</Frame>
          <Frame depth="4">org.aspectj.weaver.patterns.Pointcut.concretize(Pointcut.java:122)</Frame>
          <Frame depth="5">org.aspectj.weaver.patterns.PerObject.concretize(PerObject.java:84)</Frame>
          <Frame depth="6">org.aspectj.weaver.CrosscuttingMembers.setPerClause(CrosscuttingMembers.java:207)</Frame>
          <Frame depth="7">org.aspectj.weaver.ResolvedTypeX.collectCrosscuttingMembers(ResolvedTypeX.java:329)</Frame>
          <Frame depth="8">org.aspectj.weaver.CrosscuttingMembersSet.addOrReplaceAspect(CrosscuttingMembersSet.java:57)</Frame>
          <Frame depth="9">org.aspectj.weaver.bcel.BcelWeaver.prepareForWeave(BcelWeaver.java:322)</Frame>
          <Frame depth="10">org.aspectj.ajdt.internal.compiler.AjCompilerAdapter.weave(AjCompilerAdapter.java:222)</Frame>
          <Frame depth="11">org.aspectj.ajdt.internal.compiler.AjCompilerAdapter.afterCompiling(AjCompilerAdapter.java:114)</Frame>
          <Frame depth="12">org.eclipse.jdt.internal.compiler.Compiler.compile(Compiler.java:376)</Frame>
          <Frame depth="13">org.aspectj.ajdt.internal.core.builder.AjBuildManager.performCompilation(AjBuildManager.java:601)</Frame>
          <Frame depth="14">org.aspectj.ajdt.internal.core.builder.AjBuildManager.doBuild(AjBuildManager.java:160)</Frame>
          <Frame depth="15">org.aspectj.ajdt.internal.core.builder.AjBuildManager.batchBuild(AjBuildManager.java:94)</Frame>
          <Frame depth="16">org.aspectj.ajdt.ajc.AjdtCommand.doCommand(AjdtCommand.java:102)</Frame>
          <Frame depth="17">org.aspectj.ajdt.ajc.AjdtCommand.runCommand(AjdtCommand.java:53)</Frame>
          <Frame depth="18">org.aspectj.tools.ajc.Main.run(Main.java:280)</Frame>
          <Frame depth="19">org.aspectj.tools.ajc.Main.runMain(Main.java:217)</Frame>
          <Frame depth="20">org.aspectj.tools.ajc.Main.main(Main.java:79)</Frame>
        </Frames>
      </Stacktrace>
    </Stacktraces>
    <SourceCodeRegions amount="8">
      <source_code type="class">
        <location start="657" end="767" />
        <code>public class Main {

  public static void main(String [] args) {
    System.out.println("Hello World");
  }

}</code>
      </source_code>
      <source_code type="singlecomment">
        <location start="768" end="839" />
        <code>// Note the use of an if inside a perthis, causes the ajc compiler to</code>
      </source_code>
      <source_code type="singlecomment">
        <location start="839" end="864" />
        <code>//    throw an exception</code>
      </source_code>
      <source_code type="singlecomment">
        <location start="901" end="965" />
        <code>// if you comment out the following line, everything is ok,  so</code>
      </source_code>
      <source_code type="singlecomment">
        <location start="965" end="1044" />
        <code>//   it seems tobe the use of if in the perthis that is not handled correctly</code>
      </source_code>
      <source_code type="functioncall">
        <location start="1153" end="1188" />
        <code>{ System.out.println("Advice 1");</code>
      </source_code>
      <source_code type="functiondef">
        <location start="1308" end="1339" />
        <code>aspect A perthis(definedPC()) {</code>
      </source_code>
      <source_code type="assignment">
        <location start="1341" end="1391" />
        <code>pointcut definedPC(): call(* *(..)) &amp;&amp; if(4==3);</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="1">
      <Enumeration lines="2">
        <Lines>
          <Line>1) The if() is directly specified against advice.</Line>
          <Line>2) The if() is in a declared pointcut definition.</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>An if() pointcut inside a perthis() causes the following dump:

ABORT

Exception thrown from AspectJ 1.2rc2

This might be logged as a bug already -- find current bugs at
  http://bugs.eclipse.org/bugs/buglist.cgi?product=AspectJ&amp;component=Compiler

Bugs for exceptions thrown have titles File:line from the top stack, 
e.g., "SomeFile.java:243"

If you don't find the exception below in a bug, please add a new bug
at http://bugs.eclipse.org/bugs/enter_bug.cgi?product=AspectJ
To make the bug a priority, please include a test program
that can reproduce this exception.
null
java.lang.NullPointerException
        at org.aspectj.weaver.patterns.IfPointcut.concretize1(IfPointcut.java:171)
        at org.aspectj.weaver.patterns.IfPointcut.concretize(IfPointcut.java:143)
        at org.aspectj.weaver.patterns.AndPointcut.concretize1(AndPointcut.java:88)
        at org.aspectj.weaver.patterns.Pointcut.concretize(Pointcut.java:135)
        at org.aspectj.weaver.patterns.Pointcut.concretize(Pointcut.java:122)
        at org.aspectj.weaver.patterns.PerObject.concretize(PerObject.java:84)
        at
org.aspectj.weaver.CrosscuttingMembers.setPerClause(CrosscuttingMembers.java:207)
        at
org.aspectj.weaver.ResolvedTypeX.collectCrosscuttingMembers(ResolvedTypeX.java:329)
        at
org.aspectj.weaver.CrosscuttingMembersSet.addOrReplaceAspect(CrosscuttingMembersSet.java:57)
        at org.aspectj.weaver.bcel.BcelWeaver.prepareForWeave(BcelWeaver.java:322)
        at
org.aspectj.ajdt.internal.compiler.AjCompilerAdapter.weave(AjCompilerAdapter.java:222)
        at
org.aspectj.ajdt.internal.compiler.AjCompilerAdapter.afterCompiling(AjCompilerAdapter.java:114)
        at org.eclipse.jdt.internal.compiler.Compiler.compile(Compiler.java:376)
        at
org.aspectj.ajdt.internal.core.builder.AjBuildManager.performCompilation(AjBuildManager.java:601)
        at
org.aspectj.ajdt.internal.core.builder.AjBuildManager.doBuild(AjBuildManager.java:160)
        at
org.aspectj.ajdt.internal.core.builder.AjBuildManager.batchBuild(AjBuildManager.java:94)
        at org.aspectj.ajdt.ajc.AjdtCommand.doCommand(AjdtCommand.java:102)
        at org.aspectj.ajdt.ajc.AjdtCommand.runCommand(AjdtCommand.java:53)
        at org.aspectj.tools.ajc.Main.run(Main.java:280)
        at org.aspectj.tools.ajc.Main.runMain(Main.java:217)
        at org.aspectj.tools.ajc.Main.main(Main.java:79)


Here is a small test program to demonstrate the bug.  Just try compiling it.

public class Main {

  public static void main(String [] args) {
    System.out.println("Hello World");
  }

}

// Note the use of an if inside a perthis, causes the ajc compiler to
//    throw an exception
aspect Aspect perthis(call (* *(..))
// if you comment out the following line, everything is ok,  so
//   it seems tobe the use of if in the perthis that is not handled correctly 
                       &amp;&amp; if(4==3)
                     )
{ before () : call(* *..*(..)) &amp;&amp; !within(Aspect*)
  { System.out.println("Advice 1");
  }

}
I'm still working on this one, but if you put the if() into a pointcut 
definition, this will fix the problem:

aspect A perthis(definedPC()) {

  pointcut definedPC(): call(* *(..)) &amp;&amp; if(4==3);
...

It is to do with the 'scope' within which we are attempting to concretize the if
().  The code seems to cope with two cases:
1) The if() is directly specified against advice.
2) The if() is in a declared pointcut definition.

This is a third case where there is no surrounding advice or pointcut def.
I managed to put a fix in that meant we did not blow up at compile time.  

Unfortunately this then led to a situation where we crash at runtime.  It 
turns out that we generate the implementation of the if_0() method (which 
contains the test you supplied in your if() PCD) when we do a postParse of the 
PointcutDeclaration (Driven through CompilationUnitScope.buildFieldsAndMethods
()).  If the if() test is inlined in the per clause, we don't postparse the 
pointcut and never generate the if_0() method.




Ensuring the if() test method is generated requires a significant change that 
I don't want to make between an RC and a final release of 1.2.  So, to prevent 
the compilation failing with an NPE I have added a compilation check to see if 
you are using if() in a per clause.  If you are, you will see:

"if() pointcut designator cannot be used directly in a per clause (compiler 
limitation).  Create a named pointcut containing the if() and refer to it"

I've added tests for all the various per clause types.

I will then make this bug an enhancement request for post 1.2

The limitation that was the final resolution to this bug is not severe and easily worked around. No 
immediate plans to do anything further to alleviate this restriction. I'm marking as "FIXED" since that best 
describes the status of the main issue addressed by the bug report.</WithStack>
    <WithOutStack>An if() pointcut inside a perthis() causes the following dump:

ABORT

Exception thrown from AspectJ 1.2rc2

This might be logged as a bug already -- find current bugs at
  http://bugs.eclipse.org/bugs/buglist.cgi?product=AspectJ&amp;component=Compiler

Bugs for exceptions thrown have titles File:line from the top stack, 
e.g., "SomeFile.java:243"

If you don't find the exception below in a bug, please add a new bug
at http://bugs.eclipse.org/bugs/enter_bug.cgi?product=AspectJ
To make the bug a priority, please include a test program
that can reproduce this exception.
null



Here is a small test program to demonstrate the bug.  Just try compiling it.

public class Main {

  public static void main(String [] args) {
    System.out.println("Hello World");
  }

}

// Note the use of an if inside a perthis, causes the ajc compiler to
//    throw an exception
aspect Aspect perthis(call (* *(..))
// if you comment out the following line, everything is ok,  so
//   it seems tobe the use of if in the perthis that is not handled correctly 
                       &amp;&amp; if(4==3)
                     )
{ before () : call(* *..*(..)) &amp;&amp; !within(Aspect*)
  { System.out.println("Advice 1");
  }

}
I'm still working on this one, but if you put the if() into a pointcut 
definition, this will fix the problem:

aspect A perthis(definedPC()) {

  pointcut definedPC(): call(* *(..)) &amp;&amp; if(4==3);
...

It is to do with the 'scope' within which we are attempting to concretize the if
().  The code seems to cope with two cases:
1) The if() is directly specified against advice.
2) The if() is in a declared pointcut definition.

This is a third case where there is no surrounding advice or pointcut def.
I managed to put a fix in that meant we did not blow up at compile time.  

Unfortunately this then led to a situation where we crash at runtime.  It 
turns out that we generate the implementation of the if_0() method (which 
contains the test you supplied in your if() PCD) when we do a postParse of the 
PointcutDeclaration (Driven through CompilationUnitScope.buildFieldsAndMethods
()).  If the if() test is inlined in the per clause, we don't postparse the 
pointcut and never generate the if_0() method.




Ensuring the if() test method is generated requires a significant change that 
I don't want to make between an RC and a final release of 1.2.  So, to prevent 
the compilation failing with an NPE I have added a compilation check to see if 
you are using if() in a per clause.  If you are, you will see:

"if() pointcut designator cannot be used directly in a per clause (compiler 
limitation).  Create a named pointcut containing the if() and refer to it"

I've added tests for all the various per clause types.

I will then make this bug an enhancement request for post 1.2

The limitation that was the final resolution to this bug is not severe and easily worked around. No 
immediate plans to do anything further to alleviate this restriction. I'm marking as "FIXED" since that best 
describes the status of the main issue addressed by the bug report.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="62459" />
    <CreationDate amount="2004-05-17 07:21:00 -0400" />
    <DupId amount="" />
    <classification amount="RT" />
    <Product amount="Equinox" />
    <component amount="Incubator" />
    <Version amount="3.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="major" />
    <Summery>Classloader does not treat 'export' statement i.e. restrict access to dependent classes</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="1">
      <source_code type="functiondef">
        <location start="671" end="930" />
        <code>private boolean classMatchesFilter(String name) {

	int i = name.lastIndexOf("."); //$NON-NLS-1$
	if (i!=-1 &amp;&amp; filterTable.get(name.substring(0,i)+".*")!=null) return true;
//$NON-NLS-1$
	else if(filterTable.get(name)!=null) return true;
	else return false;
}</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>Due to documentation the runtime-&gt;library-&gt;export tag in plugin.xml should 
restrict the visibility of classes for other dependent plugins. This does not 
work for me. (I have two small example plugins (10k zipped) demonstrating the 
effect - mail me if you like to have it.)

Note: THIS BUG IS ALSO PRESENT IN ECLIPSE 3.0m8.
Created attachment 10728
Two sample plugins that demonstrate the bug
Thanx for finding that. There is a bug in the pluginConverter, since we fo a
startsWith when checking if a package name matches.

We should implement something along the line of what's was in the 2.1 code in
org.eclipse.core.internal.boot.URLContentFilter#classMatchesFilter

private boolean classMatchesFilter(String name) {

	int i = name.lastIndexOf("."); //$NON-NLS-1$
	if (i!=-1 &amp;&amp; filterTable.get(name.substring(0,i)+".*")!=null) return true;
//$NON-NLS-1$
	else if(filterTable.get(name)!=null) return true;
	else return false;
}


Fixed in HEAD.</WithStack>
    <WithOutStack>Due to documentation the runtime-&gt;library-&gt;export tag in plugin.xml should 
restrict the visibility of classes for other dependent plugins. This does not 
work for me. (I have two small example plugins (10k zipped) demonstrating the 
effect - mail me if you like to have it.)

Note: THIS BUG IS ALSO PRESENT IN ECLIPSE 3.0m8.
Created attachment 10728
Two sample plugins that demonstrate the bug
Thanx for finding that. There is a bug in the pluginConverter, since we fo a
startsWith when checking if a package name matches.

We should implement something along the line of what's was in the 2.1 code in
org.eclipse.core.internal.boot.URLContentFilter#classMatchesFilter

private boolean classMatchesFilter(String name) {

	int i = name.lastIndexOf("."); //$NON-NLS-1$
	if (i!=-1 &amp;&amp; filterTable.get(name.substring(0,i)+".*")!=null) return true;
//$NON-NLS-1$
	else if(filterTable.get(name)!=null) return true;
	else return false;
}


Fixed in HEAD.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="62460" />
    <CreationDate amount="2004-05-17 07:28:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="CVS" />
    <Version amount="3.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows NT" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>CVS sync does no honour modules</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="INVALID" />
    <WithStack>I have a source tree with many packages under uk.co.cartesian.*.  In CVS I have
logically split this up into modules utils/web/db.  If I checkout a module, I
correctly get only the code defined for that module.  However, if I do a Sync
With Repository, it tells me I have several hundred incoming changes of all the
files which are outside the module I am interested in.
On the project's CVS properties page, there is an option to disable the 
fetching of new directories. This should fix your problem.
This workaround does not fix the problem, as I then miss out on subpackages my
coworkers may create.  If I checkout a module, then the synchonisation should
use the same definition of what I checked out.  Command-line CVS handles it
fine.  This behaviour is also true of 2.1.x
Could you provide the details of your setup. In order to reproduce this, we'll 
need to know what your module definitions look like and we'll also need to 
know what the directory structure of the repository looks like, at least for 
the folders referenced from the modules. Feel free to modify the names if they 
contain sensitive information.
Waiting for more info from reporter
Our usual practice is to move bugs to the RESOLVED REMIND state when there is not enough information provided to address the reported issue and more information has been requested. This bug has been in the RESOLVED REMIND state for quite some time so it is being CLOSED. If you can provide the requested information or you otherwise feel that this is still an issue, please reopen the bug. If you are unable to open it due to a lack or permissions, please add a comment to the bug stating that you would like to have the request reconsidered.  I applogize for this blanket approach to bug screening but there are just to many bugs in the REMIND state for us to effectively triage them. Your help in this matter is appreciated.
[REMIND-&gt;INVALID] The "REMIND" bugzilla resolution is being removed so reopening
to mark as INVALID.
INVALID.
Closing.</WithStack>
    <WithOutStack>I have a source tree with many packages under uk.co.cartesian.*.  In CVS I have
logically split this up into modules utils/web/db.  If I checkout a module, I
correctly get only the code defined for that module.  However, if I do a Sync
With Repository, it tells me I have several hundred incoming changes of all the
files which are outside the module I am interested in.
On the project's CVS properties page, there is an option to disable the 
fetching of new directories. This should fix your problem.
This workaround does not fix the problem, as I then miss out on subpackages my
coworkers may create.  If I checkout a module, then the synchonisation should
use the same definition of what I checked out.  Command-line CVS handles it
fine.  This behaviour is also true of 2.1.x
Could you provide the details of your setup. In order to reproduce this, we'll 
need to know what your module definitions look like and we'll also need to 
know what the directory structure of the repository looks like, at least for 
the folders referenced from the modules. Feel free to modify the names if they 
contain sensitive information.
Waiting for more info from reporter
Our usual practice is to move bugs to the RESOLVED REMIND state when there is not enough information provided to address the reported issue and more information has been requested. This bug has been in the RESOLVED REMIND state for quite some time so it is being CLOSED. If you can provide the requested information or you otherwise feel that this is still an issue, please reopen the bug. If you are unable to open it due to a lack or permissions, please add a comment to the bug stating that you would like to have the request reconsidered.  I applogize for this blanket approach to bug screening but there are just to many bugs in the REMIND state for us to effectively triage them. Your help in this matter is appreciated.
[REMIND-&gt;INVALID] The "REMIND" bugzilla resolution is being removed so reopening
to mark as INVALID.
INVALID.
Closing.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="62461" />
    <CreationDate amount="2004-05-17 07:45:00 -0400" />
    <DupId amount="" />
    <classification amount="RT" />
    <Product amount="Equinox" />
    <component amount="Incubator" />
    <Version amount="3.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="major" />
    <Summery>Classloader does not take package-prefix into account</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="INVALID" />
    <WithStack>In Eclipse 3.0m8 the package-prefix has no effect i.e. a class can be accessed 
from same plugin as well as from other plugins even if not included in 
package-prefixes.

This is a minor problem and besides that I have to say that all of you did a 
great job regarding performance in 3.0!
I believe that this is an obsolete feature.
Moving to Equinox for confirmation.
this is obsolete in a sense.  if you specify the values in your plugin.xml then 
they are translated into a more constrained set of Provide-Package headers in 
the generated manifest.mf.  You should not be able to access classes from 
packages which are not listed in the package-prefix list.  If you are seeing 
different behaviour, please reopen.
Created attachment 10754
Two small plugins that allow to reproduce the bug.
in the attachment you'll find my tiny test case: 2 plugins, BasePlugin and 
AppPlugin. BasePlugin has three packages pub, priv and invisible. Only pub and 
priv are listed as prefixes.
In AppPlugin there's a toolbar action (icon with a little man) that tries to 
load classes from all three packages and reports the success or failure to 
access the classes in a popup.
Updating the summary as this does not affect speed.  The new runtime knows in O
(1) time the correct classloader to use for any given package from any given 
load point.  However, there are issues of hiding if in fact the plugin 
converter is not managing the filters appropriately.

Assigning to pascal to confirm that the converter is doing the right thing.  
Looking to have this addressed for M9.

I was confused with another related to export names.  This function is 
obsolete.  The OSGi classloaders are smokin' fast and already know where things 
are coming from.</WithStack>
    <WithOutStack>In Eclipse 3.0m8 the package-prefix has no effect i.e. a class can be accessed 
from same plugin as well as from other plugins even if not included in 
package-prefixes.

This is a minor problem and besides that I have to say that all of you did a 
great job regarding performance in 3.0!
I believe that this is an obsolete feature.
Moving to Equinox for confirmation.
this is obsolete in a sense.  if you specify the values in your plugin.xml then 
they are translated into a more constrained set of Provide-Package headers in 
the generated manifest.mf.  You should not be able to access classes from 
packages which are not listed in the package-prefix list.  If you are seeing 
different behaviour, please reopen.
Created attachment 10754
Two small plugins that allow to reproduce the bug.
in the attachment you'll find my tiny test case: 2 plugins, BasePlugin and 
AppPlugin. BasePlugin has three packages pub, priv and invisible. Only pub and 
priv are listed as prefixes.
In AppPlugin there's a toolbar action (icon with a little man) that tries to 
load classes from all three packages and reports the success or failure to 
access the classes in a popup.
Updating the summary as this does not affect speed.  The new runtime knows in O
(1) time the correct classloader to use for any given package from any given 
load point.  However, there are issues of hiding if in fact the plugin 
converter is not managing the filters appropriately.

Assigning to pascal to confirm that the converter is doing the right thing.  
Looking to have this addressed for M9.

I was confused with another related to export names.  This function is 
obsolete.  The OSGi classloaders are smokin' fast and already know where things 
are coming from.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="62462" />
    <CreationDate amount="2004-05-17 07:49:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="JDT" />
    <component amount="UI" />
    <Version amount="3.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>"Add Throws Declaration" needs to be aware of exception heiarchies [quick fix]</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="WONTFIX" />
    <WithStack>If I use the quickfix "Add Throws Declaration", and multiple exceptions are
thrown, I get a nice little choice of which exception to throw.  If I select
"Exception" for the first one, it should not offer me to the option to add more.
not for 3.0
As of now 'LATER' and 'REMIND' resolutions are no longer supported.
Please reopen this bug if it is still valid for you.</WithStack>
    <WithOutStack>If I use the quickfix "Add Throws Declaration", and multiple exceptions are
thrown, I get a nice little choice of which exception to throw.  If I select
"Exception" for the first one, it should not offer me to the option to add more.
not for 3.0
As of now 'LATER' and 'REMIND' resolutions are no longer supported.
Please reopen this bug if it is still valid for you.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="62463" />
    <CreationDate amount="2004-05-17 07:51:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="JDT" />
    <component amount="Core" />
    <Version amount="3.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows 2000" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Wrong length for ExpressionStatement after conversion</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="6">
      <source_code type="import">
        <location start="240" end="264" />
        <code>import java.util.Vector;</code>
      </source_code>
      <source_code type="class">
        <location start="265" end="382" />
        <code>public class A {
	AA aa;
	void foo() {    
		int size = (aa.bar()).size();
		System.out.println("Size=" + size);
	}
}</code>
      </source_code>
      <source_code type="class">
        <location start="383" end="436" />
        <code>class AA {
	Vector bar() { return new Vector(1); };
}</code>
      </source_code>
      <source_code type="import">
        <location start="616" end="640" />
        <code>import java.util.Vector;</code>
      </source_code>
      <source_code type="class">
        <location start="641" end="815" />
        <code>public class A {
  AA aa;
  void foo() {    
    (aa.bar()).get(0);
    // comment
    if (true) {
      System.out.println("Hello: " + toString()); //$NON-NLS-1$
    }
  }
}</code>
      </source_code>
      <source_code type="class">
        <location start="816" end="870" />
        <code>class AA {
  Vector bar() { return new Vector(1); };
}</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="0" />
    <bug_status amount="VERIFIED" />
    <resolution amount="FIXED" />
    <WithStack>Using I200405140800 build.

I was testing DOM AST nodes hierarchy building on all eclipse source files and 
noticed a problem in class 
org.eclipse.update.internal.model.InstallConfigurationParser

Here's a smaller example easier to debug:
import java.util.Vector;
public class A {
	AA aa;
	void foo() {    
		int size = (aa.bar()).size();
		System.out.println("Size=" + size);
	}
}
class AA {
	Vector bar() { return new Vector(1); };
}
In this case, (aa.bar()).size() ExpressionStatement has the same start position 
and length than aa.bar() which is not correct.

Here's a more annoying variation of this problem:
import java.util.Vector;
public class A {
  AA aa;
  void foo() {    
    (aa.bar()).get(0);
    // comment
    if (true) {
      System.out.println("Hello: " + toString()); //$NON-NLS-1$
    }
  }
}
class AA {
  Vector bar() { return new Vector(1); };
}
In this case (aa.bar()).get(0) ExpressionStatement starts at 'aa' and ends at 
semi-colon of syso statement!

I used ASTView plugin to see the invalid node ranges.

Looking at code, it seems that enclosing parenthesis around aa.bar() expression 
statement are not correctly handled in 
removeTrailingCommentFromExpressionEndingWithAParen(ASTNode) and 
retrieveEndingSemiColonPosition(int,int) methods of ASTConverter...
I am investigating.
Fixed and released in HEAD.
The code to optimize the case of cascading method invocations was not handling
intermediate parenthesized expressions.
Regression tests added (ASTConverterTest2.test0556 and test0557).
Verified for 3.0M9</WithStack>
    <WithOutStack>Using I200405140800 build.

I was testing DOM AST nodes hierarchy building on all eclipse source files and 
noticed a problem in class 
org.eclipse.update.internal.model.InstallConfigurationParser

Here's a smaller example easier to debug:
import java.util.Vector;
public class A {
	AA aa;
	void foo() {    
		int size = (aa.bar()).size();
		System.out.println("Size=" + size);
	}
}
class AA {
	Vector bar() { return new Vector(1); };
}
In this case, (aa.bar()).size() ExpressionStatement has the same start position 
and length than aa.bar() which is not correct.

Here's a more annoying variation of this problem:
import java.util.Vector;
public class A {
  AA aa;
  void foo() {    
    (aa.bar()).get(0);
    // comment
    if (true) {
      System.out.println("Hello: " + toString()); //$NON-NLS-1$
    }
  }
}
class AA {
  Vector bar() { return new Vector(1); };
}
In this case (aa.bar()).get(0) ExpressionStatement starts at 'aa' and ends at 
semi-colon of syso statement!

I used ASTView plugin to see the invalid node ranges.

Looking at code, it seems that enclosing parenthesis around aa.bar() expression 
statement are not correctly handled in 
removeTrailingCommentFromExpressionEndingWithAParen(ASTNode) and 
retrieveEndingSemiColonPosition(int,int) methods of ASTConverter...
I am investigating.
Fixed and released in HEAD.
The code to optimize the case of cascading method invocations was not handling
intermediate parenthesized expressions.
Regression tests added (ASTConverterTest2.test0556 and test0557).
Verified for 3.0M9</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="62464" />
    <CreationDate amount="2004-05-17 08:27:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="UI" />
    <Version amount="3.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="enhancement" />
    <Summery>Open closed project with double-click</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>When I make a doubleclick on a closed projekt it should open again.
There is no plan to change this behaviour.
IMHO this feature would be useful

This already works in 3.3. See bug 105041
oh, great =)

This has been fixed a while ago.</WithStack>
    <WithOutStack>When I make a doubleclick on a closed projekt it should open again.
There is no plan to change this behaviour.
IMHO this feature would be useful

This already works in 3.3. See bug 105041
oh, great =)

This has been fixed a while ago.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="62465" />
    <CreationDate amount="2004-05-17 09:06:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse Foundation" />
    <Product amount="z_Archived" />
    <component amount="Hyades" />
    <Version amount="unspecified" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>search string not present in drop-down history list</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>This happens when the user has already performed some searches on the SD, so 
that the drop-down list in the "SD Find" window is not empty.

At this point, if the user starts a new search (enters a string, clicks on Find)
and then starts another one using the drop-down list, and finally closes the 
window,

then the last search string manually entered will not appear in the drop-down 
list the next time the SD Find window is opened.
Fixed in HEAD stream (M10).
Also changed the maximum number of remembered search strings from 4 to 7.
Eugene copied FYI.
house keeping
As of TPTP 4.6.0, TPTP is in maintenance mode and focusing on improving quality by resolving relevant enhancements/defects and increasing test coverage through test creation, automation, Build Verification Tests (BVTs), and expanded run-time execution. As part of the TPTP Bugzilla housecleaning process (see http://wiki.eclipse.org/Bugzilla_Housecleaning_Processes), this enhancement/defect is verified/closed by the Project Lead since this enhancement/defect has been resolved and unverified for more than 1 year and considered to be fixed. If this enhancement/defect is still unresolved and reproducible in the latest TPTP release (http://www.eclipse.org/tptp/home/downloads/), please re-open.</WithStack>
    <WithOutStack>This happens when the user has already performed some searches on the SD, so 
that the drop-down list in the "SD Find" window is not empty.

At this point, if the user starts a new search (enters a string, clicks on Find)
and then starts another one using the drop-down list, and finally closes the 
window,

then the last search string manually entered will not appear in the drop-down 
list the next time the SD Find window is opened.
Fixed in HEAD stream (M10).
Also changed the maximum number of remembered search strings from 4 to 7.
Eugene copied FYI.
house keeping
As of TPTP 4.6.0, TPTP is in maintenance mode and focusing on improving quality by resolving relevant enhancements/defects and increasing test coverage through test creation, automation, Build Verification Tests (BVTs), and expanded run-time execution. As part of the TPTP Bugzilla housecleaning process (see http://wiki.eclipse.org/Bugzilla_Housecleaning_Processes), this enhancement/defect is verified/closed by the Project Lead since this enhancement/defect has been resolved and unverified for more than 1 year and considered to be fixed. If this enhancement/defect is still unresolved and reproducible in the latest TPTP release (http://www.eclipse.org/tptp/home/downloads/), please re-open.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="62466" />
    <CreationDate amount="2004-05-17 09:07:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse Foundation" />
    <Product amount="z_Archived" />
    <component amount="Hyades" />
    <Version amount="unspecified" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>SD empty after a relaunch of the workbench</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="INVALID" />
    <WithStack>If a sequence diagram is opened and the focus is upon it, after an exit / 
relaunch of the workbench, the sequence diagram viewer is empty.
If nothing is selected in the Profiling Monitor, the SD is empty.
As soon as something is selected, the expected behavior is that the previous 
kind of interactions (object, class, host...) is opened again. This is what I've 
just checked and that works.
house keeping
As of TPTP 4.6.0, TPTP is in maintenance mode and focusing on improving quality by resolving relevant enhancements/defects and increasing test coverage through test creation, automation, Build Verification Tests (BVTs), and expanded run-time execution. As part of the TPTP Bugzilla housecleaning process (see http://wiki.eclipse.org/Bugzilla_Housecleaning_Processes), this enhancement/defect is verified/closed by the Project Lead since this enhancement/defect has been resolved and unverified for more than 1 year and considered to be fixed. If this enhancement/defect is still unresolved and reproducible in the latest TPTP release (http://www.eclipse.org/tptp/home/downloads/), please re-open.</WithStack>
    <WithOutStack>If a sequence diagram is opened and the focus is upon it, after an exit / 
relaunch of the workbench, the sequence diagram viewer is empty.
If nothing is selected in the Profiling Monitor, the SD is empty.
As soon as something is selected, the expected behavior is that the previous 
kind of interactions (object, class, host...) is opened again. This is what I've 
just checked and that works.
house keeping
As of TPTP 4.6.0, TPTP is in maintenance mode and focusing on improving quality by resolving relevant enhancements/defects and increasing test coverage through test creation, automation, Build Verification Tests (BVTs), and expanded run-time execution. As part of the TPTP Bugzilla housecleaning process (see http://wiki.eclipse.org/Bugzilla_Housecleaning_Processes), this enhancement/defect is verified/closed by the Project Lead since this enhancement/defect has been resolved and unverified for more than 1 year and considered to be fixed. If this enhancement/defect is still unresolved and reproducible in the latest TPTP release (http://www.eclipse.org/tptp/home/downloads/), please re-open.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="62467" />
    <CreationDate amount="2004-05-17 09:17:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse Foundation" />
    <Product amount="z_Archived" />
    <component amount="Hyades" />
    <Version amount="unspecified" />
    <rep_platform amount="All" />
    <op_sys amount="All" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Execution History model is not incrementally updated during test execution.</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="3">
      <source_code type="functioncall">
        <location start="839" end="894" />
        <code>().getPreferenceStore().getLong(TestUI.SAVE_INTERVAL));</code>
      </source_code>
      <source_code type="functioncall">
        <location start="1286" end="1310" />
        <code>(TestUI.SAVE_INTERVAL));</code>
      </source_code>
      <source_code type="functioncall">
        <location start="1728" end="1752" />
        <code>(TestUI.SAVE_INTERVAL));</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="1">
      <Enumeration lines="5">
        <Lines>
          <Line>- Save Manager has been restored in the launch configuration</Line>
          <Line>- org.eclipse.hyades.ui.internal.editor.EditorSynchronizer has been patched</Line>
          <Line>(small regression introduced by fix of 57055)</Line>
          <Line>*** Bug 64317 has been marked as a duplicate of this bug. ***</Line>
          <Line>As of TPTP 4.6.0, TPTP is in maintenance mode and focusing on improving quality by resolving relevant enhancements/defects and increasing test coverage through test creation, automation, Build Verification Tests (BVTs), and expanded run-time execution. As part of the TPTP Bugzilla housecleaning process (see http://wiki.eclipse.org/Bugzilla_Housecleaning_Processes), this enhancement/defect is verified/closed by the Project Lead since this enhancement/defect has been resolved and unverified for more than 1 year and considered to be fixed. If this enhancement/defect is still unresolved and reproducible in the latest TPTP release (http://www.eclipse.org/tptp/home/downloads/), please re-open.</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>Joe - Hi Jerome.
Jerome Gout - Hi Joe
Joe - I spoke to Marcelo on Friday
Joe - and he told me how the save stuff worked for execution history
Joe - (that's the good news)
Jerome Gout - And so ?
Jerome Gout - is tere a bad news ?
Joe - well yes..
Joe - I have added the necessary call into the launch config stuff, and there 
is now a new problem.
Joe - I ahve spent a little time trying to figure it out, but I have many 
other M10 defects, and I was wondering if you could take a look at this one, 
now that we know how it shoukd work.
Jerome Gout - yes but I didn't spoke to marcello ...
Jerome Gout - 
Joe - I will explain it to you in a sec.
Joe - 
Jerome Gout - ok
Joe - In the old RunWizard,
Joe - after the launchTest() method was called,
Joe - thsi method was called:
Joe - SaveManager.getInstance().start(TestUIPlugin.getInstance
().getPreferenceStore().getLong(TestUI.SAVE_INTERVAL));
Joe - this schedules a task to be executed every SAVE_INTERVAL milliseconds
Joe - then,
Joe - in the model loader code,
Joe - it passes the EMF resource  into the SaveManager
Joe - the scheduled task then saves the resource
Joe - (every SAVE_INTERVAL milliseconds.)
Joe - so.
Joe - if you add the call SaveManager.getInstance().start
(TestUIPlugin.getInstance().getPreferenceStore().getLong
(TestUI.SAVE_INTERVAL));

Joe - to the end of the 
BasicTestLaunchConfigurationDelegate.invokeTestExecutionHarness
Joe - it then starts to save the execution history incrementally
Joe - but...
Joe - (here's the bad news)
Joe - something is happening that turns the resource to null before the test 
completes.
Joe - so...
Joe - the change I made was:   SaveManager.getInstance().start
(TestUIPlugin.getInstance().getPreferenceStore().getLong
(TestUI.SAVE_INTERVAL));

Joe - to line 119 of BasicTestLaunchConfigurationDelegate
Joe - do you think you can investigate why the resource is being set to null?
Jerome Gout - So If I correctly understand I add the: given line and  can try 
to debug ?
Joe - yes, please.
Joe -  
Jerome Gout - You're trying to use the lastest hyades test ui plugin ?
Joe - yes
Joe - I think so
Joe - (unless it changed since I updated last)
Jerome Gout - which save are you using ? 
Joe - BasicTestLaunchConfigurationDelegate version 1.2
Jerome Gout - there is a method in EMFUtil (test ui) which save a resource 
using the test navigator resource set .. and may be we should use this one
Joe - hmm...
Jerome Gout - test navigator unload resrouce when they change
Joe - sounds like that could be the reason.
Jerome Gout - so it can become null if the resrouce doesn't belong to the same 
resrouce set
Jerome Gout - we need to use save from EMFUtil which avoid the unload after 
saving
Joe - maybe you can look at the code in 
org.eclipse.hyades.models.common.util.SaveManager and see how it could be 
refactored?  (I think it's used in other places as well)
Jerome Gout - ok 
Jerome Gout - I'll keep you update ...
Joe - great.  Thanks a lot
The problem is that the sava manager and editor synchronizer mechanism were
unplugged due to modification of the test launch way (run wizard is replaced by
launch configuration)
 - Save Manager has been restored in the launch configuration
 - org.eclipse.hyades.ui.internal.editor.EditorSynchronizer has been patched
(small regression introduced by fix of 57055)
*** Bug 64317 has been marked as a duplicate of this bug. ***
As of TPTP 4.6.0, TPTP is in maintenance mode and focusing on improving quality by resolving relevant enhancements/defects and increasing test coverage through test creation, automation, Build Verification Tests (BVTs), and expanded run-time execution. As part of the TPTP Bugzilla housecleaning process (see http://wiki.eclipse.org/Bugzilla_Housecleaning_Processes), this enhancement/defect is verified/closed by the Project Lead since this enhancement/defect has been resolved and unverified for more than 1 year and considered to be fixed. If this enhancement/defect is still unresolved and reproducible in the latest TPTP release (http://www.eclipse.org/tptp/home/downloads/), please re-open.</WithStack>
    <WithOutStack>Joe - Hi Jerome.
Jerome Gout - Hi Joe
Joe - I spoke to Marcelo on Friday
Joe - and he told me how the save stuff worked for execution history
Joe - (that's the good news)
Jerome Gout - And so ?
Jerome Gout - is tere a bad news ?
Joe - well yes..
Joe - I have added the necessary call into the launch config stuff, and there 
is now a new problem.
Joe - I ahve spent a little time trying to figure it out, but I have many 
other M10 defects, and I was wondering if you could take a look at this one, 
now that we know how it shoukd work.
Jerome Gout - yes but I didn't spoke to marcello ...
Jerome Gout - 
Joe - I will explain it to you in a sec.
Joe - 
Jerome Gout - ok
Joe - In the old RunWizard,
Joe - after the launchTest() method was called,
Joe - thsi method was called:
Joe - SaveManager.getInstance().start(TestUIPlugin.getInstance
().getPreferenceStore().getLong(TestUI.SAVE_INTERVAL));
Joe - this schedules a task to be executed every SAVE_INTERVAL milliseconds
Joe - then,
Joe - in the model loader code,
Joe - it passes the EMF resource  into the SaveManager
Joe - the scheduled task then saves the resource
Joe - (every SAVE_INTERVAL milliseconds.)
Joe - so.
Joe - if you add the call SaveManager.getInstance().start
(TestUIPlugin.getInstance().getPreferenceStore().getLong
(TestUI.SAVE_INTERVAL));

Joe - to the end of the 
BasicTestLaunchConfigurationDelegate.invokeTestExecutionHarness
Joe - it then starts to save the execution history incrementally
Joe - but...
Joe - (here's the bad news)
Joe - something is happening that turns the resource to null before the test 
completes.
Joe - so...
Joe - the change I made was:   SaveManager.getInstance().start
(TestUIPlugin.getInstance().getPreferenceStore().getLong
(TestUI.SAVE_INTERVAL));

Joe - to line 119 of BasicTestLaunchConfigurationDelegate
Joe - do you think you can investigate why the resource is being set to null?
Jerome Gout - So If I correctly understand I add the: given line and  can try 
to debug ?
Joe - yes, please.
Joe -  
Jerome Gout - You're trying to use the lastest hyades test ui plugin ?
Joe - yes
Joe - I think so
Joe - (unless it changed since I updated last)
Jerome Gout - which save are you using ? 
Joe - BasicTestLaunchConfigurationDelegate version 1.2
Jerome Gout - there is a method in EMFUtil (test ui) which save a resource 
using the test navigator resource set .. and may be we should use this one
Joe - hmm...
Jerome Gout - test navigator unload resrouce when they change
Joe - sounds like that could be the reason.
Jerome Gout - so it can become null if the resrouce doesn't belong to the same 
resrouce set
Jerome Gout - we need to use save from EMFUtil which avoid the unload after 
saving
Joe - maybe you can look at the code in 
org.eclipse.hyades.models.common.util.SaveManager and see how it could be 
refactored?  (I think it's used in other places as well)
Jerome Gout - ok 
Jerome Gout - I'll keep you update ...
Joe - great.  Thanks a lot
The problem is that the sava manager and editor synchronizer mechanism were
unplugged due to modification of the test launch way (run wizard is replaced by
launch configuration)
 - Save Manager has been restored in the launch configuration
 - org.eclipse.hyades.ui.internal.editor.EditorSynchronizer has been patched
(small regression introduced by fix of 57055)
*** Bug 64317 has been marked as a duplicate of this bug. ***
As of TPTP 4.6.0, TPTP is in maintenance mode and focusing on improving quality by resolving relevant enhancements/defects and increasing test coverage through test creation, automation, Build Verification Tests (BVTs), and expanded run-time execution. As part of the TPTP Bugzilla housecleaning process (see http://wiki.eclipse.org/Bugzilla_Housecleaning_Processes), this enhancement/defect is verified/closed by the Project Lead since this enhancement/defect has been resolved and unverified for more than 1 year and considered to be fixed. If this enhancement/defect is still unresolved and reproducible in the latest TPTP release (http://www.eclipse.org/tptp/home/downloads/), please re-open.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="62468" />
    <CreationDate amount="2004-05-17 09:26:00 -0400" />
    <DupId amount="46271" />
    <classification amount="Tools" />
    <Product amount="AJDT" />
    <component amount="UI" />
    <Version amount="unspecified" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P5" />
    <bug_severity amount="normal" />
    <Summery>depending on aspectj projects</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="DUPLICATE" />
    <WithStack>I have two projects: one (Project-A) is a Java project which depends on an
AspcetJ project (Project-B).  The java project has the AspectJ project in its
build dependency list and project reference list and won't build, because of the
following error:

  The project cannot be built until Project-B is rebuilt...

I can't reproduce this textually, but by simple creating two projects as
described above will show the error.
I couldn't reproduce this again; I think it would take too much to do so, too. 
I would not worry about this right now.
I'm guessing this is Eclipse and AJDT?  And so I'm switching it to be a bug 
against the AJDT project.  I think there is a real issue here that needs 
solving, see related bug 46271.
Comments added to 46271. Should this defect now be closed ?
Further comments - and patch - added to bug 46271. 


*** This bug has been marked as a duplicate of 46271 ***</WithStack>
    <WithOutStack>I have two projects: one (Project-A) is a Java project which depends on an
AspcetJ project (Project-B).  The java project has the AspectJ project in its
build dependency list and project reference list and won't build, because of the
following error:

  The project cannot be built until Project-B is rebuilt...

I can't reproduce this textually, but by simple creating two projects as
described above will show the error.
I couldn't reproduce this again; I think it would take too much to do so, too. 
I would not worry about this right now.
I'm guessing this is Eclipse and AJDT?  And so I'm switching it to be a bug 
against the AJDT project.  I think there is a real issue here that needs 
solving, see related bug 46271.
Comments added to 46271. Should this defect now be closed ?
Further comments - and patch - added to bug 46271. 


*** This bug has been marked as a duplicate of 46271 ***</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="62469" />
    <CreationDate amount="2004-05-17 09:30:00 -0400" />
    <DupId amount="" />
    <classification amount="Tools" />
    <Product amount="AspectJ" />
    <component amount="Compiler" />
    <Version amount="1.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Linux" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>incorrect compiler error upon init of ITD field in ITD constructor</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="4">
      <source_code type="multicomment">
        <location start="0" end="153" />
        <code>/* 
  Erroneous error message when initialising an ITD field in
  an ITD constructor:
  
  Cannot make a static reference to the non-static field A.x

*/</code>
      </source_code>
      <source_code type="functiondef">
        <location start="196" end="303" />
        <code>public A.new(int a) {
	    A.x = 3; // Cannot make a static reference to the non-static field A.x
    }</code>
      </source_code>
      <source_code type="class">
        <location start="307" end="431" />
        <code>class A {

    /* directly putting the constructor here would be fine:

    public A(int a) {
        x = 3;
    } 
    */
}</code>
      </source_code>
      <source_code type="class">
        <location start="433" end="523" />
        <code>public class ITA2 {

    public static void main(String[] args) {
	A a = new A();
    }

}</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="INVALID" />
    <WithStack>/* 
  Erroneous error message when initialising an ITD field in
  an ITD constructor:
  
  Cannot make a static reference to the non-static field A.x

*/



aspect Aspect {


    public int A.x;

    public A.new(int a) {
	    A.x = 3; // Cannot make a static reference to the non-static field A.x
    }
}

class A {

    /* directly putting the constructor here would be fine:

    public A(int a) {
        x = 3;
    } 
    */
}

public class ITA2 {

    public static void main(String[] args) {
	A a = new A();
    }

}
What was I thinking?

It should have read "this.x=3", and then there's no problem</WithStack>
    <WithOutStack>/* 
  Erroneous error message when initialising an ITD field in
  an ITD constructor:
  
  Cannot make a static reference to the non-static field A.x

*/



aspect Aspect {


    public int A.x;

    public A.new(int a) {
	    A.x = 3; // Cannot make a static reference to the non-static field A.x
    }
}

class A {

    /* directly putting the constructor here would be fine:

    public A(int a) {
        x = 3;
    } 
    */
}

public class ITA2 {

    public static void main(String[] args) {
	A a = new A();
    }

}
What was I thinking?

It should have read "this.x=3", and then there's no problem</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="62470" />
    <CreationDate amount="2004-05-17 09:35:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="Resources" />
    <Version amount="3.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>NoSuchElementException while trying to launch</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>I got this while trying to launch a Java Application while a build was going 
in the background.  I'm using I200405140800 on Windows XP.

An internal error occurred during: "Launching".
java.util.NoSuchElementException
java.util.AbstractList$Itr.next(AbstractList.java:426)
org.eclipse.core.internal.jobs.JobManager.join(JobManager.java:585)
org.eclipse.debug.internal.ui.DebugUIPlugin$6.run(DebugUIPlugin.java:931)
org.eclipse.core.internal.jobs.Worker.run(Worker.java:66)
Fixed. The list was being accessed at an unsafe time when it could have been
modified concurrently.</WithStack>
    <WithOutStack>I got this while trying to launch a Java Application while a build was going 
in the background.  I'm using I200405140800 on Windows XP.

An internal error occurred during: "Launching".
java.util.NoSuchElementException
java.util.AbstractList$Itr.next(AbstractList.java:426)
org.eclipse.core.internal.jobs.JobManager.join(JobManager.java:585)
org.eclipse.debug.internal.ui.DebugUIPlugin$6.run(DebugUIPlugin.java:931)
org.eclipse.core.internal.jobs.Worker.run(Worker.java:66)
Fixed. The list was being accessed at an unsafe time when it could have been
modified concurrently.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="62471" />
    <CreationDate amount="2004-05-17 09:39:00 -0400" />
    <DupId amount="" />
    <classification amount="Modeling" />
    <Product amount="EMF" />
    <component amount="Core" />
    <Version amount="2.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="blocker" />
    <Summery>FeatureMap.toArray() not implemented correctly</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="VERIFIED" />
    <resolution amount="FIXED" />
    <WithStack>obj.getSequence().toArray()
returns an empty array.

where obj is an object of a class generated using EMF, and
getSequence() is getting a collection property from that object.

Think this is to do with the implementation of toArray for FeatureMap.
The fix is committed to CVS.
The fix is available in the latest build.
Move to verified as per bug 206558.</WithStack>
    <WithOutStack>obj.getSequence().toArray()
returns an empty array.

where obj is an object of a class generated using EMF, and
getSequence() is getting a collection property from that object.

Think this is to do with the implementation of toArray for FeatureMap.
The fix is committed to CVS.
The fix is available in the latest build.
Move to verified as per bug 206558.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="62472" />
    <CreationDate amount="2004-05-17 09:40:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="JDT" />
    <component amount="Core" />
    <Version amount="3.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>[1.5] Suspicious syntax errors for missing semicolon</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="6">
      <source_code type="class">
        <location start="180" end="247" />
        <code>public class X {
	public &lt;T&gt; X(T t){
		System.out.println(t);
	}
	}</code>
      </source_code>
      <source_code type="functiondef">
        <location start="248" end="385" />
        <code>public static void main(String[] args) {
		class Local extends X {
			Local() {
				&lt;String&gt;super("SUCCESS");
			}
		}
		new Local();
	}</code>
      </source_code>
      <source_code type="functiondef">
        <location start="454" end="498" />
        <code>"	public static void main(String[] args) {</code>
      </source_code>
      <source_code type="functiondef">
        <location start="651" end="695" />
        <code>"	public static void main(String[] args) {</code>
      </source_code>
      <source_code type="functiondef">
        <location start="857" end="901" />
        <code>"	public static void main(String[] args) {</code>
      </source_code>
      <source_code type="functiondef">
        <location start="1081" end="1610" />
        <code>"	public static void main(String[] args) {\r\n" + 
		"	                                     ^\n" + 
		"Syntax error, insert \")\" to complete 
SingleMemberAnnotation\n" + 
		"----------\n" + 
		"5. ERROR in X.java (at line 6)\r\n" + 
		"	public static void main(String[] args) {\r\n" + 
		"	                                     ^\n" + 
		"Syntax error, insert \"enum Identifier\" to complete 
EnumHeader\n" + 
		"----------\n" + 
		"6. ERROR in X.java (at line 14)\r\n" + 
		"	}\r\n" + 
		"	^\n" + 
		"Syntax error on token \"}</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="0" />
    <bug_status amount="VERIFIED" />
    <resolution amount="FIXED" />
    <WithStack>Build 20040513

Compiling the following test case in 1.5 mode issues numerous syntax errors, 
where there is only one missing semicolon (at end of Local innerclass 
declaration).

public class X {
	public &lt;T&gt; X(T t){
		System.out.println(t);
	}
	}
	public static void main(String[] args) {
		class Local extends X {
			Local() {
				&lt;String&gt;super("SUCCESS");
			}
		}
		new Local();
	}
}
	


		"----------\n" + 
		"1. ERROR in X.java (at line 6)\r\n" + 
		"	public static void main(String[] args) {\r\n" + 
		"	              ^^^^\n" + 
		"Syntax error on token \"void\", AT expected\n" + 
		"----------\n" + 
		"2. ERROR in X.java (at line 6)\r\n" + 
		"	public static void main(String[] args) {\r\n" + 
		"	                               ^\n" + 
		"Syntax error on token \"]\", invalid (\n" + 
		"----------\n" + 
		"3. ERROR in X.java (at line 6)\r\n" + 
		"	public static void main(String[] args) {\r\n" + 
		"	                                     ^\n" + 
		"Syntax error, insert \"]\" to complete ArrayAccess\n" + 
		"----------\n" + 
		"4. ERROR in X.java (at line 6)\r\n" + 
		"	public static void main(String[] args) {\r\n" + 
		"	                                     ^\n" + 
		"Syntax error, insert \")\" to complete 
SingleMemberAnnotation\n" + 
		"----------\n" + 
		"5. ERROR in X.java (at line 6)\r\n" + 
		"	public static void main(String[] args) {\r\n" + 
		"	                                     ^\n" + 
		"Syntax error, insert \"enum Identifier\" to complete 
EnumHeader\n" + 
		"----------\n" + 
		"6. ERROR in X.java (at line 14)\r\n" + 
		"	}\r\n" + 
		"	^\n" + 
		"Syntax error on token \"}\", delete this token\n" + 
		"----------\n"
Actually, there is also an extra closing curly brace at end of generic 
constructor X&lt;T&gt;. Still syntax errors are a bit cryptic.
There is no missing semicolon inside this test case.

Fixed and tests added
  DietRecoveryTest#test111()
  ComplianceDiagnoseTest#test0044()
  ComplianceDiagnoseTest#test0045()

Fix is inside RecoveredUnit#add(AbstractMethodDeclaration,int). An Initializer 
is added when an extra closing curly brace is detected.
Verified in I200409240100.</WithStack>
    <WithOutStack>Build 20040513

Compiling the following test case in 1.5 mode issues numerous syntax errors, 
where there is only one missing semicolon (at end of Local innerclass 
declaration).

public class X {
	public &lt;T&gt; X(T t){
		System.out.println(t);
	}
	}
	public static void main(String[] args) {
		class Local extends X {
			Local() {
				&lt;String&gt;super("SUCCESS");
			}
		}
		new Local();
	}
}
	


		"----------\n" + 
		"1. ERROR in X.java (at line 6)\r\n" + 
		"	public static void main(String[] args) {\r\n" + 
		"	              ^^^^\n" + 
		"Syntax error on token \"void\", AT expected\n" + 
		"----------\n" + 
		"2. ERROR in X.java (at line 6)\r\n" + 
		"	public static void main(String[] args) {\r\n" + 
		"	                               ^\n" + 
		"Syntax error on token \"]\", invalid (\n" + 
		"----------\n" + 
		"3. ERROR in X.java (at line 6)\r\n" + 
		"	public static void main(String[] args) {\r\n" + 
		"	                                     ^\n" + 
		"Syntax error, insert \"]\" to complete ArrayAccess\n" + 
		"----------\n" + 
		"4. ERROR in X.java (at line 6)\r\n" + 
		"	public static void main(String[] args) {\r\n" + 
		"	                                     ^\n" + 
		"Syntax error, insert \")\" to complete 
SingleMemberAnnotation\n" + 
		"----------\n" + 
		"5. ERROR in X.java (at line 6)\r\n" + 
		"	public static void main(String[] args) {\r\n" + 
		"	                                     ^\n" + 
		"Syntax error, insert \"enum Identifier\" to complete 
EnumHeader\n" + 
		"----------\n" + 
		"6. ERROR in X.java (at line 14)\r\n" + 
		"	}\r\n" + 
		"	^\n" + 
		"Syntax error on token \"}\", delete this token\n" + 
		"----------\n"
Actually, there is also an extra closing curly brace at end of generic 
constructor X&lt;T&gt;. Still syntax errors are a bit cryptic.
There is no missing semicolon inside this test case.

Fixed and tests added
  DietRecoveryTest#test111()
  ComplianceDiagnoseTest#test0044()
  ComplianceDiagnoseTest#test0045()

Fix is inside RecoveredUnit#add(AbstractMethodDeclaration,int). An Initializer 
is added when an extra closing curly brace is detected.
Verified in I200409240100.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="62473" />
    <CreationDate amount="2004-05-17 09:50:00 -0400" />
    <DupId amount="60723" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="UI" />
    <Version amount="3.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Progress view flicker removing finished tasks</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="DUPLICATE" />
    <WithStack>Build I200405140800

I scheduled a CVS scyn to happen every half hour and left my machine running 
for the weekend. When I checked the Progress view on Monday, there were a 
large number of entries for finished jobs. I pressed the Remove All Finished 
Tasks button and it flashed and flickered for tens of seconds. It looked like 
it was deleting the entries one at a time and repainting the view in between.


*** This bug has been marked as a duplicate of 60723 ***</WithStack>
    <WithOutStack>Build I200405140800

I scheduled a CVS scyn to happen every half hour and left my machine running 
for the weekend. When I checked the Progress view on Monday, there were a 
large number of entries for finished jobs. I pressed the Remove All Finished 
Tasks button and it flashed and flickered for tens of seconds. It looked like 
it was deleting the entries one at a time and repainting the view in between.


*** This bug has been marked as a duplicate of 60723 ***</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="62474" />
    <CreationDate amount="2004-05-17 09:54:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="UI" />
    <Version amount="3.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>[Progress] Progress view holding onto completed building jobs</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="WORKSFORME" />
    <WithStack>Build 20040513

Haven't figured the pattern, but I do observe the progress view leaking some 
building jobs, see attachment.
Created attachment 10722
Progress view with stale build jobs
I'll have a look as Andre is on vacation
I have added in code to prune stale jobs and a debug option to warn when this 
occurs to see if we can track it down.

This should fix this problem from the users perspective although we still need 
to understand what is going on.
I beleive this was fixed as a result of some fixes to the locking mechanism 
that was starving updates in M9 - I have been running with a stale job trace 
since then and nothing has shown up.
I have seen other jobs leaking in the same way since M9.
Does switching to verbose clear them? Andre is looking at some view specific 
issues now.
Yes, I'm working on these issues.
I am mostly seeing search jobs leaking. They sit there, either in verbose or 
non verbose mode.
Phillipe could you attach a screenshot please?
Just observed it again with RC3 in details view.

Created attachment 12791
Leaked progress jobs visible in details view
*** Bug 66696 has been marked as a duplicate of this bug. ***
*** Bug 68434 has been marked as a duplicate of this bug. ***
*** Bug 65131 has been marked as a duplicate of this bug. ***
*** Bug 75618 has been marked as a duplicate of this bug. ***
*** Bug 74668 has been marked as a duplicate of this bug. ***
*** Bug 93601 has been marked as a duplicate of this bug. ***
*** Bug 108538 has been marked as a duplicate of this bug. ***
Has anyone seen this in 3.2? There has been significant work here and I want to see if this still needs investigating.
Also see Bug 111247 which still exists and may be related
*** Bug 126188 has been marked as a duplicate of this bug. ***
Marking as WROKSFORME</WithStack>
    <WithOutStack>Build 20040513

Haven't figured the pattern, but I do observe the progress view leaking some 
building jobs, see attachment.
Created attachment 10722
Progress view with stale build jobs
I'll have a look as Andre is on vacation
I have added in code to prune stale jobs and a debug option to warn when this 
occurs to see if we can track it down.

This should fix this problem from the users perspective although we still need 
to understand what is going on.
I beleive this was fixed as a result of some fixes to the locking mechanism 
that was starving updates in M9 - I have been running with a stale job trace 
since then and nothing has shown up.
I have seen other jobs leaking in the same way since M9.
Does switching to verbose clear them? Andre is looking at some view specific 
issues now.
Yes, I'm working on these issues.
I am mostly seeing search jobs leaking. They sit there, either in verbose or 
non verbose mode.
Phillipe could you attach a screenshot please?
Just observed it again with RC3 in details view.

Created attachment 12791
Leaked progress jobs visible in details view
*** Bug 66696 has been marked as a duplicate of this bug. ***
*** Bug 68434 has been marked as a duplicate of this bug. ***
*** Bug 65131 has been marked as a duplicate of this bug. ***
*** Bug 75618 has been marked as a duplicate of this bug. ***
*** Bug 74668 has been marked as a duplicate of this bug. ***
*** Bug 93601 has been marked as a duplicate of this bug. ***
*** Bug 108538 has been marked as a duplicate of this bug. ***
Has anyone seen this in 3.2? There has been significant work here and I want to see if this still needs investigating.
Also see Bug 111247 which still exists and may be related
*** Bug 126188 has been marked as a duplicate of this bug. ***
Marking as WROKSFORME</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="62475" />
    <CreationDate amount="2004-05-17 09:54:00 -0400" />
    <DupId amount="" />
    <classification amount="Tools" />
    <Product amount="AspectJ" />
    <component amount="Compiler" />
    <Version amount="1.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Linux" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>resolution of IT field inits</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="4">
      <source_code type="multicomment">
        <location start="0" end="263" />
        <code>/* 
   Intertype field initialisers should be resolved in the aspect
   (lexical scope), for consistency with intertype method and 
   constructor bodies.

   The program below compiles without warning, however, binding z
   to the z field of the target class.
*/</code>
      </source_code>
      <source_code type="class">
        <location start="337" end="363" />
        <code>class A {
    int z = 0;
}</code>
      </source_code>
      <source_code type="class">
        <location start="365" end="471" />
        <code>public class ITA3 {

    public static void main(String[] args) {
	System.out.println(new A().x);
    }

}</code>
      </source_code>
      <source_code type="class">
        <location start="985" end="1026" />
        <code>class A {
  int z = 0;
  A() { x = z; }
}</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="INVALID" />
    <WithStack>/* 
   Intertype field initialisers should be resolved in the aspect
   (lexical scope), for consistency with intertype method and 
   constructor bodies.

   The program below compiles without warning, however, binding z
   to the z field of the target class.
*/



aspect Aspect {

    public int A.x = z; // error: z not visible.

}

class A {
    int z = 0;
}

public class ITA3 {

    public static void main(String[] args) {
	System.out.println(new A().x);
    }

}
marked as target 1.2.1
This program is compiling as expected (ie. I believe it is correct to bind
A.x to z in this case). 

A field initializer in Java for an instance variable is evaluated, and the 
assignment performed, each time an instance of the class is created (JLS 2.9.2). 
The initialization occurs in the context of the instance being created, so the 
type of 'this' is the targetType of the ITD.

To put it another way, the program below is equivalent to writing:

aspect Aspect {
  public int A.x;
}

class A {
  int z = 0;
  A() { x = z; }
}
Agreed.
Fix released as part of AspectJ 1.2.1</WithStack>
    <WithOutStack>/* 
   Intertype field initialisers should be resolved in the aspect
   (lexical scope), for consistency with intertype method and 
   constructor bodies.

   The program below compiles without warning, however, binding z
   to the z field of the target class.
*/



aspect Aspect {

    public int A.x = z; // error: z not visible.

}

class A {
    int z = 0;
}

public class ITA3 {

    public static void main(String[] args) {
	System.out.println(new A().x);
    }

}
marked as target 1.2.1
This program is compiling as expected (ie. I believe it is correct to bind
A.x to z in this case). 

A field initializer in Java for an instance variable is evaluated, and the 
assignment performed, each time an instance of the class is created (JLS 2.9.2). 
The initialization occurs in the context of the instance being created, so the 
type of 'this' is the targetType of the ITD.

To put it another way, the program below is equivalent to writing:

aspect Aspect {
  public int A.x;
}

class A {
  int z = 0;
  A() { x = z; }
}
Agreed.
Fix released as part of AspectJ 1.2.1</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="62476" />
    <CreationDate amount="2004-05-17 09:55:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse Foundation" />
    <Product amount="z_Archived" />
    <component amount="VE" />
    <Version amount="unspecified" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows 2000" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>The Visual Editor doesn't launch when you create a visual class...</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>you must then select the visual class then open it in the visual editor.
Are you using the Visual Class wizard to create th new class? (see attached
screen scrape)
Created attachment 10724
Visual Class
Yes.
Previously in M8, you could get access to the workbench window, its shell etc
from background thread - now in M9 it will return a null. becuase of this, the
shell cant be found and the editor cant be opened from the background thread.
hence moved the code which opens the editor not to run in the background. 
Released class NewVisualClassCreationWizard.
1.0M2 is out, so these are now closed in M2.</WithStack>
    <WithOutStack>you must then select the visual class then open it in the visual editor.
Are you using the Visual Class wizard to create th new class? (see attached
screen scrape)
Created attachment 10724
Visual Class
Yes.
Previously in M8, you could get access to the workbench window, its shell etc
from background thread - now in M9 it will return a null. becuase of this, the
shell cant be found and the editor cant be opened from the background thread.
hence moved the code which opens the editor not to run in the background. 
Released class NewVisualClassCreationWizard.
1.0M2 is out, so these are now closed in M2.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="62477" />
    <CreationDate amount="2004-05-17 09:55:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="SWT" />
    <Version amount="3.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Linux-GTK" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Clicking on shell title bar causes activation events with null active shells</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>I200405140800.  Linux 2.6.4, GTK+ 2.4.0, KDE 3.2.1 
 
I have a filter attached to the display listening for activation events.  I get 
one activation event for every widget in the hierarchy.  However, it seems that 
the display.getActiveShell() responds with "null" until the top-level shell 
receives the activation event.  This means that while processing these 
activation events, it appears as if no shell is active. 
 
This does not happen on Windows XP.
Created attachment 10723
Snippet showing the problem

Run the snippet, and then try dragging the dialog around the screen.
Fixed &gt; 20040517</WithStack>
    <WithOutStack>I200405140800.  Linux 2.6.4, GTK+ 2.4.0, KDE 3.2.1 
 
I have a filter attached to the display listening for activation events.  I get 
one activation event for every widget in the hierarchy.  However, it seems that 
the display.getActiveShell() responds with "null" until the top-level shell 
receives the activation event.  This means that while processing these 
activation events, it appears as if no shell is active. 
 
This does not happen on Windows XP.
Created attachment 10723
Snippet showing the problem

Run the snippet, and then try dragging the dialog around the screen.
Fixed &gt; 20040517</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="62478" />
    <CreationDate amount="2004-05-17 10:13:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="JDT" />
    <component amount="Text" />
    <Version amount="3.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="critical" />
    <Summery>[typing] can't paste one string over two</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="2">
      <source_code type="functiondef">
        <location start="2258" end="2423" />
        <code>for (int i= 0; i &lt; linePartitioning.length; i++) {
	if (IJavaPartitions.JAVA_STRING.equals(linePartitioning[i].getType()))
		segmentation.add(linePartitioning[i]);
}</code>
      </source_code>
      <source_code type="functiondef">
        <location start="2428" end="2637" />
        <code>for (int i= 0; i &lt; linePartitioning.length; i++) {
	if (IJavaPartitions.JAVA_STRING.equals(linePartitioning[i].getType()))
		if (linePartitioning[i].getLength() &gt; 0)
			segmentation.add(linePartitioning[i]);
}</code>
      </source_code>
    </SourceCodeRegions>
    <Enumerations amount="1">
      <Enumeration lines="3">
        <Lines>
          <Line>- looks like a BIDI problem</Line>
          <Line>- cannot reproduce with the given test case on Linux-GTK, however, BIDI is only</Line>
          <Line>fully supported on Windows platforms.</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="VERIFIED" />
    <resolution amount="FIXED" />
    <WithStack>using 0514 I-build, a serious error occurs that prevents pasting two strings in 
place of one. This happens with Java Editor, but not basic text editor. I'll 
attach log, which gives full "stacks" (and also gives JRE version, if that's 
relevant). 

following is an example of what I was trying to paste -- tying to paste the 
&gt;"testpaste"&lt; string over the &gt;"UTF-16", "UTF-16"&lt; strings. 

	public void testFile123() throws CoreException, IOException {
		doContentDescriptionTest("UTF-16", "UTF-16", "testfiles/xml/testUTF16.
xml", null);
	}
	public void testFile123B() throws CoreException, IOException {
		doContentDescriptionTestB("testPaste", "testfiles/xml/testUTF16.xml", 
null);
	}

I marked as critical since not only does the paste fail, but the editor stops 
re-painting correctly, nothing else can be input, and data is lost. I think 
editor can be closed if closed right after the error, but if you try to type 
something else, exceptions just keep occuring and prevent it from being closed.
Created attachment 10726
log showing exceptions that occur when above paste fails
investigating
- looks like a BIDI problem
- cannot reproduce with the given test case on Linux-GTK, however, BIDI is only
fully supported on Windows platforms.

David, are you using a bidi editor?

From the given stacktrace, I believe the problem lies in SWT land, moving to SWT
for comments - please move back if you think this is wrong.
not sure what you mean by "bidi editor". So, guess not. But, I do have "bidi" 
enabled on my windows platform. (As I have multiple languages "enabled"). 

And, yes, I would have thought SWT, but since works ok with basic text editor, 
thought they might have been off the hook :)

Thanks all for investigating. 
I debug this all way down to:
JavaEditor#getBidiLineSegments(ITextViewer, int)

For the line:
"\tdoContentDescriptionTest(\"UTF-16\", \"UTF-16\", 
\"testfiles/xml/testUTF16.xml\", null);"
It returns int[] {0, 26, 37, 37, 39, 68}
Which is an invalid segments offset. See BidiSegmentEvent for more information.

Here is a possible fix (of course, I don't have understanding at all about you 
guys code, but this one line hack maded the problem go away):

JavaEditor.getBidiLineSegments(ITextViewer, int) line 3208:
Replace:
for (int i= 0; i &lt; linePartitioning.length; i++) {
	if (IJavaPartitions.JAVA_STRING.equals(linePartitioning[i].getType()))
		segmentation.add(linePartitioning[i]);
}
By:
for (int i= 0; i &lt; linePartitioning.length; i++) {
	if (IJavaPartitions.JAVA_STRING.equals(linePartitioning[i].getType()))
		if (linePartitioning[i].getLength() &gt; 0)
			segmentation.add(linePartitioning[i]);
}

Note: to reproduce the problem your machine must have hebrew or arabic input 
method installed.
thanks for debugging, felipe.
This is a partitioning / position updating problem really. String partitions can
never have zero length, since they consist of at least a '"'. 

The pasted over region contains two string partitions: "string1", "string2"
When pasting, the two partitions are updated such that the first is replaced by
the pasted string and the second is compressed to length zero, but not deleted.
fixed by fixing DefaultPartitioner, which would stop its recomputation early in
this special case.
start verifying...
verified. I have switch to Hebrew input method while copy pasting the string.</WithStack>
    <WithOutStack>using 0514 I-build, a serious error occurs that prevents pasting two strings in 
place of one. This happens with Java Editor, but not basic text editor. I'll 
attach log, which gives full "stacks" (and also gives JRE version, if that's 
relevant). 

following is an example of what I was trying to paste -- tying to paste the 
&gt;"testpaste"&lt; string over the &gt;"UTF-16", "UTF-16"&lt; strings. 

	public void testFile123() throws CoreException, IOException {
		doContentDescriptionTest("UTF-16", "UTF-16", "testfiles/xml/testUTF16.
xml", null);
	}
	public void testFile123B() throws CoreException, IOException {
		doContentDescriptionTestB("testPaste", "testfiles/xml/testUTF16.xml", 
null);
	}

I marked as critical since not only does the paste fail, but the editor stops 
re-painting correctly, nothing else can be input, and data is lost. I think 
editor can be closed if closed right after the error, but if you try to type 
something else, exceptions just keep occuring and prevent it from being closed.
Created attachment 10726
log showing exceptions that occur when above paste fails
investigating
- looks like a BIDI problem
- cannot reproduce with the given test case on Linux-GTK, however, BIDI is only
fully supported on Windows platforms.

David, are you using a bidi editor?

From the given stacktrace, I believe the problem lies in SWT land, moving to SWT
for comments - please move back if you think this is wrong.
not sure what you mean by "bidi editor". So, guess not. But, I do have "bidi" 
enabled on my windows platform. (As I have multiple languages "enabled"). 

And, yes, I would have thought SWT, but since works ok with basic text editor, 
thought they might have been off the hook :)

Thanks all for investigating. 
I debug this all way down to:
JavaEditor#getBidiLineSegments(ITextViewer, int)

For the line:
"\tdoContentDescriptionTest(\"UTF-16\", \"UTF-16\", 
\"testfiles/xml/testUTF16.xml\", null);"
It returns int[] {0, 26, 37, 37, 39, 68}
Which is an invalid segments offset. See BidiSegmentEvent for more information.

Here is a possible fix (of course, I don't have understanding at all about you 
guys code, but this one line hack maded the problem go away):

JavaEditor.getBidiLineSegments(ITextViewer, int) line 3208:
Replace:
for (int i= 0; i &lt; linePartitioning.length; i++) {
	if (IJavaPartitions.JAVA_STRING.equals(linePartitioning[i].getType()))
		segmentation.add(linePartitioning[i]);
}
By:
for (int i= 0; i &lt; linePartitioning.length; i++) {
	if (IJavaPartitions.JAVA_STRING.equals(linePartitioning[i].getType()))
		if (linePartitioning[i].getLength() &gt; 0)
			segmentation.add(linePartitioning[i]);
}

Note: to reproduce the problem your machine must have hebrew or arabic input 
method installed.
thanks for debugging, felipe.
This is a partitioning / position updating problem really. String partitions can
never have zero length, since they consist of at least a '"'. 

The pasted over region contains two string partitions: "string1", "string2"
When pasting, the two partitions are updated such that the first is replaced by
the pasted string and the second is compressed to length zero, but not deleted.
fixed by fixing DefaultPartitioner, which would stop its recomputation early in
this special case.
start verifying...
verified. I have switch to Hebrew input method while copy pasting the string.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="62479" />
    <CreationDate amount="2004-05-17 10:16:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="UI" />
    <Version amount="2.1.3" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>[Workbench] Configurations not saved</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="INVALID" />
    <WithStack>Hi.
Sometimes, when I change an setting in Preferences window, close Eclipse, and
open it again, the change I have made don't saved. This issue accurs with
frequency with the Window &gt; Preference &gt; Workbench &gt; Perform build automatically
on resource modification. When I check this option, and leave Eclipse, the
option was not checked. What I do wrong?
Does this problem only occur with the 2.1.3 release of Eclipse?
Sincerelly, I don't know...
In my office, we use the 2.1.3 version. In all computers, sometimes, this
problem occur. I say sometimes, because the problem don't occur always, and I
don't know what I make to the problem appear.
Can you give an example of a preference this is failing for?
As of now 'LATER' and 'REMIND' resolutions are no longer supported.
Please reopen this bug if it is still valid for you.</WithStack>
    <WithOutStack>Hi.
Sometimes, when I change an setting in Preferences window, close Eclipse, and
open it again, the change I have made don't saved. This issue accurs with
frequency with the Window &gt; Preference &gt; Workbench &gt; Perform build automatically
on resource modification. When I check this option, and leave Eclipse, the
option was not checked. What I do wrong?
Does this problem only occur with the 2.1.3 release of Eclipse?
Sincerelly, I don't know...
In my office, we use the 2.1.3 version. In all computers, sometimes, this
problem occur. I say sometimes, because the problem don't occur always, and I
don't know what I make to the problem appear.
Can you give an example of a preference this is failing for?
As of now 'LATER' and 'REMIND' resolutions are no longer supported.
Please reopen this bug if it is still valid for you.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="62480" />
    <CreationDate amount="2004-05-17 10:18:00 -0400" />
    <DupId amount="62241" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="Team" />
    <Version amount="3.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows 2000" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Checkout wizard quiet about CVS login failure</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="DUPLICATE" />
    <WithStack>Build I200405140800

From the package exporer view of a new install, choose new project, then CVS+- 
checkout projects from CVS.

In the "Checkout from CVS" wizard enter a valid host and path, but invalid user 
name / password combination.

Click next.  On the Select module page click on "Use an existing module" radio 
button and the "pending..." is displayed briefly, but then nothing.

I expected to see some indication that CVS login had failed e.g. in a status 
string above the buttons; but there is no indication that the data is invalid.

Chnage back to "Use specified module name" and type a bogus name, then the next 
button produces a 'No such user' error that gives an idea of the problem.


*** This bug has been marked as a duplicate of 62241 ***</WithStack>
    <WithOutStack>Build I200405140800

From the package exporer view of a new install, choose new project, then CVS+- 
checkout projects from CVS.

In the "Checkout from CVS" wizard enter a valid host and path, but invalid user 
name / password combination.

Click next.  On the Select module page click on "Use an existing module" radio 
button and the "pending..." is displayed briefly, but then nothing.

I expected to see some indication that CVS login had failed e.g. in a status 
string above the buttons; but there is no indication that the data is invalid.

Chnage back to "Use specified module name" and type a bogus name, then the next 
button produces a 'No such user' error that gives an idea of the problem.


*** This bug has been marked as a duplicate of 62241 ***</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="62481" />
    <CreationDate amount="2004-05-17 10:28:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="PDE" />
    <component amount="UI" />
    <Version amount="3.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Small UI glitches after reverting build editor</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>One thing I'm noticing from last week is a small glitch in deletion of source
folders after reverting. 

For instance, add a library, and add a few source folders to it. 
-&gt; Save.
-&gt; make any kind of change (i.e. check a file/folder in bin section)
-&gt; Revert.  (all changes are made nicely!)
-&gt; select your recently added library.
-&gt; select a source folder
-&gt; delete it
The deletion does take place in source, the editor is marked dirty, and the next
available library is selection as should be.  However, the old source folder is
still there.

Note that although this needs to be attended to, it is relatively minor because
if someone switches to source and back, the problem disappears.

See Bug 62175 as a reference :)
Fixed and in head :)

The revised IBuildEntry wasn't getting picked up and somehow this comes into
affect after the revert action.  Essentially, I needed to assign fCurrentLibrary
to the entry, call a section refresh(), and then update() the current library.

(see modelChanged() for actual code) :)</WithStack>
    <WithOutStack>One thing I'm noticing from last week is a small glitch in deletion of source
folders after reverting. 

For instance, add a library, and add a few source folders to it. 
-&gt; Save.
-&gt; make any kind of change (i.e. check a file/folder in bin section)
-&gt; Revert.  (all changes are made nicely!)
-&gt; select your recently added library.
-&gt; select a source folder
-&gt; delete it
The deletion does take place in source, the editor is marked dirty, and the next
available library is selection as should be.  However, the old source folder is
still there.

Note that although this needs to be attended to, it is relatively minor because
if someone switches to source and back, the problem disappears.

See Bug 62175 as a reference :)
Fixed and in head :)

The revised IBuildEntry wasn't getting picked up and somehow this comes into
affect after the revert action.  Essentially, I needed to assign fCurrentLibrary
to the entry, call a section refresh(), and then update() the current library.

(see modelChanged() for actual code) :)</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="62482" />
    <CreationDate amount="2004-05-17 10:29:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="UI" />
    <Version amount="3.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="major" />
    <Summery>[Presentations] Widget is disposed rearranging windows</Summery>
    <Patches amount="0" />
    <Stacktraces amount="2">
      <Stacktrace timestamp="1437341131460">
        <Exception>org.eclipse.swt.SWTException</Exception>
        <Reason>Widget is disposed</Reason>
        <Frames>
          <Frame depth="0">org.eclipse.swt.SWT.error(SWT.java:2689)</Frame>
          <Frame depth="1">org.eclipse.swt.SWT.error(SWT.java:2614)</Frame>
          <Frame depth="2">org.eclipse.swt.SWT.error(SWT.java:2585)</Frame>
          <Frame depth="3">org.eclipse.swt.widgets.Widget.error(Widget.java:381)</Frame>
          <Frame depth="4">org.eclipse.swt.widgets.Widget.checkWidget(Widget.java:283)</Frame>
          <Frame depth="5">org.eclipse.swt.widgets.Control.getParent(Control.java:885)</Frame>
          <Frame depth="6">org.eclipse.ui.internal.presentations.PaneFolder.layout(PaneFolder.java:327)</Frame>
          <Frame depth="7">org.eclipse.ui.internal.presentations.DefaultPartPresentation.layout(DefaultPartPresentation.java:660)</Frame>
          <Frame depth="8">org.eclipse.ui.internal.presentations.DefaultPartPresentation.setBounds(DefaultPartPresentation.java:872)</Frame>
          <Frame depth="9">org.eclipse.ui.internal.PartStack.setBounds(PartStack.java:880)</Frame>
          <Frame depth="10">org.eclipse.ui.internal.LayoutTree.setBounds(LayoutTree.java:190)</Frame>
          <Frame depth="11">org.eclipse.ui.internal.LayoutTreeNode.setBounds(LayoutTreeNode.java:372)</Frame>
          <Frame depth="12">org.eclipse.ui.internal.LayoutTreeNode.setBounds(LayoutTreeNode.java:296)</Frame>
          <Frame depth="13">org.eclipse.ui.internal.PartSashContainer.resizeSashes(PartSashContainer.java:620)</Frame>
          <Frame depth="14">org.eclipse.ui.internal.PartSashContainer.addChild(PartSashContainer.java:332)</Frame>
          <Frame depth="15">org.eclipse.ui.internal.ViewSashContainer.addChild(ViewSashContainer.java:280)</Frame>
          <Frame depth="16">org.eclipse.ui.internal.PartSashContainer.add(PartSashContainer.java:928)</Frame>
          <Frame depth="17">org.eclipse.ui.internal.PartSashContainer.add(PartSashContainer.java:259)</Frame>
          <Frame depth="18">org.eclipse.ui.internal.PartSashContainer.addEnhanced(PartSashContainer.java:220)</Frame>
          <Frame depth="19">org.eclipse.ui.internal.PartSashContainer.add(PartSashContainer.java:192)</Frame>
          <Frame depth="20">org.eclipse.ui.internal.PerspectiveHelper.derefPart(PerspectiveHelper.java:537)</Frame>
          <Frame depth="21">org.eclipse.ui.internal.ViewSashContainer.derefPart(ViewSashContainer.java:262)</Frame>
          <Frame depth="22">org.eclipse.ui.internal.PartSashContainer.stack(PartSashContainer.java:819)</Frame>
          <Frame depth="23">org.eclipse.ui.internal.PartSashContainer.dropObject(PartSashContainer.java:796)</Frame>
          <Frame depth="24">org.eclipse.ui.internal.PartSashContainer$SashContainerDropTarget.drop(PartSashContainer.java:110)</Frame>
          <Frame depth="25">org.eclipse.ui.internal.dnd.DragUtil.performDrag(DragUtil.java:128)</Frame>
          <Frame depth="26">org.eclipse.ui.internal.PartStack.dragStart(PartStack.java:1116)</Frame>
          <Frame depth="27">org.eclipse.ui.internal.PartStack$1.dragStart(PartStack.java:78)</Frame>
          <Frame depth="28">org.eclipse.ui.internal.presentations.DefaultPartPresentation$10.handleEvent(DefaultPartPresentation.java:308)</Frame>
          <Frame depth="29">org.eclipse.ui.presentations.PresentationUtil.handleMouseMove(PresentationUtil.java:89)</Frame>
          <Frame depth="30">org.eclipse.ui.presentations.PresentationUtil.access$4(PresentationUtil.java:83)</Frame>
          <Frame depth="31">org.eclipse.ui.presentations.PresentationUtil$2.handleEvent(PresentationUtil.java:55)</Frame>
          <Frame depth="32">org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)</Frame>
          <Frame depth="33">org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:796)</Frame>
          <Frame depth="34">org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:2716)</Frame>
          <Frame depth="35">org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2382)</Frame>
          <Frame depth="36">org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1363)</Frame>
          <Frame depth="37">org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1334)</Frame>
          <Frame depth="38">org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:253)</Frame>
          <Frame depth="39">org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:141)</Frame>
          <Frame depth="40">org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:97)</Frame>
          <Frame depth="41">org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:299)</Frame>
          <Frame depth="42">org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:256)</Frame>
          <Frame depth="43">org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:127)</Frame>
          <Frame depth="44">sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)</Frame>
          <Frame depth="45">sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)</Frame>
          <Frame depth="46">sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)</Frame>
          <Frame depth="47">java.lang.reflect.Method.invoke(Method.java:324)</Frame>
          <Frame depth="48">org.eclipse.core.launcher.Main.basicRun(Main.java:184)</Frame>
          <Frame depth="49">org.eclipse.core.launcher.Main.run(Main.java:637)</Frame>
          <Frame depth="50">org.eclipse.core.launcher.Main.main(Main.java:621)</Frame>
        </Frames>
      </Stacktrace>
      <Stacktrace timestamp="1437341131460">
        <Exception>org.eclipse.swt.SWTException</Exception>
        <Reason>Widget is disposed</Reason>
        <Frames>
          <Frame depth="0">java.lang.Throwable.&lt;init&gt;(Throwable.java)</Frame>
          <Frame depth="1">java.lang.Throwable.&lt;init&gt;(Throwable.java)</Frame>
          <Frame depth="2">org.eclipse.swt.SWTException.&lt;init&gt;(SWTException.java:73)</Frame>
          <Frame depth="3">org.eclipse.swt.SWT.error(SWT.java:2689)</Frame>
          <Frame depth="4">org.eclipse.swt.SWT.error(SWT.java:2614)</Frame>
          <Frame depth="5">org.eclipse.swt.SWT.error(SWT.java:2585)</Frame>
          <Frame depth="6">org.eclipse.swt.widgets.Widget.error(Widget.java:374)</Frame>
          <Frame depth="7">org.eclipse.swt.widgets.Widget.checkWidget(Widget.java)</Frame>
          <Frame depth="8">org.eclipse.swt.widgets.Control.getParent(Control.java:1560)</Frame>
          <Frame depth="9">org.eclipse.ui.internal.presentations.PaneFolder.layout(PaneFolder.java:327)</Frame>
          <Frame depth="10">org.eclipse.ui.internal.presentations.DefaultPartPresentation.layout(DefaultPartPresentation.java:660)</Frame>
          <Frame depth="11">org.eclipse.ui.internal.presentations.DefaultPartPresentation.setBounds(DefaultPartPresentation.java:872)</Frame>
          <Frame depth="12">org.eclipse.ui.internal.PartStack.setBounds(PartStack.java:879)</Frame>
          <Frame depth="13">org.eclipse.ui.internal.LayoutTree.setBounds(LayoutTree.java:190)</Frame>
          <Frame depth="14">org.eclipse.ui.internal.LayoutTreeNode.setBounds(LayoutTreeNode.java:373)</Frame>
          <Frame depth="15">org.eclipse.ui.internal.LayoutPartSash.widgetSelected(LayoutPartSash.java:191)</Frame>
          <Frame depth="16">org.eclipse.ui.internal.LayoutPartSash.access$1(LayoutPartSash.java:176)</Frame>
          <Frame depth="17">org.eclipse.ui.internal.LayoutPartSash$1.widgetSelected(LayoutPartSash.java:53)</Frame>
          <Frame depth="18">org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java)</Frame>
          <Frame depth="19">org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java)</Frame>
          <Frame depth="20">org.eclipse.swt.widgets.Widget.sendEvent(Widget.java)</Frame>
          <Frame depth="21">org.eclipse.swt.widgets.Widget.sendEvent(Widget.java)</Frame>
          <Frame depth="22">org.eclipse.swt.widgets.Widget.sendEvent(Widget.java)</Frame>
          <Frame depth="23">org.eclipse.swt.widgets.Sash.gtk_button_release_event(Sash.java:222)</Frame>
          <Frame depth="24">org.eclipse.swt.widgets.Widget.windowProc(Widget.java)</Frame>
          <Frame depth="25">org.eclipse.swt.widgets.Display.windowProc(Display.java)</Frame>
          <Frame depth="26">org.eclipse.swt.internal.gtk.OS.gtk_main_do_event(Native Method)</Frame>
          <Frame depth="27">org.eclipse.swt.widgets.Display.eventProc(Display.java)</Frame>
          <Frame depth="28">org.eclipse.swt.internal.gtk.OS.gtk_main_iteration(Native Method)</Frame>
          <Frame depth="29">org.eclipse.swt.widgets.Display.readAndDispatch(Display.java)</Frame>
          <Frame depth="30">org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1363)</Frame>
          <Frame depth="31">org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1334)</Frame>
          <Frame depth="32">org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:253)</Frame>
          <Frame depth="33">org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:141)</Frame>
          <Frame depth="34">org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:97)</Frame>
          <Frame depth="35">org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:299)</Frame>
          <Frame depth="36">org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:256)</Frame>
          <Frame depth="37">org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:127)</Frame>
          <Frame depth="38">sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)</Frame>
          <Frame depth="39">sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:79)</Frame>
          <Frame depth="40">sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:41)</Frame>
          <Frame depth="41">java.lang.reflect.Method.invoke(Method.java:386)</Frame>
          <Frame depth="42">org.eclipse.core.launcher.Main.basicRun(Main.java:184)</Frame>
          <Frame depth="43">org.eclipse.core.launcher.Main.run(Main.java:637)</Frame>
          <Frame depth="44">org.eclipse.core.launcher.Main.main(Main.java:621)</Frame>
        </Frames>
      </Stacktrace>
    </Stacktraces>
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="6">
        <Lines>
          <Line>1. When the current part is removed from a DefaultPartPresentation, it was not</Line>
          <Line>removing the reference to the part's toolbar.</Line>
          <Line />
          <Line>2. PaneFolder was JavaDoc'd to behave like an SWT control, but it could not</Line>
          <Line>handle child widgets being disposed without warning (which is normal for SWT</Line>
          <Line>composites).</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>I was rearranging winodws in the Java perspective and got the following 
exception.


!ENTRY org.eclipse.ui 4 0 May 17, 2004 10:14:12.311
!MESSAGE Widget is disposed
!STACK 0
org.eclipse.swt.SWTException: Widget is disposed
        at org.eclipse.swt.SWT.error(SWT.java:2689)
        at org.eclipse.swt.SWT.error(SWT.java:2614)
        at org.eclipse.swt.SWT.error(SWT.java:2585)
        at org.eclipse.swt.widgets.Widget.error(Widget.java:381)
        at org.eclipse.swt.widgets.Widget.checkWidget(Widget.java:283)
        at org.eclipse.swt.widgets.Control.getParent(Control.java:885)
        at org.eclipse.ui.internal.presentations.PaneFolder.layout
(PaneFolder.ja
va:327)
        at org.eclipse.ui.internal.presentations.DefaultPartPresentation.layout
(
DefaultPartPresentation.java:660)
        at 
org.eclipse.ui.internal.presentations.DefaultPartPresentation.setBoun
ds(DefaultPartPresentation.java:872)
        at org.eclipse.ui.internal.PartStack.setBounds(PartStack.java:880)
        at org.eclipse.ui.internal.LayoutTree.setBounds(LayoutTree.java:190)
        at org.eclipse.ui.internal.LayoutTreeNode.setBounds
(LayoutTreeNode.java:
372)
        at org.eclipse.ui.internal.LayoutTreeNode.setBounds
(LayoutTreeNode.java:
296)
        at org.eclipse.ui.internal.PartSashContainer.resizeSashes
(PartSashContai
ner.java:620)
        at org.eclipse.ui.internal.PartSashContainer.addChild
(PartSashContainer.
java:332)
        at org.eclipse.ui.internal.ViewSashContainer.addChild
(ViewSashContainer.
java:280)
        at org.eclipse.ui.internal.PartSashContainer.add
(PartSashContainer.java:
928)
        at org.eclipse.ui.internal.PartSashContainer.add
(PartSashContainer.java:
259)
        at org.eclipse.ui.internal.PartSashContainer.addEnhanced
(PartSashContain
er.java:220)
        at org.eclipse.ui.internal.PartSashContainer.add
(PartSashContainer.java:
192)
        at org.eclipse.ui.internal.PerspectiveHelper.derefPart
(PerspectiveHelper
.java:537)
        at org.eclipse.ui.internal.ViewSashContainer.derefPart
(ViewSashContainer
.java:262)
        at org.eclipse.ui.internal.PartSashContainer.stack
(PartSashContainer.jav
a:819)
        at org.eclipse.ui.internal.PartSashContainer.dropObject
(PartSashContaine
r.java:796)
        at 
org.eclipse.ui.internal.PartSashContainer$SashContainerDropTarget.dro
p(PartSashContainer.java:110)
        at org.eclipse.ui.internal.dnd.DragUtil.performDrag(DragUtil.java:128)
        at org.eclipse.ui.internal.PartStack.dragStart(PartStack.java:1116)
        at org.eclipse.ui.internal.PartStack$1.dragStart(PartStack.java:78)
        at 
org.eclipse.ui.internal.presentations.DefaultPartPresentation$10.hand
leEvent(DefaultPartPresentation.java:308)
        at org.eclipse.ui.presentations.PresentationUtil.handleMouseMove
(Present
ationUtil.java:89)
        at org.eclipse.ui.presentations.PresentationUtil.access$4
(PresentationUt
il.java:83)
        at org.eclipse.ui.presentations.PresentationUtil$2.handleEvent
(Presentat
ionUtil.java:55)
        at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)
        at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:796)
        at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:2716)
        at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2382)
        at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1363)
        at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1334)
        at org.eclipse.ui.internal.Workbench.createAndRunWorkbench
(Workbench.jav
a:253)
        at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:141)
        at org.eclipse.ui.internal.ide.IDEApplication.run
(IDEApplication.java:97
)
        at org.eclipse.core.internal.runtime.PlatformActivator$1.run
(PlatformAct
ivator.java:299)
        at org.eclipse.core.runtime.adaptor.EclipseStarter.run
(EclipseStarter.ja
va:256)
        at org.eclipse.core.runtime.adaptor.EclipseStarter.run
(EclipseStarter.ja
va:127)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke
(NativeMethodAccessorImpl.
java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke
(DelegatingMethodAcces
sorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:324)
        at org.eclipse.core.launcher.Main.basicRun(Main.java:184)
        at org.eclipse.core.launcher.Main.run(Main.java:637)
        at org.eclipse.core.launcher.Main.main(Main.java:621)
Widget is disposed
After this excpetion, the UI in the main window area stopped repainting but 
menus could still be expanded.
This occurred with build N20040517
still happening with I20040518, quite critical.

I had a stacktrace very similar to the one noted in comment 0, but it was
preceded by a slightly different one which I will include:

!STACK 0
org.eclipse.swt.SWTException: Widget is disposed
        at java.lang.Throwable.&lt;init&gt;(Throwable.java)
        at java.lang.Throwable.&lt;init&gt;(Throwable.java)
        at org.eclipse.swt.SWTException.&lt;init&gt;(SWTException.java:73)
        at org.eclipse.swt.SWT.error(SWT.java:2689)
        at org.eclipse.swt.SWT.error(SWT.java:2614)
        at org.eclipse.swt.SWT.error(SWT.java:2585)
        at org.eclipse.swt.widgets.Widget.error(Widget.java:374)
        at org.eclipse.swt.widgets.Widget.checkWidget(Widget.java)
        at org.eclipse.swt.widgets.Control.getParent(Control.java:1560)
        at
org.eclipse.ui.internal.presentations.PaneFolder.layout(PaneFolder.java:327)
        at
org.eclipse.ui.internal.presentations.DefaultPartPresentation.layout(DefaultPartPresentation.java:660)
        at
org.eclipse.ui.internal.presentations.DefaultPartPresentation.setBounds(DefaultPartPresentation.java:872)
        at org.eclipse.ui.internal.PartStack.setBounds(PartStack.java:879)
        at org.eclipse.ui.internal.LayoutTree.setBounds(LayoutTree.java:190)
        at org.eclipse.ui.internal.LayoutTreeNode.setBounds(LayoutTreeNode.java:373)
        at
org.eclipse.ui.internal.LayoutPartSash.widgetSelected(LayoutPartSash.java:191)
        at org.eclipse.ui.internal.LayoutPartSash.access$1(LayoutPartSash.java:176)
        at
org.eclipse.ui.internal.LayoutPartSash$1.widgetSelected(LayoutPartSash.java:53)
        at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java)
        at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java)
        at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java)
        at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java)
        at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java)
        at org.eclipse.swt.widgets.Sash.gtk_button_release_event(Sash.java:222)
        at org.eclipse.swt.widgets.Widget.windowProc(Widget.java)
        at org.eclipse.swt.widgets.Display.windowProc(Display.java)
        at org.eclipse.swt.internal.gtk.OS.gtk_main_do_event(Native Method)
        at org.eclipse.swt.widgets.Display.eventProc(Display.java)
        at org.eclipse.swt.internal.gtk.OS.gtk_main_iteration(Native Method)
        at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java)
        at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1363)
        at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1334)
        at
org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:253)
        at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:141)
        at org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:97)
        at
org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:299)
        at
org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:256)
        at
org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:127)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:79)
        at
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:41)
        at java.lang.reflect.Method.invoke(Method.java:386)
        at org.eclipse.core.launcher.Main.basicRun(Main.java:184)
        at org.eclipse.core.launcher.Main.run(Main.java:637)
        at org.eclipse.core.launcher.Main.main(Main.java:621)
Widget is disposed

This happened when switching presentations. Result as described in comment 1.
reducing severity, since I cannot reproduce consistently.
*** Bug 62819 has been marked as a duplicate of this bug. ***
I'm getting this with the code in head on May 26, 2004.
Fixed in head.

There were several problems here:
1. When the current part is removed from a DefaultPartPresentation, it was not
removing the reference to the part's toolbar.

2. PaneFolder was JavaDoc'd to behave like an SWT control, but it could not
handle child widgets being disposed without warning (which is normal for SWT
composites).

Both issues are fixed (although either fix would solve this problem).</WithStack>
    <WithOutStack>I was rearranging winodws in the Java perspective and got the following 
exception.


!ENTRY org.eclipse.ui 4 0 May 17, 2004 10:14:12.311
!MESSAGE Widget is disposed
!STACK 0
Widget is disposed
After this excpetion, the UI in the main window area stopped repainting but 
menus could still be expanded.
This occurred with build N20040517
still happening with I20040518, quite critical.

I had a stacktrace very similar to the one noted in comment 0, but it was
preceded by a slightly different one which I will include:

!STACK 0

Widget is disposed

This happened when switching presentations. Result as described in comment 1.
reducing severity, since I cannot reproduce consistently.
*** Bug 62819 has been marked as a duplicate of this bug. ***
I'm getting this with the code in head on May 26, 2004.
Fixed in head.

There were several problems here:
1. When the current part is removed from a DefaultPartPresentation, it was not
removing the reference to the part's toolbar.

2. PaneFolder was JavaDoc'd to behave like an SWT control, but it could not
handle child widgets being disposed without warning (which is normal for SWT
composites).

Both issues are fixed (although either fix would solve this problem).</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="62483" />
    <CreationDate amount="2004-05-17 10:33:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="UI" />
    <Version amount="3.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows 2000" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>[Forms] NPE in FormToolkit.dispose()</Summery>
    <Patches amount="0" />
    <Stacktraces amount="1">
      <Stacktrace timestamp="1437341131461">
        <Exception>java.lang.NullPointerException</Exception>
        <Reason />
        <Frames>
          <Frame depth="0">org.eclipse.ui.forms.widgets.FormToolkit.dispose(FormToolkit.java:568)</Frame>
        </Frames>
      </Stacktrace>
    </Stacktraces>
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="INVALID" />
    <WithStack>While testing the cheat sheets for resource leaks, I discovered that 
FormToolkit.dispose() is called multiple times. As a result, an NPE occurs.
java.lang.NullPointerException
     at org.eclipse.ui.forms.widgets.FormToolkit.dispose(FormToolkit.java:568)

The NPE should be easy to fix but another thing to note is that FormToolkit 
does not from an isDisposed() method. I'm not sure if it is actually required 
but calls of dispose() have no clue if someone sharing the same toolkit have 
already called it.
Lorne, toolkits are not supposed to be shared. Toolkits can share colors (this 
property is already managed i.e. a toolkit that has been passed a FormColors 
object will not dispose it), but the toolkit itself is not shareable. It 
should map 1-&gt;1 with some disposable entity (a view or an editor) and be 
disposed with it.
Dejan, I agree with your comments and discovered that it was a bug in a local 
change that I was testing. Oops! :-)</WithStack>
    <WithOutStack>While testing the cheat sheets for resource leaks, I discovered that 
FormToolkit.dispose() is called multiple times. As a result, an NPE occurs.


The NPE should be easy to fix but another thing to note is that FormToolkit 
does not from an isDisposed() method. I'm not sure if it is actually required 
but calls of dispose() have no clue if someone sharing the same toolkit have 
already called it.
Lorne, toolkits are not supposed to be shared. Toolkits can share colors (this 
property is already managed i.e. a toolkit that has been passed a FormColors 
object will not dispose it), but the toolkit itself is not shareable. It 
should map 1-&gt;1 with some disposable entity (a view or an editor) and be 
disposed with it.
Dejan, I agree with your comments and discovered that it was a bug in a local 
change that I was testing. Oops! :-)</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="62484" />
    <CreationDate amount="2004-05-17 10:38:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="UI" />
    <Version amount="3.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>[Workbench] ALT+MINUS is not "Show System Menu" (NLS concern)</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="WORKSFORME" />
    <WithStack>Under Window-&gt;Navigate, there is a menuitem which says:
Show System Menu ALT+MINUS

The System Menu is ALT+SPACE.  ALT+MINUS is something else.  It is the View 
management menu or something like that.
This is still in RC2.
The other "Show View Menu" is mapped to CTRL+F10, which conflicts with Show 
Ruler Context Menu.  I'll open a second bugzilla for this.
This is not in 3.3</WithStack>
    <WithOutStack>Under Window-&gt;Navigate, there is a menuitem which says:
Show System Menu ALT+MINUS

The System Menu is ALT+SPACE.  ALT+MINUS is something else.  It is the View 
management menu or something like that.
This is still in RC2.
The other "Show View Menu" is mapped to CTRL+F10, which conflicts with Show 
Ruler Context Menu.  I'll open a second bugzilla for this.
This is not in 3.3</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="62485" />
    <CreationDate amount="2004-05-17 10:40:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="CVS" />
    <Version amount="3.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="major" />
    <Summery>Cannot complete synchronize with dev.eclipse.org</Summery>
    <Patches amount="0" />
    <Stacktraces amount="2">
      <Stacktrace timestamp="1437341131464">
        <Exception>java.io.InterruptedIOException</Exception>
        <Reason>Timeout while reading from input stream</Reason>
        <Frames>
          <Frame depth="0">org.eclipse.team.internal.core.streams.PollingInputStream.read(PollingInputStream.java:101)</Frame>
          <Frame depth="1">org.eclipse.team.internal.ccvs.core.connection.Connection.readLine(Connection.java:143)</Frame>
          <Frame depth="2">org.eclipse.team.internal.ccvs.core.client.Session.readLine(Session.java:281)</Frame>
          <Frame depth="3">org.eclipse.team.internal.ccvs.core.client.Request.executeRequest(Request.java:150)</Frame>
          <Frame depth="4">org.eclipse.team.internal.ccvs.core.client.ValidRequests.execute(ValidRequests.java:26)</Frame>
          <Frame depth="5">org.eclipse.team.internal.ccvs.core.client.Session.open(Session.java:155)</Frame>
          <Frame depth="6">org.eclipse.team.internal.ccvs.core.resources.RemoteFolderTreeBuilder.fetchDelta(RemoteFolderTreeBuilder.java:219)</Frame>
          <Frame depth="7">org.eclipse.team.internal.ccvs.core.resources.RemoteFolderTreeBuilder.buildTree(RemoteFolderTreeBuilder.java:187)</Frame>
          <Frame depth="8">org.eclipse.team.internal.ccvs.core.resources.RemoteFolderTreeBuilder.buildRemoteTree(RemoteFolderTreeBuilder.java:159)</Frame>
          <Frame depth="9">org.eclipse.team.internal.ccvs.core.resources.CVSWorkspaceRoot.getRemoteTree(CVSWorkspaceRoot.java:230)</Frame>
          <Frame depth="10">org.eclipse.team.internal.ccvs.core.syncinfo.CVSResourceVariantTree.fetchVariant(CVSResourceVariantTree.java:95)</Frame>
          <Frame depth="11">org.eclipse.team.core.variants.AbstractResourceVariantTree.refresh(AbstractResourceVariantTree.java:107)</Frame>
          <Frame depth="12">org.eclipse.team.core.variants.AbstractResourceVariantTree.refresh(AbstractResourceVariantTree.java:67)</Frame>
          <Frame depth="13">org.eclipse.team.core.variants.ResourceVariantTreeSubscriber.refresh(ResourceVariantTreeSubscriber.java:157)</Frame>
          <Frame depth="14">org.eclipse.team.core.variants.ResourceVariantTreeSubscriber.refresh(ResourceVariantTreeSubscriber.java:123)</Frame>
          <Frame depth="15">org.eclipse.team.internal.ui.synchronize.RefreshSubscriberJob.runInWorkspace(RefreshSubscriberJob.java:257)</Frame>
          <Frame depth="16">org.eclipse.core.internal.resources.InternalWorkspaceJob.run(InternalWorkspaceJob.java:38)</Frame>
          <Frame depth="17">org.eclipse.core.internal.jobs.Worker.run(Worker.java:66)</Frame>
        </Frames>
      </Stacktrace>
      <Stacktrace timestamp="1437341131464">
        <Exception>java.io.InterruptedIOException</Exception>
        <Reason>Timeout while reading from input stream</Reason>
        <Frames>
          <Frame depth="0">org.eclipse.team.internal.core.streams.PollingInputStream.read(PollingInputStream.java:101)</Frame>
          <Frame depth="1">org.eclipse.team.internal.ccvs.core.connection.Connection.readLine(Connection.java:143)</Frame>
          <Frame depth="2">org.eclipse.team.internal.ccvs.core.client.Session.readLine(Session.java:281)</Frame>
          <Frame depth="3">org.eclipse.team.internal.ccvs.core.client.Request.executeRequest(Request.java:150)</Frame>
          <Frame depth="4">org.eclipse.team.internal.ccvs.core.client.ValidRequests.execute(ValidRequests.java:26)</Frame>
          <Frame depth="5">org.eclipse.team.internal.ccvs.core.client.Session.open(Session.java:155)</Frame>
          <Frame depth="6">org.eclipse.team.internal.ccvs.core.resources.RemoteFolderTreeBuilder.fetchDelta(RemoteFolderTreeBuilder.java:219)</Frame>
          <Frame depth="7">org.eclipse.team.internal.ccvs.core.resources.RemoteFolderTreeBuilder.buildTree(RemoteFolderTreeBuilder.java:187)</Frame>
          <Frame depth="8">org.eclipse.team.internal.ccvs.core.resources.RemoteFolderTreeBuilder.buildRemoteTree(RemoteFolderTreeBuilder.java:159)</Frame>
          <Frame depth="9">org.eclipse.team.internal.ccvs.core.resources.CVSWorkspaceRoot.getRemoteTree(CVSWorkspaceRoot.java:230)</Frame>
          <Frame depth="10">org.eclipse.team.internal.ccvs.core.syncinfo.CVSResourceVariantTree.fetchVariant(CVSResourceVariantTree.java:95)</Frame>
          <Frame depth="11">org.eclipse.team.core.variants.AbstractResourceVariantTree.refresh(AbstractResourceVariantTree.java:107)</Frame>
          <Frame depth="12">org.eclipse.team.core.variants.AbstractResourceVariantTree.refresh(AbstractResourceVariantTree.java:67)</Frame>
          <Frame depth="13">org.eclipse.team.core.variants.ResourceVariantTreeSubscriber.refresh(ResourceVariantTreeSubscriber.java:157)</Frame>
          <Frame depth="14">org.eclipse.team.core.variants.ResourceVariantTreeSubscriber.refresh(ResourceVariantTreeSubscriber.java:123)</Frame>
          <Frame depth="15">org.eclipse.team.internal.ui.synchronize.RefreshSubscriberJob.runInWorkspace(RefreshSubscriberJob.java:257)</Frame>
          <Frame depth="16">org.eclipse.core.internal.resources.InternalWorkspaceJob.run(InternalWorkspaceJob.java:38)</Frame>
          <Frame depth="17">org.eclipse.core.internal.jobs.Worker.run(Worker.java:66)</Frame>
        </Frames>
      </Stacktrace>
    </Stacktraces>
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="3">
        <Lines>
          <Line>1) Try M9 to see if the problem the same as bug 38430.</Line>
          <Line>2) Increase the communication timeout on the Team&gt;CVS preference page and see</Line>
          <Line>if tat helps</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="RESOLVED" />
    <resolution amount="WONTFIX" />
    <WithStack>I am trying to synchronize with all GEF projects.  This fails routinely.  The 
fewer projects I select, the higher my chance of success.  The CVS client 
should be more robust.  If it disconnects, it should be able to show partial 
results instead of nothing.  It should attempt to reconnect at least once 
before just failing.
Before we can address this, it would be helpful to know why it is failing 
routinely. Are you working over an intermittant connection? Are there 
exceptions in the log? 

As for making CVS more robust, the CVS protocol does not support reconnection 
so there's not much we can do there. We do show partial results in the sense 
that the results for each project that succeeded are shown and synching will 
continue with other projects if one project fails. If we knew more about the 
failures you are experiencing, we may be able to find additions means of 
improving robustness.
Waiting for more information.
I am located in RTP, NC. The connection must go through a firewall, but we do 
not have trouble with other types of connections. Other teams in RTP have 
reported similar trouble. I am not using wireless.

If rollback/resume is not possible, what about restarting from the beginning?
I think that, in general, it is a bad idea to try and restart the synchronize 
for the user. If the failure continues to happen each time, the synchronize 
would continue indefinitely until manually cancelled by the user. If you could 
give us some more information about the specifics of the failure you are 
seeing then perhaps we could address it. If you are using pserver, there is a 
possibility that the problem has already been addressed (see bug 38430).
Here is all that I have in the .log file.  I don't know if this helps or not.

!SUBENTRY 1 org.eclipse.core.resources 4 368 May 17, 2004 10:22:48.998
!MESSAGE Resource /org.eclipse.draw2d.graph.pde does not exist.
!ENTRY org.eclipse.team.core 4 0 May 17, 2004 10:24:03.45
!MESSAGE Errors occurred during refresh of CVS Workspace
!SUBENTRY 1 org.eclipse.team.core 4 0 May 17, 2004 10:24:03.45
!MESSAGE An error occurred refreshing /org.eclipse.gef.releng: I/O has been 
interrupted.
!STACK 1
org.eclipse.team.internal.ccvs.core.connection.CVSCommunicationException[0]: 
java.io.InterruptedIOException: Timeout while reading from input stream
	at org.eclipse.team.internal.core.streams.PollingInputStream.read
(PollingInputStream.java:101)
	at org.eclipse.team.internal.ccvs.core.connection.Connection.readLine
(Connection.java:143)
	at org.eclipse.team.internal.ccvs.core.client.Session.readLine
(Session.java:281)
	at org.eclipse.team.internal.ccvs.core.client.Request.executeRequest
(Request.java:150)
	at org.eclipse.team.internal.ccvs.core.client.ValidRequests.execute
(ValidRequests.java:26)
	at org.eclipse.team.internal.ccvs.core.client.Session.open
(Session.java:155)
	at 
org.eclipse.team.internal.ccvs.core.resources.RemoteFolderTreeBuilder.fetchDelta
(RemoteFolderTreeBuilder.java:219)
	at 
org.eclipse.team.internal.ccvs.core.resources.RemoteFolderTreeBuilder.buildTree
(RemoteFolderTreeBuilder.java:187)
	at 
org.eclipse.team.internal.ccvs.core.resources.RemoteFolderTreeBuilder.buildRemot
eTree(RemoteFolderTreeBuilder.java:159)
	at 
org.eclipse.team.internal.ccvs.core.resources.CVSWorkspaceRoot.getRemoteTree
(CVSWorkspaceRoot.java:230)
	at 
org.eclipse.team.internal.ccvs.core.syncinfo.CVSResourceVariantTree.fetchVariant
(CVSResourceVariantTree.java:95)
	at org.eclipse.team.core.variants.AbstractResourceVariantTree.refresh
(AbstractResourceVariantTree.java:107)
	at org.eclipse.team.core.variants.AbstractResourceVariantTree.refresh
(AbstractResourceVariantTree.java:67)
	at org.eclipse.team.core.variants.ResourceVariantTreeSubscriber.refresh
(ResourceVariantTreeSubscriber.java:157)
	at org.eclipse.team.core.variants.ResourceVariantTreeSubscriber.refresh
(ResourceVariantTreeSubscriber.java:123)
	at 
org.eclipse.team.internal.ui.synchronize.RefreshSubscriberJob.runInWorkspace
(RefreshSubscriberJob.java:257)
	at org.eclipse.core.internal.resources.InternalWorkspaceJob.run
(InternalWorkspaceJob.java:38)
	at org.eclipse.core.internal.jobs.Worker.run(Worker.java:66)
!SUBENTRY 2 org.eclipse.team.cvs.core 4 0 May 17, 2004 10:24:03.55
!MESSAGE I/O has been interrupted.
!STACK 0
java.io.InterruptedIOException: Timeout while reading from input stream
	at org.eclipse.team.internal.core.streams.PollingInputStream.read
(PollingInputStream.java:101)
	at org.eclipse.team.internal.ccvs.core.connection.Connection.readLine
(Connection.java:143)
	at org.eclipse.team.internal.ccvs.core.client.Session.readLine
(Session.java:281)
	at org.eclipse.team.internal.ccvs.core.client.Request.executeRequest
(Request.java:150)
	at org.eclipse.team.internal.ccvs.core.client.ValidRequests.execute
(ValidRequests.java:26)
	at org.eclipse.team.internal.ccvs.core.client.Session.open
(Session.java:155)
	at 
org.eclipse.team.internal.ccvs.core.resources.RemoteFolderTreeBuilder.fetchDelta
(RemoteFolderTreeBuilder.java:219)
	at 
org.eclipse.team.internal.ccvs.core.resources.RemoteFolderTreeBuilder.buildTree
(RemoteFolderTreeBuilder.java:187)
	at 
org.eclipse.team.internal.ccvs.core.resources.RemoteFolderTreeBuilder.buildRemot
eTree(RemoteFolderTreeBuilder.java:159)
	at 
org.eclipse.team.internal.ccvs.core.resources.CVSWorkspaceRoot.getRemoteTree
(CVSWorkspaceRoot.java:230)
	at 
org.eclipse.team.internal.ccvs.core.syncinfo.CVSResourceVariantTree.fetchVariant
(CVSResourceVariantTree.java:95)
	at org.eclipse.team.core.variants.AbstractResourceVariantTree.refresh
(AbstractResourceVariantTree.java:107)
	at org.eclipse.team.core.variants.AbstractResourceVariantTree.refresh
(AbstractResourceVariantTree.java:67)
	at org.eclipse.team.core.variants.ResourceVariantTreeSubscriber.refresh
(ResourceVariantTreeSubscriber.java:157)
	at org.eclipse.team.core.variants.ResourceVariantTreeSubscriber.refresh
(ResourceVariantTreeSubscriber.java:123)
	at 
org.eclipse.team.internal.ui.synchronize.RefreshSubscriberJob.runInWorkspace
(RefreshSubscriberJob.java:257)
	at org.eclipse.core.internal.resources.InternalWorkspaceJob.run
(InternalWorkspaceJob.java:38)
	at org.eclipse.core.internal.jobs.Worker.run(Worker.java:66)
!SUBENTRY 3 org.eclipse.team.cvs.core 4 4 May 17, 2004 10:24:03.55
!MESSAGE The most likely cause of the interrupt is either an intermittent 
network failure or a communications timeout.
!SUBENTRY 3 org.eclipse.team.cvs.core 4 4 May 17, 2004 10:24:03.55
!MESSAGE The CVS communications timeout can be adjusted in the Team/CVS 
preferences.
!SUBENTRY 3 org.eclipse.team.cvs.core 4 4 May 17, 2004 10:24:03.55
!MESSAGE Another possible cause is the improper configuration of the "ext" 
connection method.
!SUBENTRY 3 org.eclipse.team.cvs.core 4 4 May 17, 2004 10:24:03.55
!MESSAGE The "ext" connection method can be configured on the Team/CVS/EXT 
Connection Method preference page

Yes, the Pin button is pretty useful I suppose.  But the synchronize dropdown 
action inside the synchronize view looks exactly like the one in the workbench 
toolbar.  But, clicking on it does not do the same thing when pinned.  This is 
a little strange because they look identical.
I would suggest trying the following:

1) Try M9 to see if the problem the same as bug 38430.
2) Increase the communication timeout on the Team&gt;CVS preference page and see 
if tat helps</WithStack>
    <WithOutStack>I am trying to synchronize with all GEF projects.  This fails routinely.  The 
fewer projects I select, the higher my chance of success.  The CVS client 
should be more robust.  If it disconnects, it should be able to show partial 
results instead of nothing.  It should attempt to reconnect at least once 
before just failing.
Before we can address this, it would be helpful to know why it is failing 
routinely. Are you working over an intermittant connection? Are there 
exceptions in the log? 

As for making CVS more robust, the CVS protocol does not support reconnection 
so there's not much we can do there. We do show partial results in the sense 
that the results for each project that succeeded are shown and synching will 
continue with other projects if one project fails. If we knew more about the 
failures you are experiencing, we may be able to find additions means of 
improving robustness.
Waiting for more information.
I am located in RTP, NC. The connection must go through a firewall, but we do 
not have trouble with other types of connections. Other teams in RTP have 
reported similar trouble. I am not using wireless.

If rollback/resume is not possible, what about restarting from the beginning?
I think that, in general, it is a bad idea to try and restart the synchronize 
for the user. If the failure continues to happen each time, the synchronize 
would continue indefinitely until manually cancelled by the user. If you could 
give us some more information about the specifics of the failure you are 
seeing then perhaps we could address it. If you are using pserver, there is a 
possibility that the problem has already been addressed (see bug 38430).
Here is all that I have in the .log file.  I don't know if this helps or not.

!SUBENTRY 1 org.eclipse.core.resources 4 368 May 17, 2004 10:22:48.998
!MESSAGE Resource /org.eclipse.draw2d.graph.pde does not exist.
!ENTRY org.eclipse.team.core 4 0 May 17, 2004 10:24:03.45
!MESSAGE Errors occurred during refresh of CVS Workspace
!SUBENTRY 1 org.eclipse.team.core 4 0 May 17, 2004 10:24:03.45
!MESSAGE An error occurred refreshing /org.eclipse.gef.releng: I/O has been 
interrupted.
!STACK 1
org.eclipse.team.internal.ccvs.core.connection.CVSCommunicationException[0]: 
!SUBENTRY 2 org.eclipse.team.cvs.core 4 0 May 17, 2004 10:24:03.55
!MESSAGE I/O has been interrupted.
!STACK 0

!SUBENTRY 3 org.eclipse.team.cvs.core 4 4 May 17, 2004 10:24:03.55
!MESSAGE The most likely cause of the interrupt is either an intermittent 
network failure or a communications timeout.
!SUBENTRY 3 org.eclipse.team.cvs.core 4 4 May 17, 2004 10:24:03.55
!MESSAGE The CVS communications timeout can be adjusted in the Team/CVS 
preferences.
!SUBENTRY 3 org.eclipse.team.cvs.core 4 4 May 17, 2004 10:24:03.55
!MESSAGE Another possible cause is the improper configuration of the "ext" 
connection method.
!SUBENTRY 3 org.eclipse.team.cvs.core 4 4 May 17, 2004 10:24:03.55
!MESSAGE The "ext" connection method can be configured on the Team/CVS/EXT 
Connection Method preference page

Yes, the Pin button is pretty useful I suppose.  But the synchronize dropdown 
action inside the synchronize view looks exactly like the one in the workbench 
toolbar.  But, clicking on it does not do the same thing when pinned.  This is 
a little strange because they look identical.
I would suggest trying the following:

1) Try M9 to see if the problem the same as bug 38430.
2) Increase the communication timeout on the Team&gt;CVS preference page and see 
if tat helps</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="62486" />
    <CreationDate amount="2004-05-17 11:08:00 -0400" />
    <DupId amount="62581" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="UI" />
    <Version amount="3.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows 2000" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>[Intro] StandbyPart attempts to reuse content standbypart even after dispose has been called</Summery>
    <Patches amount="0" />
    <Stacktraces amount="1">
      <Stacktrace timestamp="1437341131465">
        <Exception>org.eclipse.swt.SWTException</Exception>
        <Reason>Widget is disposed</Reason>
        <Frames>
          <Frame depth="0">org.eclipse.swt.SWT.error(SWT.java:2689)</Frame>
          <Frame depth="1">org.eclipse.swt.SWT.error(SWT.java:2614)</Frame>
          <Frame depth="2">org.eclipse.swt.SWT.error(SWT.java:2585)</Frame>
          <Frame depth="3">org.eclipse.swt.widgets.Widget.error(Widget.java:381)</Frame>
          <Frame depth="4">org.eclipse.swt.widgets.Widget.checkWidget(Widget.java:283)</Frame>
          <Frame depth="5">org.eclipse.swt.widgets.Composite.getLayout(Composite.java:269)</Frame>
          <Frame depth="6">org.eclipse.ui.internal.intro.impl.parts.StandbyPart.setTopControl(StandbyPart.java:152)</Frame>
          <Frame depth="7">org.eclipse.ui.internal.intro.impl.parts.StandbyPart.setTopControl(StandbyPart.java:147)</Frame>
          <Frame depth="8">org.eclipse.ui.internal.intro.impl.model.IntroURL.handleStandbyStateChanged(IntroURL.java:193)</Frame>
          <Frame depth="9">org.eclipse.ui.internal.intro.impl.model.IntroURL.doExecute(IntroURL.java:123)</Frame>
          <Frame depth="10">org.eclipse.ui.internal.intro.impl.model.IntroURL.access$0(IntroURL.java:111)</Frame>
          <Frame depth="11">org.eclipse.ui.internal.intro.impl.model.IntroURL$1.run(IntroURL.java:103)</Frame>
          <Frame depth="12">org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:69)</Frame>
          <Frame depth="13">org.eclipse.ui.internal.intro.impl.model.IntroURL.execute(IntroURL.java:92)</Frame>
          <Frame depth="14">org.eclipse.ui.internal.intro.impl.presentations.BrowserIntroPartLocationListener.changing(BrowserIntroPartLocationListener.java:61)</Frame>
          <Frame depth="15">org.eclipse.swt.browser.Browser$3.handleEvent(Browser.java:169)</Frame>
          <Frame depth="16">org.eclipse.swt.ole.win32.OleEventTable.sendEvent(OleEventTable.java:55)</Frame>
        </Frames>
      </Stacktrace>
    </Stacktraces>
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="9">
        <Lines>
          <Line>1. Launch on a new workspace</Line>
          <Line>2. Select Tutorials from the root page of the Introuction</Line>
          <Line>3. Select the "Build a simple Java application" tutorial</Line>
          <Line>4. Close the Introduction when it is in the standby mode with the cheat sheet</Line>
          <Line>displayed</Line>
          <Line>5. Re-open the Introduction from the Help menu</Line>
          <Line>6. Select Tutorials from the root page of the Introuction</Line>
          <Line>7. Select the "Build a simple Java application" tutorial or any other one</Line>
          <Line>8. Notice that no standby part is displayed</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="RESOLVED" />
    <resolution amount="DUPLICATE" />
    <WithStack>Cheat sheets had a bug where by calling ICheatSheetViewer.getControl() would 
return a different "control" for each new cheat sheet opened. This has now been 
fixed, so you will need the latest code from HEAD to reproduce the intro bug.

Steps to reproduce the problem:
1. Launch on a new workspace
2. Select Tutorials from the root page of the Introuction
3. Select the "Build a simple Java application" tutorial
4. Close the Introduction when it is in the standby mode with the cheat sheet 
displayed
5. Re-open the Introduction from the Help menu
6. Select Tutorials from the root page of the Introuction
7. Select the "Build a simple Java application" tutorial or any other one
8. Notice that no standby part is displayed

Here is the stack trace obtained by adding a try/catch at line 192 of IntroURL:
org.eclipse.swt.SWTException: Widget is disposed
	at org.eclipse.swt.SWT.error(SWT.java:2689)
	at org.eclipse.swt.SWT.error(SWT.java:2614)
	at org.eclipse.swt.SWT.error(SWT.java:2585)
	at org.eclipse.swt.widgets.Widget.error(Widget.java:381)
	at org.eclipse.swt.widgets.Widget.checkWidget(Widget.java:283)
	at org.eclipse.swt.widgets.Composite.getLayout(Composite.java:269)
	at org.eclipse.ui.internal.intro.impl.parts.StandbyPart.setTopControl
(StandbyPart.java:152)
	at org.eclipse.ui.internal.intro.impl.parts.StandbyPart.setTopControl
(StandbyPart.java:147)
	at 
org.eclipse.ui.internal.intro.impl.model.IntroURL.handleStandbyStateChanged
(IntroURL.java:193)
	at org.eclipse.ui.internal.intro.impl.model.IntroURL.doExecute
(IntroURL.java:123)
	at org.eclipse.ui.internal.intro.impl.model.IntroURL.access$0
(IntroURL.java:111)
	at org.eclipse.ui.internal.intro.impl.model.IntroURL$1.run
(IntroURL.java:103)
	at org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:69)
	at org.eclipse.ui.internal.intro.impl.model.IntroURL.execute
(IntroURL.java:92)
	at 
org.eclipse.ui.internal.intro.impl.presentations.BrowserIntroPartLocationListene
r.changing(BrowserIntroPartLocationListener.java:61)
	at org.eclipse.swt.browser.Browser$3.handleEvent(Browser.java:169)
	at org.eclipse.swt.ole.win32.OleEventTable.sendEvent
(OleEventTable.java:55)
Is there anything to do with this defect?
I believe that the caching of IStandbyContentPart is not working correctly and 
needs to be investigated.

So, yes something does need to be done.


*** This bug has been marked as a duplicate of 62581 ***</WithStack>
    <WithOutStack>Cheat sheets had a bug where by calling ICheatSheetViewer.getControl() would 
return a different "control" for each new cheat sheet opened. This has now been 
fixed, so you will need the latest code from HEAD to reproduce the intro bug.

Steps to reproduce the problem:
1. Launch on a new workspace
2. Select Tutorials from the root page of the Introuction
3. Select the "Build a simple Java application" tutorial
4. Close the Introduction when it is in the standby mode with the cheat sheet 
displayed
5. Re-open the Introduction from the Help menu
6. Select Tutorials from the root page of the Introuction
7. Select the "Build a simple Java application" tutorial or any other one
8. Notice that no standby part is displayed

Here is the stack trace obtained by adding a try/catch at line 192 of IntroURL:

Is there anything to do with this defect?
I believe that the caching of IStandbyContentPart is not working correctly and 
needs to be investigated.

So, yes something does need to be done.


*** This bug has been marked as a duplicate of 62581 ***</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="62487" />
    <CreationDate amount="2004-05-17 11:23:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="JDT" />
    <component amount="Text" />
    <Version amount="3.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows 2000" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Java editor generates a NPE on opening files suffixed with .ejb</Summery>
    <Patches amount="0" />
    <Stacktraces amount="1">
      <Stacktrace timestamp="1437341131468">
        <Exception>java.lang.NullPointerException</Exception>
        <Reason />
        <Frames>
          <Frame depth="0">org.eclipse.jdt.internal.ui.javaeditor.ASTProvider.activeJavaEditorChanged(ASTProvider.java:210)</Frame>
          <Frame depth="1">org.eclipse.jdt.internal.ui.javaeditor.ASTProvider.access$0(ASTProvider.java:199)</Frame>
          <Frame depth="2">org.eclipse.jdt.internal.ui.javaeditor.ASTProvider$ActivationListener.partOpened(ASTProvider.java:88)</Frame>
          <Frame depth="3">org.eclipse.ui.internal.PartListenerList2$5.run(PartListenerList2.java:125)</Frame>
          <Frame depth="4">org.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java:610)</Frame>
          <Frame depth="5">org.eclipse.core.runtime.Platform.run(Platform.java:521)</Frame>
          <Frame depth="6">org.eclipse.ui.internal.PartListenerList2.firePartOpened(PartListenerList2.java:123)</Frame>
          <Frame depth="7">org.eclipse.ui.internal.WWinPartService$1.partOpened(WWinPartService.java:62)</Frame>
          <Frame depth="8">org.eclipse.ui.internal.PartListenerList2$5.run(PartListenerList2.java:125)</Frame>
          <Frame depth="9">org.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java:610)</Frame>
          <Frame depth="10">org.eclipse.core.runtime.Platform.run(Platform.java:521)</Frame>
          <Frame depth="11">org.eclipse.ui.internal.PartListenerList2.firePartOpened(PartListenerList2.java:123)</Frame>
          <Frame depth="12">org.eclipse.ui.internal.WorkbenchPage.firePartOpened(WorkbenchPage.java:1356)</Frame>
          <Frame depth="13">org.eclipse.ui.internal.PartPane.createChildControl(PartPane.java:121)</Frame>
          <Frame depth="14">org.eclipse.ui.internal.EditorManager$7.run(EditorManager.java:799)</Frame>
          <Frame depth="15">org.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java:610)</Frame>
          <Frame depth="16">org.eclipse.core.runtime.Platform.run(Platform.java:521)</Frame>
          <Frame depth="17">org.eclipse.ui.internal.EditorManager.busyRestoreEditor(EditorManager.java:773)</Frame>
          <Frame depth="18">org.eclipse.ui.internal.EditorManager$6.run(EditorManager.java:766)</Frame>
          <Frame depth="19">org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:84)</Frame>
          <Frame depth="20">org.eclipse.ui.internal.EditorManager.restoreEditor(EditorManager.java:762)</Frame>
          <Frame depth="21">org.eclipse.ui.internal.EditorManager$Editor.getEditor(EditorManager.java:1136)</Frame>
          <Frame depth="22">org.eclipse.ui.internal.EditorManager$Editor.getPart(EditorManager.java:1128)</Frame>
          <Frame depth="23">org.eclipse.ui.internal.PartPane.setVisible(PartPane.java:311)</Frame>
          <Frame depth="24">org.eclipse.ui.internal.PresentableEditorPart.setVisible(PresentableEditorPart.java:93)</Frame>
          <Frame depth="25">org.eclipse.ui.internal.presentations.BasicStackPresentation.selectPart(BasicStackPresentation.java:657)</Frame>
          <Frame depth="26">org.eclipse.ui.internal.EditorWorkbook.setSelection(EditorWorkbook.java:780)</Frame>
          <Frame depth="27">org.eclipse.ui.internal.EditorWorkbook.updateContainerVisibleTab(EditorWorkbook.java:1021)</Frame>
          <Frame depth="28">org.eclipse.ui.internal.EditorWorkbook.remove(EditorWorkbook.java:613)</Frame>
          <Frame depth="29">org.eclipse.ui.internal.EditorArea.removeEditor(EditorArea.java:192)</Frame>
          <Frame depth="30">org.eclipse.ui.internal.EditorPresentation.closeEditor(EditorPresentation.java:75)</Frame>
          <Frame depth="31">org.eclipse.ui.internal.EditorPresentation.closeEditor(EditorPresentation.java:56)</Frame>
          <Frame depth="32">org.eclipse.ui.internal.EditorManager.closeEditor(EditorManager.java:164)</Frame>
          <Frame depth="33">org.eclipse.ui.internal.WorkbenchPage.closeEditors(WorkbenchPage.java:852)</Frame>
          <Frame depth="34">org.eclipse.ui.internal.WorkbenchPage.closeAllEditors(WorkbenchPage.java:799)</Frame>
          <Frame depth="35">org.eclipse.ui.internal.CloseAllAction.run(CloseAllAction.java:74)</Frame>
          <Frame depth="36">org.eclipse.jface.action.Action.runWithEvent(Action.java:881)</Frame>
          <Frame depth="37">org.eclipse.ui.commands.ActionHandler.execute(ActionHandler.java:68)</Frame>
          <Frame depth="38">org.eclipse.ui.internal.commands.Command.execute(Command.java:173)</Frame>
          <Frame depth="39">org.eclipse.ui.internal.keys.WorkbenchKeyboard.executeCommand(WorkbenchKeyboard.java:463)</Frame>
          <Frame depth="40">org.eclipse.ui.internal.keys.WorkbenchKeyboard.press(WorkbenchKeyboard.java:855)</Frame>
          <Frame depth="41">org.eclipse.ui.internal.keys.WorkbenchKeyboard.processKeyEvent(WorkbenchKeyboard.java:896)</Frame>
          <Frame depth="42">org.eclipse.ui.internal.keys.WorkbenchKeyboard.filterKeySequenceBindings(WorkbenchKeyboard.java:522)</Frame>
          <Frame depth="43">org.eclipse.ui.internal.keys.WorkbenchKeyboard.access$2(WorkbenchKeyboard.java:488)</Frame>
          <Frame depth="44">org.eclipse.ui.internal.keys.WorkbenchKeyboard$1.handleEvent(WorkbenchKeyboard.java:261)</Frame>
          <Frame depth="45">org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)</Frame>
          <Frame depth="46">org.eclipse.swt.widgets.Display.filterEvent(Display.java:705)</Frame>
          <Frame depth="47">org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:768)</Frame>
          <Frame depth="48">org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:793)</Frame>
          <Frame depth="49">org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:778)</Frame>
          <Frame depth="50">org.eclipse.swt.widgets.Control.sendKeyEvent(Control.java:1720)</Frame>
          <Frame depth="51">org.eclipse.swt.widgets.Control.sendKeyEvent(Control.java:1716)</Frame>
          <Frame depth="52">org.eclipse.swt.widgets.Control.WM_KEYDOWN(Control.java:3487)</Frame>
          <Frame depth="53">org.eclipse.swt.widgets.Tree.WM_KEYDOWN(Tree.java:1343)</Frame>
          <Frame depth="54">org.eclipse.swt.widgets.Control.windowProc(Control.java:2971)</Frame>
          <Frame depth="55">org.eclipse.swt.widgets.Display.windowProc(Display.java:3146)</Frame>
          <Frame depth="56">org.eclipse.swt.internal.win32.OS.DispatchMessageW(Native Method)</Frame>
          <Frame depth="57">org.eclipse.swt.internal.win32.OS.DispatchMessage(OS.java:1450)</Frame>
          <Frame depth="58">org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2254)</Frame>
          <Frame depth="59">org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1562)</Frame>
          <Frame depth="60">org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1536)</Frame>
          <Frame depth="61">org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:257)</Frame>
          <Frame depth="62">org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:139)</Frame>
          <Frame depth="63">org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:90)</Frame>
          <Frame depth="64">org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:277)</Frame>
          <Frame depth="65">org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:239)</Frame>
          <Frame depth="66">org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:117)</Frame>
          <Frame depth="67">sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)</Frame>
          <Frame depth="68">sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)</Frame>
          <Frame depth="69">sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)</Frame>
          <Frame depth="70">java.lang.reflect.Method.invoke(Method.java:324)</Frame>
          <Frame depth="71">org.eclipse.core.launcher.Main.basicRun(Main.java:267)</Frame>
          <Frame depth="72">org.eclipse.core.launcher.Main.run(Main.java:692)</Frame>
          <Frame depth="73">org.eclipse.core.launcher.Main.main(Main.java:676)</Frame>
        </Frames>
      </Stacktrace>
    </Stacktraces>
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="WORKSFORME" />
    <WithStack>Using the Java editor to edit Weblogic EJBGen files (*.ejb) causes a
NullPointerException to be generated.  Syntax highlighting and code completion
does not work.  Stack trace from .log follows.

!ENTRY org.eclipse.core.runtime 4 2 May 17, 2004 11:01:33.48
!MESSAGE Problems occurred when invoking code from plug-in:
"org.eclipse.core.runtime".
!STACK 0
java.lang.NullPointerException
	at
org.eclipse.jdt.internal.ui.javaeditor.ASTProvider.activeJavaEditorChanged(ASTProvider.java:210)
	at
org.eclipse.jdt.internal.ui.javaeditor.ASTProvider.access$0(ASTProvider.java:199)
	at
org.eclipse.jdt.internal.ui.javaeditor.ASTProvider$ActivationListener.partOpened(ASTProvider.java:88)
	at org.eclipse.ui.internal.PartListenerList2$5.run(PartListenerList2.java:125)
	at
org.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java:610)
	at org.eclipse.core.runtime.Platform.run(Platform.java:521)
	at
org.eclipse.ui.internal.PartListenerList2.firePartOpened(PartListenerList2.java:123)
	at org.eclipse.ui.internal.WWinPartService$1.partOpened(WWinPartService.java:62)
	at org.eclipse.ui.internal.PartListenerList2$5.run(PartListenerList2.java:125)
	at
org.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java:610)
	at org.eclipse.core.runtime.Platform.run(Platform.java:521)
	at
org.eclipse.ui.internal.PartListenerList2.firePartOpened(PartListenerList2.java:123)
	at org.eclipse.ui.internal.WorkbenchPage.firePartOpened(WorkbenchPage.java:1356)
	at org.eclipse.ui.internal.PartPane.createChildControl(PartPane.java:121)
	at org.eclipse.ui.internal.EditorManager$7.run(EditorManager.java:799)
	at
org.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java:610)
	at org.eclipse.core.runtime.Platform.run(Platform.java:521)
	at org.eclipse.ui.internal.EditorManager.busyRestoreEditor(EditorManager.java:773)
	at org.eclipse.ui.internal.EditorManager$6.run(EditorManager.java:766)
	at org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:84)
	at org.eclipse.ui.internal.EditorManager.restoreEditor(EditorManager.java:762)
	at org.eclipse.ui.internal.EditorManager$Editor.getEditor(EditorManager.java:1136)
	at org.eclipse.ui.internal.EditorManager$Editor.getPart(EditorManager.java:1128)
	at org.eclipse.ui.internal.PartPane.setVisible(PartPane.java:311)
	at
org.eclipse.ui.internal.PresentableEditorPart.setVisible(PresentableEditorPart.java:93)
	at
org.eclipse.ui.internal.presentations.BasicStackPresentation.selectPart(BasicStackPresentation.java:657)
	at org.eclipse.ui.internal.EditorWorkbook.setSelection(EditorWorkbook.java:780)
	at
org.eclipse.ui.internal.EditorWorkbook.updateContainerVisibleTab(EditorWorkbook.java:1021)
	at org.eclipse.ui.internal.EditorWorkbook.remove(EditorWorkbook.java:613)
	at org.eclipse.ui.internal.EditorArea.removeEditor(EditorArea.java:192)
	at
org.eclipse.ui.internal.EditorPresentation.closeEditor(EditorPresentation.java:75)
	at
org.eclipse.ui.internal.EditorPresentation.closeEditor(EditorPresentation.java:56)
	at org.eclipse.ui.internal.EditorManager.closeEditor(EditorManager.java:164)
	at org.eclipse.ui.internal.WorkbenchPage.closeEditors(WorkbenchPage.java:852)
	at org.eclipse.ui.internal.WorkbenchPage.closeAllEditors(WorkbenchPage.java:799)
	at org.eclipse.ui.internal.CloseAllAction.run(CloseAllAction.java:74)
	at org.eclipse.jface.action.Action.runWithEvent(Action.java:881)
	at org.eclipse.ui.commands.ActionHandler.execute(ActionHandler.java:68)
	at org.eclipse.ui.internal.commands.Command.execute(Command.java:173)
	at
org.eclipse.ui.internal.keys.WorkbenchKeyboard.executeCommand(WorkbenchKeyboard.java:463)
	at org.eclipse.ui.internal.keys.WorkbenchKeyboard.press(WorkbenchKeyboard.java:855)
	at
org.eclipse.ui.internal.keys.WorkbenchKeyboard.processKeyEvent(WorkbenchKeyboard.java:896)
	at
org.eclipse.ui.internal.keys.WorkbenchKeyboard.filterKeySequenceBindings(WorkbenchKeyboard.java:522)
	at
org.eclipse.ui.internal.keys.WorkbenchKeyboard.access$2(WorkbenchKeyboard.java:488)
	at
org.eclipse.ui.internal.keys.WorkbenchKeyboard$1.handleEvent(WorkbenchKeyboard.java:261)
	at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)
	at org.eclipse.swt.widgets.Display.filterEvent(Display.java:705)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:768)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:793)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:778)
	at org.eclipse.swt.widgets.Control.sendKeyEvent(Control.java:1720)
	at org.eclipse.swt.widgets.Control.sendKeyEvent(Control.java:1716)
	at org.eclipse.swt.widgets.Control.WM_KEYDOWN(Control.java:3487)
	at org.eclipse.swt.widgets.Tree.WM_KEYDOWN(Tree.java:1343)
	at org.eclipse.swt.widgets.Control.windowProc(Control.java:2971)
	at org.eclipse.swt.widgets.Display.windowProc(Display.java:3146)
	at org.eclipse.swt.internal.win32.OS.DispatchMessageW(Native Method)
	at org.eclipse.swt.internal.win32.OS.DispatchMessage(OS.java:1450)
	at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2254)
	at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1562)
	at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1536)
	at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:257)
	at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:139)
	at org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:90)
	at
org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:277)
	at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:239)
	at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:117)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:324)
	at org.eclipse.core.launcher.Main.basicRun(Main.java:267)
	at org.eclipse.core.launcher.Main.run(Main.java:692)
	at org.eclipse.core.launcher.Main.main(Main.java:676)
I assume you are using an older build this has been fixed some time ago
You are correct.  I am using 3.0 M8</WithStack>
    <WithOutStack>Using the Java editor to edit Weblogic EJBGen files (*.ejb) causes a
NullPointerException to be generated.  Syntax highlighting and code completion
does not work.  Stack trace from .log follows.

!ENTRY org.eclipse.core.runtime 4 2 May 17, 2004 11:01:33.48
!MESSAGE Problems occurred when invoking code from plug-in:
"org.eclipse.core.runtime".
!STACK 0

I assume you are using an older build this has been fixed some time ago
You are correct.  I am using 3.0 M8</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="62488" />
    <CreationDate amount="2004-05-17 11:24:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="Debug" />
    <Version amount="3.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Default pref settings</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="VERIFIED" />
    <resolution amount="FIXED" />
    <WithStack>By default, we should not provide the "breakpoints" prompt (i.e. do you want 
to debug?). Many users have complained about this.
Fixed (changes in DebugUIPlugin). Default is to "never" prompt.
Please verify, Kevin.
verified</WithStack>
    <WithOutStack>By default, we should not provide the "breakpoints" prompt (i.e. do you want 
to debug?). Many users have complained about this.
Fixed (changes in DebugUIPlugin). Default is to "never" prompt.
Please verify, Kevin.
verified</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="62489" />
    <CreationDate amount="2004-05-17 11:34:00 -0400" />
    <DupId amount="24448" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="Ant" />
    <Version amount="2.1.3" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows 2000" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Memory leaks when running Ant</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="DUPLICATE" />
    <WithStack>We have automated many development tasks as Ant scripts launched from Eclipse 
(compilation, formatting, and so on). After having launched Ant several times 
(from 10 to 30 depending on the task) I cannot run it any more. Most of the 
time no reason is given, and nothing happens. Sometimes an out off memory log 
is displayed. But having a look at the Windows task manager always shows a huge 
amount of memory consumed by Eclipse when Ant is massively used.
The only solution is to re-start Eclipse...
You have several choices here:
Use Ant 1.6.1 with Eclipse 2.1.3 (most of the Ant leaks are fixed in Apache 
Ant 1.6.1...unless you are using XDoclet which really is not an Apache Ant 
leak)
Move to Eclipse 3.0 which comes with Ant 1.6.1 and you can launch Ant in a 
separate VM.

For all the details see the duplicate bug report.

*** This bug has been marked as a duplicate of 24448 ***</WithStack>
    <WithOutStack>We have automated many development tasks as Ant scripts launched from Eclipse 
(compilation, formatting, and so on). After having launched Ant several times 
(from 10 to 30 depending on the task) I cannot run it any more. Most of the 
time no reason is given, and nothing happens. Sometimes an out off memory log 
is displayed. But having a look at the Windows task manager always shows a huge 
amount of memory consumed by Eclipse when Ant is massively used.
The only solution is to re-start Eclipse...
You have several choices here:
Use Ant 1.6.1 with Eclipse 2.1.3 (most of the Ant leaks are fixed in Apache 
Ant 1.6.1...unless you are using XDoclet which really is not an Apache Ant 
leak)
Move to Eclipse 3.0 which comes with Ant 1.6.1 and you can launch Ant in a 
separate VM.

For all the details see the duplicate bug report.

*** This bug has been marked as a duplicate of 24448 ***</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="62490" />
    <CreationDate amount="2004-05-17 11:41:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="Debug" />
    <Version amount="3.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>out-of-box experience</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="VERIFIED" />
    <resolution amount="FIXED" />
    <WithStack>The "build before launch" pref should by "ALWAYS" by default.
This is actually the prompt to wait for the build. The default settings are to 
build and wait before the launch (without prompting).
please verify, Kevin.
verified</WithStack>
    <WithOutStack>The "build before launch" pref should by "ALWAYS" by default.
This is actually the prompt to wait for the build. The default settings are to 
build and wait before the launch (without prompting).
please verify, Kevin.
verified</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="62491" />
    <CreationDate amount="2004-05-17 11:43:00 -0400" />
    <DupId amount="20987" />
    <classification amount="Eclipse" />
    <Product amount="JDT" />
    <component amount="Text" />
    <Version amount="2.1.2" />
    <rep_platform amount="PC" />
    <op_sys amount="Linux" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Tooltip text not disappearing</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="DUPLICATE" />
    <WithStack>My tooltip text/javadoc that appears when i move the cursor over a method or
attribute often does NOT disappear when I change from one Editor window to another.
For instance, if I put my cursor over a method and I press F3 to go to that
method's declaration inside another class, then the yellow window remains...
really frustrating.


*** This bug has been marked as a duplicate of 20987 ***</WithStack>
    <WithOutStack>My tooltip text/javadoc that appears when i move the cursor over a method or
attribute often does NOT disappear when I change from one Editor window to another.
For instance, if I put my cursor over a method and I press F3 to go to that
method's declaration inside another class, then the yellow window remains...
really frustrating.


*** This bug has been marked as a duplicate of 20987 ***</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="62492" />
    <CreationDate amount="2004-05-17 11:45:00 -0400" />
    <DupId amount="65229" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="CVS" />
    <Version amount="3.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows 2000" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Startup hangs waiting for "Building Workspace" to complete</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="DUPLICATE" />
    <WithStack>Running I200405140800

Using a workspace that I had with M8, I've unzipped the integration build and 
attempted to start up.  The modal dialog box ("User Operation is Waiting") was 
up as it rebuilt the entire workspace, then a task was left in the dialog 
for "Java - build.xml - Eclipse Platform".

Now I cannot get to the workbench.
Nothing in the log file:
!SESSION May 17, 2004 14:42:16.801 ---------------------------------------------
eclipse.buildId=I200405140800
java.fullversion=J2RE 1.4.1 IBM J9 build 20040121 (JIT enabled)
BootLoader constants: OS=win32, ARCH=x86, WS=win32, NL=en_GB
!ENTRY org.eclipse.core.resources 2 1 May 17, 2004 14:42:16.801
!MESSAGE Skipping builder org.eclipse.cdt.managedbuilder.core.genmakebuilder 
for project AsyncIO_Linux_Natives. Either the builder is missing from the 
install, or it belongs to a project nature that is missing or disabled.
!ENTRY org.eclipse.core.resources 2 1 May 17, 2004 14:42:16.811
!MESSAGE Skipping builder net.sourceforge.metrics.builder for project Cleanroom 
Beans. Either the builder is missing from the install, or it belongs to a 
project nature that is missing or disabled.
Traced the problem to a build.xml Ant file in my project.

By externally renaming the file to old.build.xml the workspace starts up ok.

So the bug seems to relate to starting the I20040514 workspace with a build.xml 
file -- I can provide the build.xml file if requested, but it is just doing 
some Ant tasks.  I didn't expect it to be run on workspace start-up.
I see the same thing with M9. In addition, it also seems to occur when I try to
do Project&gt;Clean to rebuild, or if I switch JREs. I doesn't happen as reliably
if I do something else that requires a full rebuild, like changing the libraries
in the project build path.

Luckily, I found this bug and renaming my build.xml file got me past the problem.
Are you guys sure the mentioned build.xml was not configured as an external
builder for the enclosing project? Check the project properties, "Builders"
node. Which builders appear there?

Tim, it seems you are using CDT. Jay, are you using only the Eclipse SDK
(Platform+JDT+PDE), with no 3rd-party plugins?
Life has moved on since then, so I'm not sure i can reproduce it easily.

Looking at the log file above it is very likely that the 
net.sourceforge.metrics.builder was listed in the external builders for the 
project, and that the plugin was not present in the workbench after the upgrade 
(i.e. after upgrade, the project was likely referencing a builder that did not 
exist).

I would have expected it to complain, but to freeze, upon startup.
I don't expect a missing builder to cause a freeze, but a faulty one. 

Jay, could you answer my question above? Can you provide your build.xml as well?
Thanks.
Created attachment 12826
requested build.xml from project

My project Properties&gt;Builders shows only Java Builder, and it is checked. I've
attached the build.xml file from the project.

What I am seeing is that eclipse seems to be hung on 'Cleaning output folders';
I look at the output folder I have configured, and it _is_ empty, but nothing
else seems to happen. I've taken to manually killing the eclipse process and
restarting, and that does typically work, that is, eclipse restarts and
proceeds to rebuild the workspace just fine.

Needless to say, this is quite annoying. I've just switched to RC3, so I'll see
if I encounter it again with this version.
A little more information... when eclipse gets hung like this, it is certainly
trying to do something, because it pegs the CPU on my windows 2000 box. Also,
trying to cancel the task from the progress dialog by clicking on the red square
doesn't work either (though the square becomes disabled).
If you run with java.exe (instead of javaw.exe) you should be able to get a
thread dump buy pressing Ctrl-Break in the text window. That would give us a
good idea on who is doing the extra work.

Adding JohnA as he may have some insight on what is going on.
BTW: to explicit run with java.exe, use the -vm option:

eclipse &lt;your regular arguments&gt; -vm &lt;java_home&gt;\bin\java.exe [-vmargs &lt;vm args&gt;]
Created attachment 12857
Requested thread trace

I've attached the requested thread trace. I took the trace after a couple
minutes, when eclipse seemed to be stuck on 'Cleaning output folder.". After
maybe 10 or fifteen minutes, eclipse did recover and continue processing, but
that seems unacceptable to me.
Jay, I cannot understand what the build.xml has to do with this issue.

The VM dump you sent seems to suggest you have your output directory under CVS
control. Is that the case?


Rafael, I don't know what build.xml has to do with the issue either, other than
when eclipse seems to get stuck on workspace rebuild on start up, renaming that
file seemed to let eclipse not get stuck on start up. Perhaps the renaming is a
bit of a red herring and something else is behind eclipse not getting stuck.

As far as output directory and CVS, yes, that's sort of correct. The output
directory is listed in the .cvsignore file for the project, but somehow the CVS
directories still keep getting created there, even though, for instance, they do
not show up in the CVS Repository Exploring perspective, and nothing has ever
been checked in or out from those directories. I'm not a CVS guru and I haven't
noticed any problems with it (except this perhaps) and so I haven't made time to
explore it further.

Also, so far I haven't had the problem with RC3, but I haven't tried the final
release yet.
Please open the properties dialog for the output folder (context menu,
"Properties..."). In the CVS page, is the "Disconnect..." button enabled? If so,
force it to disconnect. Ensure direct subdirectories are disconnected as well
(the previous step should have caused that). This should be done for all shared
projects you have in your workspace.




Jay, was your output directory shared (did you have to disconnect as suggested)?
Did it fix the problem?
Well, I wasn't sure what you meant by 'context menu, properties', so in the
resource perspective, I right-clicked on my build directory and selected
Properties from that popup menu. On the CVS item there, it says 'The folder is
not managed by CVS'.

However, there do exist CVS directories under my build directory. My build
directory is listed in my .cvsignore file, so I don't know if that impacts what
the properties says.
Moving to Platform/CVS for comments. Maybe related to bug 48044 (directory not
shared but containing CVS metadata files). The thread dump seems to indicate
that a lot of work is being done because the CVS plugin is actually managing the
output dir.
The problem may be that the builder (Ant) copied the CVS folders into the 
build output directory. This will trigger checks when resources are deleted 
and recreated. We made some improvments just before 3.0 shipped. Is the 
problem any less severe in the final 3.0 release?

For 3.1, we should profile build output directories that are shared. We should 
also investigate scenarios that involve external builders that copy CVS 
directories.
I've had an in-depth look at the stack trace and this is the same issue that 
was addressed by bug 65229.

*** This bug has been marked as a duplicate of 65229 ***</WithStack>
    <WithOutStack>Running I200405140800

Using a workspace that I had with M8, I've unzipped the integration build and 
attempted to start up.  The modal dialog box ("User Operation is Waiting") was 
up as it rebuilt the entire workspace, then a task was left in the dialog 
for "Java - build.xml - Eclipse Platform".

Now I cannot get to the workbench.
Nothing in the log file:
!SESSION May 17, 2004 14:42:16.801 ---------------------------------------------
eclipse.buildId=I200405140800
java.fullversion=J2RE 1.4.1 IBM J9 build 20040121 (JIT enabled)
BootLoader constants: OS=win32, ARCH=x86, WS=win32, NL=en_GB
!ENTRY org.eclipse.core.resources 2 1 May 17, 2004 14:42:16.801
!MESSAGE Skipping builder org.eclipse.cdt.managedbuilder.core.genmakebuilder 
for project AsyncIO_Linux_Natives. Either the builder is missing from the 
install, or it belongs to a project nature that is missing or disabled.
!ENTRY org.eclipse.core.resources 2 1 May 17, 2004 14:42:16.811
!MESSAGE Skipping builder net.sourceforge.metrics.builder for project Cleanroom 
Beans. Either the builder is missing from the install, or it belongs to a 
project nature that is missing or disabled.
Traced the problem to a build.xml Ant file in my project.

By externally renaming the file to old.build.xml the workspace starts up ok.

So the bug seems to relate to starting the I20040514 workspace with a build.xml 
file -- I can provide the build.xml file if requested, but it is just doing 
some Ant tasks.  I didn't expect it to be run on workspace start-up.
I see the same thing with M9. In addition, it also seems to occur when I try to
do Project&gt;Clean to rebuild, or if I switch JREs. I doesn't happen as reliably
if I do something else that requires a full rebuild, like changing the libraries
in the project build path.

Luckily, I found this bug and renaming my build.xml file got me past the problem.
Are you guys sure the mentioned build.xml was not configured as an external
builder for the enclosing project? Check the project properties, "Builders"
node. Which builders appear there?

Tim, it seems you are using CDT. Jay, are you using only the Eclipse SDK
(Platform+JDT+PDE), with no 3rd-party plugins?
Life has moved on since then, so I'm not sure i can reproduce it easily.

Looking at the log file above it is very likely that the 
net.sourceforge.metrics.builder was listed in the external builders for the 
project, and that the plugin was not present in the workbench after the upgrade 
(i.e. after upgrade, the project was likely referencing a builder that did not 
exist).

I would have expected it to complain, but to freeze, upon startup.
I don't expect a missing builder to cause a freeze, but a faulty one. 

Jay, could you answer my question above? Can you provide your build.xml as well?
Thanks.
Created attachment 12826
requested build.xml from project

My project Properties&gt;Builders shows only Java Builder, and it is checked. I've
attached the build.xml file from the project.

What I am seeing is that eclipse seems to be hung on 'Cleaning output folders';
I look at the output folder I have configured, and it _is_ empty, but nothing
else seems to happen. I've taken to manually killing the eclipse process and
restarting, and that does typically work, that is, eclipse restarts and
proceeds to rebuild the workspace just fine.

Needless to say, this is quite annoying. I've just switched to RC3, so I'll see
if I encounter it again with this version.
A little more information... when eclipse gets hung like this, it is certainly
trying to do something, because it pegs the CPU on my windows 2000 box. Also,
trying to cancel the task from the progress dialog by clicking on the red square
doesn't work either (though the square becomes disabled).
If you run with java.exe (instead of javaw.exe) you should be able to get a
thread dump buy pressing Ctrl-Break in the text window. That would give us a
good idea on who is doing the extra work.

Adding JohnA as he may have some insight on what is going on.
BTW: to explicit run with java.exe, use the -vm option:

eclipse &lt;your regular arguments&gt; -vm &lt;java_home&gt;\bin\java.exe [-vmargs &lt;vm args&gt;]
Created attachment 12857
Requested thread trace

I've attached the requested thread trace. I took the trace after a couple
minutes, when eclipse seemed to be stuck on 'Cleaning output folder.". After
maybe 10 or fifteen minutes, eclipse did recover and continue processing, but
that seems unacceptable to me.
Jay, I cannot understand what the build.xml has to do with this issue.

The VM dump you sent seems to suggest you have your output directory under CVS
control. Is that the case?


Rafael, I don't know what build.xml has to do with the issue either, other than
when eclipse seems to get stuck on workspace rebuild on start up, renaming that
file seemed to let eclipse not get stuck on start up. Perhaps the renaming is a
bit of a red herring and something else is behind eclipse not getting stuck.

As far as output directory and CVS, yes, that's sort of correct. The output
directory is listed in the .cvsignore file for the project, but somehow the CVS
directories still keep getting created there, even though, for instance, they do
not show up in the CVS Repository Exploring perspective, and nothing has ever
been checked in or out from those directories. I'm not a CVS guru and I haven't
noticed any problems with it (except this perhaps) and so I haven't made time to
explore it further.

Also, so far I haven't had the problem with RC3, but I haven't tried the final
release yet.
Please open the properties dialog for the output folder (context menu,
"Properties..."). In the CVS page, is the "Disconnect..." button enabled? If so,
force it to disconnect. Ensure direct subdirectories are disconnected as well
(the previous step should have caused that). This should be done for all shared
projects you have in your workspace.




Jay, was your output directory shared (did you have to disconnect as suggested)?
Did it fix the problem?
Well, I wasn't sure what you meant by 'context menu, properties', so in the
resource perspective, I right-clicked on my build directory and selected
Properties from that popup menu. On the CVS item there, it says 'The folder is
not managed by CVS'.

However, there do exist CVS directories under my build directory. My build
directory is listed in my .cvsignore file, so I don't know if that impacts what
the properties says.
Moving to Platform/CVS for comments. Maybe related to bug 48044 (directory not
shared but containing CVS metadata files). The thread dump seems to indicate
that a lot of work is being done because the CVS plugin is actually managing the
output dir.
The problem may be that the builder (Ant) copied the CVS folders into the 
build output directory. This will trigger checks when resources are deleted 
and recreated. We made some improvments just before 3.0 shipped. Is the 
problem any less severe in the final 3.0 release?

For 3.1, we should profile build output directories that are shared. We should 
also investigate scenarios that involve external builders that copy CVS 
directories.
I've had an in-depth look at the stack trace and this is the same issue that 
was addressed by bug 65229.

*** This bug has been marked as a duplicate of 65229 ***</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="62493" />
    <CreationDate amount="2004-05-17 11:50:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="Team" />
    <Version amount="3.0" />
    <rep_platform amount="Macintosh" />
    <op_sys amount="Mac OS X - Carbon (unsup.)" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Synch view status message is not very meaningfull when updating</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="6">
        <Lines>
          <Line>- selected 10 projects and chose team synchronize</Line>
          <Line>- when in the sync view I selected all the projects and chose Update</Line>
          <Line>- then I selected them all and chose Update and Override to get the few changes that would override</Line>
          <Line>my work</Line>
          <Line>- the synch view had a long status message with all the project names with slashes, commas etc... and</Line>
          <Line>all in one long string that is not easily broken up.</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="RESOLVED" />
    <resolution amount="WONTFIX" />
    <WithStack>build I20050514

- selected 10 projects and chose team synchronize
- when in the sync view I selected all the projects and chose Update
- then I selected them all and chose Update and Override to get the few changes that would override 
my work
- the synch view had a long status message with all the project names with slashes, commas etc... and 
all in one long string that is not easily broken up.

see attached pic.


Other Notes:

- since the view can start multiple jobs the status message should be simple and represent the one or 
more types of jobs that are occuring perhaps, 


something like

CVS updating, overriding and committing changes.... 

I can go to the progress view if I need more details, and there the jobs could be more explicit about 
what they are doing
Created attachment 10729
synch view status message
Just to let you know, this isn't really the status line. It's the name of the
synchronization being shown. In your case you created a synchronization for 10
projects, and we should a hint about the scope in the name.

We could however figure out how to show the scope better. One hint, if you scope
to a working set, the working set name is shown instead of the list of resources.
The content description area in the sync view doens't show progress but the name
of the synchronization.</WithStack>
    <WithOutStack>build I20050514

- selected 10 projects and chose team synchronize
- when in the sync view I selected all the projects and chose Update
- then I selected them all and chose Update and Override to get the few changes that would override 
my work
- the synch view had a long status message with all the project names with slashes, commas etc... and 
all in one long string that is not easily broken up.

see attached pic.


Other Notes:

- since the view can start multiple jobs the status message should be simple and represent the one or 
more types of jobs that are occuring perhaps, 


something like

CVS updating, overriding and committing changes.... 

I can go to the progress view if I need more details, and there the jobs could be more explicit about 
what they are doing
Created attachment 10729
synch view status message
Just to let you know, this isn't really the status line. It's the name of the
synchronization being shown. In your case you created a synchronization for 10
projects, and we should a hint about the scope in the name.

We could however figure out how to show the scope better. One hint, if you scope
to a working set, the working set name is shown instead of the list of resources.
The content description area in the sync view doens't show progress but the name
of the synchronization.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="62494" />
    <CreationDate amount="2004-05-17 12:03:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="Team" />
    <Version amount="3.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Linux" />
    <priority amount="P3" />
    <bug_severity amount="enhancement" />
    <Summery>Minor usability problem with cached CVS commit logs.</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>There is a minor usability problems with the saved CVS commit logs (the
drop-down under "Choose a previously entered comment:" when you do a CVS commit).

If you choose a previously entered comment at the top of the list, commit, and
then go back (ie/ try to commit another resource), then your drop-down isn't
modified.  BUT if you choose any another comment (ie/ any comment other than
that at the top of the list) then, when you go back, the drop-down will contain
a new entry.

The problem arises when you are looping through a number of commits with the
same comment -- you end up pushing all other comments off of the list.  Could
the logic populating the drop-down be modified so that if it finds a previously
existing match to your comment (either selected or freshly typed in) then the
drop-down will either not be modified, or will have that comment moved to the
top of the list?
Fixed
*** Bug 40648 has been marked as a duplicate of this bug. ***</WithStack>
    <WithOutStack>There is a minor usability problems with the saved CVS commit logs (the
drop-down under "Choose a previously entered comment:" when you do a CVS commit).

If you choose a previously entered comment at the top of the list, commit, and
then go back (ie/ try to commit another resource), then your drop-down isn't
modified.  BUT if you choose any another comment (ie/ any comment other than
that at the top of the list) then, when you go back, the drop-down will contain
a new entry.

The problem arises when you are looping through a number of commits with the
same comment -- you end up pushing all other comments off of the list.  Could
the logic populating the drop-down be modified so that if it finds a previously
existing match to your comment (either selected or freshly typed in) then the
drop-down will either not be modified, or will have that comment moved to the
top of the list?
Fixed
*** Bug 40648 has been marked as a duplicate of this bug. ***</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="62495" />
    <CreationDate amount="2004-05-17 12:10:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="Doc" />
    <Version amount="3.0" />
    <rep_platform amount="All" />
    <op_sys amount="All" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Customize Perspective dialog has changed</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>From the newsgroups: 
"Where the heck is it?  This Window&gt;Customize Perspective&gt;Other window is 
mentioned in lots of manuals but does not seem to exist.  Some kind of evil 
conspiracy, I suspect." 
 
He is right.  The description of the customize perspective dialog is somewhat 
dated.
This doc was updated in 3.5 when the customize perspective dialog was overhauled.</WithStack>
    <WithOutStack>From the newsgroups: 
"Where the heck is it?  This Window&gt;Customize Perspective&gt;Other window is 
mentioned in lots of manuals but does not seem to exist.  Some kind of evil 
conspiracy, I suspect." 
 
He is right.  The description of the customize perspective dialog is somewhat 
dated.
This doc was updated in 3.5 when the customize perspective dialog was overhauled.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="62496" />
    <CreationDate amount="2004-05-17 12:15:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="UI" />
    <Version amount="3.0" />
    <rep_platform amount="All" />
    <op_sys amount="All" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>cheat sheet viewer lifecycle</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="9">
        <Lines>
          <Line>(1) client code calls CheatSheetFactory.createCheatSheetView() and is given a</Line>
          <Line>handle to an ICheatSheetViewer</Line>
          <Line>(2) client code calls ICheatSheetViewer.createPartControl(Composite parent)</Line>
          <Line>which adds the CheatSheetViewer as a child of the parent composite</Line>
          <Line>(3) client code can call ICheatSheetViewer.getControl() to interact with the</Line>
          <Line>viewer at the widget level if required, setting layout constraints, etc</Line>
          <Line>(4) when the parent composite is disposed, the DisposeListener on the</Line>
          <Line>CheatSheetViewer's "control" is tiggered and any extra resources used by the</Line>
          <Line>viewer are disposed</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="RESOLVED" />
    <resolution amount="FIXED" />
    <WithStack>Build I20040514

The lifecycle of the cheat sheet viewers is unclear in the API spec.

===pasted from Lorne's e-mail===
Let's say that the Composite is in a view and when the view is closed, dispose 
will be called on the Composite automatically by virtue of SWT widget. This 
will in turn call dispose on all the children controls and the 
ICheatSheetViewer has a child  of the Composite which the CheatSheetViewer 
adds a dispose listener to. When the listener is tiggered, the 
CheatSheetViewer then disposes of any auxiliary resources that it has.

+--------------------------------+
|   Composite                    |
|                                |
|                                |
|                                |
|   Label    TextField           |
|   Button                       |
|                                |
|                                |
|   +--------------------+       |
|   | ICheatSheetViewer  |       |
|   |                    |       |
|   |                    |       |
|   |                    |       |
|   |                    |       |
|   |                    |       |
|   |                    |       |
|   +--------------------+       |
|                                |
|                                |
+--------------------------------+

As for lifecycle, here is the order of events as I see it:
(1) client code calls CheatSheetFactory.createCheatSheetView() and is given a 
handle to an ICheatSheetViewer
(2) client code calls ICheatSheetViewer.createPartControl(Composite parent) 
which adds the CheatSheetViewer as a child of the parent composite
(3) client code can call ICheatSheetViewer.getControl() to interact with the 
viewer at the widget level if required, setting layout constraints, etc
(4) when the parent composite is disposed, the DisposeListener on the 
CheatSheetViewer's "control" is tiggered and any extra resources used by the 
viewer are disposed

The spec for CheatSheetFactory.createCheatSheetView() and 
ICheatSheetViewer.createPartControl(Composite parent) should be improved to 
explain that disposing of the viewer/controls is not a client responsibility.

There is an extra API method, ICheatSheetViewer.dispose(), that plays no role. 
This method (added in 3.0 along with all cheat sheet API) should be deleted 
from the API.
Created attachment 10736
patch to ui.cheatsheets to clarify viewer lifecycle
Created attachment 10737
patch to platform to remove call to ICheatSheetViewer.dispose()

This patch needs to be applied to o.e.platform.
Change approved for 3.0. Lorne, please coordinate with Dejan to get the 
changes to o.e.ui.cheatsheets and o.e.platform in for the M9 I-build.
The fix has been released to HEAD.</WithStack>
    <WithOutStack>Build I20040514

The lifecycle of the cheat sheet viewers is unclear in the API spec.

===pasted from Lorne's e-mail===
Let's say that the Composite is in a view and when the view is closed, dispose 
will be called on the Composite automatically by virtue of SWT widget. This 
will in turn call dispose on all the children controls and the 
ICheatSheetViewer has a child  of the Composite which the CheatSheetViewer 
adds a dispose listener to. When the listener is tiggered, the 
CheatSheetViewer then disposes of any auxiliary resources that it has.

+--------------------------------+
|   Composite                    |
|                                |
|                                |
|                                |
|   Label    TextField           |
|   Button                       |
|                                |
|                                |
|   +--------------------+       |
|   | ICheatSheetViewer  |       |
|   |                    |       |
|   |                    |       |
|   |                    |       |
|   |                    |       |
|   |                    |       |
|   |                    |       |
|   +--------------------+       |
|                                |
|                                |
+--------------------------------+

As for lifecycle, here is the order of events as I see it:
(1) client code calls CheatSheetFactory.createCheatSheetView() and is given a 
handle to an ICheatSheetViewer
(2) client code calls ICheatSheetViewer.createPartControl(Composite parent) 
which adds the CheatSheetViewer as a child of the parent composite
(3) client code can call ICheatSheetViewer.getControl() to interact with the 
viewer at the widget level if required, setting layout constraints, etc
(4) when the parent composite is disposed, the DisposeListener on the 
CheatSheetViewer's "control" is tiggered and any extra resources used by the 
viewer are disposed

The spec for CheatSheetFactory.createCheatSheetView() and 
ICheatSheetViewer.createPartControl(Composite parent) should be improved to 
explain that disposing of the viewer/controls is not a client responsibility.

There is an extra API method, ICheatSheetViewer.dispose(), that plays no role. 
This method (added in 3.0 along with all cheat sheet API) should be deleted 
from the API.
Created attachment 10736
patch to ui.cheatsheets to clarify viewer lifecycle
Created attachment 10737
patch to platform to remove call to ICheatSheetViewer.dispose()

This patch needs to be applied to o.e.platform.
Change approved for 3.0. Lorne, please coordinate with Dejan to get the 
changes to o.e.ui.cheatsheets and o.e.platform in for the M9 I-build.
The fix has been released to HEAD.</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="62497" />
    <CreationDate amount="2004-05-17 12:15:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="Update  (deprecated - use RT&gt;Equinox&gt;p2)" />
    <Version amount="3.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows 2000" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>"Manage Configuration-&gt;Add Extension location" broken</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="WORKSFORME" />
    <WithStack>This is for integration build 200405140800. This functionality worked in 3.0 M8
but it seems broken in this build.
"Software Updates-&gt;Manage Configuration-&gt;Add an extension location" then select
the extension directory. This build complains that this is not an extension
location. 
This is location that I put together, creating a features/plugins directory,
copying some 3rd party plugins that we are using. I also put a .eclipseextension
file into the location.
PS: This way I can bundle some commonly used plugins and share them without my
colegues, and update to Eclipse later version easily.
There have been some changes (follow the mailing list and the bug reports) in 
this area.
All you need to do is host your features and plugins inside an eclipse folder:

your_old_directory
                  eclipse    (new subfolder)
                         .eclipseextension
                         features
                         plugins</WithStack>
    <WithOutStack>This is for integration build 200405140800. This functionality worked in 3.0 M8
but it seems broken in this build.
"Software Updates-&gt;Manage Configuration-&gt;Add an extension location" then select
the extension directory. This build complains that this is not an extension
location. 
This is location that I put together, creating a features/plugins directory,
copying some 3rd party plugins that we are using. I also put a .eclipseextension
file into the location.
PS: This way I can bundle some commonly used plugins and share them without my
colegues, and update to Eclipse later version easily.
There have been some changes (follow the mailing list and the bug reports) in 
this area.
All you need to do is host your features and plugins inside an eclipse folder:

your_old_directory
                  eclipse    (new subfolder)
                         .eclipseextension
                         features
                         plugins</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="62498" />
    <CreationDate amount="2004-05-17 12:17:00 -0400" />
    <DupId amount="61665" />
    <classification amount="Eclipse" />
    <Product amount="Platform" />
    <component amount="CVS" />
    <Version amount="3.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="trivial" />
    <Summery>Missing resource in Move Tag Dialog</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="RESOLVED" />
    <resolution amount="DUPLICATE" />
    <WithStack>I200405131600

The dialog which asks whether I want to move a tag has a missing resource (see
attached picture).
Created attachment 10732
Move Tag dialog


*** This bug has been marked as a duplicate of 61665 ***</WithStack>
    <WithOutStack>I200405131600

The dialog which asks whether I want to move a tag has a missing resource (see
attached picture).
Created attachment 10732
Move Tag dialog


*** This bug has been marked as a duplicate of 61665 ***</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="62499" />
    <CreationDate amount="2004-05-17 12:19:00 -0400" />
    <DupId amount="62552" />
    <classification amount="Eclipse" />
    <Product amount="JDT" />
    <component amount="UI" />
    <Version amount="3.0" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows XP" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>Externalize String opens the editor shifted away from the cell</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="1">
      <Enumeration lines="3">
        <Lines>
          <Line>1) Externalize strings on a java file</Line>
          <Line>2) Select an entry</Line>
          <Line>3) Floating editor is shifted over</Line>
        </Lines>
      </Enumeration>
    </Enumerations>
    <bug_status amount="RESOLVED" />
    <resolution amount="DUPLICATE" />
    <WithStack>The floating editor that opens above an entry in the externalize strings 
dialog is shifted over roughly one character.

STEPS
1) Externalize strings on a java file
2) Select an entry
3) Floating editor is shifted over

I will attach a screenshot
Created attachment 10733
Screenshot
This is an SWT issue.
The problem is that TableItem.getImageBounds(int) is returning a non-zero 
rectangle when no image exists.


*** This bug has been marked as a duplicate of 62552 ***</WithStack>
    <WithOutStack>The floating editor that opens above an entry in the externalize strings 
dialog is shifted over roughly one character.

STEPS
1) Externalize strings on a java file
2) Select an entry
3) Floating editor is shifted over

I will attach a screenshot
Created attachment 10733
Screenshot
This is an SWT issue.
The problem is that TableItem.getImageBounds(int) is returning a non-zero 
rectangle when no image exists.


*** This bug has been marked as a duplicate of 62552 ***</WithOutStack>
  </Bug>
  <Bug>
    <BugId amount="62500" />
    <CreationDate amount="2004-05-17 12:23:00 -0400" />
    <DupId amount="" />
    <classification amount="Eclipse Foundation" />
    <Product amount="z_Archived" />
    <component amount="Hyades" />
    <Version amount="unspecified" />
    <rep_platform amount="PC" />
    <op_sys amount="Windows 2000" />
    <priority amount="P3" />
    <bug_severity amount="normal" />
    <Summery>README defect: Document limitation of bug 62389</Summery>
    <Patches amount="0" />
    <Stacktraces amount="0" />
    <SourceCodeRegions amount="0" />
    <Enumerations amount="0" />
    <bug_status amount="CLOSED" />
    <resolution amount="FIXED" />
    <WithStack>Need to document in the readme the limitation caused by bug 62389. 

If a user deattaches nearly after pressing the 'Collect Object References'
button, they can cause the JVM to become unstable and potentially crash at some
later point. 

The work around: Do not deattach immediately after pressing the Collect Object
References button, or while the process is still processing the heap dump
initiated by pressing Collect Object References. To verify the process has
finished processing the heap dump, the user can open the Object References view
and periodically press the 'refresh' button. When no new data appears in this
view, the heap dump processing should have ended.
Added to readme. Will be posted today (June 8)
As of TPTP 4.6.0, TPTP is in maintenance mode and focusing on improving quality by resolving relevant enhancements/defects and increasing test coverage through test creation, automation, Build Verification Tests (BVTs), and expanded run-time execution. As part of the TPTP Bugzilla housecleaning process (see http://wiki.eclipse.org/Bugzilla_Housecleaning_Processes), this enhancement/defect is verified/closed by the Project Lead since this enhancement/defect has been resolved and unverified for more than 1 year and considered to be fixed. If this enhancement/defect is still unresolved and reproducible in the latest TPTP release (http://www.eclipse.org/tptp/home/downloads/), please re-open.</WithStack>
    <WithOutStack>Need to document in the readme the limitation caused by bug 62389. 

If a user deattaches nearly after pressing the 'Collect Object References'
button, they can cause the JVM to become unstable and potentially crash at some
later point. 

The work around: Do not deattach immediately after pressing the Collect Object
References button, or while the process is still processing the heap dump
initiated by pressing Collect Object References. To verify the process has
finished processing the heap dump, the user can open the Object References view
and periodically press the 'refresh' button. When no new data appears in this
view, the heap dump processing should have ended.
Added to readme. Will be posted today (June 8)
As of TPTP 4.6.0, TPTP is in maintenance mode and focusing on improving quality by resolving relevant enhancements/defects and increasing test coverage through test creation, automation, Build Verification Tests (BVTs), and expanded run-time execution. As part of the TPTP Bugzilla housecleaning process (see http://wiki.eclipse.org/Bugzilla_Housecleaning_Processes), this enhancement/defect is verified/closed by the Project Lead since this enhancement/defect has been resolved and unverified for more than 1 year and considered to be fixed. If this enhancement/defect is still unresolved and reproducible in the latest TPTP release (http://www.eclipse.org/tptp/home/downloads/), please re-open.</WithOutStack>
  </Bug>
</infozilla-output>

